<div class="modal-overlay" *ngIf="isOpen" (click)="close()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Work Order Costs</h3>
      <button class="close" (click)="close()">×</button>
    </div>
    <div class="modal-body">
      <div *ngIf="loading" class="text-sm text-gray-500">Loading costs...</div>

      <div class="summary">
        <div>
          <div class="label">Labor</div>
          <div class="value">{{ (laborMinutes/60) | number:'1.2-2' }} hrs • ${{ laborCost | number:'1.2-2' }}</div>
        </div>
        <div>
          <div class="label">Parts</div>
          <div class="value">${{ partsCost | number:'1.2-2' }}</div>
        </div>
        <div>
          <div class="label">Total</div>
          <div class="value total">${{ totalCost | number:'1.2-2' }}</div>
        </div>
      </div>

      <h4>Parts</h4>
      <div *ngIf="parts.length === 0" class="text-sm text-gray-500">No parts added.</div>
      <div class="parts-list" *ngIf="parts.length">
        <div class="row" *ngFor="let p of parts">
          <div class="name">{{ p.part?.name || ('Part #' + p.part_id) }}</div>
          <div class="qty">x{{ p.qty }}</div>
          <div class="cost">${{ ((($any(p).unit_cost || 0) * ($any(p).qty || 0)) | number:'1.2-2') }}</div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="close()">Close</button>
    </div>
  </div>
</div>


