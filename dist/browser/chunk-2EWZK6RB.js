import{a as k}from"./chunk-AGZKIGCI.js";import{c as L,d as v,e as P,f as R,i as A,m as T,p as j,v as N,x as G,z as V}from"./chunk-QSSEIZE5.js";import{c as K,e as F,i as ee}from"./chunk-S7VXDLKB.js";import"./chunk-6WXWVH7L.js";import{l as I,v as re}from"./chunk-5QZV6OHW.js";import{$a as M,Bb as S,Eb as x,Fb as c,Ka as E,Na as a,Sa as f,Sb as n,Tb as C,Y,ab as J,eb as h,ia as w,ja as b,ka as g,la as _,lb as l,nb as y,vb as e,wb as t,xb as d}from"./chunk-C2UTIFX7.js";import"./chunk-EQDQRRRY.js";function oe(r,o){if(r&1){let i=S();e(0,"button",35),x("click",function(){w(i);let m=c(2);return b(m.resendVerification())}),n(1," Resend verification email "),t()}if(r&2){let i=c(2);l("disabled",i.isLoading)}}function se(r,o){if(r&1&&(e(0,"div",32)(1,"p",33),n(2),t(),h(3,oe,2,1,"button",34),t()),r&2){let i=c();a(2),C(i.emailVerificationMessage),a(),l("ngIf",i.showResendVerification)}}function ae(r,o){if(r&1&&(e(0,"div",36)(1,"p",37),n(2),t()()),r&2){let i=c();a(2),C(i.errorMessage)}}function le(r,o){r&1&&(e(0,"span"),n(1,"Sign In"),t())}function me(r,o){r&1&&(e(0,"span",38),g(),e(1,"svg",39),d(2,"circle",40)(3,"path",41),t(),n(4," Signing In... "),t())}var D=class r{constructor(o,i,s){this.fb=o;this.router=i;this.authService=s;this.loginForm=this.fb.group({email:["",[v.required,v.email]],password:["",[v.required,v.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";emailVerificationMessage="";showResendVerification=!1;userId=null;toggleMode(){this.router.navigate(["/register"])}onSubmit(){this.loginForm.valid&&!this.isLoading&&(this.isLoading=!0,this.errorMessage="",this.emailVerificationMessage="",this.showResendVerification=!1,this.authService.login(this.loginForm.value).subscribe({next:o=>{o.success?this.router.navigate(["/dashboard"]):(this.errorMessage=o.message||"Login failed",o.email_verified===!1&&(this.emailVerificationMessage=o.message,this.showResendVerification=!0,this.userId=o.user_id||null)),this.isLoading=!1},error:o=>{let i=o.error;this.errorMessage=i?.message||"An error occurred during login",i?.email_verified===!1&&(this.emailVerificationMessage=i.message,this.showResendVerification=!0,this.userId=i.user_id||null),this.isLoading=!1}}))}resendVerification(){if(!this.loginForm.get("email")?.value){this.errorMessage="Please enter your email address";return}this.isLoading=!0,this.errorMessage="",this.authService.resendVerification({email:this.loginForm.get("email")?.value}).subscribe({next:o=>{o.success?(this.emailVerificationMessage=o.message,this.showResendVerification=!1):this.errorMessage=o.message||"Failed to resend verification email",this.isLoading=!1},error:o=>{this.errorMessage=o.error?.message||"Failed to resend verification email",this.isLoading=!1}})}goToForgotPassword(){this.router.navigate(["/auth/forgot-password"])}static \u0275fac=function(i){return new(i||r)(f(G),f(F),f(k))};static \u0275cmp=M({type:r,selectors:[["app-login"]],decls:53,vars:11,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center","mb-6"],[1,"flex","items-center","space-x-3"],["alt","AssetGo Logo",1,"h-20","w-auto",3,"src"],[1,"text-gray-600"],[1,"bg-white","rounded-2xl","shadow-lg","p-8","max-w-md","mx-auto"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex","mb-8","bg-gray-100","rounded-lg","p-1"],["type","button",1,"flex-1","py-2","px-4","text-center","font-medium","rounded-md","bg-blue-600","text-white","transition-all","cursor-pointer"],["type","button",1,"flex-1","py-2","px-4","text-center","font-medium","rounded-md","text-gray-600","hover:text-gray-800","transition-all","cursor-pointer",3,"click"],["class","mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",4,"ngIf"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","type","email","formControlName","email","placeholder","Enter your email","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password","type","password","formControlName","password","placeholder","Enter your password","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],[1,"text-left"],["type","button",1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],[1,"flex","justify-center","space-x-12","text-sm","text-gray-500","mt-8"],[1,"flex","flex-col","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"],[1,"mb-4","p-3","bg-yellow-50","border","border-yellow-200","rounded-lg"],[1,"text-yellow-800","text-sm"],["class","mt-2 text-blue-600 hover:text-blue-500 text-sm font-medium disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"mt-2","text-blue-600","hover:text-blue-500","text-sm","font-medium","disabled:opacity-50","cursor-pointer","disabled:cursor-not-allowed",3,"click","disabled"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,s){if(i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),t()(),e(6,"p",6),n(7,"Enterprise Asset Management System"),t()(),e(8,"div",7)(9,"div",8)(10,"h2",9),n(11,"Welcome"),t(),e(12,"p",6),n(13,"Sign in to your account or create a new one"),t()(),e(14,"div",10)(15,"button",11),n(16," Sign In "),t(),e(17,"button",12),x("click",function(){return s.toggleMode()}),n(18," Sign Up "),t()(),h(19,se,4,2,"div",13)(20,ae,3,1,"div",14),e(21,"form",15),x("ngSubmit",function(){return s.onSubmit()}),e(22,"div",16)(23,"div")(24,"label",17),n(25,"Email"),t(),d(26,"input",18),t(),e(27,"div")(28,"label",19),n(29,"Password"),t(),d(30,"input",20),t(),e(31,"div",21)(32,"button",22),x("click",function(){return s.goToForgotPassword()}),n(33," Forgot password? "),t()(),e(34,"button",23),h(35,le,2,0,"span",24)(36,me,5,0,"span",25),t()()()(),e(37,"div",26)(38,"div",27),g(),e(39,"svg",28),d(40,"path",29),t(),_(),e(41,"span"),n(42,"Secure"),t()(),e(43,"div",27),g(),e(44,"svg",28),d(45,"path",30),t(),_(),e(46,"span"),n(47,"Enterprise"),t()(),e(48,"div",27),g(),e(49,"svg",28),d(50,"path",31),t(),_(),e(51,"span"),n(52,"Multi-tenant"),t()()()()()),i&2){let m,u;a(5),l("src","images/logo.png",E),a(14),l("ngIf",s.emailVerificationMessage),a(),l("ngIf",s.errorMessage&&!s.emailVerificationMessage),a(),l("formGroup",s.loginForm),a(5),y("border-red-300",((m=s.loginForm.get("email"))==null?null:m.invalid)&&((m=s.loginForm.get("email"))==null?null:m.touched)),a(4),y("border-red-300",((u=s.loginForm.get("password"))==null?null:u.invalid)&&((u=s.loginForm.get("password"))==null?null:u.touched)),a(4),l("disabled",s.loginForm.invalid||s.isLoading),a(),l("ngIf",!s.isLoading),a(),l("ngIf",s.isLoading)}},dependencies:[I,V,A,L,P,R,N,T,j],encapsulation:2})};function de(r,o){if(r&1){let i=S();e(0,"div",14)(1,"div",2)(2,"div",3)(3,"div",15),g(),e(4,"svg",16),d(5,"path",17),t()()(),_(),e(6,"h2",18),n(7,"Registration Successful!"),t(),e(8,"p",19),n(9," User registered successfully. Please login now. "),t(),e(10,"div",20)(11,"p",21),n(12," Redirecting to login page in "),e(13,"span",22),n(14),t(),n(15," seconds "),t()(),e(16,"button",23),x("click",function(){w(i);let m=c();return b(m.toggleMode())}),n(17," Go to login now "),t()()()}if(r&2){let i=c();a(14),C(i.countdown)}}function ce(r,o){r&1&&(e(0,"div",49)(1,"p",50),n(2,"User registered successfully. Please check your email to verify your account."),t()())}function ue(r,o){r&1&&(e(0,"div",51),n(1," Passwords do not match "),t())}function pe(r,o){r&1&&(e(0,"span"),n(1,"Sign Up"),t())}function ge(r,o){r&1&&(e(0,"span",52),g(),e(1,"svg",53),d(2,"circle",54)(3,"path",55),t(),n(4," Creating Account... "),t())}function fe(r,o){if(r&1){let i=S();e(0,"div",14)(1,"div",24)(2,"h2",25),n(3,"Welcome"),t(),e(4,"p",6),n(5,"Sign in to your account or create a new one"),t()(),e(6,"div",26)(7,"button",27),x("click",function(){w(i);let m=c();return b(m.toggleMode())}),n(8," Sign In "),t(),e(9,"button",28),n(10," Sign Up "),t()(),h(11,ce,3,0,"div",29),e(12,"form",30),x("ngSubmit",function(){w(i);let m=c();return b(m.onSubmit())}),e(13,"div",31)(14,"div",32)(15,"div")(16,"label",33),n(17,"First Name"),t(),d(18,"input",34),t(),e(19,"div")(20,"label",35),n(21,"Last Name"),t(),d(22,"input",36),t()(),e(23,"div")(24,"label",37),n(25,"Company Name"),t(),d(26,"input",38),t(),e(27,"div")(28,"label",39),n(29,"Email"),t(),d(30,"input",40),t(),e(31,"div")(32,"label",41),n(33,"Password"),t(),d(34,"input",42),t(),e(35,"div")(36,"label",43),n(37,"Confirm Password"),t(),d(38,"input",44),h(39,ue,2,0,"div",45),t(),e(40,"button",46),h(41,pe,2,0,"span",47)(42,ge,5,0,"span",48),t()()()()}if(r&2){let i,s,m,u,U,W,ie,p=c();a(11),l("ngIf",p.showSuccessMessage),a(),l("formGroup",p.registerForm),a(6),y("border-red-300",((i=p.registerForm.get("first_name"))==null?null:i.invalid)&&((i=p.registerForm.get("first_name"))==null?null:i.touched)),a(4),y("border-red-300",((s=p.registerForm.get("last_name"))==null?null:s.invalid)&&((s=p.registerForm.get("last_name"))==null?null:s.touched)),a(4),y("border-red-300",((m=p.registerForm.get("company_name"))==null?null:m.invalid)&&((m=p.registerForm.get("company_name"))==null?null:m.touched)),a(4),y("border-red-300",((u=p.registerForm.get("email"))==null?null:u.invalid)&&((u=p.registerForm.get("email"))==null?null:u.touched)),a(4),y("border-red-300",((U=p.registerForm.get("password"))==null?null:U.invalid)&&((U=p.registerForm.get("password"))==null?null:U.touched)),a(4),y("border-red-300",((W=p.registerForm.get("password_confirmation"))==null?null:W.invalid)&&((W=p.registerForm.get("password_confirmation"))==null?null:W.touched)),a(),l("ngIf",(p.registerForm.errors==null?null:p.registerForm.errors.passwordMismatch)&&((ie=p.registerForm.get("password_confirmation"))==null?null:ie.touched)),a(),l("disabled",p.registerForm.invalid||p.isLoading),a(),l("ngIf",!p.isLoading),a(),l("ngIf",p.isLoading)}}var q=class r{constructor(o,i,s){this.fb=o;this.router=i;this.authService=s;this.registerForm=this.fb.group({first_name:["",[v.required]],last_name:["",[v.required]],company_name:["",[v.required]],email:["",[v.required,v.email]],password:["",[v.required,v.minLength(6)]],password_confirmation:["",[v.required]]},{validators:this.passwordMatchValidator})}registerForm;isLoading=!1;errorMessage="";showSuccessMessage=!1;countdown=60;countdownInterval;passwordMatchValidator(o){let i=o.get("password"),s=o.get("password_confirmation");return i&&s&&i.value===s.value?null:{passwordMismatch:!0}}toggleMode(){this.router.navigate(["/login"])}onSubmit(){this.registerForm.valid&&!this.isLoading&&(this.isLoading=!0,this.errorMessage="",this.showSuccessMessage=!1,this.authService.register(this.registerForm.value).subscribe({next:o=>{o.success?(this.showSuccessMessage=!0,this.startCountdown()):this.errorMessage=o.message||"Registration failed",this.isLoading=!1},error:o=>{this.errorMessage=o.error?.message||o.error?.error||"An error occurred during registration",this.isLoading=!1}}))}startCountdown(){this.countdown=60,this.countdownInterval=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(this.countdownInterval),this.router.navigate(["/login"]))},1e3)}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval)}static \u0275fac=function(i){return new(i||r)(f(G),f(F),f(k))};static \u0275cmp=M({type:r,selectors:[["app-register"]],decls:26,vars:3,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center","mb-6"],[1,"flex","items-center","space-x-3"],["alt","AssetGo Logo",1,"h-20","w-auto",3,"src"],[1,"text-gray-600"],["class","bg-white rounded-2xl shadow-lg p-8 max-w-md mx-auto",4,"ngIf"],[1,"flex","justify-center","space-x-12","text-sm","text-gray-500","mt-8"],[1,"flex","flex-col","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"],[1,"bg-white","rounded-2xl","shadow-lg","p-8","max-w-md","mx-auto"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6","leading-relaxed"],[1,"bg-blue-50","rounded-lg","p-4","mb-6"],[1,"text-blue-800","text-sm"],[1,"font-bold"],[1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex","mb-8","bg-gray-100","rounded-lg","p-1"],["type","button",1,"flex-1","py-2","px-4","text-center","font-medium","rounded-md","text-gray-600","hover:text-gray-800","transition-all","cursor-pointer",3,"click"],["type","button",1,"flex-1","py-2","px-4","text-center","font-medium","rounded-md","bg-blue-600","text-white","transition-all","cursor-pointer"],["class","mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-4"],["for","first_name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","first_name","type","text","formControlName","first_name","placeholder","First name","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","last_name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","last_name","type","text","formControlName","last_name","placeholder","Last name","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","company_name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","company_name","type","text","formControlName","company_name","placeholder","Enter your company name","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","type","email","formControlName","email","placeholder","Enter your email","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","type","password","formControlName","password","placeholder","Create a password","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password_confirmation","type","password","formControlName","password_confirmation","placeholder","Confirm your password","required","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer","mt-6",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],[1,"mb-4","p-3","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-600","text-sm"],[1,"text-red-500","text-xs","mt-1"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),t()(),e(6,"p",6),n(7,"Enterprise Asset Management System"),t()(),h(8,de,18,1,"div",7)(9,fe,43,18,"div",7),e(10,"div",8)(11,"div",9),g(),e(12,"svg",10),d(13,"path",11),t(),_(),e(14,"span"),n(15,"Secure"),t()(),e(16,"div",9),g(),e(17,"svg",10),d(18,"path",12),t(),_(),e(19,"span"),n(20,"Enterprise"),t()(),e(21,"div",9),g(),e(22,"svg",10),d(23,"path",13),t(),_(),e(24,"span"),n(25,"Multi-tenant"),t()()()()()),i&2&&(a(5),l("src","images/logo.png",E),a(3),l("ngIf",s.showSuccessMessage),a(),l("ngIf",!s.showSuccessMessage))},dependencies:[I,V,A,L,P,R,N,T,j],encapsulation:2})};function xe(r,o){if(r&1&&(e(0,"div",20)(1,"p",21),n(2),t()()),r&2){let i=c(2);a(2),C(i.errorMessage)}}function ve(r,o){r&1&&(e(0,"span"),n(1,"Send Reset Link"),t())}function he(r,o){r&1&&(e(0,"span",22),g(),e(1,"svg",23),d(2,"circle",24)(3,"path",25),t(),n(4," Sending... "),t())}function we(r,o){if(r&1){let i=S();e(0,"div",8)(1,"div",9)(2,"h2",10),n(3,"Forgot Password?"),t(),e(4,"p",6),n(5,"Enter your email address and we'll send you a link to reset your password"),t()(),h(6,xe,3,1,"div",11),e(7,"form",12),x("ngSubmit",function(){w(i);let m=c();return b(m.onSubmit())}),e(8,"div",13)(9,"div")(10,"label",14),n(11,"Email Address"),t(),d(12,"input",15),t(),e(13,"button",16),h(14,ve,2,0,"span",17)(15,he,5,0,"span",18),t(),e(16,"div",2)(17,"button",19),x("click",function(){w(i);let m=c();return b(m.goBack())}),n(18," \u2190 Back to Sign In "),t()()()()()}if(r&2){let i,s=c();a(6),l("ngIf",s.errorMessage),a(),l("formGroup",s.forgotPasswordForm),a(5),y("border-red-300",((i=s.forgotPasswordForm.get("email"))==null?null:i.invalid)&&((i=s.forgotPasswordForm.get("email"))==null?null:i.touched)),a(),l("disabled",s.forgotPasswordForm.invalid||s.isLoading),a(),l("ngIf",!s.isLoading),a(),l("ngIf",s.isLoading)}}function be(r,o){if(r&1){let i=S();e(0,"div",8)(1,"div",2)(2,"div",3)(3,"div",26),g(),e(4,"svg",27),d(5,"path",28),t()()(),_(),e(6,"h2",29),n(7,"Reset Link Sent!"),t(),e(8,"p",30),n(9," Password reset link sent to your email. Please check your email to reset your password. "),t(),e(10,"div",31)(11,"p",32),n(12," Redirecting to login page in "),e(13,"span",33),n(14),t(),n(15," seconds "),t()(),e(16,"button",34),x("click",function(){w(i);let m=c();return b(m.goBack())}),n(17," Go to login now "),t()()()}if(r&2){let i=c();a(14),C(i.countdown)}}var H=class r{constructor(o,i,s){this.fb=o;this.router=i;this.authService=s;this.forgotPasswordForm=this.fb.group({email:["",[v.required,v.email]]})}forgotPasswordForm;isLoading=!1;errorMessage="";showSuccessMessage=!1;countdown=10;countdownInterval;onSubmit(){this.forgotPasswordForm.valid&&!this.isLoading&&(this.isLoading=!0,this.errorMessage="",this.showSuccessMessage=!1,this.authService.forgotPassword(this.forgotPasswordForm.value).subscribe({next:o=>{o.success?(this.showSuccessMessage=!0,this.startCountdown()):this.errorMessage=o.message||"Failed to send reset link",this.isLoading=!1},error:o=>{this.errorMessage=o.error?.message||o.error?.error||"An error occurred",this.isLoading=!1}}))}startCountdown(){this.countdown=10,this.countdownInterval=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(this.countdownInterval),this.router.navigate(["/login"]))},1e3)}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval)}goBack(){this.router.navigate(["/login"])}static \u0275fac=function(i){return new(i||r)(f(G),f(F),f(k))};static \u0275cmp=M({type:r,selectors:[["app-forgot-password"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center","mb-6"],[1,"flex","items-center","space-x-3"],["alt","AssetGo Logo",1,"h-20","w-auto",3,"src"],[1,"text-gray-600"],["class","bg-white rounded-2xl shadow-lg p-8 max-w-md mx-auto",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","p-8","max-w-md","mx-auto"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","type","email","formControlName","email","placeholder","Enter your email address","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],["type","button",1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6","leading-relaxed"],[1,"bg-blue-50","rounded-lg","p-4","mb-6"],[1,"text-blue-800","text-sm"],[1,"font-bold"],[1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),t()(),e(6,"p",6),n(7,"Enterprise Asset Management System"),t()(),h(8,we,19,7,"div",7)(9,be,18,1,"div",7),t()()),i&2&&(a(5),l("src","images/logo.png",E),a(3),l("ngIf",!s.showSuccessMessage),a(),l("ngIf",s.showSuccessMessage))},dependencies:[I,V,A,L,P,R,N,T,j],encapsulation:2})};function _e(r,o){if(r&1&&(e(0,"div",15)(1,"p",16),n(2),t()()),r&2){let i=c(2);a(2),C(i.errorMessage)}}function ye(r,o){r&1&&(e(0,"div",27),n(1," Passwords do not match "),t())}function Se(r,o){r&1&&(e(0,"span"),n(1,"Reset Password"),t())}function Ce(r,o){r&1&&(e(0,"span",28),g(),e(1,"svg",29),d(2,"circle",30)(3,"path",31),t(),n(4," Resetting... "),t())}function Ee(r,o){if(r&1){let i=S();e(0,"form",17),x("ngSubmit",function(){w(i);let m=c(2);return b(m.onSubmit())}),e(1,"div",18)(2,"div")(3,"label",19),n(4,"New Password"),t(),d(5,"input",20),t(),e(6,"div")(7,"label",21),n(8,"Confirm New Password"),t(),d(9,"input",22),h(10,ye,2,0,"div",23),t(),e(11,"button",24),h(12,Se,2,0,"span",25)(13,Ce,5,0,"span",26),t()()()}if(r&2){let i,s,m,u=c(2);l("formGroup",u.resetPasswordForm),a(5),y("border-red-300",((i=u.resetPasswordForm.get("password"))==null?null:i.invalid)&&((i=u.resetPasswordForm.get("password"))==null?null:i.touched)),a(4),y("border-red-300",((s=u.resetPasswordForm.get("password_confirmation"))==null?null:s.invalid)&&((s=u.resetPasswordForm.get("password_confirmation"))==null?null:s.touched)),a(),l("ngIf",(u.resetPasswordForm.errors==null?null:u.resetPasswordForm.errors.passwordMismatch)&&((m=u.resetPasswordForm.get("password_confirmation"))==null?null:m.touched)),a(),l("disabled",u.resetPasswordForm.invalid||u.isLoading),a(),l("ngIf",!u.isLoading),a(),l("ngIf",u.isLoading)}}function Me(r,o){if(r&1){let i=S();e(0,"div",8)(1,"div",9)(2,"h2",10),n(3,"Reset Password"),t(),e(4,"p",6),n(5,"Enter your new password below"),t()(),h(6,_e,3,1,"div",11)(7,Ee,14,9,"form",12),e(8,"div",13)(9,"button",14),x("click",function(){w(i);let m=c();return b(m.goToLogin())}),n(10," \u2190 Back to Sign In "),t()()()}if(r&2){let i=c();a(6),l("ngIf",i.errorMessage),a(),l("ngIf",!i.errorMessage||i.errorMessage&&i.token&&i.email)}}function Ie(r,o){if(r&1){let i=S();e(0,"div",8)(1,"div",2)(2,"div",3)(3,"div",32),g(),e(4,"svg",33),d(5,"path",34),t()()(),_(),e(6,"h2",35),n(7,"Password Reset Successfully!"),t(),e(8,"p",36),n(9," Your password has been reset successfully. You can now log in with your new password. "),t(),e(10,"div",37)(11,"p",38),n(12," Redirecting to login page in "),e(13,"span",39),n(14),t(),n(15," seconds "),t()(),e(16,"button",40),x("click",function(){w(i);let m=c();return b(m.goToLogin())}),n(17," Go to login now "),t()()()}if(r&2){let i=c();a(14),C(i.countdown)}}var z=class r{constructor(o,i,s,m){this.fb=o;this.router=i;this.route=s;this.authService=m;this.resetPasswordForm=this.fb.group({password:["",[v.required,v.minLength(6)]],password_confirmation:["",[v.required]]},{validators:this.passwordMatchValidator})}resetPasswordForm;isLoading=!1;errorMessage="";showSuccessMessage=!1;countdown=10;countdownInterval;token="";email="";ngOnInit(){this.token=this.route.snapshot.queryParams.token||"",this.email=this.route.snapshot.queryParams.email||"",(!this.token||!this.email)&&(this.errorMessage="Invalid reset link")}passwordMatchValidator(o){let i=o.get("password"),s=o.get("password_confirmation");return i&&s&&i.value===s.value?null:{passwordMismatch:!0}}onSubmit(){if(this.resetPasswordForm.valid&&!this.isLoading&&this.token&&this.email){this.isLoading=!0,this.errorMessage="",this.showSuccessMessage=!1;let o={token:this.token,email:this.email,password:this.resetPasswordForm.value.password,password_confirmation:this.resetPasswordForm.value.password_confirmation};this.authService.resetPassword(o).subscribe({next:i=>{i.success?(this.showSuccessMessage=!0,this.startCountdown()):this.errorMessage=i.message||"Failed to reset password",this.isLoading=!1},error:i=>{this.errorMessage=i.error?.message||i.error?.error||"An error occurred",this.isLoading=!1}})}}startCountdown(){this.countdown=10,this.countdownInterval=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(this.countdownInterval),this.router.navigate(["/login"]))},1e3)}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval)}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(i){return new(i||r)(f(G),f(F),f(K),f(k))};static \u0275cmp=M({type:r,selectors:[["app-reset-password"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center","mb-6"],[1,"flex","items-center","space-x-3"],["alt","AssetGo Logo",1,"h-20","w-auto",3,"src"],[1,"text-gray-600"],["class","bg-white rounded-2xl shadow-lg p-8 max-w-md mx-auto",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","p-8","max-w-md","mx-auto"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","mt-6"],["type","button",1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password","type","password","formControlName","password","placeholder","Enter new password","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password_confirmation","type","password","formControlName","password_confirmation","placeholder","Confirm new password","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],[1,"text-red-500","text-xs","mt-1"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6","leading-relaxed"],[1,"bg-blue-50","rounded-lg","p-4","mb-6"],[1,"text-blue-800","text-sm"],[1,"font-bold"],[1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),t()(),e(6,"p",6),n(7,"Enterprise Asset Management System"),t()(),h(8,Me,11,2,"div",7)(9,Ie,18,1,"div",7),t()()),i&2&&(a(5),l("src","images/logo.png",E),a(3),l("ngIf",!s.showSuccessMessage),a(),l("ngIf",s.showSuccessMessage))},dependencies:[I,V,A,L,P,R,N,T,j],encapsulation:2})};function Fe(r,o){r&1&&(e(0,"div",9)(1,"div",10),g(),e(2,"svg",11),d(3,"circle",12)(4,"path",13),t()(),_(),e(5,"h2",14),n(6,"Activating Account"),t(),e(7,"p",6),n(8,"Please wait while we activate your account..."),t()())}function ke(r,o){if(r&1){let i=S();e(0,"div",9)(1,"div",10)(2,"div",15),g(),e(3,"svg",16),d(4,"path",17),t()()(),_(),e(5,"h2",14),n(6,"Account Activated!"),t(),e(7,"p",18),n(8),t(),e(9,"button",19),x("click",function(){w(i);let m=c();return b(m.goToLogin())}),n(10," Continue to Sign In "),t()()}if(r&2){let i=c();a(8),C(i.successMessage)}}function Ve(r,o){if(r&1){let i=S();e(0,"div",9)(1,"div",10)(2,"div",20),g(),e(3,"svg",21),d(4,"path",22),t()()(),_(),e(5,"h2",14),n(6,"Activation Failed"),t(),e(7,"p",18),n(8),t(),e(9,"div",23)(10,"button",19),x("click",function(){w(i);let m=c();return b(m.resendActivation())}),n(11," Request New Activation Link "),t(),e(12,"button",24),x("click",function(){w(i);let m=c();return b(m.goToLogin())}),n(13," Back to Sign In "),t()()()}if(r&2){let i=c();a(8),C(i.errorMessage)}}var O=class r{constructor(o,i,s){this.router=o;this.route=i;this.authService=s}isLoading=!0;successMessage="";errorMessage="";id="";hash="";ngOnInit(){if(this.id=this.route.snapshot.params.id||"",this.hash=this.route.snapshot.params.hash||"",!this.id||!this.hash){this.errorMessage="Invalid verification link",this.isLoading=!1;return}this.verifyEmail()}verifyEmail(){this.authService.verifyEmail(this.id,this.hash).subscribe({next:o=>{o.success?this.successMessage=o.message||"Email verified successfully":this.errorMessage=o.message||"Failed to verify email",this.isLoading=!1},error:o=>{this.errorMessage=o.error?.message||o.error?.error||"An error occurred during verification",this.isLoading=!1}})}goToLogin(){this.router.navigate(["/login"])}resendActivation(){this.router.navigate(["/login"])}static \u0275fac=function(i){return new(i||r)(f(F),f(K),f(k))};static \u0275cmp=M({type:r,selectors:[["app-activate-account"]],decls:13,vars:4,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center","mb-6"],[1,"flex","items-center","space-x-3"],["alt","AssetGo Logo",1,"h-20","w-auto",3,"src"],[1,"text-gray-600"],[1,"bg-white","rounded-2xl","shadow-lg","p-8","max-w-md","mx-auto"],["class","py-8",4,"ngIf"],[1,"py-8"],[1,"flex","justify-center","mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-12","w-12","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-gray-600","mb-6"],[1,"w-full","bg-blue-600","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","cursor-pointer",3,"click"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-3"],[1,"w-full","text-blue-600","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","cursor-pointer",3,"click"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),t()(),e(6,"p",6),n(7,"Enterprise Asset Management System"),t()(),e(8,"div",7)(9,"div",2),h(10,Fe,9,0,"div",8)(11,ke,11,1,"div",8)(12,Ve,14,1,"div",8),t()()()()),i&2&&(a(5),l("src","images/logo.png",E),a(5),l("ngIf",s.isLoading),a(),l("ngIf",!s.isLoading&&s.successMessage),a(),l("ngIf",!s.isLoading&&s.errorMessage))},dependencies:[I],encapsulation:2})};var Le=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:D},{path:"register",component:q},{path:"forgot-password",component:H},{path:"reset-password",component:z},{path:"activate-account",component:O},{path:"email/verify/:id/:hash",component:O}],$=class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=J({type:r});static \u0275inj=Y({imports:[ee.forChild(Le),ee]})};var ne=class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=J({type:r});static \u0275inj=Y({imports:[re,V,$,D,q,H,z]})};export{ne as AuthModule};
