import{a as U}from"./chunk-7AMSJZ4Z.js";import"./chunk-GGQ7LRWG.js";import{c as Q,d as F,f as k,g as L}from"./chunk-C5P3YSZX.js";import"./chunk-VPAYI7QR.js";import{A as pe,B as V,C as ue,b as re,c as T,d as X,e as I,f as le,i as $,j as ae,o as se,p as me,r as de,y as ce}from"./chunk-UQACUQIP.js";import"./chunk-MEXLA3FU.js";import{d as oe,f as H,j as D}from"./chunk-4LZAODCJ.js";import"./chunk-YGU4T3V7.js";import{j as ie,k as z,l as R,s as ne,x as E}from"./chunk-HV2J6S7U.js";import{Gb as e,Hb as i,Ib as m,Mb as b,Pb as g,Qb as p,Ya as s,Z as j,bb as C,bc as r,cc as _,dc as y,ec as ee,gc as N,hc as A,ic as B,ja as x,ka as v,kb as M,la as u,lb as G,ma as f,mc as te,pb as h,qc as J,sc as K,ta as Z,wb as d,yb as S}from"./chunk-RHVXZUNF.js";import"./chunk-EQDQRRRY.js";function _e(l,o){if(l&1&&(e(0,"div",31)(1,"p",32),r(2),i(),e(3,"p",33),r(4," Users with this role will lose their permissions when the role is deleted. "),i()()),l&2){let t=p(2);s(2),ee(" \u26A0\uFE0F Warning: This role is assigned to ",t.usersCount," user",t.usersCount!==1?"s":""," ")}}function be(l,o){l&1&&(e(0,"span"),r(1,"Delete Role"),i())}function we(l,o){l&1&&(e(0,"span",34),u(),e(1,"svg",35),m(2,"circle",36)(3,"path",37),i(),f(),e(4,"span"),r(5,"Deleting..."),i()())}function ye(l,o){if(l&1){let t=b();e(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),u(),e(5,"svg",6),m(6,"path",7),i()(),f(),e(7,"h2",8),r(8,"Delete Role"),i()(),e(9,"button",9),g("click",function(){x(t);let a=p();return v(a.onCancel())}),u(),e(10,"svg",10),m(11,"path",11),i()()(),f(),e(12,"div",12)(13,"div",13)(14,"label",14),r(15,"Deletion Reason (Optional)"),i(),e(16,"textarea",15),B("ngModelChange",function(a){x(t);let c=p();return A(c.deletionReason,a)||(c.deletionReason=a),v(a)}),i(),e(17,"p",16),r(18,"This will be recorded in the audit trail"),i()(),e(19,"div",17)(20,"div",18),u(),e(21,"svg",19),m(22,"path",7),i()()(),f(),e(23,"div",20)(24,"h3",21),r(25),i(),e(26,"p",22),r(27," This action cannot be undone. The role will be permanently removed from the system. "),i(),h(28,_e,5,2,"div",23),e(29,"div",24)(30,"p",25),r(31," \u{1F6A8} This action is permanent and cannot be undone "),i()()(),e(32,"div",26)(33,"button",27),g("click",function(){x(t);let a=p();return v(a.onCancel())}),r(34," Cancel "),i(),e(35,"button",28),g("click",function(){x(t);let a=p();return v(a.onConfirm())}),h(36,be,2,0,"span",29)(37,we,6,0,"span",30),i()()()()()}if(l&2){let t=p();d("@backdropAnimation",void 0),s(),d("@modalAnimation",void 0),s(8),d("disabled",t.loading),s(7),N("ngModel",t.deletionReason),s(9),y('Are you sure you want to delete "',t.roleName,'"?'),s(3),d("ngIf",t.usersCount>0),s(5),d("disabled",t.loading),s(2),d("disabled",t.loading),s(),d("ngIf",!t.loading),s(),d("ngIf",t.loading)}}var W=class l{isOpen=!1;roleName="";roleId=null;usersCount=0;closeModal=new Z;confirmDelete=new Z;loading=!1;deletionReason="";onConfirm(){this.roleId&&(this.loading=!0,this.confirmDelete.emit({roleId:this.roleId,reason:this.deletionReason}),setTimeout(()=>{this.loading=!1,this.deletionReason=""},2e3))}onCancel(){this.loading||(this.deletionReason="",this.closeModal.emit())}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=M({type:l,selectors:[["app-role-delete-confirmation-modal"]],inputs:{isOpen:"isOpen",roleName:"roleName",roleId:"roleId",usersCount:"usersCount"},outputs:{closeModal:"closeModal",confirmDelete:"confirmDelete"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center p-4","style","z-index: 1000;",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","p-4",2,"z-index","1000"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-red-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3","placeholder","Enter reason for deleting this role...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",4,"ngIf"],[1,"mt-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-800","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-red-600","text-white","font-medium","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mt-4","p-3","bg-amber-50","border","border-amber-200","rounded-lg"],[1,"text-amber-800","text-sm","font-medium"],[1,"text-amber-700","text-xs","mt-1"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,n){t&1&&h(0,ye,38,10,"div",0),t&2&&d("ngIf",n.isOpen)},dependencies:[E,R,V,T,I,$],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-container[_ngcontent-%COMP%]{max-height:90vh;overflow-y:auto}.modal-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.modal-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.modal-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.delete-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.delete-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #dc26264d}.delete-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 640px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100vw - 2rem)}}"],data:{animation:[Q("backdropAnimation",[L(":enter",[k({opacity:0}),F("150ms ease-out",k({opacity:1}))]),L(":leave",[F("150ms ease-in",k({opacity:0}))])]),Q("modalAnimation",[L(":enter",[k({opacity:0,transform:"scale(0.7) translateY(-50px)"}),F("200ms ease-out",k({opacity:1,transform:"scale(1) translateY(0)"}))]),L(":leave",[F("150ms ease-in",k({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var ke=l=>({"bg-blue-100 font-semibold":l});function Me(l,o){l&1&&(e(0,"span",69),r(1,"Sort By"),i())}function Re(l,o){if(l&1&&(e(0,"span"),r(1),i()),l&2){let t=p();s(),_(t.selectedSort.label)}}function Ee(l,o){if(l&1){let t=b();e(0,"div",73),g("click",function(){let a=x(t).$implicit,c=p(2);return c.selectSort(a),v(c.showSortDropdown=!1)}),r(1),i()}if(l&2){let t=o.$implicit,n=p(2);d("ngClass",te(2,ke,(n.selectedSort==null?null:n.selectedSort.value)===t.value)),s(),y(" ",t.label," ")}}function Te(l,o){if(l&1&&(e(0,"div",70)(1,"div",71),r(2,"Sort By"),i(),h(3,Ee,2,4,"div",72),i()),l&2){let t=p();s(3),d("ngForOf",t.sortOptions)}}function Ie(l,o){l&1&&(u(),e(0,"svg",74),m(1,"path",75),i())}function Ve(l,o){l&1&&(u(),e(0,"svg",74),m(1,"path",76),i())}function Pe(l,o){l&1&&(e(0,"div",77)(1,"div",78)(2,"div",79),u(),e(3,"svg",80),m(4,"circle",81)(5,"path",82),i()(),f(),e(6,"h3",83),r(7,"Loading Roles"),i(),e(8,"p",84),r(9,"Please wait while we fetch your roles..."),i()()())}function De(l,o){if(l&1){let t=b();e(0,"div",77)(1,"div",78)(2,"div",85),u(),e(3,"svg",86),m(4,"path",87),i()(),f(),e(5,"h3",83),r(6,"Error Loading Roles"),i(),e(7,"p",88),r(8),i(),e(9,"button",89),g("click",function(){x(t);let a=p();return v(a.loadRoles())}),r(10," Retry "),i()()()}if(l&2){let t=p();s(8),_(t.error)}}function Fe(l,o){if(l&1){let t=b();e(0,"div",90)(1,"div",91),u(),e(2,"svg",92),m(3,"path",20),i()(),f(),e(4,"h3",83),r(5,"No Roles Found"),i(),e(6,"p",93),r(7,"Get started by creating your first role."),i(),e(8,"button",89),g("click",function(){x(t);let a=p();return v(a.createRole())}),r(9," Create First Role "),i()()}}function Le(l,o){if(l&1){let t=b();e(0,"div",115)(1,"button",116),g("click",function(){x(t);let a=p().$implicit,c=p(2);return v(c.editRole(a))}),u(),e(2,"svg",117),m(3,"path",118),i(),f(),e(4,"span",119),r(5,"Edit Role"),i()(),e(6,"button",120),g("click",function(){x(t);let a=p().$implicit,c=p(2);return v(c.deleteRole(a))}),u(),e(7,"svg",121),m(8,"path",122),i(),f(),e(9,"span",123),r(10,"Delete Role"),i()()()}}function Oe(l,o){if(l&1&&(e(0,"div",113),u(),e(1,"svg",111),m(2,"path",124),i(),f(),e(3,"span"),r(4,"Created "),e(5,"b"),r(6),J(7,"date"),i()()()),l&2){let t=p().$implicit;s(6),_(K(7,1,t.created_at,"MMM d, y"))}}function je(l,o){if(l&1){let t=b();e(0,"div",96)(1,"div",97)(2,"div",98)(3,"span",99),r(4,"Active"),i(),e(5,"div",8),g("click",function(a){return x(t),v(a.stopPropagation())}),e(6,"button",100),g("click",function(){let a=x(t).$implicit,c=p(2);return v(c.toggleRoleMenu(a.id))}),u(),e(7,"svg",101),m(8,"circle",102)(9,"circle",103)(10,"circle",104),i()(),h(11,Le,11,0,"div",105),i()(),e(12,"svg",106),m(13,"path",20),i()(),f(),e(14,"div",107)(15,"div")(16,"div",108),g("click",function(){let a=x(t).$implicit,c=p(2);return v(c.editRole(a))}),r(17),i(),e(18,"div",109),r(19),i(),e(20,"div",110),u(),e(21,"svg",111),m(22,"path",32),i(),f(),e(23,"span"),r(24),i()(),m(25,"hr",112),e(26,"div",113),u(),e(27,"svg",111),m(28,"path",37),i(),f(),e(29,"span"),r(30),i()(),h(31,Oe,8,4,"div",114),i()()()}if(l&2){let t=o.$implicit,n=p(2);s(11),d("ngIf",t.showMenu),s(6),y(" ",t.name," "),s(2),_(t.description||"No description"),s(5),y("",t.users_count||0," users assigned"),s(6),_(n.getPermissionSummary(t)),s(),d("ngIf",t.created_at)}}function Ge(l,o){if(l&1&&(e(0,"div",94),h(1,je,32,6,"div",95),i()),l&2){let t=p();s(),d("ngForOf",t.filteredRoles)}}function Ne(l,o){if(l&1){let t=b();e(0,"div",133)(1,"div",134)(2,"div",128)(3,"div",135),r(4),i()(),e(5,"div",128)(6,"div",136),r(7),i()(),e(8,"div",129)(9,"div",136),r(10),i()(),e(11,"div",130)(12,"div",136),r(13),i()(),e(14,"div",129)(15,"div",136),r(16),J(17,"date"),i()(),e(18,"div",137)(19,"button",138),g("click",function(){let a=x(t).$implicit,c=p(2);return v(c.editRole(a))}),r(20," Edit "),i(),e(21,"button",139),g("click",function(){let a=x(t).$implicit,c=p(2);return v(c.deleteRole(a))}),r(22," Delete "),i()()()()}if(l&2){let t=o.$implicit,n=p(2);s(4),_(t.name),s(3),_(t.description||"No description"),s(3),_(n.getPermissionSummary(t)),s(3),_(t.users_count||0),s(3),_(K(17,5,t.created_at,"short"))}}function Ae(l,o){if(l&1&&(e(0,"div",125)(1,"div",126)(2,"div",127)(3,"div",128),r(4,"Role"),i(),e(5,"div",128),r(6,"Description"),i(),e(7,"div",129),r(8,"Permissions"),i(),e(9,"div",130),r(10,"Users"),i(),e(11,"div",129),r(12,"Created"),i(),e(13,"div",130),r(14,"Actions"),i()()(),e(15,"div",131),h(16,Ne,23,8,"div",132),i()()),l&2){let t=p();s(16),d("ngForOf",t.filteredRoles)}}var P=class l{constructor(o,t){this.roleService=o;this.router=t}roles=[];filteredRoles=[];loading=!1;error="";searchTerm="";selectedSort=null;selectedSortDir="asc";showSortDropdown=!1;viewType="grid";showDeleteModal=!1;roleToDelete=null;sortOptions=[{label:"Name",value:"name"},{label:"Created Date",value:"created_at"},{label:"Users Count",value:"users_count"},{label:"Permissions",value:"permissions"}];ngOnInit(){this.loadRoles()}loadRoles(){this.loading=!0,this.error="",this.roleService.getRoles().subscribe({next:o=>{this.roles=o.data,this.filteredRoles=[...this.roles],this.loading=!1},error:o=>{this.error="Failed to load roles",this.loading=!1,console.error("Error loading roles:",o)}})}createRole(){this.router.navigate(["/roles/create"])}editRole(o){this.router.navigate(["/roles/edit",o.id])}deleteRole(o){this.roleToDelete=o,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.roleToDelete=null}confirmDeleteRole(o){this.roleService.deleteRole(o.roleId).subscribe({next:()=>{this.loadRoles(),this.closeDeleteModal()},error:t=>{console.error("Error deleting role:",t),alert("Failed to delete role")}})}getPermissionSummary(o){if(!o.permissions)return"No permissions";let t=o.permissions.permissions,n=Object.keys(t);return`${n.reduce((c,w)=>c+Object.values(t[w]).filter(Boolean).length,0)} permissions across ${n.length} modules`}getActiveRolesCount(){return this.roles.length}getTotalUsersCount(){return this.roles.reduce((o,t)=>o+(t.users_count||0),0)}getTotalPermissionsCount(){return this.roles.reduce((o,t)=>{if(!t.permissions)return o;let n=t.permissions.permissions,c=Object.keys(n).reduce((w,he)=>w+Object.values(n[he]).filter(Boolean).length,0);return o+c},0)}getPermissionCount(o){if(!o.permissions)return 0;let t=o.permissions.permissions;return Object.keys(t).reduce((a,c)=>a+Object.values(t[c]).filter(Boolean).length,0)}onSearchChange(){this.filterRoles()}filterRoles(){this.searchTerm.trim()?this.filteredRoles=this.roles.filter(o=>o.name.toLowerCase().includes(this.searchTerm.toLowerCase())||o.description&&o.description.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredRoles=[...this.roles],this.sortRoles()}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}selectSort(o){this.selectedSort=o,this.sortRoles()}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.sortRoles()}sortRoles(){this.selectedSort&&this.filteredRoles.sort((o,t)=>{let n,a;switch(this.selectedSort.value){case"name":n=o.name.toLowerCase(),a=t.name.toLowerCase();break;case"created_at":n=new Date(o.created_at).getTime(),a=new Date(t.created_at).getTime();break;case"users_count":n=o.users_count||0,a=t.users_count||0;break;case"permissions":n=this.getPermissionCount(o),a=this.getPermissionCount(t);break;default:n=o.name.toLowerCase(),a=t.name.toLowerCase()}return this.selectedSortDir==="asc"?n>a?1:-1:n<a?1:-1})}toggleRoleMenu(o){this.roles.forEach(t=>{t.showMenu=t.id===o?!t.showMenu:!1})}static \u0275fac=function(t){return new(t||l)(C(U),C(H))};static \u0275cmp=M({type:l,selectors:[["app-role-list"]],decls:102,vars:36,consts:[[1,"role-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-5","py-2","rounded-lg","shadow-sm","transition-colors","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"relative",3,"click"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mb-8"],[1,"rounded-xl","bg-blue-50","border","border-blue-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-base","font-medium","text-gray-700"],[1,"w-10","h-10","bg-blue-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-3xl","font-bold","text-gray-900"],["href","#",1,"text-sm","text-blue-600","font-medium","mt-1"],[1,"rounded-xl","bg-green-50","border","border-green-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-green-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-400"],["cx","12","cy","12","r","8","stroke","currentColor","stroke-width","2","fill","none"],["cx","12","cy","12","r","4","fill","currentColor",1,"text-green-400"],["href","#",1,"text-sm","text-green-600","font-medium","mt-1"],[1,"rounded-xl","bg-purple-50","border","border-purple-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-purple-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"],["href","#",1,"text-sm","text-purple-600","font-medium","mt-1"],[1,"rounded-xl","bg-orange-50","border","border-orange-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-orange-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],["href","#",1,"text-sm","text-orange-600","font-medium","mt-1"],[1,"bg-white","rounded-xl","border","border-gray-200","p-6","mb-6"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","space-y-3","sm:space-y-0","sm:space-x-4"],[1,"relative"],["type","text","placeholder","Search roles...",1,"w-full","sm:w-64","px-4","py-2","pl-10","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-2.5","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[180px]",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],[4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-10 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-72 overflow-y-auto min-w-[180px] w-full",4,"ngIf"],[1,"px-4","py-2","bg-gray-100","rounded-lg","text-gray-700","flex","items-center","space-x-2","min-w-[70px]","cursor-pointer",3,"click"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","space-x-2","mt-4","md:mt-0"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","border","border-gray-200","hover:bg-blue-50","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["x","4","y","4","width","7","height","7","rx","2"],["x","13","y","4","width","7","height","7","rx","2"],["x","4","y","13","width","7","height","7","rx","2"],["x","13","y","13","width","7","height","7","rx","2"],["x","4","y","6","width","16","height","4","rx","2"],["x","4","y","14","width","16","height","4","rx","2"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","text-center py-20",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-2",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",4,"ngIf"],[3,"closeModal","confirmDelete","isOpen","roleName","roleId","usersCount"],[1,"text-gray-400"],[1,"absolute","z-10","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-72","overflow-y-auto","min-w-[180px]","w-full"],[1,"px-4","py-2","text-xs","text-gray-400","font-semibold","uppercase","tracking-wider"],["class","px-4 py-2 cursor-pointer hover:bg-blue-50",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"px-4","py-2","cursor-pointer","hover:bg-blue-50",3,"click","ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 17l-4 4m0 0l-4-4m4 4V3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7l4-4m0 0l4 4m-4-4v18"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"text-center","py-20"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","mt-2"],["class","rounded-2xl border border-blue-200 bg-white shadow-sm flex flex-col transition-all hover:shadow-md overflow-hidden",4,"ngFor","ngForOf"],[1,"rounded-2xl","border","border-blue-200","bg-white","shadow-sm","flex","flex-col","transition-all","hover:shadow-md","overflow-hidden"],[1,"relative","bg-[#e0edff]","h-32","flex","flex-col","items-center","justify-center"],[1,"absolute","right-4","top-4","flex","items-center","space-x-2"],[1,"bg-blue-100","text-blue-700","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["cx","12","cy","6","r","1.5"],["cx","12","cy","12","r","1.5"],["cx","12","cy","18","r","1.5"],["class","absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-blue-400"],[1,"flex-1","flex","flex-col","justify-between","p-6","pt-4"],[1,"font-semibold","text-lg","text-gray-900","mb-1","cursor-pointer","hover:text-blue-600","transition-colors",3,"click"],[1,"text-sm","text-gray-500","mb-2"],[1,"flex","items-center","text-xs","text-gray-400","mb-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],[1,"my-3","border-gray-200"],[1,"flex","items-center","text-sm","text-gray-700","mb-1"],["class","flex items-center text-sm text-gray-700 mb-1",4,"ngIf"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-1","z-50"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-sm","text-gray-700"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-3"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","transition-colors"],[1,"grid","grid-cols-12","gap-4","items-center"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900"],[1,"col-span-1","text-right"],[1,"text-blue-600","hover:text-blue-900","mr-3",3,"click"],[1,"text-red-600","hover:text-red-900",3,"click"]],template:function(t,n){t&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4,"Role Management Hub"),i(),e(5,"p",3),r(6,"Advanced role management with granular permissions and user access control"),i()(),e(7,"div",4)(8,"button",5),g("click",function(){return n.createRole()}),u(),e(9,"svg",6),m(10,"path",7),i(),r(11," Create Role "),i(),f(),e(12,"div",8),g("click",function(c){return c.stopPropagation()}),e(13,"button",9),u(),e(14,"svg",10),m(15,"circle",11)(16,"circle",12)(17,"circle",13),i()()()()(),f(),e(18,"div",14)(19,"div",15)(20,"div",16)(21,"span",17),r(22,"Total Roles"),i(),e(23,"span",18),u(),e(24,"svg",19),m(25,"path",20),i()()(),f(),e(26,"div",21),r(27),i(),e(28,"a",22),r(29,"Roles in system"),i()(),e(30,"div",23)(31,"div",16)(32,"span",17),r(33,"Active Roles"),i(),e(34,"span",24),u(),e(35,"svg",25),m(36,"circle",26)(37,"circle",27),i()()(),f(),e(38,"div",21),r(39),i(),e(40,"a",28),r(41,"Currently active"),i()(),e(42,"div",29)(43,"div",16)(44,"span",17),r(45,"Total Users"),i(),e(46,"span",30),u(),e(47,"svg",31),m(48,"path",32),i()()(),f(),e(49,"div",21),r(50),i(),e(51,"a",33),r(52,"Users assigned"),i()(),e(53,"div",34)(54,"div",16)(55,"span",17),r(56,"Permissions"),i(),e(57,"span",35),u(),e(58,"svg",36),m(59,"path",37),i()()(),f(),e(60,"div",21),r(61),i(),e(62,"a",38),r(63,"Total permissions"),i()()(),e(64,"div",39)(65,"div",40)(66,"div",41)(67,"div",42)(68,"input",43),B("ngModelChange",function(c){return A(n.searchTerm,c)||(n.searchTerm=c),c}),g("input",function(){return n.onSearchChange()}),i(),u(),e(69,"svg",44),m(70,"path",45),i()(),f(),e(71,"div",8),g("click",function(c){return c.stopPropagation()}),e(72,"button",46),g("click",function(){return n.toggleSortDropdown()}),e(73,"div",47),h(74,Me,2,0,"span",48)(75,Re,2,1,"span",49),u(),e(76,"svg",50),m(77,"path",51),i()()(),h(78,Te,4,1,"div",52),i(),f(),e(79,"div",42)(80,"button",53),g("click",function(){return n.toggleSortDir()}),h(81,Ie,2,0,"svg",54)(82,Ve,2,0,"svg",54),e(83,"span"),r(84),i()()()(),e(85,"div",55)(86,"button",56),g("click",function(){return n.viewType="grid"}),u(),e(87,"svg",57),m(88,"rect",58)(89,"rect",59)(90,"rect",60)(91,"rect",61),i()(),f(),e(92,"button",56),g("click",function(){return n.viewType="list"}),u(),e(93,"svg",57),m(94,"rect",62)(95,"rect",63),i()()()()(),h(96,Pe,10,0,"div",64)(97,De,11,1,"div",64)(98,Fe,10,0,"div",65)(99,Ge,2,1,"div",66)(100,Ae,17,1,"div",67),i(),f(),e(101,"app-role-delete-confirmation-modal",68),g("closeModal",function(){return n.closeDeleteModal()})("confirmDelete",function(c){return n.confirmDeleteRole(c)}),i()),t&2&&(s(27),_(n.roles.length),s(12),_(n.getActiveRolesCount()),s(11),_(n.getTotalUsersCount()),s(11),_(n.getTotalPermissionsCount()),s(7),N("ngModel",n.searchTerm),s(4),S("border-blue-500",n.showSortDropdown),s(2),d("ngIf",!n.selectedSort),s(),d("ngIf",n.selectedSort),s(),S("rotate-180",n.showSortDropdown),s(2),d("ngIf",n.showSortDropdown),s(2),S("bg-blue-100",n.selectedSortDir==="asc")("text-blue-700",n.selectedSortDir==="asc"),s(),d("ngIf",n.selectedSortDir==="desc"),s(),d("ngIf",n.selectedSortDir==="asc"),s(2),_(n.selectedSortDir==="asc"?"A-Z":"Z-A"),s(2),S("bg-blue-100",n.viewType==="grid")("text-blue-700",n.viewType==="grid"),s(6),S("bg-blue-100",n.viewType==="list")("text-blue-700",n.viewType==="list"),s(4),d("ngIf",n.loading),s(),d("ngIf",n.error&&!n.loading),s(),d("ngIf",!n.loading&&!n.error&&n.roles.length===0),s(),d("ngIf",n.viewType==="grid"&&!n.loading&&!n.error&&n.roles.length>0),s(),d("ngIf",n.viewType==="list"&&!n.loading&&!n.error&&n.roles.length>0),s(),d("isOpen",n.showDeleteModal)("roleName",(n.roleToDelete==null?null:n.roleToDelete.name)||"")("roleId",(n.roleToDelete==null?null:n.roleToDelete.id)||null)("usersCount",(n.roleToDelete==null?null:n.roleToDelete.users_count)||0))},dependencies:[E,ie,z,R,ne,V,T,I,$,W],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto}.role-table[_ngcontent-%COMP%]{min-width:100%}.role-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#f9fafb;z-index:10}"]})};function Be(l,o){l&1&&(e(0,"div",13),m(1,"div",14),i())}function ze(l,o){if(l&1&&(e(0,"div",15)(1,"div",16),u(),e(2,"svg",17),m(3,"path",18),i(),f(),e(4,"span",19),r(5),i()()()),l&2){let t=p();s(5),_(t.error)}}function He(l,o){l&1&&(e(0,"span"),r(1,"Role name is required"),i())}function $e(l,o){l&1&&(e(0,"span"),r(1,"Role name cannot exceed 255 characters"),i())}function Ue(l,o){if(l&1&&(e(0,"div",56),u(),e(1,"svg",57),m(2,"path",58),i(),h(3,He,2,0,"span",46)(4,$e,2,0,"span",46),i()),l&2){let t,n,a=p(2);s(3),d("ngIf",(t=a.roleForm.get("name"))==null||t.errors==null?null:t.errors.required),s(),d("ngIf",(n=a.roleForm.get("name"))==null||n.errors==null?null:n.errors.maxlength)}}function We(l,o){l&1&&(e(0,"tr")(1,"td",59)(2,"div",60),u(),e(3,"svg",61),m(4,"path",62),i(),f(),e(5,"p",63),r(6,"No modules assigned"),i(),e(7,"p",64),r(8,"This role has no module permissions enabled. Dashboard will be the only accessible module."),i()()()())}function Ye(l,o){if(l&1){let t=b();e(0,"tr",65)(1,"td",66)(2,"div",67),r(3),i()(),e(4,"td",68)(5,"button",69),g("click",function(){let a=x(t).$implicit,c=p(2);return v(c.toggleAllPermissions(a.key,!0))}),r(6," All "),i()(),e(7,"td",68)(8,"input",70),g("change",function(a){let c=x(t).$implicit,w=p(2);return v(w.onViewPermissionChange(c.key,a))}),i()(),e(9,"td",68),m(10,"input",71),i(),e(11,"td",68),m(12,"input",72),i(),e(13,"td",68),m(14,"input",73),i(),e(15,"td",68),m(16,"input",74),i()()}if(l&2){let t=o.$implicit,n=p(2);d("formGroupName",t.key),s(3),_(n.getModuleDisplayName(t.key))}}function qe(l,o){if(l&1&&(e(0,"span",75),u(),e(1,"svg",76),m(2,"circle",77)(3,"path",78),i(),r(4),i()),l&2){let t=p(2);s(4),y(" ",t.isEditMode?"Updating Role...":"Creating Role..."," ")}}function Ze(l,o){if(l&1&&(e(0,"span"),r(1),i()),l&2){let t=p(2);s(),y(" ",t.isEditMode?"Update Role":"Create Role"," ")}}function Je(l,o){if(l&1){let t=b();e(0,"form",20),g("ngSubmit",function(){x(t);let a=p();return v(a.onSubmit())}),e(1,"div",21)(2,"div",22)(3,"div",23),u(),e(4,"svg",24),m(5,"path",25),i()(),f(),e(6,"h2",26),r(7,"Basic Information"),i()(),e(8,"div",27)(9,"div")(10,"label",28),r(11," Role Name "),e(12,"span",29),r(13,"*"),i()(),m(14,"input",30),h(15,Ue,5,2,"div",31),e(16,"div",32),r(17,"Maximum 255 characters"),i()()(),e(18,"div",27)(19,"label",33),r(20,"Description"),i(),m(21,"textarea",34),e(22,"div",32),r(23,"Maximum 500 characters"),i()()(),e(24,"div",21)(25,"div",22)(26,"div",35),u(),e(27,"svg",36),m(28,"path",37),i()(),f(),e(29,"h2",26),r(30,"Role Permissions"),i()(),e(31,"p",38),r(32,"Define what actions this role can perform in each module of the system"),i(),e(33,"div",39)(34,"table",40)(35,"thead",41)(36,"tr")(37,"th",42),r(38,"Module"),i(),e(39,"th",43)(40,"button",44),g("click",function(){x(t);let a=p();return v(a.toggleAllPermissions("all",!0))}),r(41," Select All "),i()(),e(42,"th",43),r(43,"View"),i(),e(44,"th",43),r(45,"Create"),i(),e(46,"th",43),r(47,"Edit"),i(),e(48,"th",43),r(49,"Delete"),i(),e(50,"th",43),r(51,"Export"),i()()(),e(52,"tbody",45),h(53,We,9,0,"tr",46)(54,Ye,17,2,"tr",47),i()()()(),e(55,"div",21)(56,"div",48)(57,"div",49),u(),e(58,"svg",5),m(59,"path",50),i(),f(),e(60,"span",51),r(61,"Review all information before saving"),i()(),e(62,"div",52)(63,"button",53),g("click",function(){x(t);let a=p();return v(a.cancel())}),r(64," Cancel "),i(),e(65,"button",54),h(66,qe,5,1,"span",55)(67,Ze,2,1,"span",46),i()()()()()}if(l&2){let t,n,a=p();d("formGroup",a.roleForm),s(14),S("border-red-300",((t=a.roleForm.get("name"))==null?null:t.invalid)&&((t=a.roleForm.get("name"))==null?null:t.touched)),s(),d("ngIf",((n=a.roleForm.get("name"))==null?null:n.invalid)&&((n=a.roleForm.get("name"))==null?null:n.touched)),s(38),d("ngIf",!a.hasAnyModuleWithPermissions()),s(),d("ngForOf",a.getFilteredModules()),s(11),d("disabled",a.saving||a.roleForm.invalid),s(),d("ngIf",a.saving),s(),d("ngIf",!a.saving)}}var O=class l{constructor(o,t,n,a){this.fb=o;this.roleService=t;this.route=n;this.router=a;this.roleForm=this.fb.group({name:["",[X.required,X.maxLength(255)]],description:[""],permissions:this.fb.group({})})}roleForm;availablePermissions={};loading=!1;saving=!1;error="";isEditMode=!1;roleId;Math=Math;roleData=null;ngOnInit(){this.loadAvailablePermissions();let o=this.route.snapshot.paramMap.get("id");o&&(this.isEditMode=!0,this.roleId=+o,this.loadRole(this.roleId))}loadAvailablePermissions(){this.roleService.getAvailablePermissions().subscribe({next:o=>{this.availablePermissions=o.data,this.initializePermissionForm(),this.roleData&&(this.populateRolePermissions(this.roleData),this.roleData=null)},error:o=>{this.error="Failed to load available permissions",console.error("Error loading permissions:",o)}})}loadRole(o){this.loading=!0,this.roleService.getRole(o).subscribe({next:t=>{let n=t.data;this.roleForm.patchValue({name:n.name,description:n.description}),n.permissions&&n.permissions.permissions&&(Object.keys(this.availablePermissions).length>0?this.populateRolePermissions(n):this.roleData=n),this.loading=!1},error:t=>{this.error="Failed to load role",this.loading=!1,console.error("Error loading role:",t)}})}initializePermissionForm(){let o=this.roleForm.get("permissions");Object.keys(this.availablePermissions).forEach(t=>{let n=this.fb.group({can_view:[!1],can_create:[!1],can_edit:[!1],can_delete:[!1],can_export:[!1]});o.addControl(t,n)})}onSubmit(){if(this.roleForm.valid){this.saving=!0,this.error="";let o=this.roleForm.value;this.isEditMode&&this.roleId?this.roleService.updateRole(this.roleId,o).subscribe({next:()=>{this.router.navigate(["/roles"])},error:t=>{this.error="Failed to update role",this.saving=!1,console.error("Error updating role:",t)}}):this.roleService.createRole(o).subscribe({next:()=>{this.router.navigate(["/roles"])},error:t=>{this.error="Failed to create role",this.saving=!1,console.error("Error creating role:",t)}})}}cancel(){this.router.navigate(["/roles"])}getModuleDisplayName(o){return o.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}hasAnyPermission(o){let t=this.roleForm.get(`permissions.${o}`);if(!t)return!1;let n=t.value;return n.can_view||n.can_create||n.can_edit||n.can_delete||n.can_export}getFilteredModules(){return Object.keys(this.availablePermissions).map(t=>({key:t,value:this.availablePermissions[t]})).filter(t=>this.hasAnyPermission(t.key))}hasAnyModuleWithPermissions(){return Object.keys(this.availablePermissions).some(o=>this.hasAnyPermission(o))}toggleAllPermissions(o,t){let n=this.roleForm.get(`permissions.${o}`);Object.keys(n.controls).forEach(a=>{n.get(a)?.setValue(t)})}onViewPermissionChange(o,t){if(!t.target.checked){let a=this.roleForm.get(`permissions.${o}`);a.get("can_create")?.setValue(!1),a.get("can_edit")?.setValue(!1),a.get("can_delete")?.setValue(!1),a.get("can_export")?.setValue(!1)}}populateRolePermissions(o){if(o.permissions&&o.permissions.permissions){let t=o.permissions.permissions,n=this.roleForm.get("permissions");Object.keys(t).forEach(a=>{let c=n.get(a);if(c){let w=t[a];c.patchValue({can_view:w.can_view||!1,can_create:w.can_create||!1,can_edit:w.can_edit||!1,can_delete:w.can_delete||!1,can_export:w.can_export||!1})}})}}static \u0275fac=function(t){return new(t||l)(C(pe),C(U),C(oe),C(H))};static \u0275cmp=M({type:l,selectors:[["app-role-form"]],standalone:!1,decls:16,vars:5,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"role-create-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-800"],[3,"ngSubmit","formGroup"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"section-title"],[1,"mb-6"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","name","type","text","formControlName","name","placeholder","e.g., Asset Manager, Maintenance Supervisor",1,"input"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","mt-1"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Brief description of the role and its responsibilities...","maxlength","500",1,"input","resize-none"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"text-gray-600","mb-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["type","button",1,"text-blue-600","hover:text-blue-800",3,"click"],["formGroupName","permissions",1,"bg-white","divide-y","divide-gray-200"],[4,"ngIf"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-2","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm"],[1,"flex","space-x-3"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","hover:bg-gray-50","transition-colors","font-medium",3,"click"],["type","submit",1,"bg-blue-600","text-white","px-8","py-3","rounded-lg","hover:bg-blue-700","transition-colors","disabled:opacity-50","font-medium","shadow-sm",3,"disabled"],["class","inline-flex items-center",4,"ngIf"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["colspan","7",1,"px-4","py-8","text-center","text-gray-500"],[1,"flex","flex-col","items-center","justify-center","space-y-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"text-sm","font-medium"],[1,"text-xs"],[3,"formGroupName"],[1,"px-4","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"px-4","py-4","whitespace-nowrap","text-center"],["type","button",1,"text-blue-600","hover:text-blue-800","text-sm",3,"click"],["type","checkbox","formControlName","can_view",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"change"],["type","checkbox","formControlName","can_create",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["type","checkbox","formControlName","can_edit",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["type","checkbox","formControlName","can_delete",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["type","checkbox","formControlName","can_export",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],[1,"inline-flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,n){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),g("click",function(){return n.cancel()}),u(),e(5,"svg",5),m(6,"path",6),i(),f(),e(7,"span",7),r(8,"Back to Roles"),i()()(),e(9,"h1",8),r(10),i(),e(11,"p",9),r(12),i()(),h(13,Be,2,0,"div",10)(14,ze,6,1,"div",11)(15,Je,68,9,"form",12),i()()),t&2&&(s(10),y(" ",n.isEditMode?"Edit Role":"Create New Role"," "),s(2),y(" ",n.isEditMode?"Update role details and permissions for your organization":"Define a new role and assign specific permissions to control user access"," "),s(),d("ngIf",n.loading),s(),d("ngIf",n.error),s(),d("ngIf",!n.loading))},dependencies:[z,R,ae,T,re,I,le,ce,se,de,me],styles:[".role-create-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}.permissions-table[_ngcontent-%COMP%]   .permission-checkbox[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:.25rem;border:1px solid #d1d5db;transition:all .2s ease-in-out}.permissions-table[_ngcontent-%COMP%]   .permission-checkbox[_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#3b82f6}.permissions-table[_ngcontent-%COMP%]   .permission-checkbox[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f61a}.module-row[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.module-row[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.toggle-all-btn[_ngcontent-%COMP%]{color:#3b82f6;font-size:.875rem;font-weight:500;transition:all .15s ease-in-out}.toggle-all-btn[_ngcontent-%COMP%]:hover{color:#1d4ed8;text-decoration:underline}@media (max-width: 768px){.role-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem;border-radius:1rem}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.overflow-x-auto[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.section-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;box-shadow:0 2px 4px #3b82f633}.btn-primary[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #3b82f64d;transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;box-shadow:none;transform:none}"]})};var Ke=[{path:"",component:P},{path:"create",component:O},{path:"edit/:id",component:O}],q=class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=G({type:l});static \u0275inj=j({imports:[D.forChild(Ke),D]})};var ve=class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=G({type:l});static \u0275inj=j({imports:[E,ue,V,D,q,P]})};export{ve as RolesModule};
