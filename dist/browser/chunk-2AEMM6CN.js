import{a as $e,b as ze}from"./chunk-7YRMOSPO.js";import{a as Ne}from"./chunk-LVELOOQW.js";import{a as We}from"./chunk-ZL4LI35D.js";import{a as J,b as He}from"./chunk-IAOQKYRY.js";import{a as je}from"./chunk-UKCMEDGO.js";import{a as Y}from"./chunk-MJQIMB35.js";import{a as Se}from"./chunk-RBWMX72T.js";import{A as Re,B as O,C as Z,b as ke,c as V,d as S,e as A,f as Ee,i as $,j as Oe,k as Pe,o as Ie,r as Fe,s as Le,t as De,u as Ve,w as Ae}from"./chunk-BV4EONZX.js";import{g as B}from"./chunk-SSTOZ5OJ.js";import"./chunk-J7FUFURU.js";import{a as Te}from"./chunk-6WXWVH7L.js";import{F as ye,k as q,l as W,s as we,w as Ce,x as E}from"./chunk-CDW6MD7D.js";import{Bc as Me,Cb as F,Eb as ie,Fb as oe,Gb as i,Hb as o,Ib as p,Jb as be,Kb as _e,Mb as T,P as me,Pb as u,Qb as d,Wa as ue,X as de,Xa as l,Y as G,aa as ce,ab as y,bc as m,cc as w,dc as h,ec as he,gc as R,ha as pe,hc as j,ia as v,ic as N,ja as x,jb as D,ka as g,kb as U,la as _,ob as f,qc as re,r as se,sa as I,sc as ve,tc as xe,vb as ge,wb as c,yb as M,zb as fe}from"./chunk-ZHYBNXXX.js";import{a as k,b as L}from"./chunk-EQDQRRRY.js";var K=class r{teamMember=null;cancelled=new I;confirmed=new I;deleteReason="";onClose(){this.cancelled.emit()}onConfirmDelete(){this.teamMember&&this.confirmed.emit({teamId:this.teamMember.id,reason:this.deleteReason.trim()})}onBackdropClick(t){t.target===t.currentTarget&&this.onClose()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["app-team-delete-confirmation-modal"]],inputs:{teamMember:"teamMember"},outputs:{cancelled:"cancelled",confirmed:"confirmed"},decls:40,vars:3,consts:[[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50",3,"click"],[1,"relative","mx-auto","p-6","w-[500px]","rounded-lg","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-6"],["for","deleteReason",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","deleteReason","rows","4","placeholder","Enter reason for removing this team member...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-red-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],[1,"text-center","mb-6"],[1,"mx-auto","flex","items-center","justify-center","h-16","w-16","rounded-full","bg-red-100","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-8","w-8","text-red-600"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-600","mb-4"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","font-medium","text-red-800"],[1,"flex","justify-end","space-x-3"],[1,"inline-flex","justify-center","px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500","transition-colors",3,"click"],[1,"inline-flex","justify-center","px-4","py-2","text-sm","font-medium","text-white","bg-red-600","border","border-transparent","rounded-md","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","transition-colors",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0),u("click",function(s){return n.onBackdropClick(s)}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),g(),i(5,"svg",5),p(6,"path",6),o(),_(),i(7,"h3",7),m(8,"Remove Team Member"),o()(),i(9,"button",8),u("click",function(){return n.onClose()}),g(),i(10,"svg",9),p(11,"path",10),o()()(),_(),i(12,"div",11)(13,"label",12),m(14," Deletion Reason (Optional) "),o(),i(15,"textarea",13),N("ngModelChange",function(s){return j(n.deleteReason,s)||(n.deleteReason=s),s}),o(),i(16,"p",14),m(17,"This will be recorded in the audit trail."),o()(),i(18,"div",15)(19,"div",16),g(),i(20,"svg",17),p(21,"path",6),o()(),_(),i(22,"h3",18),m(23," Are you sure you want to remove "),i(24,"strong"),m(25),o(),m(26,"? "),o(),i(27,"p",19),m(28," This action cannot be undone. The team member will be permanently removed from the system. "),o(),i(29,"div",20)(30,"div",4),g(),i(31,"svg",21),p(32,"path",22),o(),_(),i(33,"span",23),m(34," Warning: This action will permanently remove the team member and all associated data. "),o()()()(),i(35,"div",24)(36,"button",25),u("click",function(){return n.onClose()}),m(37," Cancel "),o(),i(38,"button",26),u("click",function(){return n.onConfirmDelete()}),m(39," Remove Member "),o()()()()()),e&2&&(l(15),R("ngModel",n.deleteReason),l(10),he('"',n.teamMember==null?null:n.teamMember.first_name," ",n.teamMember==null?null:n.teamMember.last_name,'"'))},dependencies:[E,O,V,A,$],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};var Q=class r{constructor(t){this.http=t}cache$;apiUrl=`${Te.apiUrl}/locations-hierarchy`;getTree(){return this.cache$||(this.cache$=this.http.get(this.apiUrl).pipe(se(t=>t.data.hierarchy),me(1))),this.cache$}clearCache(){this.cache$=void 0}static \u0275fac=function(e){return new(e||r)(ce(ye))};static \u0275prov=de({token:r,factory:r.\u0275fac,providedIn:"root"})};function Je(r,t){if(r&1&&(i(0,"div",33)(1,"div",34),g(),i(2,"svg",35),p(3,"path",36),o(),_(),i(4,"p",37),m(5),o()()()),r&2){let e=d();l(5),w(e.error)}}function Ke(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d();l(),h(" ",e.getFieldError("first_name")," ")}}function Qe(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d();l(),h(" ",e.getFieldError("last_name")," ")}}function Xe(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d();l(),h(" ",e.getFieldError("email")," ")}}function et(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d(2);l(),h(" ",e.getFieldError("password")," ")}}function tt(r,t){if(r&1&&(i(0,"div",12)(1,"label",39),m(2," Password (Optional) "),o(),p(3,"input",40),f(4,et,2,1,"p",15),i(5,"p",27),m(6," Leave blank to auto-generate a secure password and send via email. "),o()()),r&2){let e,n=d();l(3),M("border-red-300",((e=n.teamMemberForm.get("password"))==null?null:e.invalid)&&(((e=n.teamMemberForm.get("password"))==null?null:e.dirty)||((e=n.teamMemberForm.get("password"))==null?null:e.touched))),l(),c("ngIf",n.getFieldError("password"))}}function nt(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d(2);l(),h(" ",e.getFieldError("password_confirmation")," ")}}function it(r,t){if(r&1&&(i(0,"div",12)(1,"label",41),m(2," Confirm Password "),o(),p(3,"input",42),f(4,nt,2,1,"p",15),o()),r&2){let e,n=d();l(3),M("border-red-300",((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.invalid)&&(((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.dirty)||((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.touched))),l(),c("ngIf",n.getFieldError("password_confirmation"))}}function ot(r,t){if(r&1&&(i(0,"option",43),m(1),o()),r&2){let e=t.$implicit;c("value",e.id),l(),h(" ",e.name," ")}}function rt(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d();l(),h(" ",e.getFieldError("role_id")," ")}}function at(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d();l(),h(" ",e.rolesError," ")}}function lt(r,t){if(r&1&&(i(0,"p",38),m(1),o()),r&2){let e=d();l(),h(" ",e.getFieldError("hourly_rate")," ")}}function st(r,t){r&1&&(i(0,"div",55),m(1,"Loading locations..."),o())}function mt(r,t){if(r&1&&(i(0,"div",56),m(1),o()),r&2){let e=d(2);l(),w(e.treeError)}}function dt(r,t){if(r&1&&(i(0,"div"),p(1,"ng-select",57),o()),r&2){let e=d(2);l(),c("items",e.flatLocationOptions)("multiple",!0)("closeOnSelect",!1)("searchable",!0)}}function ct(r,t){if(r&1){let e=T();i(0,"div",44)(1,"div",45)(2,"div",46),m(3,"Location Scope"),o(),i(4,"button",47),u("click",function(){v(e);let a=d();return x(a.clearSelection())}),m(5,"Clear selection (Full access)"),o()(),i(6,"div",48),p(7,"input",49),i(8,"label",50),m(9,"Include descendants (recommended)"),o()(),f(10,st,2,0,"div",51)(11,mt,2,1,"div",52)(12,dt,2,4,"div",53),i(13,"p",54),m(14,"No selection means full access to all locations."),o()()}if(r&2){let e=d();l(10),c("ngIf",e.loadingTree),l(),c("ngIf",e.treeError),l(),c("ngIf",!e.loadingTree&&!e.treeError)}}function pt(r,t){r&1&&(g(),i(0,"svg",58),p(1,"circle",59)(2,"path",60),o())}var X=class r{constructor(t,e,n,a,s){this.fb=t;this.teamService=e;this.roleService=n;this.locationTreeService=a;this.toastService=s;this.teamMemberForm=this.fb.group({first_name:["",[S.required,S.minLength(2),S.maxLength(100)]],last_name:["",[S.required,S.minLength(2),S.maxLength(100)]],email:["",[S.required,S.email]],role_id:["",[S.required]],hourly_rate:[null,[S.min(0)]],location_ids:[[]],expand_descendants:[!0],password:["",[S.minLength(8),S.maxLength(72)]],password_confirmation:[""]},{validators:r.passwordMatchValidator}),this.loadAvailableRoles()}teamMember=null;isEditMode=!1;teamMemberSaved=new I;cancelled=new I;teamMemberForm;loading=!1;error="";availableRoles=[];loadingRoles=!1;rolesError="";locationTree=[];loadingTree=!1;treeError="";expandDescendants=!0;flatLocationOptions=[];ngOnInit(){this.teamMember&&this.isEditMode&&this.teamService.getTeamMember(this.teamMember.id).subscribe({next:t=>{this.teamMember=t.data,this.loadTeamMember()},error:()=>{this.loadTeamMember()}}),this.teamMemberForm.get("role_id")?.valueChanges.subscribe(t=>{let e=this.availableRoles.find(n=>n.id===Number(t));if(e&&e.has_location_access){if(this.ensureTreeLoaded(),this.isEditMode&&this.teamMember&&Array.isArray(this.teamMember.locations)){let n=this.teamMember.locations.map(a=>a.id);n.length>0&&this.teamMember.has_full_location_access===!1&&this.teamMemberForm.patchValue({location_ids:n})}}else this.teamMemberForm.patchValue({location_ids:[]})})}ngOnChanges(t){t.teamMember&&t.teamMember.currentValue&&this.isEditMode&&(this.availableRoles.length>0?this.loadTeamMember():setTimeout(()=>{this.availableRoles.length>0&&this.loadTeamMember()},100))}updateFormWithTeamMember(){this.teamMember&&this.isEditMode&&this.availableRoles.length>0&&this.loadTeamMember()}loadAvailableRoles(){this.loadingRoles=!0,this.rolesError="",this.roleService.getRoles().subscribe({next:t=>{this.availableRoles=t.data||[],this.loadingRoles=!1,this.isEditMode&&this.teamMember&&this.loadTeamMember()},error:t=>{this.teamService.getAvailableRoles().subscribe({next:e=>{this.availableRoles=e.data||[],this.loadingRoles=!1,this.isEditMode&&this.teamMember&&this.loadTeamMember()},error:e=>{this.rolesError="Failed to load roles. Please try again.",this.loadingRoles=!1,this.toastService.error("Failed to load available roles")}})}})}loadTeamMember(){if(this.teamMember){let t;this.teamMember.role_id?t=this.teamMember.role?.name:this.teamMember.role?.name?t=this.teamMember.role.name:Array.isArray(this.teamMember.roles)&&this.teamMember.roles.length>0&&(t=this.teamMember.roles[0].name);let e;if(t){let s=this.availableRoles.find(b=>b.name===t);e=s?.id,console.log("Team Member Role Matching:",{teamMemberRoleName:t,availableRoles:this.availableRoles.map(b=>({id:b.id,name:b.name})),matchingRole:s?{id:s.id,name:s.name}:null,selectedRoleId:e})}let n=this.teamMember.hourly_rate;this.teamMemberForm.patchValue({first_name:this.teamMember.first_name,last_name:this.teamMember.last_name,email:this.teamMember.email,role_id:e||"",hourly_rate:n!=null?Number(n):null,expand_descendants:!0});let a=this.availableRoles.find(s=>s.id===e);if(a&&a.has_location_access){this.ensureTreeLoaded();let s=Array.isArray(this.teamMember.locations)?this.teamMember.locations.map(b=>b.id):[];s.length>0&&this.teamMember.has_full_location_access===!1?this.teamMemberForm.patchValue({location_ids:s}):this.teamMemberForm.patchValue({location_ids:[]})}}}onBackdropClick(t){t.target===t.currentTarget&&this.onCancel()}onSubmit(){if(this.teamMemberForm.invalid){this.markFormGroupTouched(),this.toastService.warning("Please fill in all required fields correctly");return}this.loading=!0,this.error="";let t=k({},this.teamMemberForm.value);t.location_ids=t.location_ids&&t.location_ids.length>0?t.location_ids:null,(t.expand_descendants===void 0||t.expand_descendants===null)&&(t.expand_descendants=!0),(!t.password||t.password.trim()==="")&&(delete t.password,delete t.password_confirmation),this.isEditMode&&this.teamMember?this.teamService.updateTeamMember(this.teamMember.id,t).subscribe({next:e=>{this.loading=!1,this.teamMemberSaved.emit(e.data)},error:e=>{this.loading=!1,this.error=e.error?.message||"Failed to update team member. Please try again.",this.toastService.error(this.error)}}):this.teamService.createTeamMember(t).subscribe({next:e=>{this.loading=!1,this.teamMemberSaved.emit(e.data)},error:e=>{this.loading=!1,this.error=e.error?.message||"Failed to create team member. Please try again.",this.toastService.error(this.error)}})}onCancel(){this.cancelled.emit()}getFieldError(t){let e=this.teamMemberForm.get(t);if(e?.invalid&&(e?.dirty||e?.touched)){if(e?.errors?.required)return`${this.getFieldLabel(t)} is required.`;if(e?.errors?.email)return"Please enter a valid email address.";if(e?.errors?.minlength)return`${this.getFieldLabel(t)} must be at least ${e.errors.minlength.requiredLength} characters.`;if(e?.errors?.maxlength)return`${this.getFieldLabel(t)} must not exceed ${e.errors.maxlength.requiredLength} characters.`;if(e?.errors?.min)return`${this.getFieldLabel(t)} must be at least ${e.errors.min.min}.`;if(e?.errors?.passwordMismatch)return"Password confirmation does not match."}return t==="password_confirmation"&&this.teamMemberForm.hasError("passwordMismatch")?"Password confirmation does not match.":""}getFieldLabel(t){return{first_name:"First name",last_name:"Last name",email:"Email",role_id:"Team role",hourly_rate:"Hourly rate",password:"Password",password_confirmation:"Confirm Password"}[t]||t}markFormGroupTouched(){Object.keys(this.teamMemberForm.controls).forEach(t=>{this.teamMemberForm.get(t)?.markAsTouched()})}get selectedRole(){let t=this.teamMemberForm.get("role_id")?.value;return this.availableRoles.find(e=>e.id===Number(t))}get showLocationScope(){return!!this.selectedRole?.has_location_access}ensureTreeLoaded(){this.locationTree.length>0||this.loadingTree||(this.loadingTree=!0,this.treeError="",this.locationTreeService.getTree().subscribe({next:t=>{this.locationTree=t,this.flatLocationOptions=this.flatten(t),this.loadingTree=!1},error:t=>{this.treeError="Failed to load locations tree.",this.loadingTree=!1,this.toastService.error("Failed to load location tree")}}))}isChecked(t){return(this.teamMemberForm.get("location_ids")?.value||[]).includes(t)}toggleNode(t,e){let n=this.teamMemberForm.get("location_ids"),a=[...n?.value||[]],s=this.collectIds(t);e?s.forEach(b=>{a.includes(b)||a.push(b)}):s.forEach(b=>{let C=a.indexOf(b);C>=0&&a.splice(C,1)}),n?.setValue(a)}clearSelection(){this.teamMemberForm.patchValue({location_ids:[]})}collectIds(t){let e=[t.id];return t.children&&t.children.length&&t.children.forEach(n=>e.push(...this.collectIds(n))),e}flatten(t,e=0,n=[]){for(let a of t)n.push({id:a.id,label:`${"\u2014 ".repeat(e)}${a.name}`}),a.children?.length&&this.flatten(a.children,e+1,n);return n}static passwordMatchValidator(t){let e=t.get("password"),n=t.get("password_confirmation");return!e||!n?null:e.value&&n.value!==e.value?(n.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(n.hasError("passwordMismatch")&&n.setErrors(null),null)}static \u0275fac=function(e){return new(e||r)(y(Re),y(J),y(We),y(Q),y(Y))};static \u0275cmp=D({type:r,selectors:[["app-team-form-modal"]],inputs:{teamMember:"teamMember",isEditMode:"isEditMode"},outputs:{teamMemberSaved:"teamMemberSaved",cancelled:"cancelled"},features:[pe],decls:53,vars:26,consts:[[1,"modal-overlay","fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-4xl","mx-4","transform","transition-all"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-6","py-4"],[3,"ngSubmit","formGroup"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],[1,"mb-4"],["for","first_name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","first_name","type","text","formControlName","first_name","placeholder","Enter first name",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","last_name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","last_name","type","text","formControlName","last_name","placeholder","Enter last name",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","type","email","formControlName","email","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["class","mb-4",4,"ngIf"],["for","role_id",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","role_id","formControlName","role_id",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","hourly_rate",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","hourly_rate","type","number","formControlName","hourly_rate","placeholder","Enter hourly rate","min","0","step","0.01",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],[1,"mt-1","text-xs","text-gray-500"],["class","mb-4 border rounded-lg p-3 bg-gray-50",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-200"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-2 h-4 w-4 text-white inline","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-2","text-sm","text-red-700"],[1,"mt-1","text-sm","text-red-600"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password","type","password","formControlName","password","placeholder","Enter custom password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password_confirmation","type","password","formControlName","password_confirmation","placeholder","Confirm password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],[3,"value"],[1,"mb-4","border","rounded-lg","p-3","bg-gray-50"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-gray-800"],["type","button",1,"text-sm","text-blue-600","hover:underline",3,"click"],[1,"flex","items-center","mb-3"],["type","checkbox","id","expand_descendants","formControlName","expand_descendants",1,"mr-2"],["for","expand_descendants",1,"text-sm","text-gray-700"],["class","text-sm text-gray-500",4,"ngIf"],["class","text-sm text-red-600",4,"ngIf"],[4,"ngIf"],[1,"mt-2","text-xs","text-gray-500"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-red-600"],["bindLabel","label","bindValue","id","placeholder","Select locations (empty = full access)","formControlName","location_ids",3,"items","multiple","closeOnSelect","searchable"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white","inline"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){if(e&1&&(i(0,"div",0),u("click",function(s){return n.onBackdropClick(s)}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),m(5),o(),i(6,"button",5),u("click",function(){return n.onCancel()}),g(),i(7,"svg",6),p(8,"path",7),o()()()(),_(),i(9,"div",8)(10,"form",9),u("ngSubmit",function(){return n.onSubmit()}),f(11,Je,6,1,"div",10),i(12,"div",11)(13,"div",12)(14,"label",13),m(15," First Name * "),o(),p(16,"input",14),f(17,Ke,2,1,"p",15),o(),i(18,"div",12)(19,"label",16),m(20," Last Name * "),o(),p(21,"input",17),f(22,Qe,2,1,"p",15),o(),i(23,"div",12)(24,"label",18),m(25," Email * "),o(),p(26,"input",19),f(27,Xe,2,1,"p",15),o(),f(28,tt,7,3,"div",20)(29,it,5,3,"div",20),i(30,"div",12)(31,"label",21),m(32," Team Role * "),o(),i(33,"select",22)(34,"option",23),m(35,"Select a role"),o(),f(36,ot,2,2,"option",24),o(),f(37,rt,2,1,"p",15)(38,at,2,1,"p",15),o(),i(39,"div",12)(40,"label",25),m(41," Hourly Rate (Optional) "),o(),p(42,"input",26),f(43,lt,2,1,"p",15),i(44,"p",27),m(45," Optional hourly rate for this team member "),o()()(),f(46,ct,15,3,"div",28),i(47,"div",29)(48,"button",30),u("click",function(){return n.onCancel()}),m(49," Cancel "),o(),i(50,"button",31),f(51,pt,3,0,"svg",32),m(52),o()()()()()()),e&2){let a,s,b,C,P;l(5),h(" ",n.isEditMode?"Edit Team Member":"Invite New Team Member"," "),l(5),c("formGroup",n.teamMemberForm),l(),c("ngIf",n.error),l(5),M("border-red-300",((a=n.teamMemberForm.get("first_name"))==null?null:a.invalid)&&(((a=n.teamMemberForm.get("first_name"))==null?null:a.dirty)||((a=n.teamMemberForm.get("first_name"))==null?null:a.touched))),l(),c("ngIf",n.getFieldError("first_name")),l(4),M("border-red-300",((s=n.teamMemberForm.get("last_name"))==null?null:s.invalid)&&(((s=n.teamMemberForm.get("last_name"))==null?null:s.dirty)||((s=n.teamMemberForm.get("last_name"))==null?null:s.touched))),l(),c("ngIf",n.getFieldError("last_name")),l(4),M("border-red-300",((b=n.teamMemberForm.get("email"))==null?null:b.invalid)&&(((b=n.teamMemberForm.get("email"))==null?null:b.dirty)||((b=n.teamMemberForm.get("email"))==null?null:b.touched))),l(),c("ngIf",n.getFieldError("email")),l(),c("ngIf",!n.isEditMode),l(),c("ngIf",!n.isEditMode),l(4),M("border-red-300",((C=n.teamMemberForm.get("role_id"))==null?null:C.invalid)&&(((C=n.teamMemberForm.get("role_id"))==null?null:C.dirty)||((C=n.teamMemberForm.get("role_id"))==null?null:C.touched))),l(3),c("ngForOf",n.availableRoles),l(),c("ngIf",n.getFieldError("role_id")),l(),c("ngIf",n.rolesError),l(4),M("border-red-300",((P=n.teamMemberForm.get("hourly_rate"))==null?null:P.invalid)&&(((P=n.teamMemberForm.get("hourly_rate"))==null?null:P.dirty)||((P=n.teamMemberForm.get("hourly_rate"))==null?null:P.touched))),l(),c("ngIf",n.getFieldError("hourly_rate")),l(3),c("ngIf",n.showLocationScope),l(4),c("disabled",n.teamMemberForm.invalid||n.loading),l(),c("ngIf",n.loading),l(),h(" ",n.isEditMode?"Update Team Member":"Send Invitation"," ")}},dependencies:[E,q,W,Z,Oe,De,Ve,V,Pe,ke,Le,A,Ee,Ae,Ie,Fe,O,ze,$e],styles:[".modal-overlay[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-enter[_ngcontent-%COMP%]{opacity:0;transform:scale(.9)}.modal-enter-active[_ngcontent-%COMP%]{opacity:1;transform:scale(1);transition:opacity .2s ease-out,transform .2s ease-out}.modal-exit[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.modal-exit-active[_ngcontent-%COMP%]{opacity:0;transform:scale(.9);transition:opacity .2s ease-in,transform .2s ease-in}.backdrop-enter[_ngcontent-%COMP%]{opacity:0}.backdrop-enter-active[_ngcontent-%COMP%]{opacity:1;transition:opacity .2s ease-out}.backdrop-exit[_ngcontent-%COMP%]{opacity:1}.backdrop-exit-active[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s ease-in}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);transition:transform .1s ease-in-out}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};function ut(r,t){if(r&1&&(i(0,"div",16),m(1),o()),r&2){let e=d();l(),h(" ",e.errorMessage," ")}}function gt(r,t){r&1&&(i(0,"div",17),p(1,"div",18),i(2,"span"),m(3,"Loading work orders..."),o()())}function ft(r,t){r&1&&(i(0,"div",19),g(),i(1,"svg",20),p(2,"path",21),o(),_(),i(3,"span"),m(4,"No available work orders to assign"),o()())}function bt(r,t){r&1&&(i(0,"span"),m(1,"Assigning..."),o())}function _t(r,t){r&1&&(i(0,"span"),m(1,"Assign Work Order"),o())}var ee=class r{constructor(t){this.workOrderService=t}teamMemberName="";teamMemberId=0;closed=new I;submitted=new I;workOrders=[];selectedWorkOrderId=null;selectedWorkOrder=null;dueDate="";notes="";loading=!1;errorMessage="";ngOnInit(){this.fetchWorkOrders()}fetchWorkOrders(){this.loading=!0,this.errorMessage="",this.workOrderService.getWorkOrders({page:1,per_page:1e3}).subscribe({next:t=>{console.log("Work orders response:",t);let e=(t.data.data||[]).filter(n=>n.assigned_to!==this.teamMemberId&&n.status?.slug!=="completed"&&n.status?.slug!=="cancelled");this.workOrders=e.map(n=>({id:n.id,name:n.title,description:n.description||`Status: ${n.status?.name||"Unknown"}`,icon:"work-order"})),console.log("Transformed work orders:",this.workOrders),this.loading=!1},error:t=>{console.error("Error fetching work orders:",t),this.errorMessage="Failed to load work orders. Please try again.",this.loading=!1}})}submit(){if(!this.selectedWorkOrderId){this.errorMessage="Please select a work order";return}this.errorMessage="",this.loading=!0,this.workOrderService.assignWorkOrder(this.selectedWorkOrderId,{user_id:this.teamMemberId,due_date:this.dueDate||void 0,notes:this.notes||void 0}).subscribe({next:t=>{console.log("Work order assigned successfully:",t),this.loading=!1,this.submitted.emit({work_order_id:this.selectedWorkOrderId,due_date:this.dueDate||void 0,notes:this.notes||void 0})},error:t=>{console.error("Error assigning work order:",t),this.loading=!1,t.error&&t.error.message?this.errorMessage=t.error.message:this.errorMessage="Failed to assign work order. Please try again."}})}selectWorkOrder(t){this.selectedWorkOrder=t,this.selectedWorkOrderId=t.id,this.errorMessage=""}onInputChange(){this.errorMessage=""}close(){this.closed.emit()}static \u0275fac=function(e){return new(e||r)(y(He))};static \u0275cmp=D({type:r,selectors:[["app-assign-work-order-modal"]],inputs:{teamMemberName:"teamMemberName",teamMemberId:"teamMemberId"},outputs:{closed:"closed",submitted:"submitted"},decls:28,vars:15,consts:[[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"subtitle"],["class","error-message",4,"ngIf"],[1,"form-group"],["label","Available Work Orders",3,"selectionChange","required","options","selectedOption","placeholder","searchable","disabled"],["class","loading-indicator",4,"ngIf"],["class","no-work-orders",4,"ngIf"],["type","datetime-local",1,"input",3,"ngModelChange","input","ngModel"],["rows","5","placeholder","Add any specific instructions or notes for this assignment...",1,"textarea",3,"ngModelChange","input","ngModel"],[1,"modal-actions"],[1,"btn","secondary",3,"click"],[1,"btn","primary",3,"click","disabled"],[4,"ngIf"],[1,"error-message"],[1,"loading-indicator"],[1,"spinner"],[1,"no-work-orders"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"]],template:function(e,n){e&1&&(i(0,"div",0),u("click",function(){return n.close()}),i(1,"div",1),u("click",function(s){return s.stopPropagation()}),i(2,"div",2)(3,"h3"),m(4),o(),i(5,"button",3),u("click",function(){return n.close()}),m(6,"\xD7"),o()(),i(7,"p",4),m(8,"Select a work order to assign to this team member"),o(),f(9,ut,2,1,"div",5),i(10,"div",6)(11,"app-global-dropdown",7),u("selectionChange",function(s){return n.selectWorkOrder(s)}),o(),f(12,gt,4,0,"div",8)(13,ft,5,0,"div",9),o(),i(14,"div",6)(15,"label"),m(16,"Due Date (Optional)"),o(),i(17,"input",10),N("ngModelChange",function(s){return j(n.dueDate,s)||(n.dueDate=s),s}),u("input",function(){return n.onInputChange()}),o()(),i(18,"div",6)(19,"label"),m(20,"Assignment Notes (Optional)"),o(),i(21,"textarea",11),N("ngModelChange",function(s){return j(n.notes,s)||(n.notes=s),s}),u("input",function(){return n.onInputChange()}),o()(),i(22,"div",12)(23,"button",13),u("click",function(){return n.close()}),m(24,"Cancel"),o(),i(25,"button",14),u("click",function(){return n.submit()}),f(26,bt,2,0,"span",15)(27,_t,2,0,"span",15),o()()()()),e&2&&(l(4),h("Assign Work Order to ",n.teamMemberName,""),l(5),c("ngIf",n.errorMessage),l(2),c("required",!0)("options",n.workOrders)("selectedOption",n.selectedWorkOrder)("placeholder",n.loading?"Loading work orders...":"Select a work order")("searchable",!0)("disabled",n.loading),l(),c("ngIf",n.loading),l(),c("ngIf",!n.loading&&n.workOrders.length===0),l(4),R("ngModel",n.dueDate),l(4),R("ngModel",n.notes),l(4),c("disabled",!n.selectedWorkOrderId||n.loading||n.workOrders.length===0),l(),c("ngIf",n.loading),l(),c("ngIf",!n.loading))},dependencies:[E,W,O,V,A,$,Ne],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;width:90%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#6b7280;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;color:#374151}.subtitle[_ngcontent-%COMP%]{margin:0 24px 20px;color:#6b7280;font-size:14px}.form-group[_ngcontent-%COMP%]{margin:0 24px 20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#374151;font-size:14px}.input[_ngcontent-%COMP%], .textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #d1d5db;border-radius:8px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.input[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.error-message[_ngcontent-%COMP%]{margin:0 24px 20px;padding:12px 16px;background-color:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:14px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 24px 24px;border-top:1px solid #e5e7eb}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;color:#6b7280;font-size:14px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e5e7eb;border-top:2px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-work-orders[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;padding:12px;background-color:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;color:#6b7280;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s;border:none}.btn.secondary[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn.secondary[_ngcontent-%COMP%]:hover{background-color:#e5e7eb}.btn.primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn.primary[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}.required[_ngcontent-%COMP%]{color:#dc2626;margin-left:4px}.generic-dropdown[_ngcontent-%COMP%]{position:relative;width:100%}.dropdown-button[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #d1d5db;border-radius:8px;background:#fff;cursor:pointer;transition:all .2s;text-align:left;font-size:14px;min-height:48px;display:flex;align-items:center;justify-content:space-between}.dropdown-button[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#9ca3af}.dropdown-button[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.dropdown-button.active[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.dropdown-button[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;color:#9ca3af;cursor:not-allowed;border-color:#e5e7eb}.dropdown-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.placeholder[_ngcontent-%COMP%]{color:#9ca3af;font-style:italic}.selected-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%}.item-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;flex-shrink:0}.icon[_ngcontent-%COMP%]{width:16px;height:16px;color:#6b7280}.selected-text[_ngcontent-%COMP%]{color:#111827;font-weight:500;flex:1}.dropdown-arrow[_ngcontent-%COMP%]{width:20px;height:20px;color:#6b7280;transition:transform .2s;flex-shrink:0}.dropdown-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #d1d5db;border-top:none;border-radius:0 0 8px 8px;box-shadow:0 10px 15px -3px #0000001a;z-index:10;max-height:300px;overflow-y:auto}.dropdown-header[_ngcontent-%COMP%]{padding:12px 16px;background-color:#f9fafb;border-bottom:1px solid #e5e7eb;font-weight:500;color:#374151;font-size:14px}.dropdown-item[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;background:none;text-align:left;cursor:pointer;transition:background-color .2s;border-bottom:1px solid #f3f4f6}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dropdown-item.selected[_ngcontent-%COMP%]{background-color:#eff6ff;color:#1d4ed8}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.item-details[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-weight:500;color:#111827;margin-bottom:2px}.item-description[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.4}"]})};var Ge=(r,t)=>t.value;function ht(r,t){if(r&1&&(i(0,"div",8)(1,"div",56),g(),i(2,"svg",57),p(3,"path",58),o(),_(),i(4,"span",59),m(5),o()()()),r&2){let e=d();l(5),w(e.successMessage)}}function vt(r,t){if(r&1&&(i(0,"p",18),m(1),o()),r&2){let e=d();l(),h("",(e.statistics==null?null:e.statistics.active_team_members)||0," Active")}}function xt(r,t){r&1&&(g(),i(0,"svg",64),p(1,"path",65),o())}function Mt(r,t){if(r&1){let e=T();i(0,"div",62),u("click",function(){let a=v(e).$implicit,s=d(2);return x(s.selectSort(a))}),i(1,"span"),m(2),o(),f(3,xt,2,0,"svg",63),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedSort==null?null:n.selectedSort.value)===e.value),l(2),w(e.label),l(),c("ngIf",(n.selectedSort==null?null:n.selectedSort.value)===e.value)}}function wt(r,t){if(r&1&&(i(0,"div",47)(1,"div",60),f(2,Mt,4,4,"div",61),o()()),r&2){let e=d();l(2),c("ngForOf",e.sortOptions)}}function Ct(r,t){r&1&&(g(),i(0,"svg",64),p(1,"path",65),o())}function yt(r,t){if(r&1){let e=T();i(0,"div",62),u("click",function(){let a=v(e).$implicit,s=d(2);return x(s.selectRole(a))}),i(1,"span"),m(2),o(),f(3,Ct,2,0,"svg",63),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedRole==null?null:n.selectedRole.value)===e.value),l(2),w(e.label),l(),c("ngIf",(n.selectedRole==null?null:n.selectedRole.value)===e.value)}}function Tt(r,t){if(r&1&&(i(0,"div",47)(1,"div",60),ie(2,yt,4,4,"div",66,Ge),o()()),r&2){let e=d();l(2),oe(e.roleOptions)}}function St(r,t){r&1&&(g(),i(0,"svg",64),p(1,"path",65),o())}function kt(r,t){if(r&1){let e=T();i(0,"div",62),u("click",function(){let a=v(e).$implicit,s=d(2);return x(s.selectStatus(a))}),i(1,"span"),m(2),o(),f(3,St,2,0,"svg",63),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value),l(2),w(e.label),l(),c("ngIf",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value)}}function Et(r,t){if(r&1&&(i(0,"div",47)(1,"div",60),ie(2,kt,4,4,"div",66,Ge),o()()),r&2){let e=d();l(2),oe(e.statusOptions)}}function Ot(r,t){if(r&1&&(i(0,"div",48)(1,"div",67),g(),i(2,"svg",68),p(3,"path",69),o(),_(),i(4,"p",70),m(5),o()()()),r&2){let e=d();l(5),w(e.error)}}function Pt(r,t){if(r&1){let e=T();i(0,"div",111),u("click",function(a){return v(e),x(a.stopPropagation())}),i(1,"div",60)(2,"button",112),u("click",function(a){v(e);let s=d().$implicit,b=d(2);return x(b.onEditClick(a,s))}),g(),i(3,"svg",113),p(4,"path",114),o(),_(),i(5,"span"),m(6,"Edit Member"),o()(),i(7,"button",115),u("click",function(a){v(e);let s=d().$implicit,b=d(2);return x(b.onToggleStatusClick(a,s))}),g(),i(8,"svg",116),p(9,"path",117),o(),m(10),o(),_(),i(11,"button",118),u("click",function(a){v(e);let s=d().$implicit,b=d(2);return x(b.onDeleteClick(a,s))}),g(),i(12,"svg",119),p(13,"path",120),o(),_(),i(14,"span"),m(15,"Remove Member"),o()()()()}if(r&2){let e=d().$implicit;l(7),M("text-red-500",e.active)("text-green-600",!e.active)("hover:bg-red-50",e.active)("hover:bg-green-50",!e.active),l(),fe(e.active?"size-4 text-red-500 mr-2.5":"size-4 text-green-500 mr-2.5"),l(2),h(" ",e.active?"Inactive":"Active"," ")}}function It(r,t){if(r&1&&(i(0,"div",121),g(),i(1,"svg",94),p(2,"path",122),o(),_(),i(3,"span"),m(4),o()()),r&2){let e=d().$implicit;l(4),w(e.role.name)}}function Ft(r,t){if(r&1&&(i(0,"div",123)(1,"span"),m(2),o()()),r&2){let e=d().$implicit;l(2),h("$",e.hourly_rate,"/hour")}}function Lt(r,t){r&1&&(i(0,"span",124),m(1,"Full access"),o())}function Dt(r,t){if(r&1&&(i(0,"span",128),m(1),o()),r&2){let e=t.$implicit;l(),h(" ",e.name," ")}}function Vt(r,t){if(r&1&&(i(0,"span",129),m(1),o()),r&2){let e=d(2).$implicit;l(),h(" ",e.locations.length-2," more+ ")}}function At(r,t){if(r&1&&(be(0),i(1,"div",125),f(2,Dt,2,1,"span",126),re(3,"slice"),f(4,Vt,2,1,"span",127),o(),_e()),r&2){let e=d().$implicit;l(2),c("ngForOf",xe(3,2,e.locations,0,2)),l(2),c("ngIf",e.locations.length>2)}}function Rt(r,t){if(r&1){let e=T();i(0,"div",72)(1,"div",73)(2,"div",11)(3,"div",56)(4,"div",74),g(),i(5,"svg",75),p(6,"path",76),o()(),_(),i(7,"div")(8,"span",77),m(9),o(),i(10,"div",56)(11,"div",78),m(12),o(),i(13,"div",79),m(14),o()()()(),i(15,"div",80)(16,"button",81),u("click",function(a){let s=v(e).$implicit;return d(2).openAssign(s),x(a.stopPropagation())}),g(),i(17,"svg",82),p(18,"path",83)(19,"path",84),o(),_(),i(20,"span"),m(21,"Assign"),o()(),i(22,"button",85),u("click",function(a){let s=v(e).$implicit,b=d(2);return x(b.onToggleMenuClick(a,s.id))}),g(),i(23,"svg",86),p(24,"path",87),o()(),f(25,Pt,16,11,"div",88),o()()(),_(),i(26,"div",89)(27,"h3",90),m(28),o(),i(29,"p",91),m(30),o(),f(31,It,5,1,"div",92),i(32,"div",93),g(),i(33,"svg",94),p(34,"path",58),o(),_(),i(35,"span",95),m(36,"Status: "),o(),i(37,"span",96),m(38),o()(),f(39,Ft,3,1,"div",97),i(40,"div",98)(41,"div",99),g(),i(42,"svg",94),p(43,"path",100),o(),_(),i(44,"span"),m(45),re(46,"date"),o()(),i(47,"div",101),f(48,Lt,2,0,"span",102)(49,At,5,6,"ng-container",103),o()(),p(50,"hr",104),i(51,"div",105)(52,"div",106)(53,"div",107),m(54),o(),i(55,"div",108),m(56,"Assigned"),o()(),i(57,"div",106)(58,"div",109),m(59),o(),i(60,"div",108),m(61,"Active"),o()(),i(62,"div",106)(63,"div",110),m(64),o(),i(65,"div",108),m(66,"Completed"),o()()()()()}if(r&2){let e,n,a,s=t.$implicit,b=d(2);l(9),h(" ",b.getTeamMemberFullName(s)," "),l(3),h("",s.roles[0].name," "),l(),M("bg-green-100",s.active)("text-green-800",s.active)("bg-red-100",!s.active)("text-red-800",!s.active),l(),h(" ",s.active?"Active":"Inactive"," "),l(11),c("ngIf",s.showMenu),l(3),w(b.getTeamMemberFullName(s)),l(2),w(s.email),l(),c("ngIf",s.role),l(6),M("text-green-600",s.active)("text-red-600",!s.active),l(),h(" ",s.active?"Active":"Inactive"," "),l(),c("ngIf",s.hourly_rate!==void 0&&s.hourly_rate!==null),l(6),h("Created ",ve(46,27,s.created_at,"MMM d, y"),""),l(3),c("ngIf",s.has_full_location_access),l(),c("ngIf",!s.has_full_location_access&&(s.locations==null?null:s.locations.length)),l(5),h("",(e=(e=s.assigned_work_orders_total_count)!==null&&e!==void 0?e:s.assigned_work_orders_count)!==null&&e!==void 0?e:0," "),l(5),h("",(n=s.assigned_work_orders_active_count)!==null&&n!==void 0?n:0," "),l(5),h("",(a=s.assigned_work_orders_completed_count)!==null&&a!==void 0?a:0," ")}}function jt(r,t){if(r&1&&(i(0,"div",50),f(1,Rt,67,30,"div",71),o()),r&2){let e=d();l(),c("ngForOf",e.filteredTeamMembers)}}function Nt(r,t){if(r&1){let e=T();i(0,"div",51)(1,"div",130),g(),i(2,"svg",131),p(3,"path",132),o(),_(),i(4,"h3",133),m(5,"No team members found"),o(),i(6,"p",134),m(7),o(),i(8,"div",135)(9,"button",136),u("click",function(){v(e);let a=d();return x(a.createTeamMember())}),g(),i(10,"svg",6),p(11,"path",7),o(),m(12," Invite Team Member "),o()()()()}if(r&2){let e=d();l(7),h(" ",e.searchTerm?"Try adjusting your search terms.":"Get started by inviting your first team member."," ")}}function Wt(r,t){r&1&&(i(0,"div",51)(1,"div",137),p(2,"div",138),o()())}function $t(r,t){if(r&1){let e=T();i(0,"app-pagination",139),u("pageChange",function(a){v(e);let s=d();return x(s.onPageChange(a))})("perPageChange",function(a){v(e);let s=d();return x(s.onPerPageChange(a))}),o()}if(r&2){let e=d();c("pagination",e.pagination)}}function zt(r,t){if(r&1){let e=T();i(0,"app-team-delete-confirmation-modal",140),u("confirmed",function(a){v(e);let s=d();return x(s.confirmDeleteTeamMember(a))})("cancelled",function(){v(e);let a=d();return x(a.closeDeleteModal())}),o()}if(r&2){let e=d();c("teamMember",e.teamMemberToDelete)}}function Ht(r,t){if(r&1){let e=T();i(0,"app-team-form-modal",141),u("teamMemberSaved",function(a){v(e);let s=d();return x(s.onTeamMemberSaved(a))})("cancelled",function(){v(e);let a=d();return x(a.closeFormModal())}),o()}if(r&2){let e=d();c("teamMember",e.teamMemberToEdit)("isEditMode",e.isEditMode)}}function Bt(r,t){if(r&1){let e=T();i(0,"app-assign-work-order-modal",142),u("closed",function(){v(e);let a=d();return x(a.closeAssign())})("submitted",function(a){v(e);let s=d();return x(s.onAssignmentSubmitted(a))}),o()}if(r&2){let e=d();c("teamMemberName",e.teamMemberToAssign?e.getTeamMemberFullName(e.teamMemberToAssign):"")("teamMemberId",e.teamMemberToAssign?e.teamMemberToAssign.id:0)}}var H=class r{constructor(t,e,n,a){this.teamService=t;this.toastService=e;this.cdr=n;this.authService=a}teamMembers=[];filteredTeamMembers=[];pagination=null;loading=!1;error="";successMessage="";statistics=null;analytics=null;currentPerPage=10;currentUserId=null;searchTerm="";selectedSort=null;selectedRole={label:"All Roles",value:""};selectedStatus={label:"All Status",value:""};selectedSortDir="asc";showSortDropdown=!1;showRoleDropdown=!1;showStatusDropdown=!1;showDeleteModal=!1;teamMemberToDelete=null;showFormModal=!1;teamMemberToEdit=null;isEditMode=!1;showAssignModal=!1;teamMemberToAssign=null;sortOptions=[{label:"Name",value:"name"},{label:"Created Date",value:"created_at"},{label:"Email",value:"email"},{label:"Role",value:"role_name"}];roleOptions=[{label:"All Roles",value:""},{label:"Admin",value:"admin"},{label:"User",value:"user"},{label:"Technician",value:"technician"}];statusOptions=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];onDocumentClick(t){let e=t.target,n=e.closest("button"),a=e.closest(".dropdown-menu");n||a||(this.teamMembers=this.teamMembers.map(s=>L(k({},s),{showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(s=>L(k({},s),{showMenu:!1})),this.showSortDropdown=!1,this.showRoleDropdown=!1,this.showStatusDropdown=!1)}ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUserId=t?.id||null}),this.loadTeamMembers(),this.loadStatistics()}loadTeamMembers(t=1,e=10){this.loading=!0,this.error="";let n;this.selectedStatus?.value==="active"?n=!0:this.selectedStatus?.value==="inactive"&&(n=!1),this.teamService.getTeamMembers(t,e,{search:this.searchTerm||void 0,role_name:this.selectedRole?.value||void 0,active:n,sort_by:this.selectedSort?.value||void 0,sort_dir:this.selectedSortDir}).subscribe({next:a=>{this.teamMembers=a.data.teams,this.pagination=a.data.pagination,this.filteredTeamMembers=this.teamMembers.filter(s=>s.id!==this.currentUserId),this.loading=!1},error:a=>{this.error="Failed to load team members",this.loading=!1,this.toastService.error("Failed to load team members")}})}loadStatistics(){this.teamService.getTeamMemberStatistics().subscribe({next:t=>{this.statistics=t.data},error:t=>{this.toastService.error("Failed to load team statistics")}}),this.teamService.getTeamAnalytics({date_range:30}).subscribe({next:t=>{this.analytics=t.data},error:t=>{this.toastService.error("Failed to load team analytics")}})}refreshStats(){this.loadStatistics()}createTeamMember(){this.teamMemberToEdit=null,this.isEditMode=!1,this.showFormModal=!0}editTeamMember(t){this.teamMemberToEdit=t,this.isEditMode=!0,this.showFormModal=!0}openAssign(t){this.teamMemberToAssign=t,this.showAssignModal=!0}closeAssign(){this.showAssignModal=!1,this.teamMemberToAssign=null}onAssignmentSubmitted(t){this.toastService.success(`Work order #${t.work_order_id} successfully assigned to ${this.teamMemberToAssign?.first_name} ${this.teamMemberToAssign?.last_name}`),this.loadTeamMembers(this.pagination?.current_page||1,this.currentPerPage),this.loadStatistics(),this.closeAssign()}viewTeamMember(t){this.toastService.info("View team member feature coming soon")}deleteTeamMember(t){this.teamMemberToDelete=t,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.teamMemberToDelete=null}confirmDeleteTeamMember(t){if(!this.teamMemberToDelete)return;let e=`${this.teamMemberToDelete.first_name} ${this.teamMemberToDelete.last_name}`;this.teamService.deleteTeamMember(this.teamMemberToDelete.id).subscribe({next:n=>{this.teamMembers=this.teamMembers.filter(a=>a.id!==this.teamMemberToDelete.id),this.filteredTeamMembers=this.filteredTeamMembers.filter(a=>a.id!==this.teamMemberToDelete.id),this.toastService.success(`Team member ${e} removed successfully`),this.closeDeleteModal()},error:n=>{this.error="Failed to delete team member",this.toastService.error("Failed to delete team member"),this.closeDeleteModal()}})}closeFormModal(){this.showFormModal=!1,this.teamMemberToEdit=null,this.isEditMode=!1}onTeamMemberSaved(t){let e=`${t.first_name} ${t.last_name}`;if(this.isEditMode){let n=this.teamMembers.findIndex(a=>a.id===t.id);n!==-1&&(this.teamMembers[n]=t,this.filteredTeamMembers=this.filteredTeamMembers.map(a=>a.id===t.id?t:a)),this.toastService.success(`Team member ${e} updated successfully`)}else this.teamMembers.unshift(t),this.filteredTeamMembers.unshift(t),this.toastService.success(`Team member ${e} created successfully`);this.closeFormModal()}onSearchChange(){this.loadTeamMembers(1)}filterTeamMembers(){let t=this.teamMembers.filter(e=>e.id!==this.currentUserId);this.searchTerm.trim()?this.filteredTeamMembers=t.filter(e=>`${e.first_name} ${e.last_name}`.toLowerCase().includes(this.searchTerm.toLowerCase())||e.email.toLowerCase().includes(this.searchTerm.toLowerCase())||e.role?.name&&e.role.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredTeamMembers=[...t],this.sortTeamMembers()}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}toggleRoleDropdown(){this.showRoleDropdown=!this.showRoleDropdown}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown}selectSort(t){this.selectedSort=t,this.showSortDropdown=!1,this.loadTeamMembers(1)}selectRole(t){this.selectedRole=t,this.showRoleDropdown=!1,this.loadTeamMembers(1)}selectStatus(t){this.selectedStatus=t,this.showStatusDropdown=!1,this.loadTeamMembers(1)}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.loadTeamMembers(1)}sortTeamMembers(){this.selectedSort&&this.filteredTeamMembers.sort((t,e)=>{let n,a;switch(this.selectedSort.value){case"name":n=`${t.first_name} ${t.last_name}`.toLowerCase(),a=`${e.first_name} ${e.last_name}`.toLowerCase();break;case"email":n=t.email.toLowerCase(),a=e.email.toLowerCase();break;case"created_at":n=new Date(t.created_at).getTime(),a=new Date(e.created_at).getTime();break;case"role":n=(t.role?.name||"").toLowerCase(),a=(e.role?.name||"").toLowerCase();break;default:n=`${t.first_name} ${t.last_name}`.toLowerCase(),a=`${e.first_name} ${e.last_name}`.toLowerCase()}return n<a?this.selectedSortDir==="asc"?-1:1:n>a?this.selectedSortDir==="asc"?1:-1:0})}getTeamMemberFullName(t){return`${t.first_name} ${t.last_name}`}getTeamMemberInitials(t){return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase()}toggleTeamMemberMenu(t){this.teamMembers=this.teamMembers.map(e=>L(k({},e),{showMenu:e.id===t?!e.showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(e=>L(k({},e),{showMenu:e.id===t?!e.showMenu:!1}))}onPageChange(t){this.loadTeamMembers(t,this.currentPerPage)}onPerPageChange(t){this.currentPerPage=t,this.loadTeamMembers(1,t)}toggleTeamMemberStatus(t){let e=`${t.first_name} ${t.last_name}`,n=t.active?"active":"inactive",a=t.active?"inactive":"active";this.teamService.toggleTeamMemberStatus(t.id).subscribe({next:s=>{let b=L(k({},t),{active:!t.active}),C=this.teamMembers.findIndex(ne=>ne.id===t.id);C!==-1&&(this.teamMembers[C]=b);let P=this.filteredTeamMembers.findIndex(ne=>ne.id===t.id);P!==-1&&(this.filteredTeamMembers[P]=b),this.toastService.success(`Team member ${e} status changed to ${a}`),setTimeout(()=>{this.loadStatistics()},100)},error:s=>{this.toastService.error(`Failed to update ${e}'s status`)}})}onEditClick(t,e){t.preventDefault(),t.stopPropagation(),this.closeAllDropdowns(),this.editTeamMember(e)}onToggleStatusClick(t,e){t.preventDefault(),t.stopPropagation(),this.closeAllDropdowns(),this.toggleTeamMemberStatus(e)}onDeleteClick(t,e){t.preventDefault(),t.stopPropagation(),this.closeAllDropdowns(),this.deleteTeamMember(e)}onToggleMenuClick(t,e){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),console.log("Toggle menu clicked for team member:",e);let n=window.pageYOffset||document.documentElement.scrollTop,a=window.innerWidth-document.documentElement.clientWidth,s=document.body.style.overflow,b=document.body.style.paddingRight;document.body.style.overflow="hidden",document.body.style.paddingRight=`${a}px`,document.body.style.position="fixed",document.body.style.top=`-${n}px`,document.body.style.width="100%",this.toggleTeamMemberMenu(e),setTimeout(()=>{document.body.style.overflow=s,document.body.style.paddingRight=b,document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,n)},50),console.log("After toggle, showMenu states:",this.teamMembers.map(C=>({id:C.id,showMenu:C.showMenu})))}closeAllDropdowns(){this.teamMembers=this.teamMembers.map(t=>L(k({},t),{showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(t=>L(k({},t),{showMenu:!1}))}static \u0275fac=function(e){return new(e||r)(y(J),y(Y),y(Me),y(Se))};static \u0275cmp=D({type:r,selectors:[["app-team-list"]],hostBindings:function(e,n){e&1&&u("click",function(s){return n.onDocumentClick(s)},!1,ue)},decls:104,vars:35,consts:[[1,"team-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-5","py-2","rounded-lg","shadow-sm","transition-colors","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"mb-6","bg-green-50","border","border-green-200","rounded-lg","p-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","mb-6"],[1,"bg-blue-50","rounded-xl","border","border-blue-100","p-6","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"text-base","font-medium","text-gray-700"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","d","M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"],[1,""],[1,"text-2xl","font-bold","text-gray-900","my-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"bg-green-50","rounded-xl","border","border-green-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","d","M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"],["stroke-linecap","round","stroke-linejoin","round","d","M4.867 19.125h.008v.008h-.008v-.008Z"],[1,"bg-orange-50","rounded-xl","border","border-orange-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","d","M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"bg-red-50","rounded-xl","border","border-red-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-red-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","mb-6"],[1,"flex-1","flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:items-center","md:space-x-3"],[1,"relative","w-full","md:w-80"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search team members by name or email...",1,"w-full","pl-10","pr-4","py-2","border-2","border-blue-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","input","ngModel"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[180px]",3,"click"],[1,"text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",4,"ngIf"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors","group","relative",3,"click","title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600","group-hover:text-blue-600","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","gap-6","mb-5"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"xl:col-span-2"],[3,"pagination","pageChange","perPageChange",4,"ngIf"],[3,"teamMember","confirmed","cancelled",4,"ngIf"],[3,"teamMember","isEditMode","teamMemberSaved","cancelled",4,"ngIf"],[3,"teamMemberName","teamMemberId","closed","submitted",4,"ngIf"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","font-medium"],[1,"py-1"],["class","px-3 py-2 text-sm text-gray-900 hover:bg-blue-50 cursor-pointer transition-colors flex items-center justify-between",3,"bg-blue-100","click",4,"ngFor","ngForOf"],[1,"px-3","py-2","text-sm","text-gray-900","hover:bg-blue-50","cursor-pointer","transition-colors","flex","items-center","justify-between",3,"click"],["class","w-4 h-4 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"px-3","py-2","text-sm","text-gray-900","hover:bg-blue-50","cursor-pointer","transition-colors","flex","items-center","justify-between",3,"bg-blue-100"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-2","text-sm","text-red-700"],["class","bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-shadow","overflow-hidden"],[1,"px-6","py-4","relative"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","mr-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-sm","font-medium","text-blue-400","block","mb-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800","inline"],[1,"ml-2","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"relative","flex","items-center","gap-2"],["type","button","title","Assign",1,"flex","items-center","gap-1","text-sm","px-3","py-1.5","rounded-md","bg-gray-100","hover:bg-gray-200","text-gray-700","border","border-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["type","button",1,"text-gray-400","hover:text-gray-600","p-1.5","rounded-full","hover:bg-gray-100","transition-colors","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"],["class","absolute right-0 top-full mt-1 w-40 bg-white rounded-lg shadow-lg border border-gray-200 z-50",3,"click",4,"ngIf"],[1,"px-6","py-4"],[1,"text-xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["class","flex items-center text-sm text-gray-500 mb-3",4,"ngIf"],[1,"flex","items-center","text-sm","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"text-gray-500"],[1,"ml-1","font-medium"],["class","flex items-center text-sm text-gray-500 mb-2",4,"ngIf"],[1,"grid","grid-cols-2"],[1,"flex","items-center","text-sm","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-xs","mb-2"],["class","inline-flex items-center px-2 py-0.5 rounded bg-green-100 text-green-700 border border-green-200",4,"ngIf"],[4,"ngIf"],[1,"my-3","border-gray-200"],[1,"grid","grid-cols-3"],[1,"text-center"],[1,"text-lg","font-semibold","text-blue-600"],[1,"text-xs","text-gray-500"],[1,"text-lg","font-semibold","text-yellow-600"],[1,"text-lg","font-semibold","text-green-600"],[1,"absolute","right-0","top-full","mt-1","w-40","bg-white","rounded-lg","shadow-lg","border","border-gray-200","z-50",3,"click"],["type","button",1,"flex","items-center","w-full","px-3","py-2.5","text-sm","text-gray-700","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2.5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["type","button",1,"flex","items-center","w-full","px-3","py-2.5","text-sm","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","d","M14.25 9v6m-4.5 0V9M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],["type","button",1,"flex","items-center","w-full","px-3","py-2.5","text-sm","text-red-600","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2.5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","text-sm","text-gray-500","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"flex","items-center","text-sm","text-gray-500","mb-2"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-green-100","text-green-700","border","border-green-200"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-0.5 rounded bg-gray-100 text-gray-700 border border-gray-200",4,"ngFor","ngForOf"],["class","inline-flex items-center px-2 py-0.5 rounded bg-blue-100 text-blue-700 border border-blue-200",4,"ngIf"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-gray-100","text-gray-700","border","border-gray-200"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-blue-100","text-blue-700","border","border-blue-200"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"flex","justify-center","items-center","py-12","h-100"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[3,"pageChange","perPageChange","pagination"],[3,"confirmed","cancelled","teamMember"],[3,"teamMemberSaved","cancelled","teamMember","isEditMode"],[3,"closed","submitted","teamMemberName","teamMemberId"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),m(4,"Team Management"),o(),i(5,"p",3),m(6,"Manage team members, assign work orders, and track team performance"),o()(),i(7,"div",4)(8,"button",5),u("click",function(){return n.createTeamMember()}),g(),i(9,"svg",6),p(10,"path",7),o(),m(11," Invite Team Member "),o()()(),f(12,ht,6,1,"div",8),_(),i(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12),m(17,"Total Members"),o(),i(18,"div",13),g(),i(19,"svg",14),p(20,"path",15),o()()(),_(),i(21,"div",16)(22,"p",17),m(23),o(),f(24,vt,2,1,"p",18),o()(),i(25,"div",19)(26,"div",11)(27,"div",12),m(28,"Assigned Task"),o(),i(29,"div",20),g(),i(30,"svg",21),p(31,"path",22)(32,"path",23),o()()(),_(),i(33,"div",16)(34,"p",17),m(35),o(),i(36,"p",18),m(37,"Work orders pending"),o()()(),i(38,"div",24)(39,"div",11)(40,"div",12),m(41,"Active Task"),o(),i(42,"div",25),g(),i(43,"svg",26),p(44,"path",27),o()()(),_(),i(45,"div",16)(46,"p",17),m(47),o(),i(48,"p",18),m(49,"Currently in progress"),o()()(),i(50,"div",28)(51,"div",11)(52,"div",12),m(53,"Completion Rate"),o(),i(54,"div",29),g(),i(55,"svg",30),p(56,"path",31),o()()(),_(),i(57,"div",16)(58,"p",17),m(59),o(),i(60,"p",18),m(61,"Tasks completed"),o()()()(),i(62,"div",32)(63,"div",33)(64,"div",34),g(),i(65,"svg",35),p(66,"path",36),o(),_(),i(67,"input",37),N("ngModelChange",function(s){return j(n.searchTerm,s)||(n.searchTerm=s),s}),u("input",function(){return n.onSearchChange()}),o()(),i(68,"div",38),u("click",function(s){return s.stopPropagation()}),i(69,"button",39),u("click",function(){return n.toggleSortDropdown()}),i(70,"div",11)(71,"span",40),m(72),o(),g(),i(73,"svg",41),p(74,"path",42),o()()(),f(75,wt,3,1,"div",43),o(),_(),i(76,"button",44),u("click",function(){return n.toggleSortDir()}),g(),i(77,"svg",45),p(78,"path",46),o()(),_(),i(79,"div",38),u("click",function(s){return s.stopPropagation()}),i(80,"button",39),u("click",function(){return n.toggleRoleDropdown()}),i(81,"div",11)(82,"span",40),m(83),o(),g(),i(84,"svg",41),p(85,"path",42),o()()(),f(86,Tt,4,0,"div",47),o(),_(),i(87,"div",38),u("click",function(s){return s.stopPropagation()}),i(88,"button",39),u("click",function(){return n.toggleStatusDropdown()}),i(89,"div",11)(90,"span",40),m(91),o(),g(),i(92,"svg",41),p(93,"path",42),o()()(),f(94,Et,4,0,"div",47),o()()(),f(95,Ot,6,1,"div",48),_(),i(96,"div",49),f(97,jt,2,1,"div",50)(98,Nt,13,1,"div",51)(99,Wt,3,0,"div",51),o(),f(100,$t,1,1,"app-pagination",52)(101,zt,1,1,"app-team-delete-confirmation-modal",53)(102,Ht,1,2,"app-team-form-modal",54)(103,Bt,1,2,"app-assign-work-order-modal",55),o()),e&2){let a;l(12),F(n.successMessage?12:-1),l(11),w((n.statistics==null?null:n.statistics.total_team_members)||0),l(),F(((a=n.statistics==null?null:n.statistics.active_team_members)!==null&&a!==void 0?a:0)!==0?24:-1),l(11),w((n.statistics==null?null:n.statistics.assigned_work_orders_total_count)||0),l(12),w((n.statistics==null?null:n.statistics.assigned_work_orders_active_count)||0),l(12),w((n.statistics==null?null:n.statistics.assigned_work_orders_completed_count)||0),l(8),R("ngModel",n.searchTerm),l(2),M("border-blue-500",n.showSortDropdown),l(3),h(" ",n.selectedSort?"Sort by: "+n.selectedSort.label:"Sort by"," "),l(),M("rotate-180",n.showSortDropdown),l(2),c("ngIf",n.showSortDropdown),l(),c("title",n.selectedSortDir==="asc"?"Currently: Ascending (A-Z, 1-9). Click to sort Descending (Z-A, 9-1)":"Currently: Descending (Z-A, 9-1). Click to sort Ascending (A-Z, 1-9)"),l(2),ge("d",n.selectedSortDir==="asc"?"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4":"M17 8V4m0 0l4 4m-4-4l-4 4M7 16v4m0 0l-4-4m4 4l4-4"),l(2),M("border-blue-500",n.showRoleDropdown),l(3),h(" ",n.selectedRole?n.selectedRole.label:"All Roles"," "),l(),M("rotate-180",n.showRoleDropdown),l(2),F(n.showRoleDropdown?86:-1),l(2),M("border-blue-500",n.showStatusDropdown),l(3),h(" ",n.selectedStatus?n.selectedStatus.label:"All Status"," "),l(),M("rotate-180",n.showStatusDropdown),l(2),F(n.showStatusDropdown?94:-1),l(),F(n.error&&!n.loading?95:-1),l(2),F(n.loading?-1:97),l(),F(!n.loading&&n.filteredTeamMembers.length===0?98:-1),l(),F(n.loading?99:-1),l(),c("ngIf",n.pagination&&(n.teamMembers.length>0||n.pagination.total>0)),l(),c("ngIf",n.showDeleteModal),l(),c("ngIf",n.showFormModal),l(),c("ngIf",n.showAssignModal)}},dependencies:[E,q,W,Ce,we,O,V,A,$,K,X,ee,je],styles:[".team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #101e3614;overflow:hidden;background:#fff;border:1px solid #bfdbfe;display:flex;flex-direction:column;transition:box-shadow .2s}.team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;border-color:#e5e7eb}.team-list-page[_ngcontent-%COMP%]   .team-card-header[_ngcontent-%COMP%]{background:#e0edff;height:8rem;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;border-top-left-radius:1rem;border-top-right-radius:1rem;overflow:hidden}.team-list-page[_ngcontent-%COMP%]   .dropdown-enter[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px)}.team-list-page[_ngcontent-%COMP%]   .dropdown-enter-active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);transition:opacity .2s,transform .2s}.team-list-page[_ngcontent-%COMP%]   .dropdown-exit[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.team-list-page[_ngcontent-%COMP%]   .dropdown-exit-active[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px);transition:opacity .2s,transform .2s}.team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #101e361f}.team-list-page[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.team-list-page[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.team-list-page[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.team-list-page[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.team-list-page[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.team-list-page[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.team-list-page[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.team-list-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.team-list-page[_ngcontent-%COMP%]   .statistics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.team-list-page[_ngcontent-%COMP%]   .statistics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Gt=[{path:"",component:H}],te=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=U({type:r});static \u0275inj=G({imports:[B.forChild(Gt),B]})};var Ue=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=U({type:r});static \u0275inj=G({imports:[E,Z,O,B,te,H]})};export{Ue as TeamsModule};
