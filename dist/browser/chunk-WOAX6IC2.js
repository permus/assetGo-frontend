import{a as ti}from"./chunk-XLZ5RXZQ.js";import{a as ei}from"./chunk-U62TODXI.js";import{a as Xn}from"./chunk-ZNITZZWS.js";import{a as ni}from"./chunk-QAYWKV5H.js";import{a as Jn,b as qt,c as Kn}from"./chunk-G2IWAG2B.js";import{a as ye}from"./chunk-4N562BHR.js";import"./chunk-OVTMUXBK.js";import"./chunk-FK6H3RFT.js";import{b as Qt,f as Zn}from"./chunk-23HJPHOZ.js";import"./chunk-GGQ7LRWG.js";import{c as Pe,d as le,f as Q,g as ce}from"./chunk-C5P3YSZX.js";import{b as Wn,c as pe,d as Te,e as ue,f as je,g as Ht,h as be,i as Ne,j as jt,l as Nt,m as Rt,p as Bt,q as Yn,r as qn,s as Qn,t as Gt,u as zt,v as $t,w as Ut,x as Wt,y as fe,z as Yt}from"./chunk-QSSEIZE5.js";import{c as nt,e as Ae,f as it,i as Ve}from"./chunk-S7VXDLKB.js";import"./chunk-6WXWVH7L.js";import{D as Un,h as Lt,j as zn,k as ke,l as ie,r as Ft,s as $n,u as Ot,v as me}from"./chunk-5QZV6OHW.js";import{$a as te,Bb as E,Eb as _,Fb as d,Ka as K,Lb as Se,Ma as et,Mb as Ee,Na as l,Nb as Me,Rb as tt,S as R,Sa as G,Sb as o,Tb as S,Ub as M,Vb as ne,Wb as Bn,Xb as z,Y as At,Yb as $,Zb as U,ab as Tt,ac as It,bc as bn,eb as y,f as He,fc as de,gc as Vt,ha as jn,hc as Ue,ia as g,ic as gt,ja as h,jc as Pt,ka as v,kb as Dt,la as b,lb as m,mb as X,nb as k,ob as se,pc as Gn,rb as xn,sa as we,vb as n,wb as i,xb as u,yb as Nn,zb as Rn}from"./chunk-C2UTIFX7.js";import{a as Ze,b as Xe,e as Hn}from"./chunk-EQDQRRRY.js";function zi(a,t){if(a&1&&(n(0,"span"),o(1),i()),a&2){let e=d(2);l(),ne("Archive ",e.selectedCount," Asset",e.selectedCount!==1?"s":"","")}}function $i(a,t){a&1&&(n(0,"span",28),v(),n(1,"svg",29),u(2,"circle",30)(3,"path",31),i(),b(),n(4,"span"),o(5,"Archiving..."),i()())}function Ui(a,t){if(a&1){let e=E();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),v(),n(5,"svg",6),u(6,"path",7),i()(),b(),n(7,"h2",8),o(8,"Archive Selected Assets"),i()(),n(9,"button",9),_("click",function(){g(e);let s=d();return h(s.onCancel())}),v(),n(10,"svg",10),u(11,"path",11),i()()(),b(),n(12,"div",12)(13,"div",13)(14,"label",14),o(15,"Archive Reason (Optional)"),i(),n(16,"textarea",15),U("ngModelChange",function(s){g(e);let c=d();return $(c.archiveReason,s)||(c.archiveReason=s),h(s)}),i(),n(17,"p",16),o(18,"This will be recorded in the audit trail"),i()(),n(19,"div",17)(20,"div",18),v(),n(21,"svg",19),u(22,"path",7),i()()(),b(),n(23,"div",20)(24,"h3",21),o(25),i(),n(26,"p",22),o(27," This will change their status to inactive but keep all data intact. "),i()(),n(28,"div",23)(29,"button",24),_("click",function(){g(e);let s=d();return h(s.onCancel())}),o(30," Cancel "),i(),n(31,"button",25),_("click",function(){g(e);let s=d();return h(s.onConfirm())}),y(32,zi,2,2,"span",26)(33,$i,6,0,"span",27),i()()()()()}if(a&2){let e=d();m("@backdropAnimation",void 0),l(),m("@modalAnimation",void 0),l(8),m("disabled",e.loading),l(7),z("ngModel",e.archiveReason),l(9),ne("Are you sure you want to archive ",e.selectedCount," asset",e.selectedCount!==1?"s":"","?"),l(4),m("disabled",e.loading),l(2),m("disabled",e.loading),l(),m("ngIf",!e.loading),l(),m("ngIf",e.loading)}}var Jt=class a{isOpen=!1;selectedCount=0;closeModal=new we;confirmArchive=new we;loading=!1;archiveReason="";onConfirm(){this.loading=!0,this.confirmArchive.emit(this.archiveReason),setTimeout(()=>{this.loading=!1,this.archiveReason=""},2e3)}onCancel(){this.loading||(this.archiveReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=te({type:a,selectors:[["app-archive-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount"},outputs:{closeModal:"closeModal",confirmArchive:"confirmArchive"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3","placeholder","Enter reason for archiving these assets...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-orange-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-orange-600","text-white","font-medium","rounded-lg","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&y(0,Ui,34,10,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[me,ie,fe,pe,ue,be],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[Pe("backdropAnimation",[ce(":enter",[Q({opacity:0}),le("150ms ease-out",Q({opacity:1}))]),ce(":leave",[le("150ms ease-in",Q({opacity:0}))])]),Pe("modalAnimation",[ce(":enter",[Q({opacity:0,transform:"scale(0.7) translateY(-50px)"}),le("200ms ease-out",Q({opacity:1,transform:"scale(1) translateY(0)"}))]),ce(":leave",[le("150ms ease-in",Q({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Wi(a,t){if(a&1&&(n(0,"span"),o(1),i()),a&2){let e=d(2);l(),ne(" Restore ",e.selectedCount," Asset",e.selectedCount!==1?"s":""," ")}}function Yi(a,t){a&1&&(n(0,"span",24),v(),n(1,"svg",33),u(2,"circle",34)(3,"path",35),i(),b(),n(4,"span"),o(5,"Restoring..."),i()())}function qi(a,t){if(a&1){let e=E();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),v(),n(5,"svg",6),u(6,"path",7),i()(),b(),n(7,"h2",8),o(8),i()(),n(9,"button",9),_("click",function(){g(e);let s=d();return h(s.onCancel())}),v(),n(10,"svg",10),u(11,"path",11),i()()(),b(),n(12,"div",12)(13,"div",13)(14,"div",14),v(),n(15,"svg",15),u(16,"path",7),i()()(),b(),n(17,"div",16)(18,"h3",17),o(19),i(),n(20,"p",18),o(21),i()(),n(22,"div",19)(23,"label",20),o(24,"Restore Reason (Optional)"),i(),n(25,"textarea",21),U("ngModelChange",function(s){g(e);let c=d();return $(c.restoreReason,s)||(c.restoreReason=s),h(s)}),i(),n(26,"p",22),o(27,"This will be recorded in the audit trail"),i()(),n(28,"div",23)(29,"div",24),v(),n(30,"svg",25),u(31,"path",26),i(),b(),n(32,"p",27),o(33," Assets will be restored to active status "),i()()(),n(34,"div",28)(35,"button",29),_("click",function(){g(e);let s=d();return h(s.onCancel())}),o(36," Cancel "),i(),n(37,"button",30),_("click",function(){g(e);let s=d();return h(s.onConfirm())}),y(38,Wi,2,2,"span",31)(39,Yi,6,0,"span",32),i()()()()()}if(a&2){let e=d();m("@backdropAnimation",void 0),l(),m("@modalAnimation",void 0),l(7),M(" ",e.selectedCount>1?"Restore Selected Assets":"Restore Asset"," "),l(),m("disabled",e.loading),l(10),M(" Are you sure you want to restore ",e.selectedCount>1?e.selectedCount+" assets":e.assetName||"1 asset","? "),l(2),M(" ",e.selectedCount>1?"These assets will be moved back to active status and become available in searches.":"This asset will be moved back to active status and become available in searches."," "),l(4),z("ngModel",e.restoreReason),m("placeholder","Enter reason for restoring "+(e.selectedCount>1?"these assets":"this asset")+"..."),l(10),m("disabled",e.loading),l(2),m("disabled",e.loading),l(),m("ngIf",!e.loading),l(),m("ngIf",e.loading)}}var Kt=class a{isOpen=!1;selectedCount=0;assetName="";closeModal=new we;confirmRestore=new we;loading=!1;restoreReason="";onConfirm(){this.loading=!0,this.confirmRestore.emit(this.restoreReason),setTimeout(()=>{this.loading=!1,this.restoreReason=""},2e3)}onCancel(){this.loading||(this.restoreReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=te({type:a,selectors:[["app-restore-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount",assetName:"assetName"},outputs:{closeModal:"closeModal",confirmRestore:"confirmRestore"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"flex","justify-center","mb-6"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-600","mb-4"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3","mb-6"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-green-600","text-white","font-medium","rounded-lg","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&y(0,qi,40,12,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[me,ie,fe,pe,ue,be],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[Pe("backdropAnimation",[ce(":enter",[Q({opacity:0}),le("150ms ease-out",Q({opacity:1}))]),ce(":leave",[le("150ms ease-in",Q({opacity:0}))])]),Pe("modalAnimation",[ce(":enter",[Q({opacity:0,transform:"scale(0.7) translateY(-50px)"}),le("200ms ease-out",Q({opacity:1,transform:"scale(1) translateY(0)"}))]),ce(":leave",[le("150ms ease-in",Q({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var ii=Hn(Jn());function Ji(a,t){a&1&&(v(),u(0,"path",98))}function Ki(a,t){a&1&&(v(),u(0,"path",99))}function Zi(a,t){a&1&&(v(),n(0,"svg",80),u(1,"path",85),i())}function Xi(a,t){a&1&&(v(),n(0,"svg",100),u(1,"circle",101)(2,"path",102),i())}function er(a,t){if(a&1){let e=E();n(0,"div",78)(1,"button",79),v(),n(2,"svg",80),u(3,"path",81),i(),b(),n(4,"span"),o(5,"Analytics"),i()(),n(6,"button",82),_("click",function(){g(e);let s=d();return h(s.toggleArchivedView())}),v(),n(7,"svg",80),y(8,Ji,1,0,"path",83)(9,Ki,1,0,"path",84),i(),b(),n(10,"span"),o(11),i()(),n(12,"button",82),_("click",function(){g(e);let s=d();return h(s.exportToPdf())}),v(),n(13,"svg",80),u(14,"path",85),i(),b(),n(15,"span"),o(16,"Export Assets to PDF"),i()(),n(17,"button",86),_("click",function(){g(e);let s=d();return h(s.exportToExcel())}),y(18,Zi,2,0,"svg",87)(19,Xi,3,0,"svg",88),n(20,"span"),o(21),i()(),n(22,"button",89),v(),n(23,"svg",80),u(24,"path",90),i(),b(),n(25,"span"),o(26,"Smart Import"),i()(),u(27,"div",91),n(28,"button",92),v(),n(29,"svg",93),u(30,"path",94),i(),b(),n(31,"span"),o(32,"Archive Selected"),i()(),n(33,"button",95),v(),n(34,"svg",96),u(35,"path",97),i(),b(),n(36,"span"),o(37,"Delete Selected"),i()()()}if(a&2){let e=d();l(8),m("ngIf",!e.showingArchived),l(),m("ngIf",e.showingArchived),l(2),S(e.showingArchived?"View Active Assets":"View Archived Assets"),l(6),m("disabled",e.exportingExcel),l(),m("ngIf",!e.exportingExcel),l(),m("ngIf",e.exportingExcel),l(2),S(e.exportingExcel?"Exporting to Excel...":"Export Assets to Excel")}}function tr(a,t){if(a&1){let e=E();Nn(0),n(1,"app-global-dropdown",54),_("selectionChange",function(s){g(e);let c=d();return h(c.onSelectAssetStatus(s))}),i(),Rn()}if(a&2){let e=d();l(),m("placeholder","Select asset status")("options",e.assetStatusDropdownOptions)("selectedOption",e.selectedAssetStatusOption)("minWidth","280px")}}function nr(a,t){a&1&&(v(),n(0,"svg",103),u(1,"path",104),i())}function ir(a,t){a&1&&(v(),n(0,"svg",103),u(1,"path",105),i())}function rr(a,t){a&1&&(n(0,"div",106)(1,"div",107)(2,"div",108),v(),n(3,"svg",109),u(4,"circle",101)(5,"path",102),i()(),b(),n(6,"h3",110),o(7,"Loading Assets"),i(),n(8,"p",111),o(9,"Please wait while we fetch your assets..."),i()()())}function ar(a,t){if(a&1){let e=E();n(0,"div",106)(1,"div",107)(2,"div",112),v(),n(3,"svg",113),u(4,"path",114),i()(),b(),n(5,"h3",110),o(6,"Error Loading Assets"),i(),n(7,"p",115),o(8),i(),n(9,"button",116),_("click",function(){g(e);let s=d();return h(s.loadAssets())}),o(10," Retry "),i()()()}if(a&2){let e=d();l(8),S(e.error)}}function or(a,t){if(a&1){let e=E();n(0,"div",117)(1,"button",118),_("click",function(){g(e);let s=d();return h(s.toggleSelectAllAssets())}),u(2,"span",119),i(),n(3,"span",120),o(4),i()()}if(a&2){let e=d();l(4),M("Select all ",e.assetList.length," assets")}}function sr(a,t){if(a&1){let e=E();n(0,"button",137),_("click",function(){g(e);let s=d(2);return h(s.duplicateSelected())}),v(),n(1,"svg",126),u(2,"rect",138)(3,"rect",139),i(),o(4," Duplicate "),i()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function lr(a,t){if(a&1){let e=E();n(0,"button",140),_("click",function(){g(e);let s=d(2);return h(s.showArchiveModal())}),v(),n(1,"svg",126),u(2,"rect",141)(3,"path",142),i(),o(4," Archive "),i()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function cr(a,t){if(a&1){let e=E();n(0,"button",143),_("click",function(){g(e);let s=d(2);return h(s.showDeleteModal())}),v(),n(1,"svg",126),u(2,"rect",141)(3,"path",144),i(),o(4," Delete "),i()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function dr(a,t){if(a&1){let e=E();n(0,"button",145),_("click",function(){g(e);let s=d(2);return h(s.restoreSelected())}),v(),n(1,"svg",126),u(2,"path",146),i(),o(3," Restore "),i()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function mr(a,t){if(a&1){let e=E();n(0,"div",121)(1,"div",122)(2,"button",118),_("click",function(){g(e);let s=d();return h(s.toggleSelectAllAssets())}),u(3,"span",123),i(),n(4,"span",124),o(5),i(),n(6,"span",125),v(),n(7,"svg",126),u(8,"path",127),i(),o(9," Selection Mode Active - Click cards to select "),i()(),b(),n(10,"div",128),y(11,sr,5,1,"button",129),n(12,"button",130),_("click",function(){g(e);let s=d();return h(s.generateQRCodeForSelectedAssets())}),v(),n(13,"svg",126),u(14,"path",131),i(),o(15," Generate QR Codes "),i(),y(16,lr,5,1,"button",132)(17,cr,5,1,"button",133)(18,dr,4,1,"button",134),b(),n(19,"button",135),_("click",function(){g(e);let s=d();return h(s.clearSelection())}),n(20,"span",136),o(21,"\xD7"),i(),o(22," Clear "),i()()()}if(a&2){let e=d();l(2),k("bg-blue-100",e.selectedCount===e.assetList.length),l(),k("bg-blue-400",e.selectedCount===e.assetList.length)("bg-white",e.selectedCount!==e.assetList.length),l(2),ne("",e.selectedCount," asset",e.selectedCount>1?"s":""," selected"),l(6),m("ngIf",!e.showingArchived),l(),m("disabled",e.selectedCount===0),l(4),m("ngIf",!e.showingArchived),l(),m("ngIf",e.showingArchived),l(),m("ngIf",e.showingArchived)}}function pr(a,t){if(a&1){let e=E();n(0,"div",147)(1,"div",148),v(),n(2,"svg",149),u(3,"path",21),i()(),b(),n(4,"h3",110),o(5,"No Assets Found"),i(),n(6,"p",150),o(7,"Get started by creating your first asset."),i(),n(8,"button",116),_("click",function(){g(e);let s=d();return h(s.goToCreateAsset())}),o(9," Add Asset "),i()()}}function ur(a,t){a&1&&(n(0,"span",171),o(1,"Active"),i())}function fr(a,t){if(a&1&&(n(0,"span"),o(1),i()),a&2){let e=d().$implicit,r=d(2);se("bg-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-100 text-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-700 text-xs font-semibold px-3 py-1 rounded-full"),l(),S((e.asset_status==null?null:e.asset_status.name)||e.status)}}function gr(a,t){if(a&1){let e=E();n(0,"button",185),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.viewAsset(s))}),v(),n(1,"svg",186),u(2,"path",187)(3,"path",188),i(),b(),n(4,"span",189),o(5,"View Details"),i()()}}function hr(a,t){if(a&1){let e=E();n(0,"button",185),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.editAsset(s))}),v(),n(1,"svg",186),u(2,"path",190),i(),b(),n(3,"span",189),o(4,"Edit Asset"),i()()}}function _r(a,t){if(a&1){let e=E();n(0,"button",185),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.duplicateAsset(s))}),v(),n(1,"svg",186),u(2,"path",179),i(),b(),n(3,"span",189),o(4,"Duplicate"),i()()}}function vr(a,t){if(a&1){let e=E();n(0,"button",191),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.archiveAsset(s))}),v(),n(1,"svg",192),u(2,"path",98),i(),b(),n(3,"span",193),o(4,"Archive"),i()()}}function xr(a,t){if(a&1){let e=E();n(0,"button",194),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.restoreAsset(s))}),v(),n(1,"svg",195),u(2,"path",146),i(),b(),n(3,"span",196),o(4,"Restore"),i()()}}function br(a,t){if(a&1){let e=E();n(0,"button",197),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.deleteAsset(s))}),v(),n(1,"svg",198),u(2,"path",199),i(),b(),n(3,"span",200),o(4,"Delete Permanently"),i()()}}function yr(a,t){if(a&1){let e=E();n(0,"div",172),y(1,gr,6,0,"button",173)(2,hr,5,0,"button",173)(3,_r,5,0,"button",173),n(4,"button",174),_("click",function(){g(e);let s=d().$implicit,c=d(2);return h(c.generateQRCodeForAsset(s))}),v(),n(5,"svg",175),u(6,"path",131),i(),b(),n(7,"span",176),o(8,"Generate QR Code"),i()(),n(9,"button",177),_("click",function(){g(e);let s=d().$implicit,c=d(2);return h(c.copyPublicUrl(s))}),v(),n(10,"svg",178),u(11,"path",179),i(),b(),n(12,"span",180),o(13,"Copy Public URL"),i()(),u(14,"div",181),y(15,vr,5,0,"button",182)(16,xr,5,0,"button",183)(17,br,5,0,"button",184),i()}if(a&2){let e=d(3);l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(12),m("ngIf",!e.showingArchived),l(),m("ngIf",e.showingArchived),l(),m("ngIf",e.showingArchived)}}function wr(a,t){if(a&1&&(n(0,"div",201)(1,"span",202),o(2,"Category:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.category.name," ")}}function Cr(a,t){if(a&1&&(n(0,"div",201)(1,"span",202),o(2,"Type:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",(e.asset_type==null?null:e.asset_type.name)||e.type||"General"," ")}}function Sr(a,t){a&1&&(n(0,"span"),o(1," \u2192 "),i())}function Er(a,t){if(a&1&&(n(0,"span"),o(1),y(2,Sr,2,0,"span",55),i()),a&2){let e=t.$implicit,r=t.last;l(),M(" ",e.name,""),l(),m("ngIf",!r)}}function Mr(a,t){if(a&1&&(n(0,"div",203)(1,"span",202),o(2,"Location:"),i(),n(3,"div",204),y(4,Er,3,2,"span",205),i()()),a&2){let e=d().$implicit;l(4),m("ngForOf",e.location_hierarchy)}}function kr(a,t){if(a&1&&(n(0,"div",203)(1,"span",202),o(2,"Description:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.description," ")}}function Ar(a,t){if(a&1&&(n(0,"div",201)(1,"span",202),o(2,"Manufacturer:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.manufacturer," ")}}function Tr(a,t){if(a&1&&(n(0,"div",201)(1,"span",202),o(2,"Model:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.model," ")}}function Dr(a,t){if(a&1&&(n(0,"div",201)(1,"span",202),o(2,"Capacity:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.capacity," ")}}function Ir(a,t){if(a&1){let e=E();n(0,"div",153)(1,"div",154)(2,"div",155)(3,"input",156),U("ngModelChange",function(s){let c=g(e).$implicit;return $(c.selected,s)||(c.selected=s),h(s)}),i()(),n(4,"div",157),y(5,ur,2,0,"span",158)(6,fr,2,3,"span",159),n(7,"div",8),_("click",function(s){return g(e),h(s.stopPropagation())}),n(8,"button",160),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.toggleAssetMenu(s.id))}),v(),n(9,"svg",161),u(10,"circle",162)(11,"circle",163)(12,"circle",164),i()(),y(13,yr,18,6,"div",165),i()(),n(14,"svg",166),u(15,"path",21),i()(),b(),n(16,"div",167)(17,"div")(18,"div",168),_("click",function(){let s=g(e).$implicit,c=d(2);return h(!c.showingArchived&&c.viewAsset(s))}),o(19),i(),y(20,wr,4,1,"div",169)(21,Cr,4,1,"div",169)(22,Mr,5,1,"div",170)(23,kr,4,1,"div",170)(24,Ar,4,1,"div",169)(25,Tr,4,1,"div",169)(26,Dr,4,1,"div",169),i()()()}if(a&2){let e=t.$implicit,r=d(2);k("border-blue-400",e.selected),l(3),z("ngModel",e.selected),l(2),m("ngIf",(e.asset_status==null?null:e.asset_status.name)==="Active"),l(),m("ngIf",(e.asset_status==null?null:e.asset_status.name)!=="Active"),l(7),m("ngIf",e.showMenu),l(5),k("cursor-pointer",!r.showingArchived)("hover:text-blue-600",!r.showingArchived)("cursor-default",r.showingArchived),l(),M(" ",e.name||"Unnamed Asset"," "),l(),m("ngIf",e.category==null?null:e.category.name),l(),m("ngIf",e.type||(e.asset_type==null?null:e.asset_type.name)),l(),m("ngIf",e.location_hierarchy&&e.location_hierarchy.length>0),l(),m("ngIf",e.description),l(),m("ngIf",e.manufacturer),l(),m("ngIf",e.model),l(),m("ngIf",e.capacity)}}function Vr(a,t){if(a&1&&(n(0,"div",151),y(1,Ir,27,20,"div",152),i()),a&2){let e=d();l(),m("ngForOf",e.assetList)}}function Pr(a,t){a&1&&(n(0,"span"),o(1," \u2192 "),i())}function Lr(a,t){if(a&1&&(n(0,"div"),o(1),y(2,Pr,2,0,"span",55),i()),a&2){let e=t.$implicit,r=t.last;l(),M(" ",e.name,""),l(),m("ngIf",!r)}}function Fr(a,t){if(a&1&&(n(0,"div",226),y(1,Lr,3,2,"div",205),i()),a&2){let e=d().$implicit;l(),m("ngForOf",e.location_hierarchy)}}function Or(a,t){a&1&&(n(0,"div",227),o(1," No location "),i())}function Hr(a,t){if(a&1&&(n(0,"div",221),o(1),i()),a&2){let e=d().$implicit;l(),M(" ",e.description," ")}}function jr(a,t){a&1&&(n(0,"div",227),o(1," No description "),i())}function Nr(a,t){if(a&1&&(n(0,"div",221)(1,"span",228),o(2,"MFG:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.manufacturer," ")}}function Rr(a,t){if(a&1&&(n(0,"div",111)(1,"span",228),o(2,"Model:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.model," ")}}function Br(a,t){if(a&1&&(n(0,"div",111)(1,"span",228),o(2,"Capacity:"),i(),o(3),i()),a&2){let e=d().$implicit;l(3),M(" ",e.capacity," ")}}function Gr(a,t){a&1&&(n(0,"div",227),o(1," No details "),i())}function zr(a,t){if(a&1){let e=E();n(0,"button",185),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.viewAsset(s))}),v(),n(1,"svg",186),u(2,"path",187)(3,"path",188),i(),b(),n(4,"span",189),o(5,"View Details"),i()()}}function $r(a,t){if(a&1){let e=E();n(0,"button",185),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.editAsset(s))}),v(),n(1,"svg",186),u(2,"path",190),i(),b(),n(3,"span",189),o(4,"Edit Asset"),i()()}}function Ur(a,t){if(a&1){let e=E();n(0,"button",185),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.duplicateAsset(s))}),v(),n(1,"svg",186),u(2,"path",179),i(),b(),n(3,"span",189),o(4,"Duplicate"),i()()}}function Wr(a,t){if(a&1){let e=E();n(0,"button",191),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.archiveAsset(s))}),v(),n(1,"svg",192),u(2,"path",98),i(),b(),n(3,"span",193),o(4,"Archive"),i()()}}function Yr(a,t){if(a&1){let e=E();n(0,"button",194),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.restoreAsset(s))}),v(),n(1,"svg",195),u(2,"path",146),i(),b(),n(3,"span",196),o(4,"Restore"),i()()}}function qr(a,t){if(a&1){let e=E();n(0,"button",197),_("click",function(){g(e);let s=d(2).$implicit,c=d(2);return h(c.deleteAsset(s))}),v(),n(1,"svg",198),u(2,"path",199),i(),b(),n(3,"span",200),o(4,"Delete Permanently"),i()()}}function Qr(a,t){if(a&1){let e=E();n(0,"div",172),y(1,zr,6,0,"button",173)(2,$r,5,0,"button",173)(3,Ur,5,0,"button",173),n(4,"button",174),_("click",function(){g(e);let s=d().$implicit,c=d(2);return h(c.generateQRCodeForAsset(s))}),v(),n(5,"svg",175),u(6,"path",229),i(),b(),n(7,"span",176),o(8,"Generate QR Code"),i()(),n(9,"button",177),_("click",function(){g(e);let s=d().$implicit,c=d(2);return h(c.copyPublicUrl(s))}),v(),n(10,"svg",178),u(11,"path",179),i(),b(),n(12,"span",180),o(13,"Copy Public URL"),i()(),u(14,"div",181),y(15,Wr,5,0,"button",182)(16,Yr,5,0,"button",183)(17,qr,5,0,"button",184),i()}if(a&2){let e=d(3);l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(12),m("ngIf",!e.showingArchived),l(),m("ngIf",e.showingArchived),l(),m("ngIf",e.showingArchived)}}function Jr(a,t){if(a&1){let e=E();n(0,"div",215)(1,"div",216)(2,"div",212)(3,"input",156),U("ngModelChange",function(s){let c=g(e).$implicit;return $(c.selected,s)||(c.selected=s),h(s)}),i()(),n(4,"div",211)(5,"div",217)(6,"div",218),v(),n(7,"svg",219),u(8,"path",21),i()(),b(),n(9,"div")(10,"div",220),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.viewAsset(s))}),o(11),i(),n(12,"div",111),o(13),i()()()(),n(14,"div",211)(15,"div",221),o(16),i(),n(17,"div",111),o(18),i()(),n(19,"div",211),y(20,Fr,2,1,"div",222)(21,Or,2,0,"div",223),i(),n(22,"div",211),y(23,Hr,2,1,"div",224)(24,jr,2,0,"div",223),i(),n(25,"div",211),y(26,Nr,4,1,"div",224)(27,Rr,4,1,"div",225)(28,Br,4,1,"div",225)(29,Gr,2,0,"div",223),i(),n(30,"div",212)(31,"div",8),_("click",function(s){return g(e),h(s.stopPropagation())}),n(32,"button",160),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.toggleAssetMenu(s.id))}),v(),n(33,"svg",161),u(34,"circle",162)(35,"circle",163)(36,"circle",164),i()(),y(37,Qr,18,6,"div",165),i()()()()}if(a&2){let e=t.$implicit;k("bg-blue-50",e.selected),l(3),z("ngModel",e.selected),l(8),M(" ",e.name||"Unnamed Asset"," "),l(2),S(e.asset_id||"AST-"+e.id),l(3),S((e.category==null?null:e.category.name)||"General"),l(2),S((e.asset_type==null?null:e.asset_type.name)||e.type||"Standard Asset"),l(2),m("ngIf",e.location_hierarchy&&e.location_hierarchy.length>0),l(),m("ngIf",!e.location_hierarchy||e.location_hierarchy.length===0),l(2),m("ngIf",e.description),l(),m("ngIf",!e.description),l(2),m("ngIf",e.manufacturer),l(),m("ngIf",e.model),l(),m("ngIf",e.capacity),l(),m("ngIf",!e.manufacturer&&!e.model&&!e.capacity),l(8),m("ngIf",e.showMenu)}}function Kr(a,t){if(a&1){let e=E();n(0,"div",206)(1,"div",207)(2,"div",208)(3,"div",209)(4,"input",210),_("change",function(){g(e);let s=d();return h(s.toggleSelectAllAssets())}),i()(),n(5,"div",211),o(6,"Asset ID & Name"),i(),n(7,"div",211),o(8,"Category & Type"),i(),n(9,"div",211),o(10,"Location"),i(),n(11,"div",211),o(12,"Description"),i(),n(13,"div",211),o(14,"Manufacturer & Model"),i(),n(15,"div",212),o(16,"Actions"),i()()(),n(17,"div",213),y(18,Jr,38,16,"div",214),i()()}if(a&2){let e=d();l(4),m("checked",e.selectedCount===e.assetList.length&&e.assetList.length>0)("indeterminate",e.selectedCount>0&&e.selectedCount<e.assetList.length),l(14),m("ngForOf",e.assetList)}}function Zr(a,t){if(a&1){let e=E();n(0,"app-pagination",230),_("pageChange",function(s){g(e);let c=d();return h(c.onPageChange(s))})("perPageChange",function(s){g(e);let c=d();return h(c.onPerPageChange(s))}),i()}if(a&2){let e=d();m("pagination",e.pagination)}}var at=class a{constructor(t,e,r){this.router=t;this.assetService=e;this.pdfExportService=r}destroy$=new He;summary={totalAssets:0,activeAssets:0,maintenance:0,totalValue:0,assetHealth:0};loading=!1;exportingExcel=!1;error="";showMenu=!1;showTypeDropdown=!1;showStatusDropdown=!1;showSortDropdown=!1;showSortDirDropdown=!1;showArchiveConfirmationModal=!1;showDeleteConfirmationModal=!1;showRestoreConfirmationModal=!1;selectedAssetForRestore=null;showingArchived=!1;typeOptions=[{value:"",label:"All Types"},{value:"fixed",label:"Fixed Asset"},{value:"semi-fixed",label:"Semi-Fixed Asset"},{value:"mobile",label:"Mobile Asset"},{value:"fleet",label:"Fleet Asset"}];statusOptions=[{value:"",label:"All Status"},{value:"Active",label:"Active"},{value:"Maintenance",label:"Maintenance"},{value:"Inactive",label:"Inactive"},{value:"Retired",label:"Retired"}];sortOptions=[{value:"name",label:"Name"},{value:"created_at",label:"Date Added"},{value:"status",label:"Status"},{value:"manufacturer",label:"Manufacturer"},{value:"purchase_price",label:"Cost"}];selectedType=this.typeOptions[0];selectedStatus=this.statusOptions[0];selectedSort=this.sortOptions[0];selectedSortDir="desc";sortDropdownOptions=[];selectedSortOption=null;assetTypeDropdownOptions=[];selectedAssetTypeOption=null;assetStatusDropdownOptions=[];selectedAssetStatusOption=null;viewType="grid";searchQuery="";activeTab="active";currentFilters={search:"",type:"",status:"",category_id:"",location_id:"",sort_by:"name",sort_direction:"desc",page:1,per_page:20,archived:!1};assetList=[];categories=[];locations=[];assetTypes=[];showAssetTypeDropdown=!1;selectedAssetType=null;assetStatuses=[];showAssetStatusDropdown=!1;selectedAssetStatus=null;openAssetMenuId=null;pagination={current_page:1,last_page:1,per_page:20,total:0,from:0,to:0};selectAllAssets=!1;ngOnInit(){this.loadAssetStatistics(),this.loadAssets(),this.loadCategories(),this.loadLocations(),this.assetService.getAssetTypes().subscribe(t=>{t.success&&t.data&&(this.assetTypes=[{id:"",name:"All Types",label:"All Types",icon:null},...t.data.map(e=>({id:e.id,name:e.name,label:e.name,icon:e.icon||null}))],this.selectedAssetType=this.assetTypes[0],this.assetTypeDropdownOptions=this.assetTypes.map(e=>({id:e.id,name:e.label||e.name,icon:e.icon})),this.selectedAssetTypeOption=this.assetTypeDropdownOptions[0]||null)}),this.assetService.getAssetStatuses().subscribe(t=>{t.success&&t.data&&(this.assetStatuses=[{id:"",name:"All Statuses",label:"All Statuses",color:null},...t.data.map(e=>({id:e.id,name:e.name,label:e.name,color:e.color||null}))],this.selectedAssetStatus=this.assetStatuses[0],this.assetStatusDropdownOptions=this.assetStatuses.map(e=>({id:e.id,name:e.label||e.name})),this.selectedAssetStatusOption=this.assetStatusDropdownOptions[0]||null)}),this.sortDropdownOptions=this.sortOptions.map(t=>({id:t.value,name:t.label})),this.selectedSortOption=this.sortDropdownOptions.find(t=>t.id===this.selectedSort.value)||this.sortDropdownOptions[0]}loadAssetStatistics(){this.assetService.getAssetStatistics().pipe(R(this.destroy$)).subscribe({next:t=>{if(t.success&&t.data){let e=t.data;this.summary={totalAssets:e.total_assets||0,activeAssets:e.active_assets||0,maintenance:e.maintenance||0,totalValue:e.total_asset_value||0,assetHealth:e.total_asset_health&&e.total_assets?Math.round(e.total_asset_health/e.total_assets):100}}},error:t=>{console.error("Error loading asset statistics:",t)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadAssets(){this.loading=!0,this.error="";let t={};this.currentFilters.search&&(t.search=this.currentFilters.search),this.currentFilters.type&&(t.type=this.currentFilters.type),this.currentFilters.status&&(t.status=this.currentFilters.status),this.currentFilters.category_id&&(t.category_id=this.currentFilters.category_id),this.currentFilters.location_id&&(t.location_id=this.currentFilters.location_id),this.currentFilters.sort_by&&(t.sort_by=this.currentFilters.sort_by),this.currentFilters.sort_direction&&(t.sort_direction=this.currentFilters.sort_direction),t.archived=this.currentFilters.archived,t.page=this.currentFilters.page,t.per_page=this.currentFilters.per_page,this.assetService.getAssets(t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success?(this.assetList=(e.data.assets||e.data).map(r=>Xe(Ze({},r),{selected:!1,showMenu:!1})),e.data.pagination&&(this.pagination=e.data.pagination)):this.error=e.message||"Failed to load assets",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading assets",this.loading=!1}})}loadCategories(){this.assetService.getAssetCategories().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&(this.categories=t.data.categories)},error:t=>{console.error("Error loading categories:",t)}})}loadLocations(){this.assetService.getLocations().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&(this.locations=t.data.locations||t.data)},error:t=>{console.error("Error loading locations:",t)}})}onSearch(){this.currentFilters.search=this.searchQuery,this.currentFilters.page=1,this.loadAssets()}applyFilters(){this.currentFilters.page=1,this.loadAssets()}get selectedCount(){return this.assetList.filter(t=>t.selected).length}toggleSelectAllAssets(){let t=this.selectedCount===this.assetList.length;this.assetList.forEach(e=>e.selected=!t),this.selectAllAssets=!t}selectType(t){let e=this.typeOptions.find(r=>r.value===t);e&&(this.selectedType=e,this.currentFilters.type=e.value),this.showTypeDropdown=!1,this.applyFilters()}selectStatus(t){let e=this.statusOptions.find(r=>r.value===t);e&&(this.selectedStatus=e,this.currentFilters.status=e.value),this.showStatusDropdown=!1,this.applyFilters()}selectSort(t){let e=this.sortOptions.find(r=>r.value===t);e&&(this.selectedSort=e,this.currentFilters.sort_by=e.value),this.showSortDropdown=!1,this.applyFilters()}selectSortDir(t){this.selectedSortDir=t,this.currentFilters.sort_direction=t,this.showSortDirDropdown=!1,this.applyFilters()}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.currentFilters.sort_direction=this.selectedSortDir,this.applyFilters()}duplicateSelected(){let t=this.assetList.filter(r=>r.selected);if(t.length===0)return;let e=t[0];this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:e.id}}),this.clearSelection()}generateSerialNumber(){let t=Date.now().toString(),e=Math.random().toString(36).substring(2,8).toUpperCase();return`SN${t.slice(-6)}${e}`}clearSelection(){this.assetList.forEach(t=>t.selected=!1),this.selectAllAssets=!1}showArchiveModal(){this.selectedCount>0&&(this.showArchiveConfirmationModal=!0)}closeArchiveModal(){this.showArchiveConfirmationModal=!1}showDeleteModal(){this.selectedCount>0&&(this.showDeleteConfirmationModal=!0)}closeDeleteModal(){this.showDeleteConfirmationModal=!1}closeRestoreModal(){this.showRestoreConfirmationModal=!1,this.selectedAssetForRestore=null}restoreSelectedAsset(t){if(this.assetList.filter(r=>r.selected).length>1)this.restoreBulkAssets(t);else if(this.selectedAssetForRestore){let r={};t&&t.trim()&&(r.restore_reason=t.trim()),this.assetService.restoreAsset(this.selectedAssetForRestore.id,r).pipe(R(this.destroy$)).subscribe({next:s=>{s.success?(this.loadAssets(),this.loadAssetStatistics(),console.log("Asset restored successfully")):this.error=s.message||"Failed to restore asset",this.closeRestoreModal()},error:s=>{this.error=s.error?.message||"An error occurred while restoring the asset",this.closeRestoreModal()}})}else this.closeRestoreModal()}deleteSelected(t){let e=this.assetList.filter(c=>c.selected);if(e.length===0){this.closeDeleteModal();return}let s={asset_ids:e.map(c=>c.id)};t&&t.trim()&&(s.deletion_reason=t.trim()),this.assetService.bulkDeleteAssets(s).pipe(R(this.destroy$)).subscribe({next:c=>{if(c.success){if(c.failed&&c.failed.length>0){let x=c.failed.length,I=c.deleted?c.deleted.length:0;this.error=`${I} assets deleted successfully, ${x} failed to delete`}else{let x=c.deleted?c.deleted.length:e.length;console.log(`${x} assets deleted successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=c.message||"Failed to delete assets";this.closeDeleteModal()},error:c=>{this.error=c.error?.message||"An error occurred while deleting assets",this.closeDeleteModal()}})}viewAsset(t){this.router.navigate(["/assets/preview",t.id])}archiveSelected(t){let e=this.assetList.filter(c=>c.selected);if(e.length===0){this.closeArchiveModal();return}let s={asset_ids:e.map(c=>c.id)};t&&t.trim()&&(s.archive_reason=t.trim()),this.assetService.bulkArchiveAssets(s).pipe(R(this.destroy$)).subscribe({next:c=>{if(c.success){if(c.failed&&c.failed.length>0){let x=c.failed.length,I=c.archived?c.archived.length:0;this.error=`${I} assets archived successfully, ${x} failed to archive`}else{let x=c.archived?c.archived.length:e.length;console.log(`${x} assets archived successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=c.message||"Failed to archive assets";this.closeArchiveModal()},error:c=>{this.error=c.error?.message||"An error occurred while archiving assets",this.closeArchiveModal()}})}toggleTypeDropdown(){this.showTypeDropdown=!this.showTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showTypeDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown,this.showTypeDropdown=!1,this.showStatusDropdown=!1,this.showSortDirDropdown=!1}toggleArchivedView(){this.setTab(this.showingArchived?"active":"archive"),this.showMenu=!1}goToCreateAsset(){this.router.navigate(["assets/create"])}exportToPdf(){if(this.assetList.length>0){let t=this.showingArchived?"Archived Assets Export Report":"Asset Export Report";this.pdfExportService.exportAssetsToPdf(this.assetList,t),this.showMenu=!1}else console.log("No assets to export")}exportToExcel(){this.assetList.length>0?(this.exportingExcel=!0,this.assetService.exportAssetsToExcel(this.showingArchived).subscribe({next:t=>{let e=window.URL.createObjectURL(t),r=document.createElement("a");r.href=e;let s=this.showingArchived?"archived-assets-export.xlsx":"assets-export.xlsx";r.download=s,r.click(),window.URL.revokeObjectURL(e),this.exportingExcel=!1,this.showMenu=!1},error:t=>{console.error("Error exporting to Excel:",t),this.exportingExcel=!1}})):console.log("No assets to export")}getStatusColor(t){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[t]||"gray"}toggleAssetMenu(t){this.assetList.forEach(r=>{r.id!==t&&(r.showMenu=!1)});let e=this.assetList.find(r=>r.id===t);e&&(e.showMenu=!e.showMenu)}editAsset(t){this.router.navigate(["/assets",t.id,"edit"]),t.showMenu=!1}duplicateAsset(t){this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:t.id}}),t.showMenu=!1}archiveAsset(t){this.assetList.forEach(e=>e.selected=!1),t.selected=!0,this.showArchiveConfirmationModal=!0,t.showMenu=!1}deleteAsset(t){this.assetList.forEach(e=>e.selected=!1),t.selected=!0,this.showDeleteConfirmationModal=!0,t.showMenu=!1}restoreSelected(){this.assetList.filter(e=>e.selected).length!==0&&(this.showRestoreConfirmationModal=!0)}restoreBulkAssets(t){let e=this.assetList.filter(s=>s.selected);if(e.length===0){this.closeRestoreModal();return}let r=e.map(s=>s.id);this.assetService.bulkRestoreAssets(r,t).pipe(R(this.destroy$)).subscribe({next:s=>{if(s.success){if(s.failed&&s.failed.length>0){let c=s.failed.length,x=s.restored?s.restored.length:0;this.error=`${x} assets restored successfully, ${c} failed to restore`}else{let c=s.restored?s.restored.length:e.length;console.log(`${c} assets restored successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=s.message||"Failed to restore assets";this.closeRestoreModal()},error:s=>{this.error=s.error?.message||"An error occurred while restoring assets",this.closeRestoreModal()}})}restoreAsset(t){this.selectedAssetForRestore=t,this.showRestoreConfirmationModal=!0,t.showMenu=!1}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.currentFilters.type=t.id,this.showAssetTypeDropdown=!1,this.applyFilters()}toggleAssetStatusDropdown(){this.showAssetStatusDropdown=!this.showAssetStatusDropdown}selectAssetStatus(t){this.selectedAssetStatus=t,this.currentFilters.status=t.id,this.showAssetStatusDropdown=!1,this.applyFilters()}onSelectAssetType(t){this.selectedAssetTypeOption=t,this.selectedAssetType=this.assetTypes.find(e=>e.id===(t?.id??""))||null,this.currentFilters.type=t?.id||"",this.applyFilters()}onSelectAssetStatus(t){this.selectedAssetStatusOption=t,this.selectedAssetStatus=this.assetStatuses.find(e=>e.id===(t?.id??""))||null,this.currentFilters.status=t?.id||"",this.applyFilters()}onSelectSort(t){this.selectedSortOption=t;let e=this.sortOptions.find(r=>r.value===(t?.id||""))||this.sortOptions[0];this.selectedSort=e,this.currentFilters.sort_by=e.value,this.applyFilters()}onDocumentClick(t){t.target.closest(".menu-container")||(this.showMenu=!1)}generateQRCodeForAsset(t){let e=`${window.location.origin}/public/asset/${t.id}`;ii.toDataURL(e,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(r=>{let s=document.createElement("a");s.href=r,s.download=`asset-${t.id}-qr.png`,s.click()}).catch(r=>{console.error("Error generating QR code:",r)})}generateQRCodeForSelectedAssets(){let t=this.assetList.filter(e=>e.selected);if(t.length===0){console.log("No assets selected");return}t.forEach(e=>{this.generateQRCodeForAsset(e)})}copyPublicUrl(t){let e=`${window.location.origin}/public/asset/${t.id}`;navigator.clipboard.writeText(e).then(()=>{console.log("Public URL copied to clipboard")})}onPageChange(t){this.currentFilters.page=t,this.loadAssets()}onPerPageChange(t){this.currentFilters.per_page=t,this.currentFilters.page=1,this.loadAssets()}setTab(t){this.activeTab=t,this.showingArchived=t==="archive",this.currentFilters.archived=this.showingArchived,this.currentFilters.page=1,this.clearSelection(),this.loadAssets()}static \u0275fac=function(e){return new(e||a)(G(Ae),G(ye),G(qt))};static \u0275cmp=te({type:a,selectors:[["app-asset-list"]],hostBindings:function(e,r){e&1&&_("click",function(c){return r.onDocumentClick(c)},!1,et)},decls:120,vars:52,consts:[[1,"asset-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-5","py-2","rounded-lg","shadow-sm","transition-colors","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"relative",3,"click"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-5","gap-4","mb-8"],[1,"rounded-xl","bg-blue-50","border","border-blue-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-base","font-medium","text-gray-700"],[1,"w-10","h-10","bg-blue-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-3xl","font-bold","text-gray-900"],["href","#",1,"text-sm","text-blue-600","font-medium","mt-1"],[1,"rounded-xl","bg-green-50","border","border-green-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-green-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-400"],["cx","12","cy","12","r","8","stroke","currentColor","stroke-width","2","fill","none"],["cx","12","cy","12","r","4","fill","currentColor",1,"text-green-400"],[1,"text-sm","text-green-600","font-medium","mt-1"],[1,"rounded-xl","bg-orange-50","border","border-orange-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-orange-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-1.5a2.5 2.5 0 11-3.536 3.536l-7.5 7.5a2 2 0 102.828 2.828l7.5-7.5a2.5 2.5 0 013.536-3.536z"],[1,"text-sm","text-orange-600","font-medium","mt-1"],[1,"rounded-xl","bg-purple-50","border","border-purple-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-purple-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-sm","text-purple-600","font-medium","mt-1"],[1,"rounded-xl","bg-cyan-50","border","border-cyan-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-cyan-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3zm0 0V4m0 8v8m8-8h-8m8 0a8 8 0 11-16 0 8 8 0 0116 0z"],[1,"text-sm","text-cyan-600","font-medium","mt-1"],[1,"navigation-tabs","mb-4"],[1,"tabs-nav"],[1,"tab-link","block","w-full","text-center",3,"click"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","mb-6"],[1,"flex-1","flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:items-center","md:space-x-3"],[1,"relative","w-full","md:w-80"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search assets by name, location, or ID...",1,"w-full","pl-10","pr-3","py-2","border-2","border-blue-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","input","ngModel"],[3,"selectionChange","placeholder","options","selectedOption","minWidth"],[4,"ngIf"],[1,"relative"],[1,"px-4","py-3","bg-gray-100","rounded-lg","text-gray-700","flex","items-center","space-x-2","min-w-[70px]","cursor-pointer",3,"click"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","space-x-2","mt-4","md:mt-0"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","border","border-gray-200","hover:bg-blue-50","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["x","4","y","4","width","7","height","7","rx","2"],["x","13","y","4","width","7","height","7","rx","2"],["x","4","y","13","width","7","height","7","rx","2"],["x","13","y","13","width","7","height","7","rx","2"],["x","4","y","6","width","16","height","4","rx","2"],["x","4","y","14","width","16","height","4","rx","2"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center justify-between",4,"ngIf"],["class","text-center py-20",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-2 mb-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-6",4,"ngIf"],[3,"pagination","pageChange","perPageChange",4,"ngIf"],[3,"closeModal","confirmArchive","isOpen","selectedCount"],[3,"closeModal","confirmDelete","isOpen","selectedCount"],[3,"closeModal","confirmRestore","isOpen","selectedCount","assetName"],[1,"absolute","right-0","mt-2","w-64","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2a4 4 0 014-4h2a4 4 0 014 4v2"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","w-5 h-5 text-gray-500","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","animate-spin w-5 h-5 text-gray-500","fill","none","viewBox","0 0 24 24",4,"ngIf"],["routerLink","/assets/import",1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"border-t","border-gray-100","my-2"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-orange-50","text-left","transition-colors","cursor-pointer","text-orange-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-red-50","text-left","transition-colors","cursor-pointer","text-red-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5","text-gray-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 17l-4 4m0 0l-4-4m4 4V3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7l4-4m0 0l4 4m-4-4v18"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center"],["type","button",1,"focus:outline-none","inline-flex","items-center","justify-center","w-6","h-6","rounded-full","border-2","border-blue-400","mr-3","transition-colors",3,"click"],[1,"w-3","h-3","rounded-full","block","bg-white","transition-colors"],[1,"font-semibold","text-gray-900"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-3","h-3","rounded-full","block","transition-colors"],[1,"font-bold","text-gray-900"],[1,"bg-blue-50","text-blue-600","px-3","py-1","rounded-full","text-sm","flex","items-center","font-medium"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7"],[1,"flex","items-center","space-x-2"],["class","bg-gray-50 text-gray-700 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 border border-gray-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-purple-50","text-purple-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zm12 0h2a1 1 0 001-1V6a1 1 0 00-1-1h-2a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1z"],["class","bg-orange-50 text-orange-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-red-50 text-red-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-green-50 text-green-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-transparent","text-gray-700","font-semibold","px-2","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer",3,"click"],[1,"text-xl"],[1,"bg-gray-50","text-gray-700","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","border","border-gray-200","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","8","y","8","width","8","height","8","rx","2","stroke-width","2"],["x","4","y","4","width","8","height","8","rx","2","stroke-width","2"],[1,"bg-orange-50","text-orange-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","4","y","4","width","16","height","16","rx","2","stroke-width","2"],["d","M8 12h8","stroke-width","2"],[1,"bg-red-50","text-red-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["d","M8 8l8 8M8 16l8-8","stroke-width","2"],[1,"bg-green-50","text-green-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-20"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","mt-2","mb-6"],["class","rounded-2xl border border-blue-200 bg-white shadow-sm flex flex-col transition-all hover:shadow-md overflow-hidden",3,"border-blue-400",4,"ngFor","ngForOf"],[1,"rounded-2xl","border","border-blue-200","bg-white","shadow-sm","flex","flex-col","transition-all","hover:shadow-md","overflow-hidden"],[1,"relative","bg-[#e0edff]","h-32","flex","flex-col","items-center","justify-center"],[1,"absolute","left-4","top-4","flex","items-center"],["type","checkbox",1,"asset-card-checkbox",3,"ngModelChange","ngModel"],[1,"absolute","right-4","top-4","flex","items-center","space-x-2"],["class","bg-green-100 text-green-700 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[3,"class",4,"ngIf"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["cx","12","cy","6","r","1.5"],["cx","12","cy","12","r","1.5"],["cx","12","cy","18","r","1.5"],["class","absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-blue-400"],[1,"flex-1","flex","flex-col","justify-between","p-6","pt-4"],[1,"font-semibold","text-lg","text-gray-900","mb-2","cursor-pointer","hover:text-blue-600","transition-colors",3,"click"],["class","text-sm text-gray-700 mb-1",4,"ngIf"],["class","text-sm text-gray-700 mb-2",4,"ngIf"],[1,"bg-green-100","text-green-700","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-1","z-50"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-purple-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-500"],[1,"text-sm","text-purple-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-blue-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"text-sm","text-blue-600"],[1,"border-t","border-gray-100","my-1"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-orange-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-green-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-red-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"text-sm","text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-orange-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-500"],[1,"text-sm","text-orange-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-green-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-500"],[1,"text-sm","text-green-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-red-600"],[1,"text-sm","text-gray-700","mb-1"],[1,"font-medium","text-gray-600"],[1,"text-sm","text-gray-700","mb-2"],[1,"text-xs","text-gray-500","mt-1"],[4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden","mb-6"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-1","flex","items-center"],["type","checkbox",1,"asset-card-checkbox",3,"change","checked","indeterminate"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 transition-colors",3,"bg-blue-50",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","transition-colors"],[1,"grid","grid-cols-12","gap-4","items-center"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"font-medium","text-gray-900","hover:text-blue-600","cursor-pointer","transition-colors",3,"click"],[1,"text-sm","text-gray-900"],["class","text-sm text-gray-600",4,"ngIf"],["class","text-sm text-gray-400",4,"ngIf"],["class","text-sm text-gray-900",4,"ngIf"],["class","text-sm text-gray-500",4,"ngIf"],[1,"text-sm","text-gray-600"],[1,"text-sm","text-gray-400"],[1,"font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1z"],[3,"pageChange","perPageChange","pagination"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Asset Intelligence Hub"),i(),n(5,"p",3),o(6,"Advanced asset monitoring with AI-powered insights and real-time analytics"),i()(),n(7,"div",4)(8,"button",5),_("click",function(){return r.goToCreateAsset()}),v(),n(9,"svg",6),u(10,"path",7),i(),o(11," Add Asset "),i(),b(),n(12,"div",8),_("click",function(c){return c.stopPropagation()}),n(13,"button",9),_("click",function(){return r.showMenu=!r.showMenu}),v(),n(14,"svg",10),u(15,"circle",11)(16,"circle",12)(17,"circle",13),i()(),y(18,er,38,7,"div",14),i()()(),b(),n(19,"div",15)(20,"div",16)(21,"div",17)(22,"span",18),o(23,"Total Assets"),i(),n(24,"span",19),v(),n(25,"svg",20),u(26,"path",21),i()()(),b(),n(27,"div",22),o(28),i(),n(29,"a",23),o(30,"Assets in system"),i()(),n(31,"div",24)(32,"div",17)(33,"span",18),o(34,"Active"),i(),n(35,"span",25),v(),n(36,"svg",26),u(37,"circle",27)(38,"circle",28),i()()(),b(),n(39,"div",22),o(40),i(),n(41,"span",29),o(42,"Operational assets"),i()(),n(43,"div",30)(44,"div",17)(45,"span",18),o(46,"Maintenance"),i(),n(47,"span",31),v(),n(48,"svg",32),u(49,"path",33),i()()(),b(),n(50,"div",22),o(51),i(),n(52,"span",34),o(53,"Under maintenance"),i()(),n(54,"div",35)(55,"div",17)(56,"span",18),o(57,"Total Value"),i(),n(58,"span",36),v(),n(59,"svg",37),u(60,"path",38),i()()(),b(),n(61,"div",22),o(62),de(63,"currency"),i(),n(64,"span",39),o(65,"Asset portfolio value"),i()(),n(66,"div",40)(67,"div",17)(68,"span",18),o(69,"Asset Health"),i(),n(70,"span",41),v(),n(71,"svg",42),u(72,"path",43),i()()(),b(),n(73,"div",22),o(74),i(),n(75,"span",44),o(76,"Excellent health"),i()()(),n(77,"div",45)(78,"nav",46)(79,"a",47),_("click",function(){return r.setTab("active")}),o(80,"Active Assets"),i(),n(81,"a",47),_("click",function(){return r.setTab("archive")}),o(82,"Archived Assets"),i()()(),n(83,"div",48)(84,"div",49)(85,"div",50),v(),n(86,"svg",51),u(87,"path",52),i(),b(),n(88,"input",53),U("ngModelChange",function(c){return $(r.searchQuery,c)||(r.searchQuery=c),c}),_("input",function(){return r.onSearch()}),i()(),n(89,"app-global-dropdown",54),_("selectionChange",function(c){return r.onSelectAssetType(c)}),i(),y(90,tr,2,4,"ng-container",55),n(91,"app-global-dropdown",54),_("selectionChange",function(c){return r.onSelectSort(c)}),i(),n(92,"div",56)(93,"button",57),_("click",function(){return r.toggleSortDir()}),y(94,nr,2,0,"svg",58)(95,ir,2,0,"svg",58),n(96,"span"),o(97),i()()()(),n(98,"div",59)(99,"button",60),_("click",function(){return r.viewType="grid"}),v(),n(100,"svg",61),u(101,"rect",62)(102,"rect",63)(103,"rect",64)(104,"rect",65),i()(),b(),n(105,"button",60),_("click",function(){return r.viewType="list"}),v(),n(106,"svg",61),u(107,"rect",66)(108,"rect",67),i()()()(),y(109,rr,10,0,"div",68)(110,ar,11,1,"div",68)(111,or,5,1,"div",69)(112,mr,23,13,"div",70)(113,pr,10,0,"div",71)(114,Vr,2,1,"div",72)(115,Kr,19,3,"div",73)(116,Zr,1,1,"app-pagination",74),b(),n(117,"app-archive-confirmation-modal",75),_("closeModal",function(){return r.closeArchiveModal()})("confirmArchive",function(){return r.archiveSelected()}),i(),n(118,"app-delete-confirmation-modal",76),_("closeModal",function(){return r.closeDeleteModal()})("confirmDelete",function(c){return r.deleteSelected(c)}),i(),n(119,"app-restore-confirmation-modal",77),_("closeModal",function(){return r.closeRestoreModal()})("confirmRestore",function(c){return r.restoreSelectedAsset(c)}),i()()),e&2&&(l(18),m("ngIf",r.showMenu),l(10),S(r.summary.totalAssets),l(12),S(r.summary.activeAssets),l(11),S(r.summary.maintenance),l(11),S(Vt(63,50,r.summary.totalValue)),l(12),M("",r.summary.assetHealth,"%"),l(5),k("active",r.activeTab==="active"),l(2),k("active",r.activeTab==="archive"),l(7),z("ngModel",r.searchQuery),l(),m("placeholder","Select asset type")("options",r.assetTypeDropdownOptions)("selectedOption",r.selectedAssetTypeOption)("minWidth","280px"),l(),m("ngIf",r.activeTab==="active"),l(),m("placeholder","Select sort field")("options",r.sortDropdownOptions)("selectedOption",r.selectedSortOption)("minWidth","240px"),l(2),k("bg-blue-100",r.selectedSortDir==="asc")("text-blue-700",r.selectedSortDir==="asc"),l(),m("ngIf",r.selectedSortDir==="desc"),l(),m("ngIf",r.selectedSortDir==="asc"),l(2),S(r.selectedSortDir==="asc"?"A-Z":"Z-A"),l(2),k("bg-blue-100",r.viewType==="grid")("text-blue-700",r.viewType==="grid"),l(6),k("bg-blue-100",r.viewType==="list")("text-blue-700",r.viewType==="list"),l(4),m("ngIf",r.loading),l(),m("ngIf",r.error&&!r.loading),l(),m("ngIf",r.viewType==="grid"&&r.selectedCount===0&&!r.loading&&!r.error),l(),m("ngIf",r.viewType==="grid"&&r.selectedCount>0&&!r.loading&&!r.error),l(),m("ngIf",!r.loading&&!r.error&&r.assetList.length===0),l(),m("ngIf",r.viewType==="grid"&&!r.loading&&!r.error&&r.assetList.length>0),l(),m("ngIf",r.viewType==="list"&&!r.loading&&!r.error&&r.assetList.length>0),l(),m("ngIf",r.assetList.length>0||r.pagination.total>0),l(),m("isOpen",r.showArchiveConfirmationModal)("selectedCount",r.selectedCount),l(),m("isOpen",r.showDeleteConfirmationModal)("selectedCount",r.selectedCount),l(),m("isOpen",r.showRestoreConfirmationModal)("selectedCount",r.selectedCount>0?r.selectedCount:1)("assetName",(r.selectedAssetForRestore==null?null:r.selectedAssetForRestore.name)||""))},dependencies:[Ot,ie,ke,fe,pe,Wn,ue,be,Jt,Xn,Kt,Ve,it,ei,ti],styles:['.tabs[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);text-align:center;gap:1rem;margin-bottom:1rem}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{border-radius:12px;padding:.75rem 0;font-weight:500;color:#64748b;cursor:pointer;transition:all .2s ease;background:#f3f4f6}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background:#e5e7eb}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff;font-weight:600}.navigation-tabs[_ngcontent-%COMP%]   .tabs-nav[_ngcontent-%COMP%]{display:flex;gap:12px}.navigation-tabs[_ngcontent-%COMP%]   .tab-link[_ngcontent-%COMP%]{display:inline-block;padding:12px 16px;border-radius:12px;background:#f3f4f6;color:#64748b;font-weight:500;cursor:pointer;text-decoration:none}.navigation-tabs[_ngcontent-%COMP%]   .tab-link.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]{width:20px!important;height:20px!important;border-radius:50%!important;border-width:2px;border-color:#3b82f6;appearance:none;background-color:#fff;display:inline-block;vertical-align:middle;position:relative;transition:border-color .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#2563eb}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked:after{content:"";display:block;width:10px;height:10px;border-radius:50%;background:#fff;position:absolute;top:3px;left:3px}.asset-list-page[_ngcontent-%COMP%]   .asset-card-header[_ngcontent-%COMP%]{background:#e0edff;height:8rem;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;border-top-left-radius:1rem;border-top-right-radius:1rem;overflow:hidden}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #101e3614;overflow:hidden;background:#fff;border:1px solid #bfdbfe;display:flex;flex-direction:column;transition:box-shadow .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;border-color:#e5e7eb}']})};var Xt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Re={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(a){return typeof console<"u"&&console.warn(a)},getWeek:function(a){var t=new Date(a.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var en={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(a){var t=a%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},tn=en;var re=function(a,t){return t===void 0&&(t=2),("000"+a).slice(t*-1)},ge=function(a){return a===!0?1:0};function yn(a,t){var e;return function(){var r=this,s=arguments;clearTimeout(e),e=setTimeout(function(){return a.apply(r,s)},t)}}var nn=function(a){return a instanceof Array?a:[a]};function ae(a,t,e){if(e===!0)return a.classList.add(t);a.classList.remove(t)}function N(a,t,e){var r=window.document.createElement(a);return t=t||"",e=e||"",r.className=t,e!==void 0&&(r.textContent=e),r}function vt(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function wn(a,t){if(t(a))return a;if(a.parentNode)return wn(a.parentNode,t)}function xt(a,t){var e=N("div","numInputWrapper"),r=N("input","numInput "+a),s=N("span","arrowUp"),c=N("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),t!==void 0)for(var x in t)r.setAttribute(x,t[x]);return e.appendChild(r),e.appendChild(s),e.appendChild(c),e}function he(a){try{if(typeof a.composedPath=="function"){var t=a.composedPath();return t[0]}return a.target}catch{return a.target}}var Cn=function(){},bt=function(a,t,e){return e.months[t?"shorthand":"longhand"][a]},ri={D:Cn,F:function(a,t,e){a.setMonth(e.months.longhand.indexOf(t))},G:function(a,t){a.setHours((a.getHours()>=12?12:0)+parseFloat(t))},H:function(a,t){a.setHours(parseFloat(t))},J:function(a,t){a.setDate(parseFloat(t))},K:function(a,t,e){a.setHours(a.getHours()%12+12*ge(new RegExp(e.amPM[1],"i").test(t)))},M:function(a,t,e){a.setMonth(e.months.shorthand.indexOf(t))},S:function(a,t){a.setSeconds(parseFloat(t))},U:function(a,t){return new Date(parseFloat(t)*1e3)},W:function(a,t,e){var r=parseInt(t),s=new Date(a.getFullYear(),0,2+(r-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+e.firstDayOfWeek),s},Y:function(a,t){a.setFullYear(parseFloat(t))},Z:function(a,t){return new Date(t)},d:function(a,t){a.setDate(parseFloat(t))},h:function(a,t){a.setHours((a.getHours()>=12?12:0)+parseFloat(t))},i:function(a,t){a.setMinutes(parseFloat(t))},j:function(a,t){a.setDate(parseFloat(t))},l:Cn,m:function(a,t){a.setMonth(parseFloat(t)-1)},n:function(a,t){a.setMonth(parseFloat(t)-1)},s:function(a,t){a.setSeconds(parseFloat(t))},u:function(a,t){return new Date(parseFloat(t))},w:Cn,y:function(a,t){a.setFullYear(2e3+parseFloat(t))}},Fe={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},ot={Z:function(a){return a.toISOString()},D:function(a,t,e){return t.weekdays.shorthand[ot.w(a,t,e)]},F:function(a,t,e){return bt(ot.n(a,t,e)-1,!1,t)},G:function(a,t,e){return re(ot.h(a,t,e))},H:function(a){return re(a.getHours())},J:function(a,t){return t.ordinal!==void 0?a.getDate()+t.ordinal(a.getDate()):a.getDate()},K:function(a,t){return t.amPM[ge(a.getHours()>11)]},M:function(a,t){return bt(a.getMonth(),!0,t)},S:function(a){return re(a.getSeconds())},U:function(a){return a.getTime()/1e3},W:function(a,t,e){return e.getWeek(a)},Y:function(a){return re(a.getFullYear(),4)},d:function(a){return re(a.getDate())},h:function(a){return a.getHours()%12?a.getHours()%12:12},i:function(a){return re(a.getMinutes())},j:function(a){return a.getDate()},l:function(a,t){return t.weekdays.longhand[a.getDay()]},m:function(a){return re(a.getMonth()+1)},n:function(a){return a.getMonth()+1},s:function(a){return a.getSeconds()},u:function(a){return a.getTime()},w:function(a){return a.getDay()},y:function(a){return String(a.getFullYear()).substring(2)}};var Sn=function(a){var t=a.config,e=t===void 0?Re:t,r=a.l10n,s=r===void 0?en:r,c=a.isMobile,x=c===void 0?!1:c;return function(I,L,Y){var B=Y||s;return e.formatDate!==void 0&&!x?e.formatDate(I,L,B):L.split("").map(function(J,ee,ve){return ot[J]&&ve[ee-1]!=="\\"?ot[J](I,B,e):J!=="\\"?J:""}).join("")}},rn=function(a){var t=a.config,e=t===void 0?Re:t,r=a.l10n,s=r===void 0?en:r;return function(c,x,I,L){if(!(c!==0&&!c)){var Y=L||s,B,J=c;if(c instanceof Date)B=new Date(c.getTime());else if(typeof c!="string"&&c.toFixed!==void 0)B=new Date(c);else if(typeof c=="string"){var ee=x||(e||Re).dateFormat,ve=String(c).trim();if(ve==="today")B=new Date,I=!0;else if(e&&e.parseDate)B=e.parseDate(c,ee);else if(/Z$/.test(ve)||/GMT$/.test(ve))B=new Date(c);else{for(var A=void 0,j=[],De=0,cn=0,Oe="";De<ee.length;De++){var Ge=ee[De],Ye=Ge==="\\",dn=ee[De-1]==="\\"||Ye;if(Fe[Ge]&&!dn){Oe+=Fe[Ge];var ze=new RegExp(Oe).exec(c);ze&&(A=!0)&&j[Ge!=="Y"?"push":"unshift"]({fn:ri[Ge],val:ze[++cn]})}else Ye||(Oe+=".")}B=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),j.forEach(function(qe){var Qe=qe.fn,mn=qe.val;return B=Qe(B,mn,Y)||B}),B=A?B:void 0}}if(!(B instanceof Date&&!isNaN(B.getTime()))){e.errorHandler(new Error("Invalid date provided: "+J));return}return I===!0&&B.setHours(0,0,0,0),B}}};function _e(a,t,e){return e===void 0&&(e=!0),e!==!1?new Date(a.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):a.getTime()-t.getTime()}var ai=function(a,t,e){return a>Math.min(t,e)&&a<Math.max(t,e)},an=function(a,t,e){return a*3600+t*60+e},oi=function(a){var t=Math.floor(a/3600),e=(a-t*3600)/60;return[t,e,a-t*3600-e*60]},si={DAY:864e5};function on(a){var t=a.defaultHour,e=a.defaultMinute,r=a.defaultSeconds;if(a.minDate!==void 0){var s=a.minDate.getHours(),c=a.minDate.getMinutes(),x=a.minDate.getSeconds();t<s&&(t=s),t===s&&e<c&&(e=c),t===s&&e===c&&r<x&&(r=a.minDate.getSeconds())}if(a.maxDate!==void 0){var I=a.maxDate.getHours(),L=a.maxDate.getMinutes();t=Math.min(t,I),t===I&&(e=Math.min(L,e)),t===I&&e===L&&(r=a.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!a)throw TypeError("Cannot convert undefined or null to object");for(var r=function(I){I&&Object.keys(I).forEach(function(L){return a[L]=I[L]})},s=0,c=t;s<c.length;s++){var x=c[s];r(x)}return a});var oe=function(){return oe=Object.assign||function(a){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=t[s])}return a},oe.apply(this,arguments)},li=function(){for(var a=0,t=0,e=arguments.length;t<e;t++)a+=arguments[t].length;for(var r=Array(a),s=0,t=0;t<e;t++)for(var c=arguments[t],x=0,I=c.length;x<I;x++,s++)r[s]=c[x];return r},Xr=300;function ea(a,t){var e={config:oe(oe({},Re),Z.defaultConfig),l10n:tn};e.parseDate=rn({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=j,e._setHoursFromDate=ee,e._positionCalendar=Et,e.changeMonth=pn,e.changeYear=wt,e.clear=hi,e.close=_i,e.onMouseOver=St,e._createElement=N,e.createDay=ze,e.destroy=vi,e.isEnabled=$e,e.jumpToDate=Oe,e.updateValue=Ie,e.open=yi,e.redraw=Vn,e.set=Ei,e.setDate=Mi,e.toggle=Di;function r(){e.utils={getDaysInMonth:function(p,f){return p===void 0&&(p=e.currentMonth),f===void 0&&(f=e.currentYear),p===1&&(f%4===0&&f%100!==0||f%400===0)?29:e.l10n.daysInMonth[p]}}}function s(){e.element=e.input=a,e.isOpen=!1,wi(),In(),Ai(),ki(),r(),e.isMobile||dn(),cn(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&ee(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ie(!1)),I();var p=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&p&&Et(),q("onReady")}function c(){var p;return((p=e.calendarContainer)===null||p===void 0?void 0:p.getRootNode()).activeElement||document.activeElement}function x(p){return p.bind(e)}function I(){var p=e.config;p.weekNumbers===!1&&p.showMonths===1||p.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var f=(e.days.offsetWidth+1)*p.showMonths;e.daysContainer.style.width=f+"px",e.calendarContainer.style.width=f+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function L(p){if(e.selectedDates.length===0){var f=e.config.minDate===void 0||_e(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),w=on(e.config);f.setHours(w.hours,w.minutes,w.seconds,f.getMilliseconds()),e.selectedDates=[f],e.latestSelectedDateObj=f}p!==void 0&&p.type!=="blur"&&Pi(p);var C=e._input.value;J(),Ie(),e._input.value!==C&&e._debouncedChange()}function Y(p,f){return p%12+12*ge(f===e.l10n.amPM[1])}function B(p){switch(p%24){case 0:case 12:return 12;default:return p%12}}function J(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var p=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,f=(parseInt(e.minuteElement.value,10)||0)%60,w=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(p=Y(p,e.amPM.textContent));var C=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&_e(e.latestSelectedDateObj,e.config.minDate,!0)===0,T=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&_e(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var D=an(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),O=an(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),P=an(p,f,w);if(P>O&&P<D){var H=oi(D);p=H[0],f=H[1],w=H[2]}}else{if(T){var V=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;p=Math.min(p,V.getHours()),p===V.getHours()&&(f=Math.min(f,V.getMinutes())),f===V.getMinutes()&&(w=Math.min(w,V.getSeconds()))}if(C){var F=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;p=Math.max(p,F.getHours()),p===F.getHours()&&f<F.getMinutes()&&(f=F.getMinutes()),f===F.getMinutes()&&(w=Math.max(w,F.getSeconds()))}}ve(p,f,w)}}function ee(p){var f=p||e.latestSelectedDateObj;f&&f instanceof Date&&ve(f.getHours(),f.getMinutes(),f.getSeconds())}function ve(p,f,w){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(p%24,f,w||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=re(e.config.time_24hr?p:(12+p)%12+12*ge(p%12===0)),e.minuteElement.value=re(f),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[ge(p>=12)]),e.secondElement!==void 0&&(e.secondElement.value=re(w)))}function A(p){var f=he(p),w=parseInt(f.value)+(p.delta||0);(w/1e3>1||p.key==="Enter"&&!/[^\d]/.test(w.toString()))&&wt(w)}function j(p,f,w,C){if(f instanceof Array)return f.forEach(function(T){return j(p,T,w,C)});if(p instanceof Array)return p.forEach(function(T){return j(T,f,w,C)});p.addEventListener(f,w,C),e._handlers.push({remove:function(){return p.removeEventListener(f,w,C)}})}function De(){q("onChange")}function cn(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(w){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+w+"]"),function(C){return j(C,"click",e[w])})}),e.isMobile){Ti();return}var p=yn(bi,50);if(e._debouncedChange=yn(De,Xr),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&j(e.daysContainer,"mouseover",function(w){e.config.mode==="range"&&St(he(w))}),j(e._input,"keydown",An),e.calendarContainer!==void 0&&j(e.calendarContainer,"keydown",An),!e.config.inline&&!e.config.static&&j(window,"resize",p),window.ontouchstart!==void 0?j(window.document,"touchstart",un):j(window.document,"mousedown",un),j(window.document,"focus",un,{capture:!0}),e.config.clickOpens===!0&&(j(e._input,"focus",e.open),j(e._input,"click",e.open)),e.daysContainer!==void 0&&(j(e.monthNav,"click",Vi),j(e.monthNav,["keyup","increment"],A),j(e.daysContainer,"click",Pn)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var f=function(w){return he(w).select()};j(e.timeContainer,["increment"],L),j(e.timeContainer,"blur",L,{capture:!0}),j(e.timeContainer,"click",Ge),j([e.hourElement,e.minuteElement],["focus","click"],f),e.secondElement!==void 0&&j(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&j(e.amPM,"click",function(w){L(w)})}e.config.allowInput&&j(e._input,"blur",xi)}function Oe(p,f){var w=p!==void 0?e.parseDate(p):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),C=e.currentYear,T=e.currentMonth;try{w!==void 0&&(e.currentYear=w.getFullYear(),e.currentMonth=w.getMonth())}catch(D){D.message="Invalid date supplied: "+w,e.config.errorHandler(D)}f&&e.currentYear!==C&&(q("onYearChange"),Je()),f&&(e.currentYear!==C||e.currentMonth!==T)&&q("onMonthChange"),e.redraw()}function Ge(p){var f=he(p);~f.className.indexOf("arrow")&&Ye(p,f.classList.contains("arrowUp")?1:-1)}function Ye(p,f,w){var C=p&&he(p),T=w||C&&C.parentNode&&C.parentNode.firstChild,D=gn("increment");D.delta=f,T&&T.dispatchEvent(D)}function dn(){var p=window.document.createDocumentFragment();if(e.calendarContainer=N("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(p.appendChild(ui()),e.innerContainer=N("div","flatpickr-innerContainer"),e.config.weekNumbers){var f=gi(),w=f.weekWrapper,C=f.weekNumbers;e.innerContainer.appendChild(w),e.weekNumbers=C,e.weekWrapper=w}e.rContainer=N("div","flatpickr-rContainer"),e.rContainer.appendChild(Mn()),e.daysContainer||(e.daysContainer=N("div","flatpickr-days"),e.daysContainer.tabIndex=-1),yt(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),p.appendChild(e.innerContainer)}e.config.enableTime&&p.appendChild(fi()),ae(e.calendarContainer,"rangeMode",e.config.mode==="range"),ae(e.calendarContainer,"animate",e.config.animate===!0),ae(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(p);var T=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!T&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var D=N("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(D,e.element),D.appendChild(e.element),e.altInput&&D.appendChild(e.altInput),D.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function ze(p,f,w,C){var T=$e(f,!0),D=N("span",p,f.getDate().toString());return D.dateObj=f,D.$i=C,D.setAttribute("aria-label",e.formatDate(f,e.config.ariaDateFormat)),p.indexOf("hidden")===-1&&_e(f,e.now)===0&&(e.todayDateElem=D,D.classList.add("today"),D.setAttribute("aria-current","date")),T?(D.tabIndex=-1,hn(f)&&(D.classList.add("selected"),e.selectedDateElem=D,e.config.mode==="range"&&(ae(D,"startRange",e.selectedDates[0]&&_e(f,e.selectedDates[0],!0)===0),ae(D,"endRange",e.selectedDates[1]&&_e(f,e.selectedDates[1],!0)===0),p==="nextMonthDay"&&D.classList.add("inRange")))):D.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Ii(f)&&!hn(f)&&D.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&p!=="prevMonthDay"&&C%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(f)+"</span>"),q("onDayCreate",D),D}function qe(p){p.focus(),e.config.mode==="range"&&St(p)}function Qe(p){for(var f=p>0?0:e.config.showMonths-1,w=p>0?e.config.showMonths:-1,C=f;C!=w;C+=p)for(var T=e.daysContainer.children[C],D=p>0?0:T.children.length-1,O=p>0?T.children.length:-1,P=D;P!=O;P+=p){var H=T.children[P];if(H.className.indexOf("hidden")===-1&&$e(H.dateObj))return H}}function mn(p,f){for(var w=p.className.indexOf("Month")===-1?p.dateObj.getMonth():e.currentMonth,C=f>0?e.config.showMonths:-1,T=f>0?1:-1,D=w-e.currentMonth;D!=C;D+=T)for(var O=e.daysContainer.children[D],P=w-e.currentMonth===D?p.$i+f:f<0?O.children.length-1:0,H=O.children.length,V=P;V>=0&&V<H&&V!=(f>0?H:-1);V+=T){var F=O.children[V];if(F.className.indexOf("hidden")===-1&&$e(F.dateObj)&&Math.abs(p.$i-V)>=Math.abs(f))return qe(F)}e.changeMonth(T),pt(Qe(T),0)}function pt(p,f){var w=c(),C=Ct(w||document.body),T=p!==void 0?p:C?w:e.selectedDateElem!==void 0&&Ct(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Ct(e.todayDateElem)?e.todayDateElem:Qe(f>0?1:-1);T===void 0?e._input.focus():C?mn(T,f):qe(T)}function mi(p,f){for(var w=(new Date(p,f,1).getDay()-e.l10n.firstDayOfWeek+7)%7,C=e.utils.getDaysInMonth((f-1+12)%12,p),T=e.utils.getDaysInMonth(f,p),D=window.document.createDocumentFragment(),O=e.config.showMonths>1,P=O?"prevMonthDay hidden":"prevMonthDay",H=O?"nextMonthDay hidden":"nextMonthDay",V=C+1-w,F=0;V<=C;V++,F++)D.appendChild(ze("flatpickr-day "+P,new Date(p,f-1,V),V,F));for(V=1;V<=T;V++,F++)D.appendChild(ze("flatpickr-day",new Date(p,f,V),V,F));for(var W=T+1;W<=42-w&&(e.config.showMonths===1||F%7!==0);W++,F++)D.appendChild(ze("flatpickr-day "+H,new Date(p,f+1,W%T),W,F));var Ce=N("div","dayContainer");return Ce.appendChild(D),Ce}function yt(){if(e.daysContainer!==void 0){vt(e.daysContainer),e.weekNumbers&&vt(e.weekNumbers);for(var p=document.createDocumentFragment(),f=0;f<e.config.showMonths;f++){var w=new Date(e.currentYear,e.currentMonth,1);w.setMonth(e.currentMonth+f),p.appendChild(mi(w.getFullYear(),w.getMonth()))}e.daysContainer.appendChild(p),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&St()}}function Je(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var p=function(C){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&C<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&C>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var f=0;f<12;f++)if(p(f)){var w=N("option","flatpickr-monthDropdown-month");w.value=new Date(e.currentYear,f).getMonth().toString(),w.textContent=bt(f,e.config.shorthandCurrentMonth,e.l10n),w.tabIndex=-1,e.currentMonth===f&&(w.selected=!0),e.monthsDropdownContainer.appendChild(w)}}}function pi(){var p=N("div","flatpickr-month"),f=window.document.createDocumentFragment(),w;e.config.showMonths>1||e.config.monthSelectorType==="static"?w=N("span","cur-month"):(e.monthsDropdownContainer=N("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),j(e.monthsDropdownContainer,"change",function(O){var P=he(O),H=parseInt(P.value,10);e.changeMonth(H-e.currentMonth),q("onMonthChange")}),Je(),w=e.monthsDropdownContainer);var C=xt("cur-year",{tabindex:"-1"}),T=C.getElementsByTagName("input")[0];T.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&T.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(T.setAttribute("max",e.config.maxDate.getFullYear().toString()),T.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var D=N("div","flatpickr-current-month");return D.appendChild(w),D.appendChild(C),f.appendChild(D),p.appendChild(f),{container:p,yearElement:T,monthElement:w}}function En(){vt(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var p=e.config.showMonths;p--;){var f=pi();e.yearElements.push(f.yearElement),e.monthElements.push(f.monthElement),e.monthNav.appendChild(f.container)}e.monthNav.appendChild(e.nextMonthNav)}function ui(){return e.monthNav=N("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=N("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=N("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,En(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(p){e.__hidePrevMonthArrow!==p&&(ae(e.prevMonthNav,"flatpickr-disabled",p),e.__hidePrevMonthArrow=p)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(p){e.__hideNextMonthArrow!==p&&(ae(e.nextMonthNav,"flatpickr-disabled",p),e.__hideNextMonthArrow=p)}}),e.currentYearElement=e.yearElements[0],kt(),e.monthNav}function fi(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var p=on(e.config);e.timeContainer=N("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var f=N("span","flatpickr-time-separator",":"),w=xt("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=w.getElementsByTagName("input")[0];var C=xt("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=C.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=re(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?p.hours:B(p.hours)),e.minuteElement.value=re(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():p.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(w),e.timeContainer.appendChild(f),e.timeContainer.appendChild(C),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var T=xt("flatpickr-second");e.secondElement=T.getElementsByTagName("input")[0],e.secondElement.value=re(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():p.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(N("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(T)}return e.config.time_24hr||(e.amPM=N("span","flatpickr-am-pm",e.l10n.amPM[ge((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Mn(){e.weekdayContainer?vt(e.weekdayContainer):e.weekdayContainer=N("div","flatpickr-weekdays");for(var p=e.config.showMonths;p--;){var f=N("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(f)}return kn(),e.weekdayContainer}function kn(){if(e.weekdayContainer){var p=e.l10n.firstDayOfWeek,f=li(e.l10n.weekdays.shorthand);p>0&&p<f.length&&(f=li(f.splice(p,f.length),f.splice(0,p)));for(var w=e.config.showMonths;w--;)e.weekdayContainer.children[w].innerHTML=`
      <span class='flatpickr-weekday'>
        `+f.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function gi(){e.calendarContainer.classList.add("hasWeeks");var p=N("div","flatpickr-weekwrapper");p.appendChild(N("span","flatpickr-weekday",e.l10n.weekAbbreviation));var f=N("div","flatpickr-weeks");return p.appendChild(f),{weekWrapper:p,weekNumbers:f}}function pn(p,f){f===void 0&&(f=!0);var w=f?p:p-e.currentMonth;w<0&&e._hidePrevMonthArrow===!0||w>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=w,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,q("onYearChange"),Je()),yt(),q("onMonthChange"),kt())}function hi(p,f){if(p===void 0&&(p=!0),f===void 0&&(f=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,f===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var w=on(e.config),C=w.hours,T=w.minutes,D=w.seconds;ve(C,T,D)}e.redraw(),p&&q("onChange")}function _i(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),q("onClose")}function vi(){e.config!==void 0&&q("onDestroy");for(var p=e._handlers.length;p--;)e._handlers[p].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var f=e.calendarContainer.parentNode;if(f.lastChild&&f.removeChild(f.lastChild),f.parentNode){for(;f.firstChild;)f.parentNode.insertBefore(f.firstChild,f);f.parentNode.removeChild(f)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(w){try{delete e[w]}catch{}})}function ut(p){return e.calendarContainer.contains(p)}function un(p){if(e.isOpen&&!e.config.inline){var f=he(p),w=ut(f),C=f===e.input||f===e.altInput||e.element.contains(f)||p.path&&p.path.indexOf&&(~p.path.indexOf(e.input)||~p.path.indexOf(e.altInput)),T=!C&&!w&&!ut(p.relatedTarget),D=!e.config.ignoredFocusElements.some(function(O){return O.contains(f)});T&&D&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&L(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function wt(p){if(!(!p||e.config.minDate&&p<e.config.minDate.getFullYear()||e.config.maxDate&&p>e.config.maxDate.getFullYear())){var f=p,w=e.currentYear!==f;e.currentYear=f||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),w&&(e.redraw(),q("onYearChange"),Je())}}function $e(p,f){var w;f===void 0&&(f=!0);var C=e.parseDate(p,void 0,f);if(e.config.minDate&&C&&_e(C,e.config.minDate,f!==void 0?f:!e.minDateHasTime)<0||e.config.maxDate&&C&&_e(C,e.config.maxDate,f!==void 0?f:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(C===void 0)return!1;for(var T=!!e.config.enable,D=(w=e.config.enable)!==null&&w!==void 0?w:e.config.disable,O=0,P=void 0;O<D.length;O++){if(P=D[O],typeof P=="function"&&P(C))return T;if(P instanceof Date&&C!==void 0&&P.getTime()===C.getTime())return T;if(typeof P=="string"){var H=e.parseDate(P,void 0,!0);return H&&H.getTime()===C.getTime()?T:!T}else if(typeof P=="object"&&C!==void 0&&P.from&&P.to&&C.getTime()>=P.from.getTime()&&C.getTime()<=P.to.getTime())return T}return!T}function Ct(p){return e.daysContainer!==void 0?p.className.indexOf("hidden")===-1&&p.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(p):!1}function xi(p){var f=p.target===e._input,w=e._input.value.trimEnd()!==_n();f&&w&&!(p.relatedTarget&&ut(p.relatedTarget))&&e.setDate(e._input.value,!0,p.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function An(p){var f=he(p),w=e.config.wrap?a.contains(f):f===e._input,C=e.config.allowInput,T=e.isOpen&&(!C||!w),D=e.config.inline&&w&&!C;if(p.keyCode===13&&w){if(C)return e.setDate(e._input.value,!0,f===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),f.blur();e.open()}else if(ut(f)||T||D){var O=!!e.timeContainer&&e.timeContainer.contains(f);switch(p.keyCode){case 13:O?(p.preventDefault(),L(),fn()):Pn(p);break;case 27:p.preventDefault(),fn();break;case 8:case 46:w&&!e.config.allowInput&&(p.preventDefault(),e.clear());break;case 37:case 39:if(!O&&!w){p.preventDefault();var P=c();if(e.daysContainer!==void 0&&(C===!1||P&&Ct(P))){var H=p.keyCode===39?1:-1;p.ctrlKey?(p.stopPropagation(),pn(H),pt(Qe(1),0)):pt(void 0,H)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:p.preventDefault();var V=p.keyCode===40?1:-1;e.daysContainer&&f.$i!==void 0||f===e.input||f===e.altInput?p.ctrlKey?(p.stopPropagation(),wt(e.currentYear-V),pt(Qe(1),0)):O||pt(void 0,V*7):f===e.currentYearElement?wt(e.currentYear-V):e.config.enableTime&&(!O&&e.hourElement&&e.hourElement.focus(),L(p),e._debouncedChange());break;case 9:if(O){var F=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(xe){return xe}),W=F.indexOf(f);if(W!==-1){var Ce=F[W+(p.shiftKey?-1:1)];p.preventDefault(),(Ce||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(f)&&p.shiftKey&&(p.preventDefault(),e._input.focus());break;default:break}}if(e.amPM!==void 0&&f===e.amPM)switch(p.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],J(),Ie();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],J(),Ie();break}(w||ut(f))&&q("onKeyDown",p)}function St(p,f){if(f===void 0&&(f="flatpickr-day"),!(e.selectedDates.length!==1||p&&(!p.classList.contains(f)||p.classList.contains("flatpickr-disabled")))){for(var w=p?p.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),C=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),T=Math.min(w,e.selectedDates[0].getTime()),D=Math.max(w,e.selectedDates[0].getTime()),O=!1,P=0,H=0,V=T;V<D;V+=si.DAY)$e(new Date(V),!0)||(O=O||V>T&&V<D,V<C&&(!P||V>P)?P=V:V>C&&(!H||V<H)&&(H=V));var F=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+f));F.forEach(function(W){var Ce=W.dateObj,xe=Ce.getTime(),ft=P>0&&xe<P||H>0&&xe>H;if(ft){W.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Ke){W.classList.remove(Ke)});return}else if(O&&!ft)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Ke){W.classList.remove(Ke)}),p!==void 0&&(p.classList.add(w<=e.selectedDates[0].getTime()?"startRange":"endRange"),C<w&&xe===C?W.classList.add("startRange"):C>w&&xe===C&&W.classList.add("endRange"),xe>=P&&(H===0||xe<=H)&&ai(xe,C,w)&&W.classList.add("inRange"))})}}function bi(){e.isOpen&&!e.config.static&&!e.config.inline&&Et()}function yi(p,f){if(f===void 0&&(f=e._positionElement),e.isMobile===!0){if(p){p.preventDefault();var w=he(p);w&&w.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),q("onOpen");return}else if(e._input.disabled||e.config.inline)return;var C=e.isOpen;e.isOpen=!0,C||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),q("onOpen"),Et(f)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(p===void 0||!e.timeContainer.contains(p.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Tn(p){return function(f){var w=e.config["_"+p+"Date"]=e.parseDate(f,e.config.dateFormat),C=e.config["_"+(p==="min"?"max":"min")+"Date"];w!==void 0&&(e[p==="min"?"minDateHasTime":"maxDateHasTime"]=w.getHours()>0||w.getMinutes()>0||w.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(T){return $e(T)}),!e.selectedDates.length&&p==="min"&&ee(w),Ie()),e.daysContainer&&(Vn(),w!==void 0?e.currentYearElement[p]=w.getFullYear().toString():e.currentYearElement.removeAttribute(p),e.currentYearElement.disabled=!!C&&w!==void 0&&C.getFullYear()===w.getFullYear())}}function wi(){var p=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],f=oe(oe({},JSON.parse(JSON.stringify(a.dataset||{}))),t),w={};e.config.parseDate=f.parseDate,e.config.formatDate=f.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(F){e.config._enable=Fn(F)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(F){e.config._disable=Fn(F)}});var C=f.mode==="time";if(!f.dateFormat&&(f.enableTime||C)){var T=Z.defaultConfig.dateFormat||Re.dateFormat;w.dateFormat=f.noCalendar||C?"H:i"+(f.enableSeconds?":S":""):T+" H:i"+(f.enableSeconds?":S":"")}if(f.altInput&&(f.enableTime||C)&&!f.altFormat){var D=Z.defaultConfig.altFormat||Re.altFormat;w.altFormat=f.noCalendar||C?"h:i"+(f.enableSeconds?":S K":" K"):D+(" h:i"+(f.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Tn("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Tn("max")});var O=function(F){return function(W){e.config[F==="min"?"_minTime":"_maxTime"]=e.parseDate(W,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:O("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:O("max")}),f.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,w,f);for(var P=0;P<p.length;P++)e.config[p[P]]=e.config[p[P]]===!0||e.config[p[P]]==="true";Xt.filter(function(F){return e.config[F]!==void 0}).forEach(function(F){e.config[F]=nn(e.config[F]||[]).map(x)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var P=0;P<e.config.plugins.length;P++){var H=e.config.plugins[P](e)||{};for(var V in H)Xt.indexOf(V)>-1?e.config[V]=nn(H[V]).map(x).concat(e.config[V]):typeof f[V]>"u"&&(e.config[V]=H[V])}f.altInputClass||(e.config.altInputClass=Dn().className+" "+e.config.altInputClass),q("onParseConfig")}function Dn(){return e.config.wrap?a.querySelector("[data-input]"):a}function In(){typeof e.config.locale!="object"&&typeof Z.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=oe(oe({},Z.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?Z.l10ns[e.config.locale]:void 0),Fe.D="("+e.l10n.weekdays.shorthand.join("|")+")",Fe.l="("+e.l10n.weekdays.longhand.join("|")+")",Fe.M="("+e.l10n.months.shorthand.join("|")+")",Fe.F="("+e.l10n.months.longhand.join("|")+")",Fe.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var p=oe(oe({},t),JSON.parse(JSON.stringify(a.dataset||{})));p.time_24hr===void 0&&Z.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Sn(e),e.parseDate=rn({config:e.config,l10n:e.l10n})}function Et(p){if(typeof e.config.position=="function")return void e.config.position(e,p);if(e.calendarContainer!==void 0){q("onPreCalendarPosition");var f=p||e._positionElement,w=Array.prototype.reduce.call(e.calendarContainer.children,function(Bi,Gi){return Bi+Gi.offsetHeight},0),C=e.calendarContainer.offsetWidth,T=e.config.position.split(" "),D=T[0],O=T.length>1?T[1]:null,P=f.getBoundingClientRect(),H=window.innerHeight-P.bottom,V=D==="above"||D!=="below"&&H<w&&P.top>w,F=window.pageYOffset+P.top+(V?-w-2:f.offsetHeight+2);if(ae(e.calendarContainer,"arrowTop",!V),ae(e.calendarContainer,"arrowBottom",V),!e.config.inline){var W=window.pageXOffset+P.left,Ce=!1,xe=!1;O==="center"?(W-=(C-P.width)/2,Ce=!0):O==="right"&&(W-=C-P.width,xe=!0),ae(e.calendarContainer,"arrowLeft",!Ce&&!xe),ae(e.calendarContainer,"arrowCenter",Ce),ae(e.calendarContainer,"arrowRight",xe);var ft=window.document.body.offsetWidth-(window.pageXOffset+P.right),Ke=W+C>window.document.body.offsetWidth,Li=ft+C>window.document.body.offsetWidth;if(ae(e.calendarContainer,"rightMost",Ke),!e.config.static)if(e.calendarContainer.style.top=F+"px",!Ke)e.calendarContainer.style.left=W+"px",e.calendarContainer.style.right="auto";else if(!Li)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=ft+"px";else{var vn=Ci();if(vn===void 0)return;var Fi=window.document.body.offsetWidth,Oi=Math.max(0,Fi/2-C/2),Hi=".flatpickr-calendar.centerMost:before",ji=".flatpickr-calendar.centerMost:after",Ni=vn.cssRules.length,Ri="{left:"+P.left+"px;right:auto;}";ae(e.calendarContainer,"rightMost",!1),ae(e.calendarContainer,"centerMost",!0),vn.insertRule(Hi+","+ji+Ri,Ni),e.calendarContainer.style.left=Oi+"px",e.calendarContainer.style.right="auto"}}}}function Ci(){for(var p=null,f=0;f<document.styleSheets.length;f++){var w=document.styleSheets[f];if(w.cssRules){try{w.cssRules}catch{continue}p=w;break}}return p??Si()}function Si(){var p=document.createElement("style");return document.head.appendChild(p),p.sheet}function Vn(){e.config.noCalendar||e.isMobile||(Je(),kt(),yt())}function fn(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Pn(p){p.preventDefault(),p.stopPropagation();var f=function(F){return F.classList&&F.classList.contains("flatpickr-day")&&!F.classList.contains("flatpickr-disabled")&&!F.classList.contains("notAllowed")},w=wn(he(p),f);if(w!==void 0){var C=w,T=e.latestSelectedDateObj=new Date(C.dateObj.getTime()),D=(T.getMonth()<e.currentMonth||T.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=C,e.config.mode==="single")e.selectedDates=[T];else if(e.config.mode==="multiple"){var O=hn(T);O?e.selectedDates.splice(parseInt(O),1):e.selectedDates.push(T)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=T,e.selectedDates.push(T),_e(T,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(F,W){return F.getTime()-W.getTime()}));if(J(),D){var P=e.currentYear!==T.getFullYear();e.currentYear=T.getFullYear(),e.currentMonth=T.getMonth(),P&&(q("onYearChange"),Je()),q("onMonthChange")}if(kt(),yt(),Ie(),!D&&e.config.mode!=="range"&&e.config.showMonths===1?qe(C):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var H=e.config.mode==="single"&&!e.config.enableTime,V=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(H||V)&&fn()}De()}}var Mt={locale:[In,kn],showMonths:[En,I,Mn],minDate:[Oe],maxDate:[Oe],positionElement:[On],clickOpens:[function(){e.config.clickOpens===!0?(j(e._input,"focus",e.open),j(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Ei(p,f){if(p!==null&&typeof p=="object"){Object.assign(e.config,p);for(var w in p)Mt[w]!==void 0&&Mt[w].forEach(function(C){return C()})}else e.config[p]=f,Mt[p]!==void 0?Mt[p].forEach(function(C){return C()}):Xt.indexOf(p)>-1&&(e.config[p]=nn(f));e.redraw(),Ie(!0)}function Ln(p,f){var w=[];if(p instanceof Array)w=p.map(function(C){return e.parseDate(C,f)});else if(p instanceof Date||typeof p=="number")w=[e.parseDate(p,f)];else if(typeof p=="string")switch(e.config.mode){case"single":case"time":w=[e.parseDate(p,f)];break;case"multiple":w=p.split(e.config.conjunction).map(function(C){return e.parseDate(C,f)});break;case"range":w=p.split(e.l10n.rangeSeparator).map(function(C){return e.parseDate(C,f)});break;default:break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(p)));e.selectedDates=e.config.allowInvalidPreload?w:w.filter(function(C){return C instanceof Date&&$e(C,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(C,T){return C.getTime()-T.getTime()})}function Mi(p,f,w){if(f===void 0&&(f=!1),w===void 0&&(w=e.config.dateFormat),p!==0&&!p||p instanceof Array&&p.length===0)return e.clear(f);Ln(p,w),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),Oe(void 0,f),ee(),e.selectedDates.length===0&&e.clear(!1),Ie(f),f&&q("onChange")}function Fn(p){return p.slice().map(function(f){return typeof f=="string"||typeof f=="number"||f instanceof Date?e.parseDate(f,void 0,!0):f&&typeof f=="object"&&f.from&&f.to?{from:e.parseDate(f.from,void 0),to:e.parseDate(f.to,void 0)}:f}).filter(function(f){return f})}function ki(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var p=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);p&&Ln(p,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function Ai(){if(e.input=Dn(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=N(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),On()}function On(){e._positionElement=e.config.positionElement||e._input}function Ti(){var p=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=N("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=p,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=p==="datetime-local"?"Y-m-d\\TH:i:S":p==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}j(e.mobileInput,"change",function(f){e.setDate(he(f).value,!1,e.mobileFormatStr),q("onChange"),q("onClose")})}function Di(p){if(e.isOpen===!0)return e.close();e.open(p)}function q(p,f){if(e.config!==void 0){var w=e.config[p];if(w!==void 0&&w.length>0)for(var C=0;w[C]&&C<w.length;C++)w[C](e.selectedDates,e.input.value,e,f);p==="onChange"&&(e.input.dispatchEvent(gn("change")),e.input.dispatchEvent(gn("input")))}}function gn(p){var f=document.createEvent("Event");return f.initEvent(p,!0,!0),f}function hn(p){for(var f=0;f<e.selectedDates.length;f++){var w=e.selectedDates[f];if(w instanceof Date&&_e(w,p)===0)return""+f}return!1}function Ii(p){return e.config.mode!=="range"||e.selectedDates.length<2?!1:_e(p,e.selectedDates[0])>=0&&_e(p,e.selectedDates[1])<=0}function kt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(p,f){var w=new Date(e.currentYear,e.currentMonth,1);w.setMonth(e.currentMonth+f),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[f].textContent=bt(w.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=w.getMonth().toString(),p.value=w.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function _n(p){var f=p||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(w){return e.formatDate(w,f)}).filter(function(w,C,T){return e.config.mode!=="range"||e.config.enableTime||T.indexOf(w)===C}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Ie(p){p===void 0&&(p=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=_n(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=_n(e.config.altFormat)),p!==!1&&q("onValueUpdate")}function Vi(p){var f=he(p),w=e.prevMonthNav.contains(f),C=e.nextMonthNav.contains(f);w||C?pn(w?-1:1):e.yearElements.indexOf(f)>=0?f.select():f.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):f.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Pi(p){p.preventDefault();var f=p.type==="keydown",w=he(p),C=w;e.amPM!==void 0&&w===e.amPM&&(e.amPM.textContent=e.l10n.amPM[ge(e.amPM.textContent===e.l10n.amPM[0])]);var T=parseFloat(C.getAttribute("min")),D=parseFloat(C.getAttribute("max")),O=parseFloat(C.getAttribute("step")),P=parseInt(C.value,10),H=p.delta||(f?p.which===38?1:-1:0),V=P+O*H;if(typeof C.value<"u"&&C.value.length===2){var F=C===e.hourElement,W=C===e.minuteElement;V<T?(V=D+V+ge(!F)+(ge(F)&&ge(!e.amPM)),W&&Ye(void 0,-1,e.hourElement)):V>D&&(V=C===e.hourElement?V-D-ge(!e.amPM):T,W&&Ye(void 0,1,e.hourElement)),e.amPM&&F&&(O===1?V+P===23:Math.abs(V-P)>O)&&(e.amPM.textContent=e.l10n.amPM[ge(e.amPM.textContent===e.l10n.amPM[0])]),C.value=re(V)}}return s(),e}function st(a,t){for(var e=Array.prototype.slice.call(a).filter(function(x){return x instanceof HTMLElement}),r=[],s=0;s<e.length;s++){var c=e[s];try{if(c.getAttribute("data-fp-omit")!==null)continue;c._flatpickr!==void 0&&(c._flatpickr.destroy(),c._flatpickr=void 0),c._flatpickr=ea(c,t||{}),r.push(c._flatpickr)}catch(x){console.error(x)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(a){return st(this,a)},HTMLElement.prototype.flatpickr=function(a){return st([this],a)});var Z=function(a,t){return typeof a=="string"?st(window.document.querySelectorAll(a),t):a instanceof Node?st([a],t):st(a,t)};Z.defaultConfig={};Z.l10ns={en:oe({},tn),default:oe({},tn)};Z.localize=function(a){Z.l10ns.default=oe(oe({},Z.l10ns.default),a)};Z.setDefaults=function(a){Z.defaultConfig=oe(oe({},Z.defaultConfig),a)};Z.parseDate=rn({});Z.formatDate=Sn({});Z.compareDates=_e;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(a){return st(this,a)});Date.prototype.fp_incr=function(a){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof a=="string"?parseInt(a,10):a))};typeof window<"u"&&(window.flatpickr=Z);var Be=Z;var ta=["fileInput"],na=["dateInput"];function ia(a,t){a&1&&(n(0,"div",106)(1,"div",85),v(),n(2,"svg",19),u(3,"path",88),i(),b(),n(4,"div")(5,"p",107),o(6,"Duplicating Asset"),i(),n(7,"p",108),o(8,"Most fields have been pre-filled. Please enter a new serial number and review all information before saving."),i()()()())}function ra(a,t){if(a&1&&(n(0,"div",109),v(),n(1,"svg",110),u(2,"path",111),i(),o(3),i()),a&2){let e=d();l(3),M(" ",e.nameError," ")}}function aa(a,t){a&1&&(n(0,"span",84),o(1,"Select parent asset"),i())}function oa(a,t){if(a&1&&(n(0,"span",112),o(1),i()),a&2){let e=d();l(),ne(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function sa(a,t){if(a&1){let e=E();n(0,"button",116),_("click",function(){let s=g(e).$implicit,c=d(2);return c.parent_id=s.id,h(c.showParentDropdown=!1)}),n(1,"div",28)(2,"div",118),v(),n(3,"svg",119),u(4,"path",54),i()(),b(),n(5,"div")(6,"div",120),o(7),i(),n(8,"div",121),o(9),i()()()()}if(a&2){let e=t.$implicit,r=d(2);k("bg-blue-50",r.parent_id===e.id),l(7),S(e.name),l(2),S(e.asset_id)}}function la(a,t){if(a&1){let e=E();n(0,"div",113)(1,"div",114)(2,"div",115),o(3,"Select parent asset"),i(),n(4,"button",116),_("click",function(){g(e);let s=d();return s.parent_id=null,h(s.showParentDropdown=!1)}),o(5," -- None -- "),i(),y(6,sa,10,4,"button",117),i()()}if(a&2){let e=d();l(4),k("bg-blue-50",!e.parent_id),l(2),m("ngForOf",e.possibleParents)}}function ca(a,t){a&1&&(n(0,"span",84),o(1,"Select asset type"),i())}function da(a,t){if(a&1){let e=E();n(0,"img",125),_("error",function(s){g(e);let c=d(2);return h(c.onAssetTypeIconError(s,c.selectedAssetType))}),i()}if(a&2){let e=d(2);m("src",e.selectedAssetType.icon,K)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function ma(a,t){if(a&1&&(v(),n(0,"svg",126),u(1,"path",127),i()),a&2){let e=d(2);X("color",e.selectedAssetType.color)}}function pa(a,t){if(a&1&&(n(0,"div",28)(1,"div",122),y(2,da,1,2,"img",123)(3,ma,2,2,"svg",124),i(),n(4,"span",112),o(5),i()()),a&2){let e=d();l(),X("background-color",e.selectedAssetType.color+"20"),l(),m("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),l(),m("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),l(2),S(e.selectedAssetType.label)}}function ua(a,t){if(a&1){let e=E();n(0,"img",133),_("error",function(s){g(e);let c=d().$implicit,x=d(2);return h(x.onAssetTypeIconError(s,c))}),i()}if(a&2){let e=d().$implicit;m("src",e.icon,K)("alt",e.name||e.label)}}function fa(a,t){a&1&&(v(),n(0,"svg",19),u(1,"path",127),i())}function ga(a,t){if(a&1){let e=E();n(0,"button",116),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.selectAssetType(s))}),n(1,"div",28)(2,"div",129),y(3,ua,1,2,"img",130)(4,fa,2,0,"svg",131),i(),n(5,"div")(6,"div",120),o(7),i(),n(8,"div",132),o(9),i()()()()}if(a&2){let e=t.$implicit,r=d(2);k("bg-blue-50",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id)("text-blue-700",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id),l(3),m("ngIf",e.icon&&!e.iconError),l(),m("ngIf",!e.icon||e.iconError),l(3),S(e.label||e.name),l(2),S(e.description)}}function ha(a,t){if(a&1&&(n(0,"div",113)(1,"div",114)(2,"div",115),o(3,"Select asset type"),i(),y(4,ga,10,8,"button",128),i()()),a&2){let e=d();l(4),m("ngForOf",e.assetTypes)}}function _a(a,t){if(a&1&&(n(0,"div",109),v(),n(1,"svg",110),u(2,"path",111),i(),o(3),i()),a&2){let e=d();l(3),M(" ",e.assetTypeError," ")}}function va(a,t){a&1&&(n(0,"span",84),o(1,"Select category"),i())}function xa(a,t){if(a&1&&(n(0,"span",112),o(1),i()),a&2){let e=d();l(),S(e.selectedCategory.name)}}function ba(a,t){if(a&1){let e=E();n(0,"img",133),_("error",function(s){g(e);let c=d().$implicit,x=d(2);return h(x.onCategoryIconError(s,c))}),i()}if(a&2){let e=d().$implicit;m("src",e.icon,K)("alt",e.name)}}function ya(a,t){a&1&&(v(),n(0,"svg",119),u(1,"path",54),i())}function wa(a,t){if(a&1&&(n(0,"div",132),o(1),i()),a&2){let e=d().$implicit;l(),S(e.description)}}function Ca(a,t){if(a&1){let e=E();n(0,"button",116),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.selectCategory(s))}),n(1,"div",28)(2,"div",118),y(3,ba,1,2,"img",130)(4,ya,2,0,"svg",134),i(),n(5,"div")(6,"div",120),o(7),i(),y(8,wa,2,1,"div",86),i()()()}if(a&2){let e=t.$implicit,r=d(2);k("bg-blue-50",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("text-blue-700",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id),l(3),m("ngIf",e.icon),l(),m("ngIf",!e.icon||e.iconError),l(3),S(e.name),l(),m("ngIf",e.description)}}function Sa(a,t){if(a&1&&(n(0,"div",113)(1,"div",114)(2,"div",115),o(3,"Select category"),i(),y(4,Ca,9,8,"button",128),i()()),a&2){let e=d();l(4),m("ngForOf",e.categories)}}function Ea(a,t){if(a&1&&(n(0,"div",109),v(),n(1,"svg",110),u(2,"path",111),i(),o(3),i()),a&2){let e=d();l(3),M(" ",e.categoryError," ")}}function Ma(a,t){if(a&1&&(n(0,"div",109),v(),n(1,"svg",110),u(2,"path",111),i(),o(3),i()),a&2){let e=d();l(3),M(" ",e.serialNumberError," ")}}function ka(a,t){a&1&&(n(0,"span",84),o(1,"Select location"),i())}function Aa(a,t){if(a&1&&(n(0,"div",28)(1,"div",135),v(),n(2,"svg",136),u(3,"path",78)(4,"path",79),i()(),b(),n(5,"span",112),o(6),i()()),a&2){let e=d();l(6),S(e.selectedLocation.label||e.selectedLocation.name)}}function Ta(a,t){if(a&1&&(n(0,"div",132),o(1),i()),a&2){let e=d().$implicit;l(),S(e.type.name)}}function Da(a,t){if(a&1){let e=E();n(0,"button",116),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.selectLocation(s))}),n(1,"div",28)(2,"div",137),v(),n(3,"svg",77),u(4,"path",78)(5,"path",79),i()(),b(),n(6,"div")(7,"div",120),o(8),i(),y(9,Ta,2,1,"div",86),i()()()}if(a&2){let e=t.$implicit,r=d(2);k("bg-blue-50",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id)("text-blue-700",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id),l(8),S(r.getLocationLabel(e)),l(),m("ngIf",e.type)}}function Ia(a,t){if(a&1&&(n(0,"div",113)(1,"div",114)(2,"div",115),o(3,"Select location"),i(),y(4,Da,10,6,"button",128),i()()),a&2){let e=d();l(4),m("ngForOf",e.locations)}}function Va(a,t){a&1&&(n(0,"span",84),o(1,"Select department"),i())}function Pa(a,t){if(a&1&&(n(0,"div",28)(1,"div",138),v(),n(2,"svg",139),u(3,"path",140),i()(),b(),n(4,"span",112),o(5),i()()),a&2){let e=d();l(5),S(e.selectedDepartment.name)}}function La(a,t){if(a&1&&(n(0,"div",132),o(1),i()),a&2){let e=d().$implicit;l(),S(e.description)}}function Fa(a,t){if(a&1&&(n(0,"div",143),o(1),i()),a&2){let e=d().$implicit;l(),M("Code: ",e.code,"")}}function Oa(a,t){if(a&1){let e=E();n(0,"button",116),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.selectDepartment(s))}),n(1,"div",28)(2,"div",141),v(),n(3,"svg",53),u(4,"path",140),i()(),b(),n(5,"div")(6,"div",120),o(7),i(),y(8,La,2,1,"div",86)(9,Fa,2,1,"div",142),i()()()}if(a&2){let e=t.$implicit,r=d(2);k("bg-blue-50",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id)("text-blue-700",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id),l(7),S(e.name),l(),m("ngIf",e.description),l(),m("ngIf",e.code)}}function Ha(a,t){if(a&1&&(n(0,"div",113)(1,"div",114)(2,"div",115),o(3,"Select department"),i(),y(4,Oa,10,7,"button",128),i()()),a&2){let e=d();l(4),m("ngForOf",e.departments)}}function ja(a,t){if(a&1&&(n(0,"div",28),u(1,"div",144),n(2,"span",112),o(3),i()()),a&2){let e=d();l(),X("background-color",e.selectedStatus.hexColor||"#6B7280"),l(2),S(e.selectedStatus.label)}}function Na(a,t){if(a&1){let e=E();n(0,"button",116),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.selectStatus(s))}),n(1,"div",28)(2,"div"),u(3,"div",144),i(),n(4,"div")(5,"div",120),o(6),i(),n(7,"div",132),o(8),i()()()()}if(a&2){let e=t.$implicit,r=d(2);k("bg-blue-50",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value)("text-blue-700",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value),l(2),se("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),l(),X("background-color",e.hexColor||"#6B7280"),l(3),S(e.label),l(2),S(e.description)}}function Ra(a,t){if(a&1&&(n(0,"div",145)(1,"div",114)(2,"div",115),o(3,"Select status"),i(),y(4,Na,9,10,"button",128),i()()),a&2){let e=d();l(4),m("ngForOf",e.statusOptions)}}function Ba(a,t){if(a&1){let e=E();n(0,"span"),o(1),n(2,"button",149),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.removeTag(s))}),v(),n(3,"svg",150),u(4,"path",151),i()()()}if(a&2){let e=t.$implicit;se("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),l(),M(" ",e.name," ")}}function Ga(a,t){if(a&1&&(n(0,"div",146)(1,"div",147),y(2,Ba,5,3,"span",148),i()()),a&2){let e=d();l(2),m("ngForOf",e.selectedTags)}}function za(a,t){if(a&1&&(n(0,"span",132),o(1),i()),a&2){let e=d();l(),M(" ",e.selectedTags.length," selected ")}}function $a(a,t){a&1&&(n(0,"div",156),v(),n(1,"svg",126),u(2,"path",157),i()())}function Ua(a,t){if(a&1){let e=E();n(0,"button",116),_("click",function(){let s=g(e).$implicit,c=d(2);return h(c.toggleTag(s))}),n(1,"div",34)(2,"div",28)(3,"div"),u(4,"div"),i(),n(5,"span",120),o(6),i()(),y(7,$a,3,0,"div",155),i()()}if(a&2){let e=t.$implicit,r=d(2);k("bg-blue-50",r.isTagSelected(e)),l(3),se("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),l(),se("w-3 h-3 rounded-full bg-"+e.color+"-500"),l(2),S(e.name),l(),m("ngIf",r.isTagSelected(e))}}function Wa(a,t){if(a&1){let e=E();n(0,"div",113)(1,"div",114)(2,"div",152)(3,"div",67)(4,"input",153),U("ngModelChange",function(s){g(e);let c=d();return $(c.newTagInput,s)||(c.newTagInput=s),h(s)}),_("keydown",function(s){g(e);let c=d();return h(c.onTagInputKeydown(s))})("click",function(s){return g(e),h(s.stopPropagation())}),i(),n(5,"div",154),o(6," Press Enter "),i()()(),n(7,"div",115),o(8,"Select tags"),i(),y(9,Ua,8,8,"button",117),i()()}if(a&2){let e=d();l(4),z("ngModel",e.newTagInput),l(5),m("ngForOf",e.availableTags)}}function Ya(a,t){if(a&1){let e=E();n(0,"button",177),_("click",function(){g(e);let s=d().index,c=d(2);return h(c.moveImageUp(s))}),v(),n(1,"svg",126),u(2,"path",178),i()()}}function qa(a,t){if(a&1){let e=E();n(0,"button",177),_("click",function(){g(e);let s=d().index,c=d(2);return h(c.moveImageDown(s))}),v(),n(1,"svg",126),u(2,"path",38),i()()}}function Qa(a,t){if(a&1){let e=E();n(0,"div",167)(1,"div",168)(2,"img",169),_("error",function(s){let c=g(e).index,x=d(2);return h(x.onImageError(s,c))})("load",function(s){let c=g(e).index,x=d(2);return h(x.onImageLoad(s,c))}),i(),n(3,"div",170)(4,"div",171),y(5,Ya,3,0,"button",172)(6,qa,3,0,"button",172),i()(),n(7,"button",173),_("click",function(){let s=g(e).index,c=d(2);return h(c.removeImage(s))}),v(),n(8,"svg",126),u(9,"path",151),i()(),b(),n(10,"div",174),o(11),i()(),n(12,"div",175)(13,"p",176),o(14),i(),n(15,"p",121),o(16),i()()()}if(a&2){let e,r=t.$implicit,s=t.index,c=d(2);l(2),m("src",r,K)("alt","Asset Image "+(s+1)),l(3),m("ngIf",s>0),l(),m("ngIf",s<c.imagePreviewUrls.length-1),l(5),M(" ",s+1," "),l(3),S(c.images[s].name),l(2),M("",(((e=c.images[s].size)!==null&&e!==void 0?e:0)/1024/1024).toFixed(1)," MB")}}function Ja(a,t){if(a&1){let e=E();n(0,"div",158)(1,"div",159)(2,"h4",160),o(3),i(),n(4,"button",161),_("click",function(){g(e);let s=d();return h(s.removeAllImages())}),o(5," Remove All "),i()(),n(6,"div",162),y(7,Qa,17,7,"div",163),i(),n(8,"div",164)(9,"div",85),v(),n(10,"svg",165),u(11,"path",88),i(),b(),n(12,"p",166)(13,"strong"),o(14,"Gallery Tips:"),i(),o(15," Hover over images to reorder them. The first image will be the primary asset image. "),i()()()()}if(a&2){let e=d();l(3),M("Selected Images (",e.imagePreviewUrls.length,")"),l(4),m("ngForOf",e.imagePreviewUrls)}}function Ka(a,t){if(a&1&&(n(0,"div",179)(1,"div",85),v(),n(2,"svg",180),u(3,"path",111),i(),b(),n(4,"p",181),o(5),i()()()),a&2){let e=d();l(5),S(e.submitError)}}function Za(a,t){if(a&1&&(n(0,"div",182)(1,"div",85),v(),n(2,"svg",58),u(3,"path",157),i(),b(),n(4,"p",183),o(5),i()()()),a&2){let e=d();l(5),S(e.submitSuccess)}}function Xa(a,t){a&1&&(n(0,"span",85),v(),n(1,"svg",184),u(2,"path",96),i(),b(),n(3,"span"),o(4,"Create Asset"),i()())}function eo(a,t){a&1&&(n(0,"span",85),v(),n(1,"svg",185),u(2,"circle",186)(3,"path",187),i(),b(),n(4,"span"),o(5,"Creating Asset..."),i()())}var sn=class a{constructor(t,e,r,s){this.assetService=t;this.router=e;this.route=r;this.http=s}dateInputs;fileInput;flatpickrInstances=[];name="";description="";serial_number="";model="";manufacturer="";purchase_date="";purchase_price=null;depreciation=null;depreciation_life=null;location_id=null;department_id=null;warranty="";insurance="";health_score=85;status=null;tags=[];images=[];imagePreviewUrls=[];meta={};isSubmitting=!1;isDragOver=!1;submitError="";submitSuccess="";submitFieldErrors={};locations=[];availableTags=[];departments=[];possibleParents=[];parent_id=null;isDuplicate=!1;duplicateSourceId=null;showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";nameError="";assetTypeError="";categoryError="";serialNumberError="";address="";onFileChange(t){if(t.target.files&&t.target.files.length){let e=Array.from(t.target.files);this.processFiles(e),t.target.value=""}}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1;let e=t.dataTransfer?.files;if(e&&e.length>0){let r=Array.from(e).filter(s=>s.type.startsWith("image/"));r.length>0&&this.processFiles(r)}}processFiles(t){let r=["image/jpeg","image/png","image/gif","image/webp"],s=[],c=[];for(let x of t){if(!r.includes(x.type)){console.warn("Invalid file type:",x.name);continue}if(x.size>10*1024*1024){console.warn("File too large:",x.name);continue}if(this.images.some(Y=>Y.name===x.name&&Y.size===x.size)){console.warn("Duplicate file skipped:",x.name);continue}if(this.images.length+s.length>=10){console.warn("Max image count exceeded:",x.name);break}s.push(x);let L=new FileReader;L.onload=Y=>{Y.target?.result&&this.imagePreviewUrls.push(Y.target.result)},L.onerror=Y=>{console.error("Preview failed for:",x.name,Y)},L.readAsDataURL(x)}this.images=[...this.images,...s]}onSubmit(){if(this.clearErrors(),!this.validateForm())return;this.isSubmitting=!0,this.submitError="",this.submitSuccess="",this.submitFieldErrors={};let t=e=>{let r={name:this.name,description:this.description,category_id:this.category_id,type:this.assetType,serial_number:this.serial_number,model:this.model,manufacturer:this.manufacturer,purchase_date:this.purchase_date?this.convertDateToBackendFormat(this.purchase_date):null,purchase_price:this.purchase_price,depreciation:this.depreciation,depreciation_life:this.depreciation_life,location_id:this.location_id,department_id:this.department_id,parent_id:this.parent_id,warranty:this.warranty,insurance:this.insurance,health_score:this.health_score,status:this.status,tags:this.selectedTags.map(c=>c.name),meta:this.meta};this.isDuplicate||(r.images=e),(this.isDuplicate&&this.duplicateSourceId?this.assetService.duplicateAsset(this.duplicateSourceId,r):this.assetService.createAsset(r)).subscribe({next:c=>{this.isSubmitting=!1,c.success?(this.submitSuccess=this.isDuplicate?"Asset duplicated successfully!":"Asset created successfully!",setTimeout(()=>{this.router.navigate(["/assets/list"])},2e3)):(this.submitError=c.message||"Failed to create asset.",this.handleFieldErrors(c.errors||{}))},error:c=>{this.isSubmitting=!1,this.submitError=c.error?.message||"Failed to create asset.",this.handleFieldErrors(c.error?.errors||c.errors||{})}})};this.isDuplicate?this.images.length>0?this.convertImagesToBase64().then(t).catch(e=>{this.isSubmitting=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",e)}):t([]):this.convertImagesToBase64().then(t).catch(e=>{this.isSubmitting=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",e)})}healthScore=85;categories=[];category_id=null;assetTypes=[];assetType=null;assetTypesFromAPI=[];statusOptionsFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];ngOnInit(){this.route.queryParams.subscribe(t=>{t.duplicate&&t.sourceId&&(this.isDuplicate=!0,this.duplicateSourceId=String(t.sourceId),this.loadAssetForDuplication(this.duplicateSourceId))}),this.assetService.getAssetCategories().subscribe(t=>{t.success&&t.data?.categories&&(this.categories=t.data.categories)}),this.assetService.getAssetTypes().subscribe(t=>{t.success&&t.data&&(this.assetTypesFromAPI=t.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})))}),this.assetService.getAssetStatuses().subscribe(t=>{t.success&&t.data&&(this.statusOptionsFromAPI=t.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,r)=>e.sort_order-r.sort_order),this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value))}),this.assetService.getLocations().subscribe(t=>{t.success&&t.data&&(this.locations=t.data.locations||t.data,this.route.queryParams.subscribe(e=>{e.location_id&&(this.location_id=Number(e.location_id),this.selectedLocation=this.locations.find(r=>r.id===this.location_id))}))}),this.assetService.getDepartments().subscribe(t=>{t.success&&t.data&&(this.departments=t.data)}),this.assetService.getAssets({per_page:1e3}).subscribe(t=>{t.success&&t.data?.assets&&(this.possibleParents=t.data.assets)}),this.loadAvailableTags()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}ngOnDestroy(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs?(console.log("Found date inputs:",this.dateInputs.length),this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let r=t.nativeElement,s=r.getAttribute("name");if(console.log("Processing date input:",s),s==="purchase_date"){console.log("Initializing Flatpickr for purchase_date");let x=Be(r,{dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,maxDate:"today",onChange:(I,L)=>{console.log("Date selected:",L),this.purchase_date=L}});this.flatpickrInstances.push(x),console.log("Flatpickr initialized successfully for purchase_date")}}})):console.warn("No date inputs found")},50)}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetForDuplication(t){this.assetService.getAsset(t).subscribe({next:e=>{if(e.success){let r=e.data.asset||e.data;this.populateFormFromSource(r)}},error:e=>{console.error("Error loading source asset for duplication:",e)}})}populateFormFromSource(t){this.name=t.name?`${t.name} (Copy)`:"",this.description=t.description||"",this.model=t.model||"",this.manufacturer=t.manufacturer||"",this.purchase_date=t.purchase_date?this.convertBackendDateToDisplay(t.purchase_date):"",this.purchase_price=t.purchase_price||null,this.depreciation=t.depreciation||null,this.depreciation_life=t.depreciation_life||null,this.location_id=t.location_id||null,this.department_id=t.department_id||null,this.warranty=t.warranty?this.convertBackendDateToDisplay(t.warranty):"",this.insurance=t.insurance||"",this.health_score=t.health_score||85,this.status=t.status||"Active",setTimeout(()=>{t.type&&(this.selectedAssetType=this.assetTypes.find(e=>e.id==t.type||e.id===parseInt(t.type))||null,this.selectedAssetType&&(this.assetType=this.selectedAssetType.id)),t.category_id&&(this.selectedCategory=this.categories.find(e=>e.id===t.category_id)||null,this.category_id=t.category_id),t.location_id&&(this.selectedLocation=this.locations.find(e=>e.id===t.location_id)||null),t.department_id&&(this.selectedDepartment=this.departments.find(e=>e.id===t.department_id)||null),t.status&&(this.selectedStatus=this.statusOptions.find(e=>e.value===t.status||e.label===t.status||e.id===t.status)||null,this.selectedStatus&&(this.status=this.selectedStatus.value)),!this.selectedStatus&&this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value),t.tags&&Array.isArray(t.tags)&&(this.selectedTags=t.tags.map(e=>this.availableTags.find(r=>r.id===e.id)||e)),this.clearErrors()},500),this.serial_number="",t.images&&Array.isArray(t.images)&&t.images.length>0&&this.duplicateImages(t.images)}goBack(){this.router.navigate(["/assets/list"])}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.assetType=t.id,this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(t){this.selectedCategory=t,this.category_id=t.id,this.showCategoryDropdown=!1,this.clearErrors()}buildLocationLabel(t){return t?t.full_path?t.full_path:Array.isArray(t.complete_hierarchy)&&t.complete_hierarchy.length>0?t.complete_hierarchy.map(e=>e.name).join(" \u2192 "):Array.isArray(t.ancestors_with_details)&&t.ancestors_with_details.length>0?t.ancestors_with_details.map(e=>e.name).join(" \u2192 ")+" \u2192 "+(t.name||""):t.name||"":""}getLocationLabel(t){return this.buildLocationLabel(t)}selectLocation(t){let e=this.buildLocationLabel(t);this.selectedLocation=Xe(Ze({},t),{label:e}),this.location_id=t.id,this.showLocationDropdown=!1}selectStatus(t){this.selectedStatus=t,this.status=t.value,this.showStatusDropdown=!1}selectDepartment(t){this.selectedDepartment=t,this.department_id=t.id,this.showDepartmentDropdown=!1}toggleTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.some(e=>e.id===t.id)}onTagInputKeydown(t){t.key==="Enter"&&(t.preventDefault(),this.createNewTag())}createNewTag(){let t=this.newTagInput.trim();if(t&&!this.selectedTags.some(e=>e.name.toLowerCase()===t.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],r=e[Math.floor(Math.random()*e.length)],s={id:Date.now(),name:t,color:r,isNew:!0};this.selectedTags.push(s),this.newTagInput=""}}removeTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1&&this.selectedTags.splice(e,1)}onDocumentClick(t){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}validateForm(){let t=!0;if(!this.name||this.name.trim().length===0?(this.nameError="Asset name is required",t=!1):this.name.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",t=!1),this.description&&this.description.length>1e3&&(this.submitError="Description cannot exceed 1000 characters",t=!1),this.serial_number&&this.serial_number.length>100&&(this.serialNumberError="Serial number cannot exceed 100 characters",t=!1),this.model&&this.model.length>100&&(this.submitError="Model cannot exceed 100 characters",t=!1),this.manufacturer&&this.manufacturer.length>100&&(this.submitError="Manufacturer cannot exceed 100 characters",t=!1),this.warranty&&this.warranty.length>255&&(this.submitError="Warranty cannot exceed 255 characters",t=!1),this.insurance&&this.insurance.length>255&&(this.submitError="Insurance cannot exceed 255 characters",t=!1),this.purchase_price!==null&&this.purchase_price<0&&(this.submitError="Purchase price cannot be negative",t=!1),this.depreciation!==null&&(this.depreciation<0||this.depreciation>100)&&(this.submitError="Depreciation must be between 0 and 100",t=!1),this.depreciation_life!==null&&(this.depreciation_life<1||this.depreciation_life>100)&&(this.submitError="Depreciation life must be between 1 and 100 years",t=!1),this.purchase_date){let e=new Date;new Date(this.purchase_date)>e&&(this.submitError="Purchase date cannot be in the future",t=!1)}return(this.health_score<0||this.health_score>100)&&(this.submitError="Health score must be between 0 and 100",t=!1),this.category_id||(this.categoryError="Category is required",t=!1),this.assetType||(this.assetTypeError="Asset type is required",t=!1),t}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}handleFieldErrors(t){t.name&&(this.nameError=t.name[0]),t.type&&(this.assetTypeError=t.type[0]),t.category_id&&(this.categoryError=t.category_id[0]),t.serial_number&&(this.serialNumberError=t.serial_number[0])}isFormValid(){return!!(this.name&&this.name.trim().length>0&&this.name.trim().length<=100)}removeImage(t){this.images.splice(t,1),this.imagePreviewUrls.splice(t,1)}removeAllImages(){this.images=[],this.imagePreviewUrls=[]}moveImage(t,e){if(e>=0&&e<this.images.length){let r=this.images.splice(t,1)[0];this.images.splice(e,0,r);let s=this.imagePreviewUrls.splice(t,1)[0];this.imagePreviewUrls.splice(e,0,s)}}moveImageUp(t){t>0&&this.moveImage(t,t-1)}moveImageDown(t){t<this.images.length-1&&this.moveImage(t,t+1)}getTodayDate(){return new Date().toISOString().split("T")[0]}convertDateToBackendFormat(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${r}-${s}-${c}`}catch(e){return console.error("Date conversion error:",e),t}}convertBackendDateToDisplay(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",r).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),t}}getIconFromPath(t){return t&&(t.split("/").pop()||"").replace(".svg","")||"cube"}getColorForType(t){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[t]||"#6b7280"}hexToTailwindColor(t){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[t.toUpperCase()]||"gray"}onImageError(t,e){console.error("Image failed to load at index:",e),console.error("Image src:",t.target.src),console.error("Image file:",this.images[e]),t.target.style.display="none"}onImageLoad(t,e){console.log("Image loaded successfully at index:",e),console.log("Image dimensions:",t.target.naturalWidth,"x",t.target.naturalHeight)}convertImagesToBase64(){return Promise.all(this.images.map(t=>new Promise((e,r)=>{let s=new FileReader;s.onload=()=>{s.result?e(s.result):r(new Error("Failed to read file"))},s.onerror=()=>r(s.error),s.readAsDataURL(t)})))}onCategoryIconError(t,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}onAssetTypeIconError(t,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}triggerFileInput(){this.fileInput.nativeElement.click()}duplicateImages(t){t.forEach((e,r)=>{if(e.image_url){this.imagePreviewUrls.push(e.image_url);let s=`existing-image-${r+1}.jpg`,c=new File([""],s,{type:"image/jpeg"});this.images.push(c)}})}getSelectedParent(){return this.possibleParents.find(t=>t.id===this.parent_id)}static \u0275fac=function(e){return new(e||a)(G(ye),G(Ae),G(nt),G(Un))};static \u0275cmp=te({type:a,selectors:[["app-asset-create"]],viewQuery:function(e,r){if(e&1&&(Se(ta,5),Se(na,5)),e&2){let s;Ee(s=Me())&&(r.fileInput=s.first),Ee(s=Me())&&(r.dateInputs=s)}},hostBindings:function(e,r){e&1&&_("click",function(c){return r.onDocumentClick(c)},!1,et)},decls:300,vars:118,consts:[["assetForm","ngForm"],["nameInput","ngModel"],["dateInput",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-create-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",4,"ngIf"],[3,"ngSubmit"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","name","name","required","",1,"input",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","space-x-3"],["type","text","value","AST-012","readonly","",1,"input","flex-1"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","name","description","maxlength","500",1,"input","resize-none",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","name","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input",3,"ngModelChange","ngModel"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","placeholder","e.g., Dell, HP, Toyota","name","manufacturer","maxlength","100",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., PowerEdge R730","name","model","maxlength","100",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., SN123456789","name","serial_number","maxlength","100",1,"input",3,"ngModelChange","ngModel"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","name","purchase_price","step","0.01","min","0",1,"input",2,"padding-left","24px",3,"ngModelChange","ngModel"],["type","text","name","purchase_date","placeholder","Select purchase date","readonly","",1,"input",3,"ngModelChange","ngModel"],["type","number","name","depreciation","placeholder","e.g., 20","min","0","max","100","step","0.01",1,"input",3,"ngModelChange","ngModel"],["type","number","name","depreciation_life","placeholder","e.g., 5","min","1","max","100",1,"input",3,"ngModelChange","ngModel"],["type","text","name","warranty","placeholder","e.g., 2 years manufacturer warranty","maxlength","255",1,"input",3,"ngModelChange","ngModel"],["type","text","name","insurance","placeholder","e.g., Policy #12345, expires 2025-12-31","maxlength","255",1,"input",3,"ngModelChange","ngModel"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"col-span-1","md:col-span-2"],["type","text","placeholder","Enter asset address","name","address","autocomplete","off",1,"input","w-full",3,"ngModelChange","ngModel"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-blue-800","font-medium"],[1,"text-blue-700","text-sm"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-sm","text-gray-500"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","name","newTagInput","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mt-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","w-6","h-6","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){if(e&1){let s=E();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"button",8),_("click",function(){return g(s),h(r.goBack())}),v(),n(5,"svg",9),u(6,"path",10),i(),b(),n(7,"span",11),o(8,"Back to Assets"),i()()(),n(9,"h1",12),o(10),i(),n(11,"p",13),o(12),i(),y(13,ia,9,0,"div",14),i(),n(14,"form",15,0),_("ngSubmit",function(){return g(s),h(r.onSubmit())}),n(16,"div",16)(17,"div",17)(18,"div",18),v(),n(19,"svg",19),u(20,"path",20),i()(),b(),n(21,"h2",21),o(22,"Basic Information"),i()(),n(23,"div",22)(24,"div")(25,"label",23),o(26," Asset Name "),n(27,"span",24),o(28,"*"),i()(),n(29,"input",25,1),U("ngModelChange",function(x){return g(s),$(r.name,x)||(r.name=x),h(x)}),i(),y(31,ra,4,1,"div",26),n(32,"div",27),o(33,"Maximum 100 characters"),i()(),n(34,"div")(35,"label",23),o(36,"Asset ID"),i(),n(37,"div",28),u(38,"input",29),n(39,"span",30),o(40," auto-generated "),i()(),n(41,"p",27),o(42,"Unique identifier automatically assigned"),i()()(),n(43,"div",31)(44,"label",23),o(45,"Parent Asset"),i(),n(46,"div",32),_("click",function(x){return g(s),h(x.stopPropagation())}),n(47,"button",33),_("click",function(){return g(s),h(r.showParentDropdown=!r.showParentDropdown)}),n(48,"div",34),y(49,aa,2,0,"span",35)(50,oa,2,2,"span",36),v(),n(51,"svg",37),u(52,"path",38),i()()(),y(53,la,7,3,"div",39),i(),b(),n(54,"div",27),o(55,"Optional: Select a parent asset if this asset is a child of another."),i()(),n(56,"div",31)(57,"label",23),o(58,"Description"),i(),n(59,"textarea",40),U("ngModelChange",function(x){return g(s),$(r.description,x)||(r.description=x),h(x)}),i(),n(60,"div",27),o(61,"Maximum 500 characters"),i()(),n(62,"div")(63,"label",41),o(64,"Health Score"),i(),n(65,"div",42)(66,"div",43)(67,"span",44),o(68,"Current Score"),i(),n(69,"span",45),o(70),i()(),n(71,"div",46),u(72,"div",47)(73,"div",48),n(74,"input",49),U("ngModelChange",function(x){return g(s),$(r.healthScore,x)||(r.healthScore=x),h(x)}),i(),u(75,"div",50),i(),n(76,"div",51)(77,"span"),o(78,"Poor (0%)"),i(),n(79,"span"),o(80,"Fair (25%)"),i(),n(81,"span"),o(82,"Good (50%)"),i(),n(83,"span"),o(84,"Very Good (75%)"),i(),n(85,"span"),o(86,"Excellent (100%)"),i()()()()(),n(87,"div",16)(88,"div",17)(89,"div",52),v(),n(90,"svg",53),u(91,"path",54),i()(),b(),n(92,"h2",21),o(93,"Asset Classification"),i()(),n(94,"div",55)(95,"div")(96,"label",23),o(97," Asset Type "),n(98,"span",24),o(99,"*"),i()(),n(100,"div",32),_("click",function(x){return g(s),h(x.stopPropagation())}),n(101,"button",33),_("click",function(){return g(s),h(r.toggleAssetTypeDropdown())}),n(102,"div",34),y(103,ca,2,0,"span",35)(104,pa,6,5,"div",56),v(),n(105,"svg",37),u(106,"path",38),i()()(),y(107,ha,5,1,"div",39),i(),y(108,_a,4,1,"div",26),i(),b(),n(109,"div")(110,"label",23),o(111," Category "),n(112,"span",24),o(113,"*"),i()(),n(114,"div",32),_("click",function(x){return g(s),h(x.stopPropagation())}),n(115,"button",33),_("click",function(){return g(s),h(r.toggleCategoryDropdown())}),n(116,"div",34),y(117,va,2,0,"span",35)(118,xa,2,1,"span",36),v(),n(119,"svg",37),u(120,"path",38),i()()(),y(121,Sa,5,1,"div",39),i(),y(122,Ea,4,1,"div",26),i()()(),b(),n(123,"div",16)(124,"div",17)(125,"div",57),v(),n(126,"svg",58),u(127,"path",59),i()(),b(),n(128,"h2",21),o(129,"Technical Details"),i()(),n(130,"div",60)(131,"div")(132,"label",23),o(133,"Manufacturer"),i(),n(134,"input",61),U("ngModelChange",function(x){return g(s),$(r.manufacturer,x)||(r.manufacturer=x),h(x)}),i(),n(135,"div",27),o(136,"Maximum 100 characters"),i()(),n(137,"div")(138,"label",23),o(139,"Model"),i(),n(140,"input",62),U("ngModelChange",function(x){return g(s),$(r.model,x)||(r.model=x),h(x)}),i(),n(141,"div",27),o(142,"Maximum 100 characters"),i()(),n(143,"div")(144,"label",23),o(145," Serial Number "),n(146,"span",24),o(147,"*"),i()(),n(148,"input",63),U("ngModelChange",function(x){return g(s),$(r.serial_number,x)||(r.serial_number=x),h(x)}),i(),y(149,Ma,4,1,"div",26),n(150,"div",27),o(151,"Required, max 100 chars, must be unique within your company"),i()()()(),n(152,"div",16)(153,"div",17)(154,"div",64),v(),n(155,"svg",65),u(156,"path",66),i()(),b(),n(157,"h2",21),o(158,"Financial Information"),i()(),n(159,"div",22)(160,"div")(161,"label",23),o(162,"Purchase Value (USD)"),i(),n(163,"div",67)(164,"div",68)(165,"span",69),o(166,"$ "),i()(),n(167,"input",70),U("ngModelChange",function(x){return g(s),$(r.purchase_price,x)||(r.purchase_price=x),h(x)}),i()(),n(168,"div",27),o(169,"Must be a non-negative number"),i()(),n(170,"div")(171,"label",23),o(172,"Purchase Date"),i(),n(173,"input",71,2),U("ngModelChange",function(x){return g(s),$(r.purchase_date,x)||(r.purchase_date=x),h(x)}),i(),n(175,"div",27),o(176,"Cannot be in the future"),i()()(),n(177,"div",22)(178,"div")(179,"label",23),o(180,"Depreciation Rate (%)"),i(),n(181,"input",72),U("ngModelChange",function(x){return g(s),$(r.depreciation,x)||(r.depreciation=x),h(x)}),i(),n(182,"div",27),o(183,"Annual depreciation rate (0-100%)"),i()(),n(184,"div")(185,"label",23),o(186,"Depreciation Life (Years)"),i(),n(187,"input",73),U("ngModelChange",function(x){return g(s),$(r.depreciation_life,x)||(r.depreciation_life=x),h(x)}),i(),n(188,"div",27),o(189,"Useful life for depreciation calculation (1-100 years)"),i()()(),n(190,"div",22)(191,"div")(192,"label",23),o(193,"Warranty Information"),i(),n(194,"input",74),U("ngModelChange",function(x){return g(s),$(r.warranty,x)||(r.warranty=x),h(x)}),i(),n(195,"div",27),o(196,"Warranty details (max 255 characters)"),i()(),n(197,"div")(198,"label",23),o(199,"Insurance Information"),i(),n(200,"input",75),U("ngModelChange",function(x){return g(s),$(r.insurance,x)||(r.insurance=x),h(x)}),i(),n(201,"div",27),o(202,"Insurance details (max 255 characters)"),i()()()(),n(203,"div",16)(204,"div",17)(205,"div",76),v(),n(206,"svg",77),u(207,"path",78)(208,"path",79),i()(),b(),n(209,"h2",21),o(210,"Location & Assignment"),i()(),n(211,"div",55)(212,"div")(213,"label",23),o(214,"Location"),i(),n(215,"div",32),_("click",function(x){return g(s),h(x.stopPropagation())}),n(216,"button",33),_("click",function(){return g(s),h(r.toggleLocationDropdown())}),n(217,"div",34),y(218,ka,2,0,"span",35)(219,Aa,7,1,"div",56),v(),n(220,"svg",37),u(221,"path",38),i()()(),y(222,Ia,5,1,"div",39),i()(),b(),n(223,"div",80)(224,"label",23),o(225,"Address"),i(),n(226,"input",81),U("ngModelChange",function(x){return g(s),$(r.address,x)||(r.address=x),h(x)}),i(),n(227,"div",27),o(228,"Enter the physical address of the asset"),i()(),n(229,"div")(230,"label",23),o(231,"Department ID"),i(),n(232,"div",32),_("click",function(x){return g(s),h(x.stopPropagation())}),n(233,"button",33),_("click",function(){return g(s),h(r.toggleDepartmentDropdown())}),n(234,"div",34),y(235,Va,2,0,"span",35)(236,Pa,6,1,"div",56),v(),n(237,"svg",37),u(238,"path",38),i()()(),y(239,Ha,5,1,"div",39),i(),b(),n(240,"div",27),o(241,"Optional department assignment"),i()(),n(242,"div")(243,"label",23),o(244,"Status"),i(),n(245,"div",32),_("click",function(x){return g(s),h(x.stopPropagation())}),n(246,"button",33),_("click",function(){return g(s),h(r.toggleStatusDropdown())}),n(247,"div",34),y(248,ja,4,3,"div",56),v(),n(249,"svg",37),u(250,"path",38),i()()(),y(251,Ra,5,1,"div",82),i(),b(),n(252,"div",27),o(253,"Current operational status of the asset"),i()(),n(254,"div")(255,"label",23),o(256,"Tags"),i(),y(257,Ga,3,1,"div",83),n(258,"div",32),_("click",function(x){return g(s),h(x.stopPropagation())}),n(259,"button",33),_("click",function(){return g(s),h(r.toggleTagsDropdown())}),n(260,"div",34)(261,"span",84),o(262),i(),n(263,"div",85),y(264,za,2,1,"span",86),v(),n(265,"svg",37),u(266,"path",38),i()()()(),y(267,Wa,10,2,"div",39),i(),b(),n(268,"div",27),v(),n(269,"svg",87),u(270,"path",88),i(),o(271," Select existing tags or type to create new ones. Press Enter to add custom tags. "),i()()()(),b(),n(272,"div",16)(273,"div",17)(274,"div",89),v(),n(275,"svg",90),u(276,"path",91),i()(),b(),n(277,"h2",21),o(278,"Asset Image"),i()(),n(279,"div")(280,"label",23),o(281,"Upload Image"),i(),n(282,"div",92),_("click",function(){return g(s),h(r.triggerFileInput())})("dragover",function(x){return g(s),h(r.onDragOver(x))})("dragleave",function(x){return g(s),h(r.onDragLeave(x))})("drop",function(x){return g(s),h(r.onDrop(x))}),n(283,"div",93)(284,"div",94),v(),n(285,"svg",95),u(286,"path",96),i()(),b(),n(287,"p",97),o(288),i(),n(289,"input",98,3),_("change",function(x){return g(s),h(r.onFileChange(x))}),i()()(),y(291,Ja,16,2,"div",99),i()(),y(292,Ka,6,1,"div",100)(293,Za,6,1,"div",101),n(294,"div",102)(295,"button",103),_("click",function(){return g(s),h(r.goBack())}),o(296," Cancel "),i(),n(297,"button",104),y(298,Xa,5,0,"span",105)(299,eo,6,0,"span",105),i()()()()()}e&2&&(l(10),M(" ",r.route.snapshot.queryParams.duplicate?"Duplicate Asset":"Create New Asset"," "),l(2),M(" ",r.route.snapshot.queryParams.duplicate?"Creating a copy of an existing asset. Please review and update the information below.":"Add a new asset to your inventory with detailed information and specifications"," "),l(),m("ngIf",r.route.snapshot.queryParams.duplicate),l(16),k("border-red-300",r.nameError),z("ngModel",r.name),l(2),m("ngIf",r.nameError),l(16),k("border-blue-500",r.showParentDropdown),l(2),m("ngIf",!r.parent_id),l(),m("ngIf",r.parent_id&&r.getSelectedParent()),l(),k("rotate-180",r.showParentDropdown),l(2),m("ngIf",r.showParentDropdown),l(6),z("ngModel",r.description),l(10),k("text-red-600",r.healthScore<50)("text-green-600",r.healthScore>=50),l(),M("",r.healthScore,"%"),l(3),X("width",r.healthScore,"%"),k("bg-red-500",r.healthScore<50)("bg-green-500",r.healthScore>=50),l(),z("ngModel",r.healthScore),l(),X("left",r.healthScore,"%"),k("bg-red-500",r.healthScore<50)("bg-green-500",r.healthScore>=50),l(26),k("border-red-300",r.assetTypeError)("border-blue-500",r.showAssetTypeDropdown),l(2),m("ngIf",!r.selectedAssetType),l(),m("ngIf",r.selectedAssetType),l(),k("rotate-180",r.showAssetTypeDropdown),l(2),m("ngIf",r.showAssetTypeDropdown),l(),m("ngIf",r.assetTypeError),l(7),k("border-red-300",r.categoryError)("border-blue-500",r.showCategoryDropdown),l(2),m("ngIf",!r.selectedCategory),l(),m("ngIf",r.selectedCategory),l(),k("rotate-180",r.showCategoryDropdown),l(2),m("ngIf",r.showCategoryDropdown),l(),m("ngIf",r.categoryError),l(12),z("ngModel",r.manufacturer),l(6),z("ngModel",r.model),l(8),k("border-red-300",r.serialNumberError),z("ngModel",r.serial_number),l(),m("ngIf",r.serialNumberError),l(18),z("ngModel",r.purchase_price),l(6),z("ngModel",r.purchase_date),l(8),z("ngModel",r.depreciation),l(6),z("ngModel",r.depreciation_life),l(7),z("ngModel",r.warranty),l(6),z("ngModel",r.insurance),l(16),k("border-blue-500",r.showLocationDropdown),l(2),m("ngIf",!r.selectedLocation),l(),m("ngIf",r.selectedLocation),l(),k("rotate-180",r.showLocationDropdown),l(2),m("ngIf",r.showLocationDropdown),l(4),z("ngModel",r.address),l(7),k("border-blue-500",r.showDepartmentDropdown),l(2),m("ngIf",!r.selectedDepartment),l(),m("ngIf",r.selectedDepartment),l(),k("rotate-180",r.showDepartmentDropdown),l(2),m("ngIf",r.showDepartmentDropdown),l(7),k("border-blue-500",r.showStatusDropdown),l(2),m("ngIf",r.selectedStatus),l(),k("rotate-180",r.showStatusDropdown),l(2),m("ngIf",r.showStatusDropdown),l(6),m("ngIf",r.selectedTags.length>0),l(2),k("border-blue-500",r.showTagsDropdown),l(3),M(" ",r.selectedTags.length===0?"Select tags":"Add more tags"," "),l(2),m("ngIf",r.selectedTags.length>0),l(),k("rotate-180",r.showTagsDropdown),l(2),m("ngIf",r.showTagsDropdown),l(15),k("border-gray-300",!r.isDragOver)("border-blue-500",r.isDragOver)("bg-blue-50",r.isDragOver)("hover:border-blue-400",!r.isDragOver),l(3),k("text-gray-400",!r.isDragOver)("text-blue-500",r.isDragOver),l(2),k("text-gray-500",!r.isDragOver)("text-blue-600",r.isDragOver),l(),M(" ",r.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),l(3),m("ngIf",r.imagePreviewUrls.length>0),l(),m("ngIf",r.submitError),l(),m("ngIf",r.submitSuccess),l(2),m("disabled",r.isSubmitting),l(2),m("disabled",r.isSubmitting||!r.isFormValid()),l(),m("ngIf",!r.isSubmitting),l(),m("ngIf",r.isSubmitting))},dependencies:[fe,Ne,pe,jt,Nt,ue,je,$t,Ut,zt,Gt,be,Ht,ie,ke],styles:[".asset-create-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 768px){.asset-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.transition-transform[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb;font-family:inherit}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6;font-weight:600}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}[_nghost-%COMP%]     .flatpickr-input{cursor:pointer}[_nghost-%COMP%]     .flatpickr-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.slider-input[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;outline:none;z-index:20}.slider-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;position:relative;z-index:30}.slider-input[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;box-shadow:none}.slider-input[_ngcontent-%COMP%]:focus{outline:none}"]})};var to=["dateInput"];function no(a,t){a&1&&(n(0,"span",42),o(1,"No location assigned"),i())}function io(a,t){if(a&1&&(n(0,"span",43),o(1),i()),a&2){let e=d(2);l(),M(" ",e.getLocationNameById(e.transferData.new_location_id)," ")}}function ro(a,t){if(a&1){let e=E();n(0,"button",48),_("click",function(){let s=g(e).$implicit,c=d(3);return c.transferData.new_location_id=s.id,h(c.showLocationDropdown=!1)}),o(1),i()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",r.transferData.new_location_id===e.id),m("disabled",e.id===(r.asset==null?null:r.asset.location_id)),l(),M(" ",r.getLocationLabel(e)," ")}}function ao(a,t){if(a&1){let e=E();n(0,"div",44)(1,"div",45)(2,"button",46),_("click",function(){g(e);let s=d(2);return s.transferData.new_location_id=null,h(s.showLocationDropdown=!1)}),o(3," No location assigned "),i(),y(4,ro,2,4,"button",47),i()()}if(a&2){let e=d(2);l(2),k("bg-blue-50",!e.transferData.new_location_id),l(2),m("ngForOf",e.locations)}}function oo(a,t){a&1&&(n(0,"span",42),o(1,"Select new department (optional)"),i())}function so(a,t){if(a&1&&(n(0,"span",43),o(1),i()),a&2){let e=d(2);l(),M(" ",e.getDepartmentNameById(e.transferData.new_department_id)," ")}}function lo(a,t){if(a&1){let e=E();n(0,"button",46),_("click",function(){let s=g(e).$implicit,c=d(3);return c.transferData.new_department_id=s.id,h(c.showDepartmentDropdown=!1)}),o(1),i()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",r.transferData.new_department_id===e.id),l(),M(" ",e.name," ")}}function co(a,t){if(a&1){let e=E();n(0,"div",44)(1,"div",45)(2,"button",46),_("click",function(){g(e);let s=d(2);return s.transferData.new_department_id=null,h(s.showDepartmentDropdown=!1)}),o(3," Select new department (optional) "),i(),y(4,lo,2,3,"button",49),i()()}if(a&2){let e=d(2);l(2),k("bg-blue-50",!e.transferData.new_department_id),l(2),m("ngForOf",e.departments)}}function mo(a,t){a&1&&(n(0,"span",42),o(1,"Select reason"),i())}function po(a,t){if(a&1&&(n(0,"span",43),o(1),i()),a&2){let e=d(2);l(),M(" ",e.transferData.transfer_reason," ")}}function uo(a,t){if(a&1){let e=E();n(0,"button",46),_("click",function(){let s=g(e).$implicit,c=d(3);return c.transferData.transfer_reason=s,h(c.showReasonDropdown=!1)}),o(1),i()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",r.transferData.transfer_reason===e),l(),M(" ",e," ")}}function fo(a,t){if(a&1){let e=E();n(0,"div",44)(1,"div",45)(2,"button",46),_("click",function(){g(e);let s=d(2);return s.transferData.transfer_reason="",h(s.showReasonDropdown=!1)}),o(3," Select reason "),i(),y(4,uo,2,3,"button",49),i()()}if(a&2){let e=d(2);l(2),k("bg-blue-50",!e.transferData.transfer_reason),l(2),m("ngForOf",e.transferReasons)}}function go(a,t){if(a&1&&(n(0,"div",50)(1,"div",51)(2,"div",52),v(),n(3,"svg",53),u(4,"path",54),i()(),b(),n(5,"div",55)(6,"p",56),o(7),i()()()()),a&2){let e=d(2);l(7),S(e.error)}}function ho(a,t){a&1&&(n(0,"span"),o(1,"Create Transfer"),i())}function _o(a,t){a&1&&(n(0,"span",57),v(),n(1,"svg",58),u(2,"circle",59)(3,"path",60),i(),o(4," Creating Transfer... "),i())}function vo(a,t){if(a&1){let e=E();n(0,"div",2),_("click",function(s){g(e);let c=d();return h(c.onModalClick(s))}),n(1,"div",3),u(2,"div",4),n(3,"div",5),_("click",function(s){return g(e),h(s.stopPropagation())}),n(4,"div",6)(5,"h3",7),o(6),i(),n(7,"button",8),_("click",function(){g(e);let s=d();return h(s.onCancel())}),v(),n(8,"svg",9),u(9,"path",10),i()()(),b(),n(10,"div",11)(11,"div")(12,"p",12),o(13,"Current Location"),i(),n(14,"p",13),o(15),i()(),n(16,"div")(17,"p",12),o(18,"Current Department"),i(),n(19,"p",13),o(20),i()()(),n(21,"div",14)(22,"div",15),v(),n(23,"svg",16),u(24,"path",17),i()()(),b(),n(25,"form",18),_("ngSubmit",function(){g(e);let s=d();return h(s.onTransfer())}),n(26,"div",19),_("click",function(s){return g(e),h(s.stopPropagation())}),n(27,"label",20),o(28,"New Location"),i(),n(29,"button",21),_("click",function(){g(e);let s=d();return h(s.showLocationDropdown=!s.showLocationDropdown)}),n(30,"div",22),y(31,no,2,0,"span",23)(32,io,2,1,"span",24),v(),n(33,"svg",25),u(34,"path",26),i()()(),y(35,ao,5,3,"div",27),i(),b(),n(36,"div",19),_("click",function(s){return g(e),h(s.stopPropagation())}),n(37,"label",20),o(38,"New Department"),i(),n(39,"button",21),_("click",function(){g(e);let s=d();return h(s.showDepartmentDropdown=!s.showDepartmentDropdown)}),n(40,"div",22),y(41,oo,2,0,"span",23)(42,so,2,1,"span",24),v(),n(43,"svg",25),u(44,"path",26),i()()(),y(45,co,5,3,"div",27),i(),b(),n(46,"div",19),_("click",function(s){return g(e),h(s.stopPropagation())}),n(47,"label",20),o(48,"Transfer Reason *"),i(),n(49,"button",21),_("click",function(){g(e);let s=d();return h(s.showReasonDropdown=!s.showReasonDropdown)}),n(50,"div",22),y(51,mo,2,0,"span",23)(52,po,2,1,"span",24),v(),n(53,"svg",25),u(54,"path",26),i()()(),y(55,fo,5,3,"div",27),i(),b(),n(56,"div")(57,"label",28),o(58," Transfer Date * "),i(),n(59,"div",29)(60,"input",30,0),U("ngModelChange",function(s){g(e);let c=d();return $(c.transferData.transfer_date,s)||(c.transferData.transfer_date=s),h(s)}),i(),n(62,"div",31),v(),n(63,"svg",32),u(64,"path",33),i()()()(),b(),n(65,"div")(66,"label",34),o(67," Additional Notes "),i(),n(68,"textarea",35),U("ngModelChange",function(s){g(e);let c=d();return $(c.transferData.notes,s)||(c.transferData.notes=s),h(s)}),i()(),y(69,go,8,1,"div",36),n(70,"div",37)(71,"button",38),_("click",function(){g(e);let s=d();return h(s.onCancel())}),o(72," Cancel "),i(),n(73,"button",39),y(74,ho,2,0,"span",40)(75,_o,5,0,"span",41),i()()()()()()}if(a&2){let e=d();m("@backdropAnimation",void 0),l(3),m("@modalAnimation",void 0),l(3),M(" Transfer Asset: ",(e.asset==null?null:e.asset.name)||"Unknown Asset"," "),l(),m("disabled",e.loading),l(8),S(e.getCurrentLocationName()),l(5),S(e.getCurrentDepartmentName()),l(9),k("border-blue-500",e.showLocationDropdown),l(2),m("ngIf",!e.transferData.new_location_id),l(),m("ngIf",e.transferData.new_location_id),l(),k("rotate-180",e.showLocationDropdown),l(2),m("ngIf",e.showLocationDropdown),l(4),k("border-blue-500",e.showDepartmentDropdown),l(2),m("ngIf",!e.transferData.new_department_id),l(),m("ngIf",e.transferData.new_department_id),l(),k("rotate-180",e.showDepartmentDropdown),l(2),m("ngIf",e.showDepartmentDropdown),l(4),k("border-blue-500",e.showReasonDropdown),l(2),m("ngIf",!e.transferData.transfer_reason),l(),m("ngIf",e.transferData.transfer_reason),l(),k("rotate-180",e.showReasonDropdown),l(2),m("ngIf",e.showReasonDropdown),l(5),z("ngModel",e.transferData.transfer_date),m("disabled",e.loading),l(8),z("ngModel",e.transferData.notes),m("disabled",e.loading),l(),m("ngIf",e.error),l(2),m("disabled",e.loading),l(2),m("disabled",e.loading),l(),m("ngIf",!e.loading),l(),m("ngIf",e.loading)}}var lt=class a{constructor(t){this.assetService=t}isOpen=!1;asset=null;closeModal=new we;transferComplete=new we;dateInput;flatpickrInstance;showLocationDropdown=!1;showDepartmentDropdown=!1;showReasonDropdown=!1;loading=!1;error="";transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""};locations=[];departments=[];users=[];transferReasons=["Relocation","Maintenance","Replacement","Department Transfer","User Assignment","Storage","Disposal","Other"];ngOnInit(){console.log("TransferAssetModalComponent initialized"),this.loadDropdownData()}ngOnChanges(){console.log("TransferAssetModalComponent changes:",{isOpen:this.isOpen,asset:this.asset}),this.isOpen&&setTimeout(()=>{this.initializeFlatpickr()},200)}ngAfterViewInit(){}ngOnDestroy(){this.destroyFlatpickr()}destroyFlatpickr(){if(this.flatpickrInstance)try{this.flatpickrInstance.destroy(),this.flatpickrInstance=null}catch(t){console.error("Error destroying flatpickr:",t)}}initializeFlatpickr(){try{this.destroyFlatpickr(),this.dateInput&&this.dateInput.nativeElement?(console.log("Initializing flatpickr on element:",this.dateInput.nativeElement),this.flatpickrInstance=Be(this.dateInput.nativeElement,{dateFormat:"Y-m-d",defaultDate:new Date,allowInput:!1,clickOpens:!0,minDate:new Date,locale:{firstDayOfWeek:1},onChange:(t,e)=>{console.log("Date selected:",e),this.transferData.transfer_date=e},onOpen:()=>{console.log("Flatpickr opened")},onClose:()=>{console.log("Flatpickr closed")}}),console.log("Flatpickr initialized successfully")):console.warn("Date input element not found")}catch(t){console.error("Error initializing flatpickr:",t)}}loadDropdownData(){console.log("Loading dropdown data..."),console.log("Calling locations API with pagination..."),this.assetService.getLocations(1,1e3,"created","desc").subscribe({next:t=>{console.log("Locations API response:",t),console.log("Response type:",typeof t),console.log("Response keys:",Object.keys(t)),t&&t.data&&t.data.locations?(this.locations=t.data.locations,console.log("Using response.data.locations (paginated):",this.locations),console.log("Response pagination:",t.data.pagination)):t&&t.data&&Array.isArray(t.data)?(this.locations=t.data,console.log("Using response.data as array:",this.locations)):Array.isArray(t)?(this.locations=t,console.log("Using response as array:",this.locations)):(this.locations=[],console.warn("Unexpected response format:",t),console.log("Response structure:",t)),console.log("Final locations array:",this.locations),console.log("Locations count:",this.locations.length),this.locations.length===0&&console.warn("No locations found in response")},error:t=>{console.error("Error loading locations:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),this.locations=[]}}),console.log("Calling departments API with pagination..."),this.assetService.getDepartments(1,1e3,"created","desc").subscribe({next:t=>{console.log("Departments API response:",t),t&&t.data&&t.data.departments?(this.departments=t.data.departments,console.log("Using response.data.departments (paginated):",this.departments),console.log("Response pagination:",t.data.pagination)):t&&t.data&&Array.isArray(t.data)?(this.departments=t.data,console.log("Using response.data as array:",this.departments)):Array.isArray(t)?this.departments=t:(this.departments=[],console.warn("Unexpected departments response format:",t),console.log("Response structure:",t)),console.log("Final departments array:",this.departments),console.log("Departments count:",this.departments.length),this.departments.length===0&&console.warn("No departments found")},error:t=>{console.error("Error loading departments:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),this.departments=[]}})}reloadLocationData(){console.log("Manually reloading location data..."),this.loadDropdownData()}onTransfer(){this.validateForm()&&(this.loading=!0,this.error="",this.assetService.transferAsset(this.asset.id,this.transferData).subscribe({next:t=>{this.loading=!1,this.transferComplete.emit(t),this.resetForm(),this.closeModal.emit()},error:t=>{this.loading=!1,this.error=t.error?.message||"Transfer failed. Please try again.",console.error("Transfer error:",t)}}))}onCancel(){this.loading||(this.destroyFlatpickr(),this.resetForm(),this.closeModal.emit())}validateForm(){return this.transferData.new_location_id?this.transferData.transfer_reason?this.transferData.transfer_date?this.asset?.location_id===this.transferData.new_location_id?(this.error="Transfer location must be different from current location.",!1):(this.error="",!0):(this.error="Please select a transfer date.",!1):(this.error="Please select a transfer reason.",!1):(this.error="Please select a new location.",!1)}resetForm(){this.transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""},this.error=""}getCurrentLocationName(){return this.asset?.location?.name||"No location assigned"}getCurrentDepartmentName(){return this.asset?.department?.name||"No department assigned"}getLocationNameById(t){if(!t)return"";let e=this.locations.find(r=>r.id===t);return e?e.full_path?e.full_path:Array.isArray(e.complete_hierarchy)&&e.complete_hierarchy.length>0?e.complete_hierarchy.map(r=>r.name).join(" \u2192 "):Array.isArray(e.ancestors_with_details)&&e.ancestors_with_details.length>0?e.ancestors_with_details.map(r=>r.name).join(" \u2192 ")+" \u2192 "+(e.name||""):e.name||"":""}getLocationLabel(t){return t?t.full_path?t.full_path:Array.isArray(t.complete_hierarchy)&&t.complete_hierarchy.length>0?t.complete_hierarchy.map(e=>e.name).join(" \u2192 "):Array.isArray(t.ancestors_with_details)&&t.ancestors_with_details.length>0?t.ancestors_with_details.map(e=>e.name).join(" \u2192 ")+" \u2192 "+(t.name||""):t.name||"":""}getDepartmentNameById(t){if(!t)return"";let e=this.departments.find(r=>r.id===t);return e?e.name:""}getLocationsCount(){return this.locations.length}getDepartmentsCount(){return this.departments.length}getUsersCount(){return this.users.length}onModalClick(t){t.target===t.currentTarget&&(this.showLocationDropdown=!1,this.showDepartmentDropdown=!1,this.showReasonDropdown=!1)}static \u0275fac=function(e){return new(e||a)(G(ye))};static \u0275cmp=te({type:a,selectors:[["app-transfer-asset-modal"]],viewQuery:function(e,r){if(e&1&&Se(to,5),e&2){let s;Ee(s=Me())&&(r.dateInput=s.first)}},inputs:{isOpen:"isOpen",asset:"asset"},outputs:{closeModal:"closeModal",transferComplete:"transferComplete"},features:[jn],decls:1,vars:1,consts:[["dateInput",""],["class","fixed inset-0 z-50 overflow-y-auto",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50","overflow-y-auto",3,"click"],[1,"flex","items-center","justify-center","min-h-screen","px-4","pt-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity","z-0","bg-[#00000085]"],[1,"inline-block","w-full","max-w-2xl","z-1","p-6","my-8","relative","overflow-hidden","text-left","align-middle","transition-all","transform","bg-white","shadow-xl","rounded-2xl",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","justify-center","mb-6"],[1,"w-8","h-8","bg-blue-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 14l-7 7m0 0l-7-7m7 7V3"],[1,"space-y-4",3,"ngSubmit"],[1,"relative",3,"click"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["for","transfer_date",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["type","text","id","transfer_date","name","transfer_date","placeholder","Select date","required","","readonly","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","cursor-pointer",3,"ngModelChange","ngModel","disabled"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-4","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["for","notes",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","notes","name","notes","rows","3","placeholder","Enter any additional notes about this transfer...",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","resize-none",3,"ngModelChange","ngModel","disabled"],["class","bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-6"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click","disabled"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-gray-400"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","disabled","click",4,"ngFor","ngForOf"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click","disabled"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&y(0,vo,76,36,"div",1),e&2&&m("ngIf",r.isOpen)},dependencies:[me,ke,ie,fe,Ne,pe,ue,je,$t,be,Ht],styles:[".transfer-asset-modal[_ngcontent-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-height:90vh;overflow-y:auto}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;cursor:not-allowed}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-image:none!important;-webkit-appearance:none;-moz-appearance:none;appearance:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px 12px;background-color:#fff;color:#374151}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:#9ca3af;background-color:#f9fafb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 10px 25px #00000026;border:1px solid #e5e7eb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]{border-radius:4px}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day.selected[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   .transfer-arrow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.transfer-asset-modal[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.transfer-asset-modal[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100vw - 2rem)}}"],data:{animation:[Pe("backdropAnimation",[ce(":enter",[Q({opacity:0}),le("150ms ease-out",Q({opacity:1}))]),ce(":leave",[le("150ms ease-in",Q({opacity:0}))])]),Pe("modalAnimation",[ce(":enter",[Q({opacity:0,transform:"scale(0.7) translateY(-50px)"}),le("200ms ease-out",Q({opacity:1,transform:"scale(1) translateY(0)"}))]),ce(":leave",[le("150ms ease-in",Q({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var ci=Hn(Jn());var xo=["dateInput"],bo=a=>["/locations",a],yo=a=>["/assets/preview",a],wo=()=>["all","category","location","department","manufacturer","parent","children","siblings","similar"];function Co(a,t){if(a&1){let e=E();n(0,"div",28)(1,"button",29),_("click",function(){g(e);let s=d();return s.transferAsset(),h(s.showActionsDropdown=!1)}),v(),n(2,"svg",30),u(3,"path",31),i(),b(),n(4,"span",32),o(5,"Transfer Asset"),i()(),n(6,"button",29),_("click",function(){g(e);let s=d();return s.duplicateAsset(),h(s.showActionsDropdown=!1)}),v(),n(7,"svg",30),u(8,"path",33),i(),b(),n(9,"span",32),o(10,"Duplicate"),i()(),u(11,"div",34),n(12,"button",29),_("click",function(){g(e);let s=d();return s.printAsset(),h(s.showActionsDropdown=!1)}),v(),n(13,"svg",30),u(14,"path",35),i(),b(),n(15,"span",32),o(16,"Print"),i()(),n(17,"button",29),_("click",function(){g(e);let s=d();return s.exportAsset(),h(s.showActionsDropdown=!1)}),v(),n(18,"svg",30),u(19,"path",36),i(),b(),n(20,"span",32),o(21,"Export"),i()(),n(22,"button",29),_("click",function(){g(e);let s=d();return s.sharePublicUrl(),h(s.showActionsDropdown=!1)}),v(),n(23,"svg",30),u(24,"path",37),i(),b(),n(25,"span",32),o(26,"Share Public URL"),i()()()}}function So(a,t){a&1&&(n(0,"div",38)(1,"div",39)(2,"div",40),v(),n(3,"svg",41),u(4,"circle",42)(5,"path",43),i()(),b(),n(6,"h3",44),o(7,"Loading Asset"),i(),n(8,"p",45),o(9,"Please wait while we fetch the asset details..."),i()()())}function Eo(a,t){if(a&1){let e=E();n(0,"div",38)(1,"div",39)(2,"div",46),v(),n(3,"svg",47),u(4,"path",48),i()(),b(),n(5,"h3",44),o(6,"Error Loading Asset"),i(),n(7,"p",49),o(8),i(),n(9,"button",50),_("click",function(){g(e);let s=d();return h(s.goBack())}),o(10," Back to Assets "),i()()()}if(a&2){let e=d();l(8),S(e.error)}}function Mo(a,t){if(a&1&&(n(0,"span",175),o(1),i()),a&2){let e=d(2);X("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),l(),M(" ",e.asset.asset_status.name," ")}}function ko(a,t){if(a&1){let e=E();n(0,"div",7)(1,"span",45),o(2,"Serial:"),i(),n(3,"button",62),_("click",function(){g(e);let s=d(2);return h(s.copySerialNumber())}),n(4,"span"),o(5),i(),v(),n(6,"svg",63),u(7,"path",33),i()()()}if(a&2){let e=d(2);l(5),S(e.asset.serial_number)}}function Ao(a,t){if(a&1){let e=E();n(0,"button",183),_("click",function(){g(e);let s=d(3);return h(s.previousImage())}),v(),n(1,"svg",18),u(2,"path",184),i()()}}function To(a,t){if(a&1){let e=E();n(0,"button",185),_("click",function(){g(e);let s=d(3);return h(s.nextImage())}),v(),n(1,"svg",18),u(2,"path",10),i()()}}function Do(a,t){if(a&1){let e=E();n(0,"div",188),_("click",function(){let s=g(e).index,c=d(4);return h(c.selectImage(s))}),n(1,"img",189),_("error",function(s){g(e);let c=d(4);return h(c.onImageError(s))}),i()()}if(a&2){let e=t.$implicit,r=t.index,s=d(4);k("border-blue-500",r===s.currentImageIndex)("border-gray-200",r!==s.currentImageIndex),l(),m("src",e.image_url,K)("alt","Asset image "+(r+1))}}function Io(a,t){if(a&1&&(n(0,"div",186),y(1,Do,2,6,"div",187),i()),a&2){let e=d(3);l(),m("ngForOf",e.asset.images)}}function Vo(a,t){if(a&1){let e=E();n(0,"div")(1,"div",176)(2,"div",177)(3,"img",178),_("click",function(){g(e);let s=d(2);return h(s.viewFullImage(s.selectedImageUrl||s.asset.images[0].image_url))})("error",function(s){g(e);let c=d(2);return h(c.onImageError(s))}),i(),y(4,Ao,3,0,"button",179)(5,To,3,0,"button",180),n(6,"div",181),o(7),i()()(),y(8,Io,2,1,"div",182),i()}if(a&2){let e=d(2);l(3),m("src",e.selectedImageUrl||e.asset.images[0].image_url,K)("alt",e.asset.name),l(),m("ngIf",e.asset.images.length>1),l(),m("ngIf",e.asset.images.length>1),l(2),ne(" ",e.currentImageIndex+1," / ",e.asset.images.length," "),l(),m("ngIf",e.asset.images.length>1)}}function Po(a,t){a&1&&(n(0,"div",190),v(),n(1,"svg",191),u(2,"path",70),i(),b(),n(3,"h3",44),o(4,"No Images Available"),i(),n(5,"p",192),o(6,"No images have been uploaded for this asset."),i()())}function Lo(a,t){if(a&1){let e=E();n(0,"button",193),_("click",function(){g(e);let s=d(2);return h(s.descriptionExpanded=!s.descriptionExpanded)}),o(1),i()}if(a&2){let e=d(2);l(),M(" ",e.descriptionExpanded?"Show Less":"Show More"," ")}}function Fo(a,t){if(a&1){let e=E();n(0,"img",194),_("error",function(s){g(e);let c=d(2);return h(c.onCategoryIconError(s,c.asset.category))}),i()}if(a&2){let e=d(2);m("src",e.asset.category.icon,K)("alt",e.asset.category.name)}}function Oo(a,t){a&1&&(v(),n(0,"svg",159),u(1,"path",195),i())}function Ho(a,t){if(a&1&&(n(0,"div",7)(1,"span",196),o(2),i()()),a&2){let e=d(2);l(),X("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),l(),M(" ",e.asset.asset_status.name," ")}}function jo(a,t){a&1&&(n(0,"span",90),o(1,"Not specified"),i())}function No(a,t){if(a&1&&(n(0,"a",197),o(1),i()),a&2){let e=d(2);m("routerLink",bn(2,bo,e.asset.location.id)),l(),M(" ",e.asset.location.name," ")}}function Ro(a,t){if(a&1&&(n(0,"span",90),o(1),i()),a&2){let e=d(2);l(),S((e.asset==null||e.asset.location==null?null:e.asset.location.name)||"No location assigned")}}function Bo(a,t){if(a&1&&(n(0,"div")(1,"h4",76),o(2,"Parent Asset"),i(),n(3,"a",197),o(4),i()()),a&2){let e=d(2);l(3),m("routerLink",bn(3,yo,e.asset.parent.id)),l(),ne(" ",e.asset.parent.name," (",e.asset.parent.asset_id,") ")}}function Go(a,t){if(a&1&&u(0,"img",198),a&2){let e=d(2);m("src",e.qrCodeDataUrl,K)}}function zo(a,t){if(a&1&&u(0,"img",198),a&2){let e=d(2);m("src",e.asset.qr_code_url,K)}}function $o(a,t){a&1&&(n(0,"div",199),u(1,"div",200),i())}function Uo(a,t){if(a&1&&(n(0,"div",39),v(),n(1,"svg",201),u(2,"path",202),i(),b(),n(3,"p",203),o(4),i()()),a&2){let e=d(2);l(4),S(e.asset.asset_id||e.asset.id)}}function Wo(a,t){a&1&&(n(0,"div",204),v(),n(1,"svg",205),u(2,"path",48),i(),b(),n(3,"p",206),o(4,"No Asset ID"),i()())}function Yo(a,t){if(a&1){let e=E();n(0,"button",207),_("click",function(){g(e);let s=d(2);return h(s.downloadQRCode())}),o(1," Download "),i()}}function qo(a,t){if(a&1){let e=E();n(0,"button",208),_("click",function(){g(e);let s=d(2);return h(s.copyPublicUrl())}),o(1," Copy URL "),i()}}function Qo(a,t){if(a&1&&u(0,"img",209),a&2){let e=d(2);m("src",e.asset.barcode_url,K)}}function Jo(a,t){if(a&1&&u(0,"img",209),a&2){let e=d(2);m("src",e.barcodeDataUrl,K)}}function Ko(a,t){a&1&&(n(0,"div",210),u(1,"div",200),i())}function Zo(a,t){if(a&1&&(n(0,"div",211),v(),n(1,"svg",212),u(2,"path",74),i(),b(),n(3,"p",203),o(4),i()()),a&2){let e=d(2);l(4),S(e.asset.asset_id)}}function Xo(a,t){a&1&&(n(0,"div",213),v(),n(1,"svg",205),u(2,"path",48),i(),b(),n(3,"p",206),o(4,"No Asset ID"),i()())}function es(a,t){if(a&1){let e=E();n(0,"button",207),_("click",function(){g(e);let s=d(2);return h(s.downloadBarcode())}),o(1," Download "),i()}}function ts(a,t){if(a&1){let e=E();n(0,"button",208),_("click",function(){g(e);let s=d(2);return h(s.copyAssetId())}),o(1," Copy ID "),i()}}function ns(a,t){if(a&1&&(n(0,"p",214),o(1),i()),a&2){let e=d(2);l(),S(e.asset.asset_id)}}function is(a,t){if(a&1&&(n(0,"span",215),o(1),i()),a&2){let e=d(3);l(),M(" ",e.asset.asset_status.description," ")}}function rs(a,t){if(a&1&&(n(0,"div",7)(1,"span",196),o(2),i(),y(3,is,2,1,"span",174),i()),a&2){let e=d(2);l(),X("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),l(),M(" ",e.asset.asset_status.name," "),l(),m("ngIf",e.asset.asset_status.description)}}function as(a,t){a&1&&(n(0,"span",90),o(1,"Not specified"),i())}function os(a,t){if(a&1){let e=E();n(0,"div")(1,"h4",113),o(2,"Serial Number"),i(),n(3,"div",7)(4,"span",216),o(5),i(),n(6,"button",217),_("click",function(){g(e);let s=d(2);return h(s.copySerialNumber())}),v(),n(7,"svg",14),u(8,"path",33),i()()()()}if(a&2){let e=d(2);l(5),S(e.asset.serial_number)}}function ss(a,t){if(a&1&&(n(0,"div",221)(1,"span",143),o(2),i(),n(3,"span",222),o(4),i()()),a&2){let e=t.$implicit;l(2),M("",e.key,":"),l(2),S(e.value)}}function ls(a,t){if(a&1&&(n(0,"div",218)(1,"h4",168),o(2,"Additional Specifications"),i(),n(3,"div",219),y(4,ss,5,2,"div",220),de(5,"keyvalue"),i()()),a&2){let e=d(2);l(4),m("ngForOf",Vt(5,1,e.asset.specifications))}}function cs(a,t){if(a&1&&(n(0,"div",223)(1,"div",155)(2,"div",137),o(3,"Average Health Score"),i(),n(4,"div",224),o(5),i()(),n(6,"div",139)(7,"div",137),o(8,"Average Performance"),i(),n(9,"div",140),o(10),i()(),n(11,"div",172)(12,"div",137),o(13,"Total Maintenance"),i(),n(14,"div",225),o(15),i()()()),a&2){let e=d(2);l(5),M("",e.healthPerformanceChartData.chart_data.metrics.average_health_score," % "),l(5),M("",e.healthPerformanceChartData.chart_data.metrics.average_performance_score," % "),l(5),M("",e.healthPerformanceChartData.chart_data.metrics.total_maintenance_count," ")}}function ds(a,t){a&1&&(n(0,"div",226)(1,"div",39)(2,"div",227),v(),n(3,"svg",228),u(4,"circle",42)(5,"path",43),i()(),b(),n(6,"p",45),o(7,"Loading health & performance data..."),i()()())}function ms(a,t){if(a&1){let e=E();n(0,"div",229)(1,"div",39)(2,"div",230),o(3),i(),n(4,"button",148),_("click",function(){g(e);let s=d(2);return h(s.loadHealthPerformanceChart())}),o(5," Try Again "),i()()()}if(a&2){let e=d(2);l(3),S(e.healthPerformanceChartError)}}function ps(a,t){a&1&&(n(0,"div",231),u(1,"canvas",232),i())}function us(a,t){a&1&&(n(0,"div",233),o(1," Green: Health Score | Blue: Performance Score | Orange: Maintenance Count "),i())}function fs(a,t){if(a&1&&(n(0,"div",234)(1,"div",142)(2,"div",143),o(3,"Health Trend"),i(),n(4,"div",235),o(5),i()(),n(6,"div",142)(7,"div",143),o(8,"Performance Trend"),i(),n(9,"div",235),o(10),i()()()),a&2){let e=d(2);l(4),m("ngClass",e.healthPerformanceChartData.chart_data.metrics.health_trend>=0?"text-green-600":"text-red-600"),l(),ne(" ",e.healthPerformanceChartData.chart_data.metrics.health_trend>=0?"+":"","",e.healthPerformanceChartData.chart_data.metrics.health_trend," % "),l(4),m("ngClass",e.healthPerformanceChartData.chart_data.metrics.performance_trend>=0?"text-green-600":"text-red-600"),l(),ne(" ",e.healthPerformanceChartData.chart_data.metrics.performance_trend>=0?"+":"","",e.healthPerformanceChartData.chart_data.metrics.performance_trend," % ")}}function gs(a,t){a&1&&(n(0,"div",226)(1,"div",39)(2,"div",236),v(),n(3,"svg",237),u(4,"circle",42)(5,"path",43),i()(),b(),n(6,"p",45),o(7,"Loading chart data..."),i()()())}function hs(a,t){if(a&1){let e=E();n(0,"div",229)(1,"div",39)(2,"div",230),o(3),i(),n(4,"button",148),_("click",function(){g(e);let s=d(2);return h(s.loadDepreciationChart())}),o(5," Try Again "),i()()()}if(a&2){let e=d(2);l(3),S(e.depreciationChartError)}}function _s(a,t){a&1&&(n(0,"div",231),u(1,"canvas",238),i())}function vs(a,t){a&1&&(n(0,"div",233),o(1," Blue line: Asset Value | Red line: Accumulated Depreciation "),i())}function xs(a,t){a&1&&(n(0,"div",239)(1,"div",39)(2,"div",236),v(),n(3,"svg",237),u(4,"circle",42)(5,"path",43),i()(),b(),n(6,"p",45),o(7,"Loading activities..."),i()()())}function bs(a,t){if(a&1){let e=E();n(0,"div",240)(1,"div",230),o(2),i(),n(3,"button",148),_("click",function(){g(e);let s=d(2);return h(s.loadActivityHistory())}),o(4," Try Again "),i()()}if(a&2){let e=d(2);l(2),S(e.activityError)}}function ys(a,t){if(a&1&&(n(0,"div",249),o(1),i()),a&2){let e=d().$implicit,r=d(3);l(),M(" ",r.formatActivityBeforeAfter(e.before,e.after)," ")}}function ws(a,t){if(a&1&&(n(0,"div",250)(1,"strong"),o(2,"By:"),i(),o(3),i()),a&2){let e=d().$implicit,r=d(3);l(3),M(" ",r.getUserDisplayName(e.user)," ")}}function Cs(a,t){if(a&1&&(n(0,"div",242)(1,"div",243),v(),n(2,"svg",14),u(3,"path",56),i()(),b(),n(4,"div",244)(5,"div",245)(6,"h4",246),o(7),i(),n(8,"span",215),o(9),i()(),n(10,"p",137),o(11),i(),y(12,ys,2,1,"div",247)(13,ws,4,1,"div",248),i()()),a&2){let e=t.$implicit,r=d(3);l(),m("ngClass",r.getActivityColor(e.action)),l(2),Dt("d",r.getActivityIcon(e.action)),l(4),S(e.action),l(2),S(e.time_ago),l(2),S(e.comment||"No comment"),l(),m("ngIf",r.formatActivityBeforeAfter(e.before,e.after)),l(),m("ngIf",e.user)}}function Ss(a,t){a&1&&(n(0,"div",240),v(),n(1,"svg",251),u(2,"path",92),i(),b(),n(3,"h3",44),o(4,"No Recent Activity"),i(),n(5,"p",192),o(6,"No activity has been recorded for this asset yet."),i()())}function Es(a,t){if(a&1&&(n(0,"div",112),y(1,Cs,14,7,"div",241)(2,Ss,7,0,"div",145),i()),a&2){let e=d(2);l(),m("ngForOf",e.activities),l(),m("ngIf",e.activities.length===0)}}function Ms(a,t){if(a&1){let e=E();n(0,"button",253),_("click",function(){let s=g(e).$implicit,c=d(3);return c.onRelatedFilterChange(s),h(c.showRelatedFilterDropdown=!1)}),n(1,"span",254),o(2),i()()}if(a&2){let e=t.$implicit,r=d(3);k("text-blue-600",r.selectedRelatedFilter===e)("bg-blue-50",r.selectedRelatedFilter===e),l(2),S(r.getRelatedFilterDisplayName(e))}}function ks(a,t){a&1&&(n(0,"div",28),y(1,Ms,3,5,"button",252),i()),a&2&&(l(),m("ngForOf",It(1,wo)))}function As(a,t){a&1&&(n(0,"div",239)(1,"div",39)(2,"div",236),v(),n(3,"svg",237),u(4,"circle",42)(5,"path",43),i()(),b(),n(6,"p",45),o(7,"Loading related assets..."),i()()())}function Ts(a,t){if(a&1){let e=E();n(0,"div",240)(1,"div",230),o(2),i(),n(3,"button",148),_("click",function(){g(e);let s=d(2);return h(s.loadRelatedAssets())}),o(4," Try Again "),i()()}if(a&2){let e=d(2);l(2),S(e.relatedAssetsError)}}function Ds(a,t){if(a&1){let e=E();n(0,"img",267),_("error",function(s){g(e);let c=d(4);return h(c.onImageError(s))}),i()}if(a&2){let e=d().$implicit;m("src",e.images[0].image_url,K)("alt",e.name)}}function Is(a,t){a&1&&(v(),n(0,"svg",268),u(1,"path",269),i())}function Vs(a,t){if(a&1&&(n(0,"span",215),o(1),i()),a&2){let e=d().$implicit;l(),M(" Health: ",e.health_score,"% ")}}function Ps(a,t){if(a&1){let e=E();n(0,"div",257),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.navigateToRelatedAsset(s.id))}),n(1,"div",258),y(2,Ds,1,2,"img",259)(3,Is,2,0,"svg",260),i(),n(4,"div",261)(5,"div",245)(6,"h4",262),o(7),i(),n(8,"span",215),o(9),i()(),n(10,"div",263)(11,"span",170),o(12),i(),n(13,"span",264),o(14,"\u2022"),i(),n(15,"span",170),o(16),i()(),n(17,"div",7)(18,"span",265),o(19),i(),y(20,Vs,2,1,"span",174),i()(),v(),n(21,"svg",266),u(22,"path",10),i()()}if(a&2){let e=t.$implicit,r=d(3);l(2),m("ngIf",e.images&&e.images.length>0),l(),m("ngIf",!e.images||e.images.length===0),l(4),S(e.name),l(2),S(e.asset_id),l(3),S((e.category==null?null:e.category.name)||"General"),l(4),S((e.asset_type==null?null:e.asset_type.name)||e.type),l(2),m("ngClass",r.getRelatedAssetStatusColor(e.asset_status||e.status)),l(),M(" ",(e.asset_status==null?null:e.asset_status.name)||e.status," "),l(),m("ngIf",e.health_score)}}function Ls(a,t){a&1&&(n(0,"div",240),v(),n(1,"svg",251),u(2,"path",269),i(),b(),n(3,"h3",44),o(4,"No Related Assets"),i(),n(5,"p",192),o(6,"No related assets found for this item."),i()())}function Fs(a,t){if(a&1&&(n(0,"div",255),y(1,Ps,23,9,"div",256)(2,Ls,7,0,"div",145),i()),a&2){let e=d(2);l(),m("ngForOf",e.relatedAssets),l(),m("ngIf",e.relatedAssets.length===0)}}function Os(a,t){a&1&&(n(0,"div",270)(1,"div",271),v(),n(2,"svg",272),u(3,"circle",42)(4,"path",43),i()(),b(),n(5,"p",250),o(6,"Loading..."),i()())}function Hs(a,t){if(a&1&&(n(0,"div",284),o(1),i()),a&2){let e=d().$implicit;l(),M(" ",e.notes," ")}}function js(a,t){if(a&1){let e=E();n(0,"div",274)(1,"div",275)(2,"h4",276),o(3),i(),n(4,"div",277)(5,"span"),o(6),i(),n(7,"button",278),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.editMaintenanceSchedule(s))}),v(),n(8,"svg",63),u(9,"path",15),i()(),b(),n(10,"button",279),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.deleteMaintenanceSchedule(s))}),v(),n(11,"svg",63),u(12,"path",280),i()()()(),b(),n(13,"div",281)(14,"div")(15,"span",192),o(16,"Next Due:"),i(),n(17,"span",282),o(18),i()(),n(19,"div")(20,"span",192),o(21,"Frequency:"),i(),n(22,"span",282),o(23),i()()(),y(24,Hs,2,1,"div",283),i()}if(a&2){let e=t.$implicit,r=d(3);l(3),S(e.schedule_type),l(2),se("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+r.getScheduleStatusColor(e.status)+"-100 text-"+r.getScheduleStatusColor(e.status)+"-800"),l(),M(" ",e.status," "),l(12),S(r.formatDate(e.next_due)),l(5),S(e.frequency||"Not specified"),l(),m("ngIf",e.notes)}}function Ns(a,t){if(a&1&&(n(0,"div",255),y(1,js,25,7,"div",273),i()),a&2){let e=d(2);l(),m("ngForOf",e.maintenanceSchedules)}}function Rs(a,t){if(a&1){let e=E();n(0,"div",270),v(),n(1,"svg",285),u(2,"path",91),i(),b(),n(3,"h3",286),o(4,"No Maintenance Schedules"),i(),n(5,"p",287),o(6,"Create maintenance schedules to track asset upkeep."),i(),n(7,"button",288),_("click",function(){g(e);let s=d(2);return h(s.addMaintenanceSchedule())}),o(8," Add First Schedule "),i()()}}function Bs(a,t){if(a&1&&(n(0,"span",215),o(1),de(2,"date"),i()),a&2){let e=d(2);l(),M(" (Expires: ",Ue(2,1,e.asset.warranty,"MMM d, y"),") ")}}function Gs(a,t){if(a&1){let e=E();n(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",5)(4,"div",54),v(),n(5,"svg",55),u(6,"path",56),i()(),b(),n(7,"div")(8,"h1",57),o(9),i(),n(10,"div",5),y(11,Mo,2,5,"span",58),n(12,"span",59),o(13),i(),n(14,"span",59),o(15,"\u2022"),i(),n(16,"span",59),o(17),i()()()(),n(18,"div",60)(19,"div",61)(20,"span",45),o(21,"Asset ID:"),i(),n(22,"button",62),_("click",function(){g(e);let s=d();return h(s.copyAssetId())}),n(23,"span"),o(24),i(),v(),n(25,"svg",63),u(26,"path",33),i()()(),y(27,ko,8,1,"div",64),i()()(),b(),n(28,"div",65)(29,"div",66)(30,"div",67)(31,"div",68),v(),n(32,"svg",69),u(33,"path",70),i(),b(),n(34,"h2",71),o(35,"Asset Images"),i()(),y(36,Vo,9,7,"div",72)(37,Po,7,0,"ng-template",null,0,Pt),i(),n(39,"div",67)(40,"div",73),v(),n(41,"svg",69),u(42,"path",74),i(),b(),n(43,"h2",71),o(44,"Basic Information"),i()(),n(45,"div",65)(46,"div",75)(47,"div")(48,"h4",76),o(49,"Asset Name"),i(),n(50,"p",71),o(51),i()(),n(52,"div")(53,"h4",76),o(54,"Description"),i(),n(55,"div",77)(56,"p",78),o(57),i(),y(58,Lo,2,1,"button",79),i()(),n(59,"div")(60,"h4",76),o(61,"Category"),i(),n(62,"div",12)(63,"div",80),y(64,Fo,1,2,"img",81)(65,Oo,2,0,"svg",82),i(),n(66,"span",11),o(67),i()()(),n(68,"div")(69,"h4",76),o(70,"Status"),i(),y(71,Ho,3,5,"div",64)(72,jo,2,0,"span",83),i()(),n(73,"div",75)(74,"div")(75,"h4",76),o(76,"Asset ID"),i(),n(77,"div",7)(78,"span",84),o(79),i(),n(80,"button",85),_("click",function(){g(e);let s=d();return h(s.copyAssetId())}),v(),n(81,"svg",14),u(82,"path",33),i()()()(),b(),n(83,"div")(84,"h4",76),o(85,"Location"),i(),n(86,"div",7),v(),n(87,"svg",86),u(88,"path",87)(89,"path",88),i(),y(90,No,2,4,"a",89)(91,Ro,2,1,"span",83),i()(),b(),n(92,"div")(93,"h4",76),o(94,"Department"),i(),n(95,"span",90),o(96),i()(),n(97,"div")(98,"h4",76),o(99,"Created"),i(),n(100,"div",7),v(),n(101,"svg",86),u(102,"path",91),i(),b(),n(103,"span",90),o(104),de(105,"date"),i()()(),n(106,"div")(107,"h4",76),o(108,"Last Modified"),i(),n(109,"div",7),v(),n(110,"svg",86),u(111,"path",92),i(),b(),n(112,"span",90),o(113),de(114,"date"),i()()(),y(115,Bo,5,5,"div",93),i(),n(116,"div",75)(117,"div")(118,"h4",76),o(119,"QR Code"),i(),n(120,"div",94)(121,"div",95),y(122,Go,1,1,"img",96)(123,zo,1,1,"img",96)(124,$o,2,0,"div",97)(125,Uo,5,1,"div",98)(126,Wo,5,0,"div",99),i(),n(127,"div",100),y(128,Yo,2,0,"button",101)(129,qo,2,0,"button",102),i(),n(130,"div",103)(131,"p"),o(132,"Scan to access public page"),i()()()(),n(133,"div")(134,"h4",76),o(135,"Barcode"),i(),n(136,"div",94)(137,"div",104),y(138,Qo,1,1,"img",105)(139,Jo,1,1,"img",105)(140,Ko,2,0,"div",106)(141,Zo,5,1,"div",107)(142,Xo,5,0,"div",108),i(),n(143,"div",100),y(144,es,2,0,"button",101)(145,ts,2,0,"button",102),i(),n(146,"div",103)(147,"p"),o(148,"Scan for asset identification"),i(),y(149,ns,2,1,"p",109),i()()()()()(),n(150,"div",67)(151,"div",68),v(),n(152,"svg",69),u(153,"path",110),i(),b(),n(154,"h2",71),o(155,"Technical Specifications"),i()(),n(156,"div",111)(157,"div",112)(158,"div")(159,"h4",113),o(160,"Asset Status"),i(),y(161,rs,4,6,"div",64)(162,as,2,0,"span",83),i(),n(163,"div")(164,"h4",113),o(165,"Manufacturer"),i(),n(166,"span",90),o(167),i()(),n(168,"div")(169,"h4",113),o(170,"Model"),i(),n(171,"span",90),o(172),i()(),y(173,os,9,1,"div",93),n(174,"div")(175,"h4",113),o(176,"Brand"),i(),n(177,"span",90),o(178),i()(),n(179,"div")(180,"h4",113),o(181,"Capacity"),i(),n(182,"span",90),o(183),i()()(),n(184,"div",112)(185,"div")(186,"h4",113),o(187,"Dimensions"),i(),n(188,"span",90),o(189),i()(),n(190,"div")(191,"h4",113),o(192,"Weight"),i(),n(193,"span",90),o(194),i()(),n(195,"div")(196,"h4",113),o(197,"Power Requirements"),i(),n(198,"span",90),o(199),i()(),n(200,"div")(201,"h4",113),o(202,"Operating Conditions"),i(),n(203,"span",90),o(204),i()()()(),y(205,ls,6,3,"div",114),i(),n(206,"div",67)(207,"div",115)(208,"div",7)(209,"div",116),v(),n(210,"svg",117),u(211,"path",118),i()(),b(),n(212,"h2",71),o(213,"Health & Performance"),i()(),n(214,"div",7)(215,"button",119),_("click",function(){g(e);let s=d();return h(s.refreshHealthPerformanceChart())}),v(),n(216,"svg",14),u(217,"path",120),i(),b(),n(218,"span"),o(219,"Refresh"),i()(),n(220,"button",121),_("click",function(){g(e);let s=d();return h(s.forceCreateHealthPerformanceChart())}),v(),n(221,"svg",14),u(222,"path",122),i(),b(),n(223,"span"),o(224,"Debug"),i()()()(),y(225,cs,16,3,"div",123),n(226,"div",112)(227,"div",39)(228,"h3",124),o(229,"Health & Performance Timeline (Last 12 Months)"),i()(),y(230,ds,8,0,"div",125)(231,ms,6,1,"div",126)(232,ps,2,0,"div",127)(233,us,2,0,"div",128)(234,fs,11,6,"div",129),i()(),n(235,"div",67)(236,"div",130)(237,"div",7)(238,"div",131),v(),n(239,"svg",132),u(240,"path",133),i()(),b(),n(241,"h2",71),o(242,"Asset Depreciation"),i()(),n(243,"div",7)(244,"button",134),_("click",function(){g(e);let s=d();return h(s.refreshDepreciationChart())}),v(),n(245,"svg",14),u(246,"path",120),i(),b(),n(247,"span"),o(248,"Refresh"),i()(),n(249,"button",121),_("click",function(){g(e);let s=d();return h(s.forceCreateChart())}),v(),n(250,"svg",14),u(251,"path",122),i(),b(),n(252,"span"),o(253,"Debug"),i()()()(),n(254,"div",135)(255,"div",136)(256,"div",137),o(257,"Original Value"),i(),n(258,"div",138),o(259),i()(),n(260,"div",139)(261,"div",137),o(262,"Current Value"),i(),n(263,"div",140),o(264),i()()(),n(265,"div",112)(266,"div",39)(267,"h3",124),o(268,"Depreciation Timeline (straight-line method)"),i()(),y(269,gs,8,0,"div",125)(270,hs,6,1,"div",126)(271,_s,2,0,"div",127)(272,vs,2,0,"div",128),n(273,"div",141)(274,"div",142)(275,"div",143),o(276,"Annual Depreciation"),i(),n(277,"div",71),o(278),i()(),n(279,"div",142)(280,"div",143),o(281,"Depreciation Rate"),i(),n(282,"div",71),o(283),i()(),n(284,"div",142)(285,"div",143),o(286,"Years Remaining"),i(),n(287,"div",71),o(288),i()()()()()(),n(289,"div",75)(290,"div",67)(291,"div",68),v(),n(292,"svg",69),u(293,"path",92),i(),b(),n(294,"h2",71),o(295,"Recent Activity"),i()(),y(296,xs,8,0,"div",144)(297,bs,5,1,"div",145)(298,Es,3,2,"div",146),n(299,"div",147)(300,"button",148),_("click",function(){g(e);let s=d();return h(s.showFullActivityHistory())}),o(301," View Full Activity History "),i()()(),n(302,"div",67)(303,"div",130)(304,"div",7),v(),n(305,"svg",69),u(306,"path",149),i(),b(),n(307,"h2",71),o(308,"Related Assets"),i()(),n(309,"div",77)(310,"button",150),_("click",function(){g(e);let s=d();return h(s.showRelatedFilterDropdown=!s.showRelatedFilterDropdown)}),n(311,"span"),o(312),i(),v(),n(313,"svg",14),u(314,"path",151),i()(),y(315,ks,2,2,"div",22),i()(),y(316,As,8,0,"div",144)(317,Ts,5,1,"div",145)(318,Fs,3,2,"div",152),i(),b(),n(319,"div",67)(320,"div",130)(321,"div",7),v(),n(322,"svg",69),u(323,"path",91),i(),b(),n(324,"h2",71),o(325,"Maintenance Schedule"),i()(),n(326,"button",121),_("click",function(){g(e);let s=d();return h(s.addMaintenanceSchedule())}),v(),n(327,"svg",14),u(328,"path",153),i(),b(),n(329,"span"),o(330,"Add"),i()()(),n(331,"div",154)(332,"div",155)(333,"div",7),v(),n(334,"svg",156),u(335,"path",122),i(),b(),n(336,"div")(337,"div",157),o(338,"Last Maintenance"),i(),n(339,"div",158),o(340),i()()()(),n(341,"div",139)(342,"div",7),v(),n(343,"svg",159),u(344,"path",92),i(),b(),n(345,"div")(346,"div",160),o(347,"Next Due"),i(),n(348,"div",161),o(349),i()()()(),n(350,"div",162)(351,"div",7),v(),n(352,"svg",163),u(353,"path",120),i(),b(),n(354,"div")(355,"div",164),o(356,"Frequency"),i(),n(357,"div",165),o(358),i()()()()(),y(359,Os,7,0,"div",166)(360,Ns,2,1,"div",152)(361,Rs,9,0,"div",166),i(),n(362,"div",67)(363,"div",68),v(),n(364,"svg",69),u(365,"path",167),i(),b(),n(366,"h2",71),o(367,"Financial Information"),i()(),n(368,"div",112)(369,"div",136)(370,"h4",168),o(371,"Purchase Details"),i(),n(372,"div",169)(373,"div")(374,"span",170),o(375,"Purchase Price"),i(),n(376,"div",71),o(377),de(378,"currency"),i()(),n(379,"div")(380,"span",170),o(381,"Purchase Date"),i(),n(382,"div",171),o(383),de(384,"date"),i()()()(),n(385,"div",139)(386,"h4",168),o(387,"Current Value"),i(),n(388,"div",169)(389,"div")(390,"span",170),o(391,"Book Value"),i(),n(392,"div",71),o(393),de(394,"currency"),i()(),n(395,"div")(396,"span",170),o(397,"Market Value"),i(),n(398,"div",171),o(399),de(400,"currency"),i()()()(),n(401,"div",172)(402,"h4",168),o(403,"Depreciation"),i(),n(404,"div",169)(405,"div")(406,"span",170),o(407,"Method"),i(),n(408,"div",171),o(409),i()(),n(410,"div")(411,"span",170),o(412,"Useful Life"),i(),n(413,"div",171),o(414),i()(),n(415,"div")(416,"span",170),o(417,"Annual Rate"),i(),n(418,"div",171),o(419),i()()()(),n(420,"div",155)(421,"h4",168),o(422,"Performance"),i(),n(423,"div",169)(424,"div")(425,"span",170),o(426,"Total Cost of Ownership"),i(),n(427,"div",71),o(428),de(429,"currency"),i()(),n(430,"div")(431,"span",170),o(432,"ROI"),i(),n(433,"div",171),o(434),i()()()(),n(435,"div",162)(436,"h4",168),o(437,"Warranty & Insurance"),i(),n(438,"div",169)(439,"div")(440,"span",170),o(441,"Warranty Status"),i(),n(442,"div",173)(443,"span"),o(444),i(),y(445,Bs,3,4,"span",174),i()(),n(446,"div")(447,"span",170),o(448,"Insurance Value"),i(),n(449,"div",171),o(450),i()()()()()()()()()}if(a&2){let e=tt(38),r=d();l(6),Dt("d",r.getAssetTypeIcon()),l(3),S(r.asset.name),l(2),m("ngIf",r.asset.asset_status),l(2),S(r.getAssetTypeName(r.asset.type)),l(4),S((r.asset.category==null?null:r.asset.category.name)||"General"),l(7),S(r.asset.asset_id||r.asset.id),l(3),m("ngIf",r.asset.serial_number),l(9),m("ngIf",r.asset.images&&r.asset.images.length>0)("ngIfElse",e),l(15),S((r.asset==null?null:r.asset.name)||"Unnamed Asset"),l(5),k("line-clamp-3",!r.descriptionExpanded),l(),M(" ",(r.asset==null?null:r.asset.description)||"No description available"," "),l(),m("ngIf",(r.asset==null?null:r.asset.description)&&r.asset.description.length>150),l(6),m("ngIf",(r.asset==null||r.asset.category==null?null:r.asset.category.icon)&&!r.asset.category.iconError),l(),m("ngIf",!(!(r.asset==null||r.asset.category==null)&&r.asset.category.icon)||r.asset.category.iconError),l(2),S((r.asset==null||r.asset.category==null?null:r.asset.category.name)||"Uncategorized"),l(4),m("ngIf",r.asset.asset_status),l(),m("ngIf",!r.asset.asset_status),l(7),S((r.asset==null?null:r.asset.asset_id)||"N/A"),l(11),m("ngIf",r.asset==null||r.asset.location==null?null:r.asset.location.id),l(),m("ngIf",!(!(r.asset==null||r.asset.location==null)&&r.asset.location.id)),l(5),S((r.asset==null||r.asset.department==null?null:r.asset.department.name)||"Not assigned"),l(8),S(Ue(105,100,r.asset==null?null:r.asset.created_at,"MMM d, y")),l(9),S(Ue(114,103,r.asset==null?null:r.asset.updated_at,"MMM d, y")),l(2),m("ngIf",r.asset==null?null:r.asset.parent),l(7),m("ngIf",r.qrCodeDataUrl),l(),m("ngIf",!r.qrCodeDataUrl&&(r.asset==null?null:r.asset.qr_code_url)),l(),m("ngIf",r.qrCodeLoading),l(),m("ngIf",!r.qrCodeDataUrl&&!(r.asset!=null&&r.asset.qr_code_url)&&!r.qrCodeLoading&&(r.asset==null?null:r.asset.id)),l(),m("ngIf",!r.qrCodeDataUrl&&!(r.asset!=null&&r.asset.qr_code_url)&&!r.qrCodeLoading&&!(r.asset!=null&&r.asset.id)),l(2),m("ngIf",r.asset==null?null:r.asset.id),l(),m("ngIf",r.asset==null?null:r.asset.id),l(9),m("ngIf",r.asset==null?null:r.asset.barcode_url),l(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&r.barcodeDataUrl),l(),m("ngIf",r.barcodeLoading),l(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&!r.barcodeDataUrl&&!r.barcodeLoading&&(r.asset==null?null:r.asset.asset_id)),l(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&!r.barcodeDataUrl&&!r.barcodeLoading&&!(r.asset!=null&&r.asset.asset_id)),l(2),m("ngIf",r.asset==null?null:r.asset.asset_id),l(),m("ngIf",r.asset==null?null:r.asset.asset_id),l(4),m("ngIf",r.asset==null?null:r.asset.asset_id),l(12),m("ngIf",r.asset.asset_status),l(),m("ngIf",!r.asset.asset_status),l(5),S(r.asset.manufacturer||"Not specified"),l(5),S(r.asset.model||"Not specified"),l(),m("ngIf",r.asset.serial_number),l(5),S(r.asset.brand||"Not specified"),l(5),S(r.asset.capacity||"Not specified"),l(6),S(r.asset.dimensions||"Not specified"),l(5),S(r.asset.weight||"Not specified"),l(5),S(r.asset.power_requirements||"Not specified"),l(5),S(r.asset.operating_conditions||"Standard conditions"),l(),m("ngIf",r.asset.specifications),l(20),m("ngIf",r.healthPerformanceChartData==null||r.healthPerformanceChartData.chart_data==null?null:r.healthPerformanceChartData.chart_data.metrics),l(5),m("ngIf",r.healthPerformanceChartLoading),l(),m("ngIf",r.healthPerformanceChartError&&!r.healthPerformanceChartLoading),l(),m("ngIf",!r.healthPerformanceChartLoading&&!r.healthPerformanceChartError),l(),m("ngIf",!r.healthPerformanceChartLoading&&!r.healthPerformanceChartError),l(),m("ngIf",r.healthPerformanceChartData==null||r.healthPerformanceChartData.chart_data==null?null:r.healthPerformanceChartData.chart_data.metrics),l(25),M("$",r.formatCurrency((r.asset==null?null:r.asset.purchase_price)||0),""),l(5),M("$",r.formatCurrency(r.calculateCurrentValue()),""),l(5),m("ngIf",r.depreciationChartLoading),l(),m("ngIf",r.depreciationChartError&&!r.depreciationChartLoading),l(),m("ngIf",!r.depreciationChartLoading&&!r.depreciationChartError),l(),m("ngIf",!r.depreciationChartLoading&&!r.depreciationChartError),l(6),M("$",r.formatCurrency(r.calculateAnnualDepreciation())," "),l(5),M("",r.calculateDepreciationRate(),"%"),l(5),S(r.calculateRemainingYears()),l(8),m("ngIf",r.activityLoading),l(),m("ngIf",r.activityError&&!r.activityLoading),l(),m("ngIf",!r.activityLoading&&!r.activityError),l(14),S(r.getRelatedFilterDisplayName(r.selectedRelatedFilter)),l(3),m("ngIf",r.showRelatedFilterDropdown),l(),m("ngIf",r.relatedAssetsLoading),l(),m("ngIf",r.relatedAssetsError&&!r.relatedAssetsLoading),l(),m("ngIf",!r.relatedAssetsLoading&&!r.relatedAssetsError),l(22),M("",r.mockMaintenanceData.lastMaintenance||"Not recorded"," "),l(9),M("",r.mockMaintenanceData.nextMaintenance||"Not scheduled"," "),l(9),S(r.mockMaintenanceData.interval),l(),m("ngIf",r.maintenanceLoading),l(),m("ngIf",!r.maintenanceLoading&&r.maintenanceSchedules.length>0),l(),m("ngIf",!r.maintenanceLoading&&r.maintenanceSchedules.length===0),l(16),M(" ",gt(378,106,r.mockFinancialData.purchaseCost,"USD","symbol","1.2-2")," "),l(6),S(Ue(384,111,r.asset.purchase_date,"MMM d, y")),l(10),M(" ",gt(394,114,r.mockFinancialData.currentValue,"USD","symbol","1.2-2")," "),l(6),M("",gt(400,119,r.mockFinancialData.currentValue*.95,"USD","symbol","1.2-2")," "),l(10),S(r.mockFinancialData.depreciationMethod),l(5),M("",r.mockFinancialData.usefulLife," years"),l(5),M("",r.calculateDepreciationRate(),"%"),l(9),M(" ",gt(429,124,r.calculateTotalCostOfOwnership(),"USD","symbol","1.2-2")," "),l(5),k("text-green-600",r.calculateROI()>0)("text-red-600",r.calculateROI()<0),l(),M(" ",r.calculateROI(),"% "),l(9),se(r.getWarrantyStatusClass(r.asset.warranty)),l(),M(" ",r.getWarrantyStatus(r.asset.warranty)," "),l(),m("ngIf",r.asset.warranty),l(5),S(r.asset.insurance_value||"Not specified")}}function zs(a,t){a&1&&(o(0," Saving Schedule... "),u(1,"span",314))}function $s(a,t){a&1&&o(0," Save Schedule ")}function Us(a,t){if(a&1){let e=E();n(0,"div",289)(1,"div",290)(2,"div",130)(3,"h3",71),o(4,"Add Maintenance Schedule"),i(),n(5,"button",291),_("click",function(){g(e);let s=d();return h(s.closeMaintenanceModals())}),v(),n(6,"svg",292),u(7,"path",293),i()()(),b(),n(8,"form",294),_("ngSubmit",function(){g(e);let s=d();return h(s.saveMaintenanceSchedule())}),n(9,"div",112)(10,"div")(11,"label",295),o(12,"Schedule Type"),i(),n(13,"select",296)(14,"option",297),o(15,"Select type"),i(),n(16,"option",298),o(17,"Preventive Maintenance"),i(),n(18,"option",299),o(19,"Inspection"),i(),n(20,"option",300),o(21,"Calibration"),i(),n(22,"option",301),o(23,"Cleaning"),i()()(),n(24,"div")(25,"label",295),o(26,"Next Due Date"),i(),u(27,"input",302,1),i(),n(29,"div")(30,"label",295),o(31,"Last Done Date"),i(),u(32,"input",303,1),i(),n(34,"div")(35,"label",295),o(36,"Frequency"),i(),n(37,"select",304)(38,"option",297),o(39,"Select frequency"),i(),n(40,"option",305),o(41,"Weekly"),i(),n(42,"option",306),o(43,"Monthly"),i(),n(44,"option",307),o(45,"Quarterly"),i(),n(46,"option",308),o(47,"Semi-Annual"),i(),n(48,"option",309),o(49,"Annual"),i()()(),n(50,"div")(51,"label",295),o(52,"Notes"),i(),u(53,"textarea",310),i()(),n(54,"div",311)(55,"button",312),_("click",function(){g(e);let s=d();return h(s.closeMaintenanceModals())}),o(56," Cancel "),i(),n(57,"button",313),y(58,zs,2,0)(59,$s,1,0),i()()()()()}if(a&2){let e=d();l(8),m("formGroup",e.maintenanceForm),l(49),m("disabled",e.maintenanceForm.invalid),l(),xn(e.saveMaintenanceLoading?58:59)}}function Ws(a,t){a&1&&(o(0," Updating Schedule... "),u(1,"span",314))}function Ys(a,t){a&1&&o(0," Update Schedule ")}function qs(a,t){if(a&1){let e=E();n(0,"div",289)(1,"div",315)(2,"div",130)(3,"h3",71),o(4,"Edit Maintenance Schedule"),i(),n(5,"button",291),_("click",function(){g(e);let s=d();return h(s.closeMaintenanceModals())}),v(),n(6,"svg",292),u(7,"path",293),i()()(),b(),n(8,"form",294),_("ngSubmit",function(){g(e);let s=d();return h(s.saveMaintenanceSchedule())}),n(9,"div",112)(10,"div")(11,"label",295),o(12,"Schedule Type"),i(),n(13,"select",296)(14,"option",297),o(15,"Select type"),i(),n(16,"option",298),o(17,"Preventive Maintenance"),i(),n(18,"option",299),o(19,"Inspection"),i(),n(20,"option",300),o(21,"Calibration"),i(),n(22,"option",301),o(23,"Cleaning"),i()()(),n(24,"div")(25,"label",295),o(26,"Next Due Date"),i(),u(27,"input",302,1),i(),n(29,"div")(30,"label",295),o(31,"Last Done Date"),i(),u(32,"input",303,1),i(),n(34,"div")(35,"label",295),o(36,"Frequency"),i(),n(37,"select",304)(38,"option",297),o(39,"Select frequency"),i(),n(40,"option",305),o(41,"Weekly"),i(),n(42,"option",306),o(43,"Monthly"),i(),n(44,"option",307),o(45,"Quarterly"),i(),n(46,"option",308),o(47,"Semi-Annual"),i(),n(48,"option",309),o(49,"Annual"),i()()(),n(50,"div")(51,"label",295),o(52,"Status"),i(),n(53,"select",316)(54,"option",317),o(55,"Scheduled"),i(),n(56,"option",318),o(57,"In Progress"),i(),n(58,"option",319),o(59,"Completed"),i(),n(60,"option",320),o(61,"Overdue"),i()()(),n(62,"div")(63,"label",295),o(64,"Notes"),i(),u(65,"textarea",310),i()(),n(66,"div",311)(67,"button",321),_("click",function(){g(e);let s=d();return h(s.closeMaintenanceModals())}),o(68," Cancel "),i(),n(69,"button",313),y(70,Ws,2,0)(71,Ys,1,0),i()()()()()}if(a&2){let e=d();l(8),m("formGroup",e.maintenanceForm),l(61),m("disabled",e.maintenanceForm.invalid),l(),xn(e.saveMaintenanceLoading?70:71)}}function Qs(a,t){a&1&&(n(0,"div",350)(1,"div",39)(2,"div",351),v(),n(3,"svg",352),u(4,"circle",42)(5,"path",43),i()(),b(),n(6,"p",59),o(7,"Loading activity history..."),i()()())}function Js(a,t){if(a&1){let e=E();n(0,"div",353)(1,"div",354),o(2),i(),n(3,"button",50),_("click",function(){g(e);let s=d(2);return h(s.loadFullActivityHistory())}),o(4," Try Again "),i()()}if(a&2){let e=d(2);l(2),S(e.activityHistoryError)}}function Ks(a,t){if(a&1&&(n(0,"div",364)(1,"div",365),o(2,"Changes:"),i(),n(3,"div",192),o(4),i()()),a&2){let e=d().$implicit,r=d(3);l(4),M(" ",r.formatActivityBeforeAfter(e.before,e.after)," ")}}function Zs(a,t){if(a&1&&(n(0,"div",366)(1,"strong"),o(2,"By:"),i(),o(3),i()),a&2){let e=d().$implicit,r=d(3);l(3),M(" ",r.getUserDisplayName(e.user)," ")}}function Xs(a,t){if(a&1&&(n(0,"div",357)(1,"div",358),v(),n(2,"svg",18),u(3,"path",56),i()(),b(),n(4,"div",244)(5,"div",275)(6,"h4",359),o(7),i(),n(8,"span",360),o(9),i()(),n(10,"p",361),o(11),i(),y(12,Ks,5,1,"div",362)(13,Zs,4,1,"div",363),i()()),a&2){let e=t.$implicit,r=d(3);l(),m("ngClass",r.getActivityColor(e.action)),l(2),Dt("d",r.getActivityIcon(e.action)),l(4),S(e.action),l(2),S(e.time_ago),l(2),S(e.comment||"No comment"),l(),m("ngIf",r.formatActivityBeforeAfter(e.before,e.after)),l(),m("ngIf",e.user)}}function el(a,t){a&1&&(n(0,"div",353),v(),n(1,"svg",191),u(2,"path",92),i(),b(),n(3,"h3",44),o(4,"No Activity Found"),i(),n(5,"p",192),o(6,"No activity matches your current filters."),i()())}function tl(a,t){if(a&1&&(n(0,"div",355),y(1,Xs,14,7,"div",356)(2,el,7,0,"div",345),i()),a&2){let e=d(2);l(),m("ngForOf",e.fullActivityHistory),l(),m("ngIf",e.fullActivityHistory.length===0)}}function nl(a,t){if(a&1){let e=E();n(0,"button",370),_("click",function(){g(e);let s=d(3);return h(s.onActivityHistoryPageChange(s.activityHistoryPagination.current_page-1))}),o(1," Previous "),i()}}function il(a,t){if(a&1){let e=E();n(0,"button",370),_("click",function(){g(e);let s=d(3);return h(s.onActivityHistoryPageChange(s.activityHistoryPagination.current_page+1))}),o(1," Next "),i()}}function rl(a,t){if(a&1&&(n(0,"div",367)(1,"div",143),o(2),i(),n(3,"div",368),y(4,nl,2,0,"button",369)(5,il,2,0,"button",369),i()()),a&2){let e=d(2);l(2),Bn(" Showing ",e.activityHistoryPagination.from||0," to ",e.activityHistoryPagination.to||0," of ",e.activityHistoryPagination.total||0," activities "),l(2),m("ngIf",e.activityHistoryPagination.prev_page_url),l(),m("ngIf",e.activityHistoryPagination.next_page_url)}}function al(a,t){if(a&1){let e=E();n(0,"div",322)(1,"div",323)(2,"div",324)(3,"div",12),v(),n(4,"svg",325),u(5,"path",92),i(),b(),n(6,"h3",326),o(7,"Full Activity History"),i()(),n(8,"button",291),_("click",function(){g(e);let s=d();return h(s.closeActivityHistoryModal())}),v(),n(9,"svg",292),u(10,"path",293),i()()(),b(),n(11,"div",327)(12,"div",328)(13,"div",329)(14,"div",244)(15,"input",330),_("input",function(s){g(e);let c=d();return h(c.onActivityHistorySearch(s.target.value))}),i()(),n(16,"button",331),_("click",function(){g(e);let s=d();return h(s.clearActivityHistoryFilters())}),o(17," Clear Filters "),i()(),n(18,"div",332)(19,"div")(20,"label",333),o(21,"Action Type"),i(),n(22,"select",334),_("change",function(s){g(e);let c=d();return h(c.onActivityHistoryFilter("action",s.target.value))}),n(23,"option",297),o(24,"All Actions"),i(),n(25,"option",335),o(26,"Created"),i(),n(27,"option",336),o(28,"Updated"),i(),n(29,"option",337),o(30,"Deleted"),i(),n(31,"option",338),o(32,"Transferred"),i(),n(33,"option",339),o(34,"Maintenance"),i(),n(35,"option",340),o(36,"Imported"),i()()(),n(37,"div")(38,"label",333),o(39,"Date From"),i(),n(40,"input",341),_("change",function(s){g(e);let c=d();return h(c.onActivityHistoryFilter("date_from",s.target.value))}),i()(),n(41,"div")(42,"label",333),o(43,"Date To"),i(),n(44,"input",341),_("change",function(s){g(e);let c=d();return h(c.onActivityHistoryFilter("date_to",s.target.value))}),i()(),n(45,"div")(46,"label",333),o(47,"Sort By"),i(),n(48,"select",334),_("change",function(s){g(e);let c=d();return h(c.onActivityHistorySort("created_at",s.target.value))}),n(49,"option",342),o(50,"Newest First"),i(),n(51,"option",343),o(52,"Oldest First"),i()()()()(),y(53,Qs,8,0,"div",344)(54,Js,5,1,"div",345)(55,tl,3,2,"div",346)(56,rl,6,5,"div",347),i(),n(57,"div",348)(58,"div",143),o(59),i(),n(60,"button",349),_("click",function(){g(e);let s=d();return h(s.closeActivityHistoryModal())}),o(61," Close "),i()()()()}if(a&2){let e=d();l(53),m("ngIf",e.activityHistoryLoading),l(),m("ngIf",e.activityHistoryError&&!e.activityHistoryLoading),l(),m("ngIf",!e.activityHistoryLoading&&!e.activityHistoryError),l(),m("ngIf",e.activityHistoryPagination&&e.fullActivityHistory.length>0),l(3),M(" Total Activities: ",(e.activityHistoryPagination==null?null:e.activityHistoryPagination.total)||e.fullActivityHistory.length," ")}}Qt.register(...Zn);var ct=class a{constructor(t,e,r,s,c,x,I){this.route=t;this.router=e;this.assetService=r;this.angularLocation=s;this.pdfExportService=c;this.fb=x;this.cdr=I;this.maintenanceForm=this.fb.group({schedule_type:["",Te.required],next_due:[""],last_done:[""],frequency:[""],notes:[""],status:["Scheduled"]}),this.activities=[],this.fullActivityHistory=[]}destroy$=new He;dateInputs;asset=null;loading=!0;saveMaintenanceLoading=!1;error="";currentImageIndex=0;selectedImageUrl=null;descriptionExpanded=!1;showActionsDropdown=!1;showTransferModal=!1;showActivityHistoryModal=!1;maintenanceSchedules=[];maintenanceLoading=!1;showAddMaintenanceModal=!1;showEditMaintenanceModal=!1;selectedSchedule=null;maintenanceForm;flatpickrInstances=[];healthMetrics={lastUpdated:new Date,performanceTrend:[{month:"Jan",value:82},{month:"Feb",value:84},{month:"Mar",value:88},{month:"Apr",value:85}]};mockFinancialData={purchaseCost:0,currentValue:0,depreciationMethod:"Straight Line",usefulLife:10,originalValue:0};mockMaintenanceData={status:"Current",lastMaintenance:null,nextMaintenance:null,interval:"Every 6 months"};activities=[];fullActivityHistory=[];activityLoading=!1;activityHistoryLoading=!1;activityError="";activityHistoryError="";activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""};activityHistoryPagination=null;qrCodeDataUrl=null;qrCodeLoading=!1;barcodeDataUrl=null;barcodeLoading=!1;relatedAssets=[];relatedAssetsLoading=!1;relatedAssetsError="";selectedRelatedFilter="all";showRelatedFilterDropdown=!1;relatedAssetsParams={type:"all",limit:10};depreciationChart=null;depreciationChartLoading=!1;depreciationChartError="";depreciationChartData=null;healthPerformanceChart=null;healthPerformanceChartLoading=!1;healthPerformanceChartError="";healthPerformanceChartData=null;ngOnInit(){this.route.params.pipe(R(this.destroy$)).subscribe(t=>{let e=t.id;e&&this.loadAsset(e)})}ngAfterViewInit(){this.initializeDatePickers(),setTimeout(()=>{this.asset&&!this.depreciationChart&&this.createDepreciationChart()},500)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.depreciationChart&&this.depreciationChart.destroy(),this.healthPerformanceChart&&this.healthPerformanceChart.destroy()}loadAsset(t){this.loading=!0,this.error="",this.assetService.getAsset(t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.updateMockData(),this.loadMaintenanceSchedules(),this.loadActivityHistory(),this.generateQRCode(),!this.asset.barcode_url&&this.asset.asset_id&&this.generateBarcode(),this.loadRelatedAssets(),this.loadDepreciationChart(),this.loadHealthPerformanceChart()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}loadMaintenanceSchedules(){this.asset&&(this.maintenanceLoading=!0,this.assetService.listMaintenanceSchedules(this.asset.id).pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&(this.maintenanceSchedules=t.data||[]),this.maintenanceLoading=!1},error:t=>{console.error("Error loading maintenance schedules:",t),this.maintenanceLoading=!1}}))}updateMockData(){this.asset&&(this.mockFinancialData={purchaseCost:this.asset.purchase_price||0,currentValue:this.asset.current_value||this.asset.purchase_price||0,depreciationMethod:"Straight Line",usefulLife:this.asset.depreciation||10,originalValue:this.asset.purchase_price||0},this.healthMetrics.lastUpdated=new Date,this.mockMaintenanceData={status:this.asset.status||"Active",lastMaintenance:this.asset.last_maintenance_date||null,nextMaintenance:this.asset.next_maintenance_date||null,interval:this.asset.maintenance_interval||"Every 6 months"},this.asset.images&&this.asset.images.length>0&&(this.selectedImageUrl=this.asset.images[0].image_url,this.currentImageIndex=0))}goBack(){this.angularLocation.back()}editAsset(){this.asset&&this.router.navigate(["/assets",this.asset.id,"edit"])}exportAsset(){this.asset&&this.pdfExportService.exportSingleAssetToPdf(this.asset)}printAsset(){let t=window.open("","_blank");if(!t){alert("Please allow popups to print this asset");return}let e=this.generatePrintContent();t.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Asset Details - ${this.asset?.name||"Asset"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
              .no-print { display: none !important; }
              .print-only { display: block !important; }
              .page-break { page-break-before: always; }
              .avoid-break { page-break-inside: avoid; }
              table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f8f9fa; font-weight: bold; }
              .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
              .section { margin-bottom: 25px; }
              .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
              .info-item { margin-bottom: 15px; }
              .info-label { font-weight: bold; color: #666; font-size: 14px; }
              .info-value { font-size: 16px; margin-top: 5px; }
              .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
              .qr-section { text-align: center; margin: 20px 0; }
              .qr-code { max-width: 200px; margin: 0 auto; }
              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #ddd; padding-top: 20px; }
              @page { margin: 1in; }
            }
            @media screen {
              body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
              .no-print { display: none; }
              .print-only { display: block; }
              .page-break { border-top: 2px solid #333; margin-top: 30px; padding-top: 30px; }
              .avoid-break { }
              table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f8f9fa; font-weight: bold; }
              .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
              .section { margin-bottom: 25px; }
              .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
              .info-item { margin-bottom: 15px; }
              .info-label { font-weight: bold; color: #666; font-size: 14px; }
              .info-value { font-size: 16px; margin-top: 5px; }
              .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
              .qr-section { text-align: center; margin: 20px 0; }
              .qr-code { max-width: 200px; margin: 0 auto; }
              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #ddd; padding-top: 20px; }
            }
          </style>
        </head>
        <body>
          ${e}
        </body>
      </html>
    `),t.document.close(),t.onload=()=>{t.print(),t.close()}}generatePrintContent(){if(!this.asset)return"<p>Asset not found</p>";let t=this.asset,e=new Date().toLocaleDateString();return`
      <div class="header">
        <h1>Asset Details Report</h1>
        <p>Generated on: ${e}</p>
      </div>

      <div class="section">
        <div class="section-title">Asset Overview</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Asset Name</div>
            <div class="info-value">${t.name||"N/A"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Asset ID</div>
            <div class="info-value">${t.asset_id||t.id||"N/A"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Category</div>
            <div class="info-value">${t.category?.name||"General"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Status</div>
            <div class="info-value">
              <span class="status-badge" style="background-color: ${t.asset_status?.color||"#6B7280"}20; color: ${t.asset_status?.color||"#6B7280"}">
                ${t.asset_status?.name||"Not specified"}
              </span>
            </div>
          </div>
          <div class="info-item">
            <div class="info-label">Type</div>
            <div class="info-value">${this.getAssetTypeName(t.type)}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Location</div>
            <div class="info-value">${t.location?.name||"No location assigned"}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Description</div>
        <p>${t.description||"No description available"}</p>
      </div>

      <div class="section">
        <div class="section-title">Technical Specifications</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Manufacturer</div>
            <div class="info-value">${t.manufacturer||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Model</div>
            <div class="info-value">${t.model||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Serial Number</div>
            <div class="info-value">${t.serial_number||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Brand</div>
            <div class="info-value">${t.brand||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Dimensions</div>
            <div class="info-value">${t.dimensions||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Weight</div>
            <div class="info-value">${t.weight||"Not specified"}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Financial Information</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Purchase Price</div>
            <div class="info-value">$${this.formatCurrency(t.purchase_price||0)}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Current Value</div>
            <div class="info-value">$${this.formatCurrency(this.calculateCurrentValue())}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Purchase Date</div>
            <div class="info-value">${t.purchase_date?new Date(t.purchase_date).toLocaleDateString():"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Warranty Status</div>
            <div class="info-value">${this.getWarrantyStatus(t.warranty)}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Performance Metrics</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Health Score</div>
            <div class="info-value">${t.health_score||0}%</div>
          </div>
          <div class="info-item">
            <div class="info-label">Utilization Rate</div>
            <div class="info-value">${this.getUtilizationRate()}%</div>
          </div>
          <div class="info-item">
            <div class="info-label">Asset Age</div>
            <div class="info-value">${this.getAssetAge()}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Total Cost of Ownership</div>
            <div class="info-value">$${this.formatCurrency(this.calculateTotalCostOfOwnership())}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Timeline Information</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Created Date</div>
            <div class="info-value">${t.created_at?new Date(t.created_at).toLocaleDateString():"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Last Modified</div>
            <div class="info-value">${t.updated_at?new Date(t.updated_at).toLocaleDateString():"Not specified"}</div>
          </div>
        </div>
      </div>

      <div class="qr-section">
        <div class="section-title">Asset Identification</div>
        <div class="qr-code">
          ${this.qrCodeDataUrl?`<img src="${this.qrCodeDataUrl}" alt="QR Code" style="max-width: 100%; height: auto;">`:"<p>QR Code not available</p>"}
        </div>
        <p><strong>Asset ID:</strong> ${t.asset_id||t.id||"N/A"}</p>
      </div>

      <div class="footer">
        <p>AssetGo - Asset Management System</p>
        <p>This report was generated automatically on ${e}</p>
      </div>
    `}getStatusColor(t){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[t]||"gray"}getAssetStatusColor(t){return!t||!t.color?"#6B7280":t.color}getAssetStatusBackgroundColor(t){return!t||!t.color?"#F3F4F6":t.color+"20"}getAssetTypeIcon(){if(!this.asset?.type)return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";let t={fixed:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4","semi-fixed":"M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4a2 2 0 001-1.73z",mobile:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",fleet:"M3 13l2-5a2 2 0 012-2h10a2 2 0 012 2l2 5M5 13v6a2 2 0 002 2h10a2 2 0 002-2v-6M5 13h14"};return t[this.asset.type]||t.fixed}generateSmartDescription(){console.log("Generate smart description")}analyzeAssetImage(){console.log("Analyze asset image")}addMaintenanceSchedule(){this.showAddMaintenanceModal=!0,this.maintenanceForm.reset({schedule_type:"",next_due:"",last_done:"",frequency:"",notes:"",status:"Scheduled"}),setTimeout(()=>{this.initializeDatePickers()},100)}editMaintenanceSchedule(t){this.selectedSchedule=t,this.showEditMaintenanceModal=!0,this.maintenanceForm.patchValue({schedule_type:t.schedule_type,next_due:t.next_due,last_done:t.last_done,frequency:t.frequency,notes:t.notes,status:t.status}),setTimeout(()=>{this.initializeDatePickers()},100)}deleteMaintenanceSchedule(t){confirm("Are you sure you want to delete this maintenance schedule?")&&this.assetService.deleteMaintenanceSchedule(this.asset.id,t.id).pipe(R(this.destroy$)).subscribe({next:e=>{e.success&&this.loadMaintenanceSchedules()},error:e=>{console.error("Error deleting maintenance schedule:",e)}})}saveMaintenanceSchedule(){if(this.maintenanceForm.valid&&this.asset){this.saveMaintenanceLoading=!0;let t=this.maintenanceForm.value;this.selectedSchedule?this.assetService.updateMaintenanceSchedule(this.asset.id,this.selectedSchedule.id,t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{this.saveMaintenanceLoading=!1,console.error("Error updating maintenance schedule:",e)}}).add(()=>{this.saveMaintenanceLoading=!1}):this.assetService.addMaintenanceSchedule(this.asset.id,t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{this.saveMaintenanceLoading=!1,console.error("Error adding maintenance schedule:",e)}}).add(()=>{this.saveMaintenanceLoading=!1})}}closeMaintenanceModals(){this.showAddMaintenanceModal=!1,this.showEditMaintenanceModal=!1,this.selectedSchedule=null,this.maintenanceForm.reset(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[]}initializeDatePickers(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let r=Be(t.nativeElement,{dateFormat:"Y-m-d",allowInput:!0,clickOpens:!0,onChange:(s,c)=>{let x=t.nativeElement.getAttribute("formControlName");x&&this.maintenanceForm.get(x)&&this.maintenanceForm.get(x).setValue(c)}});this.flatpickrInstances.push(r)}})},50)}getScheduleStatusColor(t){return{Scheduled:"blue",Overdue:"red",Completed:"green","In Progress":"yellow"}[t]||"gray"}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set"}getAssetTypeName(t){return t?{1:"Fixed Asset",2:"Semi-Fixed Asset",3:"Mobile Asset",4:"Fleet Asset",5:"IT Equipment"}[t.toString()]||`Type ${t}`:"Standard Asset"}navigateToPrevious(){console.log("Navigate to previous asset")}navigateToNext(){console.log("Navigate to next asset")}loadRelatedAssets(){this.asset?.id&&(this.relatedAssetsLoading=!0,this.relatedAssetsError="",this.assetService.getRelatedAssets(this.asset.id,this.relatedAssetsParams).pipe(R(this.destroy$)).subscribe({next:t=>{t.success?this.relatedAssets=t.data.related_assets||[]:this.relatedAssetsError=t.message||"Failed to load related assets",this.relatedAssetsLoading=!1},error:t=>{this.relatedAssetsError=t.error?.message||"An error occurred while loading related assets",this.relatedAssetsLoading=!1}}))}loadDepreciationChart(){this.asset?.id&&(this.depreciationChartLoading=!0,this.depreciationChartError="",console.log("Loading depreciation chart for asset:",this.asset.id),this.assetService.getAssetDepreciationChart(this.asset.id).pipe(R(this.destroy$)).subscribe({next:t=>{console.log("Chart API Response:",t),t.success?(this.depreciationChartData=t.data,console.log("Chart data set:",this.depreciationChartData),this.createDepreciationChart()):(this.depreciationChartError=t.message||"Failed to load depreciation chart data",console.log("API returned error, using mock data"),this.createDepreciationChartWithMockData()),this.depreciationChartLoading=!1},error:t=>{console.error("Chart API Error:",t),this.depreciationChartError=t.error?.message||"An error occurred while loading depreciation chart data",this.depreciationChartLoading=!1,this.createDepreciationChartWithMockData()}}))}createDepreciationChart(){console.log("Creating depreciation chart..."),this.depreciationChart&&(console.log("Destroying existing chart"),this.depreciationChart.destroy()),setTimeout(()=>{let t=document.getElementById("depreciationChart");if(console.log("Canvas element:",t),!t){console.error("Depreciation chart canvas not found");return}let e=this.processChartData(this.depreciationChartData)||this.generateMockDepreciationData();console.log("Chart data to use:",e);try{this.depreciationChart=new Qt(t,{type:"line",data:{labels:e.labels,datasets:[{label:"Asset Value",data:e.values,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!0,tension:.4},{label:"Accumulated Depreciation",data:e.depreciation,borderColor:"#EF4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:2,fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Asset Depreciation Over Time",font:{size:16,weight:"bold"}},legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:r=>{let s=r.dataset.label||"",c=r.parsed.y;return`${s}: $${c.toLocaleString()}`}}}},scales:{x:{title:{display:!0,text:"Month"}},y:{title:{display:!0,text:"Value ($)"},beginAtZero:!0,ticks:{callback:r=>`$${Number(r).toLocaleString()}`}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),console.log("Chart created successfully"),this.cdr.detectChanges()}catch(r){console.error("Error creating chart:",r)}},100)}processChartData(t){if(!t||!t.chart_data||!t.chart_data.has_data)return null;let e=t.chart_data,r=e.depreciation_months.map(I=>`Month ${I}`),s=e.depreciation_values.map(I=>parseFloat(I)),c=parseFloat(t.asset.purchase_price),x=s.map(I=>c-I);return{labels:r,values:s,depreciation:x}}createDepreciationChartWithMockData(){let t=this.generateMockDepreciationData();this.depreciationChartData=t,this.createDepreciationChart()}generateMockDepreciationData(){let t=parseFloat(this.asset?.purchase_price)||1e4,e=parseFloat(this.asset?.depreciation)||10,r=this.asset?.depreciation_life||10,s=[],c=[],x=[],I=r||e;for(let L=1;L<=I;L++){s.push(`Month ${L}`);let B=t/I*(L-1),J=Math.max(0,t-B);c.push(J),x.push(B)}return{labels:s,values:c,depreciation:x}}onRelatedFilterChange(t){this.selectedRelatedFilter=t,this.relatedAssetsParams.type=t,this.loadRelatedAssets()}getRelatedFilterDisplayName(t){return{all:"All Related",category:"Same Category",location:"Same Location",department:"Same Department",manufacturer:"Same Manufacturer",parent:"Same Parent",children:"Child Assets",siblings:"Sibling Assets",similar:"Similar Assets"}[t]||t}getRelatedAssetStatusColor(t){if(t?.color)return`bg-${this.getColorFromHex(t.color)}-100 text-${this.getColorFromHex(t.color)}-700`;let e=t?.name||t;return{Active:"bg-green-100 text-green-700",Inactive:"bg-gray-100 text-gray-700",Maintenance:"bg-orange-100 text-orange-700",Retired:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"}getColorFromHex(t){return{"#10B981":"green","#EF4444":"red","#F59E0B":"yellow","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange","#6B7280":"gray"}[t]||"gray"}navigateToRelatedAsset(t){this.router.navigate(["/assets",t])}loadActivityHistory(){if(!this.asset?.id)return;this.activityLoading=!0,this.activityError="";let t={page:1,per_page:5,sort_by:"created_at",sort_dir:"desc"};this.assetService.getActivityHistory(this.asset.id,t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success?this.activities=e.data.data||[]:this.activityError=e.message||"Failed to load activity history",this.activityLoading=!1},error:e=>{this.activityError=e.error?.message||"An error occurred while loading activity history",this.activityLoading=!1}})}loadPerformanceMetrics(){console.log("Load performance metrics")}refreshHealthMetrics(){this.loadPerformanceMetrics(),console.log("Refreshing health metrics")}refreshDepreciationChart(){console.log("Refreshing depreciation chart..."),this.loadDepreciationChart()}forceCreateChart(){console.log("Force creating chart..."),this.createDepreciationChart()}loadHealthPerformanceChart(){if(!this.asset?.id){console.log("No asset ID available for health performance chart");return}this.healthPerformanceChartLoading=!0,this.healthPerformanceChartError="",console.log("Loading health performance chart for asset:",this.asset.id),this.assetService.getAssetHealthPerformanceChart(this.asset.id,{months:12}).pipe(R(this.destroy$)).subscribe({next:t=>{console.log("Health performance chart API response:",t),this.healthPerformanceChartLoading=!1,t.success&&t.data?(this.healthPerformanceChartData=t.data,setTimeout(()=>{this.createHealthPerformanceChart()},100)):(this.healthPerformanceChartError="Failed to load health performance data",console.error("Health performance chart API error:",t))},error:t=>{console.error("Health performance chart API error:",t),this.healthPerformanceChartLoading=!1,this.healthPerformanceChartError="Failed to load health performance data"}})}createHealthPerformanceChart(){console.log("Creating health performance chart..."),console.log("Health performance chart data:",this.healthPerformanceChartData),this.healthPerformanceChart&&(this.healthPerformanceChart.destroy(),this.healthPerformanceChart=null);let t=document.getElementById("healthPerformanceChart");if(console.log("Canvas element:",t),!t){console.error("Health performance chart canvas not found");return}setTimeout(()=>{try{console.log("Processing health performance data...");let e=this.processHealthPerformanceData(this.healthPerformanceChartData);console.log("Processed chart data:",e);let r={type:"line",data:{labels:e.labels,datasets:[{label:"Health Score",data:e.healthScores,borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#10B981",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6},{label:"Performance Score",data:e.performanceScores,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#3B82F6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6},{label:"Maintenance Count",data:e.maintenanceCounts,borderColor:"#F59E0B",backgroundColor:"rgba(245, 158, 11, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#F59E0B",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(s){let c=s.dataset.label||"",x=s.parsed.y;return c==="Maintenance Count"?`${c}: ${x} activities`:`${c}: ${x}%`}}}},scales:{x:{display:!0,title:{display:!0,text:"Month",font:{size:12,weight:"bold"}},grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Score (%)",font:{size:12,weight:"bold"}},min:0,max:100,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Maintenance Count",font:{size:12,weight:"bold"}},min:0,grid:{drawOnChartArea:!1,color:"rgba(0, 0, 0, 0.1)"}}}}};this.healthPerformanceChart=new Qt(t,r),console.log("Health performance chart created successfully"),this.cdr.detectChanges()}catch(e){console.error("Error creating health performance chart:",e),setTimeout(()=>{console.log("Retrying health performance chart creation..."),this.createHealthPerformanceChart()},500)}},100)}processHealthPerformanceData(t){if(!t?.chart_data)return console.log("No chart data available, using mock data"),this.generateMockHealthPerformanceData();let e=t.chart_data;return console.log("Processing health performance data:",e),{labels:(e.dates||[]).map(s=>{if(s&&s.includes("-")){let[c,x]=s.split("-");return new Date(parseInt(c),parseInt(x)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}return s}),healthScores:e.health_scores||[],performanceScores:e.performance_scores||[],maintenanceCounts:e.maintenance_counts||[],metrics:e.metrics||{}}}generateMockHealthPerformanceData(){let e=[],r=[],s=[],c=[];for(let x=0;x<12;x++){let I=new Date;I.setMonth(I.getMonth()-(11-x)),e.push(I.toLocaleDateString("en-US",{month:"short",year:"2-digit"}));let L=85,Y=x*2+Math.random()*5;r.push(Math.max(60,Math.round(L-Y)));let B=90,J=(Math.random()-.5)*10;s.push(Math.max(75,Math.round(B+J))),c.push(Math.floor(Math.random()*5)+1)}return{labels:e,healthScores:r,performanceScores:s,maintenanceCounts:c,metrics:{average_health_score:Math.round(r.reduce((x,I)=>x+I,0)/r.length),average_performance_score:Math.round(s.reduce((x,I)=>x+I,0)/s.length),total_maintenance_count:c.reduce((x,I)=>x+I,0),health_trend:r[r.length-1]-r[0],performance_trend:s[s.length-1]-s[0]}}}refreshHealthPerformanceChart(){this.loadHealthPerformanceChart()}forceCreateHealthPerformanceChart(){if(console.log("Force creating health performance chart..."),console.log("Current health performance chart data:",this.healthPerformanceChartData),!this.healthPerformanceChartData){console.log("No data available, loading health performance chart..."),this.loadHealthPerformanceChart();return}this.createHealthPerformanceChart()}getHealthScoreColor(t){return t?t>=80?"text-green-600":t>=60?"text-yellow-600":t>=40?"text-orange-600":"text-red-600":"text-gray-400"}getHealthStatusColor(t){return t?t>=80?"text-green-600":t>=60?"text-yellow-600":t>=40?"text-orange-600":"text-red-600":"text-gray-600"}getHealthStatusText(t){return t?t>=80?"Excellent":t>=60?"Good":t>=40?"Fair":"Poor":"Unknown"}getAssetAge(){if(!this.asset?.purchase_date)return"Unknown";let t=new Date(this.asset.purchase_date),r=Math.abs(new Date().getTime()-t.getTime()),s=Math.ceil(r/(1e3*60*60*24));if(s<365)return`${Math.floor(s/30)} months`;{let c=Math.floor(s/365);return`${c} year${c>1?"s":""}`}}getUtilizationRate(){let t=this.asset?.health_score||0;return t>=80?95:t>=60?85:t>=40?70:50}getUptimePercentage(){let t=this.asset?.health_score||0;return t>=80?99.5:t>=60?98:t>=40?95:90}getMaintenanceFrequency(){let t=this.asset?.health_score||0;return t>=80?"Low":t>=60?"Medium":t>=40?"High":"Very High"}getMaintenanceFrequencyPercentage(){let t=this.asset?.health_score||0;return t>=80?20:t>=60?40:t>=40?60:80}getCostEfficiency(){let t=parseFloat(this.asset?.purchase_price)||0,e=this.calculateCurrentValue();if(t===0)return 85;let r=e/t*100;return Math.min(Math.max(r,0),100)}formatCurrency(t){return t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})}calculateCurrentValue(){let t=parseFloat(this.asset?.purchase_price)||0,e=this.calculateDepreciation();return Math.round(Math.max(t-e,0)*100)/100}getROIColor(t){return t>=0?"text-green-600":"text-red-600"}getPerformanceTrend(){let t=this.asset?.health_score||0;return t>=80?"Improving":t>=60?"Stable":t>=40?"Declining":"Critical"}getCostEfficiencyTrend(){let t=this.getCostEfficiency();return t>=80?"Optimal":t>=60?"Good":t>=40?"Fair":"Poor"}getMaintenanceTrend(){let t=this.asset?.health_score||0;return t>=80?"Low":t>=60?"Stable":t>=40?"Increasing":"High"}getTrendColor(t){switch(t.toLowerCase()){case"improving":case"optimal":case"low":return"text-green-600";case"stable":case"good":return"text-blue-600";case"declining":case"fair":case"increasing":return"text-yellow-600";case"critical":case"poor":case"high":return"text-red-600";default:return"text-gray-600"}}getTrendIcon(t){switch(t.toLowerCase()){case"improving":case"optimal":return"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6";case"declining":case"critical":return"M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6";case"stable":case"good":case"fair":case"low":case"increasing":case"high":default:return"M20 12H4"}}getFinancialAlerts(){let t=[],e=this.asset?.health_score||0,r=this.calculateCurrentValue(),s=parseFloat(this.asset?.purchase_price)||0;return e<40&&t.push({message:"Asset health is critical - consider replacement",class:"bg-red-50 text-red-700"}),r<s*.3&&t.push({message:"Asset value has depreciated significantly",class:"bg-orange-50 text-orange-700"}),(this.asset?.warranty==="None"||!this.asset?.warranty)&&t.push({message:"No warranty coverage - maintenance costs may increase",class:"bg-yellow-50 text-yellow-700"}),t}getPredictiveAlerts(){let t=[],e=this.asset?.health_score||0,r=this.getAssetAge();return e<60&&t.push({title:"Maintenance Alert",message:"Schedule preventive maintenance within 30 days",class:"bg-orange-50 text-orange-700"}),e<40&&t.push({title:"Critical Alert",message:"Asset requires immediate attention",class:"bg-red-50 text-red-700"}),r.includes("year")&&parseInt(r)>5&&t.push({title:"Age Alert",message:"Asset is aging - consider replacement planning",class:"bg-blue-50 text-blue-700"}),t}uploadDocument(){console.log("Upload document")}downloadDocument(t){console.log("Download document:",t)}compareWithSimilar(){console.log("Compare with similar assets")}scrollToSection(t){let e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}exportFinancialData(){console.log("Export financial data")}exportMaintenanceHistory(){console.log("Export maintenance history")}generateMaintenanceRecommendations(){console.log("Generate maintenance recommendations")}addMaintenanceCost(){console.log("Add maintenance cost")}viewCostHistory(){console.log("View cost history")}getWarrantyStatus(t){if(!t)return"No warranty";let e=new Date,r=new Date(t);if(r<e)return"Expired";{let s=Math.ceil((r.getTime()-e.getTime())/864e5);return s<=30?`Expires in ${s} days`:"Active"}}getWarrantyStatusClass(t){let e=this.getWarrantyStatus(t);return e==="Expired"?"text-red-600 font-medium":e.includes("Expires in")?"text-orange-600 font-medium":e==="Active"?"text-green-600 font-medium":"text-gray-500"}selectImage(t){this.asset.images&&t>=0&&t<this.asset.images.length&&(this.currentImageIndex=t,this.selectedImageUrl=this.asset.images[t].image_url)}previousImage(){if(this.asset.images&&this.asset.images.length>1){let t=this.currentImageIndex>0?this.currentImageIndex-1:this.asset.images.length-1;this.selectImage(t)}}nextImage(){if(this.asset.images&&this.asset.images.length>1){let t=this.currentImageIndex<this.asset.images.length-1?this.currentImageIndex+1:0;this.selectImage(t)}}copyAssetId(){let t=this.asset?.asset_id||this.asset?.id;t&&navigator.clipboard.writeText(t.toString()).then(()=>{console.log("Asset ID copied to clipboard")}).catch(e=>{console.error("Failed to copy asset ID:",e)})}copySerialNumber(){this.asset?.serial_number&&navigator.clipboard.writeText(this.asset.serial_number).then(()=>{console.log("Serial number copied to clipboard")}).catch(t=>{console.error("Failed to copy serial number:",t)})}calculateDepreciation(){if(!this.asset?.purchase_price)return 0;let t=this.asset.current_value||this.asset.purchase_price;return Math.round((this.asset.purchase_price-t)*100)/100}calculateDepreciationRate(){let t=this.asset?.depreciation||10;return Math.round(1/t*100)}getMaxDepreciationValue(){return this.asset?.purchase_price||1e4}getDepreciationPath(){let t=this.getMaxDepreciationValue(),e=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,r=new Date,s=10,c=new Date(e.getTime()+s*365.25*24*60*60*1e3),x=[],I=(c.getTime()-e.getTime())/(1e3*60*60*24);for(let L=0;L<=12;L++){let Y=I*L/12,J=(new Date(e.getTime()+Y*24*60*60*1e3).getTime()-e.getTime())/(1e3*60*60*24*365.25),ee=t/s,ve=Math.min(ee*J,t),A=Math.max(0,t-ve),j=L/12*100,De=100-A/t*100;x.push(`${j},${De}`)}return`M ${x.join(" L ")}`}getCurrentPeriodX(){if(!this.asset?.purchase_date)return 0;let t=new Date(this.asset.purchase_date),e=new Date,r=10,c=(new Date(t.getTime()+r*365.25*24*60*60*1e3).getTime()-t.getTime())/(1e3*60*60*24),x=(e.getTime()-t.getTime())/(1e3*60*60*24);return Math.min(100,Math.max(0,x/c*100))}getCurrentPeriodY(){let t=this.calculateCurrentValue(),e=this.getMaxDepreciationValue();return 100-t/e*100}getDepreciationDates(){let t=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,e=10,r=new Date(t.getTime()+e*365.25*24*60*60*1e3),s=[];for(let c=0;c<=12;c++){let x=(r.getTime()-t.getTime())/864e5*c/12;s.push(new Date(t.getTime()+x*24*60*60*1e3))}return s}calculateAnnualDepreciation(){return this.getMaxDepreciationValue()/10}calculateRemainingYears(){if(!this.asset?.purchase_date)return 10;let t=new Date(this.asset.purchase_date),e=new Date,r=10,s=(e.getTime()-t.getTime())/(1e3*60*60*24*365.25);return Math.round(Math.max(0,r-s)*100)/100}calculateTotalCostOfOwnership(){let t=this.asset?.purchase_price||0,e=this.asset?.total_maintenance_cost||0,r=this.asset?.operating_cost||0;return t+e+r}calculateROI(){let t=this.calculateTotalCostOfOwnership(),e=this.asset?.current_value||this.asset?.purchase_price||0;return t===0?0:Math.round((e-t)/t*100)}createWorkOrder(){console.log("Create work order for asset:",this.asset?.id)}transferAsset(){this.showTransferModal=!0}onTransferComplete(t){console.log("Transfer completed:",t),this.asset?.id&&this.loadAsset(this.asset.id.toString())}onTransferModalClose(){this.showTransferModal=!1}duplicateAsset(){this.asset&&this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:this.asset.id}})}onImageError(t){console.warn("Asset image failed to load:",t.target.src),t.target.onerror=null,t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onCategoryIconError(t,e){e&&(e.iconError=!0)}downloadQRCode(){if(this.qrCodeDataUrl){let t=document.createElement("a");t.href=this.qrCodeDataUrl,t.download=`asset-${this.asset.id}-qr.png`,t.click()}else if(this.asset?.qr_code_url){let t=document.createElement("a");t.href=this.asset.qr_code_url,t.download=`asset-${this.asset.id}-qr.png`,t.click()}else this.generateQRCode()}downloadBarcode(){if(this.asset?.barcode_url){let t=document.createElement("a");t.href=this.asset.barcode_url,t.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,t.click()}else if(this.barcodeDataUrl){let t=document.createElement("a");t.href=this.barcodeDataUrl,t.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,t.click()}else this.generateBarcode()}generateQRCode(){if(!this.asset)return;this.qrCodeLoading=!0;let t=`${window.location.origin}/public/asset/${this.asset.id}`;ci.toDataURL(t,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(e=>{this.qrCodeDataUrl=e,this.qrCodeLoading=!1}).catch(e=>{console.error("Error generating QR code:",e),this.qrCodeLoading=!1})}generateBarcode(){if(!this.asset?.asset_id)return;this.barcodeLoading=!0;let t=this.asset.asset_id,e=`https://quickchart.io/barcode?c=${encodeURIComponent(t)}&chs=300x100&chld=L%7C0&choe=UTF-8`;fetch(e).then(r=>r.blob()).then(r=>{let s=new FileReader;s.onloadend=()=>{this.barcodeDataUrl=s.result,this.barcodeLoading=!1},s.readAsDataURL(r)}).catch(r=>{console.error("Error generating barcode:",r),this.barcodeLoading=!1})}copyQRCodeUrl(){this.asset?.qr_code_url&&navigator.clipboard.writeText(this.asset.qr_code_url).then(()=>{console.log("QR code URL copied to clipboard")})}copyPublicUrl(){let t=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(t).then(()=>{console.log("Public URL copied to clipboard")})}get windowLocation(){return window.location.origin}showFullActivityHistory(){this.loadFullActivityHistory(),this.showActivityHistoryModal=!0}closeActivityHistoryModal(){this.showActivityHistoryModal=!1,this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.activityHistoryPagination=null}onActivityHistoryPageChange(t){this.activityHistoryParams.page=t,this.loadFullActivityHistory()}onActivityHistorySearch(t){this.activityHistoryParams.search=t,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistoryFilter(t,e){this.activityHistoryParams[t]=e,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistorySort(t,e){this.activityHistoryParams.sort_by=t,this.activityHistoryParams.sort_dir=e,this.loadFullActivityHistory()}clearActivityHistoryFilters(){this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.loadFullActivityHistory()}loadFullActivityHistory(){this.asset?.id&&(this.activityHistoryLoading=!0,this.activityHistoryError="",this.assetService.getActivityHistory(this.asset.id,this.activityHistoryParams).pipe(R(this.destroy$)).subscribe({next:t=>{t.success?(this.fullActivityHistory=t.data.data||[],this.activityHistoryPagination=t.data):this.activityHistoryError=t.message||"Failed to load full activity history",this.activityHistoryLoading=!1},error:t=>{this.activityHistoryError=t.error?.message||"An error occurred while loading full activity history",this.activityHistoryLoading=!1}}))}viewFullImage(t){window.open(t,"_blank")}formatActivityBeforeAfter(t,e){if(!t&&!e)return"";let r=[];if(t&&e){let s=Object.keys(t),c=Object.keys(e);for(let x of c)if(t[x]!==e[x]){let I=this.getFieldDisplayName(x);I&&r.push(`${I}: ${this.formatFieldValue(t[x])} \u2192 ${this.formatFieldValue(e[x])}`)}}else if(e){let s=["name","type","status","location_id","department_id","purchase_price"];for(let c of s)if(e[c]!==void 0&&e[c]!==null){let x=this.getFieldDisplayName(c);x&&r.push(`${x}: ${this.formatFieldValue(e[c])}`)}}else if(t){let s=["name","type","status"];for(let c of s)if(t[c]!==void 0&&t[c]!==null){let x=this.getFieldDisplayName(c);x&&r.push(`${x}: ${this.formatFieldValue(t[c])} (deleted)`)}}return r.length>0?r.join(", "):""}getFieldDisplayName(t){return{name:"Asset Name",type:"Type",model:"Model",status:"Status",description:"Description",location_id:"Location",department_id:"Department",purchase_price:"Purchase Price",purchase_date:"Purchase Date",serial_number:"Serial Number",asset_id:"Asset ID",warranty:"Warranty",insurance:"Insurance",depreciation:"Depreciation",health_score:"Health Score",manufacturer:"Manufacturer",category_id:"Category"}[t]||t.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase())}formatFieldValue(t){return t==null?"N/A":typeof t=="boolean"?t?"Yes":"No":typeof t=="number"?t.toString().includes(".")?`$${t.toFixed(2)}`:t.toString():typeof t=="string"?t.match(/^\d{4}-\d{2}-\d{2}/)?new Date(t).toLocaleDateString():t:JSON.stringify(t)}getUserDisplayName(t){return t?t.name?t.name:t.email?t.email.split("@")[0]:"Unknown User":"System"}getActivityIcon(t){return{created:"M12 6v6m0 0v6m0-6h6m-6 0H6",updated:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",deleted:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",transferred:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",maintenance:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",imported:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"}[t]||"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}getActivityColor(t){return{created:"bg-green-100 text-green-600",updated:"bg-blue-100 text-blue-600",deleted:"bg-red-100 text-red-600",transferred:"bg-purple-100 text-purple-600",maintenance:"bg-orange-100 text-orange-600",imported:"bg-indigo-100 text-indigo-600"}[t]||"bg-gray-100 text-gray-600"}sharePublicUrl(){if(this.asset?.id){let t=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(t).then(()=>{console.log("Public URL copied to clipboard:",t),alert("Public URL copied to clipboard!")}).catch(e=>{console.error("Failed to copy URL:",e),alert("Failed to copy URL to clipboard")})}}static \u0275fac=function(e){return new(e||a)(G(nt),G(Ae),G(ye),G(Lt),G(qt),G(Wt),G(Gn))};static \u0275cmp=te({type:a,selectors:[["app-asset-view"]],viewQuery:function(e,r){if(e&1&&Se(xo,5),e&2){let s;Ee(s=Me())&&(r.dateInputs=s)}},decls:34,vars:10,consts:[["noImages",""],["dateInput",""],[1,"min-h-screen","bg-gray-50","asset-view-container"],[1,"bg-white","border-b","border-gray-200","px-6","py-4","print-hide"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],["aria-label","Breadcrumb",1,"flex"],[1,"flex","items-center","space-x-2"],["routerLink","/assets/list",1,"text-gray-500","hover:text-gray-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mx-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-gray-900","font-medium"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"relative",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","text-gray-600","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",4,"ngIf"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],["class","fixed inset-0 bg-[#00000085] bg-opacity-50 flex items-center justify-center z-50 p-4",4,"ngIf"],["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[3,"closeModal","transferComplete","isOpen","asset"],[1,"absolute","right-0","mt-2","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"border-t","border-gray-100","my-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"px-6","py-6"],[1,"bg-white","rounded-lg","p-6","mb-6","shadow-sm","border","border-gray-200"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-16","h-16","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],["class","inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",3,"background-color","color",4,"ngIf"],[1,"text-gray-500"],[1,"text-right"],[1,"flex","items-center","space-x-2","mb-2"],[1,"flex","items-center","space-x-1","px-2","py-1","text-sm","font-mono","bg-gray-100","rounded","hover:bg-gray-200","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["class","flex items-center space-x-2",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","p-6","shadow-sm","border","border-gray-200"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-lg","font-semibold","text-gray-900"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-2","mb-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"space-y-6"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],[1,"text-gray-600","leading-relaxed"],["class","text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",3,"click",4,"ngIf"],[1,"w-8","h-8","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","text-gray-900",4,"ngIf"],[1,"text-gray-900","font-mono","text-lg"],["title","Copy Asset ID",1,"p-1","text-gray-400","hover:text-gray-600","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","text-blue-600 hover:underline cursor-pointer",3,"routerLink",4,"ngIf"],[1,"text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","flex","flex-col","items-center"],[1,"w-32","h-32","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","QR Code","class","w-full h-full object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center text-gray-400",4,"ngIf"],[1,"mt-3","flex","space-x-2"],["class","text-sm text-blue-600 hover:text-blue-700 font-medium",3,"click",4,"ngIf"],["class","text-sm text-green-600 hover:text-green-700 font-medium",3,"click",4,"ngIf"],[1,"mt-2","text-xs","text-gray-500","text-center"],[1,"w-full","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","Barcode","class","w-full h-20 object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center py-4",4,"ngIf"],["class","text-center py-4",4,"ngIf"],["class","text-center text-gray-400 py-4",4,"ngIf"],["class","mt-1 font-mono",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","mb-1"],["class","mt-6 pt-6 border-t border-gray-200",4,"ngIf"],[1,"flex","items-center","justify-between","mb-6"],[1,"w-8","h-8","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-green-600","hover:bg-green-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",4,"ngIf"],[1,"text-sm","font-medium","text-gray-700"],["class","flex items-center justify-center h-64 bg-gray-50 rounded-lg",4,"ngIf"],["class","flex items-center justify-center h-64 bg-red-50 rounded-lg",4,"ngIf"],["class","relative h-64 bg-white border border-gray-200 rounded-lg p-4",4,"ngIf"],["class","text-center text-xs text-gray-500",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4"],[1,"w-8","h-8","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-orange-600","hover:bg-orange-50","rounded-lg","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-6"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-gray-900"],[1,"bg-blue-50","rounded-lg","p-4"],[1,"text-2xl","font-bold","text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mt-4"],[1,"text-center","p-3","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-600"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-center","mt-6"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"flex","items-center","space-x-2","px-3","py-1","text-sm","text-gray-600","hover:text-gray-800","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","space-y-3",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"grid","grid-cols-1","gap-4","mb-6"],[1,"bg-green-50","rounded-lg","p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],[1,"text-sm","text-green-600"],[1,"font-semibold","text-green-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"text-sm","text-blue-600"],[1,"font-semibold","text-blue-800"],[1,"bg-purple-50","rounded-lg","p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],[1,"text-sm","text-purple-600"],[1,"font-semibold","text-purple-800"],["class","text-center py-6",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","font-medium","text-gray-700","mb-3"],[1,"space-y-2"],[1,"text-xs","text-gray-600"],[1,"text-sm","text-gray-900"],[1,"bg-orange-50","rounded-lg","p-4"],[1,"flex","items-center","space-x-2","mt-1"],["class","text-xs text-gray-500",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"mb-4"],[1,"relative","bg-gray-100","rounded-lg","overflow-hidden",2,"height","400px"],[1,"w-full","h-full","object-contain","bg-white","cursor-pointer",3,"click","error","src","alt"],["class","absolute left-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"click",4,"ngIf"],["class","absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"click",4,"ngIf"],[1,"absolute","bottom-4","right-4","bg-black","bg-opacity-50","text-white","px-3","py-1","rounded-full","text-sm"],["class","grid grid-cols-6 gap-2",4,"ngIf"],[1,"absolute","left-2","top-1/2","transform","-translate-y-1/2","w-10","h-10","bg-black","bg-opacity-50","text-white","rounded-full","flex","items-center","justify-center","hover:bg-opacity-70","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","w-10","h-10","bg-black","bg-opacity-50","text-white","rounded-full","flex","items-center","justify-center","hover:bg-opacity-70","transition-all",3,"click"],[1,"grid","grid-cols-6","gap-2"],["class","relative aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer border-2 transition-all",3,"border-blue-500","border-gray-200","click",4,"ngFor","ngForOf"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","cursor-pointer","border-2","transition-all",3,"click"],[1,"w-full","h-full","object-cover",3,"error","src","alt"],[1,"text-center","py-12","bg-gray-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto","mb-4"],[1,"text-gray-600"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium","mt-2",3,"click"],[1,"w-5","h-5",3,"error","src","alt"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-sm","font-medium"],[1,"text-blue-600","hover:underline","cursor-pointer",3,"routerLink"],["alt","QR Code",1,"w-full","h-full","object-contain",3,"src"],[1,"flex","items-center","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],["fill","currentColor","viewBox","0 0 24 24",1,"w-24","h-24","text-gray-400"],["d","M3 3h6v6H3V3zm2 2v2h2V5H5zm8-2h6v6h-6V3zm2 2v2h2V5h-2zM3 11h6v6H3v-6zm2 2v2h2v-2H5zm8 2h6v6h-6v-6zm2 2v2h2v-2h-2z"],[1,"text-xs","text-gray-500","mt-2","font-mono"],[1,"text-center","text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto"],[1,"text-xs","mt-2"],[1,"text-sm","text-blue-600","hover:text-blue-700","font-medium",3,"click"],[1,"text-sm","text-green-600","hover:text-green-700","font-medium",3,"click"],["alt","Barcode",1,"w-full","h-20","object-contain",3,"src"],[1,"flex","items-center","justify-center","py-4"],[1,"text-center","py-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto"],[1,"text-center","text-gray-400","py-4"],[1,"mt-1","font-mono"],[1,"text-xs","text-gray-500"],[1,"text-gray-900","font-mono"],[1,"p-1","text-gray-400","hover:text-gray-600","transition-colors",3,"click"],[1,"mt-6","pt-6","border-t","border-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-sm","text-gray-900","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-orange-600"],[1,"flex","items-center","justify-center","h-64","bg-gray-50","rounded-lg"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-green-100","rounded-full","mb-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4","text-green-600"],[1,"flex","items-center","justify-center","h-64","bg-red-50","rounded-lg"],[1,"text-red-600","text-sm","mb-2"],[1,"relative","h-64","bg-white","border","border-gray-200","rounded-lg","p-4"],["id","healthPerformanceChart","width","400","height","200"],[1,"text-center","text-xs","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-4"],[1,"text-lg","font-semibold",3,"ngClass"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-blue-100","rounded-full","mb-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4","text-blue-600"],["id","depreciationChart","width","400","height","200"],[1,"flex","items-center","justify-center","py-8"],[1,"text-center","py-8"],["class","flex items-start space-x-3",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-3"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"flex-1"],[1,"flex","items-center","justify-between","mb-1"],[1,"font-medium","text-gray-900","capitalize"],["class","text-xs text-gray-500 bg-gray-50 p-2 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","bg-gray-50","p-2","rounded","border"],[1,"text-xs","text-gray-500","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mx-auto","mb-4"],["class","w-full flex items-center px-4 py-2 text-left hover:bg-gray-50 transition-colors",3,"text-blue-600","bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-full","flex","items-center","px-4","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-sm"],[1,"space-y-3"],["class","flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["class","w-full h-full object-cover rounded-lg",3,"src","alt","error",4,"ngIf"],["class","w-6 h-6 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"font-medium","text-gray-900","truncate"],[1,"flex","items-center","space-x-2","mb-1"],[1,"text-gray-400"],[1,"text-xs","px-2","py-1","rounded-full","font-medium",3,"ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","flex-shrink-0"],[1,"w-full","h-full","object-cover","rounded-lg",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-center","py-6"],[1,"inline-flex","items-center","justify-center","w-6","h-6","bg-blue-100","rounded-full"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-3","h-3","text-blue-600"],["class","border border-gray-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-3"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-gray-900","text-sm"],[1,"flex","items-center","space-x-1"],[1,"p-1","text-gray-400","hover:text-blue-600","transition-colors",3,"click"],[1,"p-1","text-gray-400","hover:text-red-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"space-y-1","text-xs"],[1,"ml-1","text-gray-900"],["class","mt-2 text-xs text-gray-600",4,"ngIf"],[1,"mt-2","text-xs","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400","mx-auto","mb-2"],[1,"text-sm","font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-600","mb-3"],[1,"px-3","py-1","bg-blue-600","text-white","rounded","text-xs","hover:bg-blue-700","transition-colors",3,"click"],[1,"fixed","inset-0","bg-[#00000085]","bg-opacity-50","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-lg","max-w-md","w-full","p-6","shadow-lg"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["formControlName","schedule_type",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value",""],["value","Preventive"],["value","Inspection"],["value","Calibration"],["value","Cleaning"],["type","text","formControlName","next_due","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","text","formControlName","last_done","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","frequency",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Weekly"],["value","Monthly"],["value","Quarterly"],["value","Semi-Annual"],["value","Annual"],["formControlName","notes","rows","3","placeholder","Additional notes...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"flex","items-center","justify-end","space-x-3","mt-6"],["type","button",1,"bg-gray-200","text-gray-700","px-4","py-2","rounded-lg","hover:bg-gray-300","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","disabled:opacity-50","transition-colors",3,"disabled"],[1,"border-t-transparent","animate-spin","inline-block","w-5","h-5","border-2","rounded-full","border-white"],[1,"bg-white","rounded-lg","max-w-md","w-full","p-6"],["formControlName","status",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Scheduled"],["value","In Progress"],["value","Completed"],["value","Overdue"],["type","button",1,"bg-gray-200","px-4","py-2","rounded-lg","hover:bg-gray-300","transition-colors",3,"click"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-lg","max-w-4xl","w-full","max-h-[90vh]","flex","flex-col"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex-1","overflow-auto","p-6"],[1,"mb-6","space-y-4"],[1,"flex","space-x-4"],["type","text","placeholder","Search activities...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"input"],[1,"px-4","py-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","created"],["value","updated"],["value","deleted"],["value","transferred"],["value","maintenance"],["value","imported"],["type","date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","desc"],["value","asc"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","space-y-4 max-h-[60vh] overflow-y-auto",4,"ngIf"],["class","mt-6 flex items-center justify-between",4,"ngIf"],[1,"flex","items-center","justify-between","p-6","border-t","border-gray-200","bg-gray-50"],[1,"px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","items-center","justify-center","py-12"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-6","h-6","text-blue-600"],[1,"text-center","py-12"],[1,"text-red-600","mb-4"],[1,"space-y-4","max-h-[60vh]","overflow-y-auto"],["class","flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-4","p-4","bg-gray-50","rounded-lg"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"font-semibold","text-gray-900","capitalize"],[1,"text-xs","text-gray-500","bg-white","px-2","py-1","rounded-full"],[1,"text-sm","text-gray-600","mb-2"],["class","text-xs text-gray-500 bg-white p-3 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-2",4,"ngIf"],[1,"text-xs","text-gray-500","bg-white","p-3","rounded","border"],[1,"font-medium","mb-1"],[1,"text-xs","text-gray-500","mt-2"],[1,"mt-6","flex","items-center","justify-between"],[1,"flex","space-x-2"],["class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"px-3","py-1","text-sm","border","border-gray-300","rounded","hover:bg-gray-50","transition-colors",3,"click"]],template:function(e,r){e&1&&(n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"nav",6)(5,"ol",7)(6,"li")(7,"a",8),o(8,"Assets"),i()(),n(9,"li"),v(),n(10,"svg",9),u(11,"path",10),i()(),b(),n(12,"li",11),o(13),i()()()(),n(14,"div",12)(15,"button",13),_("click",function(){return r.editAsset()}),v(),n(16,"svg",14),u(17,"path",15),i(),b(),n(18,"span"),o(19,"Edit Asset"),i()(),n(20,"div",16),_("click",function(c){return c.stopPropagation()}),n(21,"button",17),_("click",function(){return r.showActionsDropdown=!r.showActionsDropdown}),v(),n(22,"svg",18),u(23,"circle",19)(24,"circle",20)(25,"circle",21),i()(),y(26,Co,27,0,"div",22),i()()()(),y(27,So,10,0,"div",23)(28,Eo,11,1,"div",23)(29,Gs,451,129,"div",24)(30,Us,60,3,"div",25)(31,qs,72,3,"div",25)(32,al,62,5,"div",26),b(),n(33,"app-transfer-asset-modal",27),_("closeModal",function(){return r.onTransferModalClose()})("transferComplete",function(c){return r.onTransferComplete(c)}),i()()),e&2&&(l(13),S((r.asset==null?null:r.asset.name)||"Asset Details"),l(13),m("ngIf",r.showActionsDropdown),l(),m("ngIf",r.loading),l(),m("ngIf",r.error&&!r.loading),l(),m("ngIf",r.asset&&!r.loading),l(),m("ngIf",r.showAddMaintenanceModal),l(),m("ngIf",r.showEditMaintenanceModal),l(),m("ngIf",r.showActivityHistoryModal),l(),m("isOpen",r.showTransferModal)("asset",r.asset))},dependencies:[me,zn,ke,ie,Ot,Ft,$n,Ve,it,Yt,Ne,qn,Qn,pe,Yn,ue,je,Rt,Bt,lt],styles:[".asset-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.asset-image-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:.5rem;min-height:16rem;display:flex;align-items:center;justify-content:center}.info-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.health-score-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669);transition:width .3s ease-in-out}.chart-placeholder[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:.5rem}.chart-placeholder[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.ai-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.ai-button[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.ai-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.action-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;border-radius:.5rem;padding:.5rem 1rem;margin:-.5rem -1rem}.status-badge[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px}.section-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.section-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:1rem}.empty-state[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.lg\\:col-span-2[_ngcontent-%COMP%]{grid-column:span 1}.asset-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media print{.bg-white.border-b[_ngcontent-%COMP%], .flex.items-center.justify-between[_ngcontent-%COMP%], .bg-white.rounded-lg.p-6.shadow-sm.border.border-gray-200[_ngcontent-%COMP%]:has(button), button[_ngcontent-%COMP%], .relative[_ngcontent-%COMP%], .dropdown[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%], .fixed[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%], .actions-dropdown[_ngcontent-%COMP%], .quick-actions[_ngcontent-%COMP%], .print-hide[_ngcontent-%COMP%]{display:none!important}.bg-white.rounded-lg.p-6.shadow-sm.border.border-gray-200[_ngcontent-%COMP%]{border:1px solid #ddd!important;box-shadow:none!important;margin-bottom:20px!important;page-break-inside:avoid}.grid.grid-cols-1.lg\\\\[_ngcontent-%COMP%]:grid-cols-3{display:block!important}.lg\\\\[_ngcontent-%COMP%]:col-span-2{width:100%!important}body[_ngcontent-%COMP%]{margin:0!important;padding:20px!important;background:#fff!important}*[_ngcontent-%COMP%]{color:#000!important;background:#fff!important}.asset-image-container[_ngcontent-%COMP%]{border:1px solid #000!important;background:#fff!important;max-width:100%!important}.qr-section[_ngcontent-%COMP%], .barcode-section[_ngcontent-%COMP%]{text-align:center!important;page-break-inside:avoid}table[_ngcontent-%COMP%]{width:100%!important;border-collapse:collapse!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd!important;padding:8px!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{color:#000!important;page-break-after:avoid}.status-badge[_ngcontent-%COMP%]{border:1px solid #000!important;background:#fff!important;color:#000!important}}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.asset-view[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}.value-display[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums}.section-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:.75rem;margin-bottom:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ai-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#faf5ff,#f3e8ff);border:1px solid #e9d5ff}.financial-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1px solid #bbf7d0}.technical-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:1px solid #bfdbfe}"]})};var ol=["fileInput"],sl=["dateInput"],ll=()=>({standalone:!0});function cl(a,t){a&1&&(n(0,"div",15)(1,"div",16)(2,"div",17),v(),n(3,"svg",18),u(4,"circle",19)(5,"path",20),i()(),b(),n(6,"h3",21),o(7,"Loading Asset"),i(),n(8,"p",22),o(9,"Please wait while we fetch the asset details..."),i()()())}function dl(a,t){if(a&1){let e=E();n(0,"div",15)(1,"div",16)(2,"div",23),v(),n(3,"svg",24),u(4,"path",25),i()(),b(),n(5,"h3",21),o(6,"Error Loading Asset"),i(),n(7,"p",26),o(8),i(),n(9,"button",27),_("click",function(){g(e);let s=d();return h(s.goBack())}),o(10," Back to Assets "),i()()()}if(a&2){let e=d();l(8),S(e.error)}}function ml(a,t){if(a&1&&(n(0,"div",123),v(),n(1,"svg",124),u(2,"path",25),i(),o(3),i()),a&2){let e=d(2);l(3),M(" ",e.nameError," ")}}function pl(a,t){a&1&&(n(0,"span",101),o(1,"Select parent asset"),i())}function ul(a,t){if(a&1&&(n(0,"span",125),o(1),i()),a&2){let e=d(2);l(),ne(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function fl(a,t){if(a&1){let e=E();n(0,"button",129),_("click",function(){let s,c=g(e).$implicit,x=d(3);return(s=x.assetForm.get("parent_id"))==null||s.setValue(c.id),h(x.showParentDropdown=!1)}),n(1,"div",41)(2,"div",131),v(),n(3,"svg",132),u(4,"path",67),i()(),b(),n(5,"div")(6,"div",133),o(7),i(),n(8,"div",134),o(9),i()()()()}if(a&2){let e,r=t.$implicit,s=d(3);k("bg-blue-50",((e=s.assetForm.get("parent_id"))==null?null:e.value)===r.id),l(7),S(r.name),l(2),S(r.asset_id)}}function gl(a,t){if(a&1){let e=E();n(0,"div",126)(1,"div",127)(2,"div",128),o(3,"Select parent asset"),i(),n(4,"button",129),_("click",function(){let s;g(e);let c=d(2);return(s=c.assetForm.get("parent_id"))==null||s.setValue(null),h(c.showParentDropdown=!1)}),o(5," -- None -- "),i(),y(6,fl,10,4,"button",130),i()()}if(a&2){let e,r=d(2);l(4),k("bg-blue-50",!((e=r.assetForm.get("parent_id"))!=null&&e.value)),l(2),m("ngForOf",r.possibleParents)}}function hl(a,t){a&1&&(n(0,"span",101),o(1,"Select asset type"),i())}function _l(a,t){if(a&1){let e=E();n(0,"img",138),_("error",function(s){g(e);let c=d(3);return h(c.onAssetTypeIconError(s,c.selectedAssetType))}),i()}if(a&2){let e=d(3);m("src",e.selectedAssetType.icon,K)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function vl(a,t){if(a&1&&(v(),n(0,"svg",139),u(1,"path",140),i()),a&2){let e=d(3);X("color",e.selectedAssetType.color)}}function xl(a,t){if(a&1&&(n(0,"div",41)(1,"div",135),y(2,_l,1,2,"img",136)(3,vl,2,2,"svg",137),i(),n(4,"span",125),o(5),i()()),a&2){let e=d(2);l(),X("background-color",e.selectedAssetType.color+"20"),l(),m("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),l(),m("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),l(2),S(e.selectedAssetType.label)}}function bl(a,t){if(a&1){let e=E();n(0,"img",145),_("error",function(s){g(e);let c=d().$implicit,x=d(3);return h(x.onAssetTypeIconError(s,c))}),i()}if(a&2){let e=d().$implicit;m("src",e.icon,K)("alt",e.name||e.label)}}function yl(a,t){a&1&&(v(),n(0,"svg",32),u(1,"path",140),i())}function wl(a,t){if(a&1){let e=E();n(0,"button",129),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.selectAssetType(s))}),n(1,"div",41)(2,"div",142),y(3,bl,1,2,"img",143)(4,yl,2,0,"svg",144),i(),n(5,"div")(6,"div",133),o(7),i(),n(8,"div",22),o(9),i()()()()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id)("text-blue-700",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id),l(3),m("ngIf",e.icon&&!e.iconError),l(),m("ngIf",!e.icon||e.iconError),l(3),S(e.label||e.name),l(2),S(e.description)}}function Cl(a,t){if(a&1&&(n(0,"div",126)(1,"div",127)(2,"div",128),o(3,"Select asset type"),i(),y(4,wl,10,8,"button",141),i()()),a&2){let e=d(2);l(4),m("ngForOf",e.assetTypes)}}function Sl(a,t){if(a&1&&(n(0,"div",123),v(),n(1,"svg",124),u(2,"path",25),i(),o(3),i()),a&2){let e=d(2);l(3),M(" ",e.assetTypeError," ")}}function El(a,t){a&1&&(n(0,"span",101),o(1,"Select category"),i())}function Ml(a,t){if(a&1&&(n(0,"span",125),o(1),i()),a&2){let e=d(2);l(),S(e.selectedCategory.name)}}function kl(a,t){if(a&1){let e=E();n(0,"img",145),_("error",function(s){g(e);let c=d().$implicit,x=d(3);return h(x.onCategoryIconError(s,c))}),i()}if(a&2){let e=d().$implicit;m("src",e.icon,K)("alt",e.name)}}function Al(a,t){a&1&&(v(),n(0,"svg",132),u(1,"path",67),i())}function Tl(a,t){if(a&1&&(n(0,"div",22),o(1),i()),a&2){let e=d().$implicit;l(),S(e.description)}}function Dl(a,t){if(a&1){let e=E();n(0,"button",129),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.selectCategory(s))}),n(1,"div",41)(2,"div",131),y(3,kl,1,2,"img",143)(4,Al,2,0,"svg",146),i(),n(5,"div")(6,"div",133),o(7),i(),y(8,Tl,2,1,"div",103),i()()()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("text-blue-700",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id),l(3),m("ngIf",e.icon),l(),m("ngIf",!e.icon||e.iconError),l(3),S(e.name),l(),m("ngIf",e.description)}}function Il(a,t){if(a&1&&(n(0,"div",126)(1,"div",127)(2,"div",128),o(3,"Select category"),i(),y(4,Dl,9,8,"button",141),i()()),a&2){let e=d(2);l(4),m("ngForOf",e.categories)}}function Vl(a,t){if(a&1&&(n(0,"div",123),v(),n(1,"svg",124),u(2,"path",25),i(),o(3),i()),a&2){let e=d(2);l(3),M(" ",e.categoryError," ")}}function Pl(a,t){if(a&1&&(n(0,"div",123),v(),n(1,"svg",124),u(2,"path",25),i(),o(3),i()),a&2){let e=d(2);l(3),M(" ",e.serialNumberError," ")}}function Ll(a,t){a&1&&(n(0,"span",101),o(1,"Select location"),i())}function Fl(a,t){if(a&1&&(n(0,"div",41)(1,"div",147),v(),n(2,"svg",148),u(3,"path",96)(4,"path",97),i()(),b(),n(5,"span",125),o(6),i()()),a&2){let e=d(2);l(6),S(e.selectedLocation.label||e.selectedLocation.name)}}function Ol(a,t){if(a&1&&(n(0,"div",22),o(1),i()),a&2){let e=d().$implicit;l(),S(e.type.name)}}function Hl(a,t){if(a&1){let e=E();n(0,"button",129),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.selectLocation(s))}),n(1,"div",41)(2,"div",149),v(),n(3,"svg",95),u(4,"path",96)(5,"path",97),i()(),b(),n(6,"div")(7,"div",133),o(8),i(),y(9,Ol,2,1,"div",103),i()()()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id)("text-blue-700",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id),l(8),S(r.getLocationLabel(e)),l(),m("ngIf",e.type)}}function jl(a,t){if(a&1&&(n(0,"div",126)(1,"div",127)(2,"div",128),o(3,"Select location"),i(),y(4,Hl,10,6,"button",141),i()()),a&2){let e=d(2);l(4),m("ngForOf",e.locations)}}function Nl(a,t){a&1&&(n(0,"span",101),o(1,"Select department"),i())}function Rl(a,t){if(a&1&&(n(0,"div",41)(1,"div",150),v(),n(2,"svg",151),u(3,"path",152),i()(),b(),n(4,"span",125),o(5),i()()),a&2){let e=d(2);l(5),S(e.selectedDepartment.name)}}function Bl(a,t){if(a&1&&(n(0,"div",22),o(1),i()),a&2){let e=d().$implicit;l(),S(e.description)}}function Gl(a,t){if(a&1&&(n(0,"div",155),o(1),i()),a&2){let e=d().$implicit;l(),M("Code: ",e.code,"")}}function zl(a,t){if(a&1){let e=E();n(0,"button",129),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.selectDepartment(s))}),n(1,"div",41)(2,"div",153),v(),n(3,"svg",66),u(4,"path",152),i()(),b(),n(5,"div")(6,"div",133),o(7),i(),y(8,Bl,2,1,"div",103)(9,Gl,2,1,"div",154),i()()()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id)("text-blue-700",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id),l(7),S(e.name),l(),m("ngIf",e.description),l(),m("ngIf",e.code)}}function $l(a,t){if(a&1&&(n(0,"div",126)(1,"div",127)(2,"div",128),o(3,"Select department"),i(),y(4,zl,10,7,"button",141),i()()),a&2){let e=d(2);l(4),m("ngForOf",e.departments)}}function Ul(a,t){if(a&1&&(n(0,"div",41),u(1,"div",156),n(2,"span",125),o(3),i()()),a&2){let e=d(2);l(),X("background-color",e.selectedStatus.hexColor||"#6B7280"),l(2),S(e.selectedStatus.label)}}function Wl(a,t){a&1&&(n(0,"span",101),o(1,"Select status"),i())}function Yl(a,t){if(a&1){let e=E();n(0,"button",129),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.selectStatus(s))}),n(1,"div",41)(2,"div"),u(3,"div",156),i(),n(4,"div")(5,"div",133),o(6),i(),n(7,"div",22),o(8),i()()()()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value)("text-blue-700",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value),l(2),se("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),l(),X("background-color",e.hexColor||"#6B7280"),l(3),S(e.label),l(2),S(e.description)}}function ql(a,t){if(a&1&&(n(0,"div",157)(1,"div",127)(2,"div",128),o(3,"Select status"),i(),y(4,Yl,9,10,"button",141),i()()),a&2){let e=d(2);l(4),m("ngForOf",e.statusOptions)}}function Ql(a,t){if(a&1){let e=E();n(0,"span"),o(1),n(2,"button",161),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.removeTag(s))}),v(),n(3,"svg",162),u(4,"path",163),i()()()}if(a&2){let e=t.$implicit;se("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),l(),M(" ",e.name," ")}}function Jl(a,t){if(a&1&&(n(0,"div",158)(1,"div",159),y(2,Ql,5,3,"span",160),i()()),a&2){let e=d(2);l(2),m("ngForOf",e.selectedTags)}}function Kl(a,t){if(a&1&&(n(0,"span",22),o(1),i()),a&2){let e=d(2);l(),M(" ",e.selectedTags.length," selected ")}}function Zl(a,t){a&1&&(n(0,"div",168),v(),n(1,"svg",139),u(2,"path",169),i()())}function Xl(a,t){if(a&1){let e=E();n(0,"button",129),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.toggleTag(s))}),n(1,"div",47)(2,"div",41)(3,"div"),u(4,"div"),i(),n(5,"span",133),o(6),i()(),y(7,Zl,3,0,"div",167),i()()}if(a&2){let e=t.$implicit,r=d(3);k("bg-blue-50",r.isTagSelected(e)),l(3),se("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),l(),se("w-3 h-3 rounded-full bg-"+e.color+"-500"),l(2),S(e.name),l(),m("ngIf",r.isTagSelected(e))}}function e0(a,t){if(a&1){let e=E();n(0,"div",126)(1,"div",127)(2,"div",164)(3,"div",85)(4,"input",165),U("ngModelChange",function(s){g(e);let c=d(2);return $(c.newTagInput,s)||(c.newTagInput=s),h(s)}),_("keydown",function(s){g(e);let c=d(2);return h(c.onTagInputKeydown(s))})("click",function(s){return g(e),h(s.stopPropagation())}),i(),n(5,"div",166),o(6," Press Enter "),i()()(),n(7,"div",128),o(8,"Select tags"),i(),y(9,Xl,8,8,"button",130),i()()}if(a&2){let e=d(2);l(4),z("ngModel",e.newTagInput),m("ngModelOptions",It(3,ll)),l(5),m("ngForOf",e.availableTags)}}function t0(a,t){if(a&1){let e=E();n(0,"div",179)(1,"div",180)(2,"img",181),_("error",function(s){let c=g(e).index,x=d(3);return h(x.onImageError(s,c))}),i(),n(3,"div",182)(4,"div",183)(5,"button",184),_("click",function(){let s=g(e).$implicit,c=d(3);return h(c.viewFullImage(s.image_url))}),v(),n(6,"svg",139),u(7,"path",185)(8,"path",186),i()()()(),b(),n(9,"button",187),_("click",function(){let s=g(e).index,c=d(3);return h(c.removeExistingImage(s))}),v(),n(10,"svg",139),u(11,"path",163),i()(),b(),n(12,"div",188),o(13," Existing "),i()(),n(14,"div",189)(15,"p",190),o(16),i(),n(17,"p",134),o(18,"Existing Image"),i()()()}if(a&2){let e=t.$implicit,r=t.index;l(2),m("src",e.image_url,K)("alt","Existing Asset Image "+(r+1)),l(14),S(e.image_path.split("/").pop())}}function n0(a,t){if(a&1){let e=E();n(0,"button",184),_("click",function(){g(e);let s=d().index,c=d(3);return h(c.moveImageUp(s))}),v(),n(1,"svg",139),u(2,"path",195),i()()}}function i0(a,t){if(a&1){let e=E();n(0,"button",184),_("click",function(){g(e);let s=d().index,c=d(3);return h(c.moveImageDown(s))}),v(),n(1,"svg",139),u(2,"path",51),i()()}}function r0(a,t){if(a&1){let e=E();n(0,"div",179)(1,"div",180)(2,"img",191),_("error",function(s){let c=g(e).index,x=d(3);return h(x.onImageError(s,x.existingImages.length+c))})("load",function(s){let c=g(e).index,x=d(3);return h(x.onImageLoad(s,x.existingImages.length+c))}),i(),n(3,"div",192)(4,"div",183),y(5,n0,3,0,"button",193)(6,i0,3,0,"button",193),i()(),n(7,"button",187),_("click",function(){let s=g(e).index,c=d(3);return h(c.removeImage(s))}),v(),n(8,"svg",139),u(9,"path",163),i()(),b(),n(10,"div",194),o(11," New "),i()(),n(12,"div",189)(13,"p",190),o(14),i(),n(15,"p",134),o(16),i()()()}if(a&2){let e,r=t.$implicit,s=t.index,c=d(3);l(2),m("src",r,K)("alt","Asset Image "+(s+1)),l(3),m("ngIf",s>0),l(),m("ngIf",s<c.imagePreviewUrls.length-1),l(8),S(c.images[s]==null?null:c.images[s].name),l(2),M("",(((e=c.images[s]==null?null:c.images[s].size)!==null&&e!==void 0?e:0)/1024/1024).toFixed(1)," MB")}}function a0(a,t){if(a&1){let e=E();n(0,"div",170)(1,"div",171)(2,"h4",172),o(3),i(),n(4,"button",173),_("click",function(){g(e);let s=d(2);return s.removeAllImages(),h(s.removeAllExistingImages())}),o(5," Remove All "),i()(),n(6,"div",174),y(7,t0,19,3,"div",175)(8,r0,17,6,"div",175),i(),n(9,"div",176)(10,"div",102),v(),n(11,"svg",177),u(12,"path",105),i(),b(),n(13,"p",178)(14,"strong"),o(15,"Gallery Tips:"),i(),o(16," Existing images are preserved. New images can be reordered. Green badges indicate existing images, blue badges indicate new uploads. "),i()()()()}if(a&2){let e=d(2);l(3),M("Asset Images (",e.existingImages.length+e.imagePreviewUrls.length,")"),l(4),m("ngForOf",e.existingImages),l(),m("ngForOf",e.imagePreviewUrls)}}function o0(a,t){if(a&1&&(n(0,"div",196)(1,"div",102),v(),n(2,"svg",197),u(3,"path",25),i(),b(),n(4,"p",198),o(5),i()()()),a&2){let e=d(2);l(5),S(e.submitError)}}function s0(a,t){if(a&1&&(n(0,"div",199)(1,"div",102),v(),n(2,"svg",71),u(3,"path",169),i(),b(),n(4,"p",200),o(5),i()()()),a&2){let e=d(2);l(5),S(e.submitSuccess)}}function l0(a,t){a&1&&(n(0,"span",102),v(),n(1,"svg",201),u(2,"path",169),i(),b(),n(3,"span"),o(4,"Update Asset"),i()())}function c0(a,t){a&1&&(n(0,"span",102),v(),n(1,"svg",202),u(2,"circle",19)(3,"path",20),i(),b(),n(4,"span"),o(5,"Updating Asset..."),i()())}function d0(a,t){if(a&1){let e=E();n(0,"div")(1,"form",28),_("ngSubmit",function(){g(e);let s=d();return h(s.onSubmit())}),n(2,"div",29)(3,"div",30)(4,"div",31),v(),n(5,"svg",32),u(6,"path",33),i()(),b(),n(7,"h2",34),o(8,"Basic Information"),i()(),n(9,"div",35)(10,"div")(11,"label",36),o(12," Asset Name "),n(13,"span",37),o(14,"*"),i()(),u(15,"input",38),y(16,ml,4,1,"div",39),n(17,"div",40),o(18,"Maximum 100 characters"),i()(),n(19,"div")(20,"label",36),o(21,"Asset ID"),i(),n(22,"div",41),u(23,"input",42),n(24,"span",43),o(25," auto-generated "),i()(),n(26,"p",40),o(27,"Unique identifier automatically assigned"),i()()(),n(28,"div",44)(29,"label",36),o(30,"Parent Asset"),i(),n(31,"div",45),_("click",function(s){return g(e),h(s.stopPropagation())}),n(32,"button",46),_("click",function(){g(e);let s=d();return h(s.showParentDropdown=!s.showParentDropdown)}),n(33,"div",47),y(34,pl,2,0,"span",48)(35,ul,2,2,"span",49),v(),n(36,"svg",50),u(37,"path",51),i()()(),y(38,gl,7,3,"div",52),i(),b(),n(39,"div",40),o(40,"Optional: Select a parent asset if this asset is a child of another."),i()(),n(41,"div",44)(42,"label",36),o(43,"Description"),i(),u(44,"textarea",53),n(45,"div",40),o(46,"Maximum 500 characters"),i()(),n(47,"div")(48,"label",54),o(49,"Health Score"),i(),n(50,"div",55)(51,"div",56)(52,"span",57),o(53,"Current Score"),i(),n(54,"span",58),o(55),i()(),n(56,"div",59),u(57,"div",60)(58,"div",61)(59,"input",62)(60,"div",63),i(),n(61,"div",64)(62,"span"),o(63,"Poor (0%)"),i(),n(64,"span"),o(65,"Fair (25%)"),i(),n(66,"span"),o(67,"Good (50%)"),i(),n(68,"span"),o(69,"Very Good (75%)"),i(),n(70,"span"),o(71,"Excellent (100%)"),i()()()()(),n(72,"div",29)(73,"div",30)(74,"div",65),v(),n(75,"svg",66),u(76,"path",67),i()(),b(),n(77,"h2",34),o(78,"Asset Classification"),i()(),n(79,"div",68)(80,"div")(81,"label",36),o(82," Asset Type "),n(83,"span",37),o(84,"*"),i()(),n(85,"div",45),_("click",function(s){return g(e),h(s.stopPropagation())}),n(86,"button",46),_("click",function(){g(e);let s=d();return h(s.toggleAssetTypeDropdown())}),n(87,"div",47),y(88,hl,2,0,"span",48)(89,xl,6,5,"div",69),v(),n(90,"svg",50),u(91,"path",51),i()()(),y(92,Cl,5,1,"div",52),i(),y(93,Sl,4,1,"div",39),i(),b(),n(94,"div")(95,"label",36),o(96," Category "),n(97,"span",37),o(98,"*"),i()(),n(99,"div",45),_("click",function(s){return g(e),h(s.stopPropagation())}),n(100,"button",46),_("click",function(){g(e);let s=d();return h(s.toggleCategoryDropdown())}),n(101,"div",47),y(102,El,2,0,"span",48)(103,Ml,2,1,"span",49),v(),n(104,"svg",50),u(105,"path",51),i()()(),y(106,Il,5,1,"div",52),i(),y(107,Vl,4,1,"div",39),i()()(),b(),n(108,"div",29)(109,"div",30)(110,"div",70),v(),n(111,"svg",71),u(112,"path",72),i()(),b(),n(113,"h2",34),o(114,"Technical Details"),i()(),n(115,"div",73)(116,"div")(117,"label",36),o(118,"Manufacturer"),i(),u(119,"input",74),n(120,"div",40),o(121,"Maximum 100 characters"),i()(),n(122,"div")(123,"label",36),o(124,"Brand"),i(),u(125,"input",75),n(126,"div",40),o(127,"Optional"),i()(),n(128,"div")(129,"label",36),o(130,"Model"),i(),u(131,"input",76),n(132,"div",40),o(133,"Maximum 100 characters"),i()()(),n(134,"div",77)(135,"div")(136,"label",36),o(137,"Dimensions"),i(),u(138,"input",78),n(139,"div",40),o(140,"L \xD7 W \xD7 H (any unit)"),i()(),n(141,"div")(142,"label",36),o(143,"Weight"),i(),u(144,"input",79),n(145,"div",40),o(146,"Any unit"),i()(),n(147,"div")(148,"label",36),o(149,"Capacity"),i(),u(150,"input",80),n(151,"div",40),o(152,"Optional"),i()(),n(153,"div")(154,"label",36),o(155," Serial Number "),n(156,"span",37),o(157,"*"),i()(),u(158,"input",81),y(159,Pl,4,1,"div",39),n(160,"div",40),o(161,"Required, max 100 chars, must be unique within your company"),i()()()(),n(162,"div",29)(163,"div",30)(164,"div",82),v(),n(165,"svg",83),u(166,"path",84),i()(),b(),n(167,"h2",34),o(168,"Financial Information"),i()(),n(169,"div",35)(170,"div")(171,"label",36),o(172,"Purchase Value (USD)"),i(),n(173,"div",85)(174,"div",86)(175,"span",87),o(176,"$ "),i()(),u(177,"input",88),i(),n(178,"div",40),o(179,"Must be a non-negative number"),i()(),n(180,"div")(181,"label",36),o(182,"Purchase Date"),i(),u(183,"input",89,0),n(185,"div",40),o(186,"Cannot be in the future"),i()()(),n(187,"div",35)(188,"div")(189,"label",36),o(190,"Depreciation Rate (%)"),i(),u(191,"input",90),n(192,"div",40),o(193,"Annual depreciation rate (0-100%)"),i()(),n(194,"div")(195,"label",36),o(196,"Depreciation Life (Years)"),i(),u(197,"input",91),n(198,"div",40),o(199,"Useful life for depreciation calculation (1-100 years)"),i()()(),n(200,"div",35)(201,"div")(202,"label",36),o(203,"Warranty Information"),i(),u(204,"input",92),n(205,"div",40),o(206,"Warranty details (max 255 characters)"),i()(),n(207,"div")(208,"label",36),o(209,"Insurance Information"),i(),u(210,"input",93),n(211,"div",40),o(212,"Insurance details (max 255 characters)"),i()()()(),n(213,"div",29)(214,"div",30)(215,"div",94),v(),n(216,"svg",95),u(217,"path",96)(218,"path",97),i()(),b(),n(219,"h2",34),o(220,"Location & Assignment"),i()(),n(221,"div",68)(222,"div")(223,"label",36),o(224,"Location"),i(),n(225,"div",45),_("click",function(s){return g(e),h(s.stopPropagation())}),n(226,"button",46),_("click",function(){g(e);let s=d();return h(s.toggleLocationDropdown())}),n(227,"div",47),y(228,Ll,2,0,"span",48)(229,Fl,7,1,"div",69),v(),n(230,"svg",50),u(231,"path",51),i()()(),y(232,jl,5,1,"div",52),i()(),b(),n(233,"div")(234,"label",36),o(235,"Department ID"),i(),n(236,"div",45),_("click",function(s){return g(e),h(s.stopPropagation())}),n(237,"button",46),_("click",function(){g(e);let s=d();return h(s.toggleDepartmentDropdown())}),n(238,"div",47),y(239,Nl,2,0,"span",48)(240,Rl,6,1,"div",69),v(),n(241,"svg",50),u(242,"path",51),i()()(),y(243,$l,5,1,"div",52),i(),b(),n(244,"div",40),o(245,"Optional department assignment"),i()(),n(246,"div")(247,"label",36),o(248,"Status"),i(),n(249,"div",45),_("click",function(s){return g(e),h(s.stopPropagation())}),n(250,"button",46),_("click",function(){g(e);let s=d();return h(s.toggleStatusDropdown())}),n(251,"div",47),y(252,Ul,4,3,"div",98)(253,Wl,2,0,"ng-template",null,1,Pt),v(),n(255,"svg",50),u(256,"path",51),i()()(),y(257,ql,5,1,"div",99),i(),b(),n(258,"div",40),o(259,"Current operational status of the asset"),i()(),n(260,"div")(261,"label",36),o(262,"Tags"),i(),y(263,Jl,3,1,"div",100),n(264,"div",45),_("click",function(s){return g(e),h(s.stopPropagation())}),n(265,"button",46),_("click",function(){g(e);let s=d();return h(s.toggleTagsDropdown())}),n(266,"div",47)(267,"span",101),o(268),i(),n(269,"div",102),y(270,Kl,2,1,"span",103),v(),n(271,"svg",50),u(272,"path",51),i()()()(),y(273,e0,10,4,"div",52),i(),b(),n(274,"div",40),v(),n(275,"svg",104),u(276,"path",105),i(),o(277," Select existing tags or type to create new ones. Press Enter to add custom tags. "),i()()()(),b(),n(278,"div",29)(279,"div",30)(280,"div",106),v(),n(281,"svg",107),u(282,"path",108),i()(),b(),n(283,"h2",34),o(284,"Asset Image"),i()(),n(285,"div")(286,"label",36),o(287,"Upload Image"),i(),n(288,"div",109),_("click",function(){g(e);let s=d();return h(s.triggerFileInput())})("dragover",function(s){g(e);let c=d();return h(c.onDragOver(s))})("dragleave",function(s){g(e);let c=d();return h(c.onDragLeave(s))})("drop",function(s){g(e);let c=d();return h(c.onDrop(s))}),n(289,"div",110)(290,"div",111),v(),n(291,"svg",112),u(292,"path",113),i()(),b(),n(293,"p",114),o(294),i(),n(295,"input",115,2),_("change",function(s){g(e);let c=d();return h(c.onFileChange(s))}),i()()(),y(297,a0,17,3,"div",116),i()(),y(298,o0,6,1,"div",117)(299,s0,6,1,"div",118),n(300,"div",119)(301,"button",120),_("click",function(){g(e);let s=d();return h(s.goBack())}),o(302," Cancel "),i(),n(303,"button",121),y(304,l0,5,0,"span",122)(305,c0,6,0,"span",122),i()()()()}if(a&2){let e,r,s,c,x,I,L,Y,B,J,ee,ve=tt(254),A=d();l(),m("formGroup",A.assetForm),l(14),k("border-red-300",A.nameError),l(),m("ngIf",A.nameError),l(7),m("value",(A.asset==null?null:A.asset.asset_id)||(A.asset==null?null:A.asset.id)),l(9),k("border-blue-500",A.showParentDropdown),l(2),m("ngIf",!((e=A.assetForm.get("parent_id"))!=null&&e.value)),l(),m("ngIf",((r=A.assetForm.get("parent_id"))==null?null:r.value)&&A.getSelectedParent()),l(),k("rotate-180",A.showParentDropdown),l(2),m("ngIf",A.showParentDropdown),l(16),k("text-red-600",(((s=A.assetForm.get("health_score"))==null?null:s.value)||85)<50)("text-green-600",(((c=A.assetForm.get("health_score"))==null?null:c.value)||85)>=50),l(),M("",((x=A.assetForm.get("health_score"))==null?null:x.value)||85,"%"),l(3),X("width",((I=A.assetForm.get("health_score"))==null?null:I.value)||85,"%"),k("bg-red-500",(((L=A.assetForm.get("health_score"))==null?null:L.value)||85)<50)("bg-green-500",(((Y=A.assetForm.get("health_score"))==null?null:Y.value)||85)>=50),l(2),X("left",((B=A.assetForm.get("health_score"))==null?null:B.value)||85,"%"),k("bg-red-500",(((J=A.assetForm.get("health_score"))==null?null:J.value)||85)<50)("bg-green-500",(((ee=A.assetForm.get("health_score"))==null?null:ee.value)||85)>=50),l(26),k("border-red-300",A.assetTypeError)("border-blue-500",A.showAssetTypeDropdown),l(2),m("ngIf",!A.selectedAssetType),l(),m("ngIf",A.selectedAssetType),l(),k("rotate-180",A.showAssetTypeDropdown),l(2),m("ngIf",A.showAssetTypeDropdown),l(),m("ngIf",A.assetTypeError),l(7),k("border-red-300",A.categoryError)("border-blue-500",A.showCategoryDropdown),l(2),m("ngIf",!A.selectedCategory),l(),m("ngIf",A.selectedCategory),l(),k("rotate-180",A.showCategoryDropdown),l(2),m("ngIf",A.showCategoryDropdown),l(),m("ngIf",A.categoryError),l(51),k("border-red-300",A.serialNumberError),l(),m("ngIf",A.serialNumberError),l(67),k("border-blue-500",A.showLocationDropdown),l(2),m("ngIf",!A.selectedLocation),l(),m("ngIf",A.selectedLocation),l(),k("rotate-180",A.showLocationDropdown),l(2),m("ngIf",A.showLocationDropdown),l(5),k("border-blue-500",A.showDepartmentDropdown),l(2),m("ngIf",!A.selectedDepartment),l(),m("ngIf",A.selectedDepartment),l(),k("rotate-180",A.showDepartmentDropdown),l(2),m("ngIf",A.showDepartmentDropdown),l(7),k("border-blue-500",A.showStatusDropdown),l(2),m("ngIf",A.selectedStatus)("ngIfElse",ve),l(3),k("rotate-180",A.showStatusDropdown),l(2),m("ngIf",A.showStatusDropdown),l(6),m("ngIf",A.selectedTags.length>0),l(2),k("border-blue-500",A.showTagsDropdown),l(3),M(" ",A.selectedTags.length===0?"Select tags":"Add more tags"," "),l(2),m("ngIf",A.selectedTags.length>0),l(),k("rotate-180",A.showTagsDropdown),l(2),m("ngIf",A.showTagsDropdown),l(15),k("border-gray-300",!A.isDragOver)("border-blue-500",A.isDragOver)("bg-blue-50",A.isDragOver)("hover:border-blue-400",!A.isDragOver),l(3),k("text-gray-400",!A.isDragOver)("text-blue-500",A.isDragOver),l(2),k("text-gray-500",!A.isDragOver)("text-blue-600",A.isDragOver),l(),M(" ",A.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),l(3),m("ngIf",A.existingImages.length>0||A.imagePreviewUrls.length>0),l(),m("ngIf",A.submitError),l(),m("ngIf",A.submitSuccess),l(2),m("disabled",A.saving),l(2),m("disabled",A.saving||!A.isFormValid()),l(),m("ngIf",!A.saving),l(),m("ngIf",A.saving)}}var dt=class a{constructor(t,e,r,s,c){this.fb=t;this.route=e;this.router=r;this.assetService=s;this.angularLocation=c;this.assetForm=this.fb.group({name:["",[Te.required,Te.minLength(2)]],description:[""],serial_number:["",[Te.minLength(0)]],model:[""],manufacturer:[""],purchase_date:[""],purchase_price:[null],depreciation:[null],depreciation_life:[null],location_id:[null],department_id:[null],parent_id:[null],warranty:[""],insurance:[""],health_score:[85,[Te.min(0),Te.max(100)]],brand:[""],dimensions:[""],weight:[""],capacity:[""],status:[null],type:[null,Te.required],category_id:[null,Te.required],tags:[[]]})}destroy$=new He;dateInputs;fileInput;flatpickrInstances=[];asset=null;assetForm;loading=!0;saving=!1;error="";successMessage="";categories=[];locations=[];departments=[];availableTags=[];statusOptionsFromAPI=[];showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";assetTypes=[];assetTypesFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];previewImage=null;selectedFile=null;images=[];imagePreviewUrls=[];existingImages=[];removedImageIds=[];isDragOver=!1;nameError="";assetTypeError="";categoryError="";serialNumberError="";submitError="";submitSuccess="";possibleParents=[];ngOnInit(){this.route.params.pipe(R(this.destroy$)).subscribe(t=>{let e=t.id;e&&(this.loadAsset(e),this.assetService.getPossibleParents(e).subscribe(r=>{r.success&&r.data?.possible_parents&&(this.possibleParents=r.data.possible_parents)}))}),this.loadAssetTypes(),this.loadCategories(),this.loadLocations(),this.loadDepartments(),this.loadAvailableTags(),this.loadAssetStatuses()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let r=t.nativeElement,s=r.getAttribute("formControlName");if(console.log("Processing date input:",s),s==="purchase_date"){console.log("Initializing Flatpickr for purchase_date");let c={dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,maxDate:"today",defaultDate:null,onChange:(L,Y)=>{console.log("Date selected:",Y),this.assetForm.get("purchase_date")?.setValue(Y)}},x=this.assetForm.get("purchase_date")?.value;x&&(c.defaultDate=this.convertDisplayDateToDate(x));let I=Be(r,c);this.flatpickrInstances.push(I),console.log("Flatpickr initialized successfully for purchase_date")}}})},50)}loadAsset(t){this.loading=!0,this.error="",this.assetService.getAsset(t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.populateForm()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}populateForm(){if(this.asset){let t=this.asset.purchase_date?this.convertBackendDateToDisplay(this.asset.purchase_date):"",e=this.asset.warranty?this.convertBackendDateToDisplay(this.asset.warranty):"";this.assetForm.patchValue({name:this.asset.name||"",description:this.asset.description||"",serial_number:this.asset.serial_number||"",model:this.asset.model||"",manufacturer:this.asset.manufacturer||"",brand:this.asset.brand||"",dimensions:this.asset.dimensions||"",weight:this.asset.weight||"",capacity:this.asset.capacity||"",purchase_date:t,purchase_price:this.asset.purchase_price||null,depreciation:this.asset.depreciation||null,depreciation_life:this.asset.depreciation_life||null,location_id:this.asset.location_id||null,department_id:this.asset.department_id||null,warranty:e,insurance:this.asset.insurance||"",health_score:this.asset.health_score||85,status:this.asset.status||null,type:this.asset.type||"",category_id:this.asset.category_id||null,tags:this.asset.tags||[],parent_id:this.asset.parent_id||null}),this.asset.images&&Array.isArray(this.asset.images)&&(this.existingImages=this.asset.images),setTimeout(()=>{this.selectedAssetType=this.assetTypes.find(x=>x.id==this.asset.type)||null,this.selectedCategory=this.categories.find(x=>x.id===this.asset.category_id)||null,this.selectedLocation=this.locations.find(x=>x.id===this.asset.location_id)||null,this.selectedDepartment=this.departments.find(x=>x.id===this.asset.department_id)||null;let r=this.asset?.status??this.asset?.asset_status?.id??this.asset?.asset_status?.name??null,s=r!=null&&!isNaN(Number(r))?Number(r):null,c=typeof r=="string"?r:this.asset?.asset_status?.name??null;this.selectedStatus=this.statusOptions.find(x=>{let I=s!==null&&(x.value===s||x.id===s),L=!!c&&x.label.toLowerCase()===String(c).toLowerCase();return I||L})||null,this.selectedStatus&&this.assetForm.patchValue({status:this.selectedStatus.value}),this.asset.tags&&Array.isArray(this.asset.tags)&&(this.selectedTags=this.asset.tags.map(x=>this.availableTags.find(I=>I.id===x.id)||x)),this.assetForm.markAllAsTouched(),this.assetForm.updateValueAndValidity(),setTimeout(()=>{this.initializeFlatpickr()},100)},100)}}loadAssetTypes(){this.assetService.getAssetTypes().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.assetTypesFromAPI=t.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,value:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})),this.asset&&this.populateForm())},error:t=>{console.error("Error loading asset types:",t)}})}loadCategories(){this.assetService.getAssetCategories().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&t.data?.categories&&(this.categories=t.data.categories,this.asset&&this.populateForm())},error:t=>{console.error("Error loading categories:",t)}})}loadLocations(){this.assetService.getLocations().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.locations=t.data.locations||t.data,this.asset&&this.populateForm())},error:t=>{console.error("Error loading locations:",t)}})}loadDepartments(){this.assetService.getDepartments().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.departments=t.data,this.asset&&this.populateForm())},error:t=>{console.error("Error loading departments:",t)}})}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetStatuses(){this.assetService.getAssetStatuses().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.statusOptionsFromAPI=t.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,r)=>e.sort_order-r.sort_order),this.asset&&this.populateForm())},error:t=>{console.error("Error loading asset statuses:",t)}})}hexToTailwindColor(t){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[t.toUpperCase()]||"gray"}getColorForType(t){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[t]||"#6b7280"}onAssetTypeIconError(t,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}buildLocationLabel(t){return t?t.full_path?t.full_path:Array.isArray(t.complete_hierarchy)&&t.complete_hierarchy.length>0?t.complete_hierarchy.map(e=>e.name).join(" \u2192 "):Array.isArray(t.ancestors_with_details)&&t.ancestors_with_details.length>0?t.ancestors_with_details.map(e=>e.name).join(" \u2192 ")+" \u2192 "+(t.name||""):t.name||"":""}getLocationLabel(t){return this.buildLocationLabel(t)}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.assetForm.patchValue({type:t.id}),this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(t){this.selectedCategory=t,this.assetForm.patchValue({category_id:t.id}),this.showCategoryDropdown=!1,this.clearErrors()}selectLocation(t){this.selectedLocation=Xe(Ze({},t),{label:this.buildLocationLabel(t)}),this.assetForm.patchValue({location_id:t.id}),this.showLocationDropdown=!1}selectStatus(t){this.selectedStatus=t,this.assetForm.patchValue({status:t.value}),this.showStatusDropdown=!1}selectDepartment(t){this.selectedDepartment=t,this.assetForm.patchValue({department_id:t.id}),this.showDepartmentDropdown=!1}toggleTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.some(e=>e.id===t.id)}onTagInputKeydown(t){t.key==="Enter"&&(t.preventDefault(),this.createNewTag())}createNewTag(){let t=this.newTagInput.trim();if(t&&!this.selectedTags.some(e=>e.name.toLowerCase()===t.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],r=e[Math.floor(Math.random()*e.length)],s={id:Date.now(),name:t,color:r,isNew:!0};this.selectedTags.push(s),this.newTagInput=""}}removeTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1&&this.selectedTags.splice(e,1)}onFileChange(t){if(t.target.files&&t.target.files.length){let e=Array.from(t.target.files);this.processFiles(e),t.target.value=""}}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1;let e=t.dataTransfer?.files;if(e&&e.length>0){let r=Array.from(e).filter(s=>s.type.startsWith("image/"));r.length>0&&this.processFiles(r)}}processFiles(t){let r=["image/jpeg","image/png","image/gif","image/webp"],s=[];for(let c of t){if(!r.includes(c.type)){console.warn("Invalid file type:",c.name);continue}if(c.size>10*1024*1024){console.warn("File too large:",c.name);continue}if(this.images.some(L=>L.name===c.name&&L.size===c.size)){console.warn("Duplicate file skipped:",c.name);continue}if(this.images.length+s.length>=10){console.warn("Max image count exceeded:",c.name);break}s.push(c);let I=new FileReader;I.onload=L=>{L.target?.result&&this.imagePreviewUrls.push(L.target.result)},I.onerror=L=>{console.error("Preview failed for:",c.name,L)},I.readAsDataURL(c)}this.images=[...this.images,...s]}removeImage(t){this.images.splice(t,1),this.imagePreviewUrls.splice(t,1)}removeAllImages(){this.images=[],this.imagePreviewUrls=[]}removeExistingImage(t){let e=this.existingImages[t];e&&e.id&&this.removedImageIds.push(e.id),this.existingImages.splice(t,1)}removeAllExistingImages(){this.existingImages.forEach(t=>{t&&t.id&&this.removedImageIds.push(t.id)}),this.existingImages=[]}moveImage(t,e){if(e>=0&&e<this.images.length){let r=this.images.splice(t,1)[0];this.images.splice(e,0,r);let s=this.imagePreviewUrls.splice(t,1)[0];this.imagePreviewUrls.splice(e,0,s)}}moveImageUp(t){t>0&&this.moveImage(t,t-1)}moveImageDown(t){t<this.images.length-1&&this.moveImage(t,t+1)}triggerFileInput(){this.fileInput.nativeElement.click()}onImageError(t,e){console.warn("Image failed to load at index:",e),t.target.onerror=null,t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onImageLoad(t,e){console.log("Image loaded successfully at index:",e)}viewFullImage(t){window.open(t,"_blank")}convertImagesToBase64(){return Promise.all(this.images.map(t=>new Promise((e,r)=>{let s=new FileReader;s.onload=()=>{s.result?e(s.result):r(new Error("Failed to read file"))},s.onerror=()=>r(s.error),s.readAsDataURL(t)})))}onCategoryIconError(t,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}validateForm(){let t=!0;this.clearErrors(),!this.assetForm.get("name")?.value||this.assetForm.get("name")?.value.trim().length===0?(this.nameError="Asset name is required",t=!1):this.assetForm.get("name")?.value.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",t=!1),this.selectedAssetType||(this.assetTypeError="Asset type is required",t=!1),this.selectedCategory||(this.categoryError="Category is required",t=!1);let e=this.assetForm.get("serial_number")?.value;return e&&e.trim().length===0?(this.serialNumberError="Serial number cannot be empty if provided",t=!1):e&&e.length>255&&(this.serialNumberError="Serial number cannot exceed 255 characters",t=!1),t}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}onSubmit(){!this.validateForm()||this.saving||!this.asset||this.assetForm.valid&&!this.saving&&this.asset&&(this.saving=!0,this.error="",this.successMessage="",this.submitError="",this.submitSuccess="",this.convertImagesToBase64().then(t=>{let e=this.assetForm.value;e.tags=this.selectedTags.map(r=>r.name),e.purchase_date&&(e.purchase_date=this.convertDateToBackendFormat(e.purchase_date)),e.warranty&&(e.warranty=this.convertDateToBackendFormat(e.warranty)),e.images=t,e.existing_images=this.existingImages.map(r=>r.id||r.image_url),this.removedImageIds.length>0&&(e.remove_image_ids=this.removedImageIds),this.assetService.updateAsset(this.asset.id,e).pipe(R(this.destroy$)).subscribe({next:r=>{r.success?(this.submitSuccess="Asset updated successfully!",setTimeout(()=>{this.router.navigate(["/assets/preview",this.asset.id])},2e3)):this.submitError=r.message||"Failed to update asset",this.saving=!1},error:r=>{this.submitError=r.error?.message||"An error occurred while updating the asset",this.saving=!1}})}).catch(t=>{this.saving=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",t)}))}goBack(){this.angularLocation.back()}onDocumentClick(t){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}isFormValid(){return this.assetForm.valid&&this.selectedAssetType!==null&&this.selectedCategory!==null&&!this.nameError&&!this.assetTypeError&&!this.categoryError&&!this.serialNumberError}getSelectedParent(){return this.possibleParents.find(t=>t.id===this.assetForm.get("parent_id")?.value)}convertDateToBackendFormat(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${r}-${s}-${c}`}catch(e){return console.error("Date conversion error:",e),t}}convertBackendDateToDisplay(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",r).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),t}}convertDisplayDateToDate(t){if(!t)return null;try{let e=new Date(t);return isNaN(e.getTime())?null:e}catch(e){return console.error("Date conversion error:",e),null}}static \u0275fac=function(e){return new(e||a)(G(Wt),G(nt),G(Ae),G(ye),G(Lt))};static \u0275cmp=te({type:a,selectors:[["app-asset-edit"]],viewQuery:function(e,r){if(e&1&&(Se(ol,5),Se(sl,5)),e&2){let s;Ee(s=Me())&&(r.fileInput=s.first),Ee(s=Me())&&(r.dateInputs=s)}},hostBindings:function(e,r){e&1&&_("click",function(c){return r.onDocumentClick(c)},!1,et)},decls:16,vars:3,consts:[["dateInput",""],["statusPlaceholder",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-edit-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","flex items-center justify-center py-20",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[3,"ngSubmit","formGroup"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","formControlName","name",1,"input"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","space-x-3"],["type","text","readonly","",1,"input","flex-1",3,"value"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","formControlName","description","maxlength","500",1,"input","resize-none"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","formControlName","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","placeholder","e.g., Dell, HP, Toyota","formControlName","manufacturer","maxlength","100",1,"input"],["type","text","placeholder","e.g., Apple, Samsung","formControlName","brand","maxlength","100",1,"input"],["type","text","placeholder","e.g., PowerEdge R730","formControlName","model","maxlength","100",1,"input"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mt-6"],["type","text","formControlName","dimensions","placeholder","e.g., 120\xD760\xD740 cm",1,"input"],["type","text","formControlName","weight","placeholder","e.g., 12.5 kg",1,"input"],["type","text","formControlName","capacity","placeholder","e.g., 256 GB, 5000 mAh, 2 Ton",1,"input"],["type","text","placeholder","e.g., SN123456789","formControlName","serial_number","maxlength","100",1,"input"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","formControlName","purchase_price","step","0.01","min","0",1,"input",2,"padding-left","24px"],["type","text","formControlName","purchase_date","placeholder","Select purchase date","readonly","",1,"input"],["type","number","formControlName","depreciation","placeholder","e.g., 20","min","0","max","100","step","0.01",1,"input"],["type","number","formControlName","depreciation_life","placeholder","e.g., 5","min","1","max","100",1,"input"],["type","text","formControlName","warranty","placeholder","e.g., 2 years manufacturer warranty","maxlength","255",1,"input"],["type","text","formControlName","insurance","placeholder","e.g., Policy #12345, expires 2025-12-31","maxlength","255",1,"input"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","flex items-center space-x-3",4,"ngIf","ngIfElse"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel","ngModelOptions"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mt-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","src","alt"],[1,"absolute","inset-0","bg-black","opacity-0","group-hover:opacity-50","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","px-2","py-1","bg-green-600","text-white","rounded","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],[1,"absolute","top-2","left-2","px-2","py-1","bg-blue-600","text-white","rounded","text-xs","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"]],template:function(e,r){e&1&&(n(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"button",7),_("click",function(){return r.goBack()}),v(),n(5,"svg",8),u(6,"path",9),i(),b(),n(7,"span",10),o(8,"Back to Assets"),i()()(),n(9,"h1",11),o(10,"Edit Asset"),i(),n(11,"p",12),o(12," Update asset information and specifications "),i()(),y(13,cl,10,0,"div",13)(14,dl,11,1,"div",13)(15,d0,306,105,"div",14),i()()),e&2&&(l(13),m("ngIf",r.loading),l(),m("ngIf",r.error&&!r.loading),l(),m("ngIf",!r.loading&&!r.error))},dependencies:[me,ke,ie,Yt,Ne,pe,jt,Nt,ue,je,Ut,zt,Gt,Rt,Bt,fe,be,Ve],styles:[".asset-edit-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 768px){.asset-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.transition-transform[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb;font-family:inherit}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6;font-weight:600}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}[_nghost-%COMP%]     .flatpickr-input{cursor:pointer}[_nghost-%COMP%]     .flatpickr-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.slider-input[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;outline:none;z-index:20}.slider-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;position:relative;z-index:30}.slider-input[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;box-shadow:none}.slider-input[_ngcontent-%COMP%]:focus{outline:none}"]})};function m0(a,t){if(a&1&&(n(0,"div",20)(1,"div",12),v(),n(2,"svg",21),u(3,"path",22),i(),b(),n(4,"span",23),o(5),i()()()),a&2){let e=d();l(5),S(e.errorMessage)}}function p0(a,t){if(a&1){let e=E();n(0,"div")(1,"p",35),o(2,"Choose Excel File"),i(),n(3,"p",36),o(4,"or drag and drop your file here"),i(),n(5,"button",37),_("click",function(){g(e);let s=tt(8);return h(s.click())}),o(6," Browse Files "),i(),n(7,"input",38,0),_("change",function(s){g(e);let c=d(2);return h(c.parseFile(s))}),i()()}}function u0(a,t){if(a&1&&(n(0,"div",32)(1,"div",39),v(),n(2,"svg",40),u(3,"path",41),i()(),b(),n(4,"p",42),o(5,"File Uploaded Successfully!"),i(),n(6,"p",43),o(7),i()()),a&2){let e=d(2);l(7),S(e.uploadedFile==null?null:e.uploadedFile.name)}}function f0(a,t){if(a&1&&(n(0,"div")(1,"div",24)(2,"div",25),v(),n(3,"svg",26),u(4,"path",27),i(),y(5,p0,9,0,"div",19)(6,u0,8,1,"div",28),i()(),b(),n(7,"div",29)(8,"h3",30),o(9,"File Requirements:"),i(),n(10,"ul",31)(11,"li"),o(12,"\u2022 Excel files only (.xlsx, .xls)"),i(),n(13,"li"),o(14,"\u2022 First row should contain column headers"),i(),n(15,"li"),o(16,"\u2022 Maximum file size: 10MB"),i(),n(17,"li"),o(18,"\u2022 Required columns: Asset Name, Location, Category"),i()()(),n(19,"div",32)(20,"p",33),o(21," Need a template? Download our sample Excel file: "),i(),n(22,"a",34),o(23," Download Excel Template "),i()()()),a&2){let e=d();l(5),m("ngIf",!e.uploaded),l(),m("ngIf",e.uploaded)}}function g0(a,t){if(a&1&&(n(0,"div",51)(1,"span",52),o(2,"Modified:"),i(),n(3,"span",54),o(4),de(5,"date"),i()()),a&2){let e=d(2);l(4),S(Ue(5,1,e.uploadedFile==null?null:e.uploadedFile.lastModified,"medium"))}}function h0(a,t){if(a&1&&(n(0,"div",61)(1,"h4",62),o(2,"File Analysis:"),i(),n(3,"div",63)(4,"div"),o(5),i(),n(6,"div"),o(7),i(),n(8,"div"),o(9),i()()()),a&2){let e=d(2);l(5),M("Total rows: ",e.importResults.file_stats.total_rows_processed,""),l(2),M("Valid assets: ",e.importResults.file_stats.valid_assets_found,""),l(2),M("Skipped rows: ",e.importResults.file_stats.skipped_rows,"")}}function _0(a,t){a&1&&(v(),n(0,"svg",64),u(1,"circle",65)(2,"path",66),i())}function v0(a,t){if(a&1){let e=E();n(0,"div")(1,"div",32)(2,"div",44),v(),n(3,"svg",45),u(4,"path",46),i()(),b(),n(5,"h2",47),o(6,"Ready to Import"),i(),n(7,"p",48),o(8,"Your file has been validated and is ready for import."),i(),n(9,"div",49)(10,"div",50)(11,"div",51)(12,"span",52),o(13,"File:"),i(),n(14,"span",53),o(15),i()(),n(16,"div",51)(17,"span",52),o(18,"Size:"),i(),n(19,"span",54),o(20),i()(),y(21,g0,6,4,"div",55),i(),y(22,h0,10,3,"div",56),i(),n(23,"div",57)(24,"button",58),_("click",function(){g(e);let s=d();return h(s.resetImport())}),o(25," Choose Different File "),i(),n(26,"button",59),_("click",function(){g(e);let s=d();return h(s.startBulkImport())}),y(27,_0,3,0,"svg",60),o(28),i()()()()}if(a&2){let e=d();l(15),S(e.uploadedFile==null?null:e.uploadedFile.name),l(5),M("",e.uploadedFile!=null&&e.uploadedFile.size?(e.uploadedFile.size/1024/1024).toFixed(2):"0"," MB"),l(),m("ngIf",e.uploadedFile==null?null:e.uploadedFile.lastModified),l(),m("ngIf",e.importResults==null?null:e.importResults.file_stats),l(4),m("disabled",e.importLoading),l(),m("ngIf",e.importLoading),l(),M(" ",e.importLoading?"Starting Import...":"Start Import"," ")}}var mt=class a{constructor(t,e,r){this.assetService=t;this.router=e;this.importProgressService=r}importComplete=new we;destroy$=new He;currentStep=1;totalSteps=2;uploadedFile=null;uploaded=!1;importLoading=!1;isImportComplete=!1;importedCount=0;importResults=null;showResults=!1;errorMessage="";showError=!1;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}parseFile(t){let e=t.target.files[0];if(this.clearError(),!e){this.errorMessage="No file selected",this.showError=!0;return}let r=e.name.split(".").pop()?.toLowerCase();if(!r||!["xlsx","xls"].includes(r)){this.errorMessage="Please upload a valid Excel file (.xlsx, .xls).",this.showError=!0;return}this.uploadedFile=e,this.uploaded=!0,this.currentStep=2}clearError(){this.errorMessage="",this.showError=!1}startBulkImport(){if(!this.uploadedFile){this.errorMessage="No file selected for import",this.showError=!0;return}this.importLoading=!0,this.clearError(),this.assetService.importBulkExcel(this.uploadedFile).subscribe({next:t=>{this.importLoading=!1,t&&t.success&&t.data?.job_id?this.importProgressService.startImport(t.data.job_id,t.data):(this.errorMessage=t.message||"Invalid response from server",this.showError=!0)},error:t=>{this.importLoading=!1,this.errorMessage=t.error?.message||"Error starting import process",this.showError=!0}})}resetImport(){this.currentStep=1,this.uploadedFile=null,this.uploaded=!1,this.importLoading=!1,this.clearError()}closeAllDropdowns(){}static \u0275fac=function(e){return new(e||a)(G(ye),G(Ae),G(ni))};static \u0275cmp=te({type:a,selectors:[["app-smart-import"]],outputs:{importComplete:"importComplete"},decls:29,vars:17,consts:[["fileInput",""],[1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-8","mb-8"],[1,"flex","justify-between","items-start","mb-6"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","text-base"],["routerLink","/assets/list",1,"bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","px-4","py-2","rounded-lg","transition-colors","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"flex","items-center","justify-center","mb-8"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center"],[1,"w-8","h-8","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-sm","font-semibold"],[1,"ml-2","text-sm","font-medium","text-gray-900"],[1,"w-16","h-1","bg-gray-300","rounded"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-sm","font-semibold"],[1,"ml-2","text-sm","font-medium"],["class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6",4,"ngIf"],[4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","text-sm","font-medium"],[1,"border-2","border-dashed","border-gray-300","rounded-xl","p-12","text-center","hover:border-gray-400","transition-colors"],[1,"max-w-md","mx-auto"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["class","text-center",4,"ngIf"],[1,"mt-8","bg-blue-50","border","border-blue-200","rounded-lg","p-4"],[1,"text-sm","font-medium","text-blue-900","mb-2"],[1,"text-sm","text-blue-700","space-y-1"],[1,"text-center"],[1,"text-gray-600","text-sm","mb-4"],["href","/assets/templates/enhanced-asset-import-template-2025-07-29 (1).xlsx","download","",1,"text-blue-600","hover:text-blue-700","font-medium","text-sm","underline"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],["type","file","accept",".xlsx,.xls",1,"hidden",3,"change"],[1,"w-12","h-12","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-lg","font-medium","text-gray-900","mb-1"],[1,"text-gray-600","text-sm"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],[1,"bg-gray-50","rounded-lg","p-6","mb-6","max-w-md","mx-auto"],[1,"text-left","space-y-3"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium","text-gray-900","truncate","ml-4"],[1,"font-medium","text-gray-900"],["class","flex justify-between",4,"ngIf"],["class","bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",4,"ngIf"],[1,"flex","justify-center","space-x-4"],[1,"px-6","py-3","bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","rounded-lg","transition-colors",3,"click"],[1,"px-8","py-3","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-4 w-4 text-blue","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4","mt-4"],[1,"font-medium","text-blue-900","mb-2"],[1,"text-sm","text-blue-800","space-y-1"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-4","w-4","text-blue"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"h1",5),o(6,"Smart Asset Import"),i(),n(7,"p",6),o(8,"Import multiple assets efficiently with our guided wizard"),i()(),n(9,"button",7),v(),n(10,"svg",8),u(11,"path",9),i(),o(12," Back to Assets "),i()(),b(),n(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),o(17,"1"),i(),n(18,"span",14),o(19,"Upload File"),i()(),u(20,"div",15),n(21,"div",12)(22,"div",16),o(23,"2"),i(),n(24,"span",17),o(25,"Start Import"),i()()()(),y(26,m0,6,1,"div",18)(27,f0,24,2,"div",19)(28,v0,29,7,"div",19),i()()()),e&2&&(l(20),k("bg-blue-600",r.currentStep>=2),l(2),k("bg-blue-600",r.currentStep>=2)("text-white",r.currentStep>=2)("bg-gray-300",r.currentStep<2)("text-gray-600",r.currentStep<2),l(2),k("text-gray-900",r.currentStep>=2)("text-gray-500",r.currentStep<2),l(2),m("ngIf",r.showError),l(),m("ngIf",r.currentStep===1),l(),m("ngIf",r.currentStep===2))},dependencies:[me,ie,Ft,fe,it],encapsulation:2})};var x0=[{path:"list",component:at},{path:"create",component:sn},{path:"import",component:mt},{path:"preview/:id",component:ct},{path:":id/edit",component:dt}],ln=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Tt({type:a});static \u0275inj=At({imports:[Ve.forChild(x0),Ve]})};var di=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Tt({type:a});static \u0275inj=At({imports:[me,ln,at,ct,dt,lt,mt,Kn]})};export{di as AssetsModule};
