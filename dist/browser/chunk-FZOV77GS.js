import{a as q}from"./chunk-FEZ6KC4K.js";import{b as Y}from"./chunk-6DZ4LEHE.js";import{b as w,f as G}from"./chunk-23HJPHOZ.js";import"./chunk-6WXWVH7L.js";import{k as H,l as j,u as R,w as N}from"./chunk-OO62REYN.js";import{$a as B,Cb as I,Fb as b,Gb as m,Na as o,S as y,Sa as A,Sb as $,Tb as i,Ub as p,Vb as _,Wb as E,eb as u,f as D,gc as P,ia as f,ic as O,ja as x,ka as C,kc as F,la as M,mb as g,nb as V,ob as S,pb as z,sb as L,wb as e,xb as n,yb as v}from"./chunk-I4CHZ5QN.js";import"./chunk-EQDQRRRY.js";function Q(c,a){c&1&&(e(0,"div",8),v(1,"div",9),e(2,"p"),i(3,"Loading inventory analytics..."),n()())}function Z(c,a){if(c&1){let t=I();e(0,"div",10),C(),e(1,"svg",11),v(2,"path",12),n(),M(),e(3,"h3",13),i(4),n(),e(5,"button",14),b("click",function(){f(t);let l=m();return x(l.refreshData())}),C(),e(6,"svg",15),v(7,"path",7),n(),i(8," Retry "),n()()}if(c&2){let t=m();o(4),p(t.error)}}function X(c,a){if(c&1&&(e(0,"div",38),i(1),P(2,"number"),n()),c&2){let t=m(3);o(),_(" ",O(2,1,t.kpis==null?null:t.kpis.turnover_change_pct,"1.0-2"),"% from last period ")}}function U(c,a){if(c&1&&(e(0,"div",48)(1,"div",35)(2,"div",36),i(3),P(4,"number"),n(),e(5,"div",37),i(6,"Inventory Turnover"),n(),u(7,X,3,4,"div",49),n(),C(),e(8,"svg",39),v(9,"path",50),n()()),c&2){let t=m(2);o(3),_("",O(4,2,t.turnoverData.turnover||0,"1.1-2"),"x"),o(4),g("ngIf",(t.kpis==null?null:t.kpis.turnover_change_pct)!==null&&(t.kpis==null?null:t.kpis.turnover_change_pct)!==void 0)}}function J(c,a){if(c&1&&(e(0,"div",51)(1,"div",35)(2,"div",36),i(3),P(4,"number"),n(),e(5,"div",37),i(6,"Avg Days on Hand"),n()(),C(),e(7,"svg",39),v(8,"path",52),n()()),c&2){let t=m(2);o(3),p(t.turnoverData.days_on_hand!==null?O(4,1,t.turnoverData.days_on_hand,"1.0-0")+" days":"-")}}function tt(c,a){if(c&1&&(e(0,"div",57)(1,"div",58)(2,"h3",59),i(3,"Inventory Analytics"),n(),e(4,"span",60),i(5,"Real-time data from /api/inventory/analytics/dashboard"),n()(),e(6,"div",61)(7,"div",62)(8,"span",37),i(9,"Total Value:"),n(),e(10,"span",36),i(11),n()(),e(12,"div",62)(13,"span",37),i(14,"Total Parts:"),n(),e(15,"span",36),i(16),n()(),e(17,"div",62)(18,"span",37),i(19,"Low Stock:"),n(),e(20,"span",42),i(21),n()(),e(22,"div",62)(23,"span",37),i(24,"Out of Stock:"),n(),e(25,"span",63),i(26),n()()()()),c&2){let t=m(3);o(11),p(t.formatCurrency(t.dashboardData.total_value)),o(5),p(t.dashboardData.total_parts.toLocaleString()),o(5),p(t.dashboardData.low_stock_count.toLocaleString()),o(5),p(t.dashboardData.out_of_stock_count.toLocaleString())}}function et(c,a){if(c&1&&(e(0,"div",57)(1,"div",58)(2,"h3",59),i(3,"Dashboard Overview"),n(),e(4,"span",60),i(5,"Data from /api/inventory/dashboard/overview"),n()(),e(6,"div",61)(7,"div",62)(8,"span",37),i(9,"Total Value:"),n(),e(10,"span",36),i(11),n()(),e(12,"div",62)(13,"span",37),i(14,"Total Parts:"),n(),e(15,"span",36),i(16),n()(),e(17,"div",62)(18,"span",37),i(19,"Low Stock:"),n(),e(20,"span",42),i(21),n()(),e(22,"div",62)(23,"span",37),i(24,"Out of Stock:"),n(),e(25,"span",63),i(26),n()()()()),c&2){let t=m(3);o(11),p(t.formatCurrency(t.overviewData.total_value)),o(5),p(t.overviewData.total_parts.toLocaleString()),o(5),p(t.overviewData.low_stock_count.toLocaleString()),o(5),p(t.overviewData.out_of_stock_count.toLocaleString())}}function nt(c,a){if(c&1&&(e(0,"div",57)(1,"div",58)(2,"h3",59),i(3,"ABC Analysis Summary"),n(),e(4,"span",60),i(5,"Data from /api/inventory/analytics/abc-analysis"),n()(),e(6,"div",61)(7,"div",62)(8,"span",37),i(9,"Class A Items:"),n(),e(10,"span",36),i(11),n()(),e(12,"div",62)(13,"span",37),i(14,"Class B Items:"),n(),e(15,"span",36),i(16),n()(),e(17,"div",62)(18,"span",37),i(19,"Class C Items:"),n(),e(20,"span",36),i(21),n()(),e(22,"div",62)(23,"span",37),i(24,"Total Items:"),n(),e(25,"span",36),i(26),n()()()()),c&2){let t=m(3);o(11),E("",t.abcSummary.classA.count," (",t.abcSummary.classA.percentage.toFixed(1),"%)"),o(5),E("",t.abcSummary.classB.count," (",t.abcSummary.classB.percentage.toFixed(1),"%)"),o(5),E("",t.abcSummary.classC.count," (",t.abcSummary.classC.percentage.toFixed(1),"%)"),o(5),p(t.abcAnalysisData.length)}}function at(c,a){if(c&1&&(e(0,"tr")(1,"td"),i(2),n(),e(3,"td"),i(4),n(),e(5,"td"),i(6),n(),e(7,"td"),i(8),n(),e(9,"td")(10,"span",71),i(11),n()()()),c&2){let t=a.$implicit,r=m(4);o(2),p(t.part_id),o(2),p(t.name),o(2),p(r.formatCurrency(t.value)),o(2),_("",(t.cumulative_ratio*100).toFixed(2),"%"),o(2),z(r.getAbcClassColor(t.class)),o(),_(" ",t.class," ")}}function it(c,a){if(c&1&&(e(0,"div",72)(1,"p"),i(2),n()()),c&2){let t=m(4);o(2),_("Showing first 10 items of ",t.abcAnalysisData.length," total items")}}function rt(c,a){if(c&1&&(e(0,"div",64)(1,"h3",65),i(2,"ABC Analysis Details"),n(),e(3,"div",66)(4,"table",67)(5,"thead")(6,"tr",68)(7,"th"),i(8,"Part ID"),n(),e(9,"th"),i(10,"Part Name"),n(),e(11,"th"),i(12,"Value"),n(),e(13,"th"),i(14,"Cumulative Ratio"),n(),e(15,"th"),i(16,"ABC Class"),n()()(),e(17,"tbody"),u(18,at,12,7,"tr",69),n()(),u(19,it,3,1,"div",70),n()()),c&2){let t=m(3);o(18),g("ngForOf",t.abcAnalysisData.slice(0,10)),o(),g("ngIf",t.abcAnalysisData.length>10)}}function ot(c,a){if(c&1&&(e(0,"div",53)(1,"div",54),u(2,tt,27,4,"div",55)(3,et,27,4,"div",55)(4,nt,27,7,"div",55),n(),u(5,rt,20,2,"div",56),n()),c&2){let t=m(2);o(2),g("ngIf",t.dashboardData),o(),g("ngIf",t.overviewData),o(),g("ngIf",t.abcAnalysisData.length>0),o(),g("ngIf",t.abcAnalysisData.length>0)}}function ct(c,a){c&1&&(e(0,"div",82)(1,"div",83),i(2,"No data yet"),n()())}function lt(c,a){if(c&1&&(e(0,"div",87),P(1,"number"),e(2,"div",88)(3,"span",89),i(4),P(5,"number"),n()(),e(6,"div",90),i(7),n()()),c&2){let t=a.$implicit,r=m(4);g("title",t.category_name+": "+O(1,5,t.turnover,"1.1-2")+"x"),o(2),V("height",t.turnover/r.getMaxCategoryTurnover()*100+"%"),o(2),_("",O(5,8,t.turnover||0,"1.1-2"),"x"),o(3),p(t.category_name)}}function st(c,a){if(c&1&&(e(0,"div",84)(1,"div",85),u(2,lt,8,11,"div",86),n()()),c&2){let t=m(3);o(2),g("ngForOf",t.categoryTurnover.slice(0,8))}}function dt(c,a){c&1&&(e(0,"div",81),v(1,"canvas",91),n())}function mt(c,a){if(c&1&&(e(0,"div",53)(1,"div",73)(2,"div",74)(3,"div",75)(4,"h3",76),i(5,"Inventory Turnover by Category"),n(),e(6,"p",77),i(7,"How quickly inventory moves across categories"),n()(),e(8,"div",78),u(9,ct,3,0,"div",79)(10,st,3,1,"div",80),n()(),e(11,"div",74)(12,"div",75)(13,"h3",76),i(14,"Monthly Turnover Trend"),n(),e(15,"p",77),i(16,"Turnover ratio over time"),n()(),u(17,dt,2,0,"div",81),n()()()),c&2){let t=m(2);o(9),g("ngIf",!(t.categoryTurnover!=null&&t.categoryTurnover.length)),o(),g("ngIf",t.categoryTurnover==null?null:t.categoryTurnover.length),o(7),L(t.monthlyTrend.length>0?17:-1)}}function gt(c,a){if(c&1&&(e(0,"div",53)(1,"div",73)(2,"div",74)(3,"div",75)(4,"h3",76),i(5,"ABC Analysis Distribution"),n(),e(6,"p",77),i(7,"Parts categorized by value contribution"),n()(),e(8,"div",92),v(9,"canvas",93),n()(),e(10,"div",74)(11,"div",75)(12,"h3",76),i(13,"ABC Category Breakdown"),n(),e(14,"p",77),i(15,"Value and quantity by category"),n()(),e(16,"div",94)(17,"div",95)(18,"div",96)(19,"span",97),i(20,"Class A"),n(),e(21,"div",98),i(22),n(),e(23,"div",99),i(24),n()(),e(25,"div",100)(26,"div",101),i(27),n(),e(28,"div",102),i(29),n()()(),e(30,"div",103)(31,"div",96)(32,"span",104),i(33,"Class B"),n(),e(34,"div",98),i(35),n(),e(36,"div",99),i(37),n()(),e(38,"div",100)(39,"div",101),i(40),n(),e(41,"div",102),i(42),n()()(),e(43,"div",105)(44,"div",96)(45,"span",106),i(46,"Class C"),n(),e(47,"div",98),i(48),n(),e(49,"div",99),i(50),n()(),e(51,"div",100)(52,"div",101),i(53),n(),e(54,"div",102),i(55),n()()()()()()()),c&2){let t=m(2);o(22),_("",t.abcSummary.classA.count," items"),o(2),_("",t.getClassValuePercentage("A"),"% of total value"),o(3),p(t.formatCurrency(t.abcSummary.classA.value)),o(2),_("",t.getClassQuantityPercentage("A"),"% of quantity"),o(6),_("",t.abcSummary.classB.count," items"),o(2),_("",t.getClassValuePercentage("B"),"% of total value"),o(3),p(t.formatCurrency(t.abcSummary.classB.value)),o(2),_("",t.getClassQuantityPercentage("B"),"% of quantity"),o(6),_("",t.abcSummary.classC.count," items"),o(2),_("",t.getClassValuePercentage("C"),"% of total value"),o(3),p(t.formatCurrency(t.abcSummary.classC.value)),o(2),_("",t.getClassQuantityPercentage("C"),"% of quantity")}}function pt(c,a){c&1&&(e(0,"div",53)(1,"div",107)(2,"h3"),i(3,"Demand Forecast"),n(),e(4,"p"),i(5,"Demand forecasting analytics will be implemented here."),n()()())}function ht(c,a){if(c&1&&(e(0,"tr")(1,"td"),i(2),n(),e(3,"td"),i(4),n(),e(5,"td"),i(6),n(),e(7,"td"),i(8),n()()),c&2){let t=a.$implicit,r=m(5);o(2),p(t.name||t.part_id),o(2),p(t.on_hand),o(2),p(r.formatCurrency(t.value)),o(2),p(t.days_since_movement)}}function _t(c,a){if(c&1&&(e(0,"div",66)(1,"table",111)(2,"thead")(3,"tr",68)(4,"th"),i(5,"Part"),n(),e(6,"th"),i(7,"On Hand"),n(),e(8,"th"),i(9,"Value"),n(),e(10,"th"),i(11,"Days Since"),n()()(),e(12,"tbody"),u(13,ht,9,4,"tr",69),n()()()),c&2){let t=m(4);o(13),g("ngForOf",t.agingData.slow_moving)}}function ut(c,a){c&1&&(e(0,"div",78)(1,"div",82),i(2,"No slow moving items"),n()())}function vt(c,a){if(c&1&&(e(0,"div",73)(1,"div",74)(2,"div",75)(3,"h3",76),i(4,"Stock Age Distribution"),n(),e(5,"p",77),i(6,"Inventory value by age buckets"),n()(),e(7,"div",92),v(8,"canvas",109),n()(),e(9,"div",74)(10,"div",75)(11,"h3",76),i(12,"Slow Moving Items"),n(),e(13,"p",77),i(14,"Items with low turnover requiring attention"),n()(),u(15,_t,14,1,"div",110)(16,ut,3,0,"ng-template",null,0,F),n()()),c&2){let t=$(17),r=m(3);o(15),g("ngIf",r.agingData==null||r.agingData.slow_moving==null?null:r.agingData.slow_moving.length)("ngIfElse",t)}}function Ct(c,a){if(c&1&&(e(0,"div",53),u(1,vt,18,2,"div",108),n()),c&2){let t=m(2);o(),g("ngIf",t.agingData)}}function bt(c,a){if(c&1){let t=I();e(0,"div")(1,"div",16)(2,"div",17)(3,"h2",18),i(4,"Inventory Analytics"),n(),e(5,"p",19),i(6,"Advanced insights and performance metrics"),n()(),e(7,"div",20)(8,"div",21)(9,"select",22),b("change",function(l){f(t);let s=m();return x(s.onPeriodChange(l))}),e(10,"option",23),i(11,"Last 6 Months"),n(),e(12,"option",24),i(13,"Last 3 Months"),n(),e(14,"option",25),i(15,"Last Month"),n(),e(16,"option",26),i(17,"Last Year"),n()(),C(),e(18,"svg",27),v(19,"path",28),n()(),M(),e(20,"button",29),b("click",function(){f(t);let l=m();return x(l.refreshData())}),C(),e(21,"svg",15),v(22,"path",7),n()(),M(),e(23,"button",30),b("click",function(){f(t);let l=m();return x(l.exportReport())}),C(),e(24,"svg",15),v(25,"path",31),n(),i(26," Export Report "),n()()(),M(),e(27,"div",32),u(28,U,10,5,"div",33),e(29,"div",34)(30,"div",35)(31,"div",36),i(32),n(),e(33,"div",37),i(34,"Carrying Cost"),n(),e(35,"div",38),i(36,"Monthly holding cost"),n()(),C(),e(37,"svg",39),v(38,"path",40),n()(),M(),e(39,"div",41)(40,"div",35)(41,"div",42),i(42),n(),e(43,"div",37),i(44,"Dead Stock Value"),n(),e(45,"div",38),i(46),n()(),C(),e(47,"svg",39),v(48,"path",12),n()(),u(49,J,9,4,"div",43),n(),M(),e(50,"div",44)(51,"button",45),b("click",function(){f(t);let l=m();return x(l.onTabChange("turnover"))}),e(52,"span",46),i(53,"Turnover Analysis"),n()(),e(54,"button",45),b("click",function(){f(t);let l=m();return x(l.onTabChange("abc"))}),e(55,"span",46),i(56,"ABC Analysis"),n()(),e(57,"button",45),b("click",function(){f(t);let l=m();return x(l.onTabChange("demand"))}),e(58,"span",46),i(59,"Demand Forecast"),n()(),e(60,"button",45),b("click",function(){f(t);let l=m();return x(l.onTabChange("aging"))}),e(61,"span",46),i(62,"Stock Aging"),n()()(),u(63,ot,6,4,"div",47)(64,mt,18,3,"div",47)(65,gt,56,12,"div",47)(66,pt,6,0,"div",47)(67,Ct,2,1,"div",47),n()}if(c&2){let t=m();o(9),g("value",t.selectedPeriod),o(19),g("ngIf",t.turnoverData),o(4),p(t.formatCurrency(t.getCarryingCostMonthly())),o(10),p(t.formatCurrency(t.getDeadStockValue())),o(4),_("",t.getDeadStockItems()," items"),o(3),g("ngIf",t.turnoverData),o(2),S("active",t.activeTab==="turnover"),o(3),S("active",t.activeTab==="abc"),o(3),S("active",t.activeTab==="demand"),o(3),S("active",t.activeTab==="aging"),o(3),g("ngIf",!1),o(),g("ngIf",t.activeTab==="turnover"),o(),g("ngIf",t.activeTab==="abc"),o(),g("ngIf",t.activeTab==="demand"),o(),g("ngIf",t.activeTab==="aging")}}var K=class c{constructor(a,t){this.analyticsService=a;this.currency=t}destroy$=new D;activeTab="turnover";selectedPeriod="6m";carryingRateMonthly=.02;loading=!1;error=null;dashboardData=null;abcAnalysisData=[];overviewData=null;turnoverData=null;agingData=null;kpis=null;categoryTurnover=[];monthlyTrend=[];hasTrendData=!1;trendChartWidth=400;trendChartHeight=200;trendYPadding=10;trendYScaleHeight=180;trendMax=1;trendTicks=[1,.75,.5,.25,0];trendChart;agingChart;abcChart;abcSummary={classA:{count:0,value:0,percentage:0},classB:{count:0,value:0,percentage:0},classC:{count:0,value:0,percentage:0}};ngOnInit(){w.register(...G),this.loadAllAnalytics()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadAllAnalytics(){this.loading=!0,this.error=null,Promise.all([this.loadAbcAnalysis(),this.loadDashboardOverview(),this.loadTurnover(this.selectedPeriod),this.loadStockAging(),this.loadTurnoverByCategory(this.selectedPeriod),this.loadMonthlyTrend(this.selectedPeriod),this.loadKpis(this.selectedPeriod)]).finally(()=>{this.loading=!1})}loadInventoryAnalytics(){return new Promise(a=>{this.analyticsService.getInventoryAnalytics().pipe(y(this.destroy$)).subscribe({next:t=>{t.success&&(this.dashboardData=t.data),a()},error:t=>{console.error("Error loading inventory analytics:",t),a()}})})}loadMonthlyTrend(a){return new Promise(t=>{this.analyticsService.getMonthlyTurnoverTrend({period:a}).pipe(y(this.destroy$)).subscribe({next:r=>{if(r.success){let l=r.data.points||[];this.monthlyTrend=l.length?l:this.generateZeroTrend(a),this.updateTrendMeta(),setTimeout(()=>this.renderTrendChart(!0),0),setTimeout(()=>this.renderTrendChart(),500)}t()},error:r=>{console.error("Error loading monthly turnover trend:",r),t()}})})}loadTurnoverByCategory(a){return new Promise(t=>{this.analyticsService.getTurnoverByCategory({period:a}).pipe(y(this.destroy$)).subscribe({next:r=>{r.success&&(this.categoryTurnover=r.data.categories||[]),t()},error:r=>{console.error("Error loading turnover by category:",r),t()}})})}loadTurnover(a){return new Promise(t=>{this.analyticsService.getTurnover({period:a}).pipe(y(this.destroy$)).subscribe({next:r=>{r.success&&(this.turnoverData=r.data),t()},error:r=>{console.error("Error loading turnover:",r),t()}})})}loadKpis(a){return new Promise(t=>{this.analyticsService.getKpis({period:a,carrying_rate:.24,dead_days:90}).pipe(y(this.destroy$)).subscribe({next:r=>{r.success&&(this.kpis=r.data,this.turnoverData={period:r.data.period,cogs:0,avg_inventory_value:r.data.avg_inventory_value,turnover:r.data.turnover,days_on_hand:r.data.days_on_hand}),t()},error:r=>{console.error("Error loading KPIs:",r),t()}})})}loadStockAging(){return new Promise(a=>{this.analyticsService.getStockAging().pipe(y(this.destroy$)).subscribe({next:t=>{if(t.success){let r=t.data;!r||!r.buckets||r.buckets.length===0?this.agingData={buckets:[{label:"0-30 days",days_from:0,days_to:30,count:0,value:0},{label:"31-60 days",days_from:31,days_to:60,count:0,value:0},{label:"61-90 days",days_from:61,days_to:90,count:0,value:0},{label:"91-180 days",days_from:91,days_to:180,count:0,value:0},{label:"180+ days",days_from:181,days_to:null,count:0,value:0}],slow_moving:[]}:this.agingData=r,setTimeout(()=>this.renderAgingChart(),0)}a()},error:t=>{console.error("Error loading stock aging:",t),a()}})})}loadAbcAnalysis(){return new Promise(a=>{this.analyticsService.getAbcAnalysis().pipe(y(this.destroy$)).subscribe({next:t=>{t.success&&(this.abcAnalysisData=t.data,this.calculateAbcSummary(),this.activeTab==="abc"&&setTimeout(()=>this.renderAbcChart(),0)),a()},error:t=>{console.error("Error loading ABC analysis:",t),a()}})})}loadDashboardOverview(){return new Promise(a=>{this.analyticsService.getDashboardData().pipe(y(this.destroy$)).subscribe({next:t=>{t.success&&(this.overviewData=t.data),a()},error:t=>{console.error("Error loading dashboard overview:",t),a()}})})}calculateAbcSummary(){if(!this.abcAnalysisData.length)return;let a=this.abcAnalysisData.filter(s=>s.class==="A"),t=this.abcAnalysisData.filter(s=>s.class==="B"),r=this.abcAnalysisData.filter(s=>s.class==="C"),l=this.abcAnalysisData.reduce((s,d)=>s+d.value,0);this.abcSummary.classA={count:a.length,value:a.reduce((s,d)=>s+d.value,0),percentage:l>0?a.reduce((s,d)=>s+d.value,0)/l*100:0},this.abcSummary.classB={count:t.length,value:t.reduce((s,d)=>s+d.value,0),percentage:l>0?t.reduce((s,d)=>s+d.value,0)/l*100:0},this.abcSummary.classC={count:r.length,value:r.reduce((s,d)=>s+d.value,0),percentage:l>0?r.reduce((s,d)=>s+d.value,0)/l*100:0}}getClassCount(a){return a==="A"?this.abcSummary.classA.count:a==="B"?this.abcSummary.classB.count:this.abcSummary.classC.count}getClassValue(a){return a==="A"?this.abcSummary.classA.value:a==="B"?this.abcSummary.classB.value:this.abcSummary.classC.value}getClassQuantityPercentage(a){let t=this.abcAnalysisData.length||1;return Number((this.getClassCount(a)/t*100).toFixed(1))}getClassValuePercentage(a){return Number(a==="A"?this.abcSummary.classA.percentage.toFixed(1):a==="B"?this.abcSummary.classB.percentage.toFixed(1):this.abcSummary.classC.percentage.toFixed(1))}onTabChange(a){this.activeTab=a,a==="turnover"&&(this.loadTurnover(this.selectedPeriod),this.loadTurnoverByCategory(this.selectedPeriod),this.loadMonthlyTrend(this.selectedPeriod).then(()=>setTimeout(()=>this.renderTrendChart(!0),0)),this.loadKpis(this.selectedPeriod)),a==="aging"&&this.loadStockAging(),a==="abc"&&this.loadAbcAnalysis().then(()=>setTimeout(()=>this.renderAbcChart(!0),0))}onPeriodChange(a){let t=a.target;if(t&&t.value){let l={"1month":"1m","3months":"3m","6months":"6m","1year":"1y"}[t.value]||t.value;this.selectedPeriod=l,this.loadTurnover(this.selectedPeriod),this.loadTurnoverByCategory(this.selectedPeriod),this.loadMonthlyTrend(this.selectedPeriod),this.loadKpis(this.selectedPeriod)}}exportReport(){console.log("Exporting analytics report for period:",this.selectedPeriod)}refreshData(){this.loadAllAnalytics()}formatCurrency(a){return this.currency.format(a)}getAbcClassColor(a){switch(a){case"A":return"bg-green-100 text-green-800";case"B":return"bg-yellow-100 text-yellow-800";case"C":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}getCarryingCostMonthly(){return this.kpis?this.kpis.carrying_cost_monthly||0:(this.dashboardData?.total_value??this.overviewData?.total_value??0)*this.carryingRateMonthly}getDeadStockValue(){return this.kpis?this.kpis.dead_stock_value||0:this.agingData?.slow_moving?.length?this.agingData.slow_moving.reduce((a,t)=>a+(t.value||0),0):0}getDeadStockItems(){return this.kpis?this.kpis.dead_stock_items||0:this.agingData?.slow_moving?.length??0}getMaxCategoryTurnover(){if(!this.categoryTurnover||this.categoryTurnover.length===0)return 1;let a=Math.max(...this.categoryTurnover.map(t=>t.turnover||0));return a>0?a:1}updateTrendMeta(){let a=Math.max(...(this.monthlyTrend||[]).map(d=>d.turnover||0),0);this.trendMax=this.niceCeil(a),this.hasTrendData=(this.monthlyTrend||[]).some(d=>(d.turnover||0)>0);let t=this.trendMax,r=this.trendMax*.75,l=this.trendMax*.5,s=this.trendMax*.25;this.trendTicks=[t,r,l,s,0]}niceCeil(a){let t=[.1,.2,.5,1,2,5,10,20,50];if(a<=0)return 1;for(let r of t)if(a<=r)return r;return Math.pow(10,Math.ceil(Math.log10(a)))}formatTick(a){let t=this.trendMax<1?2:1;return Number(a).toFixed(t)}renderTrendChart(a){let t=(this.monthlyTrend||[]).map(h=>h.label.split(" ")[0]),r=(this.monthlyTrend||[]).map(h=>h.turnover||0),l={type:"line",data:{labels:t,datasets:[{label:"Turnover",data:r,borderColor:"#0d9488",backgroundColor:"rgba(13,148,136,0.2)",tension:.3,pointRadius:3,pointBackgroundColor:"#0d9488"}]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,suggestedMax:Math.max(1,this.trendMax),ticks:{callback:h=>this.formatTick(Number(h))}},x:{grid:{display:!1}}}}},s=document.getElementById("monthlyTrendCanvas");if(!s)return;if(this.trendChart&&!a){this.trendChart.data.labels=t,this.trendChart.data.datasets[0].data=r,this.trendChart.update();return}this.trendChart&&a&&(this.trendChart.destroy(),this.trendChart=void 0);let d=s.getContext("2d");d&&(this.trendChart=new w(d,l))}renderAgingChart(a){let t=document.getElementById("agingBucketsCanvas");if(!t||!this.agingData)return;let r=(this.agingData.buckets||[]).map(h=>h.label),l=(this.agingData.buckets||[]).map(h=>h.count),s=(this.agingData.buckets||[]).map(h=>h.value),d={type:"bar",data:{labels:r,datasets:[{label:"Items",data:l,backgroundColor:"rgba(59,130,246,0.3)",borderColor:"#3b82f6",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:h=>{let k=h.dataIndex,T=l[k]??0,W=s[k]??0;return` ${T} items \u2014 ${this.currency.getCurrent()} ${W.toLocaleString()}`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}},x:{grid:{display:!1}}}}};if(this.agingChart&&!a){this.agingChart.data.labels=r,this.agingChart.data.datasets[0].data=l,this.agingChart.update();return}this.agingChart&&a&&(this.agingChart.destroy(),this.agingChart=void 0),this.agingChart=new w(t.getContext("2d"),d)}renderAbcChart(a){let t=document.getElementById("abcPieCanvas");if(!t)return;let r=[this.abcAnalysisData.filter(d=>d.class==="A").length,this.abcAnalysisData.filter(d=>d.class==="B").length,this.abcAnalysisData.filter(d=>d.class==="C").length],l={type:"doughnut",data:{labels:["Class A","Class B","Class C"],datasets:[{data:r,backgroundColor:["#2563eb","#10b981","#f59e0b"],borderColor:["#2563eb","#10b981","#f59e0b"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"}}}};if(this.abcChart&&!a){this.abcChart.data.datasets[0].data=r,this.abcChart.update();return}this.abcChart&&a&&(this.abcChart.destroy(),this.abcChart=void 0);let s=t.getContext("2d");s&&(this.abcChart=new w(s,l))}generateZeroTrend(a){let r={"1m":1,"3m":3,"6m":6,"1y":12}[a]||6,l=[],s=new Date;for(let d=r-1;d>=0;d--){let h=new Date(s.getFullYear(),s.getMonth()-d,1),k=h.toLocaleString(void 0,{month:"short",year:"numeric"}),T=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}`;l.push({month:T,label:k,cogs:0,avg_inventory_value:0,turnover:0})}return l}getTrendPath(){let a=this.monthlyTrend?.length||0;if(a===0)return"";let t=this.trendChartWidth/Math.max(1,a-1),r="";for(let l=0;l<a;l++){let s=l*t,d=this.trendY(this.monthlyTrend[l]);r+=l===0?`M${s},${d}`:` L${s},${d}`}return r}trendX(a){let t=this.monthlyTrend?.length||0,r=this.trendChartWidth/Math.max(1,t-1);return a*r}trendY(a){let t=Math.min(1,Math.max(0,(a?.turnover||0)/this.trendMax));return this.trendChartHeight-t*this.trendYScaleHeight-this.trendYPadding}static \u0275fac=function(t){return new(t||c)(A(q),A(Y))};static \u0275cmp=B({type:c,selectors:[["app-analytics"]],decls:7,vars:3,consts:[["noSlowMoving",""],[1,"analytics"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[4,"ngIf"],["title","Refresh Data",1,"voice-assistant",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"loading-state"],[1,"loading-spinner"],[1,"error-state"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"error-title"],[1,"btn","btn-primary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],[1,"analytics-header"],[1,"header-left"],[1,"main-title"],[1,"subtitle"],[1,"header-right"],[1,"period-dropdown"],[1,"period-select",3,"change","value"],["value","6m"],["value","3m"],["value","1m"],["value","1y"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"dropdown-arrow"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["title","Refresh Data",1,"refresh-btn",3,"click"],[1,"export-btn","!hidden",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"metric-cards-row"],["class","metric-card turnover",4,"ngIf"],[1,"metric-card","carrying-cost"],[1,"card-content"],[1,"metric-value"],[1,"metric-label"],[1,"metric-change"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"metric-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"metric-card","dead-stock"],[1,"metric-value","warning"],["class","metric-card avg-days",4,"ngIf"],[1,"analytics-tabs"],[1,"tab-button",3,"click"],[1,"tab-text"],["class","tab-content",4,"ngIf"],[1,"metric-card","turnover"],["class","metric-change",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"],[1,"metric-card","avg-days"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"tab-content"],[1,"analytics-cards"],["class","analytics-card",4,"ngIf"],["class","abc-table-section",4,"ngIf"],[1,"analytics-card"],[1,"card-header"],[1,"card-title"],[1,"card-subtitle"],[1,"card-metrics"],[1,"metric-item"],[1,"metric-value","danger"],[1,"abc-table-section"],[1,"section-title"],[1,"table-container"],[1,"analytics-table"],[1,"uppercase"],[4,"ngFor","ngForOf"],["class","table-footer",4,"ngIf"],[1,"abc-badge"],[1,"table-footer"],[1,"charts-section"],[1,"chart-panel"],[1,"panel-header"],[1,"panel-title"],[1,"panel-subtitle"],[1,"chart-container"],["class","chart-placeholder",4,"ngIf"],["class","bar-chart",4,"ngIf"],[1,"chart-container",2,"height","220px","padding","12px 8px"],[1,"chart-placeholder"],[1,"empty-state"],[1,"bar-chart"],[1,"bars"],["class","bar",3,"title",4,"ngFor","ngForOf"],[1,"bar",3,"title"],[1,"bar-fill"],[1,"bar-value"],[1,"bar-label"],["id","monthlyTrendCanvas"],[1,"chart-container",2,"height","260px","padding","12px 8px"],["id","abcPieCanvas"],[1,"abc-breakdown"],[1,"abc-row","a"],[1,"left"],[1,"badge","a"],[1,"items"],[1,"sub"],[1,"right"],[1,"value"],[1,"qty"],[1,"abc-row","b"],[1,"badge","b"],[1,"abc-row","c"],[1,"badge","c"],[1,"tab-placeholder"],["class","charts-section",4,"ngIf"],["id","agingBucketsCanvas"],["class","table-container",4,"ngIf","ngIfElse"],[1,"panel-table"]],template:function(t,r){t&1&&(e(0,"div",1),u(1,Q,4,0,"div",2)(2,Z,9,1,"div",3)(3,bt,68,19,"div",4),e(4,"button",5),b("click",function(){return r.refreshData()}),C(),e(5,"svg",6),v(6,"path",7),n()()()),t&2&&(o(),g("ngIf",r.loading),o(),g("ngIf",r.error&&!r.loading),o(),g("ngIf",!r.loading&&!r.error))},dependencies:[N,H,j,R],styles:[".analytics[_ngcontent-%COMP%]{padding:1.5rem;background-color:#f8fafc;min-height:100vh;position:relative}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem;border:3px solid #e2e8f0;border-top:3px solid #0d9488;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1.125rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.error-state[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%]{color:#dc2626;font-size:1.25rem;font-weight:600;margin:1rem 0}.error-state[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:.5rem;font-weight:500;transition:all .2s}.error-state[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#0d9488;color:#fff;border:none}.error-state[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0f766e}.analytics-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a}.analytics-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:#1e293b;margin:0 0 .5rem}.analytics-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:1.125rem;margin:0}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .period-dropdown[_ngcontent-%COMP%]{position:relative}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .period-dropdown[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]{appearance:none;background:#fff;border:1px solid #d1d5db;border-radius:.5rem;padding:.75rem 2.5rem .75rem 1rem;font-size:.875rem;color:#374151;cursor:pointer;min-width:150px}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .period-dropdown[_ngcontent-%COMP%]   .period-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0d9488;box-shadow:0 0 0 3px #0d94881a}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .period-dropdown[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);width:1rem;height:1rem;color:#6b7280;pointer-events:none}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%], .analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border-radius:.5rem;font-weight:500;transition:all .2s;border:none;cursor:pointer}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover, .analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover{background-color:#e5e7eb}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]{background-color:#0d9488;color:#fff}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:hover{background-color:#0f766e}.analytics-tabs[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:.75rem;padding:.25rem;margin-bottom:2rem;box-shadow:0 1px 3px #0000001a;overflow-x:auto}.analytics-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{flex:1;min-width:0;padding:.75rem 1rem;border:none;background:transparent;color:#64748b;font-weight:500;cursor:pointer;transition:all .2s;border-radius:.5rem;white-space:nowrap}.analytics-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]:hover{color:#374151;background-color:#f8fafc}.analytics-tabs[_ngcontent-%COMP%]   .tab-button.active[_ngcontent-%COMP%]{background-color:#0d9488;color:#fff}.analytics-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]   .tab-text[_ngcontent-%COMP%]{font-size:.875rem}.tab-content[_ngcontent-%COMP%]   .tab-placeholder[_ngcontent-%COMP%]{background:#fff;padding:3rem 2rem;border-radius:.75rem;text-align:center;box-shadow:0 1px 3px #0000001a}.tab-content[_ngcontent-%COMP%]   .tab-placeholder[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b;font-size:1.5rem;margin-bottom:1rem}.tab-content[_ngcontent-%COMP%]   .tab-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1.125rem}.analytics-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem;margin-bottom:2rem}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;padding:1.5rem;box-shadow:0 1px 3px #0000001a;border:1px solid #e2e8f0}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin:0 0 .5rem}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;font-style:italic}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid #f1f5f9}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{color:#64748b;font-weight:500}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value.warning[_ngcontent-%COMP%]{color:#f59e0b}.analytics-cards[_ngcontent-%COMP%]   .analytics-card[_ngcontent-%COMP%]   .card-metrics[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value.danger[_ngcontent-%COMP%]{color:#dc2626}.abc-table-section[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;padding:1.5rem;box-shadow:0 1px 3px #0000001a;margin-bottom:2rem}.abc-table-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1e293b;margin:0 0 1.5rem}.abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .analytics-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .analytics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .analytics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #e2e8f0}.abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .analytics-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:600;color:#374151;font-size:.875rem;text-transform:uppercase;letter-spacing:.05em}.abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .analytics-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#1e293b;font-size:.875rem}.abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .analytics-table[_ngcontent-%COMP%]   .abc-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.abc-table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-footer[_ngcontent-%COMP%]{padding:1rem 0;text-align:center;color:#64748b;font-size:.875rem}.metric-cards-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;padding:1.5rem;box-shadow:0 1px 3px #0000001a;display:flex;align-items:center;gap:1rem}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin-bottom:.5rem}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .metric-value.warning[_ngcontent-%COMP%]{color:#f59e0b}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin-bottom:.5rem;display:block}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .metric-change[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .metric-change.positive[_ngcontent-%COMP%]{color:#059669}.metric-cards-row[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{width:3rem;height:3rem;color:#0d9488;flex-shrink:0}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1.5rem;margin-bottom:2rem}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;padding:1.5rem;box-shadow:0 1px 3px #0000001a}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin:0 0 .5rem}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .panel-subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin:0}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-placeholder[_ngcontent-%COMP%], .charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .line-chart[_ngcontent-%COMP%]{height:260px;background-color:#f8fafc;border-radius:.5rem;display:flex;align-items:center;justify-content:center;color:#64748b;font-size:.875rem}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%;height:100%!important;background-color:#f8fafc;border-radius:.5rem;display:block}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .panel-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .panel-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .panel-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;border-bottom:1px solid #e2e8f0;font-size:.875rem;color:#1e293b}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .panel-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:600;color:#374151;text-transform:uppercase;letter-spacing:.05em;font-size:.75rem}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;border:1px solid #e2e8f0;background-color:#f8fafc;border-radius:.5rem}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:#1f2937}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.25rem .6rem;border-radius:9999px;font-size:.75rem;font-weight:600}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .badge.a[_ngcontent-%COMP%]{background:#dbeafe;color:#1e3a8a}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .badge.b[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .badge.c[_ngcontent-%COMP%]{background:#ffedd5;color:#92400e}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{font-weight:600}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;color:#1e293b}.charts-section[_ngcontent-%COMP%]   .chart-panel[_ngcontent-%COMP%]   .abc-breakdown[_ngcontent-%COMP%]   .abc-row[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.voice-assistant[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;width:3.5rem;height:3.5rem;border-radius:50%;background:#0d9488;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px -1px #0000001a;transition:all .2s;display:flex;align-items:center;justify-content:center}.voice-assistant[_ngcontent-%COMP%]:hover{background:#0f766e;transform:scale(1.1)}@media (max-width: 768px){.analytics[_ngcontent-%COMP%]{padding:1rem}.analytics-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.analytics-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.analytics-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem}.analytics-cards[_ngcontent-%COMP%], .metric-cards-row[_ngcontent-%COMP%], .charts-section[_ngcontent-%COMP%]{grid-template-columns:1fr}.voice-assistant[_ngcontent-%COMP%]{bottom:1rem;right:1rem;width:3rem;height:3rem}}"]})};export{K as AnalyticsComponent};
