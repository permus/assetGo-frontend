import{a as Ft}from"./chunk-5PWJ3IYT.js";import{a as xe}from"./chunk-GT4JH6HJ.js";import{a as De,b as Ht}from"./chunk-5IR3EOHF.js";import{a as Lt}from"./chunk-75FJR6SK.js";import{a as Ot}from"./chunk-YUGLTDU2.js";import{a as Dt}from"./chunk-UBQX4O5G.js";import{a as ye}from"./chunk-ZV7JHBFJ.js";import{a as Le}from"./chunk-V2JFSLDX.js";import{a as Tt,b as lt,c as Vt}from"./chunk-WMPXX2HH.js";import"./chunk-3GUCJ2YB.js";import"./chunk-FK6H3RFT.js";import{a as jt}from"./chunk-DCHJNBGH.js";import{a as Z}from"./chunk-PKYUWITX.js";import{c as ct,g as Pt}from"./chunk-NDTQ3VTJ.js";import"./chunk-GGQ7LRWG.js";import{a as ke}from"./chunk-GVXPQDBC.js";import{c as me,d as q,f as F,g as W}from"./chunk-C5P3YSZX.js";import{b as re}from"./chunk-NSICM5UH.js";import{a as Je}from"./chunk-WV6WLSCL.js";import{a as kt}from"./chunk-Q3RMUY7K.js";import"./chunk-VPAYI7QR.js";import{A as ot,B as $,C as st,b as It,c as G,d as ae,e as z,f as he,g as Xe,i as Y,j as ve,k as Ke,m as et,o as tt,r as it,s as Ie,t as Te,u as Ve,v as nt,w as rt,x as Pe,y as at}from"./chunk-UQACUQIP.js";import"./chunk-MEXLA3FU.js";import{d as Ae,f as ne,g as Me,j as de}from"./chunk-4LZAODCJ.js";import{b as Mt}from"./chunk-YGU4T3V7.js";import{h as Ye,j as Et,k as X,l as B,t as At,u as Ze,x as N}from"./chunk-HV2J6S7U.js";import{Bc as Qe,Cb as ft,Gb as i,H as yt,Hb as n,Ib as p,Jb as wt,K as bt,Kb as Ct,Mb as b,Pb as _,Qb as d,T as k,Va as L,Wb as K,Xa as Ee,Xb as ee,Ya as l,Yb as te,Z as ze,ac as fe,bb as M,bc as o,ca as ge,cc as y,dc as C,ec as A,f as J,fc as St,gc as I,hc as T,ia as $e,ic as V,ja as u,ka as g,kb as R,la as h,lb as Ue,lc as ce,ma as x,mc as ht,pb as v,qc as D,rc as ie,sc as O,ta as Q,vb as qe,vc as We,wb as m,xb as H,yb as w,za as _e,zb as U}from"./chunk-RHVXZUNF.js";import{a as ue,b as we,e as xt,f as le}from"./chunk-EQDQRRRY.js";function Wt(a,t){if(a&1&&(i(0,"span"),o(1),n()),a&2){let e=d(2);l(),A("Archive ",e.selectedCount," Asset",e.selectedCount!==1?"s":"","")}}function Qt(a,t){a&1&&(i(0,"span",28),h(),i(1,"svg",29),p(2,"circle",30)(3,"path",31),n(),x(),i(4,"span"),o(5,"Archiving..."),n()())}function Yt(a,t){if(a&1){let e=b();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),h(),i(5,"svg",6),p(6,"path",7),n()(),x(),i(7,"h2",8),o(8,"Archive Selected Assets"),n()(),i(9,"button",9),_("click",function(){u(e);let s=d();return g(s.onCancel())}),h(),i(10,"svg",10),p(11,"path",11),n()()(),x(),i(12,"div",12)(13,"div",13)(14,"label",14),o(15,"Archive Reason (Optional)"),n(),i(16,"textarea",15),V("ngModelChange",function(s){u(e);let c=d();return T(c.archiveReason,s)||(c.archiveReason=s),g(s)}),n(),i(17,"p",16),o(18,"This will be recorded in the audit trail"),n()(),i(19,"div",17)(20,"div",18),h(),i(21,"svg",19),p(22,"path",7),n()()(),x(),i(23,"div",20)(24,"h3",21),o(25),n(),i(26,"p",22),o(27," This will change their status to inactive but keep all data intact. "),n()(),i(28,"div",23)(29,"button",24),_("click",function(){u(e);let s=d();return g(s.onCancel())}),o(30," Cancel "),n(),i(31,"button",25),_("click",function(){u(e);let s=d();return g(s.onConfirm())}),v(32,Wt,2,2,"span",26)(33,Qt,6,0,"span",27),n()()()()()}if(a&2){let e=d();m("@backdropAnimation",void 0),l(),m("@modalAnimation",void 0),l(8),m("disabled",e.loading),l(7),I("ngModel",e.archiveReason),l(9),A("Are you sure you want to archive ",e.selectedCount," asset",e.selectedCount!==1?"s":"","?"),l(4),m("disabled",e.loading),l(2),m("disabled",e.loading),l(),m("ngIf",!e.loading),l(),m("ngIf",e.loading)}}var dt=class a{isOpen=!1;selectedCount=0;closeModal=new Q;confirmArchive=new Q;loading=!1;archiveReason="";onConfirm(){this.loading=!0,this.confirmArchive.emit(this.archiveReason),setTimeout(()=>{this.loading=!1,this.archiveReason=""},2e3)}onCancel(){this.loading||(this.archiveReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=R({type:a,selectors:[["app-archive-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount"},outputs:{closeModal:"closeModal",confirmArchive:"confirmArchive"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center p-4","style","z-index: 1000;",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","p-4",2,"z-index","1000"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3","placeholder","Enter reason for archiving these assets...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-orange-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-orange-600","text-white","font-medium","rounded-lg","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&v(0,Yt,34,10,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[N,B,$,G,z,Y],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[me("backdropAnimation",[W(":enter",[F({opacity:0}),q("150ms ease-out",F({opacity:1}))]),W(":leave",[q("150ms ease-in",F({opacity:0}))])]),me("modalAnimation",[W(":enter",[F({opacity:0,transform:"scale(0.7) translateY(-50px)"}),q("200ms ease-out",F({opacity:1,transform:"scale(1) translateY(0)"}))]),W(":leave",[q("150ms ease-in",F({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Zt(a,t){if(a&1&&(i(0,"span"),o(1),n()),a&2){let e=d(2);l(),A(" Restore ",e.selectedCount," Asset",e.selectedCount!==1?"s":""," ")}}function Jt(a,t){a&1&&(i(0,"span",24),h(),i(1,"svg",33),p(2,"circle",34)(3,"path",35),n(),x(),i(4,"span"),o(5,"Restoring..."),n()())}function Xt(a,t){if(a&1){let e=b();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),h(),i(5,"svg",6),p(6,"path",7),n()(),x(),i(7,"h2",8),o(8),n()(),i(9,"button",9),_("click",function(){u(e);let s=d();return g(s.onCancel())}),h(),i(10,"svg",10),p(11,"path",11),n()()(),x(),i(12,"div",12)(13,"div",13)(14,"div",14),h(),i(15,"svg",15),p(16,"path",7),n()()(),x(),i(17,"div",16)(18,"h3",17),o(19),n(),i(20,"p",18),o(21),n()(),i(22,"div",19)(23,"label",20),o(24,"Restore Reason (Optional)"),n(),i(25,"textarea",21),V("ngModelChange",function(s){u(e);let c=d();return T(c.restoreReason,s)||(c.restoreReason=s),g(s)}),n(),i(26,"p",22),o(27,"This will be recorded in the audit trail"),n()(),i(28,"div",23)(29,"div",24),h(),i(30,"svg",25),p(31,"path",26),n(),x(),i(32,"p",27),o(33," Assets will be restored to active status "),n()()(),i(34,"div",28)(35,"button",29),_("click",function(){u(e);let s=d();return g(s.onCancel())}),o(36," Cancel "),n(),i(37,"button",30),_("click",function(){u(e);let s=d();return g(s.onConfirm())}),v(38,Zt,2,2,"span",31)(39,Jt,6,0,"span",32),n()()()()()}if(a&2){let e=d();m("@backdropAnimation",void 0),l(),m("@modalAnimation",void 0),l(7),C(" ",e.selectedCount>1?"Restore Selected Assets":"Restore Asset"," "),l(),m("disabled",e.loading),l(10),C(" Are you sure you want to restore ",e.selectedCount>1?e.selectedCount+" assets":e.assetName||"1 asset","? "),l(2),C(" ",e.selectedCount>1?"These assets will be moved back to active status and become available in searches.":"This asset will be moved back to active status and become available in searches."," "),l(4),I("ngModel",e.restoreReason),m("placeholder","Enter reason for restoring "+(e.selectedCount>1?"these assets":"this asset")+"..."),l(10),m("disabled",e.loading),l(2),m("disabled",e.loading),l(),m("ngIf",!e.loading),l(),m("ngIf",e.loading)}}var mt=class a{isOpen=!1;selectedCount=0;assetName="";closeModal=new Q;confirmRestore=new Q;loading=!1;restoreReason="";onConfirm(){this.loading=!0,this.confirmRestore.emit(this.restoreReason),setTimeout(()=>{this.loading=!1,this.restoreReason=""},2e3)}onCancel(){this.loading||(this.restoreReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=R({type:a,selectors:[["app-restore-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount",assetName:"assetName"},outputs:{closeModal:"closeModal",confirmRestore:"confirmRestore"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center p-4","style","z-index: 1000;",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","p-4",2,"z-index","1000"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"flex","justify-center","mb-6"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-600","mb-4"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3","mb-6"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-green-600","text-white","font-medium","rounded-lg","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&v(0,Xt,40,12,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[N,B,$,G,z,Y],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[me("backdropAnimation",[W(":enter",[F({opacity:0}),q("150ms ease-out",F({opacity:1}))]),W(":leave",[q("150ms ease-in",F({opacity:0}))])]),me("modalAnimation",[W(":enter",[F({opacity:0,transform:"scale(0.7) translateY(-50px)"}),q("200ms ease-out",F({opacity:1,transform:"scale(1) translateY(0)"}))]),W(":leave",[q("150ms ease-in",F({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var Rt=xt(Tt());function ei(a,t){if(a&1&&(h(),i(0,"svg",80),p(1,"path",81),n()),a&2){let e=d(2);w("mr-3",!e.isRtl())("ml-3",e.isRtl())}}function ti(a,t){if(a&1&&(h(),i(0,"svg",87),p(1,"circle",88)(2,"path",89),n()),a&2){let e=d(2);w("mr-3",!e.isRtl())("ml-3",e.isRtl())}}function ii(a,t){if(a&1){let e=b();i(0,"div",78)(1,"button",79),_("click",function(){u(e);let s=d();return g(s.exportToPdf())}),h(),i(2,"svg",80),p(3,"path",81),n(),x(),i(4,"span"),o(5,"Export Assets to PDF"),n()(),i(6,"button",82),_("click",function(){u(e);let s=d();return g(s.exportToExcel())}),v(7,ei,2,4,"svg",83)(8,ti,3,4,"svg",84),i(9,"span"),o(10),n()(),i(11,"button",85),h(),i(12,"svg",80),p(13,"path",86),n(),x(),i(14,"span"),o(15,"Smart Import"),n()()()}if(a&2){let e=d();w("right-0",!e.isRtl())("left-0",e.isRtl()),l(),w("text-left",!e.isRtl())("text-right",e.isRtl()),l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl()),l(4),w("text-left",!e.isRtl())("text-right",e.isRtl()),m("disabled",e.exportingExcel),l(),m("ngIf",!e.exportingExcel),l(),m("ngIf",e.exportingExcel),l(2),y(e.exportingExcel?"Exporting to Excel...":"Export Assets to Excel"),l(),w("text-left",!e.isRtl())("text-right",e.isRtl()),l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl())}}function ni(a,t){if(a&1){let e=b();wt(0),i(1,"app-global-dropdown",54),_("selectionChange",function(s){u(e);let c=d();return g(c.onSelectAssetStatus(s))}),n(),Ct()}if(a&2){let e=d();l(),m("placeholder","Select asset status")("options",e.assetStatusDropdownOptions)("selectedOption",e.selectedAssetStatusOption)("minWidth","280px")}}function ri(a,t){a&1&&(h(),i(0,"svg",90),p(1,"path",91),n())}function ai(a,t){a&1&&(h(),i(0,"svg",90),p(1,"path",92),n())}function oi(a,t){a&1&&(i(0,"div",93)(1,"div",94)(2,"div",95),h(),i(3,"svg",96),p(4,"circle",88)(5,"path",89),n()(),x(),i(6,"h3",97),o(7,"Loading Assets"),n(),i(8,"p",98),o(9,"Please wait while we fetch your assets..."),n()()())}function si(a,t){if(a&1){let e=b();i(0,"div",93)(1,"div",94)(2,"div",99),h(),i(3,"svg",100),p(4,"path",101),n()(),x(),i(5,"h3",97),o(6,"Error Loading Assets"),n(),i(7,"p",102),o(8),n(),i(9,"button",103),_("click",function(){u(e);let s=d();return g(s.loadAssets())}),o(10," Retry "),n()()()}if(a&2){let e=d();l(8),y(e.error)}}function li(a,t){if(a&1){let e=b();i(0,"div",104)(1,"button",105),_("click",function(){u(e);let s=d();return g(s.toggleSelectAllAssets())}),p(2,"span",106),n(),i(3,"span",107),o(4),n()()}if(a&2){let e=d();l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl()),l(3),C("Select all ",e.assetList.length," assets")}}function ci(a,t){if(a&1){let e=b();i(0,"button",124),_("click",function(){u(e);let s=d(2);return g(s.duplicateSelected())}),h(),i(1,"svg",117),p(2,"rect",125)(3,"rect",126),n(),o(4," Duplicate "),n()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function di(a,t){if(a&1){let e=b();i(0,"button",127),_("click",function(){u(e);let s=d(2);return g(s.showArchiveModal())}),h(),i(1,"svg",117),p(2,"rect",128)(3,"path",129),n(),o(4," Archive "),n()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function mi(a,t){if(a&1){let e=b();i(0,"button",130),_("click",function(){u(e);let s=d(2);return g(s.showDeleteModal())}),h(),i(1,"svg",117),p(2,"rect",128)(3,"path",131),n(),o(4," Delete "),n()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function pi(a,t){if(a&1){let e=b();i(0,"button",132),_("click",function(){u(e);let s=d(2);return g(s.restoreSelected())}),h(),i(1,"svg",117),p(2,"path",133),n(),o(3," Restore "),n()}if(a&2){let e=d(2);m("disabled",e.selectedCount===0)}}function ui(a,t){if(a&1){let e=b();i(0,"div",108)(1,"div",109)(2,"button",105),_("click",function(){u(e);let s=d();return g(s.toggleSelectAllAssets())}),p(3,"span",110),n(),i(4,"span",111),o(5),n(),i(6,"span",112),h(),i(7,"svg",90),p(8,"path",113),n(),o(9," Selection Mode Active - Click cards to select "),n()(),x(),i(10,"div",114),v(11,ci,5,1,"button",115),i(12,"button",116),_("click",function(){u(e);let s=d();return g(s.generateQRCodeForSelectedAssets())}),h(),i(13,"svg",117),p(14,"path",118),n(),o(15," Generate QR Codes "),n(),v(16,di,5,1,"button",119)(17,mi,5,1,"button",120)(18,pi,4,1,"button",121),x(),i(19,"button",122),_("click",function(){u(e);let s=d();return g(s.clearSelection())}),h(),i(20,"svg",90),p(21,"path",123),n(),o(22," Clear "),n()()()}if(a&2){let e=d();l(2),w("mr-3",!e.isRtl())("ml-3",e.isRtl())("bg-blue-100",e.selectedCount===e.assetList.length),l(),w("bg-blue-400",e.selectedCount===e.assetList.length)("bg-white",e.selectedCount!==e.assetList.length),l(2),A("",e.selectedCount," asset",e.selectedCount>1?"s":""," selected"),l(2),w("mr-1",!e.isRtl())("ml-1",e.isRtl()),l(4),m("ngIf",!e.showingArchived),l(),m("disabled",e.selectedCount===0),l(4),m("ngIf",!e.showingArchived),l(),m("ngIf",e.showingArchived),l(),m("ngIf",e.showingArchived)}}function gi(a,t){if(a&1){let e=b();i(0,"div",134)(1,"div",135),h(),i(2,"svg",136),p(3,"path",21),n()(),x(),i(4,"h3",97),o(5,"No Assets Found"),n(),i(6,"p",137),o(7,"Get started by creating your first asset."),n(),i(8,"button",103),_("click",function(){u(e);let s=d();return g(s.goToCreateAsset())}),o(9," Add Asset "),n()()}}function _i(a,t){a&1&&(i(0,"span",173),o(1,"Active"),n())}function fi(a,t){if(a&1&&(i(0,"span"),o(1),n()),a&2){let e=d().$implicit,r=d(2);U("bg-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-100 text-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-700 text-xs font-semibold px-3 py-1 rounded-full"),l(),y((e.asset_status==null?null:e.asset_status.name)||e.status)}}function hi(a,t){if(a&1){let e=b();i(0,"button",187),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.viewAsset(s))}),h(),i(1,"svg",188),p(2,"path",189)(3,"path",190),n(),x(),i(4,"span",164),o(5,"View Details"),n()()}}function vi(a,t){if(a&1){let e=b();i(0,"button",187),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.editAsset(s))}),h(),i(1,"svg",188),p(2,"path",191),n(),x(),i(3,"span",164),o(4,"Edit Asset"),n()()}}function xi(a,t){if(a&1){let e=b();i(0,"button",187),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.duplicateAsset(s))}),h(),i(1,"svg",188),p(2,"path",181),n(),x(),i(3,"span",164),o(4,"Duplicate"),n()()}}function yi(a,t){if(a&1){let e=b();i(0,"button",192),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.archiveAsset(s))}),h(),i(1,"svg",193),p(2,"path",194),n(),x(),i(3,"span",195),o(4,"Archive"),n()()}}function bi(a,t){if(a&1){let e=b();i(0,"button",196),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.restoreAsset(s))}),h(),i(1,"svg",197),p(2,"path",133),n(),x(),i(3,"span",198),o(4,"Restore"),n()()}}function wi(a,t){if(a&1){let e=b();i(0,"button",199),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.deleteAsset(s))}),h(),i(1,"svg",200),p(2,"path",201),n(),x(),i(3,"span",202),o(4,"Delete Permanently"),n()()}}function Ci(a,t){if(a&1){let e=b();i(0,"div",174),v(1,hi,6,0,"button",175)(2,vi,5,0,"button",175)(3,xi,5,0,"button",175),i(4,"button",176),_("click",function(){u(e);let s=d().$implicit,c=d(2);return g(c.generateQRCodeForAsset(s))}),h(),i(5,"svg",177),p(6,"path",118),n(),x(),i(7,"span",178),o(8,"Generate QR Code"),n()(),i(9,"button",179),_("click",function(){u(e);let s=d().$implicit,c=d(2);return g(c.copyPublicUrl(s))}),h(),i(10,"svg",180),p(11,"path",181),n(),x(),i(12,"span",182),o(13,"Copy Public URL"),n()(),p(14,"div",183),v(15,yi,5,0,"button",184)(16,bi,5,0,"button",185)(17,wi,5,0,"button",186),n()}if(a&2){let e=d(3);l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(12),m("ngIf",!e.showingArchived),l(),m("ngIf",e.showingArchived),l(),m("ngIf",e.showingArchived)}}function Si(a,t){if(a&1&&p(0,"img",203),a&2){let e=d().$implicit;m("src",e.images[0].image_url,L)("alt",e.name||"Asset image")}}function Ei(a,t){a&1&&(h(),i(0,"svg",204),p(1,"path",21),n())}function Ai(a,t){if(a&1&&(i(0,"span"),o(1),n()),a&2){let e=d().$implicit;l(),C(" \u2022 ",(e.asset_type==null?null:e.asset_type.name)||e.type,"")}}function Mi(a,t){a&1&&(i(0,"span"),o(1," \u2192 "),n())}function ki(a,t){if(a&1&&(i(0,"span"),o(1),v(2,Mi,2,0,"span",55),n()),a&2){let e=t.$implicit,r=t.last;l(),C(" ",e.name,""),l(),m("ngIf",!r)}}function Ii(a,t){if(a&1&&(i(0,"span"),v(1,ki,3,2,"span",205),n()),a&2){let e=d().$implicit;l(),m("ngForOf",e.location_hierarchy)}}function Ti(a,t){a&1&&(i(0,"span"),o(1,"No location"),n())}function Vi(a,t){if(a&1&&(i(0,"div",206),h(),i(1,"svg",207),p(2,"path",208),n(),x(),i(3,"span",158),o(4),n()()),a&2){let e=d().$implicit,r=d(2);l(4),C("Value ",r.formatCurrencyValue(e.purchase_price||e.value||0),"")}}function Pi(a,t){if(a&1&&(i(0,"div",209),h(),i(1,"svg",207),p(2,"path",210),n(),x(),i(3,"span"),o(4),D(5,"dateFormat"),n()()),a&2){let e=d().$implicit;l(4),C("Purchase Date ",ie(5,1,e.purchase_date),"")}}function Di(a,t){if(a&1&&(i(0,"div",211)(1,"span",212),o(2,"Description:"),n(),o(3),n()),a&2){let e=d().$implicit;l(3),C(" ",e.description," ")}}function Li(a,t){if(a&1&&(i(0,"div",213)(1,"span",212),o(2,"Manufacturer:"),n(),o(3),n()),a&2){let e=d().$implicit;l(3),C(" ",e.manufacturer," ")}}function Oi(a,t){if(a&1&&(i(0,"div",213)(1,"span",212),o(2,"Model:"),n(),o(3),n()),a&2){let e=d().$implicit;l(3),C(" ",e.model," ")}}function Fi(a,t){if(a&1&&(i(0,"div",213)(1,"span",212),o(2,"Capacity:"),n(),o(3),n()),a&2){let e=d().$implicit;l(3),A(" ",e.capacity," ",e==null?null:e.capacity_unit," ")}}function Hi(a,t){if(a&1){let e=b();i(0,"div",140)(1,"div",141)(2,"div",142)(3,"input",143),V("ngModelChange",function(s){let c=u(e).$implicit;return T(c.selected,s)||(c.selected=s),g(s)}),n()(),i(4,"div",144),v(5,_i,2,0,"span",145)(6,fi,2,3,"span",146),i(7,"div",8),_("click",function(s){return u(e),g(s.stopPropagation())}),i(8,"button",147),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.toggleAssetMenu(s.id))}),h(),i(9,"svg",148),p(10,"circle",149)(11,"circle",150)(12,"circle",151),n()(),v(13,Ci,18,6,"div",152),n()(),v(14,Si,1,2,"img",153)(15,Ei,2,0,"svg",154),n(),x(),i(16,"div",155)(17,"div")(18,"div",156),_("click",function(){let s=u(e).$implicit,c=d(2);return g(!c.showingArchived&&c.viewAsset(s))}),o(19),n(),i(20,"div",157)(21,"span",158),o(22),n(),v(23,Ai,2,1,"span",55),n(),i(24,"div",159)(25,"div",160),h(),i(26,"svg",161),p(27,"path",162)(28,"path",163),n(),x(),i(29,"span",164),v(30,Ii,2,1,"span",55)(31,Ti,2,0,"span",55),n()()(),v(32,Vi,5,1,"div",165)(33,Pi,6,3,"div",166),i(34,"div",159)(35,"div",167),o(36,"Health Score"),n(),i(37,"div",114)(38,"div",168),p(39,"div",169),n(),i(40,"span",170),o(41),n()()(),v(42,Di,4,1,"div",171)(43,Li,4,1,"div",172)(44,Oi,4,1,"div",172)(45,Fi,4,2,"div",172),n()()()}if(a&2){let e=t.$implicit,r=d(2);w("border-blue-400",e.selected),l(3),I("ngModel",e.selected),l(2),m("ngIf",(e.asset_status==null?null:e.asset_status.name)==="Active"),l(),m("ngIf",(e.asset_status==null?null:e.asset_status.name)!=="Active"),l(7),m("ngIf",e.showMenu),l(),m("ngIf",e.images&&e.images.length>0&&e.images[0].image_url),l(),m("ngIf",!e.images||e.images.length===0||!e.images[0].image_url),l(3),w("cursor-pointer",!r.showingArchived)("hover:text-blue-600",!r.showingArchived)("cursor-default",r.showingArchived),l(),C(" ",e.name||"Unnamed Asset"," "),l(3),y(e.asset_id||"AST-"+e.id),l(),m("ngIf",(e.asset_type==null?null:e.asset_type.name)||e.type),l(7),m("ngIf",e.location_hierarchy&&e.location_hierarchy.length>0),l(),m("ngIf",!e.location_hierarchy||e.location_hierarchy.length===0),l(),m("ngIf",e.purchase_price||e.value),l(),m("ngIf",e.purchase_date),l(6),H("width",e.health_score||0,"%"),w("bg-green-500",(e.health_score||0)>=80)("bg-yellow-500",(e.health_score||0)>=60&&(e.health_score||0)<80)("bg-orange-500",(e.health_score||0)>=40&&(e.health_score||0)<60)("bg-red-500",(e.health_score||0)<40),l(2),C("",e.health_score||0,"%"),l(),m("ngIf",e.description),l(),m("ngIf",e.manufacturer),l(),m("ngIf",e.model),l(),m("ngIf",e.capacity&&e.capacity_unit)}}function ji(a,t){if(a&1&&(i(0,"div",138),v(1,Hi,46,36,"div",139),n()),a&2){let e=d();l(),m("ngForOf",e.assetList)}}function Ri(a,t){a&1&&(i(0,"span"),o(1," \u2192 "),n())}function Bi(a,t){if(a&1&&(i(0,"span"),o(1),v(2,Ri,2,0,"span",55),n()),a&2){let e=t.$implicit,r=t.last;l(),C(" ",e.name,""),l(),m("ngIf",!r)}}function Ni(a,t){if(a&1&&(i(0,"span"),v(1,Bi,3,2,"span",205),n()),a&2){let e=d().$implicit;l(),m("ngForOf",e.location_hierarchy)}}function Gi(a,t){a&1&&(i(0,"span"),o(1,"No location"),n())}function zi(a,t){if(a&1&&(i(0,"div",229),o(1),n()),a&2){let e=d().$implicit;l(),C(" ",e.description," ")}}function $i(a,t){a&1&&(i(0,"div",233),o(1," No description "),n())}function Ui(a,t){if(a&1&&(i(0,"div",229)(1,"span",158),o(2,"MFG:"),n(),o(3),n()),a&2){let e=d().$implicit;l(3),C(" ",e.manufacturer," ")}}function qi(a,t){if(a&1&&(i(0,"div",98)(1,"span",158),o(2,"Model:"),n(),o(3),n()),a&2){let e=d().$implicit;l(3),C(" ",e.model," ")}}function Wi(a,t){if(a&1&&(i(0,"div",98)(1,"span",158),o(2,"Capacity:"),n(),o(3),n()),a&2){let e=d().$implicit;l(3),C(" ",e.capacity," ")}}function Qi(a,t){a&1&&(i(0,"div",233),o(1," No details "),n())}function Yi(a,t){if(a&1){let e=b();i(0,"button",187),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.viewAsset(s))}),h(),i(1,"svg",188),p(2,"path",189)(3,"path",190),n(),x(),i(4,"span",164),o(5,"View Details"),n()()}}function Zi(a,t){if(a&1){let e=b();i(0,"button",187),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.editAsset(s))}),h(),i(1,"svg",188),p(2,"path",191),n(),x(),i(3,"span",164),o(4,"Edit Asset"),n()()}}function Ji(a,t){if(a&1){let e=b();i(0,"button",187),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.duplicateAsset(s))}),h(),i(1,"svg",188),p(2,"path",181),n(),x(),i(3,"span",164),o(4,"Duplicate"),n()()}}function Xi(a,t){if(a&1){let e=b();i(0,"button",192),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.archiveAsset(s))}),h(),i(1,"svg",193),p(2,"path",194),n(),x(),i(3,"span",195),o(4,"Archive"),n()()}}function Ki(a,t){if(a&1){let e=b();i(0,"button",196),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.restoreAsset(s))}),h(),i(1,"svg",197),p(2,"path",133),n(),x(),i(3,"span",198),o(4,"Restore"),n()()}}function en(a,t){if(a&1){let e=b();i(0,"button",199),_("click",function(){u(e);let s=d(2).$implicit,c=d(2);return g(c.deleteAsset(s))}),h(),i(1,"svg",200),p(2,"path",201),n(),x(),i(3,"span",202),o(4,"Delete Permanently"),n()()}}function tn(a,t){if(a&1){let e=b();i(0,"div",174),v(1,Yi,6,0,"button",175)(2,Zi,5,0,"button",175)(3,Ji,5,0,"button",175),i(4,"button",176),_("click",function(){u(e);let s=d().$implicit,c=d(2);return g(c.generateQRCodeForAsset(s))}),h(),i(5,"svg",177),p(6,"path",234),n(),x(),i(7,"span",178),o(8,"Generate QR Code"),n()(),i(9,"button",179),_("click",function(){u(e);let s=d().$implicit,c=d(2);return g(c.copyPublicUrl(s))}),h(),i(10,"svg",180),p(11,"path",181),n(),x(),i(12,"span",182),o(13,"Copy Public URL"),n()(),p(14,"div",183),v(15,Xi,5,0,"button",184)(16,Ki,5,0,"button",185)(17,en,5,0,"button",186),n()}if(a&2){let e=d(3);l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(),m("ngIf",!e.showingArchived),l(12),m("ngIf",!e.showingArchived),l(),m("ngIf",e.showingArchived),l(),m("ngIf",e.showingArchived)}}function nn(a,t){if(a&1){let e=b();i(0,"div",223)(1,"div",224)(2,"div",220)(3,"input",143),V("ngModelChange",function(s){let c=u(e).$implicit;return T(c.selected,s)||(c.selected=s),g(s)}),n()(),i(4,"div",219)(5,"div",225)(6,"div",226),h(),i(7,"svg",227),p(8,"path",21),n()(),x(),i(9,"div")(10,"div",228),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.viewAsset(s))}),o(11),n(),i(12,"div",98),o(13),n()()()(),i(14,"div",219)(15,"div",229),o(16),n(),i(17,"div",98),o(18),n()(),i(19,"div",219)(20,"div",160),h(),i(21,"svg",161),p(22,"path",162)(23,"path",163),n(),x(),i(24,"span",164),v(25,Ni,2,1,"span",55)(26,Gi,2,0,"span",55),n()()(),i(27,"div",219),v(28,zi,2,1,"div",230)(29,$i,2,0,"div",231),n(),i(30,"div",219),v(31,Ui,4,1,"div",230)(32,qi,4,1,"div",232)(33,Wi,4,1,"div",232)(34,Qi,2,0,"div",231),n(),i(35,"div",220)(36,"div",8),_("click",function(s){return u(e),g(s.stopPropagation())}),i(37,"button",147),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.toggleAssetMenu(s.id))}),h(),i(38,"svg",148),p(39,"circle",149)(40,"circle",150)(41,"circle",151),n()(),v(42,tn,18,6,"div",152),n()()()()}if(a&2){let e=t.$implicit;w("bg-blue-50",e.selected),l(3),I("ngModel",e.selected),l(8),C(" ",e.name||"Unnamed Asset"," "),l(2),y(e.asset_id||"AST-"+e.id),l(3),y((e.category==null?null:e.category.name)||"General"),l(2),y((e.asset_type==null?null:e.asset_type.name)||e.type||"Standard Asset"),l(7),m("ngIf",e.location_hierarchy&&e.location_hierarchy.length>0),l(),m("ngIf",!e.location_hierarchy||e.location_hierarchy.length===0),l(2),m("ngIf",e.description),l(),m("ngIf",!e.description),l(2),m("ngIf",e.manufacturer),l(),m("ngIf",e.model),l(),m("ngIf",e.capacity),l(),m("ngIf",!e.manufacturer&&!e.model&&!e.capacity),l(8),m("ngIf",e.showMenu)}}function rn(a,t){if(a&1){let e=b();i(0,"div",214)(1,"div",215)(2,"div",216)(3,"div",217)(4,"input",218),_("change",function(){u(e);let s=d();return g(s.toggleSelectAllAssets())}),n()(),i(5,"div",219),o(6,"Asset ID & Name"),n(),i(7,"div",219),o(8,"Category & Type"),n(),i(9,"div",219),o(10,"Location"),n(),i(11,"div",219),o(12,"Description"),n(),i(13,"div",219),o(14,"Manufacturer & Model"),n(),i(15,"div",220),o(16,"Actions"),n()()(),i(17,"div",221),v(18,nn,43,16,"div",222),n()()}if(a&2){let e=d();l(4),m("checked",e.selectedCount===e.assetList.length&&e.assetList.length>0)("indeterminate",e.selectedCount>0&&e.selectedCount<e.assetList.length),l(14),m("ngForOf",e.assetList)}}function an(a,t){if(a&1){let e=b();i(0,"app-pagination",235),_("pageChange",function(s){u(e);let c=d();return g(c.onPageChange(s))})("perPageChange",function(s){u(e);let c=d();return g(c.onPerPageChange(s))}),n()}if(a&2){let e=d();m("pagination",e.pagination)}}var Se=class a{constructor(t,e,r){this.router=t;this.assetService=e;this.pdfExportService=r}destroy$=new J;prefsService=ge(kt);currencyService=ge(re);formatService=ge(Je);currentCurrency=_e("USD");summary={totalAssets:0,activeAssets:0,maintenance:0,totalValue:0,assetHealth:0};loading=!1;exportingExcel=!1;error="";showMenu=!1;showTypeDropdown=!1;showStatusDropdown=!1;showSortDropdown=!1;showSortDirDropdown=!1;showArchiveConfirmationModal=!1;showDeleteConfirmationModal=!1;showRestoreConfirmationModal=!1;selectedAssetForRestore=null;showingArchived=!1;typeOptions=[{value:"",label:"All Types"},{value:"fixed",label:"Fixed Asset"},{value:"semi-fixed",label:"Semi-Fixed Asset"},{value:"mobile",label:"Mobile Asset"},{value:"fleet",label:"Fleet Asset"}];statusOptions=[{value:"",label:"All Status"},{value:"Active",label:"Active"},{value:"Maintenance",label:"Maintenance"},{value:"Inactive",label:"Inactive"},{value:"Retired",label:"Retired"}];sortOptions=[{value:"name",label:"Name"},{value:"created_at",label:"Date Added"},{value:"status",label:"Status"},{value:"manufacturer",label:"Manufacturer"},{value:"purchase_price",label:"Cost"}];selectedType=this.typeOptions[0];selectedStatus=this.statusOptions[0];selectedSort=this.sortOptions[0];selectedSortDir="desc";sortDropdownOptions=[];selectedSortOption=null;assetTypeDropdownOptions=[];selectedAssetTypeOption=null;assetStatusDropdownOptions=[];selectedAssetStatusOption=null;viewType="grid";searchQuery="";activeTab="active";currentFilters={search:"",type:"",status:"",category_id:"",location_id:"",sort_by:"name",sort_direction:"desc",page:1,per_page:20,archived:!1};assetList=[];categories=[];locations=[];assetTypes=[];showAssetTypeDropdown=!1;selectedAssetType=null;assetStatuses=[];showAssetStatusDropdown=!1;selectedAssetStatus=null;openAssetMenuId=null;pagination={current_page:1,last_page:1,per_page:20,total:0,from:0,to:0};selectAllAssets=!1;ngOnInit(){this.currencyService.get$().pipe(k(this.destroy$)).subscribe(e=>{this.currentCurrency.set(e)});let t=this.prefsService.get("items_per_page")||20;this.currentFilters.per_page=t,this.pagination.per_page=t,this.loadAssetStatistics(),this.loadAssets(),this.loadCategories(),this.loadLocations(),this.assetService.getAssetTypes().subscribe(e=>{e.success&&e.data&&(this.assetTypes=[{id:"",name:"All Types",label:"All Types",icon:null},...e.data.map(r=>({id:r.id,name:r.name,label:r.name,icon:r.icon||null}))],this.selectedAssetType=this.assetTypes[0],this.assetTypeDropdownOptions=this.assetTypes.map(r=>({id:r.id,name:r.label||r.name,icon:r.icon})),this.selectedAssetTypeOption=this.assetTypeDropdownOptions[0]||null)}),this.assetService.getAssetStatuses().subscribe(e=>{e.success&&e.data&&(this.assetStatuses=[{id:"",name:"All Statuses",label:"All Statuses",color:null},...e.data.map(r=>({id:r.id,name:r.name,label:r.name,color:r.color||null}))],this.selectedAssetStatus=this.assetStatuses[0],this.assetStatusDropdownOptions=this.assetStatuses.map(r=>({id:r.id,name:r.label||r.name})),this.selectedAssetStatusOption=this.assetStatusDropdownOptions[0]||null)}),this.sortDropdownOptions=this.sortOptions.map(e=>({id:e.value,name:e.label})),this.selectedSortOption=this.sortDropdownOptions.find(e=>e.id===this.selectedSort.value)||this.sortDropdownOptions[0]}loadAssetStatistics(){this.assetService.getAssetStatistics().pipe(k(this.destroy$)).subscribe({next:t=>{if(t.success&&t.data){let e=t.data;this.summary={totalAssets:e.total_assets||0,activeAssets:e.active_assets||0,maintenance:e.maintenance||0,totalValue:e.total_asset_value||0,assetHealth:e.average_health_score||0}}},error:t=>{console.error("Error loading asset statistics:",t)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getHealthLabel(t){return t===0?"No data":t>=90?"Excellent health":t>=75?"Good health":t>=60?"Fair health":t>=40?"Poor health":"Critical"}loadAssets(){this.loading=!0,this.error="";let t={};this.currentFilters.search&&(t.search=this.currentFilters.search),this.currentFilters.type&&(t.type=this.currentFilters.type),this.currentFilters.status&&(t.status=this.currentFilters.status),this.currentFilters.category_id&&(t.category_id=this.currentFilters.category_id),this.currentFilters.location_id&&(t.location_id=this.currentFilters.location_id),this.currentFilters.sort_by&&(t.sort_by=this.currentFilters.sort_by),this.currentFilters.sort_direction&&(t.sort_direction=this.currentFilters.sort_direction),t.archived=this.currentFilters.archived,t.page=this.currentFilters.page,t.per_page=this.currentFilters.per_page,this.assetService.getAssets(t).pipe(k(this.destroy$)).subscribe({next:e=>{e.success?(this.assetList=(e.data.assets||e.data).map(r=>we(ue({},r),{selected:!1,showMenu:!1})),e.data.pagination&&(this.pagination=e.data.pagination)):this.error=e.message||"Failed to load assets",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading assets",this.loading=!1}})}loadCategories(){this.assetService.getAssetCategories().pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&(this.categories=t.data.categories)},error:t=>{console.error("Error loading categories:",t)}})}loadLocations(){this.assetService.getLocations().pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&(this.locations=t.data.locations||t.data)},error:t=>{console.error("Error loading locations:",t)}})}onSearch(){this.currentFilters.search=this.searchQuery,this.currentFilters.page=1,this.loadAssets()}applyFilters(){this.currentFilters.page=1,this.loadAssets()}get selectedCount(){return this.assetList.filter(t=>t.selected).length}get assetNameForRestore(){return this.selectedAssetForRestore?this.selectedAssetForRestore.name||"":this.selectedCount===1&&this.assetList.find(e=>e.selected)?.name||""}toggleSelectAllAssets(){let t=this.selectedCount===this.assetList.length;this.assetList.forEach(e=>e.selected=!t),this.selectAllAssets=!t}selectType(t){let e=this.typeOptions.find(r=>r.value===t);e&&(this.selectedType=e,this.currentFilters.type=e.value),this.showTypeDropdown=!1,this.applyFilters()}selectStatus(t){let e=this.statusOptions.find(r=>r.value===t);e&&(this.selectedStatus=e,this.currentFilters.status=e.value),this.showStatusDropdown=!1,this.applyFilters()}selectSort(t){let e=this.sortOptions.find(r=>r.value===t);e&&(this.selectedSort=e,this.currentFilters.sort_by=e.value),this.showSortDropdown=!1,this.applyFilters()}selectSortDir(t){this.selectedSortDir=t,this.currentFilters.sort_direction=t,this.showSortDirDropdown=!1,this.applyFilters()}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.currentFilters.sort_direction=this.selectedSortDir,this.applyFilters()}duplicateSelected(){let t=this.assetList.filter(r=>r.selected);if(t.length===0)return;let e=t[0];this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:e.id}}),this.clearSelection()}generateSerialNumber(){let t=Date.now().toString(),e=Math.random().toString(36).substring(2,8).toUpperCase();return`SN${t.slice(-6)}${e}`}clearSelection(){this.assetList.forEach(t=>{t.selected=!1,t.showMenu=!1}),this.selectAllAssets=!1,this.selectedAssetForRestore=null,this.showRestoreConfirmationModal=!1,this.showArchiveConfirmationModal=!1,this.showDeleteConfirmationModal=!1}showArchiveModal(){this.selectedCount>0&&(this.showArchiveConfirmationModal=!0)}closeArchiveModal(){this.showArchiveConfirmationModal=!1}showDeleteModal(){this.selectedCount>0&&(this.showDeleteConfirmationModal=!0)}closeDeleteModal(){this.showDeleteConfirmationModal=!1}closeRestoreModal(){this.showRestoreConfirmationModal=!1,this.selectedAssetForRestore=null}restoreSelectedAsset(t){let e=this.assetList.filter(r=>r.selected);if(e.length>1)this.restoreBulkAssets(t);else if(e.length===1){let r=e[0],s={};t&&t.trim()&&(s.restore_reason=t.trim()),this.assetService.restoreAsset(r.id,s).pipe(k(this.destroy$)).subscribe({next:c=>{c.success?(this.loadAssets(),this.loadAssetStatistics(),console.log("Asset restored successfully")):this.error=c.message||"Failed to restore asset",this.closeRestoreModal(),this.clearSelection()},error:c=>{this.error=c.error?.message||"An error occurred while restoring the asset",this.closeRestoreModal()}})}else if(this.selectedAssetForRestore){let r={};t&&t.trim()&&(r.restore_reason=t.trim()),this.assetService.restoreAsset(this.selectedAssetForRestore.id,r).pipe(k(this.destroy$)).subscribe({next:s=>{s.success?(this.loadAssets(),this.loadAssetStatistics(),console.log("Asset restored successfully")):this.error=s.message||"Failed to restore asset",this.closeRestoreModal()},error:s=>{this.error=s.error?.message||"An error occurred while restoring the asset",this.closeRestoreModal()}})}else this.closeRestoreModal()}deleteSelected(t){let e=this.assetList.filter(c=>c.selected);if(e.length===0){this.closeDeleteModal();return}let s={asset_ids:e.map(c=>c.id)};t&&t.trim()&&(s.deletion_reason=t.trim()),this.assetService.bulkDeleteAssets(s).pipe(k(this.destroy$)).subscribe({next:c=>{if(c.success){if(c.failed&&c.failed.length>0){let f=c.failed.length,E=c.deleted?c.deleted.length:0;this.error=`${E} assets deleted successfully, ${f} failed to delete`}else{let f=c.deleted?c.deleted.length:e.length;console.log(`${f} assets deleted successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=c.message||"Failed to delete assets";this.closeDeleteModal()},error:c=>{this.error=c.error?.message||"An error occurred while deleting assets",this.closeDeleteModal()}})}viewAsset(t){this.router.navigate(["/assets/preview",t.id])}archiveSelected(t){let e=this.assetList.filter(c=>c.selected);if(e.length===0){this.closeArchiveModal();return}let s={asset_ids:e.map(c=>c.id)};t&&t.trim()&&(s.archive_reason=t.trim()),this.assetService.bulkArchiveAssets(s).pipe(k(this.destroy$)).subscribe({next:c=>{if(c.success){if(c.failed&&c.failed.length>0){let f=c.failed.length,E=c.archived?c.archived.length:0;this.error=`${E} assets archived successfully, ${f} failed to archive`}else{let f=c.archived?c.archived.length:e.length;console.log(`${f} assets archived successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=c.message||"Failed to archive assets";this.closeArchiveModal()},error:c=>{this.error=c.error?.message||"An error occurred while archiving assets",this.closeArchiveModal()}})}toggleTypeDropdown(){this.showTypeDropdown=!this.showTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showTypeDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown,this.showTypeDropdown=!1,this.showStatusDropdown=!1,this.showSortDirDropdown=!1}toggleArchivedView(){this.setTab(this.showingArchived?"active":"archive"),this.showMenu=!1}goToCreateAsset(){this.router.navigate(["assets/create"])}exportToPdf(){if(this.assetList.length>0){let t=this.showingArchived?"Archived Assets Export Report":"Asset Export Report";this.pdfExportService.exportAssetsToPdf(this.assetList,t),this.showMenu=!1}else console.log("No assets to export")}exportToExcel(){this.assetList.length>0?(this.exportingExcel=!0,this.assetService.exportAssetsToExcel(this.showingArchived).subscribe({next:t=>{let e=window.URL.createObjectURL(t),r=document.createElement("a");r.href=e;let s=this.showingArchived?"archived-assets-export.xlsx":"assets-export.xlsx";r.download=s,r.click(),window.URL.revokeObjectURL(e),this.exportingExcel=!1,this.showMenu=!1},error:t=>{console.error("Error exporting to Excel:",t),this.exportingExcel=!1}})):console.log("No assets to export")}getStatusColor(t){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[t]||"gray"}toggleAssetMenu(t){this.assetList.forEach(r=>{r.id!==t&&(r.showMenu=!1)});let e=this.assetList.find(r=>r.id===t);e&&(e.showMenu=!e.showMenu)}editAsset(t){this.router.navigate(["/assets",t.id,"edit"]),t.showMenu=!1}duplicateAsset(t){this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:t.id}}),t.showMenu=!1}archiveAsset(t){this.assetList.forEach(e=>e.selected=!1),t.selected=!0,this.showArchiveConfirmationModal=!0,t.showMenu=!1}deleteAsset(t){this.assetList.forEach(e=>e.selected=!1),t.selected=!0,this.showDeleteConfirmationModal=!0,t.showMenu=!1}restoreSelected(){this.assetList.filter(e=>e.selected).length!==0&&(this.selectedAssetForRestore=null,this.showRestoreConfirmationModal=!0)}restoreBulkAssets(t){let e=this.assetList.filter(s=>s.selected);if(e.length===0){this.closeRestoreModal();return}let r=e.map(s=>s.id);this.assetService.bulkRestoreAssets(r,t).pipe(k(this.destroy$)).subscribe({next:s=>{if(s.success){if(s.failed&&s.failed.length>0){let c=s.failed.length,f=s.restored?s.restored.length:0;this.error=`${f} assets restored successfully, ${c} failed to restore`}else{let c=s.restored?s.restored.length:e.length;console.log(`${c} assets restored successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=s.message||"Failed to restore assets";this.closeRestoreModal()},error:s=>{this.error=s.error?.message||"An error occurred while restoring assets",this.closeRestoreModal()}})}restoreAsset(t){this.selectedAssetForRestore=t,this.showRestoreConfirmationModal=!0,t.showMenu=!1}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.currentFilters.type=t.id,this.showAssetTypeDropdown=!1,this.applyFilters()}toggleAssetStatusDropdown(){this.showAssetStatusDropdown=!this.showAssetStatusDropdown}selectAssetStatus(t){this.selectedAssetStatus=t,this.currentFilters.status=t.id,this.showAssetStatusDropdown=!1,this.applyFilters()}onSelectAssetType(t){this.selectedAssetTypeOption=t,this.selectedAssetType=this.assetTypes.find(e=>e.id===(t?.id??""))||null,this.currentFilters.type=t?.id||"",this.applyFilters()}onSelectAssetStatus(t){this.selectedAssetStatusOption=t,this.selectedAssetStatus=this.assetStatuses.find(e=>e.id===(t?.id??""))||null,this.currentFilters.status=t?.id||"",this.applyFilters()}onSelectSort(t){this.selectedSortOption=t;let e=this.sortOptions.find(r=>r.value===(t?.id||""))||this.sortOptions[0];this.selectedSort=e,this.currentFilters.sort_by=e.value,this.applyFilters()}onDocumentClick(t){t.target.closest(".menu-container")||(this.showMenu=!1)}generateQRCodeForAsset(t){let e=`${window.location.origin}/public/asset/${t.id}`;Rt.toDataURL(e,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(r=>{let s=document.createElement("a");s.href=r,s.download=`asset-${t.id}-qr.png`,s.click()}).catch(r=>{console.error("Error generating QR code:",r)})}generateQRCodeForSelectedAssets(){let t=this.assetList.filter(e=>e.selected);if(t.length===0){console.log("No assets selected");return}t.forEach(e=>{this.generateQRCodeForAsset(e)})}copyPublicUrl(t){let e=`${window.location.origin}/public/asset/${t.id}`;navigator.clipboard.writeText(e).then(()=>{console.log("Public URL copied to clipboard")})}onPageChange(t){this.currentFilters.page=t,this.loadAssets()}onPerPageChange(t){this.currentFilters.per_page=t,this.currentFilters.page=1,this.loadAssets()}setTab(t){this.activeTab=t,this.showingArchived=t==="archive",this.currentFilters.archived=this.showingArchived,this.currentFilters.page=1,this.clearSelection(),this.loadAssets()}formatCurrencyValue(t){if(!t&&t!==0)return`${this.currencyService.getSymbol()}0`;let e=Math.abs(t),r=t<0?"-":"",s=this.currencyService.getSymbol();if(e>=1e6){let c=e/1e6,f=c%1===0?0:1;return`${r}${s}${this.formatService.formatNumber(c,f)}M`}else if(e>=1e3){let c=e/1e3,f=c%1===0?0:1;return`${r}${s}${this.formatService.formatNumber(c,f)}k`}else return`${r}${s}${this.formatService.formatNumber(e,2)}`}isRtl(){return document.documentElement.dir==="rtl"}static \u0275fac=function(e){return new(e||a)(M(ne),M(Z),M(lt))};static \u0275cmp=R({type:a,selectors:[["app-asset-list"]],hostBindings:function(e,r){e&1&&_("click",function(c){return r.onDocumentClick(c)},!1,Ee)},decls:119,vars:51,consts:[[1,"asset-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-5","py-2","rounded-lg","shadow-sm","transition-colors","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"relative",3,"click"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",3,"right-0","left-0",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-5","gap-4","mb-8"],[1,"rounded-xl","bg-blue-50","border","border-blue-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-base","font-medium","text-gray-700"],[1,"w-10","h-10","bg-blue-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-sm","text-blue-600","font-medium","mt-1"],[1,"rounded-xl","bg-green-50","border","border-green-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-green-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-400"],["cx","12","cy","12","r","8","stroke","currentColor","stroke-width","2","fill","none"],["cx","12","cy","12","r","4","fill","currentColor",1,"text-green-400"],[1,"text-sm","text-green-600","font-medium","mt-1"],[1,"rounded-xl","bg-orange-50","border","border-orange-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-orange-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-1.5a2.5 2.5 0 11-3.536 3.536l-7.5 7.5a2 2 0 102.828 2.828l7.5-7.5a2.5 2.5 0 013.536-3.536z"],[1,"text-sm","text-orange-600","font-medium","mt-1"],[1,"rounded-xl","bg-purple-50","border","border-purple-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-purple-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-sm","text-purple-600","font-medium","mt-1"],[1,"rounded-xl","bg-cyan-50","border","border-cyan-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-cyan-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3zm0 0V4m0 8v8m8-8h-8m8 0a8 8 0 11-16 0 8 8 0 0116 0z"],[1,"text-sm","text-cyan-600","font-medium","mt-1"],[1,"navigation-tabs","mb-4"],[1,"tabs-nav"],[1,"tab-link","block","w-full","text-center",3,"click"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","mb-6"],[1,"flex-1","flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:items-center","md:space-x-3"],[1,"relative","w-full","md:w-80"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search assets by name, location, or ID...",1,"w-full","pl-10","pr-3","py-2","border-2","border-blue-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","input","ngModel"],[3,"selectionChange","placeholder","options","selectedOption","minWidth"],[4,"ngIf"],[1,"relative"],[1,"px-4","py-3","bg-gray-100","rounded-lg","text-gray-700","flex","items-center","space-x-2","min-w-[70px]","cursor-pointer",3,"click"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","space-x-2","mt-4","md:mt-0"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","border","border-gray-200","hover:bg-blue-50","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["x","4","y","4","width","7","height","7","rx","2"],["x","13","y","4","width","7","height","7","rx","2"],["x","4","y","13","width","7","height","7","rx","2"],["x","13","y","13","width","7","height","7","rx","2"],["x","4","y","6","width","16","height","4","rx","2"],["x","4","y","14","width","16","height","4","rx","2"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center justify-between",4,"ngIf"],["class","text-center py-20",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-2 mb-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-6",4,"ngIf"],[3,"pagination","pageChange","perPageChange",4,"ngIf"],[3,"closeModal","confirmArchive","isOpen","selectedCount"],[3,"closeModal","confirmDelete","isOpen","selectedCount"],[3,"closeModal","confirmRestore","isOpen","selectedCount","assetName"],[1,"absolute","mt-2","w-64","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","px-4","py-2","hover:bg-gray-50","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"w-full","flex","items-center","px-4","py-2","hover:bg-gray-50","transition-colors","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","w-5 h-5 text-gray-500","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"mr-3","ml-3",4,"ngIf"],["class","animate-spin w-5 h-5 text-gray-500","fill","none","viewBox","0 0 24 24",3,"mr-3","ml-3",4,"ngIf"],["routerLink","/assets/import",1,"w-full","flex","items-center","px-4","py-2","hover:bg-gray-50","transition-colors","cursor-pointer"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5","text-gray-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 17l-4 4m0 0l-4-4m4 4V3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7l4-4m0 0l4 4m-4-4v18"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center"],["type","button",1,"focus:outline-none","inline-flex","items-center","justify-center","w-6","h-6","rounded-full","border-2","border-blue-400","transition-colors",3,"click"],[1,"w-3","h-3","rounded-full","block","bg-white","transition-colors"],[1,"font-semibold","text-gray-900"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-3","h-3","rounded-full","block","transition-colors"],[1,"font-bold","text-gray-900"],[1,"bg-blue-50","text-blue-600","px-3","py-1","rounded-full","text-sm","flex","items-center","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7"],[1,"flex","items-center","space-x-2"],["class","bg-gray-50 text-gray-700 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 border border-gray-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-purple-50","text-purple-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zm12 0h2a1 1 0 001-1V6a1 1 0 00-1-1h-2a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1z"],["class","bg-orange-50 text-orange-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-red-50 text-red-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-green-50 text-green-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-gray-50","text-gray-700","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","border","border-gray-200","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"bg-gray-50","text-gray-700","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","border","border-gray-200","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","8","y","8","width","8","height","8","rx","2","stroke-width","2"],["x","4","y","4","width","8","height","8","rx","2","stroke-width","2"],[1,"bg-orange-50","text-orange-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","4","y","4","width","16","height","16","rx","2","stroke-width","2"],["d","M8 12h8","stroke-width","2"],[1,"bg-red-50","text-red-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["d","M8 8l8 8M8 16l8-8","stroke-width","2"],[1,"bg-green-50","text-green-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-20"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","mt-2","mb-6"],["class","rounded-2xl border border-blue-200 bg-white shadow-sm flex flex-col transition-all hover:shadow-md overflow-hidden",3,"border-blue-400",4,"ngFor","ngForOf"],[1,"rounded-2xl","border","border-blue-200","bg-white","shadow-sm","flex","flex-col","transition-all","hover:shadow-md","overflow-hidden"],[1,"relative","bg-[#e0edff]","h-32","flex","flex-col","items-center","justify-center"],[1,"absolute","left-4","top-4","flex","items-center"],["type","checkbox",1,"asset-card-checkbox",3,"ngModelChange","ngModel"],[1,"absolute","right-4","top-4","flex","items-center","space-x-2"],["class","bg-green-100 text-green-700 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[3,"class",4,"ngIf"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["cx","12","cy","6","r","1.5"],["cx","12","cy","12","r","1.5"],["cx","12","cy","18","r","1.5"],["class","absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",4,"ngIf"],["class","w-full h-full object-contain",3,"src","alt",4,"ngIf"],["class","w-16 h-16 text-blue-400","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex-1","flex","flex-col","justify-between","p-6","pt-4"],[1,"font-semibold","text-lg","text-gray-900","mb-2","cursor-pointer","hover:text-blue-600","transition-colors",3,"click"],[1,"text-sm","text-gray-600","mb-3"],[1,"font-medium"],[1,"mb-3"],[1,"flex","items-center","px-3","py-2","bg-gray-50","border","border-gray-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-sm","text-gray-700"],["class","flex items-center text-sm text-gray-700 mb-2",4,"ngIf"],["class","flex items-center text-sm text-gray-700 mb-3",4,"ngIf"],[1,"text-sm","font-medium","text-gray-700","mb-1"],[1,"flex-1","h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","rounded-full","transition-all"],[1,"text-sm","font-medium","text-gray-900"],["class","text-sm text-gray-700 mb-2 line-clamp-2",4,"ngIf"],["class","text-sm text-gray-700 mb-1",4,"ngIf"],[1,"bg-green-100","text-green-700","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-1","z-50"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-purple-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-500"],[1,"text-sm","text-purple-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-blue-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"text-sm","text-blue-600"],[1,"border-t","border-gray-100","my-1"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-orange-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-green-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-red-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-orange-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],[1,"text-sm","text-orange-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-green-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-500"],[1,"text-sm","text-green-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-red-600"],[1,"w-full","h-full","object-contain",3,"src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-blue-400"],[4,"ngFor","ngForOf"],[1,"flex","items-center","text-sm","text-gray-700","mb-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"flex","items-center","text-sm","text-gray-700","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-sm","text-gray-700","mb-2","line-clamp-2"],[1,"font-medium","text-gray-600"],[1,"text-sm","text-gray-700","mb-1"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden","mb-6"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-1","flex","items-center"],["type","checkbox",1,"asset-card-checkbox",3,"change","checked","indeterminate"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 transition-colors",3,"bg-blue-50",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","transition-colors"],[1,"grid","grid-cols-12","gap-4","items-center"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"font-medium","text-gray-900","hover:text-blue-600","cursor-pointer","transition-colors",3,"click"],[1,"text-sm","text-gray-900"],["class","text-sm text-gray-900",4,"ngIf"],["class","text-sm text-gray-400",4,"ngIf"],["class","text-sm text-gray-500",4,"ngIf"],[1,"text-sm","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1z"],[3,"pageChange","perPageChange","pagination"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Asset Intelligence Hub"),n(),i(5,"p",3),o(6,"Advanced asset monitoring with AI-powered insights and real-time analytics"),n()(),i(7,"div",4)(8,"button",5),_("click",function(){return r.goToCreateAsset()}),h(),i(9,"svg",6),p(10,"path",7),n(),o(11," Add Asset "),n(),x(),i(12,"div",8),_("click",function(c){return c.stopPropagation()}),i(13,"button",9),_("click",function(){return r.showMenu=!r.showMenu}),h(),i(14,"svg",10),p(15,"circle",11)(16,"circle",12)(17,"circle",13),n()(),v(18,ii,16,28,"div",14),n()()(),x(),i(19,"div",15)(20,"div",16)(21,"div",17)(22,"span",18),o(23,"Total Assets"),n(),i(24,"span",19),h(),i(25,"svg",20),p(26,"path",21),n()()(),x(),i(27,"div",22),o(28),n(),i(29,"span",23),o(30,"Assets in system"),n()(),i(31,"div",24)(32,"div",17)(33,"span",18),o(34,"Active"),n(),i(35,"span",25),h(),i(36,"svg",26),p(37,"circle",27)(38,"circle",28),n()()(),x(),i(39,"div",22),o(40),n(),i(41,"span",29),o(42,"Operational assets"),n()(),i(43,"div",30)(44,"div",17)(45,"span",18),o(46,"Maintenance"),n(),i(47,"span",31),h(),i(48,"svg",32),p(49,"path",33),n()()(),x(),i(50,"div",22),o(51),n(),i(52,"span",34),o(53,"Under maintenance"),n()(),i(54,"div",35)(55,"div",17)(56,"span",18),o(57,"Total Value"),n(),i(58,"span",36),h(),i(59,"svg",37),p(60,"path",38),n()()(),x(),i(61,"div",22),o(62),n(),i(63,"span",39),o(64,"Asset portfolio value"),n()(),i(65,"div",40)(66,"div",17)(67,"span",18),o(68,"Asset Health"),n(),i(69,"span",41),h(),i(70,"svg",42),p(71,"path",43),n()()(),x(),i(72,"div",22),o(73),n(),i(74,"span",44),o(75),n()()(),i(76,"div",45)(77,"nav",46)(78,"a",47),_("click",function(){return r.setTab("active")}),o(79,"Active Assets"),n(),i(80,"a",47),_("click",function(){return r.setTab("archive")}),o(81,"Archived Assets"),n()()(),i(82,"div",48)(83,"div",49)(84,"div",50),h(),i(85,"svg",51),p(86,"path",52),n(),x(),i(87,"input",53),V("ngModelChange",function(c){return T(r.searchQuery,c)||(r.searchQuery=c),c}),_("input",function(){return r.onSearch()}),n()(),i(88,"app-global-dropdown",54),_("selectionChange",function(c){return r.onSelectAssetType(c)}),n(),v(89,ni,2,4,"ng-container",55),i(90,"app-global-dropdown",54),_("selectionChange",function(c){return r.onSelectSort(c)}),n(),i(91,"div",56)(92,"button",57),_("click",function(){return r.toggleSortDir()}),v(93,ri,2,0,"svg",58)(94,ai,2,0,"svg",58),i(95,"span"),o(96),n()()()(),i(97,"div",59)(98,"button",60),_("click",function(){return r.viewType="grid"}),h(),i(99,"svg",61),p(100,"rect",62)(101,"rect",63)(102,"rect",64)(103,"rect",65),n()(),x(),i(104,"button",60),_("click",function(){return r.viewType="list"}),h(),i(105,"svg",61),p(106,"rect",66)(107,"rect",67),n()()()(),v(108,oi,10,0,"div",68)(109,si,11,1,"div",68)(110,li,5,5,"div",69)(111,ui,23,21,"div",70)(112,gi,10,0,"div",71)(113,ji,2,1,"div",72)(114,rn,19,3,"div",73)(115,an,1,1,"app-pagination",74),x(),i(116,"app-archive-confirmation-modal",75),_("closeModal",function(){return r.closeArchiveModal()})("confirmArchive",function(){return r.archiveSelected()}),n(),i(117,"app-delete-confirmation-modal",76),_("closeModal",function(){return r.closeDeleteModal()})("confirmDelete",function(c){return r.deleteSelected(c)}),n(),i(118,"app-restore-confirmation-modal",77),_("closeModal",function(){return r.closeRestoreModal()})("confirmRestore",function(c){return r.restoreSelectedAsset(c)}),n()()),e&2&&(l(18),m("ngIf",r.showMenu),l(10),y(r.summary.totalAssets),l(12),y(r.summary.activeAssets),l(11),y(r.summary.maintenance),l(11),y(r.formatCurrencyValue(r.summary.totalValue)),l(11),C("",r.summary.assetHealth,"%"),l(2),y(r.getHealthLabel(r.summary.assetHealth)),l(3),w("active",r.activeTab==="active"),l(2),w("active",r.activeTab==="archive"),l(7),I("ngModel",r.searchQuery),l(),m("placeholder","Select asset type")("options",r.assetTypeDropdownOptions)("selectedOption",r.selectedAssetTypeOption)("minWidth","280px"),l(),m("ngIf",r.activeTab==="active"),l(),m("placeholder","Select sort field")("options",r.sortDropdownOptions)("selectedOption",r.selectedSortOption)("minWidth","240px"),l(2),w("bg-blue-100",r.selectedSortDir==="asc")("text-blue-700",r.selectedSortDir==="asc"),l(),m("ngIf",r.selectedSortDir==="desc"),l(),m("ngIf",r.selectedSortDir==="asc"),l(2),y(r.selectedSortDir==="asc"?"A-Z":"Z-A"),l(2),w("bg-blue-100",r.viewType==="grid")("text-blue-700",r.viewType==="grid"),l(6),w("bg-blue-100",r.viewType==="list")("text-blue-700",r.viewType==="list"),l(4),m("ngIf",r.loading),l(),m("ngIf",r.error&&!r.loading),l(),m("ngIf",r.viewType==="grid"&&r.selectedCount===0&&!r.loading&&!r.error),l(),m("ngIf",r.viewType==="grid"&&r.selectedCount>0&&!r.loading&&!r.error),l(),m("ngIf",!r.loading&&!r.error&&r.assetList.length===0),l(),m("ngIf",r.viewType==="grid"&&!r.loading&&!r.error&&r.assetList.length>0),l(),m("ngIf",r.viewType==="list"&&!r.loading&&!r.error&&r.assetList.length>0),l(),m("ngIf",r.assetList.length>0||r.pagination.total>0),l(),m("isOpen",r.showArchiveConfirmationModal)("selectedCount",r.selectedCount),l(),m("isOpen",r.showDeleteConfirmationModal)("selectedCount",r.selectedCount),l(),m("isOpen",r.showRestoreConfirmationModal)("selectedCount",r.selectedCount>0?r.selectedCount:1)("assetName",r.assetNameForRestore))},dependencies:[B,X,$,G,It,z,Y,dt,Dt,mt,de,Me,Lt,Ot,De],styles:['.tabs[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);text-align:center;gap:1rem;margin-bottom:1rem}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{border-radius:12px;padding:.75rem 0;font-weight:500;color:#64748b;cursor:pointer;transition:all .2s ease;background:#f3f4f6}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background:#e5e7eb}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff;font-weight:600}.navigation-tabs[_ngcontent-%COMP%]   .tabs-nav[_ngcontent-%COMP%]{display:flex;gap:12px}.navigation-tabs[_ngcontent-%COMP%]   .tab-link[_ngcontent-%COMP%]{display:inline-block;padding:12px 16px;border-radius:12px;background:#f3f4f6;color:#64748b;font-weight:500;cursor:pointer;text-decoration:none}.navigation-tabs[_ngcontent-%COMP%]   .tab-link.active[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]{width:20px!important;height:20px!important;border-radius:50%!important;border-width:2px;border-color:#3b82f6;appearance:none;background-color:#fff;display:inline-block;vertical-align:middle;position:relative;transition:border-color .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#2563eb}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked:after{content:"";display:block;width:10px;height:10px;border-radius:50%;background:#fff;position:absolute;top:3px;left:3px}.asset-list-page[_ngcontent-%COMP%]   .asset-card-header[_ngcontent-%COMP%]{background:#e0edff;height:8rem;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;border-top-left-radius:1rem;border-top-right-radius:1rem;overflow:hidden}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #101e3614;overflow:hidden;background:#fff;border:1px solid #bfdbfe;display:flex;flex-direction:column;transition:box-shadow .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;border-color:#e5e7eb}']})};function sn(a,t){a&1&&(i(0,"div",26),p(1,"div",27),i(2,"p"),o(3,"Searching parts..."),n()())}function ln(a,t){if(a&1){let e=b();i(0,"input",51),_("change",function(s){u(e);let c=d().$implicit,f=d(3);return g(f.updateQty(c,s))}),n()}if(a&2){let e=d().$implicit,r=d(3);m("value",r.getCartQty(e.id))}}function cn(a,t){a&1&&(i(0,"span",52),o(1,"1"),n())}function dn(a,t){if(a&1){let e=b();i(0,"button",53),_("click",function(){u(e);let s=d().$implicit,c=d(3);return g(c.addToCart(s))}),o(1," Add Part "),n()}}function mn(a,t){a&1&&(i(0,"div",54),h(),i(1,"svg",55),p(2,"path",56),n(),x(),i(3,"span"),o(4,"Added"),n()())}function pn(a,t){if(a&1&&(i(0,"div",57)(1,"span",58),o(2,"Total:"),n(),i(3,"span",59),o(4),D(5,"number"),n()()),a&2){let e=d().$implicit,r=d(3);l(4),A("",r.currencySymbol," ",O(5,2,r.getTotalCost(e,r.getCartQty(e.id)),"1.2-2"),"")}}function un(a,t){if(a&1){let e=b();i(0,"div",30)(1,"div",31)(2,"div",32)(3,"h3",33),o(4),n()(),i(5,"div",34)(6,"div",35)(7,"span",36),o(8,"Part Number:"),n(),i(9,"span",37),o(10),n()(),i(11,"div",35)(12,"span",36),o(13,"Location:"),n(),i(14,"span",37),o(15),n()(),i(16,"div",35)(17,"span",36),o(18,"Category:"),n(),i(19,"span",37),o(20),n()(),i(21,"div",35)(22,"span",36),o(23,"Min Stock:"),n(),i(24,"span",37),o(25),n()(),i(26,"div",35)(27,"span",36),o(28,"Available Stock:"),n(),i(29,"span",38),o(30),n()(),i(31,"div",35)(32,"span",36),o(33,"Unit Cost:"),n(),i(34,"span",37),o(35),D(36,"number"),n()()()(),i(37,"div",39)(38,"div",40)(39,"label",41),o(40,"Quantity"),n(),i(41,"div",42)(42,"button",43),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.decrementQty(s))}),o(43,"-"),n(),v(44,ln,1,1,"input",44)(45,cn,2,0,"span",45),i(46,"button",46),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.incrementQty(s))}),o(47,"+"),n(),i(48,"span",47),o(49),n()()(),v(50,dn,2,0,"button",48)(51,mn,5,0,"div",49)(52,pn,6,5,"div",50),n()()}if(a&2){let e=t.$implicit,r=d(3);l(4),y(e.name),l(6),y(e.part_number),l(5),y(r.getPrimaryLocation(e)),l(5),y(r.getCategory(e)),l(5),A("",r.getMinStock(e)," ",e.uom,""),l(5),A("",r.getAvailableStock(e)," ",e.uom,""),l(5),A("",r.currencySymbol," ",O(36,17,e.unit_cost||0,"1.2-2"),""),l(7),m("disabled",!r.isPartInCart(e.id)||r.getCartQty(e.id)<=.001),l(2),m("ngIf",r.isPartInCart(e.id)),l(),m("ngIf",!r.isPartInCart(e.id)),l(4),y(e.uom),l(),m("ngIf",!r.isPartInCart(e.id)),l(),m("ngIf",r.isPartInCart(e.id)),l(),m("ngIf",r.isPartInCart(e.id))}}function gn(a,t){if(a&1&&(i(0,"div",28),v(1,un,53,20,"div",29),n()),a&2){let e=d(2);l(),m("ngForOf",e.results)}}function _n(a,t){if(a&1&&(i(0,"div",60)(1,"p"),o(2),n()()),a&2){let e=d(2);l(2),C('No parts found matching "',e.query,'"')}}function fn(a,t){a&1&&(i(0,"div",61)(1,"p"),o(2,"Start typing to search for parts..."),n()())}function hn(a,t){if(a&1){let e=b();i(0,"div",67)(1,"div",68)(2,"span",69),o(3),n(),i(4,"span",70),o(5),n()(),i(6,"div",71)(7,"span",72),o(8),D(9,"number"),n(),i(10,"button",73),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.removeFromCart(s.part.id))}),h(),i(11,"svg",55),p(12,"polyline",74)(13,"path",75)(14,"line",76)(15,"line",77),n()()()()}if(a&2){let e=t.$implicit,r=d(3);l(3),y(e.part.name),l(2),A("",e.qty," ",e.part.uom,""),l(3),A("",r.currencySymbol," ",O(9,5,r.getTotalCost(e.part,e.qty),"1.2-2"),"")}}function vn(a,t){if(a&1&&(i(0,"div",62)(1,"h4",63),o(2),n(),i(3,"div",64),v(4,hn,16,8,"div",65),n(),i(5,"div",66)(6,"span",58),o(7,"Total Cost:"),n(),i(8,"span",59),o(9),D(10,"number"),n()()()),a&2){let e=d(2);l(2),C("Selected Parts (",e.cart.length,")"),l(2),m("ngForOf",e.cart),l(5),A("",e.currencySymbol," ",O(10,4,e.getCartTotalCost(),"1.2-2"),"")}}function xn(a,t){a&1&&(i(0,"span"),o(1,"Adding..."),n())}function yn(a,t){if(a&1&&(i(0,"span"),o(1),n()),a&2){let e=d(2);l(),A("Add ",e.cart.length," Part",e.cart.length!==1?"s":""," to Asset")}}function bn(a,t){if(a&1){let e=b();i(0,"div",1),_("click",function(){u(e);let s=d();return g(s.close())}),i(1,"div",2),_("click",function(s){return u(e),g(s.stopPropagation())}),i(2,"div",3)(3,"div")(4,"h2",4),o(5,"Select Parts from Inventory"),n(),i(6,"p",5),o(7,"Search and add parts to this asset"),n()(),i(8,"button",6),_("click",function(){u(e);let s=d();return g(s.close())}),h(),i(9,"svg",7),p(10,"line",8)(11,"line",9),n()()(),x(),i(12,"div",10)(13,"div",11)(14,"div",12),h(),i(15,"svg",13),p(16,"circle",14)(17,"path",15),n(),x(),i(18,"input",16),V("ngModelChange",function(s){u(e);let c=d();return T(c.query,s)||(c.query=s),g(s)}),_("input",function(){u(e);let s=d();return g(s.onSearchInput())}),n()()(),v(19,sn,4,0,"div",17)(20,gn,2,1,"div",18)(21,_n,3,1,"div",19)(22,fn,3,0,"div",20)(23,vn,11,7,"div",21),n(),i(24,"div",22)(25,"button",23),_("click",function(){u(e);let s=d();return g(s.close())}),o(26,"Cancel"),n(),i(27,"button",24),_("click",function(){u(e);let s=d();return g(s.save())}),v(28,xn,2,0,"span",25)(29,yn,2,2,"span",25),n()()()()}if(a&2){let e=d();l(18),I("ngModel",e.query),m("disabled",e.loading),l(),m("ngIf",e.loading),l(),m("ngIf",!e.loading&&e.results.length>0),l(),m("ngIf",!e.loading&&e.results.length===0&&e.query.length>=2),l(),m("ngIf",!e.loading&&e.results.length===0&&e.query.length<2),l(),m("ngIf",e.cart.length>0),l(2),m("disabled",e.loading),l(2),m("disabled",e.cart.length===0||e.loading),l(),m("ngIf",e.loading),l(),m("ngIf",!e.loading)}}var He=class a{constructor(t,e,r,s){this.assetService=t;this.inv=e;this.toastService=r;this.currencyService=s;this.searchSubject.pipe(yt(300),bt(),k(this.destroy$)).subscribe(c=>{this.performSearch(c)}),this.currencyService.refreshFromServer().subscribe(()=>{this.currencySymbol=this.currencyService.getSymbol()}),this.currencyService.get$().pipe(k(this.destroy$)).subscribe(()=>{this.currencySymbol=this.currencyService.getSymbol()})}assetId;isOpen=!1;assetLocationId;closed=new Q;saved=new Q;query="";results=[];cart=[];loading=!1;searchSubject=new J;destroy$=new J;currencySymbol="$";ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSearchInput(){this.searchSubject.next(this.query)}performSearch(t){if(!t||t.trim().length<2){this.results=[];return}this.loading=!0,this.inv.getPartsCatalog(t.trim(),void 0,1,50).subscribe({next:e=>{this.results=e?.data?.data||[],this.loading=!1},error:()=>{this.loading=!1,this.toastService.error("Failed to search parts")}})}search(){this.performSearch(this.query)}getAvailableStock(t){return t.total_available_stock??0}getPrimaryLocation(t){return t.primary_location?.name||"N/A"}getCategory(t){return t.maintenance_category||"N/A"}getMinStock(t){return t.minimum_stock??t.reorder_point??0}incrementQty(t){let e=this.cart.find(r=>r.part.id===t.id);e&&(e.qty=Math.max(.001,e.qty+1))}decrementQty(t){let e=this.cart.find(r=>r.part.id===t.id);e&&e.qty>.001&&(e.qty=Math.max(.001,e.qty-1))}updateQty(t,e){let r=e.target,s=parseFloat(r.value)||.001,c=this.cart.find(f=>f.part.id===t.id);c&&(c.qty=Math.max(.001,s))}getCartQty(t){return this.cart.find(r=>r.part.id===t)?.qty||1}getTotalCost(t,e){return(t.unit_cost||0)*e}getCartTotalCost(){return this.cart.reduce((t,e)=>t+this.getTotalCost(e.part,e.qty),0)}addToCart(t){let e=this.cart.find(r=>r.part.id===t.id);if(e){e.qty+=1;return}this.cart.push({part:t,qty:1,unit_cost:t.unit_cost||void 0})}removeFromCart(t){this.cart=this.cart.filter(e=>e.part.id!==t)}isPartInCart(t){return this.cart.some(e=>e.part.id===t)}save(){return le(this,null,function*(){if(this.cart.length===0){this.toastService.error("Please select at least one part");return}if(!this.assetId||this.assetId===0){let e=this.cart.map(r=>({asset_id:0,part_id:r.part.id,qty:r.qty,unit_cost:r.unit_cost||r.part.unit_cost||null,part:{id:r.part.id,name:r.part.name,uom:r.part.uom||"each",part_number:r.part.part_number,unit_cost:r.part.unit_cost},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));console.log("Modal: Emitting parts to parent:",e),this.toastService.success(`${e.length} part${e.length!==1?"s":""} added to asset`),this.saved.emit(e),setTimeout(()=>{this.reset(),this.closed.emit()},100);return}let t=this.cart.map(e=>({part_id:e.part.id,qty:e.qty}));this.loading=!0,this.assetService.addAssetParts(this.assetId,t).subscribe({next:e=>{this.loading=!1,this.toastService.success("Parts added to asset successfully"),this.saved.emit(e),this.reset(),this.closed.emit()},error:e=>{this.loading=!1;let r=e?.error?.message||"Failed to add parts to asset";this.toastService.error(r)}})})}reset(){this.cart=[],this.query="",this.results=[]}close(){this.reset(),this.closed.emit()}ngOnChanges(t){t.isOpen&&this.isOpen&&this.results.length===0&&!this.loading&&this.query.length>=2&&this.search()}static \u0275fac=function(e){return new(e||a)(M(Z),M(Le),M(ke),M(re))};static \u0275cmp=R({type:a,selectors:[["app-add-asset-parts-modal"]],inputs:{assetId:"assetId",isOpen:"isOpen",assetLocationId:"assetLocationId"},outputs:{closed:"closed",saved:"saved"},features:[$e],decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"modal-subtitle"],["type","button",1,"close-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"modal-body"],[1,"search-container"],[1,"search-input-wrapper"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search by part name, number, or category...",1,"search-input",3,"ngModelChange","input","ngModel","disabled"],["class","loading-state",4,"ngIf"],["class","parts-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","initial-state",4,"ngIf"],["class","cart-summary",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"parts-list"],["class","part-card",4,"ngFor","ngForOf"],[1,"part-card"],[1,"part-info"],[1,"part-header"],[1,"part-name"],[1,"part-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"detail-value","stock-available"],[1,"part-actions"],[1,"quantity-control"],[1,"quantity-label"],[1,"quantity-input-group"],["type","button",1,"qty-btn",3,"click","disabled"],["type","number","class","qty-input","min","0.001","step","0.001",3,"value","change",4,"ngIf"],["class","qty-placeholder",4,"ngIf"],["type","button",1,"qty-btn",3,"click"],[1,"qty-unit"],["type","button","class","add-part-btn",3,"click",4,"ngIf"],["class","added-indicator",4,"ngIf"],["class","total-cost",4,"ngIf"],["type","number","min","0.001","step","0.001",1,"qty-input",3,"change","value"],[1,"qty-placeholder"],["type","button",1,"add-part-btn",3,"click"],[1,"added-indicator"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M20 6L9 17l-5-5"],[1,"total-cost"],[1,"total-label"],[1,"total-value"],[1,"empty-state"],[1,"initial-state"],[1,"cart-summary"],[1,"cart-title"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-total"],[1,"cart-item"],[1,"cart-item-info"],[1,"cart-item-name"],[1,"cart-item-qty"],[1,"cart-item-actions"],[1,"cart-item-cost"],["type","button",1,"remove-btn",3,"click"],["points","3 6 5 6 21 6"],["d","m19 6-2 14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2L5 6"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"]],template:function(e,r){e&1&&v(0,bn,30,11,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[N,X,B,Ze,$,G,z,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{width:min(900px,95vw);max-height:90vh;background:#fff;border-radius:12px;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.modal-header[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:flex-start;background:#f9fafb}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#111827;margin:0 0 .25rem}.modal-header[_ngcontent-%COMP%]   .modal-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:.5rem;color:#6b7280;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#111827}.modal-body[_ngcontent-%COMP%]{padding:1.5rem 2rem;overflow-y:auto;flex:1}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end;gap:.75rem;background:#f9fafb}.search-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.search-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;color:#9ca3af;pointer-events:none}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 3rem;border:1px solid #d1d5db;border-radius:8px;font-size:.875rem;transition:all .2s}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}.search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:disabled{background:#f3f4f6;cursor:not-allowed}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;color:#6b7280}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid #e5e7eb;border-top-color:#2563eb;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.parts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.part-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:8px;padding:1.25rem;display:grid;grid-template-columns:1fr auto;gap:1.5rem;background:#fff;transition:all .2s}.part-card[_ngcontent-%COMP%]:hover{border-color:#d1d5db;box-shadow:0 1px 3px #0000001a}.part-info[_ngcontent-%COMP%]   .part-header[_ngcontent-%COMP%]{margin-bottom:.75rem}.part-info[_ngcontent-%COMP%]   .part-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin:0}.part-info[_ngcontent-%COMP%]   .part-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem 1.5rem}.part-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;gap:.5rem}.part-info[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;font-weight:500}.part-info[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:.875rem;color:#111827}.part-info[_ngcontent-%COMP%]   .detail-value.stock-available[_ngcontent-%COMP%]{color:#059669;font-weight:600}.part-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.75rem;min-width:200px}.quantity-control[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;width:100%}.quantity-control[_ngcontent-%COMP%]   .quantity-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500}.quantity-control[_ngcontent-%COMP%]   .quantity-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.quantity-control[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{width:2rem;height:2rem;border:1px solid #d1d5db;background:#fff;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1rem;color:#374151;transition:all .2s}.quantity-control[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6;border-color:#9ca3af}.quantity-control[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.quantity-control[_ngcontent-%COMP%]   .qty-input[_ngcontent-%COMP%]{width:4rem;height:2rem;border:1px solid #d1d5db;border-radius:4px;padding:0 .5rem;text-align:center;font-size:.875rem}.quantity-control[_ngcontent-%COMP%]   .qty-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.quantity-control[_ngcontent-%COMP%]   .qty-placeholder[_ngcontent-%COMP%]{width:4rem;height:2rem;display:flex;align-items:center;justify-content:center;border:1px solid #e5e7eb;border-radius:4px;background:#f9fafb;color:#9ca3af;font-size:.875rem}.quantity-control[_ngcontent-%COMP%]   .qty-unit[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;padding:0 .25rem}.add-part-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#2563eb;color:#fff;border:none;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;width:100%}.add-part-btn[_ngcontent-%COMP%]:hover{background:#1d4ed8}.added-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#d1fae5;color:#059669;border-radius:6px;font-size:.875rem;font-weight:500;width:100%;justify-content:center}.total-cost[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.25rem;margin-top:.5rem}.total-cost[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.total-cost[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#111827}.empty-state[_ngcontent-%COMP%], .initial-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#6b7280;font-size:.875rem}.cart-summary[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:2px solid #e5e7eb}.cart-summary[_ngcontent-%COMP%]   .cart-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#111827;margin:0 0 1rem}.cart-summary[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f9fafb;border-radius:6px}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .cart-item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .cart-item-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#111827}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .cart-item-qty[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .cart-item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .cart-item-cost[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#111827}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#ef4444;cursor:pointer;padding:.25rem;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.cart-summary[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#fee2e2}.cart-summary[_ngcontent-%COMP%]   .cart-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#eff6ff;border-radius:6px}.cart-summary[_ngcontent-%COMP%]   .cart-total[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e40af}.cart-summary[_ngcontent-%COMP%]   .cart-total[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#1e40af}.btn[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;border:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn.btn-primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1d4ed8}.btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151;border:1px solid #d1d5db}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb}"]})};var wn=["fileInput"],Cn=["analyzeFileInput"],Sn=["dateInput"],Gt=()=>({standalone:!0});function En(a,t){a&1&&(i(0,"div",136)(1,"div",108),h(),i(2,"svg",25),p(3,"path",111),n(),x(),i(4,"div")(5,"p",137),o(6,"Duplicating Asset"),n(),i(7,"p",138),o(8,"Most fields have been pre-filled. Please enter a new serial number and review all information before saving."),n()()()())}function An(a,t){a&1&&(h(),i(0,"svg",10),p(1,"path",139),n())}function Mn(a,t){a&1&&(h(),i(0,"svg",140),p(1,"circle",141)(2,"path",142),n())}function kn(a,t){if(a&1&&(i(0,"div",143),h(),i(1,"svg",144),p(2,"path",145),n(),o(3),n()),a&2){let e=d();l(3),C(" ",e.nameError," ")}}function In(a,t){a&1&&(i(0,"span",107),o(1,"Select parent asset"),n())}function Tn(a,t){if(a&1&&(i(0,"span",146),o(1),n()),a&2){let e=d();l(),A(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function Vn(a,t){if(a&1){let e=b();i(0,"button",150),_("click",function(){let s=u(e).$implicit,c=d(2);return c.parent_id=s.id,g(c.showParentDropdown=!1)}),i(1,"div",35)(2,"div",152),h(),i(3,"svg",153),p(4,"path",66),n()(),x(),i(5,"div")(6,"div",154),o(7),n(),i(8,"div",155),o(9),n()()()()}if(a&2){let e=t.$implicit,r=d(2);w("bg-blue-50",r.parent_id===e.id),l(7),y(e.name),l(2),y(e.asset_id)}}function Pn(a,t){if(a&1){let e=b();i(0,"div",147)(1,"div",148)(2,"div",149),o(3,"Select parent asset"),n(),i(4,"button",150),_("click",function(){u(e);let s=d();return s.parent_id=null,g(s.showParentDropdown=!1)}),o(5," -- None -- "),n(),v(6,Vn,10,4,"button",151),n()()}if(a&2){let e=d();l(4),w("bg-blue-50",!e.parent_id),l(2),m("ngForOf",e.possibleParents)}}function Dn(a,t){a&1&&(i(0,"span",107),o(1,"Select asset type"),n())}function Ln(a,t){if(a&1){let e=b();i(0,"img",159),_("error",function(s){u(e);let c=d(2);return g(c.onAssetTypeIconError(s,c.selectedAssetType))}),n()}if(a&2){let e=d(2);m("src",e.selectedAssetType.icon,L)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function On(a,t){if(a&1&&(h(),i(0,"svg",160),p(1,"path",161),n()),a&2){let e=d(2);H("color",e.selectedAssetType.color)}}function Fn(a,t){if(a&1&&(i(0,"div",35)(1,"div",156),v(2,Ln,1,2,"img",157)(3,On,2,2,"svg",158),n(),i(4,"span",146),o(5),n()()),a&2){let e=d();l(),H("background-color",e.selectedAssetType.color+"20"),l(),m("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),l(),m("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),l(2),y(e.selectedAssetType.label)}}function Hn(a,t){if(a&1){let e=b();i(0,"img",166),_("error",function(s){u(e);let c=d().$implicit,f=d(2);return g(f.onAssetTypeIconError(s,c))}),n()}if(a&2){let e=d().$implicit;m("src",e.icon,L)("alt",e.name||e.label)}}function jn(a,t){a&1&&(h(),i(0,"svg",25),p(1,"path",161),n())}function Rn(a,t){if(a&1){let e=b();i(0,"button",150),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.selectAssetType(s))}),i(1,"div",35)(2,"div",163),v(3,Hn,1,2,"img",164)(4,jn,2,0,"svg",165),n(),i(5,"div")(6,"div",154),o(7),n(),i(8,"div",125),o(9),n()()()()}if(a&2){let e=t.$implicit,r=d(2);w("bg-blue-50",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id)("text-blue-700",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id),l(3),m("ngIf",e.icon&&!e.iconError),l(),m("ngIf",!e.icon||e.iconError),l(3),y(e.label||e.name),l(2),y(e.description)}}function Bn(a,t){if(a&1&&(i(0,"div",147)(1,"div",148)(2,"div",149),o(3,"Select asset type"),n(),v(4,Rn,10,8,"button",162),n()()),a&2){let e=d();l(4),m("ngForOf",e.assetTypes)}}function Nn(a,t){if(a&1&&(i(0,"div",143),h(),i(1,"svg",144),p(2,"path",145),n(),o(3),n()),a&2){let e=d();l(3),C(" ",e.assetTypeError," ")}}function Gn(a,t){a&1&&(i(0,"span",107),o(1,"Select category"),n())}function zn(a,t){if(a&1&&(i(0,"span",146),o(1),n()),a&2){let e=d();l(),y(e.selectedCategory.name)}}function $n(a,t){if(a&1){let e=b();i(0,"img",166),_("error",function(s){u(e);let c=d().$implicit,f=d(2);return g(f.onCategoryIconError(s,c))}),n()}if(a&2){let e=d().$implicit;m("src",e.icon,L)("alt",e.name)}}function Un(a,t){a&1&&(h(),i(0,"svg",153),p(1,"path",66),n())}function qn(a,t){if(a&1&&(i(0,"div",125),o(1),n()),a&2){let e=d().$implicit;l(),y(e.description)}}function Wn(a,t){if(a&1){let e=b();i(0,"button",150),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.selectCategory(s))}),i(1,"div",35)(2,"div",152),v(3,$n,1,2,"img",164)(4,Un,2,0,"svg",167),n(),i(5,"div")(6,"div",154),o(7),n(),v(8,qn,2,1,"div",109),n()()()}if(a&2){let e=t.$implicit,r=d(2);w("bg-blue-50",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("text-blue-700",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id),l(3),m("ngIf",e.icon),l(),m("ngIf",!e.icon||e.iconError),l(3),y(e.name),l(),m("ngIf",e.description)}}function Qn(a,t){if(a&1&&(i(0,"div",147)(1,"div",148)(2,"div",149),o(3,"Select category"),n(),v(4,Wn,9,8,"button",162),n()()),a&2){let e=d();l(4),m("ngForOf",e.categories)}}function Yn(a,t){if(a&1&&(i(0,"div",143),h(),i(1,"svg",144),p(2,"path",145),n(),o(3),n()),a&2){let e=d();l(3),C(" ",e.categoryError," ")}}function Zn(a,t){if(a&1){let e=b();i(0,"div",168)(1,"div",169),h(),i(2,"svg",170),p(3,"path",71),n(),x(),i(4,"p",171),o(5,"No parts selected"),n(),i(6,"p",172),o(7,"Click 'Add Parts' to select from inventory"),n(),i(8,"button",173),_("click",function(){u(e);let s=d();return g(s.openPartsModal())}),h(),i(9,"svg",10),p(10,"path",119),n(),o(11," Add Parts from Inventory "),n()()()}}function Jn(a,t){if(a&1){let e=b();i(0,"div",183)(1,"div",184)(2,"div",185),o(3),n(),i(4,"div",186)(5,"span",187),o(6),n(),i(7,"span",188),o(8,"\u2022"),n(),i(9,"span",189),o(10),D(11,"number"),n()()(),i(12,"div",190)(13,"div",191),o(14),D(15,"number"),n(),i(16,"button",192),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.removePart(s.part_id))}),h(),i(17,"svg",160),p(18,"path",193),n()()()()}if(a&2){let e=t.$implicit,r=d(2);l(3),y((e.part==null?null:e.part.name)||"Unknown Part"),l(3),A("",e.qty," ",(e.part==null?null:e.part.uom)||"each",""),l(4),A("Unit: ",r.currencySymbol()," ",O(11,7,e.unit_cost||(e.part==null?null:e.part.unit_cost)||0,"1.2-2"),""),l(4),A("",r.currencySymbol()," ",O(15,10,(e.unit_cost||(e.part==null?null:e.part.unit_cost)||0)*e.qty,"1.2-2"),"")}}function Xn(a,t){if(a&1){let e=b();i(0,"div",174)(1,"div",175)(2,"span",176),o(3),n(),i(4,"button",177),_("click",function(){u(e);let s=d();return g(s.openPartsModal())}),h(),i(5,"svg",160),p(6,"path",119),n(),o(7," Add More "),n()(),x(),i(8,"div",178),v(9,Jn,19,13,"div",179),n(),i(10,"div",180)(11,"span",181),o(12,"Total Cost:"),n(),i(13,"span",182),o(14),D(15,"number"),n()()()}if(a&2){let e=d();l(3),A("",e.selectedParts.length," part",e.selectedParts.length!==1?"s":""," selected"),l(6),m("ngForOf",e.selectedParts)("ngForTrackBy",e.trackByPartId),l(5),A("",e.currencySymbol()," ",O(15,6,e.getTotalPartsCost(),"1.2-2"),"")}}function Kn(a,t){if(a&1&&(i(0,"div",143),h(),i(1,"svg",144),p(2,"path",145),n(),o(3),n()),a&2){let e=d();l(3),C(" ",e.serialNumberError," ")}}function er(a,t){if(a&1&&(i(0,"option",194),o(1),n()),a&2){let e=t.$implicit;m("value",e),l(),y(e)}}function tr(a,t){a&1&&(i(0,"span",107),o(1,"Select location"),n())}function ir(a,t){if(a&1&&(i(0,"div",35)(1,"div",195),h(),i(2,"svg",196),p(3,"path",101)(4,"path",102),n()(),x(),i(5,"span",146),o(6),n()()),a&2){let e=d();l(6),y(e.selectedLocation.label||e.selectedLocation.name)}}function nr(a,t){if(a&1&&(i(0,"div",125),o(1),n()),a&2){let e=d().$implicit;l(),y(e.type.name)}}function rr(a,t){if(a&1){let e=b();i(0,"button",150),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.selectLocation(s))}),i(1,"div",35)(2,"div",197),h(),i(3,"svg",100),p(4,"path",101)(5,"path",102),n()(),x(),i(6,"div")(7,"div",154),o(8),n(),v(9,nr,2,1,"div",109),n()()()}if(a&2){let e=t.$implicit,r=d(2);w("bg-blue-50",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id)("text-blue-700",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id),l(8),y(r.getLocationLabel(e)),l(),m("ngIf",e.type)}}function ar(a,t){if(a&1&&(i(0,"div",147)(1,"div",148)(2,"div",149),o(3,"Select location"),n(),v(4,rr,10,6,"button",162),n()()),a&2){let e=d();l(4),m("ngForOf",e.locations)}}function or(a,t){a&1&&(i(0,"span",107),o(1,"Select department"),n())}function sr(a,t){if(a&1&&(i(0,"div",35)(1,"div",198),h(),i(2,"svg",199),p(3,"path",200),n()(),x(),i(4,"span",146),o(5),n()()),a&2){let e=d();l(5),y(e.selectedDepartment.name)}}function lr(a,t){if(a&1&&(i(0,"div",125),o(1),n()),a&2){let e=d().$implicit;l(),y(e.description)}}function cr(a,t){if(a&1&&(i(0,"div",203),o(1),n()),a&2){let e=d().$implicit;l(),C("Code: ",e.code,"")}}function dr(a,t){if(a&1){let e=b();i(0,"button",150),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.selectDepartment(s))}),i(1,"div",35)(2,"div",201),h(),i(3,"svg",65),p(4,"path",200),n()(),x(),i(5,"div")(6,"div",154),o(7),n(),v(8,lr,2,1,"div",109)(9,cr,2,1,"div",202),n()()()}if(a&2){let e=t.$implicit,r=d(2);w("bg-blue-50",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id)("text-blue-700",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id),l(7),y(e.name),l(),m("ngIf",e.description),l(),m("ngIf",e.code)}}function mr(a,t){if(a&1&&(i(0,"div",147)(1,"div",148)(2,"div",149),o(3,"Select department"),n(),v(4,dr,10,7,"button",162),n()()),a&2){let e=d();l(4),m("ngForOf",e.departments)}}function pr(a,t){if(a&1&&(i(0,"div",35),p(1,"div",204),i(2,"span",146),o(3),n()()),a&2){let e=d();l(),H("background-color",e.selectedStatus.hexColor||"#6B7280"),l(2),y(e.selectedStatus.label)}}function ur(a,t){if(a&1){let e=b();i(0,"button",150),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.selectStatus(s))}),i(1,"div",35)(2,"div"),p(3,"div",204),n(),i(4,"div")(5,"div",154),o(6),n(),i(7,"div",125),o(8),n()()()()}if(a&2){let e=t.$implicit,r=d(2);w("bg-blue-50",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value)("text-blue-700",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value),l(2),U("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),l(),H("background-color",e.hexColor||"#6B7280"),l(3),y(e.label),l(2),y(e.description)}}function gr(a,t){if(a&1&&(i(0,"div",205)(1,"div",148)(2,"div",149),o(3,"Select status"),n(),v(4,ur,9,10,"button",162),n()()),a&2){let e=d();l(4),m("ngForOf",e.statusOptions)}}function _r(a,t){if(a&1){let e=b();i(0,"span"),o(1),i(2,"button",209),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.removeTag(s))}),h(),i(3,"svg",210),p(4,"path",193),n()()()}if(a&2){let e=t.$implicit;U("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),l(),C(" ",e.name," ")}}function fr(a,t){if(a&1&&(i(0,"div",206)(1,"div",207),v(2,_r,5,3,"span",208),n()()),a&2){let e=d();l(2),m("ngForOf",e.selectedTags)}}function hr(a,t){if(a&1&&(i(0,"span",125),o(1),n()),a&2){let e=d();l(),C(" ",e.selectedTags.length," selected ")}}function vr(a,t){a&1&&(i(0,"div",215),h(),i(1,"svg",160),p(2,"path",216),n()())}function xr(a,t){if(a&1){let e=b();i(0,"button",150),_("click",function(){let s=u(e).$implicit,c=d(2);return g(c.toggleTag(s))}),i(1,"div",41)(2,"div",35)(3,"div"),p(4,"div"),n(),i(5,"span",154),o(6),n()(),v(7,vr,3,0,"div",214),n()()}if(a&2){let e=t.$implicit,r=d(2);w("bg-blue-50",r.isTagSelected(e)),l(3),U("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),l(),U("w-3 h-3 rounded-full bg-"+e.color+"-500"),l(2),y(e.name),l(),m("ngIf",r.isTagSelected(e))}}function yr(a,t){if(a&1){let e=b();i(0,"div",147)(1,"div",148)(2,"div",211)(3,"div",90)(4,"input",212),V("ngModelChange",function(s){u(e);let c=d();return T(c.newTagInput,s)||(c.newTagInput=s),g(s)}),_("keydown",function(s){u(e);let c=d();return g(c.onTagInputKeydown(s))})("click",function(s){return u(e),g(s.stopPropagation())}),n(),i(5,"div",213),o(6," Press Enter "),n()()(),i(7,"div",149),o(8,"Select tags"),n(),v(9,xr,8,8,"button",151),n()()}if(a&2){let e=d();l(4),I("ngModel",e.newTagInput),l(5),m("ngForOf",e.availableTags)}}function br(a,t){if(a&1){let e=b();i(0,"button",237),_("click",function(){u(e);let s=d().index,c=d(2);return g(c.moveImageUp(s))}),h(),i(1,"svg",160),p(2,"path",238),n()()}}function wr(a,t){if(a&1){let e=b();i(0,"button",237),_("click",function(){u(e);let s=d().index,c=d(2);return g(c.moveImageDown(s))}),h(),i(1,"svg",160),p(2,"path",45),n()()}}function Cr(a,t){if(a&1){let e=b();i(0,"div",225)(1,"div",226)(2,"img",227),_("error",function(s){let c=u(e).index,f=d(2);return g(f.onImageError(s,c))})("load",function(s){let c=u(e).index,f=d(2);return g(f.onImageLoad(s,c))}),n(),i(3,"div",228)(4,"div",229),v(5,br,3,0,"button",230)(6,wr,3,0,"button",230),n()(),i(7,"button",231),_("click",function(){let s=u(e).index,c=d(2);return g(c.removeImage(s))}),h(),i(8,"svg",160),p(9,"path",193),n()(),x(),i(10,"div",232),o(11),n()(),i(12,"div",233)(13,"p",234),o(14),n(),i(15,"p",155),o(16),D(17,"numberFormat"),n()(),i(18,"div",235)(19,"input",236),_("input",function(s){let c=u(e).index,f=d(2);return g(f.updateImageCaption(c,s.target.value))}),n()()()}if(a&2){let e,r=t.$implicit,s=t.index,c=d(2);l(2),m("src",r,L)("alt","Asset Image "+(s+1)),l(3),m("ngIf",s>0),l(),m("ngIf",s<c.imagePreviewUrls.length-1),l(5),C(" ",s+1," "),l(3),y(c.images[s].name),l(2),C("",O(17,8,((e=c.images[s].size)!==null&&e!==void 0?e:0)/1024/1024,1)," MB"),l(3),m("value",c.imageCaptions[s]||"")}}function Sr(a,t){if(a&1){let e=b();i(0,"div",69)(1,"div",217)(2,"h4",218),o(3),n(),i(4,"button",219),_("click",function(){u(e);let s=d();return g(s.removeAllImages())}),o(5," Remove All "),n()(),i(6,"div",220),v(7,Cr,20,11,"div",221),n(),i(8,"div",222)(9,"div",108),h(),i(10,"svg",223),p(11,"path",111),n(),x(),i(12,"p",224)(13,"strong"),o(14,"Gallery Tips:"),n(),o(15," Hover over images to reorder them. The first image will be the primary asset image. "),n()()()()}if(a&2){let e=d();l(3),C("Selected Images (",e.imagePreviewUrls.length,")"),l(4),m("ngForOf",e.imagePreviewUrls)}}function Er(a,t){if(a&1){let e=b();i(0,"div",241)(1,"div",242)(2,"div",243)(3,"div",244)(4,"label",245),o(5,"Document Name "),i(6,"span",32),o(7,"*"),n()(),i(8,"input",246),V("ngModelChange",function(s){let c=u(e).index,f=d(2);return T(f.documentMetadata[c].name,s)||(f.documentMetadata[c].name=s),g(s)}),n()(),i(9,"div",244)(10,"label",245),o(11,"Document Type "),i(12,"span",32),o(13,"*"),n()(),i(14,"select",247),V("ngModelChange",function(s){let c=u(e).index,f=d(2);return T(f.documentMetadata[c].type,s)||(f.documentMetadata[c].type=s),g(s)}),i(15,"option",248),o(16,"Manual"),n(),i(17,"option",249),o(18,"Certificate"),n(),i(19,"option",250),o(20,"Warranty"),n(),i(21,"option",251),o(22,"Other"),n()()(),i(23,"div",155)(24,"span",12),o(25),n(),o(26),D(27,"numberFormat"),n()(),i(28,"button",252),_("click",function(){let s=u(e).index,c=d(2);return g(c.removeDocument(s))}),h(),i(29,"svg",10),p(30,"path",193),n()()()()}if(a&2){let e,r=t.$implicit,s=t.index,c=d(2);l(8),I("ngModel",c.documentMetadata[s].name),m("ngModelOptions",ce(9,Gt)),l(6),I("ngModel",c.documentMetadata[s].type),m("ngModelOptions",ce(10,Gt)),l(11),y(r.name),l(),C(" - ",O(27,6,((e=r.size)!==null&&e!==void 0?e:0)/1024/1024,2)," MB ")}}function Ar(a,t){if(a&1){let e=b();i(0,"div",69)(1,"div",217)(2,"h4",218),o(3),n(),i(4,"button",219),_("click",function(){u(e);let s=d();return s.documents=[],g(s.documentMetadata=[])}),o(5," Remove All "),n()(),i(6,"div",239),v(7,Er,31,11,"div",240),n()()}if(a&2){let e=d();l(3),C("New Documents (",e.documents.length,")"),l(4),m("ngForOf",e.documents)}}function Mr(a,t){if(a&1&&(i(0,"div",253)(1,"div",108),h(),i(2,"svg",254),p(3,"path",145),n(),x(),i(4,"p",255),o(5),n()()()),a&2){let e=d();l(5),y(e.submitError)}}function kr(a,t){if(a&1&&(i(0,"div",256)(1,"div",108),h(),i(2,"svg",76),p(3,"path",216),n(),x(),i(4,"p",257),o(5),n()()()),a&2){let e=d();l(5),y(e.submitSuccess)}}function Ir(a,t){a&1&&(i(0,"span",108),h(),i(1,"svg",258),p(2,"path",119),n(),x(),i(3,"span"),o(4,"Create Asset"),n()())}function Tr(a,t){a&1&&(i(0,"span",108),h(),i(1,"svg",259),p(2,"circle",141)(3,"path",142),n(),x(),i(4,"span"),o(5,"Creating Asset..."),n()())}var ut=class a{constructor(t,e,r,s,c,f,E,P){this.assetService=t;this.router=e;this.route=r;this.http=s;this.aiImageUploadService=c;this.toastService=f;this.inventoryAnalyticsService=E;this.cdr=P;this.currencySymbol.set(this.currencyService.getSymbol())}dateInputs;fileInput;analyzeFileInput;flatpickrInstances=[];isAnalyzing=!1;asset_id="";name="";description="";serial_number="";model="";manufacturer="";capacity="";capacity_unit="";purchase_date="";purchase_price=null;depreciation=null;depreciation_life=null;location_id=null;department_id=null;warranty="";insurance="";health_score=85;criticality_level=void 0;status=null;tags=[];images=[];imagePreviewUrls=[];imageCaptions=[];documents=[];documentMetadata=[];meta={};isSubmitting=!1;isDragOver=!1;submitError="";submitSuccess="";submitFieldErrors={};locations=[];availableTags=[];departments=[];possibleParents=[];parent_id=null;isDuplicate=!1;duplicateSourceId=null;showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";selectedParts=[];showPartsModal=!1;nameError="";assetTypeError="";categoryError="";serialNumberError="";address="";capacityUnitOptions=["Unit","GB","TB","Liters","kg","BTU","kW","HP","Tons","Seats","Units"];onFileChange(t){if(t.target.files&&t.target.files.length){let e=Array.from(t.target.files);this.processFiles(e),t.target.value=""}}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1;let e=t.dataTransfer?.files;if(e&&e.length>0){let r=Array.from(e).filter(s=>s.type.startsWith("image/"));r.length>0&&this.processFiles(r)}}processFiles(t){let r=["image/jpeg","image/png","image/gif","image/webp"],s=[],c=[];for(let f of t){if(!r.includes(f.type)){console.warn("Invalid file type:",f.name);continue}if(f.size>10*1024*1024){console.warn("File too large:",f.name);continue}if(this.images.some(j=>j.name===f.name&&j.size===f.size)){console.warn("Duplicate file skipped:",f.name);continue}if(this.images.length+s.length>=10){console.warn("Max image count exceeded:",f.name);break}s.push(f),this.imageCaptions.push("");let P=new FileReader;P.onload=j=>{j.target?.result&&this.imagePreviewUrls.push(j.target.result)},P.onerror=j=>{console.error("Preview failed for:",f.name,j)},P.readAsDataURL(f)}this.images=[...this.images,...s]}onSubmit(){if(this.clearErrors(),!this.validateForm())return;this.isSubmitting=!0,this.submitError="",this.submitSuccess="",this.submitFieldErrors={};let t=e=>{let r={name:this.name,asset_id:this.asset_id&&this.asset_id.trim()?this.asset_id.trim():void 0,description:this.description,category_id:this.category_id,type:this.assetType,serial_number:this.serial_number,model:this.model,manufacturer:this.manufacturer,capacity:this.capacity||null,capacity_unit:this.capacity_unit||null,purchase_date:this.purchase_date?this.convertDateToBackendFormat(this.purchase_date):null,purchase_price:this.purchase_price,depreciation:this.depreciation,depreciation_life:this.depreciation_life,location_id:this.location_id,department_id:this.department_id,parent_id:this.parent_id,warranty:this.warranty,insurance:this.insurance,health_score:this.health_score,criticality_level:this.criticality_level,status:this.status,tags:this.selectedTags.map(c=>c.name),meta:this.meta,inventory_parts:this.selectedParts.length>0?this.selectedParts.map(c=>({part_id:c.part_id,qty:c.qty})):void 0};this.isDuplicate||(r.images=e,this.imageCaptions.length>0&&(r.images_captions=this.imageCaptions)),(this.isDuplicate&&this.duplicateSourceId?this.assetService.duplicateAsset(this.duplicateSourceId,r):this.assetService.createAsset(r)).subscribe({next:c=>le(this,null,function*(){if(this.isSubmitting=!1,c.success){let f=c.data?.asset?.id||c.data?.id;if(this.documents.length>0&&f)try{yield this.uploadDocuments(f)}catch(E){console.error("Error uploading documents:",E)}this.selectedParts.length>0&&f?this.addPartsToAsset(f):(this.submitSuccess=this.isDuplicate?"Asset duplicated successfully!":"Asset created successfully!",setTimeout(()=>{this.router.navigate(["/assets/list"])},2e3))}else this.submitError=c.message||"Failed to create asset.",this.handleFieldErrors(c.errors||{})}),error:c=>{this.isSubmitting=!1,this.submitError=c.error?.message||"Failed to create asset.",this.handleFieldErrors(c.error?.errors||c.errors||{})}})};this.isDuplicate?this.images.length>0?this.convertImagesToBase64().then(t).catch(e=>{this.isSubmitting=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",e)}):t([]):this.convertImagesToBase64().then(t).catch(e=>{this.isSubmitting=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",e)})}healthScore=85;categories=[];category_id=null;assetTypes=[];assetType=null;assetTypesFromAPI=[];statusOptionsFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];destroy$=new J;currencyService=ge(re);currentCurrency=_e("USD");currencySymbol=_e("$");ngOnInit(){this.currencyService.get$().pipe(k(this.destroy$)).subscribe(t=>{this.currentCurrency.set(t),this.currencySymbol.set(this.currencyService.getSymbol())}),this.route.queryParams.subscribe(t=>{t.duplicate&&t.sourceId&&(this.isDuplicate=!0,this.duplicateSourceId=String(t.sourceId),this.loadAssetForDuplication(this.duplicateSourceId))}),this.assetService.getAssetCategories().subscribe(t=>{t.success&&t.data?.categories&&(this.categories=t.data.categories)}),this.assetService.getAssetTypes().subscribe(t=>{t.success&&t.data&&(this.assetTypesFromAPI=t.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})))}),this.assetService.getAssetStatuses().subscribe(t=>{t.success&&t.data&&(this.statusOptionsFromAPI=t.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,r)=>e.sort_order-r.sort_order),this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value))}),this.assetService.getLocations().subscribe(t=>{t.success&&t.data&&(this.locations=t.data.locations||t.data,this.route.queryParams.subscribe(e=>{e.location_id&&(this.location_id=Number(e.location_id),this.selectedLocation=this.locations.find(r=>r.id===this.location_id))}))}),this.assetService.getDepartments().subscribe(t=>{t.success&&t.data&&(this.departments=t.data)}),this.assetService.getAssets({per_page:1e3}).subscribe(t=>{t.success&&t.data?.assets&&(this.possibleParents=t.data.assets)}),this.loadAvailableTags()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}openPartsModal(){this.showPartsModal=!0}closePartsModal(){this.showPartsModal=!1}onPartsAdded(t){if(console.log("onPartsAdded called with parts:",t),console.log("Current selectedParts before merge:",this.selectedParts),!t||t.length===0){console.warn("No parts received in onPartsAdded");return}let e=[...this.selectedParts];t.forEach(r=>{console.log("Processing part:",r);let s=e.findIndex(c=>c.part_id===r.part_id);s>=0?(e[s]=we(ue({},e[s]),{qty:e[s].qty+r.qty}),console.log("Updated existing part at index:",s)):(e.push(ue({},r)),console.log("Added new part:",r))}),this.selectedParts=e,console.log("Selected parts after merge:",this.selectedParts),console.log("Selected parts length:",this.selectedParts.length),console.log("selectedParts array reference:",this.selectedParts),this.cdr.detectChanges(),setTimeout(()=>{this.closePartsModal()},50)}trackByPartId(t,e){return e.part_id}removePart(t){this.selectedParts=this.selectedParts.filter(e=>e.part_id!==t),this.cdr.detectChanges()}getTotalPartsCost(){return this.selectedParts.reduce((t,e)=>{let r=e.unit_cost||e.part?.unit_cost||0;return t+r*e.qty},0)}addPartsToAsset(t){if(this.selectedParts.length===0){this.submitSuccess=this.isDuplicate?"Asset duplicated successfully!":"Asset created successfully!",setTimeout(()=>{this.router.navigate(["/assets/list"])},2e3);return}let e=this.selectedParts.map(r=>({part_id:r.part_id,qty:r.qty}));this.assetService.addAssetParts(t,e).subscribe({next:()=>{this.submitSuccess=this.isDuplicate?"Asset duplicated with parts successfully!":"Asset created with parts successfully!",setTimeout(()=>{this.router.navigate(["/assets/list"])},2e3)},error:r=>{let s=r?.error?.message||"Asset created but failed to add parts";this.toastService.error(s),this.submitSuccess=this.isDuplicate?"Asset duplicated successfully!":"Asset created successfully!",setTimeout(()=>{this.router.navigate(["/assets/list"])},2e3)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs?(console.log("Found date inputs:",this.dateInputs.length),this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let r=t.nativeElement,s=r.getAttribute("name");if(console.log("Processing date input:",s),s==="purchase_date"){console.log("Initializing Flatpickr for purchase_date");let f=xe(r,{dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,maxDate:"today",onChange:(E,P)=>{console.log("Date selected:",P),this.purchase_date=P}});this.flatpickrInstances.push(f),console.log("Flatpickr initialized successfully for purchase_date")}}})):console.warn("No date inputs found")},50)}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetForDuplication(t){this.assetService.getAsset(t).subscribe({next:e=>{if(e.success){let r=e.data.asset||e.data;this.populateFormFromSource(r)}},error:e=>{console.error("Error loading source asset for duplication:",e)}})}populateFormFromSource(t){this.name=t.name?`${t.name} (Copy)`:"",this.description=t.description||"",this.model=t.model||"",this.manufacturer=t.manufacturer||"",this.purchase_date=t.purchase_date?this.convertBackendDateToDisplay(t.purchase_date):"",this.purchase_price=t.purchase_price||null,this.depreciation=t.depreciation||null,this.depreciation_life=t.depreciation_life||null,this.location_id=t.location_id||null,this.department_id=t.department_id||null,this.warranty=t.warranty?this.convertBackendDateToDisplay(t.warranty):"",this.insurance=t.insurance||"",this.health_score=t.health_score||85,this.status=t.status||"Active",setTimeout(()=>{t.type&&(this.selectedAssetType=this.assetTypes.find(e=>e.id==t.type||e.id===parseInt(t.type))||null,this.selectedAssetType&&(this.assetType=this.selectedAssetType.id)),t.category_id&&(this.selectedCategory=this.categories.find(e=>e.id===t.category_id)||null,this.category_id=t.category_id),t.location_id&&(this.selectedLocation=this.locations.find(e=>e.id===t.location_id)||null),t.department_id&&(this.selectedDepartment=this.departments.find(e=>e.id===t.department_id)||null),t.status&&(this.selectedStatus=this.statusOptions.find(e=>e.value===t.status||e.label===t.status||e.id===t.status)||null,this.selectedStatus&&(this.status=this.selectedStatus.value)),!this.selectedStatus&&this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value),t.tags&&Array.isArray(t.tags)&&(this.selectedTags=t.tags.map(e=>this.availableTags.find(r=>r.id===e.id)||e)),this.clearErrors()},500),this.serial_number="",t.images&&Array.isArray(t.images)&&t.images.length>0&&this.duplicateImages(t.images)}goBack(){this.router.navigate(["/assets/list"])}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.assetType=t.id,this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(t){this.selectedCategory=t,this.category_id=t.id,this.showCategoryDropdown=!1,this.clearErrors()}buildLocationLabel(t){return t?t.full_path?t.full_path:Array.isArray(t.complete_hierarchy)&&t.complete_hierarchy.length>0?t.complete_hierarchy.map(e=>e.name).join(" \u2192 "):Array.isArray(t.ancestors_with_details)&&t.ancestors_with_details.length>0?t.ancestors_with_details.map(e=>e.name).join(" \u2192 ")+" \u2192 "+(t.name||""):t.name||"":""}getLocationLabel(t){return this.buildLocationLabel(t)}selectLocation(t){let e=this.buildLocationLabel(t);this.selectedLocation=we(ue({},t),{label:e}),this.location_id=t.id,this.showLocationDropdown=!1}selectStatus(t){this.selectedStatus=t,this.status=t.value,this.showStatusDropdown=!1}selectDepartment(t){this.selectedDepartment=t,this.department_id=t.id,this.showDepartmentDropdown=!1}toggleTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.some(e=>e.id===t.id)}onTagInputKeydown(t){t.key==="Enter"&&(t.preventDefault(),this.createNewTag())}createNewTag(){let t=this.newTagInput.trim();if(t&&!this.selectedTags.some(e=>e.name.toLowerCase()===t.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],r=e[Math.floor(Math.random()*e.length)],s={id:Date.now(),name:t,color:r,isNew:!0};this.selectedTags.push(s),this.newTagInput=""}}removeTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1&&this.selectedTags.splice(e,1)}onDocumentClick(t){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}validateForm(){let t=!0;if(!this.name||this.name.trim().length===0?(this.nameError="Asset name is required",t=!1):this.name.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",t=!1),this.description&&this.description.length>1e3&&(this.submitError="Description cannot exceed 1000 characters",t=!1),this.serial_number&&this.serial_number.length>100&&(this.serialNumberError="Serial number cannot exceed 100 characters",t=!1),this.model&&this.model.length>100&&(this.submitError="Model cannot exceed 100 characters",t=!1),this.manufacturer&&this.manufacturer.length>100&&(this.submitError="Manufacturer cannot exceed 100 characters",t=!1),this.warranty&&this.warranty.length>255&&(this.submitError="Warranty cannot exceed 255 characters",t=!1),this.insurance&&this.insurance.length>255&&(this.submitError="Insurance cannot exceed 255 characters",t=!1),this.purchase_price!==null&&this.purchase_price<0&&(this.submitError="Purchase price cannot be negative",t=!1),this.depreciation!==null&&(this.depreciation<0||this.depreciation>100)&&(this.submitError="Depreciation must be between 0 and 100",t=!1),this.depreciation_life!==null&&(this.depreciation_life<1||this.depreciation_life>100)&&(this.submitError="Depreciation life must be between 1 and 100 years",t=!1),this.purchase_date){let e=new Date;new Date(this.purchase_date)>e&&(this.submitError="Purchase date cannot be in the future",t=!1)}return(this.health_score<0||this.health_score>100)&&(this.submitError="Health score must be between 0 and 100",t=!1),this.category_id||(this.categoryError="Category is required",t=!1),this.assetType||(this.assetTypeError="Asset type is required",t=!1),t}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}handleFieldErrors(t){t.name&&(this.nameError=t.name[0]),t.type&&(this.assetTypeError=t.type[0]),t.category_id&&(this.categoryError=t.category_id[0]),t.serial_number&&(this.serialNumberError=t.serial_number[0])}isFormValid(){return!!(this.name&&this.name.trim().length>0&&this.name.trim().length<=100)}updateImageCaption(t,e){t>=0&&t<this.imageCaptions.length&&(this.imageCaptions[t]=e)}removeImage(t){t>=0&&t<this.images.length&&(this.images.splice(t,1),this.imagePreviewUrls.splice(t,1),this.imageCaptions.splice(t,1))}removeAllImages(){this.images=[],this.imagePreviewUrls=[],this.imageCaptions=[]}onDocumentChange(t){let e=t.target.files;if(e&&e.length>0){let r=Array.from(e),s=10*1024*1024,c=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","image/jpeg","image/png"];r.forEach(f=>{if(f.size>s){console.warn("File too large:",f.name);return}if(!c.includes(f.type)){console.warn("Invalid file type:",f.name);return}this.documents.push(f),this.documentMetadata.push({name:f.name.replace(/\.[^/.]+$/,""),type:"other"})})}}removeDocument(t){t>=0&&t<this.documents.length&&(this.documents.splice(t,1),this.documentMetadata.splice(t,1))}getDocumentTypeLabel(t){return{manual:"Manual",certificate:"Certificate",warranty:"Warranty",other:"Other"}[t]||t}uploadDocuments(t){return le(this,null,function*(){let e=this.documents.map((r,s)=>{let c=this.documentMetadata[s];return this.assetService.uploadAssetDocument(t,r,c.name,c.type).toPromise()});yield Promise.all(e)})}moveImage(t,e){if(e>=0&&e<this.images.length){let r=this.images.splice(t,1)[0];this.images.splice(e,0,r);let s=this.imagePreviewUrls.splice(t,1)[0];this.imagePreviewUrls.splice(e,0,s)}}moveImageUp(t){t>0&&this.moveImage(t,t-1)}moveImageDown(t){t<this.images.length-1&&this.moveImage(t,t+1)}getTodayDate(){return new Date().toISOString().split("T")[0]}convertDateToBackendFormat(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${r}-${s}-${c}`}catch(e){return console.error("Date conversion error:",e),t}}convertBackendDateToDisplay(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",r).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),t}}getIconFromPath(t){return t&&(t.split("/").pop()||"").replace(".svg","")||"cube"}getColorForType(t){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[t]||"#6b7280"}hexToTailwindColor(t){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[t.toUpperCase()]||"gray"}onImageError(t,e){console.error("Image failed to load at index:",e),console.error("Image src:",t.target.src),console.error("Image file:",this.images[e]),t.target.style.display="none"}onImageLoad(t,e){console.log("Image loaded successfully at index:",e),console.log("Image dimensions:",t.target.naturalWidth,"x",t.target.naturalHeight)}convertImagesToBase64(){return Promise.all(this.images.map(t=>new Promise((e,r)=>{let s=new FileReader;s.onload=()=>{s.result?e(s.result):r(new Error("Failed to read file"))},s.onerror=()=>r(s.error),s.readAsDataURL(t)})))}onCategoryIconError(t,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}onAssetTypeIconError(t,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}triggerFileInput(){this.fileInput.nativeElement.click()}duplicateImages(t){t.forEach((e,r)=>{if(e.image_url){this.imagePreviewUrls.push(e.image_url);let s=`existing-image-${r+1}.jpg`,c=new File([""],s,{type:"image/jpeg"});this.images.push(c)}})}getSelectedParent(){return this.possibleParents.find(t=>t.id===this.parent_id)}onAnalyzeFileSelected(t){return le(this,null,function*(){let e=t.target.files?.[0];if(!e)return;let r=this.aiImageUploadService.validate(e);if(!r.ok){this.toastService.error(r.reason||"Invalid file"),this.analyzeFileInput&&(this.analyzeFileInput.nativeElement.value="");return}this.isAnalyzing=!0;try{let s=yield this.aiImageUploadService.toDataUrl(e);this.aiImageUploadService.analyze([s]).subscribe({next:c=>{c.success&&c.data?(this.mapRecognitionToForm(c.data),this.toastService.success("Form fields populated from AI analysis. Please review and edit as needed.")):this.toastService.error("Analysis failed. Please try again."),this.isAnalyzing=!1,this.analyzeFileInput&&(this.analyzeFileInput.nativeElement.value="")},error:c=>{this.toastService.error(c?.error?.message||"Analysis failed. Please try again."),this.isAnalyzing=!1,this.analyzeFileInput&&(this.analyzeFileInput.nativeElement.value="")}})}catch{this.toastService.error("Failed to process image. Please try again."),this.isAnalyzing=!1,this.analyzeFileInput&&(this.analyzeFileInput.nativeElement.value="")}})}mapRecognitionToForm(t){if(!this.name&&t.assetType&&(this.name=t.assetType),!this.manufacturer&&t.manufacturer&&(this.manufacturer=t.manufacturer),!this.model&&t.model&&(this.model=t.model),!this.serial_number&&t.serialNumber&&(this.serial_number=t.serialNumber),this.health_score===85&&t.condition){let e={Excellent:95,Good:80,Fair:60,Poor:40};this.health_score=e[t.condition]||85}if(t.recommendations&&t.recommendations.length>0){let e=`

AI Recommendations:
`+t.recommendations.map(r=>`\u2022 ${r}`).join(`
`);this.description?this.description.includes("AI Recommendations:")||(this.description+=e):this.description=e.trim()}if(t.assetTag&&!this.description.includes(t.assetTag)){let e=t.assetTag?`Asset Tag: ${t.assetTag}`:"";e&&(this.description?this.description.includes("Asset Tag:")||(this.description=e+`

`+this.description):this.description=e)}}static \u0275fac=function(e){return new(e||a)(M(Z),M(ne),M(Ae),M(Mt),M(Ft),M(ke),M(Le),M(Qe))};static \u0275cmp=R({type:a,selectors:[["app-asset-create"]],viewQuery:function(e,r){if(e&1&&(K(wn,5),K(Cn,5),K(Sn,5)),e&2){let s;ee(s=te())&&(r.fileInput=s.first),ee(s=te())&&(r.analyzeFileInput=s.first),ee(s=te())&&(r.dateInputs=s)}},hostBindings:function(e,r){e&1&&_("click",function(c){return r.onDocumentClick(c)},!1,Ee)},decls:375,vars:136,consts:[["analyzeFileInput",""],["assetForm","ngForm"],["nameInput","ngModel"],["dateInput",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-create-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",4,"ngIf"],[1,"mt-6","flex","justify-center"],["type","file","accept","image/png,image/jpeg,image/jpg",1,"hidden",3,"change"],["type","button",1,"inline-flex","items-center","space-x-2","px-6","py-3","bg-gradient-to-r","from-blue-600","to-purple-600","text-white","font-semibold","rounded-lg","hover:from-blue-700","hover:to-purple-700","transition-all","duration-200","shadow-lg","hover:shadow-xl","transform","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"click","disabled"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","animate-spin w-5 h-5","fill","none","viewBox","0 0 24 24",4,"ngIf"],[3,"ngSubmit"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Leave empty for auto-generation","name","asset_id","maxlength","50",1,"input",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","name","name","required","",1,"input",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"flex","items-center","space-x-3"],["type","text","value","AST-012","readonly","",1,"input","flex-1"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","name","description","maxlength","500",1,"input","resize-none",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","name","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input",3,"ngModelChange","ngModel"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],["name","criticality_level",1,"input",3,"ngModelChange","ngModel"],[3,"ngValue"],["value","high"],["value","medium"],["value","low"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"mt-6"],[1,"flex","items-center","space-x-3","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-14V4a2 2 0 00-2-2H6a2 2 0 00-2 2v3m16 0H4"],[1,"text-lg","font-semibold","text-gray-900"],["class","parts-empty-state",4,"ngIf"],["class","parts-list-container",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["type","text","placeholder","e.g., Dell, HP, Toyota","name","manufacturer","maxlength","100",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., PowerEdge R730","name","model","maxlength","100",1,"input",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mt-6"],["type","text","placeholder","e.g., SN123456789","name","serial_number","maxlength","100",1,"input",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-3"],["type","text","placeholder","e.g., 500, 2.0, 24000","name","capacity",1,"input",3,"ngModelChange","ngModel"],["name","capacity_unit",1,"input",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","name","purchase_price","step","0.01","min","0",1,"input",2,"padding-left","24px",3,"ngModelChange","ngModel"],["type","text","name","purchase_date","placeholder","Select purchase date","readonly","",1,"input",3,"ngModelChange","ngModel"],["type","number","name","depreciation","placeholder","e.g., 20","min","0","max","100","step","0.01",1,"input",3,"ngModelChange","ngModel"],["type","number","name","depreciation_life","placeholder","e.g., 5","min","1","max","100",1,"input",3,"ngModelChange","ngModel"],["type","text","name","warranty","placeholder","e.g., 2 years manufacturer warranty","maxlength","255",1,"input",3,"ngModelChange","ngModel"],["type","text","name","insurance","placeholder","e.g., Policy #12345, expires 2025-12-31","maxlength","255",1,"input",3,"ngModelChange","ngModel"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"col-span-1","md:col-span-2"],["type","text","placeholder","Enter asset address","name","address","autocomplete","off",1,"input","w-full",3,"ngModelChange","ngModel"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","border-gray-300","rounded-lg","hover:border-blue-400","transition-all"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-sm","text-gray-500"],["type","file","accept",".pdf,.doc,.docx,.xls,.xlsx,.txt,.jpg,.jpeg,.png","multiple","","id","document-upload-create",1,"sr-only",3,"change"],["for","document-upload-create",1,"mt-2","inline-flex","items-center","px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","cursor-pointer"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[3,"closed","saved","isOpen","assetId","assetLocationId"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-blue-800","font-medium"],[1,"text-blue-700","text-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"parts-empty-state"],[1,"empty-state-content"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"empty-state-icon"],[1,"empty-state-text"],[1,"empty-state-hint"],["type","button",1,"add-parts-btn",3,"click"],[1,"parts-list-container"],[1,"parts-list-header"],[1,"parts-count"],["type","button",1,"add-more-parts-btn",3,"click"],[1,"parts-items"],["class","parts-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"parts-total"],[1,"total-label"],[1,"total-value"],[1,"parts-item"],[1,"parts-item-info"],[1,"parts-item-name"],[1,"parts-item-details"],[1,"parts-item-qty"],[1,"parts-item-separator"],[1,"parts-item-cost"],[1,"parts-item-actions"],[1,"parts-item-total"],["type","button",1,"remove-part-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"value"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","name","newTagInput","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","w-6","h-6","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],[1,"mt-2"],["type","text","placeholder","Enter image name/description (e.g., 'Front View', 'Serial Number Plate')","maxlength","255",1,"w-full","px-2","py-1","text-xs","border","border-gray-300","rounded",3,"input","value"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"space-y-3"],["class","p-4 border border-gray-200 rounded-lg",4,"ngFor","ngForOf"],[1,"p-4","border","border-gray-200","rounded-lg"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"mb-2"],[1,"block","text-xs","font-medium","text-gray-700","mb-1"],["type","text","required","","maxlength","255",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded",3,"ngModelChange","ngModel","ngModelOptions"],["required","",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded",3,"ngModelChange","ngModel","ngModelOptions"],["value","manual"],["value","certificate"],["value","warranty"],["value","other"],["type","button",1,"ml-4","p-2","text-red-600","hover:text-red-700","hover:bg-red-50","rounded","transition-colors",3,"click"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"]],template:function(e,r){if(e&1){let s=b();i(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"button",9),_("click",function(){return u(s),g(r.goBack())}),h(),i(5,"svg",10),p(6,"path",11),n(),x(),i(7,"span",12),o(8,"Back to Assets"),n()()(),i(9,"h1",13),o(10),n(),i(11,"p",14),o(12),n(),v(13,En,9,0,"div",15),i(14,"div",16)(15,"input",17,0),_("change",function(f){return u(s),g(r.onAnalyzeFileSelected(f))}),n(),i(17,"button",18),_("click",function(){u(s);let f=fe(16);return g(f.click())}),v(18,An,2,0,"svg",19)(19,Mn,3,0,"svg",20),i(20,"span"),o(21),n()()()(),i(22,"form",21,1),_("ngSubmit",function(){return u(s),g(r.onSubmit())}),i(24,"div",22)(25,"div",23)(26,"div",24),h(),i(27,"svg",25),p(28,"path",26),n()(),x(),i(29,"h2",27),o(30,"Basic Information"),n()(),i(31,"div",28)(32,"div")(33,"label",29),o(34," Asset Code "),n(),i(35,"input",30),V("ngModelChange",function(f){return u(s),T(r.asset_id,f)||(r.asset_id=f),g(f)}),n(),i(36,"div",31),o(37,"Leave empty for auto-generation"),n()(),i(38,"div")(39,"label",29),o(40," Asset Name "),i(41,"span",32),o(42,"*"),n()(),i(43,"input",33,2),V("ngModelChange",function(f){return u(s),T(r.name,f)||(r.name=f),g(f)}),n(),v(45,kn,4,1,"div",34),i(46,"div",31),o(47,"Maximum 100 characters"),n()(),i(48,"div")(49,"label",29),o(50,"Asset ID"),n(),i(51,"div",35),p(52,"input",36),i(53,"span",37),o(54," auto-generated "),n()(),i(55,"p",31),o(56,"Unique identifier automatically assigned"),n()()(),i(57,"div",38)(58,"label",29),o(59,"Parent Asset"),n(),i(60,"div",39),_("click",function(f){return u(s),g(f.stopPropagation())}),i(61,"button",40),_("click",function(){return u(s),g(r.showParentDropdown=!r.showParentDropdown)}),i(62,"div",41),v(63,In,2,0,"span",42)(64,Tn,2,2,"span",43),h(),i(65,"svg",44),p(66,"path",45),n()()(),v(67,Pn,7,3,"div",46),n(),x(),i(68,"div",31),o(69,"Optional: Select a parent asset if this asset is a child of another."),n()(),i(70,"div",38)(71,"label",29),o(72,"Description"),n(),i(73,"textarea",47),V("ngModelChange",function(f){return u(s),T(r.description,f)||(r.description=f),g(f)}),n(),i(74,"div",31),o(75,"Maximum 500 characters"),n()(),i(76,"div")(77,"label",48),o(78,"Health Score"),n(),i(79,"div",49)(80,"div",50)(81,"span",51),o(82,"Current Score"),n(),i(83,"span",52),o(84),n()(),i(85,"div",53),p(86,"div",54)(87,"div",55),i(88,"input",56),V("ngModelChange",function(f){return u(s),T(r.healthScore,f)||(r.healthScore=f),g(f)}),n(),p(89,"div",57),n(),i(90,"div",58)(91,"span"),o(92,"Poor (0%)"),n(),i(93,"span"),o(94,"Fair (25%)"),n(),i(95,"span"),o(96,"Good (50%)"),n(),i(97,"span"),o(98,"Very Good (75%)"),n(),i(99,"span"),o(100,"Excellent (100%)"),n()()(),i(101,"div")(102,"label",29),o(103," Criticality Level "),n(),i(104,"select",59),V("ngModelChange",function(f){return u(s),T(r.criticality_level,f)||(r.criticality_level=f),g(f)}),i(105,"option",60),o(106,"Select criticality level"),n(),i(107,"option",61),o(108,"High"),n(),i(109,"option",62),o(110,"Medium"),n(),i(111,"option",63),o(112,"Low"),n()(),i(113,"div",31),o(114,"Optional: Set the criticality level for this asset"),n()()()(),i(115,"div",22)(116,"div",23)(117,"div",64),h(),i(118,"svg",65),p(119,"path",66),n()(),x(),i(120,"h2",27),o(121,"Asset Classification"),n()(),i(122,"div",67)(123,"div")(124,"label",29),o(125," Asset Type "),i(126,"span",32),o(127,"*"),n()(),i(128,"div",39),_("click",function(f){return u(s),g(f.stopPropagation())}),i(129,"button",40),_("click",function(){return u(s),g(r.toggleAssetTypeDropdown())}),i(130,"div",41),v(131,Dn,2,0,"span",42)(132,Fn,6,5,"div",68),h(),i(133,"svg",44),p(134,"path",45),n()()(),v(135,Bn,5,1,"div",46),n(),v(136,Nn,4,1,"div",34),n(),x(),i(137,"div")(138,"label",29),o(139," Category "),i(140,"span",32),o(141,"*"),n()(),i(142,"div",39),_("click",function(f){return u(s),g(f.stopPropagation())}),i(143,"button",40),_("click",function(){return u(s),g(r.toggleCategoryDropdown())}),i(144,"div",41),v(145,Gn,2,0,"span",42)(146,zn,2,1,"span",43),h(),i(147,"svg",44),p(148,"path",45),n()()(),v(149,Qn,5,1,"div",46),n(),v(150,Yn,4,1,"div",34),n()(),x(),i(151,"div",69)(152,"div",70)(153,"div",24),h(),i(154,"svg",25),p(155,"path",71),n()(),x(),i(156,"h3",72),o(157,"Parts & Materials"),n()(),v(158,Zn,12,0,"div",73)(159,Xn,16,9,"div",74),n()(),i(160,"div",22)(161,"div",23)(162,"div",75),h(),i(163,"svg",76),p(164,"path",77),n()(),x(),i(165,"h2",27),o(166,"Technical Details"),n()(),i(167,"div",67)(168,"div")(169,"label",29),o(170,"Manufacturer"),n(),i(171,"input",78),V("ngModelChange",function(f){return u(s),T(r.manufacturer,f)||(r.manufacturer=f),g(f)}),n(),i(172,"div",31),o(173,"Maximum 100 characters"),n()(),i(174,"div")(175,"label",29),o(176,"Model"),n(),i(177,"input",79),V("ngModelChange",function(f){return u(s),T(r.model,f)||(r.model=f),g(f)}),n(),i(178,"div",31),o(179,"Maximum 100 characters"),n()()(),i(180,"div",80)(181,"div")(182,"label",29),o(183," Serial Number "),i(184,"span",32),o(185,"*"),n()(),i(186,"input",81),V("ngModelChange",function(f){return u(s),T(r.serial_number,f)||(r.serial_number=f),g(f)}),n(),v(187,Kn,4,1,"div",34),i(188,"div",31),o(189,"Required, max 100 chars, must be unique within your company"),n()(),i(190,"div")(191,"label",29),o(192,"Capacity"),n(),i(193,"div",82)(194,"div")(195,"input",83),V("ngModelChange",function(f){return u(s),T(r.capacity,f)||(r.capacity=f),g(f)}),n()(),i(196,"div")(197,"select",84),V("ngModelChange",function(f){return u(s),T(r.capacity_unit,f)||(r.capacity_unit=f),g(f)}),i(198,"option",85),o(199,"Unit"),n(),v(200,er,2,2,"option",86),n()()(),i(201,"div",31),o(202,"Optional"),n()()()(),i(203,"div",22)(204,"div",23)(205,"div",87),h(),i(206,"svg",88),p(207,"path",89),n()(),x(),i(208,"h2",27),o(209,"Financial Information"),n()(),i(210,"div",28)(211,"div")(212,"label",29),o(213),n(),i(214,"div",90)(215,"div",91)(216,"span",92),o(217),n()(),i(218,"input",93),V("ngModelChange",function(f){return u(s),T(r.purchase_price,f)||(r.purchase_price=f),g(f)}),n()(),i(219,"div",31),o(220,"Must be a non-negative number"),n()(),i(221,"div")(222,"label",29),o(223,"Purchase Date"),n(),i(224,"input",94,3),V("ngModelChange",function(f){return u(s),T(r.purchase_date,f)||(r.purchase_date=f),g(f)}),n(),i(226,"div",31),o(227,"Cannot be in the future"),n()()(),i(228,"div",28)(229,"div")(230,"label",29),o(231,"Depreciation Rate (%)"),n(),i(232,"input",95),V("ngModelChange",function(f){return u(s),T(r.depreciation,f)||(r.depreciation=f),g(f)}),n(),i(233,"div",31),o(234,"Annual depreciation rate (0-100%)"),n()(),i(235,"div")(236,"label",29),o(237,"Depreciation Life (Years)"),n(),i(238,"input",96),V("ngModelChange",function(f){return u(s),T(r.depreciation_life,f)||(r.depreciation_life=f),g(f)}),n(),i(239,"div",31),o(240,"Useful life for depreciation calculation (1-100 years)"),n()()(),i(241,"div",28)(242,"div")(243,"label",29),o(244,"Warranty Information"),n(),i(245,"input",97),V("ngModelChange",function(f){return u(s),T(r.warranty,f)||(r.warranty=f),g(f)}),n(),i(246,"div",31),o(247,"Warranty details (max 255 characters)"),n()(),i(248,"div")(249,"label",29),o(250,"Insurance Information"),n(),i(251,"input",98),V("ngModelChange",function(f){return u(s),T(r.insurance,f)||(r.insurance=f),g(f)}),n(),i(252,"div",31),o(253,"Insurance details (max 255 characters)"),n()()()(),i(254,"div",22)(255,"div",23)(256,"div",99),h(),i(257,"svg",100),p(258,"path",101)(259,"path",102),n()(),x(),i(260,"h2",27),o(261,"Location & Assignment"),n()(),i(262,"div",67)(263,"div")(264,"label",29),o(265,"Location"),n(),i(266,"div",39),_("click",function(f){return u(s),g(f.stopPropagation())}),i(267,"button",40),_("click",function(){return u(s),g(r.toggleLocationDropdown())}),i(268,"div",41),v(269,tr,2,0,"span",42)(270,ir,7,1,"div",68),h(),i(271,"svg",44),p(272,"path",45),n()()(),v(273,ar,5,1,"div",46),n()(),x(),i(274,"div",103)(275,"label",29),o(276,"Address"),n(),i(277,"input",104),V("ngModelChange",function(f){return u(s),T(r.address,f)||(r.address=f),g(f)}),n(),i(278,"div",31),o(279,"Enter the physical address of the asset"),n()(),i(280,"div")(281,"label",29),o(282,"Department ID"),n(),i(283,"div",39),_("click",function(f){return u(s),g(f.stopPropagation())}),i(284,"button",40),_("click",function(){return u(s),g(r.toggleDepartmentDropdown())}),i(285,"div",41),v(286,or,2,0,"span",42)(287,sr,6,1,"div",68),h(),i(288,"svg",44),p(289,"path",45),n()()(),v(290,mr,5,1,"div",46),n(),x(),i(291,"div",31),o(292,"Optional department assignment"),n()(),i(293,"div")(294,"label",29),o(295,"Status"),n(),i(296,"div",39),_("click",function(f){return u(s),g(f.stopPropagation())}),i(297,"button",40),_("click",function(){return u(s),g(r.toggleStatusDropdown())}),i(298,"div",41),v(299,pr,4,3,"div",68),h(),i(300,"svg",44),p(301,"path",45),n()()(),v(302,gr,5,1,"div",105),n(),x(),i(303,"div",31),o(304,"Current operational status of the asset"),n()(),i(305,"div")(306,"label",29),o(307,"Tags"),n(),v(308,fr,3,1,"div",106),i(309,"div",39),_("click",function(f){return u(s),g(f.stopPropagation())}),i(310,"button",40),_("click",function(){return u(s),g(r.toggleTagsDropdown())}),i(311,"div",41)(312,"span",107),o(313),n(),i(314,"div",108),v(315,hr,2,1,"span",109),h(),i(316,"svg",44),p(317,"path",45),n()()()(),v(318,yr,10,2,"div",46),n(),x(),i(319,"div",31),h(),i(320,"svg",110),p(321,"path",111),n(),o(322," Select existing tags or type to create new ones. Press Enter to add custom tags. "),n()()()(),x(),i(323,"div",22)(324,"div",23)(325,"div",112),h(),i(326,"svg",113),p(327,"path",114),n()(),x(),i(328,"h2",27),o(329,"Asset Image"),n()(),i(330,"div")(331,"label",29),o(332,"Upload Image"),n(),i(333,"div",115),_("click",function(){return u(s),g(r.triggerFileInput())})("dragover",function(f){return u(s),g(r.onDragOver(f))})("dragleave",function(f){return u(s),g(r.onDragLeave(f))})("drop",function(f){return u(s),g(r.onDrop(f))}),i(334,"div",116)(335,"div",117),h(),i(336,"svg",118),p(337,"path",119),n()(),x(),i(338,"p",120),o(339),n(),i(340,"input",121,4),_("change",function(f){return u(s),g(r.onFileChange(f))}),n()()(),v(342,Sr,16,2,"div",122),n()(),i(343,"div",22)(344,"div",23)(345,"div",64),h(),i(346,"svg",65),p(347,"path",26),n()(),x(),i(348,"h2",27),o(349,"Documents"),n()(),i(350,"div")(351,"label",29),o(352,"Upload Documents"),n(),i(353,"div",123)(354,"div",116)(355,"div",117),h(),i(356,"svg",124),p(357,"path",119),n()(),x(),i(358,"p",125),o(359," PDF, DOC, DOCX, XLS, XLSX, TXT, JPG, PNG up to 10MB - click to browse or drag and drop files here "),n(),i(360,"input",126),_("change",function(f){return u(s),g(r.onDocumentChange(f))}),n(),i(361,"label",127),h(),i(362,"svg",128),p(363,"path",119),n(),o(364," Select Documents "),n()()(),v(365,Ar,8,2,"div",122),n()(),v(366,Mr,6,1,"div",129)(367,kr,6,1,"div",130),x(),i(368,"div",131)(369,"button",132),_("click",function(){return u(s),g(r.goBack())}),o(370," Cancel "),n(),i(371,"button",133),v(372,Ir,5,0,"span",134)(373,Tr,6,0,"span",134),n()()(),i(374,"app-add-asset-parts-modal",135),_("closed",function(){return u(s),g(r.closePartsModal())})("saved",function(f){return u(s),g(r.onPartsAdded(f))}),n()()()}e&2&&(l(10),C(" ",r.route.snapshot.queryParams.duplicate?"Duplicate Asset":"Create New Asset"," "),l(2),C(" ",r.route.snapshot.queryParams.duplicate?"Creating a copy of an existing asset. Please review and update the information below.":"Add a new asset to your inventory with detailed information and specifications"," "),l(),m("ngIf",r.route.snapshot.queryParams.duplicate),l(4),m("disabled",r.isAnalyzing),l(),m("ngIf",!r.isAnalyzing),l(),m("ngIf",r.isAnalyzing),l(2),y(r.isAnalyzing?"Analyzing...":"Analyze with AI"),l(14),I("ngModel",r.asset_id),l(8),w("border-red-300",r.nameError),I("ngModel",r.name),l(2),m("ngIf",r.nameError),l(16),w("border-blue-500",r.showParentDropdown),l(2),m("ngIf",!r.parent_id),l(),m("ngIf",r.parent_id&&r.getSelectedParent()),l(),w("rotate-180",r.showParentDropdown),l(2),m("ngIf",r.showParentDropdown),l(6),I("ngModel",r.description),l(10),w("text-red-600",r.healthScore<50)("text-green-600",r.healthScore>=50),l(),C("",r.healthScore,"%"),l(3),H("width",r.healthScore,"%"),w("bg-red-500",r.healthScore<50)("bg-green-500",r.healthScore>=50),l(),I("ngModel",r.healthScore),l(),H("left",r.healthScore,"%"),w("bg-red-500",r.healthScore<50)("bg-green-500",r.healthScore>=50),l(15),I("ngModel",r.criticality_level),l(),m("ngValue",void 0),l(24),w("border-red-300",r.assetTypeError)("border-blue-500",r.showAssetTypeDropdown),l(2),m("ngIf",!r.selectedAssetType),l(),m("ngIf",r.selectedAssetType),l(),w("rotate-180",r.showAssetTypeDropdown),l(2),m("ngIf",r.showAssetTypeDropdown),l(),m("ngIf",r.assetTypeError),l(7),w("border-red-300",r.categoryError)("border-blue-500",r.showCategoryDropdown),l(2),m("ngIf",!r.selectedCategory),l(),m("ngIf",r.selectedCategory),l(),w("rotate-180",r.showCategoryDropdown),l(2),m("ngIf",r.showCategoryDropdown),l(),m("ngIf",r.categoryError),l(8),m("ngIf",r.selectedParts.length===0),l(),m("ngIf",r.selectedParts.length>0),l(12),I("ngModel",r.manufacturer),l(6),I("ngModel",r.model),l(9),w("border-red-300",r.serialNumberError),I("ngModel",r.serial_number),l(),m("ngIf",r.serialNumberError),l(8),I("ngModel",r.capacity),l(2),I("ngModel",r.capacity_unit),l(3),m("ngForOf",r.capacityUnitOptions),l(13),C("Purchase Value (",r.currentCurrency(),")"),l(4),C("",r.currencySymbol()," "),l(),I("ngModel",r.purchase_price),l(6),I("ngModel",r.purchase_date),l(8),I("ngModel",r.depreciation),l(6),I("ngModel",r.depreciation_life),l(7),I("ngModel",r.warranty),l(6),I("ngModel",r.insurance),l(16),w("border-blue-500",r.showLocationDropdown),l(2),m("ngIf",!r.selectedLocation),l(),m("ngIf",r.selectedLocation),l(),w("rotate-180",r.showLocationDropdown),l(2),m("ngIf",r.showLocationDropdown),l(4),I("ngModel",r.address),l(7),w("border-blue-500",r.showDepartmentDropdown),l(2),m("ngIf",!r.selectedDepartment),l(),m("ngIf",r.selectedDepartment),l(),w("rotate-180",r.showDepartmentDropdown),l(2),m("ngIf",r.showDepartmentDropdown),l(7),w("border-blue-500",r.showStatusDropdown),l(2),m("ngIf",r.selectedStatus),l(),w("rotate-180",r.showStatusDropdown),l(2),m("ngIf",r.showStatusDropdown),l(6),m("ngIf",r.selectedTags.length>0),l(2),w("border-blue-500",r.showTagsDropdown),l(3),C(" ",r.selectedTags.length===0?"Select tags":"Add more tags"," "),l(2),m("ngIf",r.selectedTags.length>0),l(),w("rotate-180",r.showTagsDropdown),l(2),m("ngIf",r.showTagsDropdown),l(15),w("border-gray-300",!r.isDragOver)("border-blue-500",r.isDragOver)("bg-blue-50",r.isDragOver)("hover:border-blue-400",!r.isDragOver),l(3),w("text-gray-400",!r.isDragOver)("text-blue-500",r.isDragOver),l(2),w("text-gray-500",!r.isDragOver)("text-blue-600",r.isDragOver),l(),C(" ",r.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),l(3),m("ngIf",r.imagePreviewUrls.length>0),l(23),m("ngIf",r.documents.length>0),l(),m("ngIf",r.submitError),l(),m("ngIf",r.submitSuccess),l(2),m("disabled",r.isSubmitting),l(2),m("disabled",r.isSubmitting||!r.isFormValid()),l(),m("ngIf",!r.isSubmitting),l(),m("ngIf",r.isSubmitting),l(),m("isOpen",r.showPartsModal)("assetId",0)("assetLocationId",r.location_id))},dependencies:[$,ve,Te,Ve,G,Ke,et,Ie,z,he,Pe,at,rt,nt,Y,Xe,B,X,ye,He],styles:[".asset-create-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}.label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.5rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.5rem;font-weight:500;transition:all .2s ease-in-out;cursor:pointer;border:none;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#1d4ed8}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#4b5563}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;z-index:50;margin-top:.25rem;background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;max-height:15rem;overflow-y:auto}.dropdown-item[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;transition:background-color .15s ease-in-out}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.25rem}.success-message[_ngcontent-%COMP%]{color:#10b981;font-size:.875rem;margin-top:.25rem}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border:2px solid #e5e7eb;border-top-color:#2563eb;border-radius:50%;animation:spin 1s linear infinite}.submit-success-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.parts-empty-state[_ngcontent-%COMP%]{border:2px dashed #e5e7eb;border-radius:8px;padding:3rem 2rem;text-align:center;background:#f9fafb}.parts-empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.parts-empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{width:3rem;height:3rem;color:#9ca3af;margin-bottom:.5rem}.parts-empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .empty-state-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#374151;margin:0}.parts-empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .empty-state-hint[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0}.parts-empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .add-parts-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:#2563eb;color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;margin-top:.5rem}.parts-empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .add-parts-btn[_ngcontent-%COMP%]:hover{background:#1d4ed8}.parts-empty-state[_ngcontent-%COMP%]   .empty-state-content[_ngcontent-%COMP%]   .add-parts-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.parts-list-container[_ngcontent-%COMP%]   .parts-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.parts-list-container[_ngcontent-%COMP%]   .parts-list-header[_ngcontent-%COMP%]   .parts-count[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#6b7280}.parts-list-container[_ngcontent-%COMP%]   .parts-list-header[_ngcontent-%COMP%]   .add-more-parts-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#f3f4f6;color:#374151;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.parts-list-container[_ngcontent-%COMP%]   .parts-list-header[_ngcontent-%COMP%]   .add-more-parts-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;border-color:#9ca3af}.parts-list-container[_ngcontent-%COMP%]   .parts-list-header[_ngcontent-%COMP%]   .add-more-parts-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.parts-list-container[_ngcontent-%COMP%]   .parts-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;transition:all .2s}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#fff}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-info[_ngcontent-%COMP%]{flex:1}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-info[_ngcontent-%COMP%]   .parts-item-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#111827;margin-bottom:.25rem}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-info[_ngcontent-%COMP%]   .parts-item-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:#6b7280}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-info[_ngcontent-%COMP%]   .parts-item-details[_ngcontent-%COMP%]   .parts-item-separator[_ngcontent-%COMP%]{color:#d1d5db}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-actions[_ngcontent-%COMP%]   .parts-item-total[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#111827;min-width:80px;text-align:right}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-actions[_ngcontent-%COMP%]   .remove-part-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#ef4444;cursor:pointer;padding:.5rem;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-actions[_ngcontent-%COMP%]   .remove-part-btn[_ngcontent-%COMP%]:hover{background:#fee2e2}.parts-list-container[_ngcontent-%COMP%]   .parts-item[_ngcontent-%COMP%]   .parts-item-actions[_ngcontent-%COMP%]   .remove-part-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.parts-list-container[_ngcontent-%COMP%]   .parts-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#eff6ff;border-radius:8px;border:1px solid #bfdbfe}.parts-list-container[_ngcontent-%COMP%]   .parts-total[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e40af}.parts-list-container[_ngcontent-%COMP%]   .parts-total[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#1e40af}"]})};var Vr=["dateInput"];function Pr(a,t){a&1&&(i(0,"span",42),o(1,"No location assigned"),n())}function Dr(a,t){if(a&1&&(i(0,"span",43),o(1),n()),a&2){let e=d(2);l(),C(" ",e.getLocationNameById(e.transferData.new_location_id)," ")}}function Lr(a,t){if(a&1){let e=b();i(0,"button",48),_("click",function(){let s=u(e).$implicit,c=d(3);return c.transferData.new_location_id=s.id,g(c.showLocationDropdown=!1)}),o(1),n()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",r.transferData.new_location_id===e.id),m("disabled",e.id===(r.asset==null?null:r.asset.location_id)),l(),C(" ",r.getLocationLabel(e)," ")}}function Or(a,t){if(a&1){let e=b();i(0,"div",44)(1,"div",45)(2,"button",46),_("click",function(){u(e);let s=d(2);return s.transferData.new_location_id=null,g(s.showLocationDropdown=!1)}),o(3," No location assigned "),n(),v(4,Lr,2,4,"button",47),n()()}if(a&2){let e=d(2);l(2),w("bg-blue-50",!e.transferData.new_location_id),l(2),m("ngForOf",e.locations)}}function Fr(a,t){a&1&&(i(0,"span",42),o(1,"Select new department (optional)"),n())}function Hr(a,t){if(a&1&&(i(0,"span",43),o(1),n()),a&2){let e=d(2);l(),C(" ",e.getDepartmentNameById(e.transferData.new_department_id)," ")}}function jr(a,t){if(a&1){let e=b();i(0,"button",46),_("click",function(){let s=u(e).$implicit,c=d(3);return c.transferData.new_department_id=s.id,g(c.showDepartmentDropdown=!1)}),o(1),n()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",r.transferData.new_department_id===e.id),l(),C(" ",e.name," ")}}function Rr(a,t){if(a&1){let e=b();i(0,"div",44)(1,"div",45)(2,"button",46),_("click",function(){u(e);let s=d(2);return s.transferData.new_department_id=null,g(s.showDepartmentDropdown=!1)}),o(3," Select new department (optional) "),n(),v(4,jr,2,3,"button",49),n()()}if(a&2){let e=d(2);l(2),w("bg-blue-50",!e.transferData.new_department_id),l(2),m("ngForOf",e.departments)}}function Br(a,t){a&1&&(i(0,"span",42),o(1,"Select reason"),n())}function Nr(a,t){if(a&1&&(i(0,"span",43),o(1),n()),a&2){let e=d(2);l(),C(" ",e.transferData.transfer_reason," ")}}function Gr(a,t){if(a&1){let e=b();i(0,"button",46),_("click",function(){let s=u(e).$implicit,c=d(3);return c.transferData.transfer_reason=s,g(c.showReasonDropdown=!1)}),o(1),n()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",r.transferData.transfer_reason===e),l(),C(" ",e," ")}}function zr(a,t){if(a&1){let e=b();i(0,"div",44)(1,"div",45)(2,"button",46),_("click",function(){u(e);let s=d(2);return s.transferData.transfer_reason="",g(s.showReasonDropdown=!1)}),o(3," Select reason "),n(),v(4,Gr,2,3,"button",49),n()()}if(a&2){let e=d(2);l(2),w("bg-blue-50",!e.transferData.transfer_reason),l(2),m("ngForOf",e.transferReasons)}}function $r(a,t){if(a&1&&(i(0,"div",50)(1,"div",51)(2,"div",52),h(),i(3,"svg",53),p(4,"path",54),n()(),x(),i(5,"div",55)(6,"p",56),o(7),n()()()()),a&2){let e=d(2);l(7),y(e.error)}}function Ur(a,t){a&1&&(i(0,"span"),o(1,"Create Transfer"),n())}function qr(a,t){a&1&&(i(0,"span",57),h(),i(1,"svg",58),p(2,"circle",59)(3,"path",60),n(),o(4," Creating Transfer... "),n())}function Wr(a,t){if(a&1){let e=b();i(0,"div",2),_("click",function(s){u(e);let c=d();return g(c.onModalClick(s))}),i(1,"div",3),p(2,"div",4),i(3,"div",5),_("click",function(s){return u(e),g(s.stopPropagation())}),i(4,"div",6)(5,"h3",7),o(6),n(),i(7,"button",8),_("click",function(){u(e);let s=d();return g(s.onCancel())}),h(),i(8,"svg",9),p(9,"path",10),n()()(),x(),i(10,"div",11)(11,"div")(12,"p",12),o(13,"Current Location"),n(),i(14,"p",13),o(15),n()(),i(16,"div")(17,"p",12),o(18,"Current Department"),n(),i(19,"p",13),o(20),n()()(),i(21,"div",14)(22,"div",15),h(),i(23,"svg",16),p(24,"path",17),n()()(),x(),i(25,"form",18),_("ngSubmit",function(){u(e);let s=d();return g(s.onTransfer())}),i(26,"div",19),_("click",function(s){return u(e),g(s.stopPropagation())}),i(27,"label",20),o(28,"New Location"),n(),i(29,"button",21),_("click",function(){u(e);let s=d();return g(s.showLocationDropdown=!s.showLocationDropdown)}),i(30,"div",22),v(31,Pr,2,0,"span",23)(32,Dr,2,1,"span",24),h(),i(33,"svg",25),p(34,"path",26),n()()(),v(35,Or,5,3,"div",27),n(),x(),i(36,"div",19),_("click",function(s){return u(e),g(s.stopPropagation())}),i(37,"label",20),o(38,"New Department"),n(),i(39,"button",21),_("click",function(){u(e);let s=d();return g(s.showDepartmentDropdown=!s.showDepartmentDropdown)}),i(40,"div",22),v(41,Fr,2,0,"span",23)(42,Hr,2,1,"span",24),h(),i(43,"svg",25),p(44,"path",26),n()()(),v(45,Rr,5,3,"div",27),n(),x(),i(46,"div",19),_("click",function(s){return u(e),g(s.stopPropagation())}),i(47,"label",20),o(48,"Transfer Reason *"),n(),i(49,"button",21),_("click",function(){u(e);let s=d();return g(s.showReasonDropdown=!s.showReasonDropdown)}),i(50,"div",22),v(51,Br,2,0,"span",23)(52,Nr,2,1,"span",24),h(),i(53,"svg",25),p(54,"path",26),n()()(),v(55,zr,5,3,"div",27),n(),x(),i(56,"div")(57,"label",28),o(58," Transfer Date * "),n(),i(59,"div",29)(60,"input",30,0),V("ngModelChange",function(s){u(e);let c=d();return T(c.transferData.transfer_date,s)||(c.transferData.transfer_date=s),g(s)}),n(),i(62,"div",31),h(),i(63,"svg",32),p(64,"path",33),n()()()(),x(),i(65,"div")(66,"label",34),o(67," Additional Notes "),n(),i(68,"textarea",35),V("ngModelChange",function(s){u(e);let c=d();return T(c.transferData.notes,s)||(c.transferData.notes=s),g(s)}),n()(),v(69,$r,8,1,"div",36),i(70,"div",37)(71,"button",38),_("click",function(){u(e);let s=d();return g(s.onCancel())}),o(72," Cancel "),n(),i(73,"button",39),v(74,Ur,2,0,"span",40)(75,qr,5,0,"span",41),n()()()()()()}if(a&2){let e=d();m("@backdropAnimation",void 0),l(3),m("@modalAnimation",void 0),l(3),C(" Transfer Asset: ",(e.asset==null?null:e.asset.name)||"Unknown Asset"," "),l(),m("disabled",e.loading),l(8),y(e.getCurrentLocationName()),l(5),y(e.getCurrentDepartmentName()),l(9),w("border-blue-500",e.showLocationDropdown),l(2),m("ngIf",!e.transferData.new_location_id),l(),m("ngIf",e.transferData.new_location_id),l(),w("rotate-180",e.showLocationDropdown),l(2),m("ngIf",e.showLocationDropdown),l(4),w("border-blue-500",e.showDepartmentDropdown),l(2),m("ngIf",!e.transferData.new_department_id),l(),m("ngIf",e.transferData.new_department_id),l(),w("rotate-180",e.showDepartmentDropdown),l(2),m("ngIf",e.showDepartmentDropdown),l(4),w("border-blue-500",e.showReasonDropdown),l(2),m("ngIf",!e.transferData.transfer_reason),l(),m("ngIf",e.transferData.transfer_reason),l(),w("rotate-180",e.showReasonDropdown),l(2),m("ngIf",e.showReasonDropdown),l(5),I("ngModel",e.transferData.transfer_date),m("disabled",e.loading),l(8),I("ngModel",e.transferData.notes),m("disabled",e.loading),l(),m("ngIf",e.error),l(2),m("disabled",e.loading),l(2),m("disabled",e.loading),l(),m("ngIf",!e.loading),l(),m("ngIf",e.loading)}}var je=class a{constructor(t){this.assetService=t}isOpen=!1;asset=null;closeModal=new Q;transferComplete=new Q;dateInput;flatpickrInstance;showLocationDropdown=!1;showDepartmentDropdown=!1;showReasonDropdown=!1;loading=!1;error="";transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""};locations=[];departments=[];users=[];transferReasons=["Relocation","Maintenance","Replacement","Department Transfer","User Assignment","Storage","Disposal","Other"];ngOnInit(){console.log("TransferAssetModalComponent initialized"),this.loadDropdownData()}ngOnChanges(){console.log("TransferAssetModalComponent changes:",{isOpen:this.isOpen,asset:this.asset}),this.isOpen&&setTimeout(()=>{this.initializeFlatpickr()},200)}ngAfterViewInit(){}ngOnDestroy(){this.destroyFlatpickr()}destroyFlatpickr(){if(this.flatpickrInstance)try{this.flatpickrInstance.destroy(),this.flatpickrInstance=null}catch(t){console.error("Error destroying flatpickr:",t)}}initializeFlatpickr(){try{this.destroyFlatpickr(),this.dateInput&&this.dateInput.nativeElement?(console.log("Initializing flatpickr on element:",this.dateInput.nativeElement),this.flatpickrInstance=xe(this.dateInput.nativeElement,{dateFormat:"Y-m-d",defaultDate:new Date,allowInput:!1,clickOpens:!0,minDate:new Date,locale:{firstDayOfWeek:1},onChange:(t,e)=>{console.log("Date selected:",e),this.transferData.transfer_date=e},onOpen:()=>{console.log("Flatpickr opened")},onClose:()=>{console.log("Flatpickr closed")}}),console.log("Flatpickr initialized successfully")):console.warn("Date input element not found")}catch(t){console.error("Error initializing flatpickr:",t)}}loadDropdownData(){console.log("Loading dropdown data..."),console.log("Calling locations API with pagination..."),this.assetService.getLocations(1,1e3,"created","desc").subscribe({next:t=>{console.log("Locations API response:",t),console.log("Response type:",typeof t),console.log("Response keys:",Object.keys(t)),t&&t.data&&t.data.locations?(this.locations=t.data.locations,console.log("Using response.data.locations (paginated):",this.locations),console.log("Response pagination:",t.data.pagination)):t&&t.data&&Array.isArray(t.data)?(this.locations=t.data,console.log("Using response.data as array:",this.locations)):Array.isArray(t)?(this.locations=t,console.log("Using response as array:",this.locations)):(this.locations=[],console.warn("Unexpected response format:",t),console.log("Response structure:",t)),console.log("Final locations array:",this.locations),console.log("Locations count:",this.locations.length),this.locations.length===0&&console.warn("No locations found in response")},error:t=>{console.error("Error loading locations:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),this.locations=[]}}),console.log("Calling departments API with pagination..."),this.assetService.getDepartments(1,1e3,"created","desc").subscribe({next:t=>{console.log("Departments API response:",t),t&&t.data&&t.data.departments?(this.departments=t.data.departments,console.log("Using response.data.departments (paginated):",this.departments),console.log("Response pagination:",t.data.pagination)):t&&t.data&&Array.isArray(t.data)?(this.departments=t.data,console.log("Using response.data as array:",this.departments)):Array.isArray(t)?this.departments=t:(this.departments=[],console.warn("Unexpected departments response format:",t),console.log("Response structure:",t)),console.log("Final departments array:",this.departments),console.log("Departments count:",this.departments.length),this.departments.length===0&&console.warn("No departments found")},error:t=>{console.error("Error loading departments:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),this.departments=[]}})}reloadLocationData(){console.log("Manually reloading location data..."),this.loadDropdownData()}onTransfer(){this.validateForm()&&(this.loading=!0,this.error="",this.assetService.transferAsset(this.asset.id,this.transferData).subscribe({next:t=>{this.loading=!1,this.transferComplete.emit(t),this.resetForm(),this.closeModal.emit()},error:t=>{this.loading=!1,this.error=t.error?.message||"Transfer failed. Please try again.",console.error("Transfer error:",t)}}))}onCancel(){this.loading||(this.destroyFlatpickr(),this.resetForm(),this.closeModal.emit())}validateForm(){return this.transferData.new_location_id?this.transferData.transfer_reason?this.transferData.transfer_date?this.asset?.location_id===this.transferData.new_location_id?(this.error="Transfer location must be different from current location.",!1):(this.error="",!0):(this.error="Please select a transfer date.",!1):(this.error="Please select a transfer reason.",!1):(this.error="Please select a new location.",!1)}resetForm(){this.transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""},this.error=""}getCurrentLocationName(){return this.asset?.location?.name||"No location assigned"}getCurrentDepartmentName(){return this.asset?.department?.name||"No department assigned"}getLocationNameById(t){if(!t)return"";let e=this.locations.find(r=>r.id===t);return e?e.full_path?e.full_path:Array.isArray(e.complete_hierarchy)&&e.complete_hierarchy.length>0?e.complete_hierarchy.map(r=>r.name).join(" \u2192 "):Array.isArray(e.ancestors_with_details)&&e.ancestors_with_details.length>0?e.ancestors_with_details.map(r=>r.name).join(" \u2192 ")+" \u2192 "+(e.name||""):e.name||"":""}getLocationLabel(t){return t?t.full_path?t.full_path:Array.isArray(t.complete_hierarchy)&&t.complete_hierarchy.length>0?t.complete_hierarchy.map(e=>e.name).join(" \u2192 "):Array.isArray(t.ancestors_with_details)&&t.ancestors_with_details.length>0?t.ancestors_with_details.map(e=>e.name).join(" \u2192 ")+" \u2192 "+(t.name||""):t.name||"":""}getDepartmentNameById(t){if(!t)return"";let e=this.departments.find(r=>r.id===t);return e?e.name:""}getLocationsCount(){return this.locations.length}getDepartmentsCount(){return this.departments.length}getUsersCount(){return this.users.length}onModalClick(t){t.target===t.currentTarget&&(this.showLocationDropdown=!1,this.showDepartmentDropdown=!1,this.showReasonDropdown=!1)}static \u0275fac=function(e){return new(e||a)(M(Z))};static \u0275cmp=R({type:a,selectors:[["app-transfer-asset-modal"]],viewQuery:function(e,r){if(e&1&&K(Vr,5),e&2){let s;ee(s=te())&&(r.dateInput=s.first)}},inputs:{isOpen:"isOpen",asset:"asset"},outputs:{closeModal:"closeModal",transferComplete:"transferComplete"},features:[$e],decls:1,vars:1,consts:[["dateInput",""],["class","fixed inset-0 overflow-y-auto","style","z-index: 1000;",3,"click",4,"ngIf"],[1,"fixed","inset-0","overflow-y-auto",2,"z-index","1000",3,"click"],[1,"flex","items-center","justify-center","min-h-screen","px-4","pt-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity","z-0","bg-[#00000085]"],[1,"inline-block","w-full","max-w-2xl","z-1","p-6","my-8","relative","overflow-hidden","text-left","align-middle","transition-all","transform","bg-white","shadow-xl","rounded-2xl",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","justify-center","mb-6"],[1,"w-8","h-8","bg-blue-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 14l-7 7m0 0l-7-7m7 7V3"],[1,"space-y-4",3,"ngSubmit"],[1,"relative",3,"click"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["for","transfer_date",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["type","text","id","transfer_date","name","transfer_date","placeholder","Select date","required","","readonly","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","cursor-pointer",3,"ngModelChange","ngModel","disabled"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-4","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["for","notes",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","notes","name","notes","rows","3","placeholder","Enter any additional notes about this transfer...",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","resize-none",3,"ngModelChange","ngModel","disabled"],["class","bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-6"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click","disabled"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-gray-400"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","disabled","click",4,"ngFor","ngForOf"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click","disabled"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&v(0,Wr,76,36,"div",1),e&2&&m("ngIf",r.isOpen)},dependencies:[N,X,B,$,ve,G,z,he,Pe,Y,Xe],styles:[".transfer-asset-modal[_ngcontent-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-height:90vh;overflow-y:auto}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;cursor:not-allowed}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-image:none!important;-webkit-appearance:none;-moz-appearance:none;appearance:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px 12px;background-color:#fff;color:#374151}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:#9ca3af;background-color:#f9fafb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 10px 25px #00000026;border:1px solid #e5e7eb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]{border-radius:4px}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day.selected[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   .transfer-arrow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.transfer-asset-modal[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.transfer-asset-modal[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100vw - 2rem)}}"],data:{animation:[me("backdropAnimation",[W(":enter",[F({opacity:0}),q("150ms ease-out",F({opacity:1}))]),W(":leave",[q("150ms ease-in",F({opacity:0}))])]),me("modalAnimation",[W(":enter",[F({opacity:0,transform:"scale(0.7) translateY(-50px)"}),q("200ms ease-out",F({opacity:1,transform:"scale(1) translateY(0)"}))]),W(":leave",[q("150ms ease-in",F({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var zt=xt(Tt());var Qr=["dateInput"],Yr=a=>["/locations",a],Zr=a=>["/assets/preview",a],Jr=()=>["all","category","location","department","manufacturer","parent","children","siblings","similar"];function Xr(a,t){if(a&1){let e=b();i(0,"div",29)(1,"button",30),_("click",function(){u(e);let s=d();return s.transferAsset(),g(s.showActionsDropdown=!1)}),h(),i(2,"svg",31),p(3,"path",32),n(),x(),i(4,"span",33),o(5,"Transfer Asset"),n()(),i(6,"button",30),_("click",function(){u(e);let s=d();return s.duplicateAsset(),g(s.showActionsDropdown=!1)}),h(),i(7,"svg",31),p(8,"path",34),n(),x(),i(9,"span",33),o(10,"Duplicate"),n()(),p(11,"div",35),i(12,"button",30),_("click",function(){u(e);let s=d();return s.printAsset(),g(s.showActionsDropdown=!1)}),h(),i(13,"svg",31),p(14,"path",36),n(),x(),i(15,"span",33),o(16,"Print"),n()(),i(17,"button",30),_("click",function(){u(e);let s=d();return s.exportAsset(),g(s.showActionsDropdown=!1)}),h(),i(18,"svg",31),p(19,"path",37),n(),x(),i(20,"span",33),o(21,"Export"),n()(),i(22,"button",30),_("click",function(){u(e);let s=d();return s.sharePublicUrl(),g(s.showActionsDropdown=!1)}),h(),i(23,"svg",31),p(24,"path",38),n(),x(),i(25,"span",33),o(26,"Share Public URL"),n()()()}if(a&2){let e=d();w("right-0",!e.isRtl())("left-0",e.isRtl()),l(),w("text-left",!e.isRtl())("text-right",e.isRtl()),l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl()),l(4),w("text-left",!e.isRtl())("text-right",e.isRtl()),l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl()),l(5),w("text-left",!e.isRtl())("text-right",e.isRtl()),l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl()),l(4),w("text-left",!e.isRtl())("text-right",e.isRtl()),l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl()),l(4),w("text-left",!e.isRtl())("text-right",e.isRtl()),l(),w("mr-3",!e.isRtl())("ml-3",e.isRtl())}}function Kr(a,t){a&1&&(i(0,"div",39)(1,"div",40)(2,"div",41),h(),i(3,"svg",42),p(4,"circle",43)(5,"path",44),n()(),x(),i(6,"h3",45),o(7,"Loading Asset"),n(),i(8,"p",46),o(9,"Please wait while we fetch the asset details..."),n()()())}function ea(a,t){if(a&1){let e=b();i(0,"div",39)(1,"div",40)(2,"div",47),h(),i(3,"svg",48),p(4,"path",49),n()(),x(),i(5,"h3",45),o(6,"Error Loading Asset"),n(),i(7,"p",50),o(8),n(),i(9,"button",51),_("click",function(){u(e);let s=d();return g(s.goBack())}),o(10," Back to Assets "),n()()()}if(a&2){let e=d();l(8),y(e.error)}}function ta(a,t){if(a&1&&(i(0,"span",183),o(1),n()),a&2){let e=d(2);H("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),l(),C(" ",e.asset.asset_status.name," ")}}function ia(a,t){if(a&1&&(i(0,"span",184),o(1),n()),a&2){let e=d(2);m("ngClass",e.getCriticalityBadgeClass(e.asset.criticality_level)),l(),C(" ",e.asset.criticality_level," Criticality ")}}function na(a,t){if(a&1){let e=b();i(0,"div",7)(1,"span",46),o(2,"Serial:"),n(),i(3,"button",66),_("click",function(){u(e);let s=d(2);return g(s.copySerialNumber())}),i(4,"span"),o(5),n(),h(),i(6,"svg",67),p(7,"path",34),n()()()}if(a&2){let e=d(2);l(5),y(e.asset.serial_number)}}function ra(a,t){if(a&1){let e=b();i(0,"button",193),_("click",function(){u(e);let s=d(3);return g(s.previousImage())}),h(),i(1,"svg",18),p(2,"path",194),n()()}if(a&2){let e=d(3);w("left-2",!e.isRtl())("right-2",e.isRtl())}}function aa(a,t){if(a&1){let e=b();i(0,"button",193),_("click",function(){u(e);let s=d(3);return g(s.nextImage())}),h(),i(1,"svg",18),p(2,"path",10),n()()}if(a&2){let e=d(3);w("right-2",!e.isRtl())("left-2",e.isRtl())}}function oa(a,t){if(a&1&&(i(0,"div",195),o(1),n()),a&2){let e=d(3);l(),C(" ",e.asset.images[e.currentImageIndex].caption," ")}}function sa(a,t){if(a&1&&(i(0,"div",201),o(1),n()),a&2){let e=d().$implicit;l(),C(" ",e.caption," ")}}function la(a,t){if(a&1){let e=b();i(0,"div",198),_("click",function(){let s=u(e).index,c=d(4);return g(c.selectImage(s))}),i(1,"img",199),_("error",function(s){u(e);let c=d(4);return g(c.onImageError(s))}),n(),v(2,sa,2,1,"div",200),n()}if(a&2){let e=t.$implicit,r=t.index,s=d(4);w("border-blue-500",r===s.currentImageIndex)("border-gray-200",r!==s.currentImageIndex),l(),m("src",e.image_url,L)("alt",e.caption||"Asset image "+(r+1)),l(),m("ngIf",e.caption)}}function ca(a,t){if(a&1&&(i(0,"div",196),v(1,la,3,7,"div",197),n()),a&2){let e=d(3);l(),m("ngForOf",e.asset.images)}}function da(a,t){if(a&1){let e=b();i(0,"div")(1,"div",185)(2,"div",186)(3,"img",187),_("click",function(){u(e);let s=d(2);return g(s.viewFullImage(s.selectedImageUrl||s.asset.images[0].image_url))})("error",function(s){u(e);let c=d(2);return g(c.onImageError(s))}),n(),v(4,ra,3,4,"button",188)(5,aa,3,4,"button",189),i(6,"div",190),o(7),n()(),v(8,oa,2,1,"div",191),n(),v(9,ca,2,1,"div",192),n()}if(a&2){let e=d(2);l(3),m("src",e.selectedImageUrl||e.asset.images[0].image_url,L)("alt",e.asset.name),l(),m("ngIf",e.asset.images.length>1),l(),m("ngIf",e.asset.images.length>1),l(),w("right-4",!e.isRtl())("left-4",e.isRtl()),l(),A(" ",e.currentImageIndex+1," / ",e.asset.images.length," "),l(),m("ngIf",e.asset.images[e.currentImageIndex]==null?null:e.asset.images[e.currentImageIndex].caption),l(),m("ngIf",e.asset.images.length>1)}}function ma(a,t){a&1&&(i(0,"div",202),h(),i(1,"svg",203),p(2,"path",74),n(),x(),i(3,"h3",45),o(4,"No Images Available"),n(),i(5,"p",204),o(6,"No images have been uploaded for this asset."),n()())}function pa(a,t){if(a&1){let e=b();i(0,"button",205),_("click",function(){u(e);let s=d(2);return g(s.descriptionExpanded=!s.descriptionExpanded)}),o(1),n()}if(a&2){let e=d(2);l(),C(" ",e.descriptionExpanded?"Show Less":"Show More"," ")}}function ua(a,t){if(a&1){let e=b();i(0,"img",206),_("error",function(s){u(e);let c=d(2);return g(c.onCategoryIconError(s,c.asset.category))}),n()}if(a&2){let e=d(2);m("src",e.asset.category.icon,L)("alt",e.asset.category.name)}}function ga(a,t){a&1&&(h(),i(0,"svg",167),p(1,"path",207),n())}function _a(a,t){if(a&1&&(i(0,"div",7)(1,"span",208),o(2),n()()),a&2){let e=d(2);l(),H("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),l(),C(" ",e.asset.asset_status.name," ")}}function fa(a,t){a&1&&(i(0,"span",100),o(1,"Not specified"),n())}function ha(a,t){a&1&&(i(0,"div",209),o(1," No parts added "),n())}function va(a,t){if(a&1&&(i(0,"span"),o(1),D(2,"number"),n()),a&2){let e=d().$implicit,r=d(3);l(),A("\u2022 ",r.currencySymbol," ",O(2,2,e.unit_cost||(e.part==null?null:e.part.unit_cost)||0,"1.2-2")," each")}}function xa(a,t){if(a&1){let e=b();i(0,"div",212)(1,"div",213)(2,"div",214),o(3),n(),i(4,"div",215),o(5),v(6,va,3,5,"span",103),n()(),i(7,"div",216)(8,"span",217),o(9),D(10,"number"),n(),i(11,"button",218),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.removePart(s.id))}),h(),i(12,"svg",14),p(13,"path",219),n()()()()}if(a&2){let e=t.$implicit,r=d(3);l(3),y((e.part==null?null:e.part.name)||"Unknown Part"),l(2),A(" ",e.qty," ",(e.part==null?null:e.part.uom)||"each"," "),l(),m("ngIf",e.unit_cost||(e.part==null?null:e.part.unit_cost)),l(3),A(" ",r.currencySymbol," ",O(10,6,(e.unit_cost||(e.part==null?null:e.part.unit_cost)||0)*e.qty,"1.2-2")," ")}}function ya(a,t){if(a&1&&(i(0,"div",220)(1,"span",89),o(2,"Total Cost:"),n(),i(3,"span",221),o(4),D(5,"number"),n()()),a&2){let e=d(3);l(4),A("",e.currencySymbol," ",O(5,2,e.getTotalPartsCost(),"1.2-2"),"")}}function ba(a,t){if(a&1&&(i(0,"div",177),v(1,xa,14,9,"div",210)(2,ya,6,5,"div",211),n()),a&2){let e=d(2);l(),m("ngForOf",e.assetParts),l(),m("ngIf",e.assetParts.length>0)}}function wa(a,t){a&1&&(i(0,"div",209),o(1," No documents uploaded "),n())}function Ca(a,t){if(a&1&&(i(0,"span"),o(1),D(2,"numberFormat"),n()),a&2){let e,r=d().$implicit;l(),C("\u2022 ",O(2,1,((e=r.file_size)!==null&&e!==void 0?e:0)/1024/1024,2)," MB")}}function Sa(a,t){if(a&1&&(i(0,"div",212)(1,"div",213)(2,"div",214),o(3),n(),i(4,"div",215),o(5),v(6,Ca,3,4,"span",103),n()(),i(7,"div",222)(8,"a",223),o(9," Download "),n()()()),a&2){let e=t.$implicit,r=d(3);l(3),y(e.document_name),l(2),C(" ",r.getDocumentTypeLabel(e.document_type)," "),l(),m("ngIf",e.file_size),l(2),m("href",e.document_url,L)}}function Ea(a,t){if(a&1&&(i(0,"div",177),v(1,Sa,10,4,"div",210),n()),a&2){let e=d(2);l(),m("ngForOf",e.assetDocuments)}}function Aa(a,t){if(a&1&&(i(0,"a",224),o(1),n()),a&2){let e=d(2);m("routerLink",ht(2,Yr,e.asset.location.id)),l(),C(" ",e.asset.location.name," ")}}function Ma(a,t){if(a&1&&(i(0,"span",100),o(1),n()),a&2){let e=d(2);l(),y((e.asset==null||e.asset.location==null?null:e.asset.location.name)||"No location assigned")}}function ka(a,t){if(a&1&&(i(0,"div")(1,"h4",80),o(2,"Parent Asset"),n(),i(3,"a",224),o(4),n()()),a&2){let e=d(2);l(3),m("routerLink",ht(3,Zr,e.asset.parent.id)),l(),A(" ",e.asset.parent.name," (",e.asset.parent.asset_id,") ")}}function Ia(a,t){if(a&1&&p(0,"img",225),a&2){let e=d(2);m("src",e.qrCodeDataUrl,L)}}function Ta(a,t){if(a&1&&p(0,"img",225),a&2){let e=d(2);m("src",e.asset.qr_code_url,L)}}function Va(a,t){a&1&&(i(0,"div",226),p(1,"div",227),n())}function Pa(a,t){if(a&1&&(i(0,"div",40),h(),i(1,"svg",228),p(2,"path",229),n(),x(),i(3,"p",230),o(4),n()()),a&2){let e=d(2);l(4),y(e.asset.asset_id||e.asset.id)}}function Da(a,t){a&1&&(i(0,"div",231),h(),i(1,"svg",232),p(2,"path",49),n(),x(),i(3,"p",233),o(4,"No Asset ID"),n()())}function La(a,t){if(a&1){let e=b();i(0,"button",234),_("click",function(){u(e);let s=d(2);return g(s.downloadQRCode())}),o(1," Download "),n()}}function Oa(a,t){if(a&1){let e=b();i(0,"button",235),_("click",function(){u(e);let s=d(2);return g(s.copyPublicUrl())}),o(1," Copy URL "),n()}}function Fa(a,t){if(a&1&&p(0,"img",236),a&2){let e=d(2);m("src",e.asset.barcode_url,L)}}function Ha(a,t){if(a&1&&p(0,"img",236),a&2){let e=d(2);m("src",e.barcodeDataUrl,L)}}function ja(a,t){a&1&&(i(0,"div",237),p(1,"div",227),n())}function Ra(a,t){if(a&1&&(i(0,"div",238),h(),i(1,"svg",239),p(2,"path",78),n(),x(),i(3,"p",230),o(4),n()()),a&2){let e=d(2);l(4),y(e.asset.asset_id)}}function Ba(a,t){a&1&&(i(0,"div",240),h(),i(1,"svg",232),p(2,"path",49),n(),x(),i(3,"p",233),o(4,"No Asset ID"),n()())}function Na(a,t){if(a&1){let e=b();i(0,"button",234),_("click",function(){u(e);let s=d(2);return g(s.downloadBarcode())}),o(1," Download "),n()}}function Ga(a,t){if(a&1){let e=b();i(0,"button",241),_("click",function(){u(e);let s=d(2);return g(s.copyAssetId())}),o(1," Copy ID "),n()}}function za(a,t){if(a&1&&(i(0,"p",242),o(1),n()),a&2){let e=d(2);l(),y(e.asset.asset_id)}}function $a(a,t){if(a&1&&(i(0,"span",243),o(1),n()),a&2){let e=d(3);l(),C(" ",e.asset.asset_status.description," ")}}function Ua(a,t){if(a&1&&(i(0,"div",7)(1,"span",208),o(2),n(),v(3,$a,2,1,"span",182),n()),a&2){let e=d(2);l(),H("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),l(),C(" ",e.asset.asset_status.name," "),l(),m("ngIf",e.asset.asset_status.description)}}function qa(a,t){a&1&&(i(0,"span",100),o(1,"Not specified"),n())}function Wa(a,t){if(a&1){let e=b();i(0,"div")(1,"h4",124),o(2,"Serial Number"),n(),i(3,"div",7)(4,"span",244),_("click",function(){u(e);let s=d(2);return g(s.copySerialNumber())}),o(5),n(),i(6,"button",245),_("click",function(){u(e);let s=d(2);return g(s.copySerialNumber())}),h(),i(7,"svg",14),p(8,"path",34),n()()()()}if(a&2){let e=d(2);l(5),y(e.asset.serial_number)}}function Qa(a,t){if(a&1&&(i(0,"div",249)(1,"span",64),o(2),n(),i(3,"span",250),o(4),n()()),a&2){let e=t.$implicit;l(2),C("",e.key,":"),l(2),y(e.value)}}function Ya(a,t){if(a&1&&(i(0,"div",246)(1,"h4",176),o(2,"Additional Specifications"),n(),i(3,"div",247),v(4,Qa,5,2,"div",248),D(5,"keyvalue"),n()()),a&2){let e=d(2);l(4),m("ngForOf",ie(5,1,e.asset.specifications))}}function Za(a,t){if(a&1&&(i(0,"div",251)(1,"div",163)(2,"div",147),o(3,"Average Health Score"),n(),i(4,"div",252),o(5),n()(),i(6,"div",149)(7,"div",147),o(8,"Average Performance"),n(),i(9,"div",150),o(10),n()(),i(11,"div",180)(12,"div",147),o(13,"Total Maintenance"),n(),i(14,"div",253),o(15),n()()()),a&2){let e=d(2);l(5),C("",e.healthPerformanceChartData.chart_data.metrics.average_health_score," % "),l(5),C("",e.healthPerformanceChartData.chart_data.metrics.average_performance_score," % "),l(5),C("",e.healthPerformanceChartData.chart_data.metrics.total_maintenance_count," ")}}function Ja(a,t){a&1&&(i(0,"div",254)(1,"div",40)(2,"div",255),h(),i(3,"svg",256),p(4,"circle",43)(5,"path",44),n()(),x(),i(6,"p",46),o(7,"Loading health & performance data..."),n()()())}function Xa(a,t){if(a&1){let e=b();i(0,"div",257)(1,"div",40)(2,"div",258),o(3),n(),i(4,"button",157),_("click",function(){u(e);let s=d(2);return g(s.loadHealthPerformanceChart())}),o(5," Try Again "),n()()()}if(a&2){let e=d(2);l(3),y(e.healthPerformanceChartError)}}function Ka(a,t){a&1&&(i(0,"div",259),p(1,"canvas",260),n())}function eo(a,t){a&1&&(i(0,"div",261),o(1," Green: Health Score | Blue: Performance Score | Orange: Maintenance Count "),n())}function to(a,t){if(a&1&&(i(0,"div",262)(1,"div",152)(2,"div",64),o(3,"Health Trend"),n(),i(4,"div",263),o(5),n()(),i(6,"div",152)(7,"div",64),o(8,"Performance Trend"),n(),i(9,"div",263),o(10),n()()()),a&2){let e=d(2);l(4),m("ngClass",e.healthPerformanceChartData.chart_data.metrics.health_trend>=0?"text-green-600":"text-red-600"),l(),A(" ",e.healthPerformanceChartData.chart_data.metrics.health_trend>=0?"+":"","",e.healthPerformanceChartData.chart_data.metrics.health_trend," % "),l(4),m("ngClass",e.healthPerformanceChartData.chart_data.metrics.performance_trend>=0?"text-green-600":"text-red-600"),l(),A(" ",e.healthPerformanceChartData.chart_data.metrics.performance_trend>=0?"+":"","",e.healthPerformanceChartData.chart_data.metrics.performance_trend," % ")}}function io(a,t){a&1&&(i(0,"div",254)(1,"div",40)(2,"div",264),h(),i(3,"svg",265),p(4,"circle",43)(5,"path",44),n()(),x(),i(6,"p",46),o(7,"Loading chart data..."),n()()())}function no(a,t){if(a&1){let e=b();i(0,"div",257)(1,"div",40)(2,"div",258),o(3),n(),i(4,"button",157),_("click",function(){u(e);let s=d(2);return g(s.loadDepreciationChart())}),o(5," Try Again "),n()()()}if(a&2){let e=d(2);l(3),y(e.depreciationChartError)}}function ro(a,t){a&1&&(i(0,"div",259),p(1,"canvas",266),n())}function ao(a,t){a&1&&(i(0,"div",261),o(1," Blue line: Asset Value | Red line: Accumulated Depreciation "),n())}function oo(a,t){a&1&&(i(0,"div",267)(1,"div",40)(2,"div",264),h(),i(3,"svg",265),p(4,"circle",43)(5,"path",44),n()(),x(),i(6,"p",46),o(7,"Loading activities..."),n()()())}function so(a,t){if(a&1){let e=b();i(0,"div",268)(1,"div",258),o(2),n(),i(3,"button",157),_("click",function(){u(e);let s=d(2);return g(s.loadActivityHistory())}),o(4," Try Again "),n()()}if(a&2){let e=d(2);l(2),y(e.activityError)}}function lo(a,t){if(a&1&&(i(0,"div",276),o(1),n()),a&2){let e=d().$implicit,r=d(3);l(),C(" ",r.formatActivityBeforeAfter(e.before,e.after)," ")}}function co(a,t){if(a&1&&(i(0,"div",277)(1,"strong"),o(2,"By:"),n(),o(3),n()),a&2){let e=d().$implicit,r=d(3);l(3),C(" ",r.getUserDisplayName(e.user)," ")}}function mo(a,t){if(a&1&&(i(0,"div",270)(1,"div",271),h(),i(2,"svg",14),p(3,"path",57),n()(),x(),i(4,"div",213)(5,"div",272)(6,"h4",273),o(7),n(),i(8,"span",243),o(9),n()(),i(10,"p",147),o(11),n(),v(12,lo,2,1,"div",274)(13,co,4,1,"div",275),n()()),a&2){let e=t.$implicit,r=d(3);l(),m("ngClass",r.getActivityColor(e.action)),l(2),qe("d",r.getActivityIcon(e.action)),l(4),y(e.action),l(2),y(e.time_ago),l(2),y(e.comment||"No comment"),l(),m("ngIf",r.formatActivityBeforeAfter(e.before,e.after)),l(),m("ngIf",e.user)}}function po(a,t){a&1&&(i(0,"div",268),h(),i(1,"svg",278),p(2,"path",102),n(),x(),i(3,"h3",45),o(4,"No Recent Activity"),n(),i(5,"p",204),o(6,"No activity has been recorded for this asset yet."),n()())}function uo(a,t){if(a&1&&(i(0,"div",123),v(1,mo,14,7,"div",269)(2,po,7,0,"div",154),n()),a&2){let e=d(2);l(),m("ngForOf",e.activities),l(),m("ngIf",e.activities.length===0)}}function go(a,t){if(a&1){let e=b();i(0,"button",30),_("click",function(){let s=u(e).$implicit,c=d(3);return c.onRelatedFilterChange(s),g(c.showRelatedFilterDropdown=!1)}),i(1,"span",280),o(2),n()()}if(a&2){let e=t.$implicit,r=d(3);w("text-left",!r.isRtl())("text-right",r.isRtl())("text-blue-600",r.selectedRelatedFilter===e)("bg-blue-50",r.selectedRelatedFilter===e),l(2),y(r.getRelatedFilterDisplayName(e))}}function _o(a,t){if(a&1&&(i(0,"div",29),v(1,go,3,9,"button",279),n()),a&2){let e=d(2);w("right-0",!e.isRtl())("left-0",e.isRtl()),l(),m("ngForOf",ce(5,Jr))}}function fo(a,t){a&1&&(i(0,"div",267)(1,"div",40)(2,"div",264),h(),i(3,"svg",265),p(4,"circle",43)(5,"path",44),n()(),x(),i(6,"p",46),o(7,"Loading related assets..."),n()()())}function ho(a,t){if(a&1){let e=b();i(0,"div",268)(1,"div",258),o(2),n(),i(3,"button",157),_("click",function(){u(e);let s=d(2);return g(s.loadRelatedAssets())}),o(4," Try Again "),n()()}if(a&2){let e=d(2);l(2),y(e.relatedAssetsError)}}function vo(a,t){if(a&1){let e=b();i(0,"img",293),_("error",function(s){u(e);let c=d(4);return g(c.onImageError(s))}),n()}if(a&2){let e=d().$implicit;m("src",e.images[0].image_url,L)("alt",e.name)}}function xo(a,t){a&1&&(h(),i(0,"svg",294),p(1,"path",295),n())}function yo(a,t){if(a&1&&(i(0,"span",243),o(1),n()),a&2){let e=d().$implicit;l(),C(" Health: ",e.health_score,"% ")}}function bo(a,t){if(a&1){let e=b();i(0,"div",283),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.navigateToRelatedAsset(s.id))}),i(1,"div",284),v(2,vo,1,2,"img",285)(3,xo,2,0,"svg",286),n(),i(4,"div",287)(5,"div",272)(6,"h4",288),o(7),n(),i(8,"span",243),o(9),n()(),i(10,"div",289)(11,"span",178),o(12),n(),i(13,"span",290),o(14,"\u2022"),n(),i(15,"span",178),o(16),n()(),i(17,"div",7)(18,"span",291),o(19),n(),v(20,yo,2,1,"span",182),n()(),h(),i(21,"svg",292),p(22,"path",10),n()()}if(a&2){let e=t.$implicit,r=d(3);l(2),m("ngIf",e.images&&e.images.length>0),l(),m("ngIf",!e.images||e.images.length===0),l(4),y(e.name),l(2),y(e.asset_id),l(3),y((e.category==null?null:e.category.name)||"General"),l(4),y((e.asset_type==null?null:e.asset_type.name)||e.type),l(2),m("ngClass",r.getRelatedAssetStatusColor(e.asset_status||e.status)),l(),C(" ",(e.asset_status==null?null:e.asset_status.name)||e.status," "),l(),m("ngIf",e.health_score)}}function wo(a,t){a&1&&(i(0,"div",268),h(),i(1,"svg",278),p(2,"path",295),n(),x(),i(3,"h3",45),o(4,"No Related Assets"),n(),i(5,"p",204),o(6,"No related assets found for this item."),n()())}function Co(a,t){if(a&1&&(i(0,"div",281),v(1,bo,23,9,"div",282)(2,wo,7,0,"div",154),n()),a&2){let e=d(2);l(),m("ngForOf",e.relatedAssets),l(),m("ngIf",e.relatedAssets.length===0)}}function So(a,t){a&1&&(i(0,"div",296)(1,"div",297),h(),i(2,"svg",298),p(3,"circle",43)(4,"path",44),n()(),x(),i(5,"p",277),o(6,"Loading..."),n()())}function Eo(a,t){if(a&1&&(i(0,"div",309),o(1),n()),a&2){let e=d().$implicit;l(),C(" ",e.notes," ")}}function Ao(a,t){if(a&1){let e=b();i(0,"div",300)(1,"div",88)(2,"h4",301),o(3),n(),i(4,"div",302)(5,"span"),o(6),n(),i(7,"button",303),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.editMaintenanceSchedule(s))}),h(),i(8,"svg",67),p(9,"path",15),n()(),x(),i(10,"button",304),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.deleteMaintenanceSchedule(s))}),h(),i(11,"svg",67),p(12,"path",305),n()()()(),x(),i(13,"div",306)(14,"div")(15,"span",204),o(16,"Next Due:"),n(),i(17,"span",307),o(18),n()(),i(19,"div")(20,"span",204),o(21,"Frequency:"),n(),i(22,"span",307),o(23),n()()(),v(24,Eo,2,1,"div",308),n()}if(a&2){let e=t.$implicit,r=d(3);l(3),y(e.schedule_type),l(2),U("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+r.getScheduleStatusColor(e.status)+"-100 text-"+r.getScheduleStatusColor(e.status)+"-800"),l(),C(" ",e.status," "),l(12),y(r.formatDate(e.next_due)),l(5),y(e.frequency||"Not specified"),l(),m("ngIf",e.notes)}}function Mo(a,t){if(a&1&&(i(0,"div",281),v(1,Ao,25,7,"div",299),n()),a&2){let e=d(2);l(),m("ngForOf",e.maintenanceSchedules)}}function ko(a,t){if(a&1){let e=b();i(0,"div",296),h(),i(1,"svg",310),p(2,"path",101),n(),x(),i(3,"h3",311),o(4,"No Maintenance Schedules"),n(),i(5,"p",312),o(6,"Create maintenance schedules to track asset upkeep."),n(),i(7,"button",313),_("click",function(){u(e);let s=d(2);return g(s.addMaintenanceSchedule())}),o(8," Add First Schedule "),n()()}}function Io(a,t){if(a&1&&(i(0,"span",243),o(1),D(2,"dateFormat"),n()),a&2){let e=d(2);l(),C(" (Expires: ",ie(2,1,e.asset.warranty),") ")}}function To(a,t){if(a&1){let e=b();i(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",5)(4,"div",55),h(),i(5,"svg",56),p(6,"path",57),n()(),x(),i(7,"div")(8,"h1",58),o(9),n(),i(10,"div",59),v(11,ta,2,5,"span",60)(12,ia,2,2,"span",61),i(13,"span",62),o(14),n(),i(15,"span",62),o(16,"\u2022"),n(),i(17,"span",62),o(18),n()(),i(19,"div",63)(20,"span",64)(21,"strong"),o(22,"Asset Code:"),n(),o(23),n()()()(),i(24,"div")(25,"div",65)(26,"span",46),o(27,"Asset ID:"),n(),i(28,"button",66),_("click",function(){u(e);let s=d();return g(s.copyAssetId())}),i(29,"span"),o(30),n(),h(),i(31,"svg",67),p(32,"path",34),n()()(),v(33,na,8,1,"div",68),n()()(),x(),i(34,"div",69)(35,"div",70)(36,"div",71)(37,"div",72),h(),i(38,"svg",73),p(39,"path",74),n(),x(),i(40,"h2",75),o(41,"Asset Images"),n()(),v(42,da,10,12,"div",76)(43,ma,7,0,"ng-template",null,0,We),n(),i(45,"div",71)(46,"div",77),h(),i(47,"svg",73),p(48,"path",78),n(),x(),i(49,"h2",75),o(50,"Basic Information"),n()(),i(51,"div",69)(52,"div",79)(53,"div")(54,"h4",80),o(55,"Asset Name"),n(),i(56,"p",75),o(57),n()(),i(58,"div")(59,"h4",80),o(60,"Description"),n(),i(61,"div",81)(62,"p",82),o(63),n(),v(64,pa,2,1,"button",83),n()(),i(65,"div")(66,"h4",80),o(67,"Category"),n(),i(68,"div",12)(69,"div",84),v(70,ua,1,2,"img",85)(71,ga,2,0,"svg",86),n(),i(72,"span",11),o(73),n()()(),i(74,"div")(75,"h4",80),o(76,"Status"),n(),v(77,_a,3,5,"div",68)(78,fa,2,0,"span",87),n(),i(79,"div")(80,"div",88)(81,"h4",89),o(82,"Parts & Materials"),n(),i(83,"button",90),_("click",function(){u(e);let s=d();return g(s.openPartsModal())}),h(),i(84,"svg",14),p(85,"path",91),n(),o(86," Add Parts "),n()(),v(87,ha,2,0,"div",92)(88,ba,3,2,"div",93),n(),x(),i(89,"div")(90,"div",88)(91,"h4",89),o(92,"Documents"),n()(),v(93,wa,2,0,"div",92)(94,Ea,2,1,"div",93),n()(),i(95,"div",79)(96,"div")(97,"h4",80),o(98,"Asset ID"),n(),i(99,"div",7)(100,"span",94),_("click",function(){u(e);let s=d();return g(s.copyAssetId())}),o(101),n(),i(102,"button",95),_("click",function(){u(e);let s=d();return g(s.copyAssetId())}),h(),i(103,"svg",14),p(104,"path",34),n()()()(),x(),i(105,"div")(106,"h4",80),o(107,"Location"),n(),i(108,"div",7),h(),i(109,"svg",96),p(110,"path",97)(111,"path",98),n(),v(112,Aa,2,4,"a",99)(113,Ma,2,1,"span",87),n()(),x(),i(114,"div")(115,"h4",80),o(116,"Department"),n(),i(117,"span",100),o(118),n()(),i(119,"div")(120,"h4",80),o(121,"Created"),n(),i(122,"div",7),h(),i(123,"svg",96),p(124,"path",101),n(),x(),i(125,"span",100),o(126),D(127,"dateFormat"),n()()(),i(128,"div")(129,"h4",80),o(130,"Last Modified"),n(),i(131,"div",7),h(),i(132,"svg",96),p(133,"path",102),n(),x(),i(134,"span",100),o(135),D(136,"dateFormat"),n()()(),v(137,ka,5,5,"div",103),n(),i(138,"div",79)(139,"div")(140,"h4",80),o(141,"QR Code"),n(),i(142,"div",104)(143,"div",105),v(144,Ia,1,1,"img",106)(145,Ta,1,1,"img",106)(146,Va,2,0,"div",107)(147,Pa,5,1,"div",108)(148,Da,5,0,"div",109),n(),i(149,"div",110),v(150,La,2,0,"button",111)(151,Oa,2,0,"button",112),n(),i(152,"div",113)(153,"p"),o(154,"Scan to access public page"),n()()()(),i(155,"div")(156,"h4",80),o(157,"Barcode"),n(),i(158,"div",104)(159,"div",114),v(160,Fa,1,1,"img",115)(161,Ha,1,1,"img",115)(162,ja,2,0,"div",116)(163,Ra,5,1,"div",117)(164,Ba,5,0,"div",118),n(),i(165,"div",110),v(166,Na,2,0,"button",111)(167,Ga,2,0,"button",119),n(),i(168,"div",113)(169,"p"),o(170,"Scan for asset identification"),n(),v(171,za,2,1,"p",120),n()()()()()(),i(172,"div",71)(173,"div",72),h(),i(174,"svg",73),p(175,"path",121),n(),x(),i(176,"h2",75),o(177,"Technical Specifications"),n()(),i(178,"div",122)(179,"div",123)(180,"div")(181,"h4",124),o(182,"Asset Status"),n(),v(183,Ua,4,6,"div",68)(184,qa,2,0,"span",87),n(),i(185,"div")(186,"h4",124),o(187,"Manufacturer"),n(),i(188,"span",100),o(189),n()(),i(190,"div")(191,"h4",124),o(192,"Model"),n(),i(193,"span",100),o(194),n()(),v(195,Wa,9,1,"div",103),i(196,"div")(197,"h4",124),o(198,"Brand"),n(),i(199,"span",100),o(200),n()(),i(201,"div")(202,"h4",124),o(203,"Capacity"),n(),i(204,"span",100),o(205),n()()(),i(206,"div",123)(207,"div")(208,"h4",124),o(209,"Dimensions"),n(),i(210,"span",100),o(211),n()(),i(212,"div")(213,"h4",124),o(214,"Weight"),n(),i(215,"span",100),o(216),n()(),i(217,"div")(218,"h4",124),o(219,"Power Requirements"),n(),i(220,"span",100),o(221),n()(),i(222,"div")(223,"h4",124),o(224,"Operating Conditions"),n(),i(225,"span",100),o(226),n()()()(),v(227,Ya,6,3,"div",125),n(),i(228,"div",71)(229,"div",126)(230,"div",7)(231,"div",127),h(),i(232,"svg",128),p(233,"path",129),n()(),x(),i(234,"h2",75),o(235,"Health & Performance"),n()(),i(236,"div",7)(237,"button",130),_("click",function(){u(e);let s=d();return g(s.refreshHealthPerformanceChart())}),h(),i(238,"svg",14),p(239,"path",131),n(),x(),i(240,"span"),o(241,"Refresh"),n()()()(),v(242,Za,16,3,"div",132),i(243,"div",123)(244,"div",40)(245,"h3",89),o(246,"Health & Performance Timeline (Last 12 Months)"),n()(),v(247,Ja,8,0,"div",133)(248,Xa,6,1,"div",134)(249,Ka,2,0,"div",135)(250,eo,2,0,"div",136)(251,to,11,6,"div",137),n()(),i(252,"div",71)(253,"div",138)(254,"div",7)(255,"div",139),h(),i(256,"svg",140),p(257,"path",141),n()(),x(),i(258,"h2",75),o(259,"Asset Depreciation"),n()(),i(260,"div",7)(261,"button",142),_("click",function(){u(e);let s=d();return g(s.refreshDepreciationChart())}),h(),i(262,"svg",14),p(263,"path",131),n(),x(),i(264,"span"),o(265,"Refresh"),n()(),i(266,"button",143),_("click",function(){u(e);let s=d();return g(s.forceCreateChart())}),h(),i(267,"svg",14),p(268,"path",144),n(),x(),i(269,"span"),o(270,"Debug"),n()()()(),i(271,"div",145)(272,"div",146)(273,"div",147),o(274,"Original Value"),n(),i(275,"div",148),o(276),n()(),i(277,"div",149)(278,"div",147),o(279,"Current Value"),n(),i(280,"div",150),o(281),n()()(),i(282,"div",123)(283,"div",40)(284,"h3",89),o(285,"Depreciation Timeline (straight-line method)"),n()(),v(286,io,8,0,"div",133)(287,no,6,1,"div",134)(288,ro,2,0,"div",135)(289,ao,2,0,"div",136),i(290,"div",151)(291,"div",152)(292,"div",64),o(293,"Annual Depreciation"),n(),i(294,"div",75),o(295),n()(),i(296,"div",152)(297,"div",64),o(298,"Depreciation Rate"),n(),i(299,"div",75),o(300),n()(),i(301,"div",152)(302,"div",64),o(303,"Years Remaining"),n(),i(304,"div",75),o(305),n()()()()()(),i(306,"div",79)(307,"div",71)(308,"div",72),h(),i(309,"svg",73),p(310,"path",102),n(),x(),i(311,"h2",75),o(312,"Recent Activity"),n()(),v(313,oo,8,0,"div",153)(314,so,5,1,"div",154)(315,uo,3,2,"div",155),i(316,"div",156)(317,"button",157),_("click",function(){u(e);let s=d();return g(s.showFullActivityHistory())}),o(318," View Full Activity History "),n()()(),i(319,"div",71)(320,"div",138)(321,"div",7),h(),i(322,"svg",73),p(323,"path",158),n(),x(),i(324,"h2",75),o(325,"Related Assets"),n()(),i(326,"div",81)(327,"button",159),_("click",function(){u(e);let s=d();return g(s.showRelatedFilterDropdown=!s.showRelatedFilterDropdown)}),i(328,"span"),o(329),n(),h(),i(330,"svg",14),p(331,"path",160),n()(),v(332,_o,2,6,"div",22),n()(),v(333,fo,8,0,"div",153)(334,ho,5,1,"div",154)(335,Co,3,2,"div",161),n(),x(),i(336,"div",71)(337,"div",138)(338,"div",7),h(),i(339,"svg",73),p(340,"path",101),n(),x(),i(341,"h2",75),o(342,"Maintenance Schedule"),n()(),i(343,"button",143),_("click",function(){u(e);let s=d();return g(s.addMaintenanceSchedule())}),h(),i(344,"svg",14),p(345,"path",91),n(),x(),i(346,"span"),o(347,"Add"),n()()(),i(348,"div",162)(349,"div",163)(350,"div",7),h(),i(351,"svg",164),p(352,"path",144),n(),x(),i(353,"div")(354,"div",165),o(355,"Last Maintenance"),n(),i(356,"div",166),o(357),n()()()(),i(358,"div",149)(359,"div",7),h(),i(360,"svg",167),p(361,"path",102),n(),x(),i(362,"div")(363,"div",168),o(364,"Next Due"),n(),i(365,"div",169),o(366),n()()()(),i(367,"div",170)(368,"div",7),h(),i(369,"svg",171),p(370,"path",131),n(),x(),i(371,"div")(372,"div",172),o(373,"Frequency"),n(),i(374,"div",173),o(375),n()()()()(),v(376,So,7,0,"div",174)(377,Mo,2,1,"div",161)(378,ko,9,0,"div",174),n(),i(379,"div",71)(380,"div",72),h(),i(381,"svg",73),p(382,"path",175),n(),x(),i(383,"h2",75),o(384,"Financial Information"),n()(),i(385,"div",123)(386,"div",146)(387,"h4",176),o(388,"Purchase Details"),n(),i(389,"div",177)(390,"div")(391,"span",178),o(392,"Purchase Price"),n(),i(393,"div",75),o(394),n()(),i(395,"div")(396,"span",178),o(397,"Purchase Date"),n(),i(398,"div",179),o(399),D(400,"dateFormat"),n()()()(),i(401,"div",149)(402,"h4",176),o(403,"Current Value"),n(),i(404,"div",177)(405,"div")(406,"span",178),o(407,"Book Value"),n(),i(408,"div",75),o(409),n()(),i(410,"div")(411,"span",178),o(412,"Market Value"),n(),i(413,"div",179),o(414),n()()()(),i(415,"div",180)(416,"h4",176),o(417,"Depreciation"),n(),i(418,"div",177)(419,"div")(420,"span",178),o(421,"Method"),n(),i(422,"div",179),o(423),n()(),i(424,"div")(425,"span",178),o(426,"Useful Life"),n(),i(427,"div",179),o(428),n()(),i(429,"div")(430,"span",178),o(431,"Annual Rate"),n(),i(432,"div",179),o(433),n()()()(),i(434,"div",163)(435,"h4",176),o(436,"Performance"),n(),i(437,"div",177)(438,"div")(439,"span",178),o(440,"Total Cost of Ownership"),n(),i(441,"div",75),o(442),n()(),i(443,"div")(444,"span",178),o(445,"ROI"),n(),i(446,"div",179),o(447),n()()()(),i(448,"div",170)(449,"h4",176),o(450,"Warranty & Insurance"),n(),i(451,"div",177)(452,"div")(453,"span",178),o(454,"Warranty Status"),n(),i(455,"div",181)(456,"span"),o(457),n(),v(458,Io,3,3,"span",182),n()(),i(459,"div")(460,"span",178),o(461,"Insurance Value"),n(),i(462,"div",179),o(463),n()()()()()()()()()}if(a&2){let e=fe(44),r=d();l(6),qe("d",r.getAssetTypeIcon()),l(3),y(r.asset.name),l(2),m("ngIf",r.asset.asset_status),l(),m("ngIf",r.asset.criticality_level),l(2),y(r.getAssetTypeName(r.asset.type)),l(4),y((r.asset.category==null?null:r.asset.category.name)||"General"),l(5),C(" ",r.asset.asset_id||r.asset.id||"N/A"," "),l(),w("text-right",!r.isRtl())("text-left",r.isRtl()),l(6),y(r.asset.asset_id||r.asset.id),l(3),m("ngIf",r.asset.serial_number),l(9),m("ngIf",r.asset.images&&r.asset.images.length>0)("ngIfElse",e),l(15),y((r.asset==null?null:r.asset.name)||"Unnamed Asset"),l(5),w("line-clamp-3",!r.descriptionExpanded),l(),C(" ",(r.asset==null?null:r.asset.description)||"No description available"," "),l(),m("ngIf",(r.asset==null?null:r.asset.description)&&r.asset.description.length>150),l(6),m("ngIf",(r.asset==null||r.asset.category==null?null:r.asset.category.icon)&&!r.asset.category.iconError),l(),m("ngIf",!(!(r.asset==null||r.asset.category==null)&&r.asset.category.icon)||r.asset.category.iconError),l(2),y((r.asset==null||r.asset.category==null?null:r.asset.category.name)||"Uncategorized"),l(4),m("ngIf",r.asset.asset_status),l(),m("ngIf",!r.asset.asset_status),l(9),m("ngIf",r.assetParts.length===0),l(),m("ngIf",r.assetParts.length>0),l(5),m("ngIf",r.assetDocuments.length===0),l(),m("ngIf",r.assetDocuments.length>0),l(7),y((r.asset==null?null:r.asset.asset_id)||"N/A"),l(11),m("ngIf",r.asset==null||r.asset.location==null?null:r.asset.location.id),l(),m("ngIf",!(!(r.asset==null||r.asset.location==null)&&r.asset.location.id)),l(5),y((r.asset==null||r.asset.department==null?null:r.asset.department.name)||"Not assigned"),l(8),y(ie(127,117,r.asset==null?null:r.asset.created_at)),l(9),y(ie(136,119,r.asset==null?null:r.asset.updated_at)),l(2),m("ngIf",r.asset==null?null:r.asset.parent),l(7),m("ngIf",r.qrCodeDataUrl),l(),m("ngIf",!r.qrCodeDataUrl&&(r.asset==null?null:r.asset.qr_code_url)),l(),m("ngIf",r.qrCodeLoading),l(),m("ngIf",!r.qrCodeDataUrl&&!(r.asset!=null&&r.asset.qr_code_url)&&!r.qrCodeLoading&&(r.asset==null?null:r.asset.id)),l(),m("ngIf",!r.qrCodeDataUrl&&!(r.asset!=null&&r.asset.qr_code_url)&&!r.qrCodeLoading&&!(r.asset!=null&&r.asset.id)),l(2),m("ngIf",r.asset==null?null:r.asset.id),l(),m("ngIf",r.asset==null?null:r.asset.id),l(9),m("ngIf",r.asset==null?null:r.asset.barcode_url),l(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&r.barcodeDataUrl),l(),m("ngIf",r.barcodeLoading),l(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&!r.barcodeDataUrl&&!r.barcodeLoading&&(r.asset==null?null:r.asset.asset_id)),l(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&!r.barcodeDataUrl&&!r.barcodeLoading&&!(r.asset!=null&&r.asset.asset_id)),l(2),m("ngIf",r.asset==null?null:r.asset.asset_id),l(),m("ngIf",r.asset==null?null:r.asset.asset_id),l(4),m("ngIf",r.asset==null?null:r.asset.asset_id),l(12),m("ngIf",r.asset.asset_status),l(),m("ngIf",!r.asset.asset_status),l(5),y(r.asset.manufacturer||"Not specified"),l(5),y(r.asset.model||"Not specified"),l(),m("ngIf",r.asset.serial_number),l(5),y(r.asset.brand||"Not specified"),l(5),y(r.asset.capacity||"Not specified"),l(6),y(r.asset.dimensions||"Not specified"),l(5),y(r.asset.weight||"Not specified"),l(5),y(r.asset.power_requirements||"Not specified"),l(5),y(r.asset.operating_conditions||"Standard conditions"),l(),m("ngIf",r.asset.specifications),l(15),m("ngIf",r.healthPerformanceChartData==null||r.healthPerformanceChartData.chart_data==null?null:r.healthPerformanceChartData.chart_data.metrics),l(5),m("ngIf",r.healthPerformanceChartLoading),l(),m("ngIf",r.healthPerformanceChartError&&!r.healthPerformanceChartLoading),l(),m("ngIf",!r.healthPerformanceChartLoading&&!r.healthPerformanceChartError),l(),m("ngIf",!r.healthPerformanceChartLoading&&!r.healthPerformanceChartError),l(),m("ngIf",r.healthPerformanceChartData==null||r.healthPerformanceChartData.chart_data==null?null:r.healthPerformanceChartData.chart_data.metrics),l(25),A("",r.getCurrencySymbol(),"",r.formatCurrency((r.asset==null?null:r.asset.purchase_price)||0),""),l(5),A("",r.getCurrencySymbol(),"",r.formatCurrency(r.calculateCurrentValue()),""),l(5),m("ngIf",r.depreciationChartLoading),l(),m("ngIf",r.depreciationChartError&&!r.depreciationChartLoading),l(),m("ngIf",!r.depreciationChartLoading&&!r.depreciationChartError),l(),m("ngIf",!r.depreciationChartLoading&&!r.depreciationChartError),l(6),A("",r.getCurrencySymbol(),"",r.formatCurrency(r.calculateAnnualDepreciation())," "),l(5),C("",r.calculateDepreciationRate(),"%"),l(5),y(r.calculateRemainingYears()),l(8),m("ngIf",r.activityLoading),l(),m("ngIf",r.activityError&&!r.activityLoading),l(),m("ngIf",!r.activityLoading&&!r.activityError),l(14),y(r.getRelatedFilterDisplayName(r.selectedRelatedFilter)),l(3),m("ngIf",r.showRelatedFilterDropdown),l(),m("ngIf",r.relatedAssetsLoading),l(),m("ngIf",r.relatedAssetsError&&!r.relatedAssetsLoading),l(),m("ngIf",!r.relatedAssetsLoading&&!r.relatedAssetsError),l(22),C("",r.mockMaintenanceData.lastMaintenance||"Not recorded"," "),l(9),C("",r.mockMaintenanceData.nextMaintenance||"Not scheduled"," "),l(9),y(r.mockMaintenanceData.interval),l(),m("ngIf",r.maintenanceLoading),l(),m("ngIf",!r.maintenanceLoading&&r.maintenanceSchedules.length>0),l(),m("ngIf",!r.maintenanceLoading&&r.maintenanceSchedules.length===0),l(16),A(" ",r.getCurrencySymbol(),"",r.formatCurrency(r.mockFinancialData.purchaseCost)," "),l(5),y(ie(400,121,r.asset.purchase_date)),l(10),A(" ",r.getCurrencySymbol(),"",r.formatCurrency(r.mockFinancialData.currentValue)," "),l(5),A("",r.getCurrencySymbol(),"",r.formatCurrency(r.mockFinancialData.currentValue*.95)," "),l(9),y(r.mockFinancialData.depreciationMethod),l(5),C("",r.mockFinancialData.usefulLife," years"),l(5),C("",r.calculateDepreciationRate(),"%"),l(9),A(" ",r.getCurrencySymbol(),"",r.formatCurrency(r.calculateTotalCostOfOwnership())," "),l(4),w("text-green-600",r.calculateROI()>0)("text-red-600",r.calculateROI()<0),l(),C(" ",r.calculateROI(),"% "),l(9),U(r.getWarrantyStatusClass(r.asset.warranty)),l(),C(" ",r.getWarrantyStatus(r.asset.warranty)," "),l(),m("ngIf",r.asset.warranty),l(5),y(r.asset.insurance_value||"Not specified")}}function Vo(a,t){a&1&&(o(0," Saving Schedule... "),p(1,"span",338))}function Po(a,t){a&1&&o(0," Save Schedule ")}function Do(a,t){if(a&1){let e=b();i(0,"div",314)(1,"div",315)(2,"div",138)(3,"h3",75),o(4,"Add Maintenance Schedule"),n(),i(5,"button",316),_("click",function(){u(e);let s=d();return g(s.closeMaintenanceModals())}),h(),i(6,"svg",317),p(7,"path",219),n()()(),x(),i(8,"form",318),_("ngSubmit",function(){u(e);let s=d();return g(s.saveMaintenanceSchedule())}),i(9,"div",123)(10,"div")(11,"label",319),o(12,"Schedule Type"),n(),i(13,"select",320)(14,"option",321),o(15,"Select type"),n(),i(16,"option",322),o(17,"Preventive Maintenance"),n(),i(18,"option",323),o(19,"Inspection"),n(),i(20,"option",324),o(21,"Calibration"),n(),i(22,"option",325),o(23,"Cleaning"),n()()(),i(24,"div")(25,"label",319),o(26,"Next Due Date"),n(),p(27,"input",326,1),n(),i(29,"div")(30,"label",319),o(31,"Last Done Date"),n(),p(32,"input",327,1),n(),i(34,"div")(35,"label",319),o(36,"Frequency"),n(),i(37,"select",328)(38,"option",321),o(39,"Select frequency"),n(),i(40,"option",329),o(41,"Weekly"),n(),i(42,"option",330),o(43,"Monthly"),n(),i(44,"option",331),o(45,"Quarterly"),n(),i(46,"option",332),o(47,"Semi-Annual"),n(),i(48,"option",333),o(49,"Annual"),n()()(),i(50,"div")(51,"label",319),o(52,"Notes"),n(),p(53,"textarea",334),n()(),i(54,"div",335)(55,"button",336),_("click",function(){u(e);let s=d();return g(s.closeMaintenanceModals())}),o(56," Cancel "),n(),i(57,"button",337),v(58,Vo,2,0)(59,Po,1,0),n()()()()()}if(a&2){let e=d();l(8),m("formGroup",e.maintenanceForm),l(49),m("disabled",e.maintenanceForm.invalid),l(),ft(e.saveMaintenanceLoading?58:59)}}function Lo(a,t){a&1&&(o(0," Updating Schedule... "),p(1,"span",338))}function Oo(a,t){a&1&&o(0," Update Schedule ")}function Fo(a,t){if(a&1){let e=b();i(0,"div",314)(1,"div",339)(2,"div",138)(3,"h3",75),o(4,"Edit Maintenance Schedule"),n(),i(5,"button",316),_("click",function(){u(e);let s=d();return g(s.closeMaintenanceModals())}),h(),i(6,"svg",317),p(7,"path",219),n()()(),x(),i(8,"form",318),_("ngSubmit",function(){u(e);let s=d();return g(s.saveMaintenanceSchedule())}),i(9,"div",123)(10,"div")(11,"label",319),o(12,"Schedule Type"),n(),i(13,"select",320)(14,"option",321),o(15,"Select type"),n(),i(16,"option",322),o(17,"Preventive Maintenance"),n(),i(18,"option",323),o(19,"Inspection"),n(),i(20,"option",324),o(21,"Calibration"),n(),i(22,"option",325),o(23,"Cleaning"),n()()(),i(24,"div")(25,"label",319),o(26,"Next Due Date"),n(),p(27,"input",326,1),n(),i(29,"div")(30,"label",319),o(31,"Last Done Date"),n(),p(32,"input",327,1),n(),i(34,"div")(35,"label",319),o(36,"Frequency"),n(),i(37,"select",328)(38,"option",321),o(39,"Select frequency"),n(),i(40,"option",329),o(41,"Weekly"),n(),i(42,"option",330),o(43,"Monthly"),n(),i(44,"option",331),o(45,"Quarterly"),n(),i(46,"option",332),o(47,"Semi-Annual"),n(),i(48,"option",333),o(49,"Annual"),n()()(),i(50,"div")(51,"label",319),o(52,"Status"),n(),i(53,"select",340)(54,"option",341),o(55,"Scheduled"),n(),i(56,"option",342),o(57,"In Progress"),n(),i(58,"option",343),o(59,"Completed"),n(),i(60,"option",344),o(61,"Overdue"),n()()(),i(62,"div")(63,"label",319),o(64,"Notes"),n(),p(65,"textarea",334),n()(),i(66,"div",335)(67,"button",345),_("click",function(){u(e);let s=d();return g(s.closeMaintenanceModals())}),o(68," Cancel "),n(),i(69,"button",337),v(70,Lo,2,0)(71,Oo,1,0),n()()()()()}if(a&2){let e=d();l(8),m("formGroup",e.maintenanceForm),l(61),m("disabled",e.maintenanceForm.invalid),l(),ft(e.saveMaintenanceLoading?70:71)}}function Ho(a,t){a&1&&(i(0,"div",374)(1,"div",40)(2,"div",375),h(),i(3,"svg",376),p(4,"circle",43)(5,"path",44),n()(),x(),i(6,"p",62),o(7,"Loading activity history..."),n()()())}function jo(a,t){if(a&1){let e=b();i(0,"div",377)(1,"div",378),o(2),n(),i(3,"button",51),_("click",function(){u(e);let s=d(2);return g(s.loadFullActivityHistory())}),o(4," Try Again "),n()()}if(a&2){let e=d(2);l(2),y(e.activityHistoryError)}}function Ro(a,t){if(a&1&&(i(0,"div",388)(1,"div",389),o(2,"Changes:"),n(),i(3,"div",204),o(4),n()()),a&2){let e=d().$implicit,r=d(3);l(4),C(" ",r.formatActivityBeforeAfter(e.before,e.after)," ")}}function Bo(a,t){if(a&1&&(i(0,"div",390)(1,"strong"),o(2,"By:"),n(),o(3),n()),a&2){let e=d().$implicit,r=d(3);l(3),C(" ",r.getUserDisplayName(e.user)," ")}}function No(a,t){if(a&1&&(i(0,"div",381)(1,"div",382),h(),i(2,"svg",18),p(3,"path",57),n()(),x(),i(4,"div",213)(5,"div",88)(6,"h4",383),o(7),n(),i(8,"span",384),o(9),n()(),i(10,"p",385),o(11),n(),v(12,Ro,5,1,"div",386)(13,Bo,4,1,"div",387),n()()),a&2){let e=t.$implicit,r=d(3);l(),m("ngClass",r.getActivityColor(e.action)),l(2),qe("d",r.getActivityIcon(e.action)),l(4),y(e.action),l(2),y(e.time_ago),l(2),y(e.comment||"No comment"),l(),m("ngIf",r.formatActivityBeforeAfter(e.before,e.after)),l(),m("ngIf",e.user)}}function Go(a,t){a&1&&(i(0,"div",377),h(),i(1,"svg",203),p(2,"path",102),n(),x(),i(3,"h3",45),o(4,"No Activity Found"),n(),i(5,"p",204),o(6,"No activity matches your current filters."),n()())}function zo(a,t){if(a&1&&(i(0,"div",379),v(1,No,14,7,"div",380)(2,Go,7,0,"div",369),n()),a&2){let e=d(2);l(),m("ngForOf",e.fullActivityHistory),l(),m("ngIf",e.fullActivityHistory.length===0)}}function $o(a,t){if(a&1){let e=b();i(0,"button",394),_("click",function(){u(e);let s=d(3);return g(s.onActivityHistoryPageChange(s.activityHistoryPagination.current_page-1))}),o(1," Previous "),n()}}function Uo(a,t){if(a&1){let e=b();i(0,"button",394),_("click",function(){u(e);let s=d(3);return g(s.onActivityHistoryPageChange(s.activityHistoryPagination.current_page+1))}),o(1," Next "),n()}}function qo(a,t){if(a&1&&(i(0,"div",391)(1,"div",64),o(2),n(),i(3,"div",392),v(4,$o,2,0,"button",393)(5,Uo,2,0,"button",393),n()()),a&2){let e=d(2);l(2),St(" Showing ",e.activityHistoryPagination.from||0," to ",e.activityHistoryPagination.to||0," of ",e.activityHistoryPagination.total||0," activities "),l(2),m("ngIf",e.activityHistoryPagination.prev_page_url),l(),m("ngIf",e.activityHistoryPagination.next_page_url)}}function Wo(a,t){if(a&1){let e=b();i(0,"div",346)(1,"div",347)(2,"div",348)(3,"div",12),h(),i(4,"svg",349),p(5,"path",102),n(),x(),i(6,"h3",350),o(7,"Full Activity History"),n()(),i(8,"button",316),_("click",function(){u(e);let s=d();return g(s.closeActivityHistoryModal())}),h(),i(9,"svg",317),p(10,"path",219),n()()(),x(),i(11,"div",351)(12,"div",352)(13,"div",353)(14,"div",213)(15,"input",354),_("input",function(s){u(e);let c=d();return g(c.onActivityHistorySearch(s.target.value))}),n()(),i(16,"button",355),_("click",function(){u(e);let s=d();return g(s.clearActivityHistoryFilters())}),o(17," Clear Filters "),n()(),i(18,"div",356)(19,"div")(20,"label",357),o(21,"Action Type"),n(),i(22,"select",358),_("change",function(s){u(e);let c=d();return g(c.onActivityHistoryFilter("action",s.target.value))}),i(23,"option",321),o(24,"All Actions"),n(),i(25,"option",359),o(26,"Created"),n(),i(27,"option",360),o(28,"Updated"),n(),i(29,"option",361),o(30,"Deleted"),n(),i(31,"option",362),o(32,"Transferred"),n(),i(33,"option",363),o(34,"Maintenance"),n(),i(35,"option",364),o(36,"Imported"),n()()(),i(37,"div")(38,"label",357),o(39,"Date From"),n(),i(40,"input",365),_("change",function(s){u(e);let c=d();return g(c.onActivityHistoryFilter("date_from",s.target.value))}),n()(),i(41,"div")(42,"label",357),o(43,"Date To"),n(),i(44,"input",365),_("change",function(s){u(e);let c=d();return g(c.onActivityHistoryFilter("date_to",s.target.value))}),n()(),i(45,"div")(46,"label",357),o(47,"Sort By"),n(),i(48,"select",358),_("change",function(s){u(e);let c=d();return g(c.onActivityHistorySort("created_at",s.target.value))}),i(49,"option",366),o(50,"Newest First"),n(),i(51,"option",367),o(52,"Oldest First"),n()()()()(),v(53,Ho,8,0,"div",368)(54,jo,5,1,"div",369)(55,zo,3,2,"div",370)(56,qo,6,5,"div",371),n(),i(57,"div",372)(58,"div",64),o(59),n(),i(60,"button",373),_("click",function(){u(e);let s=d();return g(s.closeActivityHistoryModal())}),o(61," Close "),n()()()()}if(a&2){let e=d();l(53),m("ngIf",e.activityHistoryLoading),l(),m("ngIf",e.activityHistoryError&&!e.activityHistoryLoading),l(),m("ngIf",!e.activityHistoryLoading&&!e.activityHistoryError),l(),m("ngIf",e.activityHistoryPagination&&e.fullActivityHistory.length>0),l(3),C(" Total Activities: ",(e.activityHistoryPagination==null?null:e.activityHistoryPagination.total)||e.fullActivityHistory.length," ")}}ct.register(...Pt);var Re=class a{constructor(t,e,r,s,c,f,E,P,j,se){this.route=t;this.router=e;this.assetService=r;this.angularLocation=s;this.pdfExportService=c;this.fb=f;this.cdr=E;this.currencyService=P;this.toastService=j;this.formatService=se;this.currencySymbol=this.currencyService.getSymbol(),this.currencyService.get$().pipe(k(this.destroy$)).subscribe(()=>{this.currencySymbol=this.currencyService.getSymbol()}),this.maintenanceForm=this.fb.group({schedule_type:["",ae.required],next_due:[""],last_done:[""],frequency:[""],notes:[""],status:["Scheduled"]}),this.activities=[],this.fullActivityHistory=[]}destroy$=new J;dateInputs;asset=null;loading=!0;saveMaintenanceLoading=!1;error="";currentImageIndex=0;selectedImageUrl=null;descriptionExpanded=!1;showActionsDropdown=!1;assetParts=[];showPartsModal=!1;assetDocuments=[];currencySymbol="$";showTransferModal=!1;showActivityHistoryModal=!1;maintenanceSchedules=[];maintenanceLoading=!1;showAddMaintenanceModal=!1;showEditMaintenanceModal=!1;selectedSchedule=null;maintenanceForm;flatpickrInstances=[];healthMetrics={lastUpdated:new Date,performanceTrend:[{month:"Jan",value:82},{month:"Feb",value:84},{month:"Mar",value:88},{month:"Apr",value:85}]};mockFinancialData={purchaseCost:0,currentValue:0,depreciationMethod:"Straight Line",usefulLife:10,originalValue:0};mockMaintenanceData={status:"Current",lastMaintenance:null,nextMaintenance:null,interval:"Every 6 months"};activities=[];fullActivityHistory=[];activityLoading=!1;activityHistoryLoading=!1;activityError="";activityHistoryError="";activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""};activityHistoryPagination=null;qrCodeDataUrl=null;qrCodeLoading=!1;barcodeDataUrl=null;barcodeLoading=!1;relatedAssets=[];relatedAssetsLoading=!1;relatedAssetsError="";selectedRelatedFilter="all";showRelatedFilterDropdown=!1;relatedAssetsParams={type:"all",limit:10};depreciationChart=null;depreciationChartLoading=!1;depreciationChartError="";depreciationChartData=null;healthPerformanceChart=null;healthPerformanceChartLoading=!1;healthPerformanceChartError="";healthPerformanceChartData=null;ngOnInit(){this.currencyService.get$().pipe(k(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()}),this.route.params.pipe(k(this.destroy$)).subscribe(t=>{let e=t.id;e&&this.loadAsset(e)})}ngAfterViewInit(){this.initializeDatePickers(),setTimeout(()=>{this.asset&&!this.depreciationChart&&this.createDepreciationChart()},500)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.depreciationChart&&this.depreciationChart.destroy(),this.healthPerformanceChart&&this.healthPerformanceChart.destroy()}loadAsset(t){this.loading=!0,this.error="",this.assetService.getAsset(t).pipe(k(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.updateMockData(),this.loadMaintenanceSchedules(),this.loadActivityHistory(),this.generateQRCode(),!this.asset.barcode_url&&this.asset.asset_id&&this.generateBarcode(),this.loadRelatedAssets(),this.loadAssetParts(),this.loadAssetDocuments(),this.loadDepreciationChart(),this.loadHealthPerformanceChart()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}loadMaintenanceSchedules(){this.asset&&(this.maintenanceLoading=!0,this.assetService.listMaintenanceSchedules(this.asset.id).pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&(this.maintenanceSchedules=t.data||[]),this.maintenanceLoading=!1},error:t=>{console.error("Error loading maintenance schedules:",t),this.maintenanceLoading=!1}}))}updateMockData(){this.asset&&(this.mockFinancialData={purchaseCost:this.asset.purchase_price||0,currentValue:this.asset.current_value||this.asset.purchase_price||0,depreciationMethod:"Straight Line",usefulLife:this.asset.depreciation||10,originalValue:this.asset.purchase_price||0},this.healthMetrics.lastUpdated=new Date,this.mockMaintenanceData={status:this.asset.status||"Active",lastMaintenance:this.asset.last_maintenance_date||null,nextMaintenance:this.asset.next_maintenance_date||null,interval:this.asset.maintenance_interval||"Every 6 months"},this.asset.images&&this.asset.images.length>0&&(this.selectedImageUrl=this.asset.images[0].image_url,this.currentImageIndex=0))}goBack(){this.angularLocation.back()}editAsset(){this.asset&&this.router.navigate(["/assets",this.asset.id,"edit"])}exportAsset(){this.asset&&this.pdfExportService.exportSingleAssetToPdf(this.asset)}printAsset(){let t=window.open("","_blank");if(!t){alert("Please allow popups to print this asset");return}let e=this.generatePrintContent();t.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Asset Details - ${this.asset?.name||"Asset"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
              .no-print { display: none !important; }
              .print-only { display: block !important; }
              .page-break { page-break-before: always; }
              .avoid-break { page-break-inside: avoid; }
              table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f8f9fa; font-weight: bold; }
              .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
              .section { margin-bottom: 25px; }
              .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
              .info-item { margin-bottom: 15px; }
              .info-label { font-weight: bold; color: #666; font-size: 14px; }
              .info-value { font-size: 16px; margin-top: 5px; }
              .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
              .qr-section { text-align: center; margin: 20px 0; }
              .qr-code { max-width: 200px; margin: 0 auto; }
              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #ddd; padding-top: 20px; }
              @page { margin: 1in; }
            }
            @media screen {
              body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
              .no-print { display: none; }
              .print-only { display: block; }
              .page-break { border-top: 2px solid #333; margin-top: 30px; padding-top: 30px; }
              .avoid-break { }
              table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f8f9fa; font-weight: bold; }
              .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
              .section { margin-bottom: 25px; }
              .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
              .info-item { margin-bottom: 15px; }
              .info-label { font-weight: bold; color: #666; font-size: 14px; }
              .info-value { font-size: 16px; margin-top: 5px; }
              .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
              .qr-section { text-align: center; margin: 20px 0; }
              .qr-code { max-width: 200px; margin: 0 auto; }
              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #ddd; padding-top: 20px; }
            }
          </style>
        </head>
        <body>
          ${e}
        </body>
      </html>
    `),t.document.close(),t.onload=()=>{t.print(),t.close()}}generatePrintContent(){if(!this.asset)return"<p>Asset not found</p>";let t=this.asset,e=new Date().toLocaleDateString();return`
      <div class="header">
        <h1>Asset Details Report</h1>
        <p>Generated on: ${e}</p>
      </div>

      <div class="section">
        <div class="section-title">Asset Overview</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Asset Name</div>
            <div class="info-value">${t.name||"N/A"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Asset ID</div>
            <div class="info-value">${t.asset_id||t.id||"N/A"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Category</div>
            <div class="info-value">${t.category?.name||"General"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Status</div>
            <div class="info-value">
              <span class="status-badge" style="background-color: ${t.asset_status?.color||"#6B7280"}20; color: ${t.asset_status?.color||"#6B7280"}">
                ${t.asset_status?.name||"Not specified"}
              </span>
            </div>
          </div>
          <div class="info-item">
            <div class="info-label">Type</div>
            <div class="info-value">${this.getAssetTypeName(t.type)}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Location</div>
            <div class="info-value">${t.location?.name||"No location assigned"}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Description</div>
        <p>${t.description||"No description available"}</p>
      </div>

      <div class="section">
        <div class="section-title">Technical Specifications</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Manufacturer</div>
            <div class="info-value">${t.manufacturer||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Model</div>
            <div class="info-value">${t.model||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Serial Number</div>
            <div class="info-value">${t.serial_number||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Brand</div>
            <div class="info-value">${t.brand||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Dimensions</div>
            <div class="info-value">${t.dimensions||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Weight</div>
            <div class="info-value">${t.weight||"Not specified"}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Financial Information</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Purchase Price</div>
            <div class="info-value">${this.getCurrencySymbol()}${this.formatCurrency(t.purchase_price||0)}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Current Value</div>
            <div class="info-value">${this.getCurrencySymbol()}${this.formatCurrency(this.calculateCurrentValue())}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Purchase Date</div>
            <div class="info-value">${t.purchase_date?new Date(t.purchase_date).toLocaleDateString():"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Warranty Status</div>
            <div class="info-value">${this.getWarrantyStatus(t.warranty)}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Performance Metrics</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Health Score</div>
            <div class="info-value">${t.health_score||0}%</div>
          </div>
          <div class="info-item">
            <div class="info-label">Utilization Rate</div>
            <div class="info-value">${this.getUtilizationRate()}%</div>
          </div>
          <div class="info-item">
            <div class="info-label">Asset Age</div>
            <div class="info-value">${this.getAssetAge()}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Total Cost of Ownership</div>
            <div class="info-value">${this.getCurrencySymbol()}${this.formatCurrency(this.calculateTotalCostOfOwnership())}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Timeline Information</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Created Date</div>
            <div class="info-value">${t.created_at?new Date(t.created_at).toLocaleDateString():"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Last Modified</div>
            <div class="info-value">${t.updated_at?new Date(t.updated_at).toLocaleDateString():"Not specified"}</div>
          </div>
        </div>
      </div>

      <div class="qr-section">
        <div class="section-title">Asset Identification</div>
        <div class="qr-code">
          ${this.qrCodeDataUrl?`<img src="${this.qrCodeDataUrl}" alt="QR Code" style="max-width: 100%; height: auto;">`:"<p>QR Code not available</p>"}
        </div>
        <p><strong>Asset ID:</strong> ${t.asset_id||t.id||"N/A"}</p>
      </div>

      <div class="footer">
        <p>AssetGo - Asset Management System</p>
        <p>This report was generated automatically on ${e}</p>
      </div>
    `}getStatusColor(t){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[t]||"gray"}getAssetStatusColor(t){return!t||!t.color?"#6B7280":t.color}getAssetStatusBackgroundColor(t){return!t||!t.color?"#F3F4F6":t.color+"20"}getAssetTypeIcon(){if(!this.asset?.type)return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";let t={fixed:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4","semi-fixed":"M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4a2 2 0 001-1.73z",mobile:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",fleet:"M3 13l2-5a2 2 0 012-2h10a2 2 0 012 2l2 5M5 13v6a2 2 0 002 2h10a2 2 0 002-2v-6M5 13h14"};return t[this.asset.type]||t.fixed}generateSmartDescription(){console.log("Generate smart description")}analyzeAssetImage(){console.log("Analyze asset image")}addMaintenanceSchedule(){this.showAddMaintenanceModal=!0,this.maintenanceForm.reset({schedule_type:"",next_due:"",last_done:"",frequency:"",notes:"",status:"Scheduled"}),setTimeout(()=>{this.initializeDatePickers()},100)}editMaintenanceSchedule(t){this.selectedSchedule=t,this.showEditMaintenanceModal=!0,this.maintenanceForm.patchValue({schedule_type:t.schedule_type,next_due:t.next_due,last_done:t.last_done,frequency:t.frequency,notes:t.notes,status:t.status}),setTimeout(()=>{this.initializeDatePickers()},100)}deleteMaintenanceSchedule(t){confirm("Are you sure you want to delete this maintenance schedule?")&&this.assetService.deleteMaintenanceSchedule(this.asset.id,t.id).pipe(k(this.destroy$)).subscribe({next:e=>{e.success&&this.loadMaintenanceSchedules()},error:e=>{console.error("Error deleting maintenance schedule:",e)}})}saveMaintenanceSchedule(){if(this.maintenanceForm.valid&&this.asset){this.saveMaintenanceLoading=!0;let t=this.maintenanceForm.value;this.selectedSchedule?this.assetService.updateMaintenanceSchedule(this.asset.id,this.selectedSchedule.id,t).pipe(k(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{this.saveMaintenanceLoading=!1,console.error("Error updating maintenance schedule:",e)}}).add(()=>{this.saveMaintenanceLoading=!1}):this.assetService.addMaintenanceSchedule(this.asset.id,t).pipe(k(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{this.saveMaintenanceLoading=!1,console.error("Error adding maintenance schedule:",e)}}).add(()=>{this.saveMaintenanceLoading=!1})}}closeMaintenanceModals(){this.showAddMaintenanceModal=!1,this.showEditMaintenanceModal=!1,this.selectedSchedule=null,this.maintenanceForm.reset(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[]}initializeDatePickers(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let r=xe(t.nativeElement,{dateFormat:"Y-m-d",allowInput:!0,clickOpens:!0,onChange:(s,c)=>{let f=t.nativeElement.getAttribute("formControlName");f&&this.maintenanceForm.get(f)&&this.maintenanceForm.get(f).setValue(c)}});this.flatpickrInstances.push(r)}})},50)}getScheduleStatusColor(t){return{Scheduled:"blue",Overdue:"red",Completed:"green","In Progress":"yellow"}[t]||"gray"}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set"}getAssetTypeName(t){return t?{1:"Fixed Asset",2:"Semi-Fixed Asset",3:"Mobile Asset",4:"Fleet Asset",5:"IT Equipment"}[t.toString()]||`Type ${t}`:"Standard Asset"}navigateToPrevious(){console.log("Navigate to previous asset")}navigateToNext(){console.log("Navigate to next asset")}loadRelatedAssets(){this.asset?.id&&(this.relatedAssetsLoading=!0,this.relatedAssetsError="",this.assetService.getRelatedAssets(this.asset.id,this.relatedAssetsParams).pipe(k(this.destroy$)).subscribe({next:t=>{t.success?this.relatedAssets=t.data.related_assets||[]:this.relatedAssetsError=t.message||"Failed to load related assets",this.relatedAssetsLoading=!1},error:t=>{this.relatedAssetsError=t.error?.message||"An error occurred while loading related assets",this.relatedAssetsLoading=!1}}))}loadDepreciationChart(){this.asset?.id&&(this.depreciationChartLoading=!0,this.depreciationChartError="",console.log("Loading depreciation chart for asset:",this.asset.id),this.assetService.getAssetDepreciationChart(this.asset.id).pipe(k(this.destroy$)).subscribe({next:t=>{console.log("Chart API Response:",t),t.success?(this.depreciationChartData=t.data,console.log("Chart data set:",this.depreciationChartData),this.createDepreciationChart()):(this.depreciationChartError=t.message||"Failed to load depreciation chart data",console.log("API returned error, using mock data"),this.createDepreciationChartWithMockData()),this.depreciationChartLoading=!1},error:t=>{console.error("Chart API Error:",t),this.depreciationChartError=t.error?.message||"An error occurred while loading depreciation chart data",this.depreciationChartLoading=!1,this.createDepreciationChartWithMockData()}}))}createDepreciationChart(){console.log("Creating depreciation chart..."),this.depreciationChart&&(console.log("Destroying existing chart"),this.depreciationChart.destroy()),setTimeout(()=>{let t=document.getElementById("depreciationChart");if(console.log("Canvas element:",t),!t){console.error("Depreciation chart canvas not found");return}let e=this.processChartData(this.depreciationChartData)||this.generateMockDepreciationData();console.log("Chart data to use:",e);try{this.depreciationChart=new ct(t,{type:"line",data:{labels:e.labels,datasets:[{label:"Asset Value",data:e.values,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!0,tension:.4},{label:"Accumulated Depreciation",data:e.depreciation,borderColor:"#EF4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:2,fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Asset Depreciation Over Time",font:{size:16,weight:"bold"}},legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:r=>{let s=r.dataset.label||"",c=r.parsed.y;return`${s}: ${this.getCurrencySymbol()}${c!==null?this.formatService.formatNumber(c,0):"0"}`}}}},scales:{x:{title:{display:!0,text:"Month"}},y:{title:{display:!0,text:"Value ($)"},beginAtZero:!0,ticks:{callback:r=>`${this.getCurrencySymbol()}${this.formatService.formatNumber(Number(r),0)}`}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),console.log("Chart created successfully"),this.cdr.detectChanges()}catch(r){console.error("Error creating chart:",r)}},100)}processChartData(t){if(!t||!t.chart_data||!t.chart_data.has_data)return null;let e=t.chart_data,r=e.depreciation_months.map(E=>`Month ${E}`),s=e.depreciation_values.map(E=>parseFloat(E)),c=parseFloat(t.asset.purchase_price),f=s.map(E=>c-E);return{labels:r,values:s,depreciation:f}}createDepreciationChartWithMockData(){let t=this.generateMockDepreciationData();this.depreciationChartData=t,this.createDepreciationChart()}generateMockDepreciationData(){let t=parseFloat(this.asset?.purchase_price)||1e4,e=parseFloat(this.asset?.depreciation)||10,r=this.asset?.depreciation_life||10,s=[],c=[],f=[],E=r||e;for(let P=1;P<=E;P++){s.push(`Month ${P}`);let se=t/E*(P-1),pe=Math.max(0,t-se);c.push(pe),f.push(se)}return{labels:s,values:c,depreciation:f}}onRelatedFilterChange(t){this.selectedRelatedFilter=t,this.relatedAssetsParams.type=t,this.loadRelatedAssets()}getRelatedFilterDisplayName(t){return{all:"All Related",category:"Same Category",location:"Same Location",department:"Same Department",manufacturer:"Same Manufacturer",parent:"Same Parent",children:"Child Assets",siblings:"Sibling Assets",similar:"Similar Assets"}[t]||t}getRelatedAssetStatusColor(t){if(t?.color)return`bg-${this.getColorFromHex(t.color)}-100 text-${this.getColorFromHex(t.color)}-700`;let e=t?.name||t;return{Active:"bg-green-100 text-green-700",Inactive:"bg-gray-100 text-gray-700",Maintenance:"bg-orange-100 text-orange-700",Retired:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"}getColorFromHex(t){return{"#10B981":"green","#EF4444":"red","#F59E0B":"yellow","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange","#6B7280":"gray"}[t]||"gray"}navigateToRelatedAsset(t){this.router.navigate(["/assets/preview",t])}loadActivityHistory(){if(!this.asset?.id)return;this.activityLoading=!0,this.activityError="";let t={page:1,per_page:5,sort_by:"created_at",sort_dir:"desc"};this.assetService.getActivityHistory(this.asset.id,t).pipe(k(this.destroy$)).subscribe({next:e=>{e.success?this.activities=e.data.data||[]:this.activityError=e.message||"Failed to load activity history",this.activityLoading=!1},error:e=>{this.activityError=e.error?.message||"An error occurred while loading activity history",this.activityLoading=!1}})}loadPerformanceMetrics(){console.log("Load performance metrics")}refreshHealthMetrics(){this.loadPerformanceMetrics(),console.log("Refreshing health metrics")}refreshDepreciationChart(){console.log("Refreshing depreciation chart..."),this.loadDepreciationChart()}forceCreateChart(){console.log("Force creating chart..."),this.createDepreciationChart()}loadHealthPerformanceChart(){if(!this.asset?.id){console.log("No asset ID available for health performance chart");return}this.healthPerformanceChartLoading=!0,this.healthPerformanceChartError="",console.log("Loading health performance chart for asset:",this.asset.id),this.assetService.getAssetHealthPerformanceChart(this.asset.id,{months:12}).pipe(k(this.destroy$)).subscribe({next:t=>{console.log("Health performance chart API response:",t),this.healthPerformanceChartLoading=!1,t.success&&t.data?(this.healthPerformanceChartData=t.data,setTimeout(()=>{this.createHealthPerformanceChart()},100)):(this.healthPerformanceChartError="Failed to load health performance data",console.error("Health performance chart API error:",t))},error:t=>{console.error("Health performance chart API error:",t),this.healthPerformanceChartLoading=!1,this.healthPerformanceChartError="Failed to load health performance data"}})}createHealthPerformanceChart(){console.log("Creating health performance chart..."),console.log("Health performance chart data:",this.healthPerformanceChartData),this.healthPerformanceChart&&(this.healthPerformanceChart.destroy(),this.healthPerformanceChart=null);let t=document.getElementById("healthPerformanceChart");if(console.log("Canvas element:",t),!t){console.error("Health performance chart canvas not found");return}setTimeout(()=>{try{console.log("Processing health performance data...");let e=this.processHealthPerformanceData(this.healthPerformanceChartData);console.log("Processed chart data:",e);let r={type:"line",data:{labels:e.labels,datasets:[{label:"Health Score",data:e.healthScores,borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#10B981",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6},{label:"Performance Score",data:e.performanceScores,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#3B82F6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6},{label:"Maintenance Count",data:e.maintenanceCounts,borderColor:"#F59E0B",backgroundColor:"rgba(245, 158, 11, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#F59E0B",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(s){let c=s.dataset.label||"",f=s.parsed.y;return c==="Maintenance Count"?`${c}: ${f} activities`:`${c}: ${f}%`}}}},scales:{x:{display:!0,title:{display:!0,text:"Month",font:{size:12,weight:"bold"}},grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Score (%)",font:{size:12,weight:"bold"}},min:0,max:100,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Maintenance Count",font:{size:12,weight:"bold"}},min:0,grid:{drawOnChartArea:!1,color:"rgba(0, 0, 0, 0.1)"}}}}};this.healthPerformanceChart=new ct(t,r),console.log("Health performance chart created successfully"),this.cdr.detectChanges()}catch(e){console.error("Error creating health performance chart:",e),setTimeout(()=>{console.log("Retrying health performance chart creation..."),this.createHealthPerformanceChart()},500)}},100)}processHealthPerformanceData(t){if(!t?.chart_data)return console.log("No chart data available, using mock data"),this.generateMockHealthPerformanceData();let e=t.chart_data;return console.log("Processing health performance data:",e),{labels:(e.dates||[]).map(s=>{if(s&&s.includes("-")){let[c,f]=s.split("-");return new Date(parseInt(c),parseInt(f)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}return s}),healthScores:e.health_scores||[],performanceScores:e.performance_scores||[],maintenanceCounts:e.maintenance_counts||[],metrics:e.metrics||{}}}generateMockHealthPerformanceData(){let e=[],r=[],s=[],c=[];for(let f=0;f<12;f++){let E=new Date;E.setMonth(E.getMonth()-(11-f)),e.push(E.toLocaleDateString("en-US",{month:"short",year:"2-digit"}));let P=85,j=f*2+Math.random()*5;r.push(Math.max(60,Math.round(P-j)));let se=90,pe=(Math.random()-.5)*10;s.push(Math.max(75,Math.round(se+pe))),c.push(Math.floor(Math.random()*5)+1)}return{labels:e,healthScores:r,performanceScores:s,maintenanceCounts:c,metrics:{average_health_score:Math.round(r.reduce((f,E)=>f+E,0)/r.length),average_performance_score:Math.round(s.reduce((f,E)=>f+E,0)/s.length),total_maintenance_count:c.reduce((f,E)=>f+E,0),health_trend:r[r.length-1]-r[0],performance_trend:s[s.length-1]-s[0]}}}refreshHealthPerformanceChart(){this.loadHealthPerformanceChart()}forceCreateHealthPerformanceChart(){if(console.log("Force creating health performance chart..."),console.log("Current health performance chart data:",this.healthPerformanceChartData),!this.healthPerformanceChartData){console.log("No data available, loading health performance chart..."),this.loadHealthPerformanceChart();return}this.createHealthPerformanceChart()}getHealthScoreColor(t){return t?t>=80?"text-green-600":t>=60?"text-yellow-600":t>=40?"text-orange-600":"text-red-600":"text-gray-400"}getHealthStatusColor(t){return t?t>=80?"text-green-600":t>=60?"text-yellow-600":t>=40?"text-orange-600":"text-red-600":"text-gray-600"}getHealthStatusText(t){return t?t>=80?"Excellent":t>=60?"Good":t>=40?"Fair":"Poor":"Unknown"}getAssetAge(){if(!this.asset?.purchase_date)return"Unknown";let t=new Date(this.asset.purchase_date),r=Math.abs(new Date().getTime()-t.getTime()),s=Math.ceil(r/(1e3*60*60*24));if(s<365)return`${Math.floor(s/30)} months`;{let c=Math.floor(s/365);return`${c} year${c>1?"s":""}`}}getUtilizationRate(){let t=this.asset?.health_score||0;return t>=80?95:t>=60?85:t>=40?70:50}getUptimePercentage(){let t=this.asset?.health_score||0;return t>=80?99.5:t>=60?98:t>=40?95:90}getMaintenanceFrequency(){let t=this.asset?.health_score||0;return t>=80?"Low":t>=60?"Medium":t>=40?"High":"Very High"}getMaintenanceFrequencyPercentage(){let t=this.asset?.health_score||0;return t>=80?20:t>=60?40:t>=40?60:80}getCostEfficiency(){let t=parseFloat(this.asset?.purchase_price)||0,e=this.calculateCurrentValue();if(t===0)return 85;let r=e/t*100;return Math.min(Math.max(r,0),100)}formatCurrency(t){return this.formatService.formatNumber(t,2)}getCurrencySymbol(){return this.currencyService.getSymbol()}calculateCurrentValue(){let t=parseFloat(this.asset?.purchase_price)||0,e=this.calculateDepreciation();return Math.round(Math.max(t-e,0)*100)/100}getROIColor(t){return t>=0?"text-green-600":"text-red-600"}getPerformanceTrend(){let t=this.asset?.health_score||0;return t>=80?"Improving":t>=60?"Stable":t>=40?"Declining":"Critical"}getCostEfficiencyTrend(){let t=this.getCostEfficiency();return t>=80?"Optimal":t>=60?"Good":t>=40?"Fair":"Poor"}getMaintenanceTrend(){let t=this.asset?.health_score||0;return t>=80?"Low":t>=60?"Stable":t>=40?"Increasing":"High"}getTrendColor(t){switch(t.toLowerCase()){case"improving":case"optimal":case"low":return"text-green-600";case"stable":case"good":return"text-blue-600";case"declining":case"fair":case"increasing":return"text-yellow-600";case"critical":case"poor":case"high":return"text-red-600";default:return"text-gray-600"}}getTrendIcon(t){switch(t.toLowerCase()){case"improving":case"optimal":return"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6";case"declining":case"critical":return"M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6";case"stable":case"good":case"fair":case"low":case"increasing":case"high":default:return"M20 12H4"}}getFinancialAlerts(){let t=[],e=this.asset?.health_score||0,r=this.calculateCurrentValue(),s=parseFloat(this.asset?.purchase_price)||0;return e<40&&t.push({message:"Asset health is critical - consider replacement",class:"bg-red-50 text-red-700"}),r<s*.3&&t.push({message:"Asset value has depreciated significantly",class:"bg-orange-50 text-orange-700"}),(this.asset?.warranty==="None"||!this.asset?.warranty)&&t.push({message:"No warranty coverage - maintenance costs may increase",class:"bg-yellow-50 text-yellow-700"}),t}getPredictiveAlerts(){let t=[],e=this.asset?.health_score||0,r=this.getAssetAge();return e<60&&t.push({title:"Maintenance Alert",message:"Schedule preventive maintenance within 30 days",class:"bg-orange-50 text-orange-700"}),e<40&&t.push({title:"Critical Alert",message:"Asset requires immediate attention",class:"bg-red-50 text-red-700"}),r.includes("year")&&parseInt(r)>5&&t.push({title:"Age Alert",message:"Asset is aging - consider replacement planning",class:"bg-blue-50 text-blue-700"}),t}uploadDocument(){console.log("Upload document")}compareWithSimilar(){console.log("Compare with similar assets")}scrollToSection(t){let e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}exportFinancialData(){console.log("Export financial data")}exportMaintenanceHistory(){console.log("Export maintenance history")}generateMaintenanceRecommendations(){console.log("Generate maintenance recommendations")}addMaintenanceCost(){console.log("Add maintenance cost")}viewCostHistory(){console.log("View cost history")}getWarrantyStatus(t){if(!t)return"No warranty";let e=new Date,r=new Date(t);if(r<e)return"Expired";{let s=Math.ceil((r.getTime()-e.getTime())/864e5);return s<=30?`Expires in ${s} days`:"Active"}}getWarrantyStatusClass(t){let e=this.getWarrantyStatus(t);return e==="Expired"?"text-red-600 font-medium":e.includes("Expires in")?"text-orange-600 font-medium":e==="Active"?"text-green-600 font-medium":"text-gray-500"}selectImage(t){this.asset.images&&t>=0&&t<this.asset.images.length&&(this.currentImageIndex=t,this.selectedImageUrl=this.asset.images[t].image_url)}previousImage(){if(this.asset.images&&this.asset.images.length>1){let t=this.currentImageIndex>0?this.currentImageIndex-1:this.asset.images.length-1;this.selectImage(t)}}nextImage(){if(this.asset.images&&this.asset.images.length>1){let t=this.currentImageIndex<this.asset.images.length-1?this.currentImageIndex+1:0;this.selectImage(t)}}copyAssetId(){let t=this.asset?.asset_id||this.asset?.id;t&&navigator.clipboard.writeText(t.toString()).then(()=>{this.toastService.success("Copied to clipboard")}).catch(e=>{console.error("Failed to copy asset ID:",e),this.toastService.error("Failed to copy asset ID")})}copySerialNumber(){this.asset?.serial_number&&navigator.clipboard.writeText(this.asset.serial_number).then(()=>{this.toastService.success("Copied to clipboard")}).catch(t=>{console.error("Failed to copy serial number:",t),this.toastService.error("Failed to copy serial number")})}calculateDepreciation(){if(!this.asset?.purchase_price)return 0;let t=this.asset.current_value||this.asset.purchase_price;return Math.round((this.asset.purchase_price-t)*100)/100}calculateDepreciationRate(){let t=this.asset?.depreciation||10;return Math.round(1/t*100)}getMaxDepreciationValue(){return this.asset?.purchase_price||1e4}getDepreciationPath(){let t=this.getMaxDepreciationValue(),e=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,r=new Date,s=10,c=new Date(e.getTime()+s*365.25*24*60*60*1e3),f=[],E=(c.getTime()-e.getTime())/(1e3*60*60*24);for(let P=0;P<=12;P++){let j=E*P/12,pe=(new Date(e.getTime()+j*24*60*60*1e3).getTime()-e.getTime())/(1e3*60*60*24*365.25),Ge=t/s,_t=Math.min(Ge*pe,t),S=Math.max(0,t-_t),Ut=P/12*100,qt=100-S/t*100;f.push(`${Ut},${qt}`)}return`M ${f.join(" L ")}`}getCurrentPeriodX(){if(!this.asset?.purchase_date)return 0;let t=new Date(this.asset.purchase_date),e=new Date,r=10,c=(new Date(t.getTime()+r*365.25*24*60*60*1e3).getTime()-t.getTime())/(1e3*60*60*24),f=(e.getTime()-t.getTime())/(1e3*60*60*24);return Math.min(100,Math.max(0,f/c*100))}getCurrentPeriodY(){let t=this.calculateCurrentValue(),e=this.getMaxDepreciationValue();return 100-t/e*100}getDepreciationDates(){let t=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,e=10,r=new Date(t.getTime()+e*365.25*24*60*60*1e3),s=[];for(let c=0;c<=12;c++){let f=(r.getTime()-t.getTime())/864e5*c/12;s.push(new Date(t.getTime()+f*24*60*60*1e3))}return s}calculateAnnualDepreciation(){return this.getMaxDepreciationValue()/10}calculateRemainingYears(){if(!this.asset?.purchase_date)return 10;let t=new Date(this.asset.purchase_date),e=new Date,r=10,s=(e.getTime()-t.getTime())/(1e3*60*60*24*365.25);return Math.round(Math.max(0,r-s)*100)/100}calculateTotalCostOfOwnership(){let t=this.asset?.purchase_price||0,e=this.asset?.total_maintenance_cost||0,r=this.asset?.operating_cost||0;return t+e+r}calculateROI(){let t=this.calculateTotalCostOfOwnership(),e=this.asset?.current_value||this.asset?.purchase_price||0;return t===0?0:Math.round((e-t)/t*100)}createWorkOrder(){console.log("Create work order for asset:",this.asset?.id)}transferAsset(){this.showTransferModal=!0}onTransferComplete(t){console.log("Transfer completed:",t),this.asset?.id&&this.loadAsset(this.asset.id.toString())}onTransferModalClose(){this.showTransferModal=!1}duplicateAsset(){this.asset&&this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:this.asset.id}})}onImageError(t){console.warn("Asset image failed to load:",t.target.src),t.target.onerror=null,t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onCategoryIconError(t,e){e&&(e.iconError=!0)}downloadQRCode(){if(this.qrCodeDataUrl){let t=document.createElement("a");t.href=this.qrCodeDataUrl,t.download=`asset-${this.asset.id}-qr.png`,t.click()}else if(this.asset?.qr_code_url){let t=document.createElement("a");t.href=this.asset.qr_code_url,t.download=`asset-${this.asset.id}-qr.png`,t.click()}else this.generateQRCode()}downloadBarcode(){if(this.asset?.barcode_url){let t=document.createElement("a");t.href=this.asset.barcode_url,t.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,t.click()}else if(this.barcodeDataUrl){let t=document.createElement("a");t.href=this.barcodeDataUrl,t.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,t.click()}else this.generateBarcode()}generateQRCode(){if(!this.asset)return;this.qrCodeLoading=!0;let t=`${window.location.origin}/public/asset/${this.asset.id}`;zt.toDataURL(t,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(e=>{this.qrCodeDataUrl=e,this.qrCodeLoading=!1}).catch(e=>{console.error("Error generating QR code:",e),this.qrCodeLoading=!1})}generateBarcode(){if(!this.asset?.asset_id)return;this.barcodeLoading=!0;let t=this.asset.asset_id,e=`https://quickchart.io/barcode?c=${encodeURIComponent(t)}&chs=300x100&chld=L%7C0&choe=UTF-8`;fetch(e).then(r=>r.blob()).then(r=>{let s=new FileReader;s.onloadend=()=>{this.barcodeDataUrl=s.result,this.barcodeLoading=!1},s.readAsDataURL(r)}).catch(r=>{console.error("Error generating barcode:",r),this.barcodeLoading=!1})}copyQRCodeUrl(){this.asset?.qr_code_url&&navigator.clipboard.writeText(this.asset.qr_code_url).then(()=>{console.log("QR code URL copied to clipboard")})}copyPublicUrl(){let t=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(t).then(()=>{console.log("Public URL copied to clipboard")})}get windowLocation(){return window.location.origin}showFullActivityHistory(){this.loadFullActivityHistory(),this.showActivityHistoryModal=!0}closeActivityHistoryModal(){this.showActivityHistoryModal=!1,this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.activityHistoryPagination=null}onActivityHistoryPageChange(t){this.activityHistoryParams.page=t,this.loadFullActivityHistory()}onActivityHistorySearch(t){this.activityHistoryParams.search=t,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistoryFilter(t,e){this.activityHistoryParams[t]=e,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistorySort(t,e){this.activityHistoryParams.sort_by=t,this.activityHistoryParams.sort_dir=e,this.loadFullActivityHistory()}clearActivityHistoryFilters(){this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.loadFullActivityHistory()}loadFullActivityHistory(){this.asset?.id&&(this.activityHistoryLoading=!0,this.activityHistoryError="",this.assetService.getActivityHistory(this.asset.id,this.activityHistoryParams).pipe(k(this.destroy$)).subscribe({next:t=>{t.success?(this.fullActivityHistory=t.data.data||[],this.activityHistoryPagination=t.data):this.activityHistoryError=t.message||"Failed to load full activity history",this.activityHistoryLoading=!1},error:t=>{this.activityHistoryError=t.error?.message||"An error occurred while loading full activity history",this.activityHistoryLoading=!1}}))}viewFullImage(t){window.open(t,"_blank")}formatActivityBeforeAfter(t,e){if(!t&&!e)return"";let r=[];if(t&&e){let s=Object.keys(t),c=Object.keys(e);for(let f of c)if(t[f]!==e[f]){let E=this.getFieldDisplayName(f);E&&r.push(`${E}: ${this.formatFieldValue(t[f])} \u0393\xE5\xC6 ${this.formatFieldValue(e[f])}`)}}else if(e){let s=["name","type","status","location_id","department_id","purchase_price"];for(let c of s)if(e[c]!==void 0&&e[c]!==null){let f=this.getFieldDisplayName(c);f&&r.push(`${f}: ${this.formatFieldValue(e[c])}`)}}else if(t){let s=["name","type","status"];for(let c of s)if(t[c]!==void 0&&t[c]!==null){let f=this.getFieldDisplayName(c);f&&r.push(`${f}: ${this.formatFieldValue(t[c])} (deleted)`)}}return r.length>0?r.join(", "):""}getFieldDisplayName(t){return{name:"Asset Name",type:"Type",model:"Model",status:"Status",description:"Description",location_id:"Location",department_id:"Department",purchase_price:"Purchase Price",purchase_date:"Purchase Date",serial_number:"Serial Number",asset_id:"Asset ID",warranty:"Warranty",insurance:"Insurance",depreciation:"Depreciation",health_score:"Health Score",manufacturer:"Manufacturer",category_id:"Category"}[t]||t.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase())}formatFieldValue(t){return t==null?"N/A":typeof t=="boolean"?t?"Yes":"No":typeof t=="number"?t.toString().includes(".")?`${this.getCurrencySymbol()}${this.formatService.formatNumber(t,2)}`:this.formatService.formatNumber(t,0):typeof t=="string"?t.match(/^\d{4}-\d{2}-\d{2}/)?new Date(t).toLocaleDateString():t:JSON.stringify(t)}getUserDisplayName(t){return t?t.name?t.name:t.email?t.email.split("@")[0]:"Unknown User":"System"}getActivityIcon(t){return{created:"M12 6v6m0 0v6m0-6h6m-6 0H6",updated:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",deleted:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",transferred:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",maintenance:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",imported:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"}[t]||"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}getActivityColor(t){return{created:"bg-green-100 text-green-600",updated:"bg-blue-100 text-blue-600",deleted:"bg-red-100 text-red-600",transferred:"bg-purple-100 text-purple-600",maintenance:"bg-orange-100 text-orange-600",imported:"bg-indigo-100 text-indigo-600"}[t]||"bg-gray-100 text-gray-600"}sharePublicUrl(){if(this.asset?.id){let t=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(t).then(()=>{console.log("Public URL copied to clipboard:",t),alert("Public URL copied to clipboard!")}).catch(e=>{console.error("Failed to copy URL:",e),alert("Failed to copy URL to clipboard")})}}loadAssetParts(){this.asset?.id&&this.assetService.getAssetParts(this.asset.id).subscribe({next:t=>{this.assetParts=t||[]},error:t=>{console.error("Error loading asset parts:",t),this.assetParts=[]}})}openPartsModal(){this.showPartsModal=!0}closePartsModal(){this.showPartsModal=!1}onPartsAdded(t){this.loadAssetParts(),this.toastService.success("Parts added successfully")}removePart(t){this.asset?.id&&confirm("Are you sure you want to remove this part?")&&this.assetService.removeAssetPart(this.asset.id,t).subscribe({next:()=>{this.loadAssetParts(),this.toastService.success("Part removed successfully")},error:e=>{console.error("Error removing part:",e),this.toastService.error("Failed to remove part")}})}getTotalPartsCost(){return this.assetParts.reduce((t,e)=>{let r=e.unit_cost||e.part?.unit_cost||0;return t+r*e.qty},0)}getAssetLocationId(){return this.asset?.location_id||void 0}loadAssetDocuments(){this.asset?.id&&this.assetService.getAssetDocuments(this.asset.id).subscribe({next:t=>{this.assetDocuments=t||[]},error:t=>{console.error("Error loading documents:",t),this.assetDocuments=[]}})}downloadDocument(t){t.document_url?window.open(t.document_url,"_blank"):this.toastService.error("Document URL not available")}removeDocument(t){this.asset?.id&&confirm("Are you sure you want to remove this document?")&&this.assetService.deleteAssetDocument(this.asset.id,t).subscribe({next:()=>{this.loadAssetDocuments(),this.toastService.success("Document removed successfully")},error:e=>{console.error("Error removing document:",e),this.toastService.error("Failed to remove document")}})}getDocumentIcon(t){let e={manual:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253",certificate:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z",warranty:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",other:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"};return e[t]||e.other}getDocumentTypeLabel(t){return{manual:"Manual",certificate:"Certificate",warranty:"Warranty",other:"Other"}[t]||t}getCriticalityBadgeClass(t){return{high:"bg-red-100 text-red-800",medium:"bg-orange-100 text-orange-800",low:"bg-green-100 text-green-800"}[t]||"bg-gray-100 text-gray-800"}isRtl(){return document.documentElement.dir==="rtl"}static \u0275fac=function(e){return new(e||a)(M(Ae),M(ne),M(Z),M(Ye),M(lt),M(ot),M(Qe),M(re),M(ke),M(Je))};static \u0275cmp=R({type:a,selectors:[["app-asset-view"]],viewQuery:function(e,r){if(e&1&&K(Qr,5),e&2){let s;ee(s=te())&&(r.dateInputs=s)}},decls:35,vars:13,consts:[["noImages",""],["dateInput",""],[1,"min-h-screen","bg-gray-50","asset-view-container"],[1,"bg-white","border-b","border-gray-200","px-6","py-4","print-hide"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],["aria-label","Breadcrumb",1,"flex"],[1,"flex","items-center","space-x-2"],["routerLink","/assets/list",1,"text-gray-500","hover:text-gray-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mx-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-gray-900","font-medium"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"relative",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","text-gray-600","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",3,"right-0","left-0",4,"ngIf"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],["class","fixed inset-0 bg-[#00000085] bg-opacity-50 flex items-center justify-center p-4","style","z-index: 1000;",4,"ngIf"],["class","fixed inset-0 bg-[#00000085] flex items-center justify-center p-4","style","z-index: 1000;",4,"ngIf"],[3,"closeModal","transferComplete","isOpen","asset"],[3,"closed","saved","isOpen","assetId","assetLocationId"],[1,"absolute","mt-2","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","px-4","py-2","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"border-t","border-gray-100","my-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"px-6","py-6"],[1,"bg-white","rounded-lg","p-6","mb-6","shadow-sm","border","border-gray-200"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-16","h-16","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"flex","items-center","space-x-4","flex-wrap"],["class","inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",3,"background-color","color",4,"ngIf"],["class","inline-flex items-center px-3 py-1 rounded-full text-sm font-medium capitalize",3,"ngClass",4,"ngIf"],[1,"text-gray-500"],[1,"mt-2"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","space-x-2","mb-2"],[1,"flex","items-center","space-x-1","px-2","py-1","text-sm","font-mono","bg-gray-100","rounded","hover:bg-gray-200","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["class","flex items-center space-x-2",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","p-6","shadow-sm","border","border-gray-200"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-lg","font-semibold","text-gray-900"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-2","mb-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"space-y-6"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],[1,"text-gray-600","leading-relaxed"],["class","text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",3,"click",4,"ngIf"],[1,"w-8","h-8","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","text-gray-900",4,"ngIf"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-xs","text-blue-600","hover:text-blue-800","font-medium","flex","items-center","gap-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","text-gray-500 text-sm",4,"ngIf"],["class","space-y-2",4,"ngIf"],[1,"text-gray-900","font-mono","text-lg","cursor-pointer",3,"click"],["title","Copy Asset ID",1,"p-1","text-gray-400","hover:text-gray-600","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","text-blue-600 hover:underline cursor-pointer",3,"routerLink",4,"ngIf"],[1,"text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","flex","flex-col","items-center"],[1,"w-32","h-32","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","QR Code","class","w-full h-full object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center text-gray-400",4,"ngIf"],[1,"mt-3","flex","space-x-2"],["class","text-sm text-blue-600 hover:text-blue-700 font-medium",3,"click",4,"ngIf"],["class","text-sm text-green-600 hover:text-green-700 font-medium",3,"click",4,"ngIf"],[1,"mt-2","text-xs","text-gray-500","text-center"],[1,"w-full","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","Barcode","class","w-full h-20 object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center py-4",4,"ngIf"],["class","text-center py-4",4,"ngIf"],["class","text-center text-gray-400 py-4",4,"ngIf"],["class","text-sm text-green-600 hover:text-green-700 font-medium cursor-pointer",3,"click",4,"ngIf"],["class","mt-1 font-mono",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","mb-1"],["class","mt-6 pt-6 border-t border-gray-200",4,"ngIf"],[1,"flex","items-center","justify-between","mb-6"],[1,"w-8","h-8","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-green-600","hover:bg-green-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",4,"ngIf"],["class","flex items-center justify-center h-64 bg-gray-50 rounded-lg",4,"ngIf"],["class","flex items-center justify-center h-64 bg-red-50 rounded-lg",4,"ngIf"],["class","relative h-64 bg-white border border-gray-200 rounded-lg p-4",4,"ngIf"],["class","text-center text-xs text-gray-500",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4"],[1,"w-8","h-8","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-orange-600","hover:bg-orange-50","rounded-lg","transition-colors",3,"click"],[1,"flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-6"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-gray-900"],[1,"bg-blue-50","rounded-lg","p-4"],[1,"text-2xl","font-bold","text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mt-4"],[1,"text-center","p-3","bg-gray-50","rounded-lg"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-center","mt-6"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"flex","items-center","space-x-2","px-3","py-1","text-sm","text-gray-600","hover:text-gray-800","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","space-y-3",4,"ngIf"],[1,"grid","grid-cols-1","gap-4","mb-6"],[1,"bg-green-50","rounded-lg","p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],[1,"text-sm","text-green-600"],[1,"font-semibold","text-green-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"text-sm","text-blue-600"],[1,"font-semibold","text-blue-800"],[1,"bg-purple-50","rounded-lg","p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],[1,"text-sm","text-purple-600"],[1,"font-semibold","text-purple-800"],["class","text-center py-6",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","font-medium","text-gray-700","mb-3"],[1,"space-y-2"],[1,"text-xs","text-gray-600"],[1,"text-sm","text-gray-900"],[1,"bg-orange-50","rounded-lg","p-4"],[1,"flex","items-center","space-x-2","mt-1"],["class","text-xs text-gray-500",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium","capitalize",3,"ngClass"],[1,"mb-4"],[1,"relative","bg-gray-100","rounded-lg","overflow-hidden",2,"height","400px"],[1,"w-full","h-full","object-contain","bg-white","cursor-pointer",3,"click","error","src","alt"],["class","absolute top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"left-2","right-2","click",4,"ngIf"],["class","absolute top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"right-2","left-2","click",4,"ngIf"],[1,"absolute","bottom-4","bg-black","bg-opacity-50","text-white","px-3","py-1","rounded-full","text-sm"],["class","mt-2 text-sm text-gray-600 text-center",4,"ngIf"],["class","grid grid-cols-6 gap-2",4,"ngIf"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-10","h-10","bg-black","bg-opacity-50","text-white","rounded-full","flex","items-center","justify-center","hover:bg-opacity-70","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"mt-2","text-sm","text-gray-600","text-center"],[1,"grid","grid-cols-6","gap-2"],["class","relative aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer border-2 transition-all",3,"border-blue-500","border-gray-200","click",4,"ngFor","ngForOf"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","cursor-pointer","border-2","transition-all",3,"click"],[1,"w-full","h-full","object-cover",3,"error","src","alt"],["class","absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white text-xs p-1 truncate",4,"ngIf"],[1,"absolute","bottom-0","left-0","right-0","bg-black","bg-opacity-75","text-white","text-xs","p-1","truncate"],[1,"text-center","py-12","bg-gray-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto","mb-4"],[1,"text-gray-600"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium","mt-2",3,"click"],[1,"w-5","h-5",3,"error","src","alt"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-sm","font-medium"],[1,"text-gray-500","text-sm"],["class","flex items-center justify-between p-2 bg-gray-50 rounded text-sm",4,"ngFor","ngForOf"],["class","pt-2 border-t border-gray-200 flex justify-between items-center",4,"ngIf"],[1,"flex","items-center","justify-between","p-2","bg-gray-50","rounded","text-sm"],[1,"flex-1"],[1,"font-medium","text-gray-900"],[1,"text-gray-600","text-xs"],[1,"flex","items-center","gap-3"],[1,"text-gray-900","font-medium","text-sm"],["type","button",1,"text-red-600","hover:text-red-800",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"pt-2","border-t","border-gray-200","flex","justify-between","items-center"],[1,"text-sm","font-bold","text-gray-900"],[1,"flex","items-center","gap-2"],["target","_blank",1,"px-2","py-1","text-xs","bg-blue-600","text-white","rounded","hover:bg-blue-700",3,"href"],[1,"text-blue-600","hover:underline","cursor-pointer",3,"routerLink"],["alt","QR Code",1,"w-full","h-full","object-contain",3,"src"],[1,"flex","items-center","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],["fill","currentColor","viewBox","0 0 24 24",1,"w-24","h-24","text-gray-400"],["d","M3 3h6v6H3V3zm2 2v2h2V5H5zm8-2h6v6h-6V3zm2 2v2h2V5h-2zM3 11h6v6H3v-6zm2 2v2h2v-2H5zm8 2h6v6h-6v-6zm2 2v2h2v-2h-2z"],[1,"text-xs","text-gray-500","mt-2","font-mono"],[1,"text-center","text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto"],[1,"text-xs","mt-2"],[1,"text-sm","text-blue-600","hover:text-blue-700","font-medium",3,"click"],[1,"text-sm","text-green-600","hover:text-green-700","font-medium",3,"click"],["alt","Barcode",1,"w-full","h-20","object-contain",3,"src"],[1,"flex","items-center","justify-center","py-4"],[1,"text-center","py-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto"],[1,"text-center","text-gray-400","py-4"],[1,"text-sm","text-green-600","hover:text-green-700","font-medium","cursor-pointer",3,"click"],[1,"mt-1","font-mono"],[1,"text-xs","text-gray-500"],[1,"text-gray-900","font-mono","cursor-pointer",3,"click"],[1,"p-1","text-gray-400","hover:text-gray-600","transition-colors","cursor-pointer",3,"click"],[1,"mt-6","pt-6","border-t","border-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-sm","text-gray-900","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-orange-600"],[1,"flex","items-center","justify-center","h-64","bg-gray-50","rounded-lg"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-green-100","rounded-full","mb-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4","text-green-600"],[1,"flex","items-center","justify-center","h-64","bg-red-50","rounded-lg"],[1,"text-red-600","text-sm","mb-2"],[1,"relative","h-64","bg-white","border","border-gray-200","rounded-lg","p-4"],["id","healthPerformanceChart","width","400","height","200"],[1,"text-center","text-xs","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-4"],[1,"text-lg","font-semibold",3,"ngClass"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-blue-100","rounded-full","mb-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4","text-blue-600"],["id","depreciationChart","width","400","height","200"],[1,"flex","items-center","justify-center","py-8"],[1,"text-center","py-8"],["class","flex items-start space-x-3",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-3"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"flex","items-center","justify-between","mb-1"],[1,"font-medium","text-gray-900","capitalize"],["class","text-xs text-gray-500 bg-gray-50 p-2 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","bg-gray-50","p-2","rounded","border"],[1,"text-xs","text-gray-500","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mx-auto","mb-4"],["class","w-full flex items-center px-4 py-2 hover:bg-gray-50 transition-colors",3,"text-left","text-right","text-blue-600","bg-blue-50","click",4,"ngFor","ngForOf"],[1,"text-sm"],[1,"space-y-3"],["class","flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["class","w-full h-full object-cover rounded-lg",3,"src","alt","error",4,"ngIf"],["class","w-6 h-6 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"font-medium","text-gray-900","truncate"],[1,"flex","items-center","space-x-2","mb-1"],[1,"text-gray-400"],[1,"text-xs","px-2","py-1","rounded-full","font-medium",3,"ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","flex-shrink-0"],[1,"w-full","h-full","object-cover","rounded-lg",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-center","py-6"],[1,"inline-flex","items-center","justify-center","w-6","h-6","bg-blue-100","rounded-full"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-3","h-3","text-blue-600"],["class","border border-gray-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-3"],[1,"font-medium","text-gray-900","text-sm"],[1,"flex","items-center","space-x-1"],[1,"p-1","text-gray-400","hover:text-blue-600","transition-colors",3,"click"],[1,"p-1","text-gray-400","hover:text-red-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"space-y-1","text-xs"],[1,"ml-1","text-gray-900"],["class","mt-2 text-xs text-gray-600",4,"ngIf"],[1,"mt-2","text-xs","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400","mx-auto","mb-2"],[1,"text-sm","font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-600","mb-3"],[1,"px-3","py-1","bg-blue-600","text-white","rounded","text-xs","hover:bg-blue-700","transition-colors",3,"click"],[1,"fixed","inset-0","bg-[#00000085]","bg-opacity-50","flex","items-center","justify-center","p-4",2,"z-index","1000"],[1,"bg-white","rounded-lg","max-w-md","w-full","p-6","shadow-lg"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],[3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["formControlName","schedule_type",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value",""],["value","Preventive"],["value","Inspection"],["value","Calibration"],["value","Cleaning"],["type","text","formControlName","next_due","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","text","formControlName","last_done","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","frequency",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Weekly"],["value","Monthly"],["value","Quarterly"],["value","Semi-Annual"],["value","Annual"],["formControlName","notes","rows","3","placeholder","Additional notes...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"flex","items-center","justify-end","space-x-3","mt-6"],["type","button",1,"bg-gray-200","text-gray-700","px-4","py-2","rounded-lg","hover:bg-gray-300","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","disabled:opacity-50","transition-colors",3,"disabled"],[1,"border-t-transparent","animate-spin","inline-block","w-5","h-5","border-2","rounded-full","border-white"],[1,"bg-white","rounded-lg","max-w-md","w-full","p-6"],["formControlName","status",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Scheduled"],["value","In Progress"],["value","Completed"],["value","Overdue"],["type","button",1,"bg-gray-200","px-4","py-2","rounded-lg","hover:bg-gray-300","transition-colors",3,"click"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","p-4",2,"z-index","1000"],[1,"bg-white","rounded-lg","max-w-4xl","w-full","max-h-[90vh]","flex","flex-col"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex-1","overflow-auto","p-6"],[1,"mb-6","space-y-4"],[1,"flex","space-x-4"],["type","text","placeholder","Search activities...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"input"],[1,"px-4","py-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","created"],["value","updated"],["value","deleted"],["value","transferred"],["value","maintenance"],["value","imported"],["type","date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","desc"],["value","asc"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","space-y-4 max-h-[60vh] overflow-y-auto",4,"ngIf"],["class","mt-6 flex items-center justify-between",4,"ngIf"],[1,"flex","items-center","justify-between","p-6","border-t","border-gray-200","bg-gray-50"],[1,"px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","items-center","justify-center","py-12"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-6","h-6","text-blue-600"],[1,"text-center","py-12"],[1,"text-red-600","mb-4"],[1,"space-y-4","max-h-[60vh]","overflow-y-auto"],["class","flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-4","p-4","bg-gray-50","rounded-lg"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"font-semibold","text-gray-900","capitalize"],[1,"text-xs","text-gray-500","bg-white","px-2","py-1","rounded-full"],[1,"text-sm","text-gray-600","mb-2"],["class","text-xs text-gray-500 bg-white p-3 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-2",4,"ngIf"],[1,"text-xs","text-gray-500","bg-white","p-3","rounded","border"],[1,"font-medium","mb-1"],[1,"text-xs","text-gray-500","mt-2"],[1,"mt-6","flex","items-center","justify-between"],[1,"flex","space-x-2"],["class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"px-3","py-1","text-sm","border","border-gray-300","rounded","hover:bg-gray-50","transition-colors",3,"click"]],template:function(e,r){e&1&&(i(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"nav",6)(5,"ol",7)(6,"li")(7,"a",8),o(8,"Assets"),n()(),i(9,"li"),h(),i(10,"svg",9),p(11,"path",10),n()(),x(),i(12,"li",11),o(13),n()()()(),i(14,"div",12)(15,"button",13),_("click",function(){return r.editAsset()}),h(),i(16,"svg",14),p(17,"path",15),n(),x(),i(18,"span"),o(19,"Edit Asset"),n()(),i(20,"div",16),_("click",function(c){return c.stopPropagation()}),i(21,"button",17),_("click",function(){return r.showActionsDropdown=!r.showActionsDropdown}),h(),i(22,"svg",18),p(23,"circle",19)(24,"circle",20)(25,"circle",21),n()(),v(26,Xr,27,44,"div",22),n()()()(),v(27,Kr,10,0,"div",23)(28,ea,11,1,"div",23)(29,To,464,123,"div",24)(30,Do,60,3,"div",25)(31,Fo,72,3,"div",25)(32,Wo,62,5,"div",26),x(),i(33,"app-transfer-asset-modal",27),_("closeModal",function(){return r.onTransferModalClose()})("transferComplete",function(c){return r.onTransferComplete(c)}),n(),i(34,"app-add-asset-parts-modal",28),_("closed",function(){return r.closePartsModal()})("saved",function(c){return r.onPartsAdded(c)}),n()()),e&2&&(l(13),y((r.asset==null?null:r.asset.name)||"Asset Details"),l(13),m("ngIf",r.showActionsDropdown),l(),m("ngIf",r.loading),l(),m("ngIf",r.error&&!r.loading),l(),m("ngIf",r.asset&&!r.loading),l(),m("ngIf",r.showAddMaintenanceModal),l(),m("ngIf",r.showEditMaintenanceModal),l(),m("ngIf",r.showActivityHistoryModal),l(),m("isOpen",r.showTransferModal)("asset",r.asset),l(),m("isOpen",r.showPartsModal)("assetId",(r.asset==null?null:r.asset.id)||0)("assetLocationId",r.getAssetLocationId()))},dependencies:[N,Et,X,B,Ze,At,de,Me,st,ve,Te,Ve,G,Ie,z,he,tt,it,je,He,De,ye],styles:[".asset-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.asset-image-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:.5rem;min-height:16rem;display:flex;align-items:center;justify-content:center}.info-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.health-score-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669);transition:width .3s ease-in-out}.chart-placeholder[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:.5rem}.chart-placeholder[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.ai-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.ai-button[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.ai-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.action-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;border-radius:.5rem;padding:.5rem 1rem;margin:-.5rem -1rem}.status-badge[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px}.section-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.section-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:1rem}.empty-state[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.lg\\:col-span-2[_ngcontent-%COMP%]{grid-column:span 1}.asset-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media print{.bg-white.border-b[_ngcontent-%COMP%], .flex.items-center.justify-between[_ngcontent-%COMP%], .bg-white.rounded-lg.p-6.shadow-sm.border.border-gray-200[_ngcontent-%COMP%]:has(button), button[_ngcontent-%COMP%], .relative[_ngcontent-%COMP%], .dropdown[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%], .fixed[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%], .actions-dropdown[_ngcontent-%COMP%], .quick-actions[_ngcontent-%COMP%], .print-hide[_ngcontent-%COMP%]{display:none!important}.bg-white.rounded-lg.p-6.shadow-sm.border.border-gray-200[_ngcontent-%COMP%]{border:1px solid #ddd!important;box-shadow:none!important;margin-bottom:20px!important;page-break-inside:avoid}.grid.grid-cols-1.lg\\\\[_ngcontent-%COMP%]:grid-cols-3{display:block!important}.lg\\\\[_ngcontent-%COMP%]:col-span-2{width:100%!important}body[_ngcontent-%COMP%]{margin:0!important;padding:20px!important;background:#fff!important}*[_ngcontent-%COMP%]{color:#000!important;background:#fff!important}.asset-image-container[_ngcontent-%COMP%]{border:1px solid #000!important;background:#fff!important;max-width:100%!important}.qr-section[_ngcontent-%COMP%], .barcode-section[_ngcontent-%COMP%]{text-align:center!important;page-break-inside:avoid}table[_ngcontent-%COMP%]{width:100%!important;border-collapse:collapse!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd!important;padding:8px!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{color:#000!important;page-break-after:avoid}.status-badge[_ngcontent-%COMP%]{border:1px solid #000!important;background:#fff!important;color:#000!important}}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.asset-view[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}.value-display[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums}.section-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:.75rem;margin-bottom:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ai-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#faf5ff,#f3e8ff);border:1px solid #e9d5ff}.financial-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1px solid #bbf7d0}.technical-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:1px solid #bfdbfe}"]})};var Qo=["fileInput"],Yo=["dateInput"],vt=()=>({standalone:!0});function Zo(a,t){a&1&&(i(0,"div",15)(1,"div",16)(2,"div",17),h(),i(3,"svg",18),p(4,"circle",19)(5,"path",20),n()(),x(),i(6,"h3",21),o(7,"Loading Asset"),n(),i(8,"p",22),o(9,"Please wait while we fetch the asset details..."),n()()())}function Jo(a,t){if(a&1){let e=b();i(0,"div",15)(1,"div",16)(2,"div",23),h(),i(3,"svg",24),p(4,"path",25),n()(),x(),i(5,"h3",21),o(6,"Error Loading Asset"),n(),i(7,"p",26),o(8),n(),i(9,"button",27),_("click",function(){u(e);let s=d();return g(s.goBack())}),o(10," Back to Assets "),n()()()}if(a&2){let e=d();l(8),y(e.error)}}function Xo(a,t){if(a&1&&(i(0,"div",128),h(),i(1,"svg",129),p(2,"path",25),n(),o(3),n()),a&2){let e=d(2);l(3),C(" ",e.nameError," ")}}function Ko(a,t){a&1&&(i(0,"span",69),o(1,"Select parent asset"),n())}function es(a,t){if(a&1&&(i(0,"span",130),o(1),n()),a&2){let e=d(2);l(),A(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function ts(a,t){if(a&1){let e=b();i(0,"button",134),_("click",function(){let s,c=u(e).$implicit,f=d(3);return(s=f.assetForm.get("parent_id"))==null||s.setValue(c.id),g(f.showParentDropdown=!1)}),i(1,"div",136)(2,"div",137),h(),i(3,"svg",138),p(4,"path",65),n()(),x(),i(5,"div")(6,"div",139),o(7),n(),i(8,"div",140),o(9),n()()()()}if(a&2){let e,r=t.$implicit,s=d(3);w("bg-blue-50",((e=s.assetForm.get("parent_id"))==null?null:e.value)===r.id),l(7),y(r.name),l(2),y(r.asset_id)}}function is(a,t){if(a&1){let e=b();i(0,"div",131)(1,"div",132)(2,"div",133),o(3,"Select parent asset"),n(),i(4,"button",134),_("click",function(){let s;u(e);let c=d(2);return(s=c.assetForm.get("parent_id"))==null||s.setValue(null),g(c.showParentDropdown=!1)}),o(5," -- None -- "),n(),v(6,ts,10,4,"button",135),n()()}if(a&2){let e,r=d(2);l(4),w("bg-blue-50",!((e=r.assetForm.get("parent_id"))!=null&&e.value)),l(2),m("ngForOf",r.possibleParents)}}function ns(a,t){a&1&&(i(0,"span",69),o(1,"Select asset type"),n())}function rs(a,t){if(a&1){let e=b();i(0,"img",144),_("error",function(s){u(e);let c=d(3);return g(c.onAssetTypeIconError(s,c.selectedAssetType))}),n()}if(a&2){let e=d(3);m("src",e.selectedAssetType.icon,L)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function as(a,t){if(a&1&&(h(),i(0,"svg",145),p(1,"path",146),n()),a&2){let e=d(3);H("color",e.selectedAssetType.color)}}function os(a,t){if(a&1&&(i(0,"div",136)(1,"div",141),v(2,rs,1,2,"img",142)(3,as,2,2,"svg",143),n(),i(4,"span",130),o(5),n()()),a&2){let e=d(2);l(),H("background-color",e.selectedAssetType.color+"20"),l(),m("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),l(),m("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),l(2),y(e.selectedAssetType.label)}}function ss(a,t){if(a&1){let e=b();i(0,"img",151),_("error",function(s){u(e);let c=d().$implicit,f=d(3);return g(f.onAssetTypeIconError(s,c))}),n()}if(a&2){let e=d().$implicit;m("src",e.icon,L)("alt",e.name||e.label)}}function ls(a,t){a&1&&(h(),i(0,"svg",32),p(1,"path",146),n())}function cs(a,t){if(a&1){let e=b();i(0,"button",134),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.selectAssetType(s))}),i(1,"div",136)(2,"div",148),v(3,ss,1,2,"img",149)(4,ls,2,0,"svg",150),n(),i(5,"div")(6,"div",139),o(7),n(),i(8,"div",22),o(9),n()()()()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id)("text-blue-700",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id),l(3),m("ngIf",e.icon&&!e.iconError),l(),m("ngIf",!e.icon||e.iconError),l(3),y(e.label||e.name),l(2),y(e.description)}}function ds(a,t){if(a&1&&(i(0,"div",131)(1,"div",132)(2,"div",133),o(3,"Select asset type"),n(),v(4,cs,10,8,"button",147),n()()),a&2){let e=d(2);l(4),m("ngForOf",e.assetTypes)}}function ms(a,t){if(a&1&&(i(0,"div",128),h(),i(1,"svg",129),p(2,"path",25),n(),o(3),n()),a&2){let e=d(2);l(3),C(" ",e.assetTypeError," ")}}function ps(a,t){a&1&&(i(0,"span",69),o(1,"Select category"),n())}function us(a,t){if(a&1&&(i(0,"span",130),o(1),n()),a&2){let e=d(2);l(),y(e.selectedCategory.name)}}function gs(a,t){if(a&1){let e=b();i(0,"img",151),_("error",function(s){u(e);let c=d().$implicit,f=d(3);return g(f.onCategoryIconError(s,c))}),n()}if(a&2){let e=d().$implicit;m("src",e.icon,L)("alt",e.name)}}function _s(a,t){a&1&&(h(),i(0,"svg",138),p(1,"path",65),n())}function fs(a,t){if(a&1&&(i(0,"div",22),o(1),n()),a&2){let e=d().$implicit;l(),y(e.description)}}function hs(a,t){if(a&1){let e=b();i(0,"button",134),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.selectCategory(s))}),i(1,"div",136)(2,"div",137),v(3,gs,1,2,"img",149)(4,_s,2,0,"svg",152),n(),i(5,"div")(6,"div",139),o(7),n(),v(8,fs,2,1,"div",103),n()()()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("text-blue-700",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id),l(3),m("ngIf",e.icon),l(),m("ngIf",!e.icon||e.iconError),l(3),y(e.name),l(),m("ngIf",e.description)}}function vs(a,t){if(a&1&&(i(0,"div",131)(1,"div",132)(2,"div",133),o(3,"Select category"),n(),v(4,hs,9,8,"button",147),n()()),a&2){let e=d(2);l(4),m("ngForOf",e.categories)}}function xs(a,t){if(a&1&&(i(0,"div",128),h(),i(1,"svg",129),p(2,"path",25),n(),o(3),n()),a&2){let e=d(2);l(3),C(" ",e.categoryError," ")}}function ys(a,t){a&1&&(i(0,"div",158),o(1,"Loading parts..."),n())}function bs(a,t){a&1&&(i(0,"div",158),o(1,"No parts available"),n())}function ws(a,t){if(a&1){let e=b();i(0,"button",159),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.selectInventoryPart(s))}),i(1,"div",45)(2,"div")(3,"div",139),o(4),n(),i(5,"div",22),o(6),n()()()()}if(a&2){let e=t.$implicit;l(4),y(e.name),l(2),y(e.part_number)}}function Cs(a,t){if(a&1){let e=b();i(0,"div",131)(1,"div",153)(2,"input",154),V("ngModelChange",function(s){u(e);let c=d(2);return T(c.inventoryPartsSearch,s)||(c.inventoryPartsSearch=s),g(s)}),_("ngModelChange",function(){u(e);let s=d(2);return g(s.showInventoryPartsDropdown=!0)}),n()(),i(3,"div",155),v(4,ys,2,0,"div",156)(5,bs,2,0,"div",156)(6,ws,7,2,"button",157),n()()}if(a&2){let e=d(2);l(2),I("ngModel",e.inventoryPartsSearch),l(2),m("ngIf",e.isLoadingInventoryParts),l(),m("ngIf",!e.isLoadingInventoryParts&&e.getFilteredInventoryParts().length===0),l(),m("ngForOf",e.getFilteredInventoryParts())}}function Ss(a,t){if(a&1){let e=b();i(0,"div",162)(1,"span"),o(2),n(),i(3,"button",163),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.removeInventoryPart(s.id))}),h(),i(4,"svg",145),p(5,"path",164),n()()()}if(a&2){let e=t.$implicit;l(2),A("",e.name," (",e.part_number,")")}}function Es(a,t){if(a&1&&(i(0,"div",160),v(1,Ss,6,2,"div",161),n()),a&2){let e=d(2);l(),m("ngForOf",e.selectedInventoryParts)}}function As(a,t){if(a&1&&(i(0,"div",128),h(),i(1,"svg",129),p(2,"path",25),n(),o(3),n()),a&2){let e=d(2);l(3),C(" ",e.serialNumberError," ")}}function Ms(a,t){if(a&1&&(i(0,"option",165),o(1),n()),a&2){let e=t.$implicit;m("value",e),l(),y(e)}}function ks(a,t){a&1&&(i(0,"span",69),o(1,"Select location"),n())}function Is(a,t){if(a&1&&(i(0,"div",136)(1,"div",166),h(),i(2,"svg",167),p(3,"path",97)(4,"path",98),n()(),x(),i(5,"span",130),o(6),n()()),a&2){let e=d(2);l(6),y(e.selectedLocation.label||e.selectedLocation.name)}}function Ts(a,t){if(a&1&&(i(0,"div",22),o(1),n()),a&2){let e=d().$implicit;l(),y(e.type.name)}}function Vs(a,t){if(a&1){let e=b();i(0,"button",134),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.selectLocation(s))}),i(1,"div",136)(2,"div",168),h(),i(3,"svg",96),p(4,"path",97)(5,"path",98),n()(),x(),i(6,"div")(7,"div",139),o(8),n(),v(9,Ts,2,1,"div",103),n()()()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id)("text-blue-700",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id),l(8),y(r.getLocationLabel(e)),l(),m("ngIf",e.type)}}function Ps(a,t){if(a&1&&(i(0,"div",131)(1,"div",132)(2,"div",133),o(3,"Select location"),n(),v(4,Vs,10,6,"button",147),n()()),a&2){let e=d(2);l(4),m("ngForOf",e.locations)}}function Ds(a,t){a&1&&(i(0,"span",69),o(1,"Select department"),n())}function Ls(a,t){if(a&1&&(i(0,"div",136)(1,"div",169),h(),i(2,"svg",170),p(3,"path",171),n()(),x(),i(4,"span",130),o(5),n()()),a&2){let e=d(2);l(5),y(e.selectedDepartment.name)}}function Os(a,t){if(a&1&&(i(0,"div",22),o(1),n()),a&2){let e=d().$implicit;l(),y(e.description)}}function Fs(a,t){if(a&1&&(i(0,"div",174),o(1),n()),a&2){let e=d().$implicit;l(),C("Code: ",e.code,"")}}function Hs(a,t){if(a&1){let e=b();i(0,"button",134),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.selectDepartment(s))}),i(1,"div",136)(2,"div",172),h(),i(3,"svg",64),p(4,"path",171),n()(),x(),i(5,"div")(6,"div",139),o(7),n(),v(8,Os,2,1,"div",103)(9,Fs,2,1,"div",173),n()()()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id)("text-blue-700",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id),l(7),y(e.name),l(),m("ngIf",e.description),l(),m("ngIf",e.code)}}function js(a,t){if(a&1&&(i(0,"div",131)(1,"div",132)(2,"div",133),o(3,"Select department"),n(),v(4,Hs,10,7,"button",147),n()()),a&2){let e=d(2);l(4),m("ngForOf",e.departments)}}function Rs(a,t){if(a&1&&(i(0,"div",136),p(1,"div",175),i(2,"span",130),o(3),n()()),a&2){let e=d(2);l(),H("background-color",e.selectedStatus.hexColor||"#6B7280"),l(2),y(e.selectedStatus.label)}}function Bs(a,t){a&1&&(i(0,"span",69),o(1,"Select status"),n())}function Ns(a,t){if(a&1){let e=b();i(0,"button",134),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.selectStatus(s))}),i(1,"div",136)(2,"div"),p(3,"div",175),n(),i(4,"div")(5,"div",139),o(6),n(),i(7,"div",22),o(8),n()()()()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value)("text-blue-700",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value),l(2),U("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),l(),H("background-color",e.hexColor||"#6B7280"),l(3),y(e.label),l(2),y(e.description)}}function Gs(a,t){if(a&1&&(i(0,"div",176)(1,"div",132)(2,"div",133),o(3,"Select status"),n(),v(4,Ns,9,10,"button",147),n()()),a&2){let e=d(2);l(4),m("ngForOf",e.statusOptions)}}function zs(a,t){if(a&1){let e=b();i(0,"span"),o(1),i(2,"button",180),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.removeTag(s))}),h(),i(3,"svg",181),p(4,"path",164),n()()()}if(a&2){let e=t.$implicit;U("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),l(),C(" ",e.name," ")}}function $s(a,t){if(a&1&&(i(0,"div",177)(1,"div",178),v(2,zs,5,3,"span",179),n()()),a&2){let e=d(2);l(2),m("ngForOf",e.selectedTags)}}function Us(a,t){if(a&1&&(i(0,"span",22),o(1),n()),a&2){let e=d(2);l(),C(" ",e.selectedTags.length," selected ")}}function qs(a,t){a&1&&(i(0,"div",186),h(),i(1,"svg",145),p(2,"path",187),n()())}function Ws(a,t){if(a&1){let e=b();i(0,"button",134),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.toggleTag(s))}),i(1,"div",45)(2,"div",136)(3,"div"),p(4,"div"),n(),i(5,"span",139),o(6),n()(),v(7,qs,3,0,"div",185),n()()}if(a&2){let e=t.$implicit,r=d(3);w("bg-blue-50",r.isTagSelected(e)),l(3),U("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),l(),U("w-3 h-3 rounded-full bg-"+e.color+"-500"),l(2),y(e.name),l(),m("ngIf",r.isTagSelected(e))}}function Qs(a,t){if(a&1){let e=b();i(0,"div",131)(1,"div",132)(2,"div",182)(3,"div",86)(4,"input",183),V("ngModelChange",function(s){u(e);let c=d(2);return T(c.newTagInput,s)||(c.newTagInput=s),g(s)}),_("keydown",function(s){u(e);let c=d(2);return g(c.onTagInputKeydown(s))})("click",function(s){return u(e),g(s.stopPropagation())}),n(),i(5,"div",184),o(6," Press Enter "),n()()(),i(7,"div",133),o(8,"Select tags"),n(),v(9,Ws,8,8,"button",135),n()()}if(a&2){let e=d(2);l(4),I("ngModel",e.newTagInput),m("ngModelOptions",ce(3,vt)),l(5),m("ngForOf",e.availableTags)}}function Ys(a,t){if(a&1){let e=b();i(0,"div",196)(1,"div",197)(2,"img",198),_("error",function(s){let c=u(e).index,f=d(3);return g(f.onImageError(s,c))}),n(),i(3,"div",199)(4,"div",200)(5,"button",201),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.viewFullImage(s.image_url))}),h(),i(6,"svg",145),p(7,"path",202)(8,"path",203),n()()()(),x(),i(9,"button",204),_("click",function(){let s=u(e).index,c=d(3);return g(c.removeExistingImage(s))}),h(),i(10,"svg",145),p(11,"path",164),n()(),x(),i(12,"div",205),o(13," Existing "),n()(),i(14,"div",206)(15,"p",207),o(16),n(),i(17,"p",140),o(18,"Existing Image"),n()(),i(19,"div",208)(20,"input",209),_("input",function(s){let c=u(e).index,f=d(3);return g(f.updateImageCaption(c,s.target.value))}),n()()()}if(a&2){let e=t.$implicit,r=t.index;l(2),m("src",e.image_url,L)("alt","Existing Asset Image "+(r+1)),l(14),y(e.image_path.split("/").pop()),l(4),m("value",e.caption||"")}}function Zs(a,t){if(a&1){let e=b();i(0,"button",201),_("click",function(){u(e);let s=d().index,c=d(3);return g(c.moveImageUp(s))}),h(),i(1,"svg",145),p(2,"path",215),n()()}}function Js(a,t){if(a&1){let e=b();i(0,"button",201),_("click",function(){u(e);let s=d().index,c=d(3);return g(c.moveImageDown(s))}),h(),i(1,"svg",145),p(2,"path",49),n()()}}function Xs(a,t){if(a&1){let e=b();i(0,"div",196)(1,"div",197)(2,"img",210),_("error",function(s){let c=u(e).index,f=d(3);return g(f.onImageError(s,f.existingImages.length+c))})("load",function(s){let c=u(e).index,f=d(3);return g(f.onImageLoad(s,f.existingImages.length+c))}),n(),i(3,"div",211)(4,"div",200),v(5,Zs,3,0,"button",212)(6,Js,3,0,"button",212),n()(),i(7,"button",204),_("click",function(){let s=u(e).index,c=d(3);return g(c.removeImage(s))}),h(),i(8,"svg",145),p(9,"path",164),n()(),x(),i(10,"div",213),o(11," New "),n()(),i(12,"div",206)(13,"p",207),o(14),n(),i(15,"p",140),o(16),D(17,"numberFormat"),n()(),i(18,"div",208)(19,"input",214),_("input",function(s){let c=u(e).index,f=d(3);return g(f.updateImageCaption(f.existingImages.length+c,s.target.value))}),n()()()}if(a&2){let e,r=t.$implicit,s=t.index,c=d(3);l(2),m("src",r,L)("alt","Asset Image "+(s+1)),l(3),m("ngIf",s>0),l(),m("ngIf",s<c.imagePreviewUrls.length-1),l(8),y(c.images[s]==null?null:c.images[s].name),l(2),C("",O(17,7,((e=c.images[s]==null?null:c.images[s].size)!==null&&e!==void 0?e:0)/1024/1024,1)," MB"),l(3),m("value",c.imageCaptions[c.existingImages.length+s]||"")}}function Ks(a,t){if(a&1){let e=b();i(0,"div",68)(1,"div",188)(2,"h4",189),o(3),n(),i(4,"button",190),_("click",function(){u(e);let s=d(2);return s.removeAllImages(),g(s.removeAllExistingImages())}),o(5," Remove All "),n()(),i(6,"div",191),v(7,Ys,21,4,"div",192)(8,Xs,20,10,"div",192),n(),i(9,"div",193)(10,"div",102),h(),i(11,"svg",194),p(12,"path",105),n(),x(),i(13,"p",195)(14,"strong"),o(15,"Gallery Tips:"),n(),o(16," Existing images are preserved. New images can be reordered. Green badges indicate existing images, blue badges indicate new uploads. "),n()()()()}if(a&2){let e=d(2);l(3),C("Asset Images (",e.existingImages.length+e.imagePreviewUrls.length,")"),l(4),m("ngForOf",e.existingImages),l(),m("ngForOf",e.imagePreviewUrls)}}function el(a,t){if(a&1){let e=b();i(0,"div",219)(1,"div",220)(2,"p",221),o(3),n(),i(4,"p",140),o(5),D(6,"numberFormat"),n()(),i(7,"div",102)(8,"a",222),o(9," Download "),n(),i(10,"button",223),_("click",function(){let s=u(e).$implicit,c=d(3);return g(c.removeExistingDocument(s.id))}),o(11," Delete "),n()()()}if(a&2){let e,r=t.$implicit,s=d(3);l(3),y(r.document_name),l(2),A("",s.getDocumentTypeLabel(r.document_type)," - ",O(6,4,((e=r.file_size)!==null&&e!==void 0?e:0)/1024/1024,2)," MB"),l(3),m("href",r.document_url,L)}}function tl(a,t){if(a&1&&(i(0,"div",68)(1,"h4",216),o(2),n(),i(3,"div",217),v(4,el,12,7,"div",218),n()()),a&2){let e=d(2);l(2),C("Existing Documents (",e.existingDocuments.length,")"),l(2),m("ngForOf",e.existingDocuments)}}function il(a,t){if(a&1){let e=b();i(0,"div",225)(1,"div",226)(2,"div",220)(3,"div",227)(4,"label",228),o(5,"Document Name "),i(6,"span",39),o(7,"*"),n()(),i(8,"input",229),V("ngModelChange",function(s){let c=u(e).index,f=d(3);return T(f.documentMetadata[c].name,s)||(f.documentMetadata[c].name=s),g(s)}),n()(),i(9,"div",227)(10,"label",228),o(11,"Document Type "),i(12,"span",39),o(13,"*"),n()(),i(14,"select",230),V("ngModelChange",function(s){let c=u(e).index,f=d(3);return T(f.documentMetadata[c].type,s)||(f.documentMetadata[c].type=s),g(s)}),i(15,"option",231),o(16,"Manual"),n(),i(17,"option",232),o(18,"Certificate"),n(),i(19,"option",233),o(20,"Warranty"),n(),i(21,"option",234),o(22,"Other"),n()()(),i(23,"div",140)(24,"span",10),o(25),n(),o(26),D(27,"numberFormat"),n()(),i(28,"button",235),_("click",function(){let s=u(e).index,c=d(3);return g(c.removeDocument(s))}),h(),i(29,"svg",8),p(30,"path",164),n()()()()}if(a&2){let e,r=t.$implicit,s=t.index,c=d(3);l(8),I("ngModel",c.documentMetadata[s].name),m("ngModelOptions",ce(9,vt)),l(6),I("ngModel",c.documentMetadata[s].type),m("ngModelOptions",ce(10,vt)),l(11),y(r.name),l(),C(" - ",O(27,6,((e=r.size)!==null&&e!==void 0?e:0)/1024/1024,2)," MB ")}}function nl(a,t){if(a&1){let e=b();i(0,"div",68)(1,"div",188)(2,"h4",189),o(3),n(),i(4,"button",190),_("click",function(){u(e);let s=d(2);return s.documents=[],g(s.documentMetadata=[])}),o(5," Remove All "),n()(),i(6,"div",217),v(7,il,31,11,"div",224),n()()}if(a&2){let e=d(2);l(3),C("New Documents (",e.documents.length,")"),l(4),m("ngForOf",e.documents)}}function rl(a,t){if(a&1&&(i(0,"div",236)(1,"div",102),h(),i(2,"svg",237),p(3,"path",25),n(),x(),i(4,"p",238),o(5),n()()()),a&2){let e=d(2);l(5),y(e.submitError)}}function al(a,t){if(a&1&&(i(0,"div",239)(1,"div",102),h(),i(2,"svg",72),p(3,"path",187),n(),x(),i(4,"p",240),o(5),n()()()),a&2){let e=d(2);l(5),y(e.submitSuccess)}}function ol(a,t){a&1&&(i(0,"span",102),h(),i(1,"svg",241),p(2,"path",187),n(),x(),i(3,"span"),o(4,"Update Asset"),n()())}function sl(a,t){a&1&&(i(0,"span",102),h(),i(1,"svg",242),p(2,"circle",19)(3,"path",20),n(),x(),i(4,"span"),o(5,"Updating Asset..."),n()())}function ll(a,t){if(a&1){let e=b();i(0,"div")(1,"form",28),_("ngSubmit",function(){u(e);let s=d();return g(s.onSubmit())}),i(2,"div",29)(3,"div",30)(4,"div",31),h(),i(5,"svg",32),p(6,"path",33),n()(),x(),i(7,"h2",34),o(8,"Basic Information"),n()(),i(9,"div",35)(10,"div")(11,"label",36),o(12," Asset Code "),n(),p(13,"input",37),i(14,"div",38),o(15,"Leave empty for auto-generation"),n()(),i(16,"div")(17,"label",36),o(18," Asset Name "),i(19,"span",39),o(20,"*"),n()(),p(21,"input",40),v(22,Xo,4,1,"div",41),i(23,"div",38),o(24,"Maximum 100 characters"),n()()(),i(25,"div",42)(26,"label",36),o(27,"Parent Asset"),n(),i(28,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(29,"button",44),_("click",function(){u(e);let s=d();return g(s.showParentDropdown=!s.showParentDropdown)}),i(30,"div",45),v(31,Ko,2,0,"span",46)(32,es,2,2,"span",47),h(),i(33,"svg",48),p(34,"path",49),n()()(),v(35,is,7,3,"div",50),n(),x(),i(36,"div",38),o(37,"Optional: Select a parent asset if this asset is a child of another."),n()(),i(38,"div",42)(39,"label",36),o(40,"Description"),n(),p(41,"textarea",51),i(42,"div",38),o(43,"Maximum 500 characters"),n()(),i(44,"div")(45,"label",52),o(46,"Health Score"),n(),i(47,"div",53)(48,"div",54)(49,"span",55),o(50,"Current Score"),n(),i(51,"span",56),o(52),n()(),i(53,"div",57),p(54,"div",58)(55,"div",59)(56,"input",60)(57,"div",61),n(),i(58,"div",62)(59,"span"),o(60,"Poor (0%)"),n(),i(61,"span"),o(62,"Fair (25%)"),n(),i(63,"span"),o(64,"Good (50%)"),n(),i(65,"span"),o(66,"Very Good (75%)"),n(),i(67,"span"),o(68,"Excellent (100%)"),n()()()()(),i(69,"div",29)(70,"div",30)(71,"div",63),h(),i(72,"svg",64),p(73,"path",65),n()(),x(),i(74,"h2",34),o(75,"Asset Classification"),n()(),i(76,"div",66)(77,"div")(78,"label",36),o(79," Asset Type "),i(80,"span",39),o(81,"*"),n()(),i(82,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(83,"button",44),_("click",function(){u(e);let s=d();return g(s.toggleAssetTypeDropdown())}),i(84,"div",45),v(85,ns,2,0,"span",46)(86,os,6,5,"div",67),h(),i(87,"svg",48),p(88,"path",49),n()()(),v(89,ds,5,1,"div",50),n(),v(90,ms,4,1,"div",41),n(),x(),i(91,"div")(92,"label",36),o(93," Category "),i(94,"span",39),o(95,"*"),n()(),i(96,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(97,"button",44),_("click",function(){u(e);let s=d();return g(s.toggleCategoryDropdown())}),i(98,"div",45),v(99,ps,2,0,"span",46)(100,us,2,1,"span",47),h(),i(101,"svg",48),p(102,"path",49),n()()(),v(103,vs,5,1,"div",50),n(),v(104,xs,4,1,"div",41),n()(),x(),i(105,"div",68)(106,"label",36),o(107," Inventory Parts "),n(),i(108,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(109,"button",44),_("click",function(){u(e);let s=d();return g(s.toggleInventoryPartsDropdown())}),i(110,"div",45)(111,"span",69),o(112,"Select inventory parts"),n(),h(),i(113,"svg",48),p(114,"path",49),n()()(),v(115,Cs,7,4,"div",50),n(),v(116,Es,2,1,"div",70),x(),i(117,"div",38),o(118,"Optional: Link inventory parts to this asset"),n()()(),i(119,"div",29)(120,"div",30)(121,"div",71),h(),i(122,"svg",72),p(123,"path",73),n()(),x(),i(124,"h2",34),o(125,"Technical Details"),n()(),i(126,"div",66)(127,"div")(128,"label",36),o(129,"Manufacturer"),n(),p(130,"input",74),i(131,"div",38),o(132,"Maximum 100 characters"),n()(),i(133,"div")(134,"label",36),o(135,"Model"),n(),p(136,"input",75),i(137,"div",38),o(138,"Maximum 100 characters"),n()()(),i(139,"div",76)(140,"div")(141,"label",36),o(142," Serial Number "),i(143,"span",39),o(144,"*"),n()(),p(145,"input",77),v(146,As,4,1,"div",41),i(147,"div",38),o(148,"Required, max 100 chars, must be unique within your company"),n()(),i(149,"div")(150,"label",36),o(151,"Capacity"),n(),i(152,"div",78)(153,"div"),p(154,"input",79),n(),i(155,"div")(156,"select",80)(157,"option",81),o(158,"Unit"),n(),v(159,Ms,2,2,"option",82),n()()(),i(160,"div",38),o(161,"Optional"),n()()()(),i(162,"div",29)(163,"div",30)(164,"div",83),h(),i(165,"svg",84),p(166,"path",85),n()(),x(),i(167,"h2",34),o(168,"Financial Information"),n()(),i(169,"div",35)(170,"div")(171,"label",36),o(172),n(),i(173,"div",86)(174,"div",87)(175,"span",88),o(176),n()(),p(177,"input",89),n(),i(178,"div",38),o(179,"Must be a non-negative number"),n()(),i(180,"div")(181,"label",36),o(182,"Purchase Date"),n(),p(183,"input",90,0),i(185,"div",38),o(186,"Cannot be in the future"),n()()(),i(187,"div",35)(188,"div")(189,"label",36),o(190,"Depreciation Rate (%)"),n(),p(191,"input",91),i(192,"div",38),o(193,"Annual depreciation rate (0-100%)"),n()(),i(194,"div")(195,"label",36),o(196,"Depreciation Life (Years)"),n(),p(197,"input",92),i(198,"div",38),o(199,"Useful life for depreciation calculation (1-100 years)"),n()()(),i(200,"div",35)(201,"div")(202,"label",36),o(203,"Warranty Information"),n(),p(204,"input",93),i(205,"div",38),o(206,"Warranty details (max 255 characters)"),n()(),i(207,"div")(208,"label",36),o(209,"Insurance Information"),n(),p(210,"input",94),i(211,"div",38),o(212,"Insurance details (max 255 characters)"),n()()()(),i(213,"div",29)(214,"div",30)(215,"div",95),h(),i(216,"svg",96),p(217,"path",97)(218,"path",98),n()(),x(),i(219,"h2",34),o(220,"Location & Assignment"),n()(),i(221,"div",66)(222,"div")(223,"label",36),o(224,"Location"),n(),i(225,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(226,"button",44),_("click",function(){u(e);let s=d();return g(s.toggleLocationDropdown())}),i(227,"div",45),v(228,ks,2,0,"span",46)(229,Is,7,1,"div",67),h(),i(230,"svg",48),p(231,"path",49),n()()(),v(232,Ps,5,1,"div",50),n()(),x(),i(233,"div")(234,"label",36),o(235,"Department ID"),n(),i(236,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(237,"button",44),_("click",function(){u(e);let s=d();return g(s.toggleDepartmentDropdown())}),i(238,"div",45),v(239,Ds,2,0,"span",46)(240,Ls,6,1,"div",67),h(),i(241,"svg",48),p(242,"path",49),n()()(),v(243,js,5,1,"div",50),n(),x(),i(244,"div",38),o(245,"Optional department assignment"),n()(),i(246,"div")(247,"label",36),o(248,"Status"),n(),i(249,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(250,"button",44),_("click",function(){u(e);let s=d();return g(s.toggleStatusDropdown())}),i(251,"div",45),v(252,Rs,4,3,"div",99)(253,Bs,2,0,"ng-template",null,1,We),h(),i(255,"svg",48),p(256,"path",49),n()()(),v(257,Gs,5,1,"div",100),n(),x(),i(258,"div",38),o(259,"Current operational status of the asset"),n()(),i(260,"div")(261,"label",36),o(262,"Tags"),n(),v(263,$s,3,1,"div",101),i(264,"div",43),_("click",function(s){return u(e),g(s.stopPropagation())}),i(265,"button",44),_("click",function(){u(e);let s=d();return g(s.toggleTagsDropdown())}),i(266,"div",45)(267,"span",69),o(268),n(),i(269,"div",102),v(270,Us,2,1,"span",103),h(),i(271,"svg",48),p(272,"path",49),n()()()(),v(273,Qs,10,4,"div",50),n(),x(),i(274,"div",38),h(),i(275,"svg",104),p(276,"path",105),n(),o(277," Select existing tags or type to create new ones. Press Enter to add custom tags. "),n()()()(),x(),i(278,"div",29)(279,"div",30)(280,"div",106),h(),i(281,"svg",107),p(282,"path",108),n()(),x(),i(283,"h2",34),o(284,"Asset Image"),n()(),i(285,"div")(286,"label",36),o(287,"Upload Image"),n(),i(288,"div",109),_("click",function(){u(e);let s=d();return g(s.triggerFileInput())})("dragover",function(s){u(e);let c=d();return g(c.onDragOver(s))})("dragleave",function(s){u(e);let c=d();return g(c.onDragLeave(s))})("drop",function(s){u(e);let c=d();return g(c.onDrop(s))}),i(289,"div",110)(290,"div",111),h(),i(291,"svg",112),p(292,"path",113),n()(),x(),i(293,"p",114),o(294),n(),i(295,"input",115,2),_("change",function(s){u(e);let c=d();return g(c.onFileChange(s))}),n()()(),v(297,Ks,17,3,"div",116),n()(),i(298,"div",29)(299,"div",30)(300,"div",95),h(),i(301,"svg",96),p(302,"path",33),n()(),x(),i(303,"h2",34),o(304,"Documents"),n()(),i(305,"div")(306,"label",36),o(307,"Upload Documents"),n(),i(308,"div",117)(309,"div",110)(310,"div",111),h(),i(311,"svg",118),p(312,"path",113),n()(),x(),i(313,"p",22),o(314," PDF, DOC, DOCX, XLS, XLSX, TXT, JPG, PNG up to 10MB - click to browse or drag and drop files here "),n(),i(315,"input",119),_("change",function(s){u(e);let c=d();return g(c.onDocumentChange(s))}),n(),i(316,"label",120),h(),i(317,"svg",121),p(318,"path",113),n(),o(319," Select Documents "),n()()(),v(320,tl,5,2,"div",116)(321,nl,8,2,"div",116),n()(),v(322,rl,6,1,"div",122)(323,al,6,1,"div",123),x(),i(324,"div",124)(325,"button",125),_("click",function(){u(e);let s=d();return g(s.goBack())}),o(326," Cancel "),n(),i(327,"button",126),v(328,ol,5,0,"span",127)(329,sl,6,0,"span",127),n()()()()}if(a&2){let e,r,s,c,f,E,P,j,se,pe,Ge,_t=fe(254),S=d();l(),m("formGroup",S.assetForm),l(20),w("border-red-300",S.nameError),l(),m("ngIf",S.nameError),l(7),w("border-blue-500",S.showParentDropdown),l(2),m("ngIf",!((e=S.assetForm.get("parent_id"))!=null&&e.value)),l(),m("ngIf",((r=S.assetForm.get("parent_id"))==null?null:r.value)&&S.getSelectedParent()),l(),w("rotate-180",S.showParentDropdown),l(2),m("ngIf",S.showParentDropdown),l(16),w("text-red-600",(((s=S.assetForm.get("health_score"))==null?null:s.value)||85)<50)("text-green-600",(((c=S.assetForm.get("health_score"))==null?null:c.value)||85)>=50),l(),C("",((f=S.assetForm.get("health_score"))==null?null:f.value)||85,"%"),l(3),H("width",((E=S.assetForm.get("health_score"))==null?null:E.value)||85,"%"),w("bg-red-500",(((P=S.assetForm.get("health_score"))==null?null:P.value)||85)<50)("bg-green-500",(((j=S.assetForm.get("health_score"))==null?null:j.value)||85)>=50),l(2),H("left",((se=S.assetForm.get("health_score"))==null?null:se.value)||85,"%"),w("bg-red-500",(((pe=S.assetForm.get("health_score"))==null?null:pe.value)||85)<50)("bg-green-500",(((Ge=S.assetForm.get("health_score"))==null?null:Ge.value)||85)>=50),l(26),w("border-red-300",S.assetTypeError)("border-blue-500",S.showAssetTypeDropdown),l(2),m("ngIf",!S.selectedAssetType),l(),m("ngIf",S.selectedAssetType),l(),w("rotate-180",S.showAssetTypeDropdown),l(2),m("ngIf",S.showAssetTypeDropdown),l(),m("ngIf",S.assetTypeError),l(7),w("border-red-300",S.categoryError)("border-blue-500",S.showCategoryDropdown),l(2),m("ngIf",!S.selectedCategory),l(),m("ngIf",S.selectedCategory),l(),w("rotate-180",S.showCategoryDropdown),l(2),m("ngIf",S.showCategoryDropdown),l(),m("ngIf",S.categoryError),l(5),w("border-blue-500",S.showInventoryPartsDropdown),l(4),w("rotate-180",S.showInventoryPartsDropdown),l(2),m("ngIf",S.showInventoryPartsDropdown),l(),m("ngIf",S.selectedInventoryParts.length>0),l(29),w("border-red-300",S.serialNumberError),l(),m("ngIf",S.serialNumberError),l(13),m("ngForOf",S.capacityUnitOptions),l(13),C("Purchase Value (",S.currentCurrency(),")"),l(4),C("",S.currencySymbol()," "),l(50),w("border-blue-500",S.showLocationDropdown),l(2),m("ngIf",!S.selectedLocation),l(),m("ngIf",S.selectedLocation),l(),w("rotate-180",S.showLocationDropdown),l(2),m("ngIf",S.showLocationDropdown),l(5),w("border-blue-500",S.showDepartmentDropdown),l(2),m("ngIf",!S.selectedDepartment),l(),m("ngIf",S.selectedDepartment),l(),w("rotate-180",S.showDepartmentDropdown),l(2),m("ngIf",S.showDepartmentDropdown),l(7),w("border-blue-500",S.showStatusDropdown),l(2),m("ngIf",S.selectedStatus)("ngIfElse",_t),l(3),w("rotate-180",S.showStatusDropdown),l(2),m("ngIf",S.showStatusDropdown),l(6),m("ngIf",S.selectedTags.length>0),l(2),w("border-blue-500",S.showTagsDropdown),l(3),C(" ",S.selectedTags.length===0?"Select tags":"Add more tags"," "),l(2),m("ngIf",S.selectedTags.length>0),l(),w("rotate-180",S.showTagsDropdown),l(2),m("ngIf",S.showTagsDropdown),l(15),w("border-gray-300",!S.isDragOver)("border-blue-500",S.isDragOver)("bg-blue-50",S.isDragOver)("hover:border-blue-400",!S.isDragOver),l(3),w("text-gray-400",!S.isDragOver)("text-blue-500",S.isDragOver),l(2),w("text-gray-500",!S.isDragOver)("text-blue-600",S.isDragOver),l(),C(" ",S.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),l(3),m("ngIf",S.existingImages.length>0||S.imagePreviewUrls.length>0),l(23),m("ngIf",S.existingDocuments.length>0),l(),m("ngIf",S.documents.length>0),l(),m("ngIf",S.submitError),l(),m("ngIf",S.submitSuccess),l(2),m("disabled",S.saving),l(2),m("disabled",S.saving||!S.isFormValid()),l(),m("ngIf",!S.saving),l(),m("ngIf",S.saving)}}var Be=class a{constructor(t,e,r,s,c,f){this.fb=t;this.route=e;this.router=r;this.assetService=s;this.angularLocation=c;this.inventoryAnalyticsService=f;this.assetForm=this.fb.group({asset_id:[""],name:["",[ae.required,ae.minLength(2)]],description:[""],serial_number:["",[ae.minLength(0)]],model:[""],manufacturer:[""],purchase_date:[""],purchase_price:[null],depreciation:[null],depreciation_life:[null],location_id:[null],department_id:[null],parent_id:[null],warranty:[""],insurance:[""],health_score:[85,[ae.min(0),ae.max(100)]],criticality_level:[null],brand:[""],dimensions:[""],weight:[""],capacity:[""],capacity_unit:[""],status:[null],type:[null,ae.required],category_id:[null,ae.required],tags:[[]]})}destroy$=new J;dateInputs;fileInput;flatpickrInstances=[];asset=null;assetForm;loading=!0;saving=!1;error="";successMessage="";categories=[];locations=[];departments=[];availableTags=[];statusOptionsFromAPI=[];showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;showInventoryPartsDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";inventoryPartIds=[];availableInventoryParts=[];selectedInventoryParts=[];inventoryPartsSearch="";isLoadingInventoryParts=!1;assetTypes=[];assetTypesFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];capacityUnitOptions=["Unit","GB","TB","Liters","kg","BTU","kW","HP","Tons","Seats","Units"];previewImage=null;selectedFile=null;images=[];imagePreviewUrls=[];imageCaptions=[];existingImages=[];removedImageIds=[];isDragOver=!1;documents=[];documentMetadata=[];existingDocuments=[];nameError="";assetTypeError="";categoryError="";serialNumberError="";submitError="";submitSuccess="";possibleParents=[];currencyService=ge(re);currentCurrency=_e("USD");currencySymbol=_e("$");ngOnInit(){this.currencyService.get$().pipe(k(this.destroy$)).subscribe(t=>{this.currentCurrency.set(t),this.currencySymbol.set(this.currencyService.getSymbol())}),this.route.params.pipe(k(this.destroy$)).subscribe(t=>{let e=t.id;e&&(this.loadAsset(e),this.assetService.getPossibleParents(e).subscribe(r=>{r.success&&r.data?.possible_parents&&(this.possibleParents=r.data.possible_parents)}))}),this.loadAssetTypes(),this.loadCategories(),this.loadLocations(),this.loadDepartments(),this.loadAvailableTags(),this.loadAssetStatuses()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let r=t.nativeElement,s=r.getAttribute("formControlName");if(console.log("Processing date input:",s),s==="purchase_date"){console.log("Initializing Flatpickr for purchase_date");let c={dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,maxDate:"today",defaultDate:null,onChange:(P,j)=>{console.log("Date selected:",j),this.assetForm.get("purchase_date")?.setValue(j)}},f=this.assetForm.get("purchase_date")?.value;f&&(c.defaultDate=this.convertDisplayDateToDate(f));let E=xe(r,c);this.flatpickrInstances.push(E),console.log("Flatpickr initialized successfully for purchase_date")}}})},50)}loadAsset(t){this.loading=!0,this.error="",this.assetService.getAsset(t).pipe(k(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.populateForm()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}populateForm(){if(this.asset){let t=this.asset.purchase_date?this.convertBackendDateToDisplay(this.asset.purchase_date):"",e=this.asset.warranty?this.convertBackendDateToDisplay(this.asset.warranty):"";this.assetForm.patchValue({name:this.asset.name||"",description:this.asset.description||"",serial_number:this.asset.serial_number||"",model:this.asset.model||"",manufacturer:this.asset.manufacturer||"",brand:this.asset.brand||"",dimensions:this.asset.dimensions||"",weight:this.asset.weight||"",capacity:this.asset.capacity||"",capacity_unit:this.asset.capacity_unit||"",purchase_date:t,purchase_price:this.asset.purchase_price||null,depreciation:this.asset.depreciation||null,depreciation_life:this.asset.depreciation_life||null,location_id:this.asset.location_id||null,department_id:this.asset.department_id||null,warranty:e,insurance:this.asset.insurance||"",health_score:this.asset.health_score||85,status:this.asset.status||null,type:this.asset.type||"",category_id:this.asset.category_id||null,tags:this.asset.tags||[],parent_id:this.asset.parent_id||null}),this.asset.images&&Array.isArray(this.asset.images)&&(this.existingImages=this.asset.images),setTimeout(()=>{this.selectedAssetType=this.assetTypes.find(f=>f.id==this.asset.type)||null,this.selectedCategory=this.categories.find(f=>f.id===this.asset.category_id)||null,this.selectedLocation=this.locations.find(f=>f.id===this.asset.location_id)||null,this.selectedDepartment=this.departments.find(f=>f.id===this.asset.department_id)||null;let r=this.asset?.status??this.asset?.asset_status?.id??this.asset?.asset_status?.name??null,s=r!=null&&!isNaN(Number(r))?Number(r):null,c=typeof r=="string"?r:this.asset?.asset_status?.name??null;this.selectedStatus=this.statusOptions.find(f=>{let E=s!==null&&(f.value===s||f.id===s),P=!!c&&f.label.toLowerCase()===String(c).toLowerCase();return E||P})||null,this.selectedStatus&&this.assetForm.patchValue({status:this.selectedStatus.value}),this.asset.tags&&Array.isArray(this.asset.tags)&&(this.selectedTags=this.asset.tags.map(f=>this.availableTags.find(E=>E.id===f.id)||f)),this.asset.inventory_parts&&Array.isArray(this.asset.inventory_parts)&&(this.inventoryPartIds=this.asset.inventory_parts.map(f=>f.id),this.selectedInventoryParts=this.asset.inventory_parts),this.assetForm.markAllAsTouched(),this.assetForm.updateValueAndValidity(),setTimeout(()=>{this.initializeFlatpickr()},100)},100)}}loadAssetTypes(){this.assetService.getAssetTypes().pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.assetTypesFromAPI=t.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,value:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})),this.asset&&this.populateForm())},error:t=>{console.error("Error loading asset types:",t)}})}loadCategories(){this.assetService.getAssetCategories().pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&t.data?.categories&&(this.categories=t.data.categories,this.asset&&this.populateForm())},error:t=>{console.error("Error loading categories:",t)}})}loadLocations(){this.assetService.getLocations().pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.locations=t.data.locations||t.data,this.asset&&this.populateForm())},error:t=>{console.error("Error loading locations:",t)}})}loadDepartments(){this.assetService.getDepartments().pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.departments=t.data,this.asset&&this.populateForm())},error:t=>{console.error("Error loading departments:",t)}})}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetStatuses(){this.assetService.getAssetStatuses().pipe(k(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.statusOptionsFromAPI=t.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,r)=>e.sort_order-r.sort_order),this.asset&&this.populateForm())},error:t=>{console.error("Error loading asset statuses:",t)}})}hexToTailwindColor(t){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[t.toUpperCase()]||"gray"}getColorForType(t){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[t]||"#6b7280"}onAssetTypeIconError(t,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}buildLocationLabel(t){return t?t.full_path?t.full_path:Array.isArray(t.complete_hierarchy)&&t.complete_hierarchy.length>0?t.complete_hierarchy.map(e=>e.name).join(" \u2192 "):Array.isArray(t.ancestors_with_details)&&t.ancestors_with_details.length>0?t.ancestors_with_details.map(e=>e.name).join(" \u2192 ")+" \u2192 "+(t.name||""):t.name||"":""}getLocationLabel(t){return this.buildLocationLabel(t)}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.assetForm.patchValue({type:t.id}),this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(t){this.selectedCategory=t,this.assetForm.patchValue({category_id:t.id}),this.showCategoryDropdown=!1,this.clearErrors()}selectLocation(t){this.selectedLocation=we(ue({},t),{label:this.buildLocationLabel(t)}),this.assetForm.patchValue({location_id:t.id}),this.showLocationDropdown=!1}selectStatus(t){this.selectedStatus=t,this.assetForm.patchValue({status:t.value}),this.showStatusDropdown=!1}selectDepartment(t){this.selectedDepartment=t,this.assetForm.patchValue({department_id:t.id}),this.showDepartmentDropdown=!1}toggleTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.some(e=>e.id===t.id)}onTagInputKeydown(t){t.key==="Enter"&&(t.preventDefault(),this.createNewTag())}createNewTag(){let t=this.newTagInput.trim();if(t&&!this.selectedTags.some(e=>e.name.toLowerCase()===t.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],r=e[Math.floor(Math.random()*e.length)],s={id:Date.now(),name:t,color:r,isNew:!0};this.selectedTags.push(s),this.newTagInput=""}}removeTag(t){let e=this.selectedTags.findIndex(r=>r.id===t.id);e>-1&&this.selectedTags.splice(e,1)}onFileChange(t){if(t.target.files&&t.target.files.length){let e=Array.from(t.target.files);this.processFiles(e),t.target.value=""}}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1;let e=t.dataTransfer?.files;if(e&&e.length>0){let r=Array.from(e).filter(s=>s.type.startsWith("image/"));r.length>0&&this.processFiles(r)}}processFiles(t){let r=["image/jpeg","image/png","image/gif","image/webp"],s=[];for(let c of t){if(!r.includes(c.type)){console.warn("Invalid file type:",c.name);continue}if(c.size>10*1024*1024){console.warn("File too large:",c.name);continue}if(this.images.some(P=>P.name===c.name&&P.size===c.size)){console.warn("Duplicate file skipped:",c.name);continue}if(this.images.length+s.length>=10){console.warn("Max image count exceeded:",c.name);break}s.push(c),this.imageCaptions.push("");let E=new FileReader;E.onload=P=>{P.target?.result&&this.imagePreviewUrls.push(P.target.result)},E.onerror=P=>{console.error("Preview failed for:",c.name,P)},E.readAsDataURL(c)}this.images=[...this.images,...s]}removeImage(t){t>=0&&t<this.images.length&&(this.images.splice(t,1),this.imagePreviewUrls.splice(t,1),this.imageCaptions.splice(this.existingImages.length+t,1))}removeAllImages(){this.images=[],this.imagePreviewUrls=[],this.imageCaptions=this.imageCaptions.slice(0,this.existingImages.length)}removeExistingImage(t){let e=this.existingImages[t];e&&e.id&&this.removedImageIds.push(e.id),t>=0&&t<this.imageCaptions.length&&this.imageCaptions.splice(t,1),this.existingImages.splice(t,1)}removeAllExistingImages(){this.existingImages.forEach(t=>{t&&t.id&&this.removedImageIds.push(t.id)}),this.existingImages=[],this.imageCaptions=[]}moveImage(t,e){if(e>=0&&e<this.images.length){let r=this.images.splice(t,1)[0];this.images.splice(e,0,r);let s=this.imagePreviewUrls.splice(t,1)[0];this.imagePreviewUrls.splice(e,0,s)}}moveImageUp(t){t>0&&this.moveImage(t,t-1)}moveImageDown(t){t<this.images.length-1&&this.moveImage(t,t+1)}triggerFileInput(){this.fileInput.nativeElement.click()}onImageError(t,e){console.warn("Image failed to load at index:",e),t.target.onerror=null,t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onImageLoad(t,e){console.log("Image loaded successfully at index:",e)}viewFullImage(t){window.open(t,"_blank")}convertImagesToBase64(){return Promise.all(this.images.map(t=>new Promise((e,r)=>{let s=new FileReader;s.onload=()=>{s.result?e(s.result):r(new Error("Failed to read file"))},s.onerror=()=>r(s.error),s.readAsDataURL(t)})))}onCategoryIconError(t,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}validateForm(){let t=!0;this.clearErrors(),!this.assetForm.get("name")?.value||this.assetForm.get("name")?.value.trim().length===0?(this.nameError="Asset name is required",t=!1):this.assetForm.get("name")?.value.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",t=!1),this.selectedAssetType||(this.assetTypeError="Asset type is required",t=!1),this.selectedCategory||(this.categoryError="Category is required",t=!1);let e=this.assetForm.get("serial_number")?.value;return e&&e.trim().length===0?(this.serialNumberError="Serial number cannot be empty if provided",t=!1):e&&e.length>255&&(this.serialNumberError="Serial number cannot exceed 255 characters",t=!1),t}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}onSubmit(){!this.validateForm()||this.saving||!this.asset||this.assetForm.valid&&!this.saving&&this.asset&&(this.saving=!0,this.error="",this.successMessage="",this.submitError="",this.submitSuccess="",this.convertImagesToBase64().then(t=>{let e=this.assetForm.value;if(e.tags=this.selectedTags.map(r=>r.name),e.purchase_date&&(e.purchase_date=this.convertDateToBackendFormat(e.purchase_date)),e.warranty&&(e.warranty=this.convertDateToBackendFormat(e.warranty)),e.images=t,this.imageCaptions.length>this.existingImages.length){let r=this.imageCaptions.slice(this.existingImages.length);e.images_captions=r}e.existing_images=this.existingImages.map(r=>r.id||r.image_url),this.removedImageIds.length>0&&(e.remove_image_ids=this.removedImageIds),this.inventoryPartIds.length>0?e.inventory_part_ids=this.inventoryPartIds:e.inventory_part_ids=[],e.asset_id&&e.asset_id.trim()?e.asset_id=e.asset_id.trim():e.asset_id=void 0,this.assetService.updateAsset(this.asset.id,e).pipe(k(this.destroy$)).subscribe({next:r=>le(this,null,function*(){if(r.success){if(this.documents.length>0)try{yield this.uploadDocuments(this.asset.id)}catch(s){console.error("Error uploading documents:",s)}this.submitSuccess="Asset updated successfully!",setTimeout(()=>{this.router.navigate(["/assets/preview",this.asset.id])},2e3)}else this.submitError=r.message||"Failed to update asset";this.saving=!1}),error:r=>{this.submitError=r.error?.message||"An error occurred while updating the asset",this.saving=!1}})}).catch(t=>{this.saving=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",t)}))}goBack(){this.angularLocation.back()}loadInventoryParts(){this.isLoadingInventoryParts=!0,this.inventoryAnalyticsService.getPartsCatalog("","active",1,1e3,!1).subscribe({next:t=>{t.success&&t.data&&(this.availableInventoryParts=Array.isArray(t.data)?t.data:t.data.data||[]),this.isLoadingInventoryParts=!1},error:t=>{console.error("Failed to load inventory parts:",t),this.isLoadingInventoryParts=!1}})}toggleInventoryPartsDropdown(){this.showInventoryPartsDropdown=!this.showInventoryPartsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1,this.showInventoryPartsDropdown&&this.loadInventoryParts()}selectInventoryPart(t){this.inventoryPartIds.includes(t.id)||(this.inventoryPartIds.push(t.id),this.selectedInventoryParts.push(t)),this.inventoryPartsSearch="",this.showInventoryPartsDropdown=!1}removeInventoryPart(t){this.inventoryPartIds=this.inventoryPartIds.filter(e=>e!==t),this.selectedInventoryParts=this.selectedInventoryParts.filter(e=>e.id!==t)}getFilteredInventoryParts(){if(!this.inventoryPartsSearch)return this.availableInventoryParts.filter(e=>!this.inventoryPartIds.includes(e.id));let t=this.inventoryPartsSearch.toLowerCase();return this.availableInventoryParts.filter(e=>!this.inventoryPartIds.includes(e.id)&&(e.name?.toLowerCase().includes(t)||e.part_number?.toLowerCase().includes(t)))}onDocumentClick(t){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1,this.showInventoryPartsDropdown=!1}isFormValid(){return this.assetForm.valid&&this.selectedAssetType!==null&&this.selectedCategory!==null&&!this.nameError&&!this.assetTypeError&&!this.categoryError&&!this.serialNumberError}getSelectedParent(){return this.possibleParents.find(t=>t.id===this.assetForm.get("parent_id")?.value)}convertDateToBackendFormat(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${r}-${s}-${c}`}catch(e){return console.error("Date conversion error:",e),t}}convertBackendDateToDisplay(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let r={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",r).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),t}}convertDisplayDateToDate(t){if(!t)return null;try{let e=new Date(t);return isNaN(e.getTime())?null:e}catch(e){return console.error("Date conversion error:",e),null}}uploadDocuments(t){return le(this,null,function*(){let e=this.documents.map((r,s)=>{let c=this.documentMetadata[s];if(!c||!c.name){let f={name:r.name,type:"other"};return this.assetService.uploadAssetDocument(t,r,f.name,f.type).toPromise()}return this.assetService.uploadAssetDocument(t,r,c.name,c.type||"other").toPromise()});yield Promise.all(e)})}static \u0275fac=function(e){return new(e||a)(M(ot),M(Ae),M(ne),M(Z),M(Ye),M(Le))};static \u0275cmp=R({type:a,selectors:[["app-asset-edit"]],viewQuery:function(e,r){if(e&1&&(K(Qo,5),K(Yo,5)),e&2){let s;ee(s=te())&&(r.fileInput=s.first),ee(s=te())&&(r.dateInputs=s)}},hostBindings:function(e,r){e&1&&_("click",function(c){return r.onDocumentClick(c)},!1,Ee)},decls:16,vars:3,consts:[["dateInput",""],["statusPlaceholder",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-edit-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","flex items-center justify-center py-20",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[3,"ngSubmit","formGroup"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Leave empty for auto-generation","formControlName","asset_id","maxlength","50",1,"input"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","formControlName","name",1,"input"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","formControlName","description","maxlength","500",1,"input","resize-none"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","formControlName","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"mt-6"],[1,"text-gray-400"],["class","mt-3 flex flex-wrap gap-2",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["type","text","placeholder","e.g., Dell, HP, Toyota","formControlName","manufacturer","maxlength","100",1,"input"],["type","text","placeholder","e.g., PowerEdge R730","formControlName","model","maxlength","100",1,"input"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mt-6"],["type","text","placeholder","e.g., SN123456789","formControlName","serial_number","maxlength","100",1,"input"],[1,"grid","grid-cols-2","gap-3"],["type","text","formControlName","capacity","placeholder","e.g., 500, 2.0, 24000",1,"input"],["formControlName","capacity_unit",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","formControlName","purchase_price","step","0.01","min","0",1,"input",2,"padding-left","24px"],["type","text","formControlName","purchase_date","placeholder","Select purchase date","readonly","",1,"input"],["type","number","formControlName","depreciation","placeholder","e.g., 20","min","0","max","100","step","0.01",1,"input"],["type","number","formControlName","depreciation_life","placeholder","e.g., 5","min","1","max","100",1,"input"],["type","text","formControlName","warranty","placeholder","e.g., 2 years manufacturer warranty","maxlength","255",1,"input"],["type","text","formControlName","insurance","placeholder","e.g., Policy #12345, expires 2025-12-31","maxlength","255",1,"input"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","flex items-center space-x-3",4,"ngIf","ngIfElse"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","border-gray-300","rounded-lg","hover:border-blue-400","transition-all"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["type","file","accept",".pdf,.doc,.docx,.xls,.xlsx,.txt,.jpg,.jpeg,.png","multiple","","id","document-upload-edit",1,"sr-only",3,"change"],["for","document-upload-edit",1,"mt-2","inline-flex","items-center","px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-700","cursor-pointer"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"p-2"],["type","text","placeholder","Search parts...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","mb-2",3,"ngModelChange","ngModel"],[1,"py-1","max-h-48","overflow-auto"],["class","px-3 py-2 text-sm text-gray-500",4,"ngIf"],["type","button","class","w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"px-3","py-2","text-sm","text-gray-500"],["type","button",1,"w-full","px-3","py-2","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],[1,"mt-3","flex","flex-wrap","gap-2"],["class","inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-3","py-1","bg-blue-100","text-blue-800","rounded-full","text-sm"],["type","button",1,"ml-2","text-blue-600","hover:text-blue-800","focus:outline-none",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"value"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel","ngModelOptions"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","src","alt"],[1,"absolute","inset-0","bg-black","opacity-0","group-hover:opacity-50","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","px-2","py-1","bg-green-600","text-white","rounded","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],[1,"mt-2"],["type","text","placeholder","Enter image name/description","maxlength","255",1,"w-full","px-2","py-1","text-xs","border","border-gray-300","rounded",3,"input","value"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],[1,"absolute","top-2","left-2","px-2","py-1","bg-blue-600","text-white","rounded","text-xs","font-medium"],["type","text","placeholder","Enter image name/description (e.g., 'Front View', 'Serial Number Plate')","maxlength","255",1,"w-full","px-2","py-1","text-xs","border","border-gray-300","rounded",3,"input","value"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"text-sm","font-medium","text-gray-700","mb-4"],[1,"space-y-3"],["class","p-4 border border-gray-200 rounded-lg flex items-center justify-between",4,"ngFor","ngForOf"],[1,"p-4","border","border-gray-200","rounded-lg","flex","items-center","justify-between"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-900"],["target","_blank",1,"px-3","py-1","text-xs","bg-blue-600","text-white","rounded","hover:bg-blue-700",3,"href"],["type","button",1,"px-3","py-1","text-xs","bg-red-600","text-white","rounded","hover:bg-red-700",3,"click"],["class","p-4 border border-gray-200 rounded-lg",4,"ngFor","ngForOf"],[1,"p-4","border","border-gray-200","rounded-lg"],[1,"flex","items-start","justify-between"],[1,"mb-2"],[1,"block","text-xs","font-medium","text-gray-700","mb-1"],["type","text","required","","maxlength","255",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded",3,"ngModelChange","ngModel","ngModelOptions"],["required","",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded",3,"ngModelChange","ngModel","ngModelOptions"],["value","manual"],["value","certificate"],["value","warranty"],["value","other"],["type","button",1,"ml-4","p-2","text-red-600","hover:text-red-700","hover:bg-red-50","rounded","transition-colors",3,"click"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"]],template:function(e,r){e&1&&(i(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"button",7),_("click",function(){return r.goBack()}),h(),i(5,"svg",8),p(6,"path",9),n(),x(),i(7,"span",10),o(8,"Back to Assets"),n()()(),i(9,"h1",11),o(10,"Edit Asset"),n(),i(11,"p",12),o(12," Update asset information and specifications "),n()(),v(13,Zo,10,0,"div",13)(14,Jo,11,1,"div",13)(15,ll,330,115,"div",14),n()()),e&2&&(l(13),m("ngIf",r.loading),l(),m("ngIf",r.error&&!r.loading),l(),m("ngIf",!r.loading&&!r.error))},dependencies:[N,X,B,st,ve,Te,Ve,G,Ke,et,Ie,z,he,Pe,at,rt,nt,tt,it,$,Y,de,ye],styles:[".asset-edit-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 768px){.asset-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.transition-transform[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb;font-family:inherit}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6;font-weight:600}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}[_nghost-%COMP%]     .flatpickr-input{cursor:pointer}[_nghost-%COMP%]     .flatpickr-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.slider-input[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;outline:none;z-index:20}.slider-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;position:relative;z-index:30}.slider-input[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;box-shadow:none}.slider-input[_ngcontent-%COMP%]:focus{outline:none}"]})};function cl(a,t){if(a&1&&(i(0,"div",20)(1,"div",12),h(),i(2,"svg",21),p(3,"path",22),n(),x(),i(4,"span",23),o(5),n()()()),a&2){let e=d();l(5),y(e.errorMessage)}}function dl(a,t){if(a&1){let e=b();i(0,"div")(1,"p",35),o(2,"Choose Excel File"),n(),i(3,"p",36),o(4,"or drag and drop your file here"),n(),i(5,"button",37),_("click",function(){u(e);let s=fe(8);return g(s.click())}),o(6," Browse Files "),n(),i(7,"input",38,0),_("change",function(s){u(e);let c=d(2);return g(c.parseFile(s))}),n()()}}function ml(a,t){if(a&1&&(i(0,"div",32)(1,"div",39),h(),i(2,"svg",40),p(3,"path",41),n()(),x(),i(4,"p",42),o(5,"File Uploaded Successfully!"),n(),i(6,"p",43),o(7),n()()),a&2){let e=d(2);l(7),y(e.uploadedFile==null?null:e.uploadedFile.name)}}function pl(a,t){if(a&1&&(i(0,"div")(1,"div",24)(2,"div",25),h(),i(3,"svg",26),p(4,"path",27),n(),v(5,dl,9,0,"div",19)(6,ml,8,1,"div",28),n()(),x(),i(7,"div",29)(8,"h3",30),o(9,"File Requirements:"),n(),i(10,"ul",31)(11,"li"),o(12,"\u2022 Excel files only (.xlsx, .xls)"),n(),i(13,"li"),o(14,"\u2022 First row should contain column headers"),n(),i(15,"li"),o(16,"\u2022 Maximum file size: 10MB"),n(),i(17,"li"),o(18,"\u2022 Required columns: Asset Name, Location, Category"),n()()(),i(19,"div",32)(20,"p",33),o(21," Need a template? Download our sample Excel file: "),n(),i(22,"a",34),o(23," Download Excel Template "),n()()()),a&2){let e=d();l(5),m("ngIf",!e.uploaded),l(),m("ngIf",e.uploaded)}}function ul(a,t){if(a&1&&(i(0,"div",51)(1,"span",52),o(2,"Modified:"),n(),i(3,"span",54),o(4),D(5,"dateFormat"),D(6,"timeFormat"),n()()),a&2){let e=d(2);l(4),A("",ie(5,2,e.uploadedFile==null?null:e.uploadedFile.lastModified)," ",ie(6,4,e.uploadedFile==null?null:e.uploadedFile.lastModified),"")}}function gl(a,t){if(a&1&&(i(0,"div",61)(1,"h4",62),o(2,"File Analysis:"),n(),i(3,"div",63)(4,"div"),o(5),n(),i(6,"div"),o(7),n(),i(8,"div"),o(9),n()()()),a&2){let e=d(2);l(5),C("Total rows: ",e.importResults.file_stats.total_rows_processed,""),l(2),C("Valid assets: ",e.importResults.file_stats.valid_assets_found,""),l(2),C("Skipped rows: ",e.importResults.file_stats.skipped_rows,"")}}function _l(a,t){a&1&&(h(),i(0,"svg",64),p(1,"circle",65)(2,"path",66),n())}function fl(a,t){if(a&1){let e=b();i(0,"div")(1,"div",32)(2,"div",44),h(),i(3,"svg",45),p(4,"path",46),n()(),x(),i(5,"h2",47),o(6,"Ready to Import"),n(),i(7,"p",48),o(8,"Your file has been validated and is ready for import."),n(),i(9,"div",49)(10,"div",50)(11,"div",51)(12,"span",52),o(13,"File:"),n(),i(14,"span",53),o(15),n()(),i(16,"div",51)(17,"span",52),o(18,"Size:"),n(),i(19,"span",54),o(20),D(21,"numberFormat"),n()(),v(22,ul,7,6,"div",55),n(),v(23,gl,10,3,"div",56),n(),i(24,"div",57)(25,"button",58),_("click",function(){u(e);let s=d();return g(s.resetImport())}),o(26," Choose Different File "),n(),i(27,"button",59),_("click",function(){u(e);let s=d();return g(s.startBulkImport())}),v(28,_l,3,0,"svg",60),o(29),n()()()()}if(a&2){let e=d();l(15),y(e.uploadedFile==null?null:e.uploadedFile.name),l(5),C("",e.uploadedFile!=null&&e.uploadedFile.size?O(21,7,e.uploadedFile.size/1024/1024,2):"0"," MB"),l(2),m("ngIf",e.uploadedFile==null?null:e.uploadedFile.lastModified),l(),m("ngIf",e.importResults==null?null:e.importResults.file_stats),l(4),m("disabled",e.importLoading),l(),m("ngIf",e.importLoading),l(),C(" ",e.importLoading?"Starting Import...":"Start Import"," ")}}var Ne=class a{constructor(t,e,r){this.assetService=t;this.router=e;this.importProgressService=r}importComplete=new Q;destroy$=new J;currentStep=1;totalSteps=2;uploadedFile=null;uploaded=!1;importLoading=!1;isImportComplete=!1;importedCount=0;importResults=null;showResults=!1;errorMessage="";showError=!1;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}parseFile(t){let e=t.target.files[0];if(this.clearError(),!e){this.errorMessage="No file selected",this.showError=!0;return}let r=e.name.split(".").pop()?.toLowerCase();if(!r||!["xlsx","xls"].includes(r)){this.errorMessage="Please upload a valid Excel file (.xlsx, .xls).",this.showError=!0;return}this.uploadedFile=e,this.uploaded=!0,this.currentStep=2}clearError(){this.errorMessage="",this.showError=!1}startBulkImport(){if(!this.uploadedFile){this.errorMessage="No file selected for import",this.showError=!0;return}this.importLoading=!0,this.clearError(),this.assetService.importBulkExcel(this.uploadedFile).subscribe({next:t=>{this.importLoading=!1,t&&t.success&&t.data?.job_id?this.importProgressService.startImport(t.data.job_id,t.data):(this.errorMessage=t.message||"Invalid response from server",this.showError=!0)},error:t=>{this.importLoading=!1,this.errorMessage=t.error?.message||"Error starting import process",this.showError=!0}})}resetImport(){this.currentStep=1,this.uploadedFile=null,this.uploaded=!1,this.importLoading=!1,this.clearError()}closeAllDropdowns(){}static \u0275fac=function(e){return new(e||a)(M(Z),M(ne),M(jt))};static \u0275cmp=R({type:a,selectors:[["app-smart-import"]],outputs:{importComplete:"importComplete"},decls:29,vars:17,consts:[["fileInput",""],[1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-8","mb-8"],[1,"flex","justify-between","items-start","mb-6"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","text-base"],["routerLink","/assets/list",1,"bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","px-4","py-2","rounded-lg","transition-colors","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"flex","items-center","justify-center","mb-8"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center"],[1,"w-8","h-8","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-sm","font-semibold"],[1,"ml-2","text-sm","font-medium","text-gray-900"],[1,"w-16","h-1","bg-gray-300","rounded"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-sm","font-semibold"],[1,"ml-2","text-sm","font-medium"],["class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6",4,"ngIf"],[4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","text-sm","font-medium"],[1,"border-2","border-dashed","border-gray-300","rounded-xl","p-12","text-center","hover:border-gray-400","transition-colors"],[1,"max-w-md","mx-auto"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["class","text-center",4,"ngIf"],[1,"mt-8","bg-blue-50","border","border-blue-200","rounded-lg","p-4"],[1,"text-sm","font-medium","text-blue-900","mb-2"],[1,"text-sm","text-blue-700","space-y-1"],[1,"text-center"],[1,"text-gray-600","text-sm","mb-4"],["href","/assets/templates/enhanced-asset-import-template-2025-07-29 (1).xlsx","download","",1,"text-blue-600","hover:text-blue-700","font-medium","text-sm","underline"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],["type","file","accept",".xlsx,.xls",1,"hidden",3,"change"],[1,"w-12","h-12","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-lg","font-medium","text-gray-900","mb-1"],[1,"text-gray-600","text-sm"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],[1,"bg-gray-50","rounded-lg","p-6","mb-6","max-w-md","mx-auto"],[1,"text-left","space-y-3"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium","text-gray-900","truncate","ml-4"],[1,"font-medium","text-gray-900"],["class","flex justify-between",4,"ngIf"],["class","bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",4,"ngIf"],[1,"flex","justify-center","space-x-4"],[1,"px-6","py-3","bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","rounded-lg","transition-colors",3,"click"],[1,"px-8","py-3","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-4 w-4 text-blue","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4","mt-4"],[1,"font-medium","text-blue-900","mb-2"],[1,"text-sm","text-blue-800","space-y-1"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-4","w-4","text-blue"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"h1",5),o(6,"Smart Asset Import"),n(),i(7,"p",6),o(8,"Import multiple assets efficiently with our guided wizard"),n()(),i(9,"button",7),h(),i(10,"svg",8),p(11,"path",9),n(),o(12," Back to Assets "),n()(),x(),i(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),o(17,"1"),n(),i(18,"span",14),o(19,"Upload File"),n()(),p(20,"div",15),i(21,"div",12)(22,"div",16),o(23,"2"),n(),i(24,"span",17),o(25,"Start Import"),n()()()(),v(26,cl,6,1,"div",18)(27,pl,24,2,"div",19)(28,fl,30,10,"div",19),n()()()),e&2&&(l(20),w("bg-blue-600",r.currentStep>=2),l(2),w("bg-blue-600",r.currentStep>=2)("text-white",r.currentStep>=2)("bg-gray-300",r.currentStep<2)("text-gray-600",r.currentStep<2),l(2),w("text-gray-900",r.currentStep>=2)("text-gray-500",r.currentStep<2),l(2),m("ngIf",r.showError),l(),m("ngIf",r.currentStep===1),l(),m("ngIf",r.currentStep===2))},dependencies:[N,B,$,Me,De,Ht,ye],encapsulation:2})};var hl=[{path:"",component:Se},{path:"list",component:Se},{path:"create",component:ut},{path:"import",component:Ne},{path:"preview/:id",component:Re},{path:":id/edit",component:Be}],gt=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Ue({type:a});static \u0275inj=ze({imports:[de.forChild(hl),de]})};var $t=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Ue({type:a});static \u0275inj=ze({imports:[N,gt,Se,Re,Be,je,Ne,Vt]})};export{$t as AssetsModule};
