import{a as P}from"./chunk-E7W5FHY5.js";import{A as j,C as A,c as k,d as h,e as E,f as M,j as V,o as L,r as G,x as T}from"./chunk-BV4EONZX.js";import"./chunk-47ABMRM7.js";import{c as I}from"./chunk-SSTOZ5OJ.js";import"./chunk-J7FUFURU.js";import{l as F}from"./chunk-CDW6MD7D.js";import{Gb as e,Hb as t,Ib as c,Mb as v,Pb as x,Qb as d,Ua as y,Xa as a,ab as g,bc as n,cc as b,ia as u,ja as p,jb as S,ka as w,la as _,ob as f,wb as l,yb as C}from"./chunk-ZHYBNXXX.js";import"./chunk-EQDQRRRY.js";function N(r,s){if(r&1&&(e(0,"div",20)(1,"p",21),n(2),t()()),r&2){let o=d(2);a(2),b(o.errorMessage)}}function D(r,s){r&1&&(e(0,"span"),n(1,"Send Reset Link"),t())}function R(r,s){r&1&&(e(0,"span",22),w(),e(1,"svg",23),c(2,"circle",24)(3,"path",25),t(),n(4," Sending... "),t())}function q(r,s){if(r&1){let o=v();e(0,"div",8)(1,"div",9)(2,"h2",10),n(3,"Forgot Password?"),t(),e(4,"p",6),n(5,"Enter your email address and we'll send you a link to reset your password"),t()(),f(6,N,3,1,"div",11),e(7,"form",12),x("ngSubmit",function(){u(o);let m=d();return p(m.onSubmit())}),e(8,"div",13)(9,"div")(10,"label",14),n(11,"Email Address"),t(),c(12,"input",15),t(),e(13,"button",16),f(14,D,2,0,"span",17)(15,R,5,0,"span",18),t(),e(16,"div",2)(17,"button",19),x("click",function(){u(o);let m=d();return p(m.goBack())}),n(18," \u2190 Back to Sign In "),t()()()()()}if(r&2){let o,i=d();a(6),l("ngIf",i.errorMessage),a(),l("formGroup",i.forgotPasswordForm),a(5),C("border-red-300",((o=i.forgotPasswordForm.get("email"))==null?null:o.invalid)&&((o=i.forgotPasswordForm.get("email"))==null?null:o.touched)),a(),l("disabled",i.forgotPasswordForm.invalid||i.isLoading),a(),l("ngIf",!i.isLoading),a(),l("ngIf",i.isLoading)}}function z(r,s){if(r&1){let o=v();e(0,"div",8)(1,"div",2)(2,"div",3)(3,"div",26),w(),e(4,"svg",27),c(5,"path",28),t()()(),_(),e(6,"h2",29),n(7,"Reset Link Sent!"),t(),e(8,"p",30),n(9," Password reset link sent to your email. Please check your email to reset your password. "),t(),e(10,"div",31)(11,"p",32),n(12," Redirecting to login page in "),e(13,"span",33),n(14),t(),n(15," seconds "),t()(),e(16,"button",34),x("click",function(){u(o);let m=d();return p(m.goBack())}),n(17," Go to login now "),t()()()}if(r&2){let o=d();a(14),b(o.countdown)}}var B=class r{constructor(s,o,i){this.fb=s;this.router=o;this.authService=i;this.forgotPasswordForm=this.fb.group({email:["",[h.required,h.email]]})}forgotPasswordForm;isLoading=!1;errorMessage="";showSuccessMessage=!1;countdown=10;countdownInterval;onSubmit(){this.forgotPasswordForm.valid&&!this.isLoading&&(this.isLoading=!0,this.errorMessage="",this.showSuccessMessage=!1,this.authService.forgotPassword(this.forgotPasswordForm.value).subscribe({next:s=>{s.success?(this.showSuccessMessage=!0,this.startCountdown()):this.errorMessage=s.message||"Failed to send reset link",this.isLoading=!1},error:s=>{this.errorMessage=s.error?.message||s.error?.error||"An error occurred",this.isLoading=!1}}))}startCountdown(){this.countdown=10,this.countdownInterval=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(this.countdownInterval),this.router.navigate(["/login"]))},1e3)}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval)}goBack(){this.router.navigate(["/login"])}static \u0275fac=function(o){return new(o||r)(g(j),g(I),g(P))};static \u0275cmp=S({type:r,selectors:[["app-forgot-password"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center","mb-6"],[1,"flex","items-center","space-x-3"],["alt","AssetGo Logo",1,"h-20","w-auto",3,"src"],[1,"text-gray-600"],["class","bg-white rounded-2xl shadow-lg p-8 max-w-md mx-auto",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","p-8","max-w-md","mx-auto"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","type","email","formControlName","email","placeholder","Enter your email address","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],["type","button",1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6","leading-relaxed"],[1,"bg-blue-50","rounded-lg","p-4","mb-6"],[1,"text-blue-800","text-sm"],[1,"font-bold"],[1,"text-blue-600","hover:text-blue-500","text-sm","font-medium","cursor-pointer",3,"click"]],template:function(o,i){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),c(5,"img",5),t()(),e(6,"p",6),n(7,"Enterprise Asset Management System"),t()(),f(8,q,19,7,"div",7)(9,z,18,1,"div",7),t()()),o&2&&(a(5),l("src","images/logo.png",y),a(3),l("ngIf",!i.showSuccessMessage),a(),l("ngIf",i.showSuccessMessage))},dependencies:[F,A,V,k,E,M,T,L,G],encapsulation:2})};export{B as ForgotPasswordComponent};
