import{a as zo,b as Yn,c as Wo}from"./chunk-WBEGUE6J.js";import"./chunk-FK6H3RFT.js";import{a as dt}from"./chunk-CGTUHVKC.js";import"./chunk-Y77GJ64Z.js";import"./chunk-GGQ7LRWG.js";import{c as ct,d as Ie,f as fe,g as Pe}from"./chunk-C5P3YSZX.js";import{a as Ho,b as We,c as ft,d as Ge,e as Yt,f as Rn,g as et,h as qt,i as Hn,j as Nn,k as Bn,n as jn,o as No,p as Bo,q as jo,r as zn,s as Wn,t as ki,u as Gn,v as $n,w as $e,x as Un}from"./chunk-QRZWFBQ3.js";import{$ as v,A as E,B as M,Ba as Si,C as T,Ca as Gt,Da as Xe,Ea as Po,F as Ze,Fa as $t,Ga as Ut,Ha as Vo,Ka as Lo,N as ke,O as Ci,P as p,Ra as Pn,S as he,Sa as Vn,T as Re,Ta as lt,U as Dn,Ua as He,Va as Ln,Wa as Oo,X as I,Xa as Fo,Ya as On,Za as ze,_ as Tn,aa as Ce,ba as z,c as wi,ca as Te,cb as Ro,fa as a,fb as Mi,ga as c,ha as y,hb as wt,i as Do,ia as Xr,ib as Fn,ja as Jr,ka as H,la as D,lb as Pt,ma as _,o as ce,oa as vt,pa as bt,qa as yt,ra as In,sa as u,t as An,ta as O,ua as W,va as De,wa as Io,xa as de,y as To,ya as me,z as k,za as ue}from"./chunk-V246Y5EX.js";import{a as bi,b as yi,e as Ao}from"./chunk-EQDQRRRY.js";function Rc(i,t){if(i&1&&(a(0,"span"),u(1),c()),i&2){let e=_(2);p(),De("Archive ",e.selectedCount," Asset",e.selectedCount!==1?"s":"","")}}function Hc(i,t){i&1&&(a(0,"span",28),M(),a(1,"svg",29),y(2,"circle",30)(3,"path",31),c(),T(),a(4,"span"),u(5,"Archiving..."),c()())}function Nc(i,t){if(i&1){let e=H();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),M(),a(5,"svg",6),y(6,"path",7),c()(),T(),a(7,"h2",8),u(8,"Archive Selected Assets"),c()(),a(9,"button",9),D("click",function(){k(e);let r=_();return E(r.onCancel())}),M(),a(10,"svg",10),y(11,"path",11),c()()(),T(),a(12,"div",12)(13,"div",13)(14,"label",14),u(15,"Archive Reason (Optional)"),c(),a(16,"textarea",15),ue("ngModelChange",function(r){k(e);let s=_();return me(s.archiveReason,r)||(s.archiveReason=r),E(r)}),c(),a(17,"p",16),u(18,"This will be recorded in the audit trail"),c()(),a(19,"div",17)(20,"div",18),M(),a(21,"svg",19),y(22,"path",7),c()()(),T(),a(23,"div",20)(24,"h3",21),u(25),c(),a(26,"p",22),u(27," This will change their status to inactive but keep all data intact. "),c()(),a(28,"div",23)(29,"button",24),D("click",function(){k(e);let r=_();return E(r.onCancel())}),u(30," Cancel "),c(),a(31,"button",25),D("click",function(){k(e);let r=_();return E(r.onConfirm())}),I(32,Rc,2,2,"span",26)(33,Hc,6,0,"span",27),c()()()()()}if(i&2){let e=_();v("@backdropAnimation",void 0),p(),v("@modalAnimation",void 0),p(8),v("disabled",e.loading),p(7),de("ngModel",e.archiveReason),p(9),De("Are you sure you want to archive ",e.selectedCount," asset",e.selectedCount!==1?"s":"","?"),p(4),v("disabled",e.loading),p(2),v("disabled",e.loading),p(),v("ngIf",!e.loading),p(),v("ngIf",e.loading)}}var qn=class i{isOpen=!1;selectedCount=0;closeModal=new Ze;confirmArchive=new Ze;loading=!1;archiveReason="";onConfirm(){this.loading=!0,this.confirmArchive.emit(this.archiveReason),setTimeout(()=>{this.loading=!1,this.archiveReason=""},2e3)}onCancel(){this.loading||(this.archiveReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Re({type:i,selectors:[["app-archive-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount"},outputs:{closeModal:"closeModal",confirmArchive:"confirmArchive"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3","placeholder","Enter reason for archiving these assets...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-orange-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-orange-600","text-white","font-medium","rounded-lg","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&I(0,Nc,34,10,"div",0),e&2&&v("ngIf",n.isOpen)},dependencies:[ze,He,$e,We,Ge,et],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[ct("backdropAnimation",[Pe(":enter",[fe({opacity:0}),Ie("150ms ease-out",fe({opacity:1}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0}))])]),ct("modalAnimation",[Pe(":enter",[fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}),Ie("200ms ease-out",fe({opacity:1,transform:"scale(1) translateY(0)"}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Bc(i,t){if(i&1&&(a(0,"span"),u(1),c()),i&2){let e=_(2);p(),De("Delete ",e.selectedCount," Asset",e.selectedCount!==1?"s":"","")}}function jc(i,t){i&1&&(a(0,"span",30),M(),a(1,"svg",31),y(2,"circle",32)(3,"path",33),c(),T(),a(4,"span"),u(5,"Deleting..."),c()())}function zc(i,t){if(i&1){let e=H();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),M(),a(5,"svg",6),y(6,"path",7),c()(),T(),a(7,"h2",8),u(8,"Delete Selected Assets"),c()(),a(9,"button",9),D("click",function(){k(e);let r=_();return E(r.onCancel())}),M(),a(10,"svg",10),y(11,"path",11),c()()(),T(),a(12,"div",12)(13,"div",13)(14,"label",14),u(15,"Deletion Reason (Optional)"),c(),a(16,"textarea",15),ue("ngModelChange",function(r){k(e);let s=_();return me(s.deletionReason,r)||(s.deletionReason=r),E(r)}),c(),a(17,"p",16),u(18,"This will be recorded in the audit trail"),c()(),a(19,"div",17)(20,"div",18),M(),a(21,"svg",19),y(22,"path",7),c()()(),T(),a(23,"div",20)(24,"h3",21),u(25),c(),a(26,"p",22),u(27," This action cannot be undone. The assets will be permanently removed from the system. "),c(),a(28,"div",23)(29,"p",24),u(30," \u26A0\uFE0F Warning: Only archived assets can be permanently deleted "),c()()(),a(31,"div",25)(32,"button",26),D("click",function(){k(e);let r=_();return E(r.onCancel())}),u(33," Cancel "),c(),a(34,"button",27),D("click",function(){k(e);let r=_();return E(r.onConfirm())}),I(35,Bc,2,2,"span",28)(36,jc,6,0,"span",29),c()()()()()}if(i&2){let e=_();v("@backdropAnimation",void 0),p(),v("@modalAnimation",void 0),p(8),v("disabled",e.loading),p(7),de("ngModel",e.deletionReason),p(9),De("Are you sure you want to permanently delete ",e.selectedCount," asset",e.selectedCount!==1?"s":"","?"),p(7),v("disabled",e.loading),p(2),v("disabled",e.loading),p(),v("ngIf",!e.loading),p(),v("ngIf",e.loading)}}var Kn=class i{isOpen=!1;selectedCount=0;closeModal=new Ze;confirmDelete=new Ze;loading=!1;deletionReason="";onConfirm(){this.loading=!0,this.confirmDelete.emit(this.deletionReason),setTimeout(()=>{this.loading=!1,this.deletionReason=""},2e3)}onCancel(){this.loading||(this.deletionReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Re({type:i,selectors:[["app-delete-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount"},outputs:{closeModal:"closeModal",confirmDelete:"confirmDelete"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-red-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3","placeholder","Enter reason for permanently deleting these assets...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-800","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-red-600","text-white","font-medium","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&I(0,zc,37,10,"div",0),e&2&&v("ngIf",n.isOpen)},dependencies:[ze,He,$e,We,Ge,et],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[ct("backdropAnimation",[Pe(":enter",[fe({opacity:0}),Ie("150ms ease-out",fe({opacity:1}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0}))])]),ct("modalAnimation",[Pe(":enter",[fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}),Ie("200ms ease-out",fe({opacity:1,transform:"scale(1) translateY(0)"}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Wc(i,t){if(i&1&&(a(0,"span"),u(1),c()),i&2){let e=_(2);p(),De(" Restore ",e.selectedCount," Asset",e.selectedCount!==1?"s":""," ")}}function Gc(i,t){i&1&&(a(0,"span",24),M(),a(1,"svg",33),y(2,"circle",34)(3,"path",35),c(),T(),a(4,"span"),u(5,"Restoring..."),c()())}function $c(i,t){if(i&1){let e=H();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),M(),a(5,"svg",6),y(6,"path",7),c()(),T(),a(7,"h2",8),u(8),c()(),a(9,"button",9),D("click",function(){k(e);let r=_();return E(r.onCancel())}),M(),a(10,"svg",10),y(11,"path",11),c()()(),T(),a(12,"div",12)(13,"div",13)(14,"div",14),M(),a(15,"svg",15),y(16,"path",7),c()()(),T(),a(17,"div",16)(18,"h3",17),u(19),c(),a(20,"p",18),u(21),c()(),a(22,"div",19)(23,"label",20),u(24,"Restore Reason (Optional)"),c(),a(25,"textarea",21),ue("ngModelChange",function(r){k(e);let s=_();return me(s.restoreReason,r)||(s.restoreReason=r),E(r)}),c(),a(26,"p",22),u(27,"This will be recorded in the audit trail"),c()(),a(28,"div",23)(29,"div",24),M(),a(30,"svg",25),y(31,"path",26),c(),T(),a(32,"p",27),u(33," Assets will be restored to active status "),c()()(),a(34,"div",28)(35,"button",29),D("click",function(){k(e);let r=_();return E(r.onCancel())}),u(36," Cancel "),c(),a(37,"button",30),D("click",function(){k(e);let r=_();return E(r.onConfirm())}),I(38,Wc,2,2,"span",31)(39,Gc,6,0,"span",32),c()()()()()}if(i&2){let e=_();v("@backdropAnimation",void 0),p(),v("@modalAnimation",void 0),p(7),W(" ",e.selectedCount>1?"Restore Selected Assets":"Restore Asset"," "),p(),v("disabled",e.loading),p(10),W(" Are you sure you want to restore ",e.selectedCount>1?e.selectedCount+" assets":e.assetName||"1 asset","? "),p(2),W(" ",e.selectedCount>1?"These assets will be moved back to active status and become available in searches.":"This asset will be moved back to active status and become available in searches."," "),p(4),de("ngModel",e.restoreReason),v("placeholder","Enter reason for restoring "+(e.selectedCount>1?"these assets":"this asset")+"..."),p(10),v("disabled",e.loading),p(2),v("disabled",e.loading),p(),v("ngIf",!e.loading),p(),v("ngIf",e.loading)}}var Qn=class i{isOpen=!1;selectedCount=0;assetName="";closeModal=new Ze;confirmRestore=new Ze;loading=!1;restoreReason="";onConfirm(){this.loading=!0,this.confirmRestore.emit(this.restoreReason),setTimeout(()=>{this.loading=!1,this.restoreReason=""},2e3)}onCancel(){this.loading||(this.restoreReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Re({type:i,selectors:[["app-restore-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount",assetName:"assetName"},outputs:{closeModal:"closeModal",confirmRestore:"confirmRestore"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"flex","justify-center","mb-6"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-600","mb-4"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3","mb-6"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-green-600","text-white","font-medium","rounded-lg","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&I(0,$c,40,12,"div",0),e&2&&v("ngIf",n.isOpen)},dependencies:[ze,He,$e,We,Ge,et],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[ct("backdropAnimation",[Pe(":enter",[fe({opacity:0}),Ie("150ms ease-out",fe({opacity:1}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0}))])]),ct("modalAnimation",[Pe(":enter",[fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}),Ie("200ms ease-out",fe({opacity:1,transform:"scale(1) translateY(0)"}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var Go=Ao(zo());var $o=i=>({"bg-blue-100":i}),Yc=i=>({"bg-blue-100 font-semibold":i}),qc=i=>["/assets/preview",i];function Kc(i,t){i&1&&(M(),y(0,"path",104))}function Qc(i,t){i&1&&(M(),y(0,"path",105))}function Xc(i,t){i&1&&(M(),a(0,"svg",86),y(1,"path",91),c())}function Jc(i,t){i&1&&(M(),a(0,"svg",106),y(1,"circle",107)(2,"path",108),c())}function Zc(i,t){if(i&1){let e=H();a(0,"div",84)(1,"button",85),M(),a(2,"svg",86),y(3,"path",87),c(),T(),a(4,"span"),u(5,"Analytics"),c()(),a(6,"button",88),D("click",function(){k(e);let r=_();return E(r.toggleArchivedView())}),M(),a(7,"svg",86),I(8,Kc,1,0,"path",89)(9,Qc,1,0,"path",90),c(),T(),a(10,"span"),u(11),c()(),a(12,"button",88),D("click",function(){k(e);let r=_();return E(r.exportToPdf())}),M(),a(13,"svg",86),y(14,"path",91),c(),T(),a(15,"span"),u(16,"Export Assets to PDF"),c()(),a(17,"button",92),D("click",function(){k(e);let r=_();return E(r.exportToExcel())}),I(18,Xc,2,0,"svg",93)(19,Jc,3,0,"svg",94),a(20,"span"),u(21),c()(),a(22,"button",95),M(),a(23,"svg",86),y(24,"path",96),c(),T(),a(25,"span"),u(26,"Smart Import"),c()(),y(27,"div",97),a(28,"button",98),M(),a(29,"svg",99),y(30,"path",100),c(),T(),a(31,"span"),u(32,"Archive Selected"),c()(),a(33,"button",101),M(),a(34,"svg",102),y(35,"path",103),c(),T(),a(36,"span"),u(37,"Delete Selected"),c()()()}if(i&2){let e=_();p(8),v("ngIf",!e.showingArchived),p(),v("ngIf",e.showingArchived),p(2),O(e.showingArchived?"View Active Assets":"View Archived Assets"),p(6),v("disabled",e.exportingExcel),p(),v("ngIf",!e.exportingExcel),p(),v("ngIf",e.exportingExcel),p(2),O(e.exportingExcel?"Exporting to Excel...":"Export Assets to Excel")}}function ed(i,t){i&1&&(a(0,"span",109),u(1,"Select asset type"),c())}function td(i,t){if(i&1&&(Xr(0),y(1,"img",111),Jr()),i&2){let e=_(2);p(),v("src",e.selectedAssetType.icon,ke)}}function id(i,t){if(i&1&&(a(0,"div",110),I(1,td,2,1,"ng-container",60),a(2,"span"),u(3),c()()),i&2){let e=_();p(),v("ngIf",e.selectedAssetType.icon),p(2),O(e.selectedAssetType.label)}}function nd(i,t){if(i&1&&(Xr(0),y(1,"img",116),Jr()),i&2){let e=_().$implicit;p(),v("src",e.icon,ke)}}function rd(i,t){if(i&1){let e=H();a(0,"div",115),D("click",function(){let r=k(e).$implicit,s=_(2);return s.selectAssetType(r),E(s.showAssetTypeDropdown=!1)}),I(1,nd,2,1,"ng-container",60),a(2,"span"),u(3),c()()}if(i&2){let e=t.$implicit,n=_(2);v("ngClass",Gt(3,$o,(n.selectedAssetType==null?null:n.selectedAssetType.id)===e.id)),p(),v("ngIf",e.icon),p(2),O(e.label)}}function sd(i,t){if(i&1&&(a(0,"div",112)(1,"div",113),u(2,"Select Asset Type"),c(),I(3,rd,4,5,"div",114),c()),i&2){let e=_();p(3),v("ngForOf",e.assetTypes)}}function od(i,t){i&1&&(a(0,"span",109),u(1,"Select asset status"),c())}function ad(i,t){if(i&1&&y(0,"span",118),i&2){let e=_(2);Ce("background",e.selectedAssetStatus.color)}}function ld(i,t){if(i&1&&(a(0,"div",110),I(1,ad,1,2,"span",117),a(2,"span"),u(3),c()()),i&2){let e=_();p(),v("ngIf",e.selectedAssetStatus.color),p(2),O(e.selectedAssetStatus.label)}}function cd(i,t){if(i&1&&y(0,"span",118),i&2){let e=_().$implicit;Ce("background",e.color)}}function dd(i,t){if(i&1){let e=H();a(0,"div",115),D("click",function(){let r=k(e).$implicit,s=_(2);return s.selectAssetStatus(r),E(s.showAssetStatusDropdown=!1)}),I(1,cd,1,2,"span",117),a(2,"span"),u(3),c()()}if(i&2){let e=t.$implicit,n=_(2);v("ngClass",Gt(3,$o,(n.selectedAssetStatus==null?null:n.selectedAssetStatus.id)===e.id)),p(),v("ngIf",e.color),p(2),O(e.label)}}function md(i,t){if(i&1&&(a(0,"div",112)(1,"div",113),u(2,"Select Asset Status"),c(),I(3,dd,4,5,"div",114),c()),i&2){let e=_();p(3),v("ngForOf",e.assetStatuses)}}function ud(i,t){i&1&&(a(0,"span",109),u(1,"Sort By"),c())}function pd(i,t){if(i&1&&(a(0,"span"),u(1),c()),i&2){let e=_();p(),O(e.selectedSort.label)}}function hd(i,t){if(i&1){let e=H();a(0,"div",121),D("click",function(){let r=k(e).$implicit,s=_(2);return s.selectSort(r),E(s.showSortDropdown=!1)}),u(1),c()}if(i&2){let e=t.$implicit,n=_(2);v("ngClass",Gt(2,Yc,(n.selectedSort==null?null:n.selectedSort.value)===e.value)),p(),W(" ",e.label," ")}}function fd(i,t){if(i&1&&(a(0,"div",119)(1,"div",113),u(2,"Sort By"),c(),I(3,hd,2,4,"div",120),c()),i&2){let e=_();p(3),v("ngForOf",e.sortOptions)}}function gd(i,t){i&1&&(M(),a(0,"svg",122),y(1,"path",123),c())}function _d(i,t){i&1&&(M(),a(0,"svg",122),y(1,"path",124),c())}function xd(i,t){i&1&&(a(0,"div",125)(1,"div",126)(2,"div",127),M(),a(3,"svg",128),y(4,"circle",107)(5,"path",108),c()(),T(),a(6,"h3",129),u(7,"Loading Assets"),c(),a(8,"p",130),u(9,"Please wait while we fetch your assets..."),c()()())}function vd(i,t){if(i&1){let e=H();a(0,"div",125)(1,"div",126)(2,"div",131),M(),a(3,"svg",132),y(4,"path",133),c()(),T(),a(5,"h3",129),u(6,"Error Loading Assets"),c(),a(7,"p",134),u(8),c(),a(9,"button",135),D("click",function(){k(e);let r=_();return E(r.loadAssets())}),u(10," Retry "),c()()()}if(i&2){let e=_();p(8),O(e.error)}}function bd(i,t){if(i&1){let e=H();a(0,"div",136)(1,"button",137),D("click",function(){k(e);let r=_();return E(r.toggleSelectAllAssets())}),y(2,"span",138),c(),a(3,"span",139),u(4),c()()}if(i&2){let e=_();p(4),W("Select all ",e.assetList.length," assets")}}function yd(i,t){if(i&1){let e=H();a(0,"button",155),D("click",function(){k(e);let r=_(2);return E(r.duplicateSelected())}),M(),a(1,"svg",145),y(2,"rect",156)(3,"rect",157),c(),u(4," Duplicate"),c()}if(i&2){let e=_(2);v("disabled",e.selectedCount===0)}}function wd(i,t){if(i&1){let e=H();a(0,"button",158),D("click",function(){k(e);let r=_(2);return E(r.showArchiveModal())}),M(),a(1,"svg",145),y(2,"rect",159)(3,"path",160),c(),u(4," Archive "),c()}if(i&2){let e=_(2);v("disabled",e.selectedCount===0)}}function Cd(i,t){if(i&1){let e=H();a(0,"button",161),D("click",function(){k(e);let r=_(2);return E(r.showDeleteModal())}),M(),a(1,"svg",145),y(2,"rect",159)(3,"path",162),c(),u(4," Delete "),c()}if(i&2){let e=_(2);v("disabled",e.selectedCount===0)}}function Sd(i,t){if(i&1){let e=H();a(0,"button",163),D("click",function(){k(e);let r=_(2);return E(r.restoreSelected())}),M(),a(1,"svg",145),y(2,"path",164),c(),u(3," Restore "),c()}if(i&2){let e=_(2);v("disabled",e.selectedCount===0)}}function Md(i,t){if(i&1){let e=H();a(0,"div",140)(1,"div",141)(2,"button",137),D("click",function(){k(e);let r=_();return E(r.toggleSelectAllAssets())}),y(3,"span",142),c(),a(4,"span",143),u(5),c(),a(6,"span",144),M(),a(7,"svg",145),y(8,"path",146),c(),u(9," Selection Mode Active - Click cards to select "),c()(),T(),a(10,"div",110),I(11,yd,5,1,"button",147),a(12,"button",148),D("click",function(){k(e);let r=_();return E(r.generateQRCodeForSelectedAssets())}),M(),a(13,"svg",145),y(14,"path",149),c(),u(15," Generate QR Codes "),c(),I(16,wd,5,1,"button",150)(17,Cd,5,1,"button",151)(18,Sd,4,1,"button",152),T(),a(19,"button",153),D("click",function(){k(e);let r=_();return E(r.clearSelection())}),a(20,"span",154),u(21,"\xD7"),c(),u(22," Clear"),c()()()}if(i&2){let e=_();p(2),z("bg-blue-100",e.selectedCount===e.assetList.length),p(),z("bg-blue-400",e.selectedCount===e.assetList.length)("bg-white",e.selectedCount!==e.assetList.length),p(2),De("",e.selectedCount," asset",e.selectedCount>1?"s":""," selected"),p(6),v("ngIf",!e.showingArchived),p(),v("disabled",e.selectedCount===0),p(4),v("ngIf",!e.showingArchived),p(),v("ngIf",e.showingArchived),p(),v("ngIf",e.showingArchived)}}function kd(i,t){if(i&1){let e=H();a(0,"div",165)(1,"div",166),M(),a(2,"svg",167),y(3,"path",21),c()(),T(),a(4,"h3",129),u(5,"No Assets Found"),c(),a(6,"p",168),u(7,"Get started by creating your first asset."),c(),a(8,"button",135),D("click",function(){k(e);let r=_();return E(r.goToCreateAsset())}),u(9," Add Asset "),c()()}}function Ed(i,t){i&1&&(a(0,"span",200),u(1,"Active"),c())}function Ad(i,t){if(i&1&&(a(0,"span"),u(1),c()),i&2){let e=_().$implicit,n=_(2);Te("bg-"+n.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-100 text-"+n.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-700 text-xs font-semibold px-3 py-1 rounded-full"),p(),O((e.asset_status==null?null:e.asset_status.name)||e.status)}}function Dd(i,t){if(i&1){let e=H();a(0,"button",214),D("click",function(){k(e);let r=_(2).$implicit,s=_(2);return E(s.viewAsset(r))}),M(),a(1,"svg",215),y(2,"path",216)(3,"path",217),c(),T(),a(4,"span",218),u(5,"View Details"),c()()}}function Td(i,t){if(i&1){let e=H();a(0,"button",214),D("click",function(){k(e);let r=_(2).$implicit,s=_(2);return E(s.editAsset(r))}),M(),a(1,"svg",215),y(2,"path",219),c(),T(),a(3,"span",218),u(4,"Edit Asset"),c()()}}function Id(i,t){if(i&1){let e=H();a(0,"button",214),D("click",function(){k(e);let r=_(2).$implicit,s=_(2);return E(s.duplicateAsset(r))}),M(),a(1,"svg",215),y(2,"path",208),c(),T(),a(3,"span",218),u(4,"Duplicate"),c()()}}function Pd(i,t){if(i&1){let e=H();a(0,"button",220),D("click",function(){k(e);let r=_(2).$implicit,s=_(2);return E(s.archiveAsset(r))}),M(),a(1,"svg",221),y(2,"path",104),c(),T(),a(3,"span",222),u(4,"Archive"),c()()}}function Vd(i,t){if(i&1){let e=H();a(0,"button",223),D("click",function(){k(e);let r=_(2).$implicit,s=_(2);return E(s.restoreAsset(r))}),M(),a(1,"svg",224),y(2,"path",164),c(),T(),a(3,"span",225),u(4,"Restore"),c()()}}function Ld(i,t){if(i&1){let e=H();a(0,"button",226),D("click",function(){k(e);let r=_(2).$implicit,s=_(2);return E(s.deleteAsset(r))}),M(),a(1,"svg",227),y(2,"path",228),c(),T(),a(3,"span",229),u(4,"Delete Permanently"),c()()}}function Od(i,t){if(i&1){let e=H();a(0,"div",201),I(1,Dd,6,0,"button",202)(2,Td,5,0,"button",202)(3,Id,5,0,"button",202),a(4,"button",203),D("click",function(){k(e);let r=_().$implicit,s=_(2);return E(s.generateQRCodeForAsset(r))}),M(),a(5,"svg",204),y(6,"path",149),c(),T(),a(7,"span",205),u(8,"Generate QR Code"),c()(),a(9,"button",206),D("click",function(){k(e);let r=_().$implicit,s=_(2);return E(s.copyPublicUrl(r))}),M(),a(10,"svg",207),y(11,"path",208),c(),T(),a(12,"span",209),u(13,"Copy Public URL"),c()(),y(14,"div",210),I(15,Pd,5,0,"button",211)(16,Vd,5,0,"button",212)(17,Ld,5,0,"button",213),c()}if(i&2){let e=_(3);p(),v("ngIf",!e.showingArchived),p(),v("ngIf",!e.showingArchived),p(),v("ngIf",!e.showingArchived),p(12),v("ngIf",!e.showingArchived),p(),v("ngIf",e.showingArchived),p(),v("ngIf",e.showingArchived)}}function Fd(i,t){if(i&1&&(a(0,"div",230)(1,"a",231),u(2),c()()),i&2){let e=_().$implicit;p(),v("routerLink",Gt(3,qc,e.parent.id)),p(),De(" Parent: ",e.parent.name," (",e.parent.asset_id,") ")}}function Rd(i,t){if(i&1&&(a(0,"b"),u(1),Xe(2,"number"),c()),i&2){let e=_().$implicit;p(),W("$",$t(2,1,e.purchase_price,"1.0-0"),"")}}function Hd(i,t){i&1&&(a(0,"b"),u(1,"N/A"),c())}function Nd(i,t){if(i&1&&(a(0,"div",192),M(),a(1,"svg",145),y(2,"path",232),c(),T(),a(3,"span"),u(4,"Purchase Date "),a(5,"b"),u(6),Xe(7,"date"),c()()()),i&2){let e=_().$implicit;p(6),O($t(7,1,e.purchase_date,"MMM d, y"))}}function Bd(i,t){if(i&1){let e=H();a(0,"div",171)(1,"div",172)(2,"div",173)(3,"input",174),ue("ngModelChange",function(r){let s=k(e).$implicit;return me(s.selected,r)||(s.selected=r),E(r)}),c()(),a(4,"div",175),I(5,Ed,2,0,"span",176)(6,Ad,2,3,"span",177),a(7,"div",8),D("click",function(r){return k(e),E(r.stopPropagation())}),a(8,"button",178),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.toggleAssetMenu(r.id))}),M(),a(9,"svg",179),y(10,"circle",180)(11,"circle",181)(12,"circle",182),c()(),I(13,Od,18,6,"div",183),c()(),a(14,"svg",184),y(15,"path",21),c()(),T(),a(16,"div",185)(17,"div"),I(18,Fd,3,5,"div",186),a(19,"div",187),D("click",function(){let r=k(e).$implicit,s=_(2);return E(!s.showingArchived&&s.viewAsset(r))}),u(20),c(),a(21,"div",188),u(22),c(),a(23,"div",189),M(),a(24,"svg",145),y(25,"path",190),c(),T(),a(26,"span"),u(27),c()(),y(28,"hr",191),a(29,"div",192),M(),a(30,"svg",145),y(31,"path",43),c(),T(),a(32,"span"),u(33,"Value "),I(34,Rd,3,4,"b",60)(35,Hd,2,0,"b",60),c()(),I(36,Nd,8,4,"div",193),c(),a(37,"div",194)(38,"div",195)(39,"span",196),u(40,"Health Score"),c(),a(41,"span",197),u(42),c()(),a(43,"div",198),y(44,"div",199),c()()()()}if(i&2){let e=t.$implicit,n=_(2);z("border-blue-400",e.selected),p(3),de("ngModel",e.selected),p(2),v("ngIf",(e.asset_status==null?null:e.asset_status.name)==="Active"),p(),v("ngIf",(e.asset_status==null?null:e.asset_status.name)!=="Active"),p(7),v("ngIf",e.showMenu),p(5),v("ngIf",e.parent),p(),z("cursor-pointer",!n.showingArchived)("hover:text-blue-600",!n.showingArchived)("cursor-default",n.showingArchived),p(),W(" ",e.name||"Unnamed Asset"," "),p(2),De("",e.asset_id||e.id," \u2022 ",e.type||"General",""),p(5),O((e.location==null?null:e.location.name)||"No location"),p(7),v("ngIf",e.purchase_price!==null),p(),v("ngIf",e.purchase_price===null),p(),v("ngIf",e.purchase_date),p(6),W("",e.health_score||100,"%"),p(2),Ce("width",e.health_score||100,"%"),v("ngClass",(e.health_score||100)<50?"bg-red-500":"bg-green-500")}}function jd(i,t){if(i&1&&(a(0,"div",169),I(1,Bd,45,24,"div",170),c()),i&2){let e=_();p(),v("ngForOf",e.assetList)}}function zd(i,t){if(i&1){let e=H();a(0,"div",243)(1,"div",244)(2,"div",240)(3,"input",245),ue("ngModelChange",function(r){let s=k(e).$implicit;return me(s.selected,r)||(s.selected=r),E(r)}),c()(),a(4,"div",238)(5,"div",246)(6,"div",247),M(),a(7,"svg",248),y(8,"path",21),c()(),T(),a(9,"div")(10,"div",249),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.viewAsset(r))}),u(11),c(),a(12,"div",130),u(13),c()()()(),a(14,"div",239)(15,"div",250),u(16),c(),a(17,"div",130),u(18),c()(),a(19,"div",239)(20,"div",251),M(),a(21,"svg",252),y(22,"path",253)(23,"path",254),c(),T(),a(24,"span",255),u(25),c()()(),a(26,"div",240)(27,"span"),u(28),c()(),a(29,"div",239)(30,"div",250),u(31),Xe(32,"currency"),c(),a(33,"div",130),u(34),c()(),a(35,"div",240)(36,"div",110)(37,"button",256),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.viewAsset(r))}),M(),a(38,"svg",122),y(39,"path",216)(40,"path",217),c()(),T(),a(41,"button",257),M(),a(42,"svg",122),y(43,"path",219),c()(),T(),a(44,"button",258),M(),a(45,"svg",122),y(46,"path",228),c()()()()()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",e.selected),p(3),de("ngModel",e.selected),p(8),W(" ",e.name||"Unnamed Asset"," "),p(2),O(e.asset_id||"AST-"+e.id),p(3),O(e.type||"Standard Asset"),p(2),O((e.category==null?null:e.category.name)||"General"),p(7),O((e.location==null?null:e.location.name)||"No location"),p(2),Te("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+n.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-100 text-"+n.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-800"),p(),W(" ",(e.asset_status==null?null:e.asset_status.name)||e.status||"Active"," "),p(3),W(" ",e.purchase_price?Ut(32,13,e.purchase_price,"USD","symbol","1.0-0"):"N/A"," "),p(3),W(" Health: ",e.health_score||100,"% ")}}function Wd(i,t){if(i&1){let e=H();a(0,"div",233)(1,"div",234)(2,"div",235)(3,"div",236)(4,"input",237),D("change",function(){k(e);let r=_();return E(r.toggleSelectAllAssets())}),c()(),a(5,"div",238),u(6,"Asset"),c(),a(7,"div",239),u(8,"Type & Category"),c(),a(9,"div",239),u(10,"Location"),c(),a(11,"div",240),u(12,"Status"),c(),a(13,"div",239),u(14,"Financial"),c(),a(15,"div",240),u(16,"Actions"),c()()(),a(17,"div",241),I(18,zd,47,18,"div",242),c()()}if(i&2){let e=_();p(4),v("checked",e.selectedCount===e.assetList.length&&e.assetList.length>0)("indeterminate",e.selectedCount>0&&e.selectedCount<e.assetList.length),p(14),v("ngForOf",e.assetList)}}var Ai=class i{constructor(t,e,n){this.router=t;this.assetService=e;this.pdfExportService=n}destroy$=new wi;summary={totalAssets:0,activeAssets:0,maintenance:0,totalValue:0,assetHealth:0};loading=!1;exportingExcel=!1;error="";showMenu=!1;showTypeDropdown=!1;showStatusDropdown=!1;showSortDropdown=!1;showSortDirDropdown=!1;showArchiveConfirmationModal=!1;showDeleteConfirmationModal=!1;showRestoreConfirmationModal=!1;selectedAssetForRestore=null;showingArchived=!1;typeOptions=[{value:"",label:"All Types"},{value:"fixed",label:"Fixed Asset"},{value:"semi-fixed",label:"Semi-Fixed Asset"},{value:"mobile",label:"Mobile Asset"},{value:"fleet",label:"Fleet Asset"}];statusOptions=[{value:"",label:"All Status"},{value:"Active",label:"Active"},{value:"Maintenance",label:"Maintenance"},{value:"Inactive",label:"Inactive"},{value:"Retired",label:"Retired"}];sortOptions=[{value:"name",label:"Name"},{value:"created_at",label:"Date Added"},{value:"status",label:"Status"},{value:"manufacturer",label:"Manufacturer"},{value:"purchase_price",label:"Cost"}];selectedType=this.typeOptions[0];selectedStatus=this.statusOptions[0];selectedSort=this.sortOptions[0];selectedSortDir="desc";viewType="grid";searchQuery="";currentFilters={search:"",type:"",status:"",category_id:"",location_id:"",sort_by:"name",sort_direction:"desc",page:1,per_page:20,archived:!1};assetList=[];categories=[];locations=[];assetTypes=[];showAssetTypeDropdown=!1;selectedAssetType=null;assetStatuses=[];showAssetStatusDropdown=!1;selectedAssetStatus=null;openAssetMenuId=null;pagination={current_page:1,last_page:1,per_page:20,total:0,from:0,to:0};selectAllAssets=!1;ngOnInit(){this.loadAssetStatistics(),this.loadAssets(),this.loadCategories(),this.loadLocations(),this.assetService.getAssetTypes().subscribe(t=>{t.success&&t.data&&(this.assetTypes=[{id:"",name:"All Types",label:"All Types",icon:null},...t.data.map(e=>({id:e.id,name:e.name,label:e.name,icon:e.icon||null}))],this.selectedAssetType=this.assetTypes[0])}),this.assetService.getAssetStatuses().subscribe(t=>{t.success&&t.data&&(this.assetStatuses=[{id:"",name:"All Statuses",label:"All Statuses",color:null},...t.data.map(e=>({id:e.id,name:e.name,label:e.name,color:e.color||null}))],this.selectedAssetStatus=this.assetStatuses[0])})}loadAssetStatistics(){this.assetService.getAssetStatistics().pipe(ce(this.destroy$)).subscribe({next:t=>{if(t.success&&t.data){let e=t.data;this.summary={totalAssets:e.total_assets||0,activeAssets:e.active_assets||0,maintenance:e.maintenance||0,totalValue:e.total_asset_value||0,assetHealth:e.total_asset_health&&e.total_assets?Math.round(e.total_asset_health/e.total_assets):100}}},error:t=>{console.error("Error loading asset statistics:",t)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadAssets(){this.loading=!0,this.error="";let t={};this.currentFilters.search&&(t.search=this.currentFilters.search),this.currentFilters.type&&(t.type=this.currentFilters.type),this.currentFilters.status&&(t.status=this.currentFilters.status),this.currentFilters.category_id&&(t.category_id=this.currentFilters.category_id),this.currentFilters.location_id&&(t.location_id=this.currentFilters.location_id),this.currentFilters.sort_by&&(t.sort_by=this.currentFilters.sort_by),this.currentFilters.sort_direction&&(t.sort_direction=this.currentFilters.sort_direction),t.archived=this.currentFilters.archived,t.page=this.currentFilters.page,t.per_page=this.currentFilters.per_page,this.assetService.getAssets(t).pipe(ce(this.destroy$)).subscribe({next:e=>{e.success?(this.assetList=(e.data.assets||e.data).map(n=>yi(bi({},n),{selected:!1,showMenu:!1})),e.data.pagination&&(this.pagination=e.data.pagination)):this.error=e.message||"Failed to load assets",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading assets",this.loading=!1}})}loadCategories(){this.assetService.getAssetCategories().pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&(this.categories=t.data.categories)},error:t=>{console.error("Error loading categories:",t)}})}loadLocations(){this.assetService.getLocations().pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&(this.locations=t.data.locations||t.data)},error:t=>{console.error("Error loading locations:",t)}})}onSearch(){this.currentFilters.search=this.searchQuery,this.currentFilters.page=1,this.loadAssets()}applyFilters(){this.currentFilters.page=1,this.loadAssets()}get selectedCount(){return this.assetList.filter(t=>t.selected).length}toggleSelectAllAssets(){let t=this.selectedCount===this.assetList.length;this.assetList.forEach(e=>e.selected=!t),this.selectAllAssets=!t}selectType(t){let e=this.typeOptions.find(n=>n.value===t);e&&(this.selectedType=e,this.currentFilters.type=e.value),this.showTypeDropdown=!1,this.applyFilters()}selectStatus(t){let e=this.statusOptions.find(n=>n.value===t);e&&(this.selectedStatus=e,this.currentFilters.status=e.value),this.showStatusDropdown=!1,this.applyFilters()}selectSort(t){let e=this.sortOptions.find(n=>n.value===t);e&&(this.selectedSort=e,this.currentFilters.sort_by=e.value),this.showSortDropdown=!1,this.applyFilters()}selectSortDir(t){this.selectedSortDir=t,this.currentFilters.sort_direction=t,this.showSortDirDropdown=!1,this.applyFilters()}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.currentFilters.sort_direction=this.selectedSortDir,this.applyFilters()}duplicateSelected(){let t=this.assetList.filter(n=>n.selected);if(t.length===0)return;let e=t[0];this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:e.id}}),this.clearSelection()}generateSerialNumber(){let t=Date.now().toString(),e=Math.random().toString(36).substring(2,8).toUpperCase();return`SN${t.slice(-6)}${e}`}clearSelection(){this.assetList.forEach(t=>t.selected=!1),this.selectAllAssets=!1}showArchiveModal(){this.selectedCount>0&&(this.showArchiveConfirmationModal=!0)}closeArchiveModal(){this.showArchiveConfirmationModal=!1}showDeleteModal(){this.selectedCount>0&&(this.showDeleteConfirmationModal=!0)}closeDeleteModal(){this.showDeleteConfirmationModal=!1}closeRestoreModal(){this.showRestoreConfirmationModal=!1,this.selectedAssetForRestore=null}restoreSelectedAsset(t){if(this.assetList.filter(n=>n.selected).length>1)this.restoreBulkAssets(t);else if(this.selectedAssetForRestore){let n={};t&&t.trim()&&(n.restore_reason=t.trim()),this.assetService.restoreAsset(this.selectedAssetForRestore.id,n).pipe(ce(this.destroy$)).subscribe({next:r=>{r.success?(this.loadAssets(),this.loadAssetStatistics(),console.log("Asset restored successfully")):this.error=r.message||"Failed to restore asset",this.closeRestoreModal()},error:r=>{this.error=r.error?.message||"An error occurred while restoring the asset",this.closeRestoreModal()}})}else this.closeRestoreModal()}deleteSelected(t){let e=this.assetList.filter(s=>s.selected);if(e.length===0){this.closeDeleteModal();return}let r={asset_ids:e.map(s=>s.id)};t&&t.trim()&&(r.deletion_reason=t.trim()),this.assetService.bulkDeleteAssets(r).pipe(ce(this.destroy$)).subscribe({next:s=>{if(s.success){if(s.failed&&s.failed.length>0){let o=s.failed.length,l=s.deleted?s.deleted.length:0;this.error=`${l} assets deleted successfully, ${o} failed to delete`}else{let o=s.deleted?s.deleted.length:e.length;console.log(`${o} assets deleted successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=s.message||"Failed to delete assets";this.closeDeleteModal()},error:s=>{this.error=s.error?.message||"An error occurred while deleting assets",this.closeDeleteModal()}})}viewAsset(t){this.router.navigate(["/assets/preview",t.id])}archiveSelected(t){let e=this.assetList.filter(s=>s.selected);if(e.length===0){this.closeArchiveModal();return}let r={asset_ids:e.map(s=>s.id)};t&&t.trim()&&(r.archive_reason=t.trim()),this.assetService.bulkArchiveAssets(r).pipe(ce(this.destroy$)).subscribe({next:s=>{if(s.success){if(s.failed&&s.failed.length>0){let o=s.failed.length,l=s.archived?s.archived.length:0;this.error=`${l} assets archived successfully, ${o} failed to archive`}else{let o=s.archived?s.archived.length:e.length;console.log(`${o} assets archived successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=s.message||"Failed to archive assets";this.closeArchiveModal()},error:s=>{this.error=s.error?.message||"An error occurred while archiving assets",this.closeArchiveModal()}})}toggleTypeDropdown(){this.showTypeDropdown=!this.showTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showTypeDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown,this.showTypeDropdown=!1,this.showStatusDropdown=!1,this.showSortDirDropdown=!1}toggleArchivedView(){this.showingArchived=!this.showingArchived,this.currentFilters.archived=this.showingArchived,this.currentFilters.page=1,this.clearSelection(),this.loadAssets(),this.showMenu=!1}goToCreateAsset(){this.router.navigate(["assets/create"])}exportToPdf(){if(this.assetList.length>0){let t=this.showingArchived?"Archived Assets Export Report":"Asset Export Report";this.pdfExportService.exportAssetsToPdf(this.assetList,t),this.showMenu=!1}else console.log("No assets to export")}exportToExcel(){this.assetList.length>0?(this.exportingExcel=!0,this.assetService.exportAssetsToExcel(this.showingArchived).subscribe({next:t=>{let e=window.URL.createObjectURL(t),n=document.createElement("a");n.href=e;let r=this.showingArchived?"archived-assets-export.xlsx":"assets-export.xlsx";n.download=r,n.click(),window.URL.revokeObjectURL(e),this.exportingExcel=!1,this.showMenu=!1},error:t=>{console.error("Error exporting to Excel:",t),this.exportingExcel=!1}})):console.log("No assets to export")}getStatusColor(t){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[t]||"gray"}toggleAssetMenu(t){this.assetList.forEach(n=>{n.id!==t&&(n.showMenu=!1)});let e=this.assetList.find(n=>n.id===t);e&&(e.showMenu=!e.showMenu)}editAsset(t){this.router.navigate(["/assets",t.id,"edit"]),t.showMenu=!1}duplicateAsset(t){this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:t.id}}),t.showMenu=!1}archiveAsset(t){this.assetList.forEach(e=>e.selected=!1),t.selected=!0,this.showArchiveConfirmationModal=!0,t.showMenu=!1}deleteAsset(t){this.assetList.forEach(e=>e.selected=!1),t.selected=!0,this.showDeleteConfirmationModal=!0,t.showMenu=!1}restoreSelected(){this.assetList.filter(e=>e.selected).length!==0&&(this.showRestoreConfirmationModal=!0)}restoreBulkAssets(t){let e=this.assetList.filter(r=>r.selected);if(e.length===0){this.closeRestoreModal();return}let n=e.map(r=>r.id);this.assetService.bulkRestoreAssets(n,t).pipe(ce(this.destroy$)).subscribe({next:r=>{if(r.success){if(r.failed&&r.failed.length>0){let s=r.failed.length,o=r.restored?r.restored.length:0;this.error=`${o} assets restored successfully, ${s} failed to restore`}else{let s=r.restored?r.restored.length:e.length;console.log(`${s} assets restored successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=r.message||"Failed to restore assets";this.closeRestoreModal()},error:r=>{this.error=r.error?.message||"An error occurred while restoring assets",this.closeRestoreModal()}})}restoreAsset(t){this.selectedAssetForRestore=t,this.showRestoreConfirmationModal=!0,t.showMenu=!1}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.currentFilters.type=t.id,this.showAssetTypeDropdown=!1,this.applyFilters()}toggleAssetStatusDropdown(){this.showAssetStatusDropdown=!this.showAssetStatusDropdown}selectAssetStatus(t){this.selectedAssetStatus=t,this.currentFilters.status=t.id,this.showAssetStatusDropdown=!1,this.applyFilters()}onDocumentClick(t){t.target.closest(".menu-container")||(this.showMenu=!1)}generateQRCodeForAsset(t){let e=`${window.location.origin}/public/asset/${t.id}`;Go.toDataURL(e,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(n=>{let r=document.createElement("a");r.href=n,r.download=`asset-${t.id}-qr.png`,r.click()}).catch(n=>{console.error("Error generating QR code:",n)})}generateQRCodeForSelectedAssets(){let t=this.assetList.filter(e=>e.selected);if(t.length===0){console.log("No assets selected");return}t.forEach(e=>{this.generateQRCodeForAsset(e)})}copyPublicUrl(t){let e=`${window.location.origin}/public/asset/${t.id}`;navigator.clipboard.writeText(e).then(()=>{console.log("Public URL copied to clipboard")})}static \u0275fac=function(e){return new(e||i)(he(wt),he(dt),he(Yn))};static \u0275cmp=Re({type:i,selectors:[["app-asset-list"]],hostBindings:function(e,n){e&1&&D("click",function(s){return n.onDocumentClick(s)},!1,Ci)},decls:132,vars:60,consts:[[1,"asset-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-5","py-2","rounded-lg","shadow-sm","transition-colors","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"relative",3,"click"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-5","gap-4","mb-8"],[1,"rounded-xl","bg-blue-50","border","border-blue-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-base","font-medium","text-gray-700"],[1,"w-10","h-10","bg-blue-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-3xl","font-bold","text-gray-900"],["href","#",1,"text-sm","text-blue-600","font-medium","mt-1"],[1,"rounded-xl","bg-green-50","border","border-green-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-green-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-400"],["cx","12","cy","12","r","8","stroke","currentColor","stroke-width","2","fill","none"],["cx","12","cy","12","r","4","fill","currentColor",1,"text-green-400"],[1,"text-sm","text-green-600","font-medium","mt-1"],[1,"rounded-xl","bg-orange-50","border","border-orange-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-orange-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-1.5a2.5 2.5 0 11-3.536 3.536l-7.5 7.5a2 2 0 102.828 2.828l7.5-7.5a2.5 2.5 0 013.536-3.536z"],[1,"text-sm","text-orange-600","font-medium","mt-1"],[1,"rounded-xl","bg-purple-50","border","border-purple-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-purple-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-sm","text-purple-600","font-medium","mt-1"],[1,"rounded-xl","bg-cyan-50","border","border-cyan-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-cyan-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3zm0 0V4m0 8v8m8-8h-8m8 0a8 8 0 11-16 0 8 8 0 0116 0z"],[1,"text-sm","text-cyan-600","font-medium","mt-1"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","mb-6"],[1,"flex-1","flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:items-center","md:space-x-3"],[1,"relative","w-full","md:w-80"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search assets by name, location, or ID...",1,"w-full","pl-10","pr-4","py-2","border-2","border-blue-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","input","ngModel"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[220px]",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-10 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-72 overflow-y-auto min-w-[220px] w-full",4,"ngIf"],[1,"relative","ml-2",3,"click"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[180px]",3,"click"],[4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform","ml-2"],["class","absolute z-10 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-72 overflow-y-auto min-w-[180px] w-full",4,"ngIf"],[1,"relative"],[1,"px-4","py-2","bg-gray-100","rounded-lg","text-gray-700","flex","items-center","space-x-2","min-w-[70px]","cursor-pointer",3,"click"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","space-x-2","mt-4","md:mt-0"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","border","border-gray-200","hover:bg-blue-50","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["x","4","y","4","width","7","height","7","rx","2"],["x","13","y","4","width","7","height","7","rx","2"],["x","4","y","13","width","7","height","7","rx","2"],["x","13","y","13","width","7","height","7","rx","2"],["x","4","y","6","width","16","height","4","rx","2"],["x","4","y","14","width","16","height","4","rx","2"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center justify-between",4,"ngIf"],["class","text-center py-20",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-2",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",4,"ngIf"],[3,"closeModal","confirmArchive","isOpen","selectedCount"],[3,"closeModal","confirmDelete","isOpen","selectedCount"],[3,"closeModal","confirmRestore","isOpen","selectedCount","assetName"],[1,"absolute","right-0","mt-2","w-64","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2a4 4 0 014-4h2a4 4 0 014 4v2"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","w-5 h-5 text-gray-500","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","animate-spin w-5 h-5 text-gray-500","fill","none","viewBox","0 0 24 24",4,"ngIf"],["routerLink","/assets/import",1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"border-t","border-gray-100","my-2"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-orange-50","text-left","transition-colors","cursor-pointer","text-orange-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-red-50","text-left","transition-colors","cursor-pointer","text-red-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5","text-gray-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["alt","icon",1,"w-5","h-5",3,"src"],[1,"absolute","z-10","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-72","overflow-y-auto","min-w-[220px]","w-full"],[1,"px-4","py-2","text-xs","text-gray-400","font-semibold","uppercase","tracking-wider"],["class","flex items-center px-4 py-2 cursor-pointer hover:bg-blue-50",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","items-center","px-4","py-2","cursor-pointer","hover:bg-blue-50",3,"click","ngClass"],["alt","icon",1,"w-5","h-5","mr-2",3,"src"],["class","inline-block w-3 h-3 rounded-full mr-2",3,"background",4,"ngIf"],[1,"inline-block","w-3","h-3","rounded-full","mr-2"],[1,"absolute","z-10","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-72","overflow-y-auto","min-w-[180px]","w-full"],["class","px-4 py-2 cursor-pointer hover:bg-blue-50",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"px-4","py-2","cursor-pointer","hover:bg-blue-50",3,"click","ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 17l-4 4m0 0l-4-4m4 4V3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7l4-4m0 0l4 4m-4-4v18"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center"],["type","button",1,"focus:outline-none","inline-flex","items-center","justify-center","w-6","h-6","rounded-full","border-2","border-blue-400","mr-3","transition-colors",3,"click"],[1,"w-3","h-3","rounded-full","block","bg-white","transition-colors"],[1,"font-semibold","text-gray-900"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-3","h-3","rounded-full","block","transition-colors"],[1,"font-bold","text-gray-900"],[1,"bg-blue-50","text-blue-600","px-3","py-1","rounded-full","text-sm","flex","items-center","font-medium"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7"],["class","bg-gray-50 text-gray-700 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 border border-gray-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-purple-50","text-purple-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zm12 0h2a1 1 0 001-1V6a1 1 0 00-1-1h-2a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1z"],["class","bg-orange-50 text-orange-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-red-50 text-red-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-green-50 text-green-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-transparent","text-gray-700","font-semibold","px-2","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer",3,"click"],[1,"text-xl"],[1,"bg-gray-50","text-gray-700","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","border","border-gray-200","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","8","y","8","width","8","height","8","rx","2","stroke-width","2"],["x","4","y","4","width","8","height","8","rx","2","stroke-width","2"],[1,"bg-orange-50","text-orange-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","4","y","4","width","16","height","16","rx","2","stroke-width","2"],["d","M8 12h8","stroke-width","2"],[1,"bg-red-50","text-red-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["d","M8 8l8 8M8 16l8-8","stroke-width","2"],[1,"bg-green-50","text-green-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-20"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","mt-2"],["class","rounded-2xl border border-blue-200 bg-white shadow-sm flex flex-col transition-all hover:shadow-md overflow-hidden",3,"border-blue-400",4,"ngFor","ngForOf"],[1,"rounded-2xl","border","border-blue-200","bg-white","shadow-sm","flex","flex-col","transition-all","hover:shadow-md","overflow-hidden"],[1,"relative","bg-[#e0edff]","h-32","flex","flex-col","items-center","justify-center"],[1,"absolute","left-4","top-4","flex","items-center"],["type","checkbox",1,"asset-card-checkbox",3,"ngModelChange","ngModel"],[1,"absolute","right-4","top-4","flex","items-center","space-x-2"],["class","bg-green-100 text-green-700 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[3,"class",4,"ngIf"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["cx","12","cy","6","r","1.5"],["cx","12","cy","12","r","1.5"],["cx","12","cy","18","r","1.5"],["class","absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-blue-400"],[1,"flex-1","flex","flex-col","justify-between","p-6","pt-4"],["class","mb-2",4,"ngIf"],[1,"font-semibold","text-lg","text-gray-900","mb-1","cursor-pointer","hover:text-blue-600","transition-colors",3,"click"],[1,"text-sm","text-gray-500","mb-1"],[1,"flex","items-center","text-xs","text-gray-400","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 12.414a4 4 0 10-1.414 1.414l4.243 4.243a1 1 0 001.414-1.414z"],[1,"my-3","border-gray-200"],[1,"flex","items-center","text-sm","text-gray-700","mb-1"],["class","flex items-center text-sm text-gray-700 mb-1",4,"ngIf"],[1,"mt-4"],[1,"flex","justify-between","items-center","mb-1"],[1,"text-xs","text-gray-500"],[1,"text-xs","font-semibold","text-gray-700"],[1,"w-full","h-2","bg-gray-200","rounded-full"],[1,"h-2","rounded-full",3,"ngClass"],[1,"bg-green-100","text-green-700","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-1","z-50"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-purple-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-500"],[1,"text-sm","text-purple-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-blue-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"text-sm","text-blue-600"],[1,"border-t","border-gray-100","my-1"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-orange-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-green-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-red-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"text-sm","text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-orange-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-500"],[1,"text-sm","text-orange-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-green-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-500"],[1,"text-sm","text-green-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-red-600"],[1,"mb-2"],[1,"text-blue-600","hover:underline","text-xs",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-1","flex","items-center"],["type","checkbox",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"change","checked","indeterminate"],[1,"col-span-3"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 transition-colors",3,"bg-blue-50",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","transition-colors"],[1,"grid","grid-cols-12","gap-4","items-center"],["type","checkbox",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"font-medium","text-gray-900","hover:text-blue-600","cursor-pointer","transition-colors",3,"click"],[1,"text-sm","text-gray-900"],[1,"flex","items-center","space-x-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-sm","text-gray-600"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all",3,"click"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all"],[1,"p-1","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded","transition-all"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),u(4,"Asset Intelligence Hub"),c(),a(5,"p",3),u(6,"Advanced asset monitoring with AI-powered insights and real-time analytics"),c()(),a(7,"div",4)(8,"button",5),D("click",function(){return n.goToCreateAsset()}),M(),a(9,"svg",6),y(10,"path",7),c(),u(11," Add Asset "),c(),T(),a(12,"div",8),D("click",function(s){return s.stopPropagation()}),a(13,"button",9),D("click",function(){return n.showMenu=!n.showMenu}),M(),a(14,"svg",10),y(15,"circle",11)(16,"circle",12)(17,"circle",13),c()(),I(18,Zc,38,7,"div",14),c()()(),T(),a(19,"div",15)(20,"div",16)(21,"div",17)(22,"span",18),u(23,"Total Assets"),c(),a(24,"span",19),M(),a(25,"svg",20),y(26,"path",21),c()()(),T(),a(27,"div",22),u(28),c(),a(29,"a",23),u(30,"Assets in system"),c()(),a(31,"div",24)(32,"div",17)(33,"span",18),u(34,"Active"),c(),a(35,"span",25),M(),a(36,"svg",26),y(37,"circle",27)(38,"circle",28),c()()(),T(),a(39,"div",22),u(40),c(),a(41,"span",29),u(42,"Operational assets"),c()(),a(43,"div",30)(44,"div",17)(45,"span",18),u(46,"Maintenance"),c(),a(47,"span",31),M(),a(48,"svg",32),y(49,"path",33),c()()(),T(),a(50,"div",22),u(51),c(),a(52,"span",34),u(53,"Under maintenance"),c()(),a(54,"div",35)(55,"div",17)(56,"span",18),u(57,"Total Value"),c(),a(58,"span",36),M(),a(59,"svg",37),y(60,"path",38),c()()(),T(),a(61,"div",22),u(62),Xe(63,"currency"),c(),a(64,"span",39),u(65,"Asset portfolio value"),c()(),a(66,"div",40)(67,"div",17)(68,"span",18),u(69,"Asset Health"),c(),a(70,"span",41),M(),a(71,"svg",42),y(72,"path",43),c()()(),T(),a(73,"div",22),u(74),c(),a(75,"span",44),u(76,"Excellent health"),c()()(),a(77,"div",45)(78,"div",46)(79,"div",47),M(),a(80,"svg",48),y(81,"path",49),c(),T(),a(82,"input",50),ue("ngModelChange",function(s){return me(n.searchQuery,s)||(n.searchQuery=s),s}),D("input",function(){return n.onSearch()}),c()(),a(83,"div",8),D("click",function(s){return s.stopPropagation()}),a(84,"button",51),D("click",function(){return n.toggleAssetTypeDropdown()}),a(85,"div",52),I(86,ed,2,0,"span",53)(87,id,4,2,"div",54),M(),a(88,"svg",55),y(89,"path",56),c()()(),I(90,sd,4,1,"div",57),c(),T(),a(91,"div",58),D("click",function(s){return s.stopPropagation()}),a(92,"button",51),D("click",function(){return n.toggleAssetStatusDropdown()}),a(93,"div",52),I(94,od,2,0,"span",53)(95,ld,4,2,"div",54),c()(),I(96,md,4,1,"div",57),c(),a(97,"div",58),D("click",function(s){return s.stopPropagation()}),a(98,"button",59),D("click",function(){return n.toggleSortDropdown()}),a(99,"div",52),I(100,ud,2,0,"span",53)(101,pd,2,1,"span",60),M(),a(102,"svg",61),y(103,"path",56),c()()(),I(104,fd,4,1,"div",62),c(),T(),a(105,"div",63)(106,"button",64),D("click",function(){return n.toggleSortDir()}),I(107,gd,2,0,"svg",65)(108,_d,2,0,"svg",65),a(109,"span"),u(110),c()()()(),a(111,"div",66)(112,"button",67),D("click",function(){return n.viewType="grid"}),M(),a(113,"svg",68),y(114,"rect",69)(115,"rect",70)(116,"rect",71)(117,"rect",72),c()(),T(),a(118,"button",67),D("click",function(){return n.viewType="list"}),M(),a(119,"svg",68),y(120,"rect",73)(121,"rect",74),c()()()(),I(122,xd,10,0,"div",75)(123,vd,11,1,"div",75)(124,bd,5,1,"div",76)(125,Md,23,13,"div",77)(126,kd,10,0,"div",78)(127,jd,2,1,"div",79)(128,Wd,19,3,"div",80),T(),a(129,"app-archive-confirmation-modal",81),D("closeModal",function(){return n.closeArchiveModal()})("confirmArchive",function(){return n.archiveSelected()}),c(),a(130,"app-delete-confirmation-modal",82),D("closeModal",function(){return n.closeDeleteModal()})("confirmDelete",function(s){return n.deleteSelected(s)}),c(),a(131,"app-restore-confirmation-modal",83),D("closeModal",function(){return n.closeRestoreModal()})("confirmRestore",function(s){return n.restoreSelectedAsset(s)}),c()()),e&2&&(p(18),v("ngIf",n.showMenu),p(10),O(n.summary.totalAssets),p(12),O(n.summary.activeAssets),p(11),O(n.summary.maintenance),p(11),O(Ut(63,55,n.summary.totalValue,"USD","symbol","1.0-0")),p(12),W("",n.summary.assetHealth,"%"),p(8),de("ngModel",n.searchQuery),p(2),z("border-blue-500",n.showAssetTypeDropdown),p(2),v("ngIf",!n.selectedAssetType),p(),v("ngIf",n.selectedAssetType),p(),z("rotate-180",n.showAssetTypeDropdown),p(2),v("ngIf",n.showAssetTypeDropdown),p(2),z("border-blue-500",n.showAssetStatusDropdown),p(2),v("ngIf",!n.selectedAssetStatus),p(),v("ngIf",n.selectedAssetStatus),p(),v("ngIf",n.showAssetStatusDropdown),p(2),z("border-blue-500",n.showSortDropdown),p(2),v("ngIf",!n.selectedSort),p(),v("ngIf",n.selectedSort),p(),z("rotate-180",n.showSortDropdown),p(2),v("ngIf",n.showSortDropdown),p(2),z("bg-blue-100",n.selectedSortDir==="asc")("text-blue-700",n.selectedSortDir==="asc"),p(),v("ngIf",n.selectedSortDir==="desc"),p(),v("ngIf",n.selectedSortDir==="asc"),p(2),O(n.selectedSortDir==="asc"?"A-Z":"Z-A"),p(2),z("bg-blue-100",n.viewType==="grid")("text-blue-700",n.viewType==="grid"),p(6),z("bg-blue-100",n.viewType==="list")("text-blue-700",n.viewType==="list"),p(4),v("ngIf",n.loading),p(),v("ngIf",n.error&&!n.loading),p(),v("ngIf",n.viewType==="grid"&&n.selectedCount===0&&!n.loading&&!n.error),p(),v("ngIf",n.viewType==="grid"&&n.selectedCount>0&&!n.loading&&!n.error),p(),v("ngIf",!n.loading&&!n.error&&n.assetList.length===0),p(),v("ngIf",n.viewType==="grid"&&!n.loading&&!n.error&&n.assetList.length>0),p(),v("ngIf",n.viewType==="list"&&!n.loading&&!n.error&&n.assetList.length>0),p(),v("isOpen",n.showArchiveConfirmationModal)("selectedCount",n.selectedCount),p(),v("isOpen",n.showDeleteConfirmationModal)("selectedCount",n.selectedCount),p(),v("isOpen",n.showRestoreConfirmationModal)("selectedCount",n.selectedCount>0?n.selectedCount:1)("assetName",(n.selectedAssetForRestore==null?null:n.selectedAssetForRestore.name)||""))},dependencies:[On,He,lt,$e,We,Ho,Ge,et,Fo,Ln,qn,Kn,Qn,Vn,Pt,Fn],styles:['.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]{width:20px!important;height:20px!important;border-radius:50%!important;border-width:2px;border-color:#3b82f6;appearance:none;background-color:#fff;display:inline-block;vertical-align:middle;position:relative;transition:border-color .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#2563eb}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked:after{content:"";display:block;width:10px;height:10px;border-radius:50%;background:#fff;position:absolute;top:3px;left:3px}.asset-list-page[_ngcontent-%COMP%]   .asset-card-header[_ngcontent-%COMP%]{background:#e0edff;height:8rem;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;border-top-left-radius:1rem;border-top-right-radius:1rem;overflow:hidden}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #101e3614;overflow:hidden;background:#fff;border:1px solid #bfdbfe;display:flex;flex-direction:column;transition:box-shadow .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;border-color:#e5e7eb}']})};var Jn=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Qt={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(i){return typeof console<"u"&&console.warn(i)},getWeek:function(i){var t=new Date(i.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Zn={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(i){var t=i%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},er=Zn;var Ue=function(i,t){return t===void 0&&(t=2),("000"+i).slice(t*-1)},tt=function(i){return i===!0?1:0};function Zr(i,t){var e;return function(){var n=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return i.apply(n,r)},t)}}var tr=function(i){return i instanceof Array?i:[i]};function Ye(i,t,e){if(e===!0)return i.classList.add(t);i.classList.remove(t)}function ae(i,t,e){var n=window.document.createElement(i);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function Xi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function es(i,t){if(t(i))return i;if(i.parentNode)return es(i.parentNode,t)}function Ji(i,t){var e=ae("div","numInputWrapper"),n=ae("input","numInput "+i),r=ae("span","arrowUp"),s=ae("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var o in t)n.setAttribute(o,t[o]);return e.appendChild(n),e.appendChild(r),e.appendChild(s),e}function it(i){try{if(typeof i.composedPath=="function"){var t=i.composedPath();return t[0]}return i.target}catch{return i.target}}var ts=function(){},Zi=function(i,t,e){return e.months[t?"shorthand":"longhand"][i]},Uo={D:ts,F:function(i,t,e){i.setMonth(e.months.longhand.indexOf(t))},G:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},H:function(i,t){i.setHours(parseFloat(t))},J:function(i,t){i.setDate(parseFloat(t))},K:function(i,t,e){i.setHours(i.getHours()%12+12*tt(new RegExp(e.amPM[1],"i").test(t)))},M:function(i,t,e){i.setMonth(e.months.shorthand.indexOf(t))},S:function(i,t){i.setSeconds(parseFloat(t))},U:function(i,t){return new Date(parseFloat(t)*1e3)},W:function(i,t,e){var n=parseInt(t),r=new Date(i.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(i,t){i.setFullYear(parseFloat(t))},Z:function(i,t){return new Date(t)},d:function(i,t){i.setDate(parseFloat(t))},h:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},i:function(i,t){i.setMinutes(parseFloat(t))},j:function(i,t){i.setDate(parseFloat(t))},l:ts,m:function(i,t){i.setMonth(parseFloat(t)-1)},n:function(i,t){i.setMonth(parseFloat(t)-1)},s:function(i,t){i.setSeconds(parseFloat(t))},u:function(i,t){return new Date(parseFloat(t))},w:ts,y:function(i,t){i.setFullYear(2e3+parseFloat(t))}},Vt={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Di={Z:function(i){return i.toISOString()},D:function(i,t,e){return t.weekdays.shorthand[Di.w(i,t,e)]},F:function(i,t,e){return Zi(Di.n(i,t,e)-1,!1,t)},G:function(i,t,e){return Ue(Di.h(i,t,e))},H:function(i){return Ue(i.getHours())},J:function(i,t){return t.ordinal!==void 0?i.getDate()+t.ordinal(i.getDate()):i.getDate()},K:function(i,t){return t.amPM[tt(i.getHours()>11)]},M:function(i,t){return Zi(i.getMonth(),!0,t)},S:function(i){return Ue(i.getSeconds())},U:function(i){return i.getTime()/1e3},W:function(i,t,e){return e.getWeek(i)},Y:function(i){return Ue(i.getFullYear(),4)},d:function(i){return Ue(i.getDate())},h:function(i){return i.getHours()%12?i.getHours()%12:12},i:function(i){return Ue(i.getMinutes())},j:function(i){return i.getDate()},l:function(i,t){return t.weekdays.longhand[i.getDay()]},m:function(i){return Ue(i.getMonth()+1)},n:function(i){return i.getMonth()+1},s:function(i){return i.getSeconds()},u:function(i){return i.getTime()},w:function(i){return i.getDay()},y:function(i){return String(i.getFullYear()).substring(2)}};var is=function(i){var t=i.config,e=t===void 0?Qt:t,n=i.l10n,r=n===void 0?Zn:n,s=i.isMobile,o=s===void 0?!1:s;return function(l,d,m){var h=m||r;return e.formatDate!==void 0&&!o?e.formatDate(l,d,h):d.split("").map(function(f,x,g){return Di[f]&&g[x-1]!=="\\"?Di[f](l,h,e):f!=="\\"?f:""}).join("")}},ir=function(i){var t=i.config,e=t===void 0?Qt:t,n=i.l10n,r=n===void 0?Zn:n;return function(s,o,l,d){if(!(s!==0&&!s)){var m=d||r,h,f=s;if(s instanceof Date)h=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)h=new Date(s);else if(typeof s=="string"){var x=o||(e||Qt).dateFormat,g=String(s).trim();if(g==="today")h=new Date,l=!0;else if(e&&e.parseDate)h=e.parseDate(s,x);else if(/Z$/.test(g)||/GMT$/.test(g))h=new Date(s);else{for(var S=void 0,w=[],A=0,L=0,V="";A<x.length;A++){var N=x[A],j=N==="\\",R=x[A-1]==="\\"||j;if(Vt[N]&&!R){V+=Vt[N];var B=new RegExp(V).exec(s);B&&(S=!0)&&w[N!=="Y"?"push":"unshift"]({fn:Uo[N],val:B[++L]})}else j||(V+=".")}h=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),w.forEach(function(U){var G=U.fn,q=U.val;return h=G(h,q,m)||h}),h=S?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){e.errorHandler(new Error("Invalid date provided: "+f));return}return l===!0&&h.setHours(0,0,0,0),h}}};function nt(i,t,e){return e===void 0&&(e=!0),e!==!1?new Date(i.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):i.getTime()-t.getTime()}var Yo=function(i,t,e){return i>Math.min(t,e)&&i<Math.max(t,e)},nr=function(i,t,e){return i*3600+t*60+e},qo=function(i){var t=Math.floor(i/3600),e=(i-t*3600)/60;return[t,e,i-t*3600-e*60]},Ko={DAY:864e5};function rr(i){var t=i.defaultHour,e=i.defaultMinute,n=i.defaultSeconds;if(i.minDate!==void 0){var r=i.minDate.getHours(),s=i.minDate.getMinutes(),o=i.minDate.getSeconds();t<r&&(t=r),t===r&&e<s&&(e=s),t===r&&e===s&&n<o&&(n=i.minDate.getSeconds())}if(i.maxDate!==void 0){var l=i.maxDate.getHours(),d=i.maxDate.getMinutes();t=Math.min(t,l),t===l&&(e=Math.min(d,e)),t===l&&e===d&&(n=i.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!i)throw TypeError("Cannot convert undefined or null to object");for(var n=function(l){l&&Object.keys(l).forEach(function(d){return i[d]=l[d]})},r=0,s=t;r<s.length;r++){var o=s[r];n(o)}return i});var qe=function(){return qe=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},qe.apply(this,arguments)},Qo=function(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;for(var n=Array(i),r=0,t=0;t<e;t++)for(var s=arguments[t],o=0,l=s.length;o<l;o++,r++)n[r]=s[o];return n},Gd=300;function $d(i,t){var e={config:qe(qe({},Qt),Ve.defaultConfig),l10n:er};e.parseDate=ir({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=w,e._setHoursFromDate=x,e._positionCalendar=Mn,e.changeMonth=zt,e.changeYear=wn,e.clear=Wt,e.close=li,e.onMouseOver=Sn,e._createElement=ae,e.createDay=B,e.destroy=Tt,e.isEnabled=ci,e.jumpToDate=V,e.updateValue=It,e.open=fc,e.redraw=Co,e.set=vc,e.setDate=bc,e.toggle=Sc;function n(){e.utils={getDaysInMonth:function(b,C){return b===void 0&&(b=e.currentMonth),C===void 0&&(C=e.currentYear),b===1&&(C%4===0&&C%100!==0||C%400===0)?29:e.l10n.daysInMonth[b]}}}function r(){e.element=e.input=i,e.isOpen=!1,gc(),wo(),wc(),yc(),n(),e.isMobile||R(),L(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&x(e.config.noCalendar?e.latestSelectedDateObj:void 0),It(!1)),l();var b=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&b&&Mn(),Me("onReady")}function s(){var b;return((b=e.calendarContainer)===null||b===void 0?void 0:b.getRootNode()).activeElement||document.activeElement}function o(b){return b.bind(e)}function l(){var b=e.config;b.weekNumbers===!1&&b.showMonths===1||b.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var C=(e.days.offsetWidth+1)*b.showMonths;e.daysContainer.style.width=C+"px",e.calendarContainer.style.width=C+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function d(b){if(e.selectedDates.length===0){var C=e.config.minDate===void 0||nt(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),P=rr(e.config);C.setHours(P.hours,P.minutes,P.seconds,C.getMilliseconds()),e.selectedDates=[C],e.latestSelectedDateObj=C}b!==void 0&&b.type!=="blur"&&Ec(b);var F=e._input.value;f(),It(),e._input.value!==F&&e._debouncedChange()}function m(b,C){return b%12+12*tt(C===e.l10n.amPM[1])}function h(b){switch(b%24){case 0:case 12:return 12;default:return b%12}}function f(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var b=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,C=(parseInt(e.minuteElement.value,10)||0)%60,P=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(b=m(b,e.amPM.textContent));var F=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&nt(e.latestSelectedDateObj,e.config.minDate,!0)===0,$=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&nt(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var Y=nr(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),ie=nr(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),Q=nr(b,C,P);if(Q>ie&&Q<Y){var ne=qo(Y);b=ne[0],C=ne[1],P=ne[2]}}else{if($){var K=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;b=Math.min(b,K.getHours()),b===K.getHours()&&(C=Math.min(C,K.getMinutes())),C===K.getMinutes()&&(P=Math.min(P,K.getSeconds()))}if(F){var X=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;b=Math.max(b,X.getHours()),b===X.getHours()&&C<X.getMinutes()&&(C=X.getMinutes()),C===X.getMinutes()&&(P=Math.max(P,X.getSeconds()))}}g(b,C,P)}}function x(b){var C=b||e.latestSelectedDateObj;C&&C instanceof Date&&g(C.getHours(),C.getMinutes(),C.getSeconds())}function g(b,C,P){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(b%24,C,P||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=Ue(e.config.time_24hr?b:(12+b)%12+12*tt(b%12===0)),e.minuteElement.value=Ue(C),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[tt(b>=12)]),e.secondElement!==void 0&&(e.secondElement.value=Ue(P)))}function S(b){var C=it(b),P=parseInt(C.value)+(b.delta||0);(P/1e3>1||b.key==="Enter"&&!/[^\d]/.test(P.toString()))&&wn(P)}function w(b,C,P,F){if(C instanceof Array)return C.forEach(function($){return w(b,$,P,F)});if(b instanceof Array)return b.forEach(function($){return w($,C,P,F)});b.addEventListener(C,P,F),e._handlers.push({remove:function(){return b.removeEventListener(C,P,F)}})}function A(){Me("onChange")}function L(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(P){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+P+"]"),function(F){return w(F,"click",e[P])})}),e.isMobile){Cc();return}var b=Zr(hc,50);if(e._debouncedChange=Zr(A,Gd),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&w(e.daysContainer,"mouseover",function(P){e.config.mode==="range"&&Sn(it(P))}),w(e._input,"keydown",vo),e.calendarContainer!==void 0&&w(e.calendarContainer,"keydown",vo),!e.config.inline&&!e.config.static&&w(window,"resize",b),window.ontouchstart!==void 0?w(window.document,"touchstart",ht):w(window.document,"mousedown",ht),w(window.document,"focus",ht,{capture:!0}),e.config.clickOpens===!0&&(w(e._input,"focus",e.open),w(e._input,"click",e.open)),e.daysContainer!==void 0&&(w(e.monthNav,"click",kc),w(e.monthNav,["keyup","increment"],S),w(e.daysContainer,"click",So)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var C=function(P){return it(P).select()};w(e.timeContainer,["increment"],d),w(e.timeContainer,"blur",d,{capture:!0}),w(e.timeContainer,"click",N),w([e.hourElement,e.minuteElement],["focus","click"],C),e.secondElement!==void 0&&w(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&w(e.amPM,"click",function(P){d(P)})}e.config.allowInput&&w(e._input,"blur",pc)}function V(b,C){var P=b!==void 0?e.parseDate(b):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),F=e.currentYear,$=e.currentMonth;try{P!==void 0&&(e.currentYear=P.getFullYear(),e.currentMonth=P.getMonth())}catch(Y){Y.message="Invalid date supplied: "+P,e.config.errorHandler(Y)}C&&e.currentYear!==F&&(Me("onYearChange"),we()),C&&(e.currentYear!==F||e.currentMonth!==$)&&Me("onMonthChange"),e.redraw()}function N(b){var C=it(b);~C.className.indexOf("arrow")&&j(b,C.classList.contains("arrowUp")?1:-1)}function j(b,C,P){var F=b&&it(b),$=P||F&&F.parentNode&&F.parentNode.firstChild,Y=Yr("increment");Y.delta=C,$&&$.dispatchEvent(Y)}function R(){var b=window.document.createDocumentFragment();if(e.calendarContainer=ae("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(b.appendChild(xe()),e.innerContainer=ae("div","flatpickr-innerContainer"),e.config.weekNumbers){var C=jt(),P=C.weekWrapper,F=C.weekNumbers;e.innerContainer.appendChild(P),e.weekNumbers=F,e.weekWrapper=P}e.rContainer=ae("div","flatpickr-rContainer"),e.rContainer.appendChild(Je()),e.daysContainer||(e.daysContainer=ae("div","flatpickr-days"),e.daysContainer.tabIndex=-1),te(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),b.appendChild(e.innerContainer)}e.config.enableTime&&b.appendChild(Se()),Ye(e.calendarContainer,"rangeMode",e.config.mode==="range"),Ye(e.calendarContainer,"animate",e.config.animate===!0),Ye(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(b);var $=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!$&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var Y=ae("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(Y,e.element),Y.appendChild(e.element),e.altInput&&Y.appendChild(e.altInput),Y.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function B(b,C,P,F){var $=ci(C,!0),Y=ae("span",b,C.getDate().toString());return Y.dateObj=C,Y.$i=F,Y.setAttribute("aria-label",e.formatDate(C,e.config.ariaDateFormat)),b.indexOf("hidden")===-1&&nt(C,e.now)===0&&(e.todayDateElem=Y,Y.classList.add("today"),Y.setAttribute("aria-current","date")),$?(Y.tabIndex=-1,qr(C)&&(Y.classList.add("selected"),e.selectedDateElem=Y,e.config.mode==="range"&&(Ye(Y,"startRange",e.selectedDates[0]&&nt(C,e.selectedDates[0],!0)===0),Ye(Y,"endRange",e.selectedDates[1]&&nt(C,e.selectedDates[1],!0)===0),b==="nextMonthDay"&&Y.classList.add("inRange")))):Y.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Mc(C)&&!qr(C)&&Y.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&b!=="prevMonthDay"&&F%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(C)+"</span>"),Me("onDayCreate",Y),Y}function U(b){b.focus(),e.config.mode==="range"&&Sn(b)}function G(b){for(var C=b>0?0:e.config.showMonths-1,P=b>0?e.config.showMonths:-1,F=C;F!=P;F+=b)for(var $=e.daysContainer.children[F],Y=b>0?0:$.children.length-1,ie=b>0?$.children.length:-1,Q=Y;Q!=ie;Q+=b){var ne=$.children[Q];if(ne.className.indexOf("hidden")===-1&&ci(ne.dateObj))return ne}}function q(b,C){for(var P=b.className.indexOf("Month")===-1?b.dateObj.getMonth():e.currentMonth,F=C>0?e.config.showMonths:-1,$=C>0?1:-1,Y=P-e.currentMonth;Y!=F;Y+=$)for(var ie=e.daysContainer.children[Y],Q=P-e.currentMonth===Y?b.$i+C:C<0?ie.children.length-1:0,ne=ie.children.length,K=Q;K>=0&&K<ne&&K!=(C>0?ne:-1);K+=$){var X=ie.children[K];if(X.className.indexOf("hidden")===-1&&ci(X.dateObj)&&Math.abs(b.$i-K)>=Math.abs(C))return U(X)}e.changeMonth($),J(G($),0)}function J(b,C){var P=s(),F=Cn(P||document.body),$=b!==void 0?b:F?P:e.selectedDateElem!==void 0&&Cn(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Cn(e.todayDateElem)?e.todayDateElem:G(C>0?1:-1);$===void 0?e._input.focus():F?q($,C):U($)}function ee(b,C){for(var P=(new Date(b,C,1).getDay()-e.l10n.firstDayOfWeek+7)%7,F=e.utils.getDaysInMonth((C-1+12)%12,b),$=e.utils.getDaysInMonth(C,b),Y=window.document.createDocumentFragment(),ie=e.config.showMonths>1,Q=ie?"prevMonthDay hidden":"prevMonthDay",ne=ie?"nextMonthDay hidden":"nextMonthDay",K=F+1-P,X=0;K<=F;K++,X++)Y.appendChild(B("flatpickr-day "+Q,new Date(b,C-1,K),K,X));for(K=1;K<=$;K++,X++)Y.appendChild(B("flatpickr-day",new Date(b,C,K),K,X));for(var ge=$+1;ge<=42-P&&(e.config.showMonths===1||X%7!==0);ge++,X++)Y.appendChild(B("flatpickr-day "+ne,new Date(b,C+1,ge%$),ge,X));var xt=ae("div","dayContainer");return xt.appendChild(Y),xt}function te(){if(e.daysContainer!==void 0){Xi(e.daysContainer),e.weekNumbers&&Xi(e.weekNumbers);for(var b=document.createDocumentFragment(),C=0;C<e.config.showMonths;C++){var P=new Date(e.currentYear,e.currentMonth,1);P.setMonth(e.currentMonth+C),b.appendChild(ee(P.getFullYear(),P.getMonth()))}e.daysContainer.appendChild(b),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Sn()}}function we(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var b=function(F){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&F<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&F>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var C=0;C<12;C++)if(b(C)){var P=ae("option","flatpickr-monthDropdown-month");P.value=new Date(e.currentYear,C).getMonth().toString(),P.textContent=Zi(C,e.config.shorthandCurrentMonth,e.l10n),P.tabIndex=-1,e.currentMonth===C&&(P.selected=!0),e.monthsDropdownContainer.appendChild(P)}}}function Qe(){var b=ae("div","flatpickr-month"),C=window.document.createDocumentFragment(),P;e.config.showMonths>1||e.config.monthSelectorType==="static"?P=ae("span","cur-month"):(e.monthsDropdownContainer=ae("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),w(e.monthsDropdownContainer,"change",function(ie){var Q=it(ie),ne=parseInt(Q.value,10);e.changeMonth(ne-e.currentMonth),Me("onMonthChange")}),we(),P=e.monthsDropdownContainer);var F=Ji("cur-year",{tabindex:"-1"}),$=F.getElementsByTagName("input")[0];$.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&$.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&($.setAttribute("max",e.config.maxDate.getFullYear().toString()),$.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var Y=ae("div","flatpickr-current-month");return Y.appendChild(P),Y.appendChild(F),C.appendChild(Y),b.appendChild(C),{container:b,yearElement:$,monthElement:P}}function le(){Xi(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var b=e.config.showMonths;b--;){var C=Qe();e.yearElements.push(C.yearElement),e.monthElements.push(C.monthElement),e.monthNav.appendChild(C.container)}e.monthNav.appendChild(e.nextMonthNav)}function xe(){return e.monthNav=ae("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=ae("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=ae("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,le(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(b){e.__hidePrevMonthArrow!==b&&(Ye(e.prevMonthNav,"flatpickr-disabled",b),e.__hidePrevMonthArrow=b)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(b){e.__hideNextMonthArrow!==b&&(Ye(e.nextMonthNav,"flatpickr-disabled",b),e.__hideNextMonthArrow=b)}}),e.currentYearElement=e.yearElements[0],En(),e.monthNav}function Se(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var b=rr(e.config);e.timeContainer=ae("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var C=ae("span","flatpickr-time-separator",":"),P=Ji("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=P.getElementsByTagName("input")[0];var F=Ji("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=F.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Ue(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?b.hours:h(b.hours)),e.minuteElement.value=Ue(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():b.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(P),e.timeContainer.appendChild(C),e.timeContainer.appendChild(F),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var $=Ji("flatpickr-second");e.secondElement=$.getElementsByTagName("input")[0],e.secondElement.value=Ue(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():b.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(ae("span","flatpickr-time-separator",":")),e.timeContainer.appendChild($)}return e.config.time_24hr||(e.amPM=ae("span","flatpickr-am-pm",e.l10n.amPM[tt((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Je(){e.weekdayContainer?Xi(e.weekdayContainer):e.weekdayContainer=ae("div","flatpickr-weekdays");for(var b=e.config.showMonths;b--;){var C=ae("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(C)}return Oe(),e.weekdayContainer}function Oe(){if(e.weekdayContainer){var b=e.l10n.firstDayOfWeek,C=Qo(e.l10n.weekdays.shorthand);b>0&&b<C.length&&(C=Qo(C.splice(b,C.length),C.splice(0,b)));for(var P=e.config.showMonths;P--;)e.weekdayContainer.children[P].innerHTML=`
      <span class='flatpickr-weekday'>
        `+C.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function jt(){e.calendarContainer.classList.add("hasWeeks");var b=ae("div","flatpickr-weekwrapper");b.appendChild(ae("span","flatpickr-weekday",e.l10n.weekAbbreviation));var C=ae("div","flatpickr-weeks");return b.appendChild(C),{weekWrapper:b,weekNumbers:C}}function zt(b,C){C===void 0&&(C=!0);var P=C?b:b-e.currentMonth;P<0&&e._hidePrevMonthArrow===!0||P>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=P,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Me("onYearChange"),we()),te(),Me("onMonthChange"),En())}function Wt(b,C){if(b===void 0&&(b=!0),C===void 0&&(C=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,C===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var P=rr(e.config),F=P.hours,$=P.minutes,Y=P.seconds;g(F,$,Y)}e.redraw(),b&&Me("onChange")}function li(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),Me("onClose")}function Tt(){e.config!==void 0&&Me("onDestroy");for(var b=e._handlers.length;b--;)e._handlers[b].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var C=e.calendarContainer.parentNode;if(C.lastChild&&C.removeChild(C.lastChild),C.parentNode){for(;C.firstChild;)C.parentNode.insertBefore(C.firstChild,C);C.parentNode.removeChild(C)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(P){try{delete e[P]}catch{}})}function pt(b){return e.calendarContainer.contains(b)}function ht(b){if(e.isOpen&&!e.config.inline){var C=it(b),P=pt(C),F=C===e.input||C===e.altInput||e.element.contains(C)||b.path&&b.path.indexOf&&(~b.path.indexOf(e.input)||~b.path.indexOf(e.altInput)),$=!F&&!P&&!pt(b.relatedTarget),Y=!e.config.ignoredFocusElements.some(function(ie){return ie.contains(C)});$&&Y&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&d(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function wn(b){if(!(!b||e.config.minDate&&b<e.config.minDate.getFullYear()||e.config.maxDate&&b>e.config.maxDate.getFullYear())){var C=b,P=e.currentYear!==C;e.currentYear=C||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),P&&(e.redraw(),Me("onYearChange"),we())}}function ci(b,C){var P;C===void 0&&(C=!0);var F=e.parseDate(b,void 0,C);if(e.config.minDate&&F&&nt(F,e.config.minDate,C!==void 0?C:!e.minDateHasTime)<0||e.config.maxDate&&F&&nt(F,e.config.maxDate,C!==void 0?C:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(F===void 0)return!1;for(var $=!!e.config.enable,Y=(P=e.config.enable)!==null&&P!==void 0?P:e.config.disable,ie=0,Q=void 0;ie<Y.length;ie++){if(Q=Y[ie],typeof Q=="function"&&Q(F))return $;if(Q instanceof Date&&F!==void 0&&Q.getTime()===F.getTime())return $;if(typeof Q=="string"){var ne=e.parseDate(Q,void 0,!0);return ne&&ne.getTime()===F.getTime()?$:!$}else if(typeof Q=="object"&&F!==void 0&&Q.from&&Q.to&&F.getTime()>=Q.from.getTime()&&F.getTime()<=Q.to.getTime())return $}return!$}function Cn(b){return e.daysContainer!==void 0?b.className.indexOf("hidden")===-1&&b.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(b):!1}function pc(b){var C=b.target===e._input,P=e._input.value.trimEnd()!==Kr();C&&P&&!(b.relatedTarget&&pt(b.relatedTarget))&&e.setDate(e._input.value,!0,b.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function vo(b){var C=it(b),P=e.config.wrap?i.contains(C):C===e._input,F=e.config.allowInput,$=e.isOpen&&(!F||!P),Y=e.config.inline&&P&&!F;if(b.keyCode===13&&P){if(F)return e.setDate(e._input.value,!0,C===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),C.blur();e.open()}else if(pt(C)||$||Y){var ie=!!e.timeContainer&&e.timeContainer.contains(C);switch(b.keyCode){case 13:ie?(b.preventDefault(),d(),Ur()):So(b);break;case 27:b.preventDefault(),Ur();break;case 8:case 46:P&&!e.config.allowInput&&(b.preventDefault(),e.clear());break;case 37:case 39:if(!ie&&!P){b.preventDefault();var Q=s();if(e.daysContainer!==void 0&&(F===!1||Q&&Cn(Q))){var ne=b.keyCode===39?1:-1;b.ctrlKey?(b.stopPropagation(),zt(ne),J(G(1),0)):J(void 0,ne)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:b.preventDefault();var K=b.keyCode===40?1:-1;e.daysContainer&&C.$i!==void 0||C===e.input||C===e.altInput?b.ctrlKey?(b.stopPropagation(),wn(e.currentYear-K),J(G(1),0)):ie||J(void 0,K*7):C===e.currentYearElement?wn(e.currentYear-K):e.config.enableTime&&(!ie&&e.hourElement&&e.hourElement.focus(),d(b),e._debouncedChange());break;case 9:if(ie){var X=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(at){return at}),ge=X.indexOf(C);if(ge!==-1){var xt=X[ge+(b.shiftKey?-1:1)];b.preventDefault(),(xt||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(C)&&b.shiftKey&&(b.preventDefault(),e._input.focus());break;default:break}}if(e.amPM!==void 0&&C===e.amPM)switch(b.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],f(),It();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],f(),It();break}(P||pt(C))&&Me("onKeyDown",b)}function Sn(b,C){if(C===void 0&&(C="flatpickr-day"),!(e.selectedDates.length!==1||b&&(!b.classList.contains(C)||b.classList.contains("flatpickr-disabled")))){for(var P=b?b.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),F=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),$=Math.min(P,e.selectedDates[0].getTime()),Y=Math.max(P,e.selectedDates[0].getTime()),ie=!1,Q=0,ne=0,K=$;K<Y;K+=Ko.DAY)ci(new Date(K),!0)||(ie=ie||K>$&&K<Y,K<F&&(!Q||K>Q)?Q=K:K>F&&(!ne||K<ne)&&(ne=K));var X=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+C));X.forEach(function(ge){var xt=ge.dateObj,at=xt.getTime(),Ki=Q>0&&at<Q||ne>0&&at>ne;if(Ki){ge.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(vi){ge.classList.remove(vi)});return}else if(ie&&!Ki)return;["startRange","inRange","endRange","notAllowed"].forEach(function(vi){ge.classList.remove(vi)}),b!==void 0&&(b.classList.add(P<=e.selectedDates[0].getTime()?"startRange":"endRange"),F<P&&at===F?ge.classList.add("startRange"):F>P&&at===F&&ge.classList.add("endRange"),at>=Q&&(ne===0||at<=ne)&&Yo(at,F,P)&&ge.classList.add("inRange"))})}}function hc(){e.isOpen&&!e.config.static&&!e.config.inline&&Mn()}function fc(b,C){if(C===void 0&&(C=e._positionElement),e.isMobile===!0){if(b){b.preventDefault();var P=it(b);P&&P.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),Me("onOpen");return}else if(e._input.disabled||e.config.inline)return;var F=e.isOpen;e.isOpen=!0,F||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Me("onOpen"),Mn(C)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(b===void 0||!e.timeContainer.contains(b.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function bo(b){return function(C){var P=e.config["_"+b+"Date"]=e.parseDate(C,e.config.dateFormat),F=e.config["_"+(b==="min"?"max":"min")+"Date"];P!==void 0&&(e[b==="min"?"minDateHasTime":"maxDateHasTime"]=P.getHours()>0||P.getMinutes()>0||P.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function($){return ci($)}),!e.selectedDates.length&&b==="min"&&x(P),It()),e.daysContainer&&(Co(),P!==void 0?e.currentYearElement[b]=P.getFullYear().toString():e.currentYearElement.removeAttribute(b),e.currentYearElement.disabled=!!F&&P!==void 0&&F.getFullYear()===P.getFullYear())}}function gc(){var b=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],C=qe(qe({},JSON.parse(JSON.stringify(i.dataset||{}))),t),P={};e.config.parseDate=C.parseDate,e.config.formatDate=C.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(X){e.config._enable=ko(X)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(X){e.config._disable=ko(X)}});var F=C.mode==="time";if(!C.dateFormat&&(C.enableTime||F)){var $=Ve.defaultConfig.dateFormat||Qt.dateFormat;P.dateFormat=C.noCalendar||F?"H:i"+(C.enableSeconds?":S":""):$+" H:i"+(C.enableSeconds?":S":"")}if(C.altInput&&(C.enableTime||F)&&!C.altFormat){var Y=Ve.defaultConfig.altFormat||Qt.altFormat;P.altFormat=C.noCalendar||F?"h:i"+(C.enableSeconds?":S K":" K"):Y+(" h:i"+(C.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:bo("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:bo("max")});var ie=function(X){return function(ge){e.config[X==="min"?"_minTime":"_maxTime"]=e.parseDate(ge,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:ie("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:ie("max")}),C.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,P,C);for(var Q=0;Q<b.length;Q++)e.config[b[Q]]=e.config[b[Q]]===!0||e.config[b[Q]]==="true";Jn.filter(function(X){return e.config[X]!==void 0}).forEach(function(X){e.config[X]=tr(e.config[X]||[]).map(o)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Q=0;Q<e.config.plugins.length;Q++){var ne=e.config.plugins[Q](e)||{};for(var K in ne)Jn.indexOf(K)>-1?e.config[K]=tr(ne[K]).map(o).concat(e.config[K]):typeof C[K]>"u"&&(e.config[K]=ne[K])}C.altInputClass||(e.config.altInputClass=yo().className+" "+e.config.altInputClass),Me("onParseConfig")}function yo(){return e.config.wrap?i.querySelector("[data-input]"):i}function wo(){typeof e.config.locale!="object"&&typeof Ve.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=qe(qe({},Ve.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?Ve.l10ns[e.config.locale]:void 0),Vt.D="("+e.l10n.weekdays.shorthand.join("|")+")",Vt.l="("+e.l10n.weekdays.longhand.join("|")+")",Vt.M="("+e.l10n.months.shorthand.join("|")+")",Vt.F="("+e.l10n.months.longhand.join("|")+")",Vt.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var b=qe(qe({},t),JSON.parse(JSON.stringify(i.dataset||{})));b.time_24hr===void 0&&Ve.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=is(e),e.parseDate=ir({config:e.config,l10n:e.l10n})}function Mn(b){if(typeof e.config.position=="function")return void e.config.position(e,b);if(e.calendarContainer!==void 0){Me("onPreCalendarPosition");var C=b||e._positionElement,P=Array.prototype.reduce.call(e.calendarContainer.children,function(Oc,Fc){return Oc+Fc.offsetHeight},0),F=e.calendarContainer.offsetWidth,$=e.config.position.split(" "),Y=$[0],ie=$.length>1?$[1]:null,Q=C.getBoundingClientRect(),ne=window.innerHeight-Q.bottom,K=Y==="above"||Y!=="below"&&ne<P&&Q.top>P,X=window.pageYOffset+Q.top+(K?-P-2:C.offsetHeight+2);if(Ye(e.calendarContainer,"arrowTop",!K),Ye(e.calendarContainer,"arrowBottom",K),!e.config.inline){var ge=window.pageXOffset+Q.left,xt=!1,at=!1;ie==="center"?(ge-=(F-Q.width)/2,xt=!0):ie==="right"&&(ge-=F-Q.width,at=!0),Ye(e.calendarContainer,"arrowLeft",!xt&&!at),Ye(e.calendarContainer,"arrowCenter",xt),Ye(e.calendarContainer,"arrowRight",at);var Ki=window.document.body.offsetWidth-(window.pageXOffset+Q.right),vi=ge+F>window.document.body.offsetWidth,Ac=Ki+F>window.document.body.offsetWidth;if(Ye(e.calendarContainer,"rightMost",vi),!e.config.static)if(e.calendarContainer.style.top=X+"px",!vi)e.calendarContainer.style.left=ge+"px",e.calendarContainer.style.right="auto";else if(!Ac)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Ki+"px";else{var Qr=_c();if(Qr===void 0)return;var Dc=window.document.body.offsetWidth,Tc=Math.max(0,Dc/2-F/2),Ic=".flatpickr-calendar.centerMost:before",Pc=".flatpickr-calendar.centerMost:after",Vc=Qr.cssRules.length,Lc="{left:"+Q.left+"px;right:auto;}";Ye(e.calendarContainer,"rightMost",!1),Ye(e.calendarContainer,"centerMost",!0),Qr.insertRule(Ic+","+Pc+Lc,Vc),e.calendarContainer.style.left=Tc+"px",e.calendarContainer.style.right="auto"}}}}function _c(){for(var b=null,C=0;C<document.styleSheets.length;C++){var P=document.styleSheets[C];if(P.cssRules){try{P.cssRules}catch{continue}b=P;break}}return b??xc()}function xc(){var b=document.createElement("style");return document.head.appendChild(b),b.sheet}function Co(){e.config.noCalendar||e.isMobile||(we(),En(),te())}function Ur(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function So(b){b.preventDefault(),b.stopPropagation();var C=function(X){return X.classList&&X.classList.contains("flatpickr-day")&&!X.classList.contains("flatpickr-disabled")&&!X.classList.contains("notAllowed")},P=es(it(b),C);if(P!==void 0){var F=P,$=e.latestSelectedDateObj=new Date(F.dateObj.getTime()),Y=($.getMonth()<e.currentMonth||$.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=F,e.config.mode==="single")e.selectedDates=[$];else if(e.config.mode==="multiple"){var ie=qr($);ie?e.selectedDates.splice(parseInt(ie),1):e.selectedDates.push($)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=$,e.selectedDates.push($),nt($,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(X,ge){return X.getTime()-ge.getTime()}));if(f(),Y){var Q=e.currentYear!==$.getFullYear();e.currentYear=$.getFullYear(),e.currentMonth=$.getMonth(),Q&&(Me("onYearChange"),we()),Me("onMonthChange")}if(En(),te(),It(),!Y&&e.config.mode!=="range"&&e.config.showMonths===1?U(F):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var ne=e.config.mode==="single"&&!e.config.enableTime,K=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(ne||K)&&Ur()}A()}}var kn={locale:[wo,Oe],showMonths:[le,l,Je],minDate:[V],maxDate:[V],positionElement:[Eo],clickOpens:[function(){e.config.clickOpens===!0?(w(e._input,"focus",e.open),w(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function vc(b,C){if(b!==null&&typeof b=="object"){Object.assign(e.config,b);for(var P in b)kn[P]!==void 0&&kn[P].forEach(function(F){return F()})}else e.config[b]=C,kn[b]!==void 0?kn[b].forEach(function(F){return F()}):Jn.indexOf(b)>-1&&(e.config[b]=tr(C));e.redraw(),It(!0)}function Mo(b,C){var P=[];if(b instanceof Array)P=b.map(function(F){return e.parseDate(F,C)});else if(b instanceof Date||typeof b=="number")P=[e.parseDate(b,C)];else if(typeof b=="string")switch(e.config.mode){case"single":case"time":P=[e.parseDate(b,C)];break;case"multiple":P=b.split(e.config.conjunction).map(function(F){return e.parseDate(F,C)});break;case"range":P=b.split(e.l10n.rangeSeparator).map(function(F){return e.parseDate(F,C)});break;default:break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(b)));e.selectedDates=e.config.allowInvalidPreload?P:P.filter(function(F){return F instanceof Date&&ci(F,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(F,$){return F.getTime()-$.getTime()})}function bc(b,C,P){if(C===void 0&&(C=!1),P===void 0&&(P=e.config.dateFormat),b!==0&&!b||b instanceof Array&&b.length===0)return e.clear(C);Mo(b,P),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),V(void 0,C),x(),e.selectedDates.length===0&&e.clear(!1),It(C),C&&Me("onChange")}function ko(b){return b.slice().map(function(C){return typeof C=="string"||typeof C=="number"||C instanceof Date?e.parseDate(C,void 0,!0):C&&typeof C=="object"&&C.from&&C.to?{from:e.parseDate(C.from,void 0),to:e.parseDate(C.to,void 0)}:C}).filter(function(C){return C})}function yc(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var b=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);b&&Mo(b,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function wc(){if(e.input=yo(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=ae(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Eo()}function Eo(){e._positionElement=e.config.positionElement||e._input}function Cc(){var b=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=ae("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=b,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=b==="datetime-local"?"Y-m-d\\TH:i:S":b==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}w(e.mobileInput,"change",function(C){e.setDate(it(C).value,!1,e.mobileFormatStr),Me("onChange"),Me("onClose")})}function Sc(b){if(e.isOpen===!0)return e.close();e.open(b)}function Me(b,C){if(e.config!==void 0){var P=e.config[b];if(P!==void 0&&P.length>0)for(var F=0;P[F]&&F<P.length;F++)P[F](e.selectedDates,e.input.value,e,C);b==="onChange"&&(e.input.dispatchEvent(Yr("change")),e.input.dispatchEvent(Yr("input")))}}function Yr(b){var C=document.createEvent("Event");return C.initEvent(b,!0,!0),C}function qr(b){for(var C=0;C<e.selectedDates.length;C++){var P=e.selectedDates[C];if(P instanceof Date&&nt(P,b)===0)return""+C}return!1}function Mc(b){return e.config.mode!=="range"||e.selectedDates.length<2?!1:nt(b,e.selectedDates[0])>=0&&nt(b,e.selectedDates[1])<=0}function En(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(b,C){var P=new Date(e.currentYear,e.currentMonth,1);P.setMonth(e.currentMonth+C),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[C].textContent=Zi(P.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=P.getMonth().toString(),b.value=P.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Kr(b){var C=b||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(P){return e.formatDate(P,C)}).filter(function(P,F,$){return e.config.mode!=="range"||e.config.enableTime||$.indexOf(P)===F}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function It(b){b===void 0&&(b=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Kr(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Kr(e.config.altFormat)),b!==!1&&Me("onValueUpdate")}function kc(b){var C=it(b),P=e.prevMonthNav.contains(C),F=e.nextMonthNav.contains(C);P||F?zt(P?-1:1):e.yearElements.indexOf(C)>=0?C.select():C.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):C.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Ec(b){b.preventDefault();var C=b.type==="keydown",P=it(b),F=P;e.amPM!==void 0&&P===e.amPM&&(e.amPM.textContent=e.l10n.amPM[tt(e.amPM.textContent===e.l10n.amPM[0])]);var $=parseFloat(F.getAttribute("min")),Y=parseFloat(F.getAttribute("max")),ie=parseFloat(F.getAttribute("step")),Q=parseInt(F.value,10),ne=b.delta||(C?b.which===38?1:-1:0),K=Q+ie*ne;if(typeof F.value<"u"&&F.value.length===2){var X=F===e.hourElement,ge=F===e.minuteElement;K<$?(K=Y+K+tt(!X)+(tt(X)&&tt(!e.amPM)),ge&&j(void 0,-1,e.hourElement)):K>Y&&(K=F===e.hourElement?K-Y-tt(!e.amPM):$,ge&&j(void 0,1,e.hourElement)),e.amPM&&X&&(ie===1?K+Q===23:Math.abs(K-Q)>ie)&&(e.amPM.textContent=e.l10n.amPM[tt(e.amPM.textContent===e.l10n.amPM[0])]),F.value=Ue(K)}}return r(),e}function Ti(i,t){for(var e=Array.prototype.slice.call(i).filter(function(o){return o instanceof HTMLElement}),n=[],r=0;r<e.length;r++){var s=e[r];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=$d(s,t||{}),n.push(s._flatpickr)}catch(o){console.error(o)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(i){return Ti(this,i)},HTMLElement.prototype.flatpickr=function(i){return Ti([this],i)});var Ve=function(i,t){return typeof i=="string"?Ti(window.document.querySelectorAll(i),t):i instanceof Node?Ti([i],t):Ti(i,t)};Ve.defaultConfig={};Ve.l10ns={en:qe({},er),default:qe({},er)};Ve.localize=function(i){Ve.l10ns.default=qe(qe({},Ve.l10ns.default),i)};Ve.setDefaults=function(i){Ve.defaultConfig=qe(qe({},Ve.defaultConfig),i)};Ve.parseDate=ir({});Ve.formatDate=is({});Ve.compareDates=nt;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(i){return Ti(this,i)});Date.prototype.fp_incr=function(i){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof i=="string"?parseInt(i,10):i))};typeof window<"u"&&(window.flatpickr=Ve);var Xt=Ve;var Ud=["fileInput"],Yd=["dateInput"];function qd(i,t){i&1&&(a(0,"div",106)(1,"div",85),M(),a(2,"svg",19),y(3,"path",88),c(),T(),a(4,"div")(5,"p",107),u(6,"Duplicating Asset"),c(),a(7,"p",108),u(8,"Most fields have been pre-filled. Please enter a new serial number and review all information before saving."),c()()()())}function Kd(i,t){if(i&1&&(a(0,"div",109),M(),a(1,"svg",110),y(2,"path",111),c(),u(3),c()),i&2){let e=_();p(3),W(" ",e.nameError," ")}}function Qd(i,t){i&1&&(a(0,"span",84),u(1,"Select parent asset"),c())}function Xd(i,t){if(i&1&&(a(0,"span",112),u(1),c()),i&2){let e=_();p(),De(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function Jd(i,t){if(i&1){let e=H();a(0,"button",116),D("click",function(){let r=k(e).$implicit,s=_(2);return s.parent_id=r.id,E(s.showParentDropdown=!1)}),a(1,"div",28)(2,"div",118),M(),a(3,"svg",119),y(4,"path",54),c()(),T(),a(5,"div")(6,"div",120),u(7),c(),a(8,"div",121),u(9),c()()()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",n.parent_id===e.id),p(7),O(e.name),p(2),O(e.asset_id)}}function Zd(i,t){if(i&1){let e=H();a(0,"div",113)(1,"div",114)(2,"div",115),u(3,"Select parent asset"),c(),a(4,"button",116),D("click",function(){k(e);let r=_();return r.parent_id=null,E(r.showParentDropdown=!1)}),u(5," -- None -- "),c(),I(6,Jd,10,4,"button",117),c()()}if(i&2){let e=_();p(4),z("bg-blue-50",!e.parent_id),p(2),v("ngForOf",e.possibleParents)}}function e0(i,t){i&1&&(a(0,"span",84),u(1,"Select asset type"),c())}function t0(i,t){if(i&1){let e=H();a(0,"img",125),D("error",function(r){k(e);let s=_(2);return E(s.onAssetTypeIconError(r,s.selectedAssetType))}),c()}if(i&2){let e=_(2);v("src",e.selectedAssetType.icon,ke)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function i0(i,t){if(i&1&&(M(),a(0,"svg",126),y(1,"path",127),c()),i&2){let e=_(2);Ce("color",e.selectedAssetType.color)}}function n0(i,t){if(i&1&&(a(0,"div",28)(1,"div",122),I(2,t0,1,2,"img",123)(3,i0,2,2,"svg",124),c(),a(4,"span",112),u(5),c()()),i&2){let e=_();p(),Ce("background-color",e.selectedAssetType.color+"20"),p(),v("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),p(),v("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),p(2),O(e.selectedAssetType.label)}}function r0(i,t){if(i&1){let e=H();a(0,"img",133),D("error",function(r){k(e);let s=_().$implicit,o=_(2);return E(o.onAssetTypeIconError(r,s))}),c()}if(i&2){let e=_().$implicit;v("src",e.icon,ke)("alt",e.name||e.label)}}function s0(i,t){i&1&&(M(),a(0,"svg",19),y(1,"path",127),c())}function o0(i,t){if(i&1){let e=H();a(0,"button",116),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.selectAssetType(r))}),a(1,"div",28)(2,"div",129),I(3,r0,1,2,"img",130)(4,s0,2,0,"svg",131),c(),a(5,"div")(6,"div",120),u(7),c(),a(8,"div",132),u(9),c()()()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",(n.selectedAssetType==null?null:n.selectedAssetType.id)===e.id)("text-blue-700",(n.selectedAssetType==null?null:n.selectedAssetType.id)===e.id),p(3),v("ngIf",e.icon&&!e.iconError),p(),v("ngIf",!e.icon||e.iconError),p(3),O(e.label||e.name),p(2),O(e.description)}}function a0(i,t){if(i&1&&(a(0,"div",113)(1,"div",114)(2,"div",115),u(3,"Select asset type"),c(),I(4,o0,10,8,"button",128),c()()),i&2){let e=_();p(4),v("ngForOf",e.assetTypes)}}function l0(i,t){if(i&1&&(a(0,"div",109),M(),a(1,"svg",110),y(2,"path",111),c(),u(3),c()),i&2){let e=_();p(3),W(" ",e.assetTypeError," ")}}function c0(i,t){i&1&&(a(0,"span",84),u(1,"Select category"),c())}function d0(i,t){if(i&1&&(a(0,"span",112),u(1),c()),i&2){let e=_();p(),O(e.selectedCategory.name)}}function m0(i,t){if(i&1){let e=H();a(0,"img",133),D("error",function(r){k(e);let s=_().$implicit,o=_(2);return E(o.onCategoryIconError(r,s))}),c()}if(i&2){let e=_().$implicit;v("src",e.icon,ke)("alt",e.name)}}function u0(i,t){i&1&&(M(),a(0,"svg",119),y(1,"path",54),c())}function p0(i,t){if(i&1&&(a(0,"div",132),u(1),c()),i&2){let e=_().$implicit;p(),O(e.description)}}function h0(i,t){if(i&1){let e=H();a(0,"button",116),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.selectCategory(r))}),a(1,"div",28)(2,"div",118),I(3,m0,1,2,"img",130)(4,u0,2,0,"svg",134),c(),a(5,"div")(6,"div",120),u(7),c(),I(8,p0,2,1,"div",86),c()()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",(n.selectedCategory==null?null:n.selectedCategory.id)===e.id)("text-blue-700",(n.selectedCategory==null?null:n.selectedCategory.id)===e.id),p(3),v("ngIf",e.icon),p(),v("ngIf",!e.icon||e.iconError),p(3),O(e.name),p(),v("ngIf",e.description)}}function f0(i,t){if(i&1&&(a(0,"div",113)(1,"div",114)(2,"div",115),u(3,"Select category"),c(),I(4,h0,9,8,"button",128),c()()),i&2){let e=_();p(4),v("ngForOf",e.categories)}}function g0(i,t){if(i&1&&(a(0,"div",109),M(),a(1,"svg",110),y(2,"path",111),c(),u(3),c()),i&2){let e=_();p(3),W(" ",e.categoryError," ")}}function _0(i,t){if(i&1&&(a(0,"div",109),M(),a(1,"svg",110),y(2,"path",111),c(),u(3),c()),i&2){let e=_();p(3),W(" ",e.serialNumberError," ")}}function x0(i,t){i&1&&(a(0,"span",84),u(1,"Select location"),c())}function v0(i,t){if(i&1&&(a(0,"div",28)(1,"div",135),M(),a(2,"svg",136),y(3,"path",78)(4,"path",79),c()(),T(),a(5,"span",112),u(6),c()()),i&2){let e=_();p(6),O(e.selectedLocation.name)}}function b0(i,t){if(i&1&&(a(0,"div",132),u(1),c()),i&2){let e=_().$implicit;p(),O(e.type.name)}}function y0(i,t){if(i&1){let e=H();a(0,"button",116),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.selectLocation(r))}),a(1,"div",28)(2,"div",137),M(),a(3,"svg",77),y(4,"path",78)(5,"path",79),c()(),T(),a(6,"div")(7,"div",120),u(8),c(),I(9,b0,2,1,"div",86),c()()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",(n.selectedLocation==null?null:n.selectedLocation.id)===e.id)("text-blue-700",(n.selectedLocation==null?null:n.selectedLocation.id)===e.id),p(8),O(e.name),p(),v("ngIf",e.type)}}function w0(i,t){if(i&1&&(a(0,"div",113)(1,"div",114)(2,"div",115),u(3,"Select location"),c(),I(4,y0,10,6,"button",128),c()()),i&2){let e=_();p(4),v("ngForOf",e.locations)}}function C0(i,t){i&1&&(a(0,"span",84),u(1,"Select department"),c())}function S0(i,t){if(i&1&&(a(0,"div",28)(1,"div",138),M(),a(2,"svg",139),y(3,"path",140),c()(),T(),a(4,"span",112),u(5),c()()),i&2){let e=_();p(5),O(e.selectedDepartment.name)}}function M0(i,t){if(i&1&&(a(0,"div",132),u(1),c()),i&2){let e=_().$implicit;p(),O(e.description)}}function k0(i,t){if(i&1&&(a(0,"div",143),u(1),c()),i&2){let e=_().$implicit;p(),W("Code: ",e.code,"")}}function E0(i,t){if(i&1){let e=H();a(0,"button",116),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.selectDepartment(r))}),a(1,"div",28)(2,"div",141),M(),a(3,"svg",53),y(4,"path",140),c()(),T(),a(5,"div")(6,"div",120),u(7),c(),I(8,M0,2,1,"div",86)(9,k0,2,1,"div",142),c()()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",(n.selectedDepartment==null?null:n.selectedDepartment.id)===e.id)("text-blue-700",(n.selectedDepartment==null?null:n.selectedDepartment.id)===e.id),p(7),O(e.name),p(),v("ngIf",e.description),p(),v("ngIf",e.code)}}function A0(i,t){if(i&1&&(a(0,"div",113)(1,"div",114)(2,"div",115),u(3,"Select department"),c(),I(4,E0,10,7,"button",128),c()()),i&2){let e=_();p(4),v("ngForOf",e.departments)}}function D0(i,t){if(i&1&&(a(0,"div",28),y(1,"div",144),a(2,"span",112),u(3),c()()),i&2){let e=_();p(),Ce("background-color",e.selectedStatus.hexColor||"#6B7280"),p(2),O(e.selectedStatus.label)}}function T0(i,t){if(i&1){let e=H();a(0,"button",116),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.selectStatus(r))}),a(1,"div",28)(2,"div"),y(3,"div",144),c(),a(4,"div")(5,"div",120),u(6),c(),a(7,"div",132),u(8),c()()()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value)("text-blue-700",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value),p(2),Te("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),p(),Ce("background-color",e.hexColor||"#6B7280"),p(3),O(e.label),p(2),O(e.description)}}function I0(i,t){if(i&1&&(a(0,"div",145)(1,"div",114)(2,"div",115),u(3,"Select status"),c(),I(4,T0,9,10,"button",128),c()()),i&2){let e=_();p(4),v("ngForOf",e.statusOptions)}}function P0(i,t){if(i&1){let e=H();a(0,"span"),u(1),a(2,"button",149),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.removeTag(r))}),M(),a(3,"svg",150),y(4,"path",151),c()()()}if(i&2){let e=t.$implicit;Te("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),p(),W(" ",e.name," ")}}function V0(i,t){if(i&1&&(a(0,"div",146)(1,"div",147),I(2,P0,5,3,"span",148),c()()),i&2){let e=_();p(2),v("ngForOf",e.selectedTags)}}function L0(i,t){if(i&1&&(a(0,"span",132),u(1),c()),i&2){let e=_();p(),W(" ",e.selectedTags.length," selected ")}}function O0(i,t){i&1&&(a(0,"div",156),M(),a(1,"svg",126),y(2,"path",157),c()())}function F0(i,t){if(i&1){let e=H();a(0,"button",116),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.toggleTag(r))}),a(1,"div",34)(2,"div",28)(3,"div"),y(4,"div"),c(),a(5,"span",120),u(6),c()(),I(7,O0,3,0,"div",155),c()()}if(i&2){let e=t.$implicit,n=_(2);z("bg-blue-50",n.isTagSelected(e)),p(3),Te("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),p(),Te("w-3 h-3 rounded-full bg-"+e.color+"-500"),p(2),O(e.name),p(),v("ngIf",n.isTagSelected(e))}}function R0(i,t){if(i&1){let e=H();a(0,"div",113)(1,"div",114)(2,"div",152)(3,"div",67)(4,"input",153),ue("ngModelChange",function(r){k(e);let s=_();return me(s.newTagInput,r)||(s.newTagInput=r),E(r)}),D("keydown",function(r){k(e);let s=_();return E(s.onTagInputKeydown(r))})("click",function(r){return k(e),E(r.stopPropagation())}),c(),a(5,"div",154),u(6," Press Enter "),c()()(),a(7,"div",115),u(8,"Select tags"),c(),I(9,F0,8,8,"button",117),c()()}if(i&2){let e=_();p(4),de("ngModel",e.newTagInput),p(5),v("ngForOf",e.availableTags)}}function H0(i,t){if(i&1){let e=H();a(0,"button",177),D("click",function(){k(e);let r=_().index,s=_(2);return E(s.moveImageUp(r))}),M(),a(1,"svg",126),y(2,"path",178),c()()}}function N0(i,t){if(i&1){let e=H();a(0,"button",177),D("click",function(){k(e);let r=_().index,s=_(2);return E(s.moveImageDown(r))}),M(),a(1,"svg",126),y(2,"path",38),c()()}}function B0(i,t){if(i&1){let e=H();a(0,"div",167)(1,"div",168)(2,"img",169),D("error",function(r){let s=k(e).index,o=_(2);return E(o.onImageError(r,s))})("load",function(r){let s=k(e).index,o=_(2);return E(o.onImageLoad(r,s))}),c(),a(3,"div",170)(4,"div",171),I(5,H0,3,0,"button",172)(6,N0,3,0,"button",172),c()(),a(7,"button",173),D("click",function(){let r=k(e).index,s=_(2);return E(s.removeImage(r))}),M(),a(8,"svg",126),y(9,"path",151),c()(),T(),a(10,"div",174),u(11),c()(),a(12,"div",175)(13,"p",176),u(14),c(),a(15,"p",121),u(16),c()()()}if(i&2){let e,n=t.$implicit,r=t.index,s=_(2);p(2),v("src",n,ke)("alt","Asset Image "+(r+1)),p(3),v("ngIf",r>0),p(),v("ngIf",r<s.imagePreviewUrls.length-1),p(5),W(" ",r+1," "),p(3),O(s.images[r].name),p(2),W("",(((e=s.images[r].size)!==null&&e!==void 0?e:0)/1024/1024).toFixed(1)," MB")}}function j0(i,t){if(i&1){let e=H();a(0,"div",158)(1,"div",159)(2,"h4",160),u(3),c(),a(4,"button",161),D("click",function(){k(e);let r=_();return E(r.removeAllImages())}),u(5," Remove All "),c()(),a(6,"div",162),I(7,B0,17,7,"div",163),c(),a(8,"div",164)(9,"div",85),M(),a(10,"svg",165),y(11,"path",88),c(),T(),a(12,"p",166)(13,"strong"),u(14,"Gallery Tips:"),c(),u(15," Hover over images to reorder them. The first image will be the primary asset image. "),c()()()()}if(i&2){let e=_();p(3),W("Selected Images (",e.imagePreviewUrls.length,")"),p(4),v("ngForOf",e.imagePreviewUrls)}}function z0(i,t){if(i&1&&(a(0,"div",179)(1,"div",85),M(),a(2,"svg",180),y(3,"path",111),c(),T(),a(4,"p",181),u(5),c()()()),i&2){let e=_();p(5),O(e.submitError)}}function W0(i,t){if(i&1&&(a(0,"div",182)(1,"div",85),M(),a(2,"svg",58),y(3,"path",157),c(),T(),a(4,"p",183),u(5),c()()()),i&2){let e=_();p(5),O(e.submitSuccess)}}function G0(i,t){i&1&&(a(0,"span",85),M(),a(1,"svg",184),y(2,"path",96),c(),T(),a(3,"span"),u(4,"Create Asset"),c()())}function $0(i,t){i&1&&(a(0,"span",85),M(),a(1,"svg",185),y(2,"circle",186)(3,"path",187),c(),T(),a(4,"span"),u(5,"Creating Asset..."),c()())}var sr=class i{constructor(t,e,n,r){this.assetService=t;this.router=e;this.route=n;this.http=r}dateInputs;fileInput;flatpickrInstances=[];name="";description="";serial_number="";model="";manufacturer="";purchase_date="";purchase_price=null;depreciation=null;depreciation_life=null;location_id=null;department_id=null;warranty="";insurance="";health_score=85;status=null;tags=[];images=[];imagePreviewUrls=[];meta={};isSubmitting=!1;isDragOver=!1;submitError="";submitSuccess="";submitFieldErrors={};locations=[];availableTags=[];departments=[];possibleParents=[];parent_id=null;showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";nameError="";assetTypeError="";categoryError="";serialNumberError="";address="";onFileChange(t){if(t.target.files&&t.target.files.length){let e=Array.from(t.target.files);this.processFiles(e),t.target.value=""}}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1;let e=t.dataTransfer?.files;if(e&&e.length>0){let n=Array.from(e).filter(r=>r.type.startsWith("image/"));n.length>0&&this.processFiles(n)}}processFiles(t){let n=["image/jpeg","image/png","image/gif","image/webp"],r=[],s=[];for(let o of t){if(!n.includes(o.type)){console.warn("Invalid file type:",o.name);continue}if(o.size>10*1024*1024){console.warn("File too large:",o.name);continue}if(this.images.some(m=>m.name===o.name&&m.size===o.size)){console.warn("Duplicate file skipped:",o.name);continue}if(this.images.length+r.length>=10){console.warn("Max image count exceeded:",o.name);break}r.push(o);let d=new FileReader;d.onload=m=>{m.target?.result&&this.imagePreviewUrls.push(m.target.result)},d.onerror=m=>{console.error("Preview failed for:",o.name,m)},d.readAsDataURL(o)}this.images=[...this.images,...r]}onSubmit(){this.clearErrors(),this.validateForm()&&(this.isSubmitting=!0,this.submitError="",this.submitSuccess="",this.submitFieldErrors={},this.convertImagesToBase64().then(t=>{let e={name:this.name,description:this.description,category_id:this.category_id,type:this.assetType,serial_number:this.serial_number,model:this.model,manufacturer:this.manufacturer,purchase_date:this.purchase_date?this.convertDateToBackendFormat(this.purchase_date):null,purchase_price:this.purchase_price,depreciation:this.depreciation,depreciation_life:this.depreciation_life,location_id:this.location_id,department_id:this.department_id,parent_id:this.parent_id,warranty:this.warranty,insurance:this.insurance,health_score:this.health_score,status:this.status,tags:this.selectedTags.map(n=>n.name),meta:this.meta,images:t};this.assetService.createAsset(e).subscribe({next:n=>{this.isSubmitting=!1,n.success?(this.submitSuccess="Asset created successfully!",setTimeout(()=>{this.router.navigate(["/assets/list"])},2e3)):(this.submitError=n.message||"Failed to create asset.",this.handleFieldErrors(n.errors||{}))},error:n=>{this.isSubmitting=!1,this.submitError=n.error?.message||"Failed to create asset.",this.handleFieldErrors(n.error?.errors||n.errors||{})}})}).catch(t=>{this.isSubmitting=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",t)}))}healthScore=85;categories=[];category_id=null;assetTypes=[];assetType=null;assetTypesFromAPI=[];statusOptionsFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];ngOnInit(){this.route.queryParams.subscribe(t=>{t.duplicate&&t.sourceId&&this.loadAssetForDuplication(t.sourceId)}),this.assetService.getAssetCategories().subscribe(t=>{t.success&&t.data?.categories&&(this.categories=t.data.categories)}),this.assetService.getAssetTypes().subscribe(t=>{t.success&&t.data&&(this.assetTypesFromAPI=t.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})))}),this.assetService.getAssetStatuses().subscribe(t=>{t.success&&t.data&&(this.statusOptionsFromAPI=t.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,n)=>e.sort_order-n.sort_order),this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value))}),this.assetService.getLocations().subscribe(t=>{t.success&&t.data&&(this.locations=t.data.locations||t.data)}),this.assetService.getDepartments().subscribe(t=>{t.success&&t.data&&(this.departments=t.data)}),this.assetService.getAssets({per_page:1e3}).subscribe(t=>{t.success&&t.data?.assets&&(this.possibleParents=t.data.assets)}),this.loadAvailableTags()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}ngOnDestroy(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs?(console.log("Found date inputs:",this.dateInputs.length),this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let n=t.nativeElement,r=n.getAttribute("name");if(console.log("Processing date input:",r),r==="purchase_date"){console.log("Initializing Flatpickr for purchase_date");let o=Xt(n,{dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,maxDate:"today",onChange:(l,d)=>{console.log("Date selected:",d),this.purchase_date=d}});this.flatpickrInstances.push(o),console.log("Flatpickr initialized successfully for purchase_date")}}})):console.warn("No date inputs found")},50)}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetForDuplication(t){this.assetService.getAsset(t).subscribe({next:e=>{if(e.success){let n=e.data.asset||e.data;this.populateFormFromSource(n)}},error:e=>{console.error("Error loading source asset for duplication:",e)}})}populateFormFromSource(t){this.name=t.name?`${t.name} (Copy)`:"",this.description=t.description||"",this.model=t.model||"",this.manufacturer=t.manufacturer||"",this.purchase_date=t.purchase_date?this.convertBackendDateToDisplay(t.purchase_date):"",this.purchase_price=t.purchase_price||null,this.depreciation=t.depreciation||null,this.depreciation_life=t.depreciation_life||null,this.location_id=t.location_id||null,this.department_id=t.department_id||null,this.warranty=t.warranty?this.convertBackendDateToDisplay(t.warranty):"",this.insurance=t.insurance||"",this.health_score=t.health_score||85,this.status=t.status||"Active",setTimeout(()=>{t.type&&(this.selectedAssetType=this.assetTypes.find(e=>e.id==t.type||e.id===parseInt(t.type))||null,this.selectedAssetType&&(this.assetType=this.selectedAssetType.id)),t.category_id&&(this.selectedCategory=this.categories.find(e=>e.id===t.category_id)||null,this.category_id=t.category_id),t.location_id&&(this.selectedLocation=this.locations.find(e=>e.id===t.location_id)||null),t.department_id&&(this.selectedDepartment=this.departments.find(e=>e.id===t.department_id)||null),t.status&&(this.selectedStatus=this.statusOptions.find(e=>e.value===t.status||e.label===t.status||e.id===t.status)||null,this.selectedStatus&&(this.status=this.selectedStatus.value)),!this.selectedStatus&&this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value),t.tags&&Array.isArray(t.tags)&&(this.selectedTags=t.tags.map(e=>this.availableTags.find(n=>n.id===e.id)||e)),this.clearErrors()},500),this.serial_number="",t.images&&Array.isArray(t.images)&&t.images.length>0&&this.duplicateImages(t.images)}goBack(){this.router.navigate(["/assets/list"])}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.assetType=t.id,this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(t){this.selectedCategory=t,this.category_id=t.id,this.showCategoryDropdown=!1,this.clearErrors()}selectLocation(t){this.selectedLocation=t,this.location_id=t.id,this.showLocationDropdown=!1}selectStatus(t){this.selectedStatus=t,this.status=t.value,this.showStatusDropdown=!1}selectDepartment(t){this.selectedDepartment=t,this.department_id=t.id,this.showDepartmentDropdown=!1}toggleTag(t){let e=this.selectedTags.findIndex(n=>n.id===t.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.some(e=>e.id===t.id)}onTagInputKeydown(t){t.key==="Enter"&&(t.preventDefault(),this.createNewTag())}createNewTag(){let t=this.newTagInput.trim();if(t&&!this.selectedTags.some(e=>e.name.toLowerCase()===t.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],n=e[Math.floor(Math.random()*e.length)],r={id:Date.now(),name:t,color:n,isNew:!0};this.selectedTags.push(r),this.newTagInput=""}}removeTag(t){let e=this.selectedTags.findIndex(n=>n.id===t.id);e>-1&&this.selectedTags.splice(e,1)}onDocumentClick(t){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}validateForm(){let t=!0;if(!this.name||this.name.trim().length===0?(this.nameError="Asset name is required",t=!1):this.name.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",t=!1),this.description&&this.description.length>1e3&&(this.submitError="Description cannot exceed 1000 characters",t=!1),!this.serial_number||this.serial_number.trim().length===0?(this.serialNumberError="Serial number is required",t=!1):this.serial_number.length>100&&(this.serialNumberError="Serial number cannot exceed 100 characters",t=!1),this.model&&this.model.length>100&&(this.submitError="Model cannot exceed 100 characters",t=!1),this.manufacturer&&this.manufacturer.length>100&&(this.submitError="Manufacturer cannot exceed 100 characters",t=!1),this.warranty&&this.warranty.length>255&&(this.submitError="Warranty cannot exceed 255 characters",t=!1),this.insurance&&this.insurance.length>255&&(this.submitError="Insurance cannot exceed 255 characters",t=!1),this.purchase_price!==null&&this.purchase_price<0&&(this.submitError="Purchase price cannot be negative",t=!1),this.depreciation!==null&&(this.depreciation<0||this.depreciation>100)&&(this.submitError="Depreciation must be between 0 and 100",t=!1),this.depreciation_life!==null&&(this.depreciation_life<1||this.depreciation_life>100)&&(this.submitError="Depreciation life must be between 1 and 100 years",t=!1),this.purchase_date){let e=new Date;new Date(this.purchase_date)>e&&(this.submitError="Purchase date cannot be in the future",t=!1)}return(this.health_score<0||this.health_score>100)&&(this.submitError="Health score must be between 0 and 100",t=!1),this.category_id||(this.categoryError="Category is required",t=!1),this.assetType||(this.assetTypeError="Asset type is required",t=!1),t}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}handleFieldErrors(t){t.name&&(this.nameError=t.name[0]),t.type&&(this.assetTypeError=t.type[0]),t.category_id&&(this.categoryError=t.category_id[0]),t.serial_number&&(this.serialNumberError=t.serial_number[0])}isFormValid(){return!!(this.name&&this.name.trim().length>0&&this.name.trim().length<=100)}removeImage(t){this.images.splice(t,1),this.imagePreviewUrls.splice(t,1)}removeAllImages(){this.images=[],this.imagePreviewUrls=[]}moveImage(t,e){if(e>=0&&e<this.images.length){let n=this.images.splice(t,1)[0];this.images.splice(e,0,n);let r=this.imagePreviewUrls.splice(t,1)[0];this.imagePreviewUrls.splice(e,0,r)}}moveImageUp(t){t>0&&this.moveImage(t,t-1)}moveImageDown(t){t<this.images.length-1&&this.moveImage(t,t+1)}getTodayDate(){return new Date().toISOString().split("T")[0]}convertDateToBackendFormat(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`}catch(e){return console.error("Date conversion error:",e),t}}convertBackendDateToDisplay(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let n={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",n).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),t}}getIconFromPath(t){return t&&(t.split("/").pop()||"").replace(".svg","")||"cube"}getColorForType(t){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[t]||"#6b7280"}hexToTailwindColor(t){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[t.toUpperCase()]||"gray"}onImageError(t,e){console.error("Image failed to load at index:",e),console.error("Image src:",t.target.src),console.error("Image file:",this.images[e]),t.target.style.display="none"}onImageLoad(t,e){console.log("Image loaded successfully at index:",e),console.log("Image dimensions:",t.target.naturalWidth,"x",t.target.naturalHeight)}convertImagesToBase64(){return Promise.all(this.images.map(t=>new Promise((e,n)=>{let r=new FileReader;r.onload=()=>{r.result?e(r.result):n(new Error("Failed to read file"))},r.onerror=()=>n(r.error),r.readAsDataURL(t)})))}onCategoryIconError(t,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}onAssetTypeIconError(t,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}triggerFileInput(){this.fileInput.nativeElement.click()}duplicateImages(t){t.forEach((e,n)=>{if(e.image_url){this.imagePreviewUrls.push(e.image_url);let r=`existing-image-${n+1}.jpg`,s=new File([""],r,{type:"image/jpeg"});this.images.push(s)}})}getSelectedParent(){return this.possibleParents.find(t=>t.id===this.parent_id)}static \u0275fac=function(e){return new(e||i)(he(dt),he(wt),he(Mi),he(Ro))};static \u0275cmp=Re({type:i,selectors:[["app-asset-create"]],viewQuery:function(e,n){if(e&1&&(vt(Ud,5),vt(Yd,5)),e&2){let r;bt(r=yt())&&(n.fileInput=r.first),bt(r=yt())&&(n.dateInputs=r)}},hostBindings:function(e,n){e&1&&D("click",function(s){return n.onDocumentClick(s)},!1,Ci)},decls:300,vars:118,consts:[["assetForm","ngForm"],["nameInput","ngModel"],["dateInput",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-create-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",4,"ngIf"],[3,"ngSubmit"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","name","name","required","",1,"input",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","space-x-3"],["type","text","value","AST-012","readonly","",1,"input","flex-1"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","name","description","maxlength","500",1,"input","resize-none",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","name","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input",3,"ngModelChange","ngModel"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","placeholder","e.g., Dell, HP, Toyota","name","manufacturer","maxlength","100",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., PowerEdge R730","name","model","maxlength","100",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., SN123456789","name","serial_number","required","","maxlength","100",1,"input",3,"ngModelChange","ngModel"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","name","purchase_price","step","0.01","min","0",1,"input",2,"padding-left","24px",3,"ngModelChange","ngModel"],["type","text","name","purchase_date","placeholder","Select purchase date","readonly","",1,"input",3,"ngModelChange","ngModel"],["type","number","name","depreciation","placeholder","e.g., 20","min","0","max","100","step","0.01",1,"input",3,"ngModelChange","ngModel"],["type","number","name","depreciation_life","placeholder","e.g., 5","min","1","max","100",1,"input",3,"ngModelChange","ngModel"],["type","text","name","warranty","placeholder","e.g., 2 years manufacturer warranty","maxlength","255",1,"input",3,"ngModelChange","ngModel"],["type","text","name","insurance","placeholder","e.g., Policy #12345, expires 2025-12-31","maxlength","255",1,"input",3,"ngModelChange","ngModel"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"col-span-1","md:col-span-2"],["type","text","placeholder","Enter asset address","name","address","autocomplete","off",1,"input","w-full",3,"ngModelChange","ngModel"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-blue-800","font-medium"],[1,"text-blue-700","text-sm"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-sm","text-gray-500"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","name","newTagInput","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mt-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","w-6","h-6","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){if(e&1){let r=H();a(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"button",8),D("click",function(){return k(r),E(n.goBack())}),M(),a(5,"svg",9),y(6,"path",10),c(),T(),a(7,"span",11),u(8,"Back to Assets"),c()()(),a(9,"h1",12),u(10),c(),a(11,"p",13),u(12),c(),I(13,qd,9,0,"div",14),c(),a(14,"form",15,0),D("ngSubmit",function(){return k(r),E(n.onSubmit())}),a(16,"div",16)(17,"div",17)(18,"div",18),M(),a(19,"svg",19),y(20,"path",20),c()(),T(),a(21,"h2",21),u(22,"Basic Information"),c()(),a(23,"div",22)(24,"div")(25,"label",23),u(26," Asset Name "),a(27,"span",24),u(28,"*"),c()(),a(29,"input",25,1),ue("ngModelChange",function(o){return k(r),me(n.name,o)||(n.name=o),E(o)}),c(),I(31,Kd,4,1,"div",26),a(32,"div",27),u(33,"Maximum 100 characters"),c()(),a(34,"div")(35,"label",23),u(36,"Asset ID"),c(),a(37,"div",28),y(38,"input",29),a(39,"span",30),u(40," auto-generated "),c()(),a(41,"p",27),u(42,"Unique identifier automatically assigned"),c()()(),a(43,"div",31)(44,"label",23),u(45,"Parent Asset"),c(),a(46,"div",32),D("click",function(o){return k(r),E(o.stopPropagation())}),a(47,"button",33),D("click",function(){return k(r),E(n.showParentDropdown=!n.showParentDropdown)}),a(48,"div",34),I(49,Qd,2,0,"span",35)(50,Xd,2,2,"span",36),M(),a(51,"svg",37),y(52,"path",38),c()()(),I(53,Zd,7,3,"div",39),c(),T(),a(54,"div",27),u(55,"Optional: Select a parent asset if this asset is a child of another."),c()(),a(56,"div",31)(57,"label",23),u(58,"Description"),c(),a(59,"textarea",40),ue("ngModelChange",function(o){return k(r),me(n.description,o)||(n.description=o),E(o)}),c(),a(60,"div",27),u(61,"Maximum 500 characters"),c()(),a(62,"div")(63,"label",41),u(64,"Health Score"),c(),a(65,"div",42)(66,"div",43)(67,"span",44),u(68,"Current Score"),c(),a(69,"span",45),u(70),c()(),a(71,"div",46),y(72,"div",47)(73,"div",48),a(74,"input",49),ue("ngModelChange",function(o){return k(r),me(n.healthScore,o)||(n.healthScore=o),E(o)}),c(),y(75,"div",50),c(),a(76,"div",51)(77,"span"),u(78,"Poor (0%)"),c(),a(79,"span"),u(80,"Fair (25%)"),c(),a(81,"span"),u(82,"Good (50%)"),c(),a(83,"span"),u(84,"Very Good (75%)"),c(),a(85,"span"),u(86,"Excellent (100%)"),c()()()()(),a(87,"div",16)(88,"div",17)(89,"div",52),M(),a(90,"svg",53),y(91,"path",54),c()(),T(),a(92,"h2",21),u(93,"Asset Classification"),c()(),a(94,"div",55)(95,"div")(96,"label",23),u(97," Asset Type "),a(98,"span",24),u(99,"*"),c()(),a(100,"div",32),D("click",function(o){return k(r),E(o.stopPropagation())}),a(101,"button",33),D("click",function(){return k(r),E(n.toggleAssetTypeDropdown())}),a(102,"div",34),I(103,e0,2,0,"span",35)(104,n0,6,5,"div",56),M(),a(105,"svg",37),y(106,"path",38),c()()(),I(107,a0,5,1,"div",39),c(),I(108,l0,4,1,"div",26),c(),T(),a(109,"div")(110,"label",23),u(111," Category "),a(112,"span",24),u(113,"*"),c()(),a(114,"div",32),D("click",function(o){return k(r),E(o.stopPropagation())}),a(115,"button",33),D("click",function(){return k(r),E(n.toggleCategoryDropdown())}),a(116,"div",34),I(117,c0,2,0,"span",35)(118,d0,2,1,"span",36),M(),a(119,"svg",37),y(120,"path",38),c()()(),I(121,f0,5,1,"div",39),c(),I(122,g0,4,1,"div",26),c()()(),T(),a(123,"div",16)(124,"div",17)(125,"div",57),M(),a(126,"svg",58),y(127,"path",59),c()(),T(),a(128,"h2",21),u(129,"Technical Details"),c()(),a(130,"div",60)(131,"div")(132,"label",23),u(133,"Manufacturer"),c(),a(134,"input",61),ue("ngModelChange",function(o){return k(r),me(n.manufacturer,o)||(n.manufacturer=o),E(o)}),c(),a(135,"div",27),u(136,"Maximum 100 characters"),c()(),a(137,"div")(138,"label",23),u(139,"Model"),c(),a(140,"input",62),ue("ngModelChange",function(o){return k(r),me(n.model,o)||(n.model=o),E(o)}),c(),a(141,"div",27),u(142,"Maximum 100 characters"),c()(),a(143,"div")(144,"label",23),u(145," Serial Number "),a(146,"span",24),u(147,"*"),c()(),a(148,"input",63),ue("ngModelChange",function(o){return k(r),me(n.serial_number,o)||(n.serial_number=o),E(o)}),c(),I(149,_0,4,1,"div",26),a(150,"div",27),u(151,"Required, max 100 chars, must be unique within your company"),c()()()(),a(152,"div",16)(153,"div",17)(154,"div",64),M(),a(155,"svg",65),y(156,"path",66),c()(),T(),a(157,"h2",21),u(158,"Financial Information"),c()(),a(159,"div",22)(160,"div")(161,"label",23),u(162,"Purchase Value (USD)"),c(),a(163,"div",67)(164,"div",68)(165,"span",69),u(166,"$ "),c()(),a(167,"input",70),ue("ngModelChange",function(o){return k(r),me(n.purchase_price,o)||(n.purchase_price=o),E(o)}),c()(),a(168,"div",27),u(169,"Must be a non-negative number"),c()(),a(170,"div")(171,"label",23),u(172,"Purchase Date"),c(),a(173,"input",71,2),ue("ngModelChange",function(o){return k(r),me(n.purchase_date,o)||(n.purchase_date=o),E(o)}),c(),a(175,"div",27),u(176,"Cannot be in the future"),c()()(),a(177,"div",22)(178,"div")(179,"label",23),u(180,"Depreciation Rate (%)"),c(),a(181,"input",72),ue("ngModelChange",function(o){return k(r),me(n.depreciation,o)||(n.depreciation=o),E(o)}),c(),a(182,"div",27),u(183,"Annual depreciation rate (0-100%)"),c()(),a(184,"div")(185,"label",23),u(186,"Depreciation Life (Years)"),c(),a(187,"input",73),ue("ngModelChange",function(o){return k(r),me(n.depreciation_life,o)||(n.depreciation_life=o),E(o)}),c(),a(188,"div",27),u(189,"Useful life for depreciation calculation (1-100 years)"),c()()(),a(190,"div",22)(191,"div")(192,"label",23),u(193,"Warranty Information"),c(),a(194,"input",74),ue("ngModelChange",function(o){return k(r),me(n.warranty,o)||(n.warranty=o),E(o)}),c(),a(195,"div",27),u(196,"Warranty details (max 255 characters)"),c()(),a(197,"div")(198,"label",23),u(199,"Insurance Information"),c(),a(200,"input",75),ue("ngModelChange",function(o){return k(r),me(n.insurance,o)||(n.insurance=o),E(o)}),c(),a(201,"div",27),u(202,"Insurance details (max 255 characters)"),c()()()(),a(203,"div",16)(204,"div",17)(205,"div",76),M(),a(206,"svg",77),y(207,"path",78)(208,"path",79),c()(),T(),a(209,"h2",21),u(210,"Location & Assignment"),c()(),a(211,"div",55)(212,"div")(213,"label",23),u(214,"Location"),c(),a(215,"div",32),D("click",function(o){return k(r),E(o.stopPropagation())}),a(216,"button",33),D("click",function(){return k(r),E(n.toggleLocationDropdown())}),a(217,"div",34),I(218,x0,2,0,"span",35)(219,v0,7,1,"div",56),M(),a(220,"svg",37),y(221,"path",38),c()()(),I(222,w0,5,1,"div",39),c()(),T(),a(223,"div",80)(224,"label",23),u(225,"Address"),c(),a(226,"input",81),ue("ngModelChange",function(o){return k(r),me(n.address,o)||(n.address=o),E(o)}),c(),a(227,"div",27),u(228,"Enter the physical address of the asset"),c()(),a(229,"div")(230,"label",23),u(231,"Department ID"),c(),a(232,"div",32),D("click",function(o){return k(r),E(o.stopPropagation())}),a(233,"button",33),D("click",function(){return k(r),E(n.toggleDepartmentDropdown())}),a(234,"div",34),I(235,C0,2,0,"span",35)(236,S0,6,1,"div",56),M(),a(237,"svg",37),y(238,"path",38),c()()(),I(239,A0,5,1,"div",39),c(),T(),a(240,"div",27),u(241,"Optional department assignment"),c()(),a(242,"div")(243,"label",23),u(244,"Status"),c(),a(245,"div",32),D("click",function(o){return k(r),E(o.stopPropagation())}),a(246,"button",33),D("click",function(){return k(r),E(n.toggleStatusDropdown())}),a(247,"div",34),I(248,D0,4,3,"div",56),M(),a(249,"svg",37),y(250,"path",38),c()()(),I(251,I0,5,1,"div",82),c(),T(),a(252,"div",27),u(253,"Current operational status of the asset"),c()(),a(254,"div")(255,"label",23),u(256,"Tags"),c(),I(257,V0,3,1,"div",83),a(258,"div",32),D("click",function(o){return k(r),E(o.stopPropagation())}),a(259,"button",33),D("click",function(){return k(r),E(n.toggleTagsDropdown())}),a(260,"div",34)(261,"span",84),u(262),c(),a(263,"div",85),I(264,L0,2,1,"span",86),M(),a(265,"svg",37),y(266,"path",38),c()()()(),I(267,R0,10,2,"div",39),c(),T(),a(268,"div",27),M(),a(269,"svg",87),y(270,"path",88),c(),u(271," Select existing tags or type to create new ones. Press Enter to add custom tags. "),c()()()(),T(),a(272,"div",16)(273,"div",17)(274,"div",89),M(),a(275,"svg",90),y(276,"path",91),c()(),T(),a(277,"h2",21),u(278,"Asset Image"),c()(),a(279,"div")(280,"label",23),u(281,"Upload Image"),c(),a(282,"div",92),D("click",function(){return k(r),E(n.triggerFileInput())})("dragover",function(o){return k(r),E(n.onDragOver(o))})("dragleave",function(o){return k(r),E(n.onDragLeave(o))})("drop",function(o){return k(r),E(n.onDrop(o))}),a(283,"div",93)(284,"div",94),M(),a(285,"svg",95),y(286,"path",96),c()(),T(),a(287,"p",97),u(288),c(),a(289,"input",98,3),D("change",function(o){return k(r),E(n.onFileChange(o))}),c()()(),I(291,j0,16,2,"div",99),c()(),I(292,z0,6,1,"div",100)(293,W0,6,1,"div",101),a(294,"div",102)(295,"button",103),D("click",function(){return k(r),E(n.goBack())}),u(296," Cancel "),c(),a(297,"button",104),I(298,G0,5,0,"span",105)(299,$0,6,0,"span",105),c()()()()()}e&2&&(p(10),W(" ",n.route.snapshot.queryParams.duplicate?"Duplicate Asset":"Create New Asset"," "),p(2),W(" ",n.route.snapshot.queryParams.duplicate?"Creating a copy of an existing asset. Please review and update the information below.":"Add a new asset to your inventory with detailed information and specifications"," "),p(),v("ngIf",n.route.snapshot.queryParams.duplicate),p(16),z("border-red-300",n.nameError),de("ngModel",n.name),p(2),v("ngIf",n.nameError),p(16),z("border-blue-500",n.showParentDropdown),p(2),v("ngIf",!n.parent_id),p(),v("ngIf",n.parent_id&&n.getSelectedParent()),p(),z("rotate-180",n.showParentDropdown),p(2),v("ngIf",n.showParentDropdown),p(6),de("ngModel",n.description),p(10),z("text-red-600",n.healthScore<50)("text-green-600",n.healthScore>=50),p(),W("",n.healthScore,"%"),p(3),Ce("width",n.healthScore,"%"),z("bg-red-500",n.healthScore<50)("bg-green-500",n.healthScore>=50),p(),de("ngModel",n.healthScore),p(),Ce("left",n.healthScore,"%"),z("bg-red-500",n.healthScore<50)("bg-green-500",n.healthScore>=50),p(26),z("border-red-300",n.assetTypeError)("border-blue-500",n.showAssetTypeDropdown),p(2),v("ngIf",!n.selectedAssetType),p(),v("ngIf",n.selectedAssetType),p(),z("rotate-180",n.showAssetTypeDropdown),p(2),v("ngIf",n.showAssetTypeDropdown),p(),v("ngIf",n.assetTypeError),p(7),z("border-red-300",n.categoryError)("border-blue-500",n.showCategoryDropdown),p(2),v("ngIf",!n.selectedCategory),p(),v("ngIf",n.selectedCategory),p(),z("rotate-180",n.showCategoryDropdown),p(2),v("ngIf",n.showCategoryDropdown),p(),v("ngIf",n.categoryError),p(12),de("ngModel",n.manufacturer),p(6),de("ngModel",n.model),p(8),z("border-red-300",n.serialNumberError),de("ngModel",n.serial_number),p(),v("ngIf",n.serialNumberError),p(18),de("ngModel",n.purchase_price),p(6),de("ngModel",n.purchase_date),p(8),de("ngModel",n.depreciation),p(6),de("ngModel",n.depreciation_life),p(7),de("ngModel",n.warranty),p(6),de("ngModel",n.insurance),p(16),z("border-blue-500",n.showLocationDropdown),p(2),v("ngIf",!n.selectedLocation),p(),v("ngIf",n.selectedLocation),p(),z("rotate-180",n.showLocationDropdown),p(2),v("ngIf",n.showLocationDropdown),p(4),de("ngModel",n.address),p(7),z("border-blue-500",n.showDepartmentDropdown),p(2),v("ngIf",!n.selectedDepartment),p(),v("ngIf",n.selectedDepartment),p(),z("rotate-180",n.showDepartmentDropdown),p(2),v("ngIf",n.showDepartmentDropdown),p(7),z("border-blue-500",n.showStatusDropdown),p(2),v("ngIf",n.selectedStatus),p(),z("rotate-180",n.showStatusDropdown),p(2),v("ngIf",n.showStatusDropdown),p(6),v("ngIf",n.selectedTags.length>0),p(2),z("border-blue-500",n.showTagsDropdown),p(3),W(" ",n.selectedTags.length===0?"Select tags":"Add more tags"," "),p(2),v("ngIf",n.selectedTags.length>0),p(),z("rotate-180",n.showTagsDropdown),p(2),v("ngIf",n.showTagsDropdown),p(15),z("border-gray-300",!n.isDragOver)("border-blue-500",n.isDragOver)("bg-blue-50",n.isDragOver)("hover:border-blue-400",!n.isDragOver),p(3),z("text-gray-400",!n.isDragOver)("text-blue-500",n.isDragOver),p(2),z("text-gray-500",!n.isDragOver)("text-blue-600",n.isDragOver),p(),W(" ",n.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),p(3),v("ngIf",n.imagePreviewUrls.length>0),p(),v("ngIf",n.submitError),p(),v("ngIf",n.submitSuccess),p(2),v("disabled",n.isSubmitting),p(2),v("disabled",n.isSubmitting||!n.isFormValid()),p(),v("ngIf",!n.isSubmitting),p(),v("ngIf",n.isSubmitting))},dependencies:[$e,qt,We,Hn,Nn,Ge,Yt,ki,Gn,Wn,zn,et,Rn,He,lt],styles:[".asset-create-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 768px){.asset-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.transition-transform[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb;font-family:inherit}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6;font-weight:600}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}[_nghost-%COMP%]     .flatpickr-input{cursor:pointer}[_nghost-%COMP%]     .flatpickr-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.slider-input[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;outline:none;z-index:20}.slider-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;position:relative;z-index:30}.slider-input[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;box-shadow:none}.slider-input[_ngcontent-%COMP%]:focus{outline:none}"]})};var U0=["dateInput"];function Y0(i,t){i&1&&(a(0,"span",42),u(1,"No location assigned"),c())}function q0(i,t){if(i&1&&(a(0,"span",43),u(1),c()),i&2){let e=_(2);p(),W(" ",e.getLocationNameById(e.transferData.new_location_id)," ")}}function K0(i,t){if(i&1){let e=H();a(0,"button",48),D("click",function(){let r=k(e).$implicit,s=_(3);return s.transferData.new_location_id=r.id,E(s.showLocationDropdown=!1)}),u(1),c()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",n.transferData.new_location_id===e.id),v("disabled",e.id===(n.asset==null?null:n.asset.location_id)),p(),W(" ",e.name," ")}}function Q0(i,t){if(i&1){let e=H();a(0,"div",44)(1,"div",45)(2,"button",46),D("click",function(){k(e);let r=_(2);return r.transferData.new_location_id=null,E(r.showLocationDropdown=!1)}),u(3," No location assigned "),c(),I(4,K0,2,4,"button",47),c()()}if(i&2){let e=_(2);p(2),z("bg-blue-50",!e.transferData.new_location_id),p(2),v("ngForOf",e.locations)}}function X0(i,t){i&1&&(a(0,"span",42),u(1,"Select new department (optional)"),c())}function J0(i,t){if(i&1&&(a(0,"span",43),u(1),c()),i&2){let e=_(2);p(),W(" ",e.getDepartmentNameById(e.transferData.new_department_id)," ")}}function Z0(i,t){if(i&1){let e=H();a(0,"button",46),D("click",function(){let r=k(e).$implicit,s=_(3);return s.transferData.new_department_id=r.id,E(s.showDepartmentDropdown=!1)}),u(1),c()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",n.transferData.new_department_id===e.id),p(),W(" ",e.name," ")}}function em(i,t){if(i&1){let e=H();a(0,"div",44)(1,"div",45)(2,"button",46),D("click",function(){k(e);let r=_(2);return r.transferData.new_department_id=null,E(r.showDepartmentDropdown=!1)}),u(3," Select new department (optional) "),c(),I(4,Z0,2,3,"button",49),c()()}if(i&2){let e=_(2);p(2),z("bg-blue-50",!e.transferData.new_department_id),p(2),v("ngForOf",e.departments)}}function tm(i,t){i&1&&(a(0,"span",42),u(1,"Select reason"),c())}function im(i,t){if(i&1&&(a(0,"span",43),u(1),c()),i&2){let e=_(2);p(),W(" ",e.transferData.transfer_reason," ")}}function nm(i,t){if(i&1){let e=H();a(0,"button",46),D("click",function(){let r=k(e).$implicit,s=_(3);return s.transferData.transfer_reason=r,E(s.showReasonDropdown=!1)}),u(1),c()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",n.transferData.transfer_reason===e),p(),W(" ",e," ")}}function rm(i,t){if(i&1){let e=H();a(0,"div",44)(1,"div",45)(2,"button",46),D("click",function(){k(e);let r=_(2);return r.transferData.transfer_reason="",E(r.showReasonDropdown=!1)}),u(3," Select reason "),c(),I(4,nm,2,3,"button",49),c()()}if(i&2){let e=_(2);p(2),z("bg-blue-50",!e.transferData.transfer_reason),p(2),v("ngForOf",e.transferReasons)}}function sm(i,t){if(i&1&&(a(0,"div",50)(1,"div",51)(2,"div",52),M(),a(3,"svg",53),y(4,"path",54),c()(),T(),a(5,"div",55)(6,"p",56),u(7),c()()()()),i&2){let e=_(2);p(7),O(e.error)}}function om(i,t){i&1&&(a(0,"span"),u(1,"Create Transfer"),c())}function am(i,t){i&1&&(a(0,"span",57),M(),a(1,"svg",58),y(2,"circle",59)(3,"path",60),c(),u(4," Creating Transfer... "),c())}function lm(i,t){if(i&1){let e=H();a(0,"div",2),D("click",function(r){k(e);let s=_();return E(s.onModalClick(r))}),a(1,"div",3),y(2,"div",4),a(3,"div",5),D("click",function(r){return k(e),E(r.stopPropagation())}),a(4,"div",6)(5,"h3",7),u(6),c(),a(7,"button",8),D("click",function(){k(e);let r=_();return E(r.onCancel())}),M(),a(8,"svg",9),y(9,"path",10),c()()(),T(),a(10,"div",11)(11,"div")(12,"p",12),u(13,"Current Location"),c(),a(14,"p",13),u(15),c()(),a(16,"div")(17,"p",12),u(18,"Current Department"),c(),a(19,"p",13),u(20),c()()(),a(21,"div",14)(22,"div",15),M(),a(23,"svg",16),y(24,"path",17),c()()(),T(),a(25,"form",18),D("ngSubmit",function(){k(e);let r=_();return E(r.onTransfer())}),a(26,"div",19),D("click",function(r){return k(e),E(r.stopPropagation())}),a(27,"label",20),u(28,"New Location"),c(),a(29,"button",21),D("click",function(){k(e);let r=_();return E(r.showLocationDropdown=!r.showLocationDropdown)}),a(30,"div",22),I(31,Y0,2,0,"span",23)(32,q0,2,1,"span",24),M(),a(33,"svg",25),y(34,"path",26),c()()(),I(35,Q0,5,3,"div",27),c(),T(),a(36,"div",19),D("click",function(r){return k(e),E(r.stopPropagation())}),a(37,"label",20),u(38,"New Department"),c(),a(39,"button",21),D("click",function(){k(e);let r=_();return E(r.showDepartmentDropdown=!r.showDepartmentDropdown)}),a(40,"div",22),I(41,X0,2,0,"span",23)(42,J0,2,1,"span",24),M(),a(43,"svg",25),y(44,"path",26),c()()(),I(45,em,5,3,"div",27),c(),T(),a(46,"div",19),D("click",function(r){return k(e),E(r.stopPropagation())}),a(47,"label",20),u(48,"Transfer Reason *"),c(),a(49,"button",21),D("click",function(){k(e);let r=_();return E(r.showReasonDropdown=!r.showReasonDropdown)}),a(50,"div",22),I(51,tm,2,0,"span",23)(52,im,2,1,"span",24),M(),a(53,"svg",25),y(54,"path",26),c()()(),I(55,rm,5,3,"div",27),c(),T(),a(56,"div")(57,"label",28),u(58," Transfer Date * "),c(),a(59,"div",29)(60,"input",30,0),ue("ngModelChange",function(r){k(e);let s=_();return me(s.transferData.transfer_date,r)||(s.transferData.transfer_date=r),E(r)}),c(),a(62,"div",31),M(),a(63,"svg",32),y(64,"path",33),c()()()(),T(),a(65,"div")(66,"label",34),u(67," Additional Notes "),c(),a(68,"textarea",35),ue("ngModelChange",function(r){k(e);let s=_();return me(s.transferData.notes,r)||(s.transferData.notes=r),E(r)}),c()(),I(69,sm,8,1,"div",36),a(70,"div",37)(71,"button",38),D("click",function(){k(e);let r=_();return E(r.onCancel())}),u(72," Cancel "),c(),a(73,"button",39),I(74,om,2,0,"span",40)(75,am,5,0,"span",41),c()()()()()()}if(i&2){let e=_();v("@backdropAnimation",void 0),p(3),v("@modalAnimation",void 0),p(3),W(" Transfer Asset: ",(e.asset==null?null:e.asset.name)||"Unknown Asset"," "),p(),v("disabled",e.loading),p(8),O(e.getCurrentLocationName()),p(5),O(e.getCurrentDepartmentName()),p(9),z("border-blue-500",e.showLocationDropdown),p(2),v("ngIf",!e.transferData.new_location_id),p(),v("ngIf",e.transferData.new_location_id),p(),z("rotate-180",e.showLocationDropdown),p(2),v("ngIf",e.showLocationDropdown),p(4),z("border-blue-500",e.showDepartmentDropdown),p(2),v("ngIf",!e.transferData.new_department_id),p(),v("ngIf",e.transferData.new_department_id),p(),z("rotate-180",e.showDepartmentDropdown),p(2),v("ngIf",e.showDepartmentDropdown),p(4),z("border-blue-500",e.showReasonDropdown),p(2),v("ngIf",!e.transferData.transfer_reason),p(),v("ngIf",e.transferData.transfer_reason),p(),z("rotate-180",e.showReasonDropdown),p(2),v("ngIf",e.showReasonDropdown),p(5),de("ngModel",e.transferData.transfer_date),v("disabled",e.loading),p(8),de("ngModel",e.transferData.notes),v("disabled",e.loading),p(),v("ngIf",e.error),p(2),v("disabled",e.loading),p(2),v("disabled",e.loading),p(),v("ngIf",!e.loading),p(),v("ngIf",e.loading)}}var Ii=class i{constructor(t){this.assetService=t}isOpen=!1;asset=null;closeModal=new Ze;transferComplete=new Ze;dateInput;flatpickrInstance;showLocationDropdown=!1;showDepartmentDropdown=!1;showReasonDropdown=!1;loading=!1;error="";transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""};locations=[];departments=[];users=[];transferReasons=["Relocation","Maintenance","Replacement","Department Transfer","User Assignment","Storage","Disposal","Other"];ngOnInit(){console.log("TransferAssetModalComponent initialized"),this.loadDropdownData()}ngOnChanges(){console.log("TransferAssetModalComponent changes:",{isOpen:this.isOpen,asset:this.asset}),this.isOpen&&setTimeout(()=>{this.initializeFlatpickr()},200)}ngAfterViewInit(){}ngOnDestroy(){this.destroyFlatpickr()}destroyFlatpickr(){if(this.flatpickrInstance)try{this.flatpickrInstance.destroy(),this.flatpickrInstance=null}catch(t){console.error("Error destroying flatpickr:",t)}}initializeFlatpickr(){try{this.destroyFlatpickr(),this.dateInput&&this.dateInput.nativeElement?(console.log("Initializing flatpickr on element:",this.dateInput.nativeElement),this.flatpickrInstance=Xt(this.dateInput.nativeElement,{dateFormat:"Y-m-d",defaultDate:new Date,allowInput:!1,clickOpens:!0,minDate:new Date,locale:{firstDayOfWeek:1},onChange:(t,e)=>{console.log("Date selected:",e),this.transferData.transfer_date=e},onOpen:()=>{console.log("Flatpickr opened")},onClose:()=>{console.log("Flatpickr closed")}}),console.log("Flatpickr initialized successfully")):console.warn("Date input element not found")}catch(t){console.error("Error initializing flatpickr:",t)}}loadDropdownData(){console.log("Loading dropdown data..."),console.log("Calling locations API with pagination..."),this.assetService.getLocations(1,1e3,"created","desc").subscribe({next:t=>{console.log("Locations API response:",t),console.log("Response type:",typeof t),console.log("Response keys:",Object.keys(t)),t&&t.data&&t.data.locations?(this.locations=t.data.locations,console.log("Using response.data.locations (paginated):",this.locations),console.log("Response pagination:",t.data.pagination)):t&&t.data&&Array.isArray(t.data)?(this.locations=t.data,console.log("Using response.data as array:",this.locations)):Array.isArray(t)?(this.locations=t,console.log("Using response as array:",this.locations)):(this.locations=[],console.warn("Unexpected response format:",t),console.log("Response structure:",t)),console.log("Final locations array:",this.locations),console.log("Locations count:",this.locations.length),this.locations.length===0&&console.warn("No locations found in response")},error:t=>{console.error("Error loading locations:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),this.locations=[]}}),console.log("Calling departments API with pagination..."),this.assetService.getDepartments(1,1e3,"created","desc").subscribe({next:t=>{console.log("Departments API response:",t),t&&t.data&&t.data.departments?(this.departments=t.data.departments,console.log("Using response.data.departments (paginated):",this.departments),console.log("Response pagination:",t.data.pagination)):t&&t.data&&Array.isArray(t.data)?(this.departments=t.data,console.log("Using response.data as array:",this.departments)):Array.isArray(t)?this.departments=t:(this.departments=[],console.warn("Unexpected departments response format:",t),console.log("Response structure:",t)),console.log("Final departments array:",this.departments),console.log("Departments count:",this.departments.length),this.departments.length===0&&console.warn("No departments found")},error:t=>{console.error("Error loading departments:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),this.departments=[]}})}reloadLocationData(){console.log("Manually reloading location data..."),this.loadDropdownData()}onTransfer(){this.validateForm()&&(this.loading=!0,this.error="",this.assetService.transferAsset(this.asset.id,this.transferData).subscribe({next:t=>{this.loading=!1,this.transferComplete.emit(t),this.resetForm(),this.closeModal.emit()},error:t=>{this.loading=!1,this.error=t.error?.message||"Transfer failed. Please try again.",console.error("Transfer error:",t)}}))}onCancel(){this.loading||(this.destroyFlatpickr(),this.resetForm(),this.closeModal.emit())}validateForm(){return this.transferData.new_location_id?this.transferData.transfer_reason?this.transferData.transfer_date?this.asset?.location_id===this.transferData.new_location_id?(this.error="Transfer location must be different from current location.",!1):(this.error="",!0):(this.error="Please select a transfer date.",!1):(this.error="Please select a transfer reason.",!1):(this.error="Please select a new location.",!1)}resetForm(){this.transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""},this.error=""}getCurrentLocationName(){return this.asset?.location?.name||"No location assigned"}getCurrentDepartmentName(){return this.asset?.department?.name||"No department assigned"}getLocationNameById(t){if(!t)return"";let e=this.locations.find(n=>n.id===t);return e?e.name:""}getDepartmentNameById(t){if(!t)return"";let e=this.departments.find(n=>n.id===t);return e?e.name:""}getLocationsCount(){return this.locations.length}getDepartmentsCount(){return this.departments.length}getUsersCount(){return this.users.length}onModalClick(t){t.target===t.currentTarget&&(this.showLocationDropdown=!1,this.showDepartmentDropdown=!1,this.showReasonDropdown=!1)}static \u0275fac=function(e){return new(e||i)(he(dt))};static \u0275cmp=Re({type:i,selectors:[["app-transfer-asset-modal"]],viewQuery:function(e,n){if(e&1&&vt(U0,5),e&2){let r;bt(r=yt())&&(n.dateInput=r.first)}},inputs:{isOpen:"isOpen",asset:"asset"},outputs:{closeModal:"closeModal",transferComplete:"transferComplete"},features:[To],decls:1,vars:1,consts:[["dateInput",""],["class","fixed inset-0 z-50 overflow-y-auto",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50","overflow-y-auto",3,"click"],[1,"flex","items-center","justify-center","min-h-screen","px-4","pt-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity","z-0","bg-[#00000085]"],[1,"inline-block","w-full","max-w-2xl","z-1","p-6","my-8","relative","overflow-hidden","text-left","align-middle","transition-all","transform","bg-white","shadow-xl","rounded-2xl",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","justify-center","mb-6"],[1,"w-8","h-8","bg-blue-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 14l-7 7m0 0l-7-7m7 7V3"],[1,"space-y-4",3,"ngSubmit"],[1,"relative",3,"click"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["for","transfer_date",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["type","text","id","transfer_date","name","transfer_date","placeholder","Select date","required","","readonly","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","cursor-pointer",3,"ngModelChange","ngModel","disabled"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-4","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["for","notes",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","notes","name","notes","rows","3","placeholder","Enter any additional notes about this transfer...",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","resize-none",3,"ngModelChange","ngModel","disabled"],["class","bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-6"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click","disabled"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-gray-400"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","disabled","click",4,"ngFor","ngForOf"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click","disabled"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&I(0,lm,76,36,"div",1),e&2&&v("ngIf",n.isOpen)},dependencies:[ze,lt,He,$e,qt,We,Ge,Yt,ki,et,Rn],styles:[".transfer-asset-modal[_ngcontent-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-height:90vh;overflow-y:auto}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;cursor:not-allowed}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-image:none!important;-webkit-appearance:none;-moz-appearance:none;appearance:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px 12px;background-color:#fff;color:#374151}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:#9ca3af;background-color:#f9fafb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 10px 25px #00000026;border:1px solid #e5e7eb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]{border-radius:4px}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day.selected[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   .transfer-arrow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.transfer-asset-modal[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.transfer-asset-modal[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100vw - 2rem)}}"],data:{animation:[ct("backdropAnimation",[Pe(":enter",[fe({opacity:0}),Ie("150ms ease-out",fe({opacity:1}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0}))])]),ct("modalAnimation",[Pe(":enter",[fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}),Ie("200ms ease-out",fe({opacity:1,transform:"scale(1) translateY(0)"}))]),Pe(":leave",[Ie("150ms ease-in",fe({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var mc=Ao(zo());function nn(i){return i+.5|0}var Jt=(i,t,e)=>Math.max(Math.min(i,e),t);function en(i){return Jt(nn(i*2.55),0,255)}function Zt(i){return Jt(nn(i*255),0,255)}function Lt(i){return Jt(nn(i/2.55)/100,0,1)}function Xo(i){return Jt(nn(i*100),0,100)}var mt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rs=[..."0123456789ABCDEF"],cm=i=>rs[i&15],dm=i=>rs[(i&240)>>4]+rs[i&15],or=i=>(i&240)>>4===(i&15),mm=i=>or(i.r)&&or(i.g)&&or(i.b)&&or(i.a);function um(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&mt[i[1]]*17,g:255&mt[i[2]]*17,b:255&mt[i[3]]*17,a:t===5?mt[i[4]]*17:255}:(t===7||t===9)&&(e={r:mt[i[1]]<<4|mt[i[2]],g:mt[i[3]]<<4|mt[i[4]],b:mt[i[5]]<<4|mt[i[6]],a:t===9?mt[i[7]]<<4|mt[i[8]]:255})),e}var pm=(i,t)=>i<255?t(i):"";function hm(i){var t=mm(i)?cm:dm;return i?"#"+t(i.r)+t(i.g)+t(i.b)+pm(i.a,t):void 0}var fm=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ta(i,t,e){let n=t*Math.min(e,1-e),r=(s,o=(s+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function gm(i,t,e){let n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function _m(i,t,e){let n=ta(i,1,.5),r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function xm(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}function ss(i){let e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),l=(s+o)/2,d,m,h;return s!==o&&(h=s-o,m=l>.5?h/(2-s-o):h/(s+o),d=xm(e,n,r,h,s),d=d*60+.5),[d|0,m||0,l]}function os(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(Zt)}function as(i,t,e){return os(ta,i,t,e)}function vm(i,t,e){return os(_m,i,t,e)}function bm(i,t,e){return os(gm,i,t,e)}function ia(i){return(i%360+360)%360}function ym(i){let t=fm.exec(i),e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?en(+t[5]):Zt(+t[5]));let r=ia(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=vm(r,s,o):t[1]==="hsv"?n=bm(r,s,o):n=as(r,s,o),{r:n[0],g:n[1],b:n[2],a:e}}function wm(i,t){var e=ss(i);e[0]=ia(e[0]+t),e=as(e),i.r=e[0],i.g=e[1],i.b=e[2]}function Cm(i){if(!i)return;let t=ss(i),e=t[0],n=Xo(t[1]),r=Xo(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${Lt(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}var Jo={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Zo={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Sm(){let i={},t=Object.keys(Zo),e=Object.keys(Jo),n,r,s,o,l;for(n=0;n<t.length;n++){for(o=l=t[n],r=0;r<e.length;r++)s=e[r],l=l.replace(s,Jo[s]);s=parseInt(Zo[o],16),i[l]=[s>>16&255,s>>8&255,s&255]}return i}var ar;function Mm(i){ar||(ar=Sm(),ar.transparent=[0,0,0,0]);let t=ar[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var km=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Em(i){let t=km.exec(i),e=255,n,r,s;if(t){if(t[7]!==n){let o=+t[7];e=t[8]?en(o):Jt(o*255,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?en(n):Jt(n,0,255)),r=255&(t[4]?en(r):Jt(r,0,255)),s=255&(t[6]?en(s):Jt(s,0,255)),{r:n,g:r,b:s,a:e}}}function Am(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Lt(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var ns=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Pi=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Dm(i,t,e){let n=Pi(Lt(i.r)),r=Pi(Lt(i.g)),s=Pi(Lt(i.b));return{r:Zt(ns(n+e*(Pi(Lt(t.r))-n))),g:Zt(ns(r+e*(Pi(Lt(t.g))-r))),b:Zt(ns(s+e*(Pi(Lt(t.b))-s))),a:i.a+e*(t.a-i.a)}}function lr(i,t,e){if(i){let n=ss(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=as(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function na(i,t){return i&&Object.assign(t||{},i)}function ea(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Zt(i[3]))):(t=na(i,{r:0,g:0,b:0,a:1}),t.a=Zt(t.a)),t}function Tm(i){return i.charAt(0)==="r"?Em(i):ym(i)}var tn=class i{constructor(t){if(t instanceof i)return t;let e=typeof t,n;e==="object"?n=ea(t):e==="string"&&(n=um(t)||Mm(t)||Tm(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=na(this._rgb);return t&&(t.a=Lt(t.a)),t}set rgb(t){this._rgb=ea(t)}rgbString(){return this._valid?Am(this._rgb):void 0}hexString(){return this._valid?hm(this._rgb):void 0}hslString(){return this._valid?Cm(this._rgb):void 0}mix(t,e){if(t){let n=this.rgb,r=t.rgb,s,o=e===s?.5:e,l=2*o-1,d=n.a-r.a,m=((l*d===-1?l:(l+d)/(1+l*d))+1)/2;s=1-m,n.r=255&m*n.r+s*r.r+.5,n.g=255&m*n.g+s*r.g+.5,n.b=255&m*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=Dm(this._rgb,t._rgb,e)),this}clone(){return new i(this.rgb)}alpha(t){return this._rgb.a=Zt(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=nn(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return lr(this._rgb,2,t),this}darken(t){return lr(this._rgb,2,-t),this}saturate(t){return lr(this._rgb,1,t),this}desaturate(t){return lr(this._rgb,1,-t),this}rotate(t){return wm(this._rgb,t),this}};function kt(){}var ha=(()=>{let i=0;return()=>i++})();function re(i){return i==null}function ve(i){if(Array.isArray&&Array.isArray(i))return!0;let t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function se(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function Ee(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function rt(i,t){return Ee(i)?i:t}function Z(i,t){return typeof i>"u"?t:i}var fa=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,ms=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function _e(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function pe(i,t,e,n){let r,s,o;if(ve(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(se(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)t.call(e,i[o[r]],o[r])}function on(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function pr(i){if(ve(i))return i.map(pr);if(se(i)){let t=Object.create(null),e=Object.keys(i),n=e.length,r=0;for(;r<n;++r)t[e[r]]=pr(i[e[r]]);return t}return i}function ga(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Im(i,t,e,n){if(!ga(i))return;let r=t[i],s=e[i];se(r)&&se(s)?Li(r,s,n):t[i]=pr(s)}function Li(i,t,e){let n=ve(t)?t:[t],r=n.length;if(!se(i))return i;e=e||{};let s=e.merger||Im,o;for(let l=0;l<r;++l){if(o=n[l],!se(o))continue;let d=Object.keys(o);for(let m=0,h=d.length;m<h;++m)s(d[m],i,o,e)}return i}function Fi(i,t){return Li(i,t,{merger:Pm})}function Pm(i,t,e){if(!ga(i))return;let n=t[i],r=e[i];se(n)&&se(r)?Fi(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=pr(r))}var ra={"":i=>i,x:i=>i.x,y:i=>i.y};function Vm(i){let t=i.split("."),e=[],n="";for(let r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function Lm(i){let t=Vm(i);return e=>{for(let n of t){if(n==="")break;e=e&&e[n]}return e}}function Rt(i,t){return(ra[t]||(ra[t]=Lm(t)))(i)}function _r(i){return i.charAt(0).toUpperCase()+i.slice(1)}var Ri=i=>typeof i<"u",Ot=i=>typeof i=="function",us=(i,t)=>{if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0};function _a(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var oe=Math.PI,be=2*oe,Om=be+oe,hr=Number.POSITIVE_INFINITY,Fm=oe/180,Ae=oe/2,mi=oe/4,sa=oe*2/3,Ft=Math.log10,gt=Math.sign;function Hi(i,t,e){return Math.abs(i-t)<e}function ps(i){let t=Math.round(i);i=Hi(i,t,i/1e3)?t:i;let e=Math.pow(10,Math.floor(Ft(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function xa(i){let t=[],e=Math.sqrt(i),n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function Rm(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function hi(i){return!Rm(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function va(i,t){let e=Math.round(i);return e-t<=i&&e+t>=i}function hs(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function ut(i){return i*(oe/180)}function xr(i){return i*(180/oe)}function fs(i){if(!Ee(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function gs(i,t){let e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n),s=Math.atan2(n,e);return s<-.5*oe&&(s+=be),{angle:s,distance:r}}function fr(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Hm(i,t){return(i-t+Om)%be-oe}function Ne(i){return(i%be+be)%be}function Ni(i,t,e,n){let r=Ne(i),s=Ne(t),o=Ne(e),l=Ne(s-r),d=Ne(o-r),m=Ne(r-s),h=Ne(r-o);return r===s||r===o||n&&s===o||l>d&&m<h}function Fe(i,t,e){return Math.max(t,Math.min(e,i))}function ba(i){return Fe(i,-32768,32767)}function Et(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function vr(i,t,e){e=e||(o=>i[o]<t);let n=i.length-1,r=0,s;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}var St=(i,t,e,n)=>vr(i,e,n?r=>{let s=i[r][t];return s<e||s===e&&i[r+1][t]===e}:r=>i[r][t]<e),ya=(i,t,e)=>vr(i,e,n=>i[n][t]>=e);function wa(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}var Ca=["push","pop","shift","splice","unshift"];function Sa(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ca.forEach(e=>{let n="_onData"+_r(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return i._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...s)}),o}})})}function _s(i,t){let e=i._chartjs;if(!e)return;let n=e.listeners,r=n.indexOf(t);r!==-1&&n.splice(r,1),!(n.length>0)&&(Ca.forEach(s=>{delete i[s]}),delete i._chartjs)}function xs(i){let t=new Set(i);return t.size===i.length?i:Array.from(t)}var vs=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function bs(i,t){let e=[],n=!1;return function(...r){e=r,n||(n=!0,vs.call(window,()=>{n=!1,i.apply(t,e)}))}}function Ma(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}var br=i=>i==="start"?"left":i==="end"?"right":"center",Be=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,ka=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t;function ys(i,t,e){let n=t.length,r=0,s=n;if(i._sorted){let{iScale:o,vScale:l,_parsed:d}=i,m=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,h=o.axis,{min:f,max:x,minDefined:g,maxDefined:S}=o.getUserBounds();if(g){if(r=Math.min(St(d,h,f).lo,e?n:St(t,h,o.getPixelForValue(f)).lo),m){let w=d.slice(0,r+1).reverse().findIndex(A=>!re(A[l.axis]));r-=Math.max(0,w)}r=Fe(r,0,n-1)}if(S){let w=Math.max(St(d,o.axis,x,!0).hi+1,e?0:St(t,h,o.getPixelForValue(x),!0).hi+1);if(m){let A=d.slice(w-1).findIndex(L=>!re(L[l.axis]));w+=Math.max(0,A)}s=Fe(w,r,n)-r}else s=n-r}return{start:r,count:s}}function ws(i){let{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;let s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}var cr=i=>i===0||i===1,oa=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*be/e)),aa=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*be/e)+1,Vi={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Ae)+1,easeOutSine:i=>Math.sin(i*Ae),easeInOutSine:i=>-.5*(Math.cos(oe*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>cr(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>cr(i)?i:oa(i,.075,.3),easeOutElastic:i=>cr(i)?i:aa(i,.075,.3),easeInOutElastic(i){return cr(i)?i:i<.5?.5*oa(i*2,.1125,.45):.5+.5*aa(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-Vi.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Vi.easeInBounce(i*2)*.5:Vi.easeOutBounce(i*2-1)*.5+.5};function Cs(i){if(i&&typeof i=="object"){let t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ss(i){return Cs(i)?i:new tn(i)}function ls(i){return Cs(i)?i:new tn(i).saturate(.5).darken(.1).hexString()}var Nm=["x","y","borderWidth","radius","tension"],Bm=["color","borderColor","backgroundColor"];function jm(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:Bm},numbers:{type:"number",properties:Nm}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function zm(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var la=new Map;function Wm(i,t){t=t||{};let e=i+JSON.stringify(t),n=la.get(e);return n||(n=new Intl.NumberFormat(i,t),la.set(e,n)),n}function Bi(i,t,e){return Wm(t,e).format(i)}var Ea={values(i){return ve(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";let n=this.chart.options.locale,r,s=i;if(e.length>1){let m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(r="scientific"),s=Gm(i,e)}let o=Ft(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(d,this.options.ticks.format),Bi(i,n,d)},logarithmic(i,t,e){if(i===0)return"0";let n=e[t].significand||i/Math.pow(10,Math.floor(Ft(i)));return[1,2,3,5,10,15].includes(n)||t>.8*e.length?Ea.numeric.call(this,i,t,e):""}};function Gm(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var an={formatters:Ea};function $m(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:an.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var ti=Object.create(null),yr=Object.create(null);function rn(i,t){if(!t)return i;let e=t.split(".");for(let n=0,r=e.length;n<r;++n){let s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function cs(i,t,e){return typeof t=="string"?Li(rn(i,t),e):Li(rn(i,""),t)}var ds=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>ls(r.backgroundColor),this.hoverBorderColor=(n,r)=>ls(r.borderColor),this.hoverColor=(n,r)=>ls(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return cs(this,t,e)}get(t){return rn(this,t)}describe(t,e){return cs(yr,t,e)}override(t,e){return cs(ti,t,e)}route(t,e,n,r){let s=rn(this,t),o=rn(this,n),l="_"+e;Object.defineProperties(s,{[l]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let d=this[l],m=o[r];return se(d)?Object.assign({},m,d):Z(d,m)},set(d){this[l]=d}}})}apply(t){t.forEach(e=>e(this))}},ye=new ds({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[jm,zm,$m]);function Um(i){return!i||re(i.size)||re(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function sn(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function Aa(i,t,e,n){n=n||{};let r=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let o=0,l=e.length,d,m,h,f,x;for(d=0;d<l;d++)if(f=e[d],f!=null&&!ve(f))o=sn(i,r,s,o,f);else if(ve(f))for(m=0,h=f.length;m<h;m++)x=f[m],x!=null&&!ve(x)&&(o=sn(i,r,s,o,x));i.restore();let g=s.length/2;if(g>e.length){for(d=0;d<g;d++)delete r[s[d]];s.splice(0,g)}return o}function ii(i,t,e){let n=i.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function Ms(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function wr(i,t,e,n){ks(i,t,e,n,null)}function ks(i,t,e,n,r){let s,o,l,d,m,h,f,x,g=t.pointStyle,S=t.rotation,w=t.radius,A=(S||0)*Fm;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(A),i.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),i.restore();return}if(!(isNaN(w)||w<=0)){switch(i.beginPath(),g){default:r?i.ellipse(e,n,r/2,w,0,0,be):i.arc(e,n,w,0,be),i.closePath();break;case"triangle":h=r?r/2:w,i.moveTo(e+Math.sin(A)*h,n-Math.cos(A)*w),A+=sa,i.lineTo(e+Math.sin(A)*h,n-Math.cos(A)*w),A+=sa,i.lineTo(e+Math.sin(A)*h,n-Math.cos(A)*w),i.closePath();break;case"rectRounded":m=w*.516,d=w-m,o=Math.cos(A+mi)*d,f=Math.cos(A+mi)*(r?r/2-m:d),l=Math.sin(A+mi)*d,x=Math.sin(A+mi)*(r?r/2-m:d),i.arc(e-f,n-l,m,A-oe,A-Ae),i.arc(e+x,n-o,m,A-Ae,A),i.arc(e+f,n+l,m,A,A+Ae),i.arc(e-x,n+o,m,A+Ae,A+oe),i.closePath();break;case"rect":if(!S){d=Math.SQRT1_2*w,h=r?r/2:d,i.rect(e-h,n-d,2*h,2*d);break}A+=mi;case"rectRot":f=Math.cos(A)*(r?r/2:w),o=Math.cos(A)*w,l=Math.sin(A)*w,x=Math.sin(A)*(r?r/2:w),i.moveTo(e-f,n-l),i.lineTo(e+x,n-o),i.lineTo(e+f,n+l),i.lineTo(e-x,n+o),i.closePath();break;case"crossRot":A+=mi;case"cross":f=Math.cos(A)*(r?r/2:w),o=Math.cos(A)*w,l=Math.sin(A)*w,x=Math.sin(A)*(r?r/2:w),i.moveTo(e-f,n-l),i.lineTo(e+f,n+l),i.moveTo(e+x,n-o),i.lineTo(e-x,n+o);break;case"star":f=Math.cos(A)*(r?r/2:w),o=Math.cos(A)*w,l=Math.sin(A)*w,x=Math.sin(A)*(r?r/2:w),i.moveTo(e-f,n-l),i.lineTo(e+f,n+l),i.moveTo(e+x,n-o),i.lineTo(e-x,n+o),A+=mi,f=Math.cos(A)*(r?r/2:w),o=Math.cos(A)*w,l=Math.sin(A)*w,x=Math.sin(A)*(r?r/2:w),i.moveTo(e-f,n-l),i.lineTo(e+f,n+l),i.moveTo(e+x,n-o),i.lineTo(e-x,n+o);break;case"line":o=r?r/2:Math.cos(A)*w,l=Math.sin(A)*w,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(A)*(r?r/2:w),n+Math.sin(A)*w);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Mt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function ln(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function cn(i){i.restore()}function Da(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if(r==="middle"){let s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else r==="after"!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Ta(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function Ym(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),re(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function qm(i,t,e,n,r){if(r.strikethrough||r.underline){let s=i.measureText(n),o=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,d=e-s.actualBoundingBoxAscent,m=e+s.actualBoundingBoxDescent,h=r.strikethrough?(d+m)/2:m;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,h),i.lineTo(l,h),i.stroke()}}function Km(i,t){let e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function ni(i,t,e,n,r,s={}){let o=ve(t)?t:[t],l=s.strokeWidth>0&&s.strokeColor!=="",d,m;for(i.save(),i.font=r.string,Ym(i,s),d=0;d<o.length;++d)m=o[d],s.backdrop&&Km(i,s.backdrop),l&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),re(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(m,e,n,s.maxWidth)),i.fillText(m,e,n,s.maxWidth),qm(i,e,n,m,s),n+=Number(r.lineHeight);i.restore()}function ji(i,t){let{x:e,y:n,w:r,h:s,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,1.5*oe,oe,!0),i.lineTo(e,n+s-o.bottomLeft),i.arc(e+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,oe,Ae,!0),i.lineTo(e+r-o.bottomRight,n+s),i.arc(e+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,Ae,0,!0),i.lineTo(e+r,n+o.topRight),i.arc(e+r-o.topRight,n+o.topRight,o.topRight,0,-Ae,!0),i.lineTo(e+o.topLeft,n)}var Qm=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xm=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Jm(i,t){let e=(""+i).match(Qm);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}var Zm=i=>+i||0;function Cr(i,t){let e={},n=se(t),r=n?Object.keys(t):t,s=se(i)?n?o=>Z(i[o],i[t[o]]):o=>i[o]:()=>i;for(let o of r)e[o]=Zm(s(o));return e}function Es(i){return Cr(i,{top:"y",right:"x",bottom:"y",left:"x"})}function ri(i){return Cr(i,["topLeft","topRight","bottomLeft","bottomRight"])}function je(i){let t=Es(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Le(i,t){i=i||{},t=t||ye.font;let e=Z(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=Z(i.style,t.style);n&&!(""+n).match(Xm)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let r={family:Z(i.family,t.family),lineHeight:Jm(Z(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:Z(i.weight,t.weight),string:""};return r.string=Um(r),r}function zi(i,t,e,n){let r=!0,s,o,l;for(s=0,o=i.length;s<o;++s)if(l=i[s],l!==void 0&&(t!==void 0&&typeof l=="function"&&(l=l(t),r=!1),e!==void 0&&ve(l)&&(l=l[e%l.length],r=!1),l!==void 0))return n&&!r&&(n.cacheable=!1),l}function Ia(i,t,e){let{min:n,max:r}=i,s=ms(t,(r-n)/2),o=(l,d)=>e&&l===0?0:l+d;return{min:o(n,-Math.abs(s)),max:o(r,s)}}function Ht(i,t){return Object.assign(Object.create(i),t)}function Sr(i,t=[""],e,n,r=()=>i[0]){let s=e||i;typeof n>"u"&&(n=La("_fallback",i));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:n,_getTarget:r,override:l=>Sr([l,...i],t,s,n)};return new Proxy(o,{deleteProperty(l,d){return delete l[d],delete l._keys,delete i[0][d],!0},get(l,d){return Pa(l,d,()=>au(d,t,i,l))},getOwnPropertyDescriptor(l,d){return Reflect.getOwnPropertyDescriptor(l._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(l,d){return da(l).includes(d)},ownKeys(l){return da(l)},set(l,d,m){let h=l._storage||(l._storage=r());return l[d]=h[d]=m,delete l._keys,!0}})}function pi(i,t,e,n){let r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:As(i,n),setContext:s=>pi(i,s,e,n),override:s=>pi(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete i[o],!0},get(s,o,l){return Pa(s,o,()=>tu(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(s,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(s,o,l){return i[o]=l,delete s[o],!0}})}function As(i,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:Ot(e)?e:()=>e,isIndexable:Ot(n)?n:()=>n}}var eu=(i,t)=>i?i+_r(t):t,Ds=(i,t)=>se(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Pa(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];let n=e();return i[t]=n,n}function tu(i,t,e){let{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i,l=n[t];return Ot(l)&&o.isScriptable(t)&&(l=iu(t,l,i,e)),ve(l)&&l.length&&(l=nu(t,l,i,o.isIndexable)),Ds(t,l)&&(l=pi(l,r,s&&s[t],o)),l}function iu(i,t,e,n){let{_proxy:r,_context:s,_subProxy:o,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);l.add(i);let d=t(s,o||n);return l.delete(i),Ds(i,d)&&(d=Ts(r._scopes,r,i,d)),d}function nu(i,t,e,n){let{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=e;if(typeof s.index<"u"&&n(i))return t[s.index%t.length];if(se(t[0])){let d=t,m=r._scopes.filter(h=>h!==d);t=[];for(let h of d){let f=Ts(m,r,i,h);t.push(pi(f,s,o&&o[i],l))}}return t}function Va(i,t,e){return Ot(i)?i(t,e):i}var ru=(i,t)=>i===!0?t:typeof i=="string"?Rt(t,i):void 0;function su(i,t,e,n,r){for(let s of t){let o=ru(e,s);if(o){i.add(o);let l=Va(o._fallback,e,r);if(typeof l<"u"&&l!==e&&l!==n)return l}else if(o===!1&&typeof n<"u"&&e!==n)return null}return!1}function Ts(i,t,e,n){let r=t._rootScopes,s=Va(t._fallback,e,n),o=[...i,...r],l=new Set;l.add(n);let d=ca(l,o,e,s||e,n);return d===null||typeof s<"u"&&s!==e&&(d=ca(l,o,s,d,n),d===null)?!1:Sr(Array.from(l),[""],r,s,()=>ou(t,e,n))}function ca(i,t,e,n,r){for(;e;)e=su(i,t,e,n,r);return e}function ou(i,t,e){let n=i._getTarget();t in n||(n[t]={});let r=n[t];return ve(r)&&se(e)?e:r||{}}function au(i,t,e,n){let r;for(let s of t)if(r=La(eu(s,i),e),typeof r<"u")return Ds(i,r)?Ts(e,n,i,r):r}function La(i,t){for(let e of t){if(!e)continue;let n=e[i];if(typeof n<"u")return n}}function da(i){let t=i._keys;return t||(t=i._keys=lu(i._scopes)),t}function lu(i){let t=new Set;for(let e of i)for(let n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}function Is(i,t,e,n){let{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n),l,d,m,h;for(l=0,d=n;l<d;++l)m=l+e,h=t[m],o[l]={r:r.parse(Rt(h,s),m)};return o}var cu=Number.EPSILON||1e-14,Oi=(i,t)=>t<i.length&&!i[t].skip&&i[t],Oa=i=>i==="x"?"y":"x";function du(i,t,e,n){let r=i.skip?t:i,s=t,o=e.skip?t:e,l=fr(s,r),d=fr(o,s),m=l/(l+d),h=d/(l+d);m=isNaN(m)?0:m,h=isNaN(h)?0:h;let f=n*m,x=n*h;return{previous:{x:s.x-f*(o.x-r.x),y:s.y-f*(o.y-r.y)},next:{x:s.x+x*(o.x-r.x),y:s.y+x*(o.y-r.y)}}}function mu(i,t,e){let n=i.length,r,s,o,l,d,m=Oi(i,0);for(let h=0;h<n-1;++h)if(d=m,m=Oi(i,h+1),!(!d||!m)){if(Hi(t[h],0,cu)){e[h]=e[h+1]=0;continue}r=e[h]/t[h],s=e[h+1]/t[h],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),e[h]=r*o*t[h],e[h+1]=s*o*t[h])}}function uu(i,t,e="x"){let n=Oa(e),r=i.length,s,o,l,d=Oi(i,0);for(let m=0;m<r;++m){if(o=l,l=d,d=Oi(i,m+1),!l)continue;let h=l[e],f=l[n];o&&(s=(h-o[e])/3,l[`cp1${e}`]=h-s,l[`cp1${n}`]=f-s*t[m]),d&&(s=(d[e]-h)/3,l[`cp2${e}`]=h+s,l[`cp2${n}`]=f+s*t[m])}}function pu(i,t="x"){let e=Oa(t),n=i.length,r=Array(n).fill(0),s=Array(n),o,l,d,m=Oi(i,0);for(o=0;o<n;++o)if(l=d,d=m,m=Oi(i,o+1),!!d){if(m){let h=m[t]-d[t];r[o]=h!==0?(m[e]-d[e])/h:0}s[o]=l?m?gt(r[o-1])!==gt(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}mu(i,r,s),uu(i,s,t)}function dr(i,t,e){return Math.max(Math.min(i,e),t)}function hu(i,t){let e,n,r,s,o,l=Mt(i[0],t);for(e=0,n=i.length;e<n;++e)o=s,s=l,l=e<n-1&&Mt(i[e+1],t),s&&(r=i[e],o&&(r.cp1x=dr(r.cp1x,t.left,t.right),r.cp1y=dr(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=dr(r.cp2x,t.left,t.right),r.cp2y=dr(r.cp2y,t.top,t.bottom)))}function Fa(i,t,e,n,r){let s,o,l,d;if(t.spanGaps&&(i=i.filter(m=>!m.skip)),t.cubicInterpolationMode==="monotone")pu(i,r);else{let m=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)l=i[s],d=du(m,l,i[Math.min(s+1,o-(n?0:1))%o],t.tension),l.cp1x=d.previous.x,l.cp1y=d.previous.y,l.cp2x=d.next.x,l.cp2y=d.next.y,m=l}t.capBezierPoints&&hu(i,e)}function Mr(){return typeof window<"u"&&typeof document<"u"}function kr(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function gr(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}var Er=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function fu(i,t){return Er(i).getPropertyValue(t)}var gu=["top","right","bottom","left"];function ui(i,t,e){let n={};e=e?"-"+e:"";for(let r=0;r<4;r++){let s=gu[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var _u=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function xu(i,t){let e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n,o=!1,l,d;if(_u(r,s,i.target))l=r,d=s;else{let m=t.getBoundingClientRect();l=n.clientX-m.left,d=n.clientY-m.top,o=!0}return{x:l,y:d,box:o}}function si(i,t){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:n}=t,r=Er(e),s=r.boxSizing==="border-box",o=ui(r,"padding"),l=ui(r,"border","width"),{x:d,y:m,box:h}=xu(i,e),f=o.left+(h&&l.left),x=o.top+(h&&l.top),{width:g,height:S}=t;return s&&(g-=o.width+l.width,S-=o.height+l.height),{x:Math.round((d-f)/g*e.width/n),y:Math.round((m-x)/S*e.height/n)}}function vu(i,t,e){let n,r;if(t===void 0||e===void 0){let s=i&&kr(i);if(!s)t=i.clientWidth,e=i.clientHeight;else{let o=s.getBoundingClientRect(),l=Er(s),d=ui(l,"border","width"),m=ui(l,"padding");t=o.width-m.width-d.width,e=o.height-m.height-d.height,n=gr(l.maxWidth,s,"clientWidth"),r=gr(l.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:n||hr,maxHeight:r||hr}}var mr=i=>Math.round(i*10)/10;function Ra(i,t,e,n){let r=Er(i),s=ui(r,"margin"),o=gr(r.maxWidth,i,"clientWidth")||hr,l=gr(r.maxHeight,i,"clientHeight")||hr,d=vu(i,t,e),{width:m,height:h}=d;if(r.boxSizing==="content-box"){let x=ui(r,"border","width"),g=ui(r,"padding");m-=g.width+x.width,h-=g.height+x.height}return m=Math.max(0,m-s.width),h=Math.max(0,n?m/n:h-s.height),m=mr(Math.min(m,o,d.maxWidth)),h=mr(Math.min(h,l,d.maxHeight)),m&&!h&&(h=mr(m/2)),(t!==void 0||e!==void 0)&&n&&d.height&&h>d.height&&(h=d.height,m=mr(Math.floor(h*n))),{width:m,height:h}}function Ps(i,t,e){let n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);let o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s?(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}var Ha=function(){let i=!1;try{let t={get passive(){return i=!0,!1}};Mr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function Vs(i,t){let e=fu(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ei(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Na(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:n==="middle"?e<.5?i.y:t.y:n==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function Ba(i,t,e,n){let r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},o=ei(i,r,e),l=ei(r,s,e),d=ei(s,t,e),m=ei(o,l,e),h=ei(l,d,e);return ei(m,h,e)}var bu=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},yu=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function fi(i,t,e){return i?bu(t,e):yu()}function Ls(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function Os(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function ja(i){return i==="angle"?{between:Ni,compare:Hm,normalize:Ne}:{between:Et,compare:(t,e)=>t-e,normalize:t=>t}}function ma({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e===0,style:r}}function wu(i,t,e){let{property:n,start:r,end:s}=e,{between:o,normalize:l}=ja(n),d=t.length,{start:m,end:h,loop:f}=i,x,g;if(f){for(m+=d,h+=d,x=0,g=d;x<g&&o(l(t[m%d][n]),r,s);++x)m--,h--;m%=d,h%=d}return h<m&&(h+=d),{start:m,end:h,loop:f,style:i.style}}function Fs(i,t,e){if(!e)return[i];let{property:n,start:r,end:s}=e,o=t.length,{compare:l,between:d,normalize:m}=ja(n),{start:h,end:f,loop:x,style:g}=wu(i,t,e),S=[],w=!1,A=null,L,V,N,j=()=>d(r,N,L)&&l(r,N)!==0,R=()=>l(s,L)===0||d(s,N,L),B=()=>w||j(),U=()=>!w||R();for(let G=h,q=h;G<=f;++G)V=t[G%o],!V.skip&&(L=m(V[n]),L!==N&&(w=d(L,r,s),A===null&&B()&&(A=l(L,r)===0?G:q),A!==null&&U()&&(S.push(ma({start:A,end:G,loop:x,count:o,style:g})),A=null),q=G,N=L));return A!==null&&S.push(ma({start:A,end:f,loop:x,count:o,style:g})),S}function Rs(i,t){let e=[],n=i.segments;for(let r=0;r<n.length;r++){let s=Fs(n[r],i.points,t);s.length&&e.push(...s)}return e}function Cu(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}function Su(i,t,e,n){let r=i.length,s=[],o=t,l=i[t],d;for(d=t+1;d<=e;++d){let m=i[d%r];m.skip||m.stop?l.skip||(n=!1,s.push({start:t%r,end:(d-1)%r,loop:n}),t=o=m.stop?d:null):(o=d,l.skip&&(t=d)),l=m}return o!==null&&s.push({start:t%r,end:o%r,loop:n}),s}function za(i,t){let e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];let s=!!i._loop,{start:o,end:l}=Cu(e,r,s,n);if(n===!0)return ua(i,[{start:o,end:l,loop:s}],e,t);let d=l<o?l+r:l,m=!!i._fullLoop&&o===0&&l===r-1;return ua(i,Su(e,o,d,m),e,t)}function ua(i,t,e,n){return!n||!n.setContext||!e?t:Mu(i,t,e,n)}function Mu(i,t,e,n){let r=i._chart.getContext(),s=pa(i.options),{_datasetIndex:o,options:{spanGaps:l}}=i,d=e.length,m=[],h=s,f=t[0].start,x=f;function g(S,w,A,L){let V=l?-1:1;if(S!==w){for(S+=d;e[S%d].skip;)S-=V;for(;e[w%d].skip;)w+=V;S%d!==w%d&&(m.push({start:S%d,end:w%d,loop:A,style:L}),h=L,f=w%d)}}for(let S of t){f=l?f:S.start;let w=e[f%d],A;for(x=f+1;x<=S.end;x++){let L=e[x%d];A=pa(n.setContext(Ht(r,{type:"segment",p0:w,p1:L,p0DataIndex:(x-1)%d,p1DataIndex:x%d,datasetIndex:o}))),ku(A,h)&&g(f,x-1,S.loop,h),w=L,h=A}f<x-1&&g(f,x-1,S.loop,h)}return m}function pa(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function ku(i,t){if(!t)return!1;let e=[],n=function(r,s){return Cs(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(i,n)!==JSON.stringify(t,n)}function ur(i,t,e){return i.options.clip?i[e]:t[e]}function Eu(i,t){let{xScale:e,yScale:n}=i;return e&&n?{left:ur(e,t,"left"),right:ur(e,t,"right"),top:ur(n,t,"top"),bottom:ur(n,t,"bottom")}:t}function Hs(i,t){let e=t._clip;if(e.disabled)return!1;let n=Eu(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}var Qs=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){let s=e.listeners[r],o=e.duration;s.forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=vs.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;let s=n.items,o=s.length-1,l=!1,d;for(;o>=0;--o)d=s[o],d._active?(d._total>n.duration&&(n.duration=d._total),d.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let n=e.items,r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},Nt=new Qs,Wa="transparent",Au={boolean(i,t,e){return e>.5?t:i},color(i,t,e){let n=Ss(i||Wa),r=n.valid&&Ss(t||Wa);return r&&r.valid?r.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}},Xs=class{constructor(t,e,n,r){let s=e[n];r=zi([t.to,r,s,t.from]);let o=zi([t.from,s,r]);this._active=!0,this._fn=t.fn||Au[t.type||typeof o],this._easing=Vi[t.easing]||Vi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);let r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=zi([t.to,e,r,t.from]),this._from=zi([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to,d;if(this._active=s!==l&&(o||e<n),!this._active){this._target[r]=l,this._notify(!0);return}if(e<0){this._target[r]=s;return}d=e/n%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[r]=this._fn(s,l,d)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){let e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}},Fr=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!se(t))return;let e=Object.keys(ye.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!se(s))return;let o={};for(let l of e)o[l]=s[l];(ve(s.properties)&&s.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(t,e){let n=e.options,r=Tu(t,n);if(!r)return[];let s=this._createAnimations(r,n);return n.$shared&&Du(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){let n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now(),d;for(d=o.length-1;d>=0;--d){let m=o[d];if(m.charAt(0)==="$")continue;if(m==="options"){r.push(...this._animateOptions(t,e));continue}let h=e[m],f=s[m],x=n.get(m);if(f)if(x&&f.active()){f.update(x,h,l);continue}else f.cancel();if(!x||!x.duration){t[m]=h;continue}s[m]=f=new Xs(x,t,m,h),r.push(f)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let n=this._createAnimations(t,e);if(n.length)return Nt.add(this._chart,n),!0}};function Du(i,t){let e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){let s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function Tu(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Ga(i,t){let e=i&&i.options||{},n=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:n?s:r,end:n?r:s}}function Iu(i,t,e){if(e===!1)return!1;let n=Ga(i,e),r=Ga(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function Pu(i){let t,e,n,r;return se(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:i===!1}}function Wl(i,t){let e=[],n=i._getSortedDatasetMetas(t),r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function $a(i,t,e,n={}){let r=i.keys,s=n.mode==="single",o,l,d,m;if(t===null)return;let h=!1;for(o=0,l=r.length;o<l;++o){if(d=+r[o],d===e){if(h=!0,n.all)continue;break}m=i.values[d],Ee(m)&&(s||t===0||gt(t)===gt(m))&&(t+=m)}return!h&&!n.all?0:t}function Vu(i,t){let{iScale:e,vScale:n}=t,r=e.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",o=Object.keys(i),l=new Array(o.length),d,m,h;for(d=0,m=o.length;d<m;++d)h=o[d],l[d]={[r]:h,[s]:i[h]};return l}function Ns(i,t){let e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function Lu(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function Ou(i){let{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function Fu(i,t,e){let n=i[t]||(i[t]={});return n[e]||(n[e]={})}function Ua(i,t,e,n){for(let r of t.getMatchingVisibleMetas(n).reverse()){let s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function Ya(i,t){let{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:l}=n,d=s.axis,m=o.axis,h=Lu(s,o,n),f=t.length,x;for(let g=0;g<f;++g){let S=t[g],{[d]:w,[m]:A}=S,L=S._stacks||(S._stacks={});x=L[m]=Fu(r,h,w),x[l]=A,x._top=Ua(x,o,!0,n.type),x._bottom=Ua(x,o,!1,n.type);let V=x._visualValues||(x._visualValues={});V[l]=A}}function Bs(i,t){let e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function Ru(i,t){return Ht(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Hu(i,t,e){return Ht(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function dn(i,t){let e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(let r of t){let s=r._stacks;if(!s||s[n]===void 0||s[n][e]===void 0)return;delete s[n][e],s[n]._visualValues!==void 0&&s[n]._visualValues[e]!==void 0&&delete s[n]._visualValues[e]}}}var js=i=>i==="reset"||i==="none",qa=(i,t)=>t?i:Object.assign({},i),Nu=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:Wl(e,!0),values:null},ai=(()=>{class i{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ns(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&dn(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(x,g,S,w)=>x==="x"?g:x==="r"?w:S,o=n.xAxisID=Z(r.xAxisID,Bs(e,"x")),l=n.yAxisID=Z(r.yAxisID,Bs(e,"y")),d=n.rAxisID=Z(r.rAxisID,Bs(e,"r")),m=n.indexAxis,h=n.iAxisID=s(m,o,l,d),f=n.vAxisID=s(m,l,o,d);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(d),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&_s(this._data,this),e._stacked&&dn(e)}_dataCheck(){let e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(se(n)){let s=this._cachedMeta;this._data=Vu(n,s)}else if(r!==n){if(r){_s(r,this);let s=this._cachedMeta;dn(s),s._parsed=[]}n&&Object.isExtensible(n)&&Sa(n,this),this._syncList=[],this._data=n}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let n=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=n._stacked;n._stacked=Ns(n.vScale,n),n.stack!==r.stack&&(s=!0,dn(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&(Ya(this,n._parsed),n._stacked=Ns(n.vScale,n))}configure(){let e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:l}=r,d=o.axis,m=e===0&&n===s.length?!0:r._sorted,h=e>0&&r._parsed[e-1],f,x,g;if(this._parsing===!1)r._parsed=s,r._sorted=!0,g=s;else{ve(s[e])?g=this.parseArrayData(r,s,e,n):se(s[e])?g=this.parseObjectData(r,s,e,n):g=this.parsePrimitiveData(r,s,e,n);let S=()=>x[d]===null||h&&x[d]<h[d];for(f=0;f<n;++f)r._parsed[f+e]=x=g[f],m&&(S()&&(m=!1),h=x);r._sorted=m}l&&Ya(this,g)}parsePrimitiveData(e,n,r,s){let{iScale:o,vScale:l}=e,d=o.axis,m=l.axis,h=o.getLabels(),f=o===l,x=new Array(s),g,S,w;for(g=0,S=s;g<S;++g)w=g+r,x[g]={[d]:f||o.parse(h[w],w),[m]:l.parse(n[w],w)};return x}parseArrayData(e,n,r,s){let{xScale:o,yScale:l}=e,d=new Array(s),m,h,f,x;for(m=0,h=s;m<h;++m)f=m+r,x=n[f],d[m]={x:o.parse(x[0],f),y:l.parse(x[1],f)};return d}parseObjectData(e,n,r,s){let{xScale:o,yScale:l}=e,{xAxisKey:d="x",yAxisKey:m="y"}=this._parsing,h=new Array(s),f,x,g,S;for(f=0,x=s;f<x;++f)g=f+r,S=n[g],h[f]={x:o.parse(Rt(S,d),g),y:l.parse(Rt(S,m),g)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){let s=this.chart,o=this._cachedMeta,l=n[e.axis],d={keys:Wl(s,!0),values:n._stacks[e.axis]._visualValues};return $a(d,l,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){let o=r[n.axis],l=o===null?NaN:o,d=s&&r._stacks[n.axis];s&&d&&(s.values=d,l=$a(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,l=s.length,d=this._getOtherScale(e),m=Nu(n,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:x}=Ou(d),g,S;function w(){S=s[g];let A=S[d.axis];return!Ee(S[e.axis])||f>A||x<A}for(g=0;g<l&&!(!w()&&(this.updateRangeFromParsed(h,e,S,m),o));++g);if(o){for(g=l-1;g>=0;--g)if(!w()){this.updateRangeFromParsed(h,e,S,m);break}}return h}getAllParsedValues(e){let n=this._cachedMeta._parsed,r=[],s,o,l;for(s=0,o=n.length;s<o;++s)l=n[s][e.axis],Ee(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){let n=this._cachedMeta;this.update(e||"default"),n._clip=Pu(Z(this.options.clip,Iu(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],o=n.chartArea,l=[],d=this._drawStart||0,m=this._drawCount||s.length-d,h=this.options.drawActiveElementsOnTop,f;for(r.dataset&&r.dataset.draw(e,o,d,m),f=d;f<d+m;++f){let x=s[f];x.hidden||(x.active&&h?l.push(x):x.draw(e,o))}for(f=0;f<l.length;++f)l[f].draw(e,o)}getStyle(e,n){let r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){let s=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let l=this._cachedMeta.data[e];o=l.$context||(l.$context=Hu(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=Ru(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){let s=n==="active",o=this._cachedDataOpts,l=e+"-"+n,d=o[l],m=this.enableOptionSharing&&Ri(r);if(d)return qa(d,m);let h=this.chart.config,f=h.datasetElementScopeKeys(this._type,e),x=s?[`${e}Hover`,"hover",e,""]:[e,""],g=h.getOptionScopes(this.getDataset(),f),S=Object.keys(ye.elements[e]),w=()=>this.getContext(r,s,n),A=h.resolveNamedOptions(g,S,w,x);return A.$shared&&(A.$shared=m,o[l]=Object.freeze(qa(A,m))),A}_resolveAnimations(e,n,r){let s=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,d=o[l];if(d)return d;let m;if(s.options.animation!==!1){let f=this.chart.config,x=f.datasetAnimationScopeKeys(this._type,n),g=f.getOptionScopes(this.getDataset(),x);m=f.createResolver(g,this.getContext(e,r,n))}let h=new Fr(s,m&&m.animations);return m&&m._cacheable&&(o[l]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||js(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){let r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:l}}updateElement(e,n,r,s){js(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!js(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;let o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let n=this._data,r=this._cachedMeta.data;for(let[d,m,h]of this._syncList)this[d](m,h);this._syncList=[];let s=r.length,o=n.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){let s=this._cachedMeta,o=s.data,l=e+n,d,m=h=>{for(h.length+=n,d=h.length-1;d>=l;d--)h[d]=h[d-n]};for(m(o),d=e;d<l;++d)o[d]=new this.dataElementType;this._parsing&&m(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(e,n);r._stacked&&dn(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);let r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i})();function Bu(i,t){if(!i._cache.$bar){let e=i.getMatchingVisibleMetas(t),n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=xs(n.sort((r,s)=>r-s))}return i._cache.$bar}function ju(i){let t=i.iScale,e=Bu(t,i.type),n=t._length,r,s,o,l,d=()=>{o===32767||o===-32768||(Ri(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),d();for(l=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),d();return n}function zu(i,t,e,n){let r=e.barThickness,s,o;return re(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[i]-s/2}}function Wu(i,t,e,n){let r=t.pixels,s=r[i],o=i>0?r[i-1]:null,l=i<r.length-1?r[i+1]:null,d=e.categoryPercentage;o===null&&(o=s-(l===null?t.end-t.start:l-s)),l===null&&(l=s+s-o);let m=s-(s-Math.min(o,l))/2*d;return{chunk:Math.abs(l-o)/2*d/n,ratio:e.barPercentage,start:m}}function Gu(i,t,e,n){let r=e.parse(i[0],n),s=e.parse(i[1],n),o=Math.min(r,s),l=Math.max(r,s),d=o,m=l;Math.abs(o)>Math.abs(l)&&(d=l,m=o),t[e.axis]=m,t._custom={barStart:d,barEnd:m,start:r,end:s,min:o,max:l}}function Gl(i,t,e,n){return ve(i)?Gu(i,t,e,n):t[e.axis]=e.parse(i,n),t}function Ka(i,t,e,n){let r=i.iScale,s=i.vScale,o=r.getLabels(),l=r===s,d=[],m,h,f,x;for(m=e,h=e+n;m<h;++m)x=t[m],f={},f[r.axis]=l||r.parse(o[m],m),d.push(Gl(x,f,s,m));return d}function zs(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function $u(i,t,e){return i!==0?gt(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Uu(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}function Yu(i,t,e,n){let r=t.borderSkipped,s={};if(!r){i.borderSkipped=s;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:l,reverse:d,top:m,bottom:h}=Uu(i);r==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=m:(e._bottom||0)===n?r=h:(s[Qa(h,o,l,d)]=!0,r=m)),s[Qa(r,o,l,d)]=!0,i.borderSkipped=s}function Qa(i,t,e,n){return n?(i=qu(i,t,e),i=Xa(i,e,t)):i=Xa(i,t,e),i}function qu(i,t,e){return i===t?e:i===e?t:i}function Xa(i,t,e){return i==="start"?t:i==="end"?e:i}function Ku(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}var Qu=(()=>{class i extends ai{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,r,s){return Ka(e,n,r,s)}parseArrayData(e,n,r,s){return Ka(e,n,r,s)}parseObjectData(e,n,r,s){let{iScale:o,vScale:l}=e,{xAxisKey:d="x",yAxisKey:m="y"}=this._parsing,h=o.axis==="x"?d:m,f=l.axis==="x"?d:m,x=[],g,S,w,A;for(g=r,S=r+s;g<S;++g)A=n[g],w={},w[o.axis]=o.parse(Rt(A,h),g),x.push(Gl(Rt(A,f),w,l,g));return x}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);let o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),l=o._custom,d=zs(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){let o=s==="reset",{index:l,_cachedMeta:{vScale:d}}=this,m=d.getBasePixel(),h=d.isHorizontal(),f=this._getRuler(),{sharedOptions:x,includeOptions:g}=this._getSharedOptions(n,s);for(let S=n;S<n+r;S++){let w=this.getParsed(S),A=o||re(w[d.axis])?{base:m,head:m}:this._calculateBarValuePixels(S),L=this._calculateBarIndexPixels(S,f),V=(w._stacks||{})[d.axis],N={horizontal:h,base:A.base,enableBorderRadius:!V||zs(w._custom)||l===V._top||l===V._bottom,x:h?A.head:L.center,y:h?L.center:A.head,height:h?L.size:Math.abs(A.size),width:h?Math.abs(A.size):L.size};g&&(N.options=x||this.resolveDataElementOptions(S,e[S].active?"active":s));let j=N.options||e[S].options;Yu(N,j,V,l),Ku(N,j,f.ratio),this.updateElement(e[S],S,N,s)}}_getStacks(e,n){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),o=r.options.stacked,l=[],d=this._cachedMeta.controller.getParsed(n),m=d&&d[r.axis],h=f=>{let x=f._parsed.find(S=>S[r.axis]===m),g=x&&x[f.vScale.axis];if(re(g)||isNaN(g))return!0};for(let f of s)if(!(n!==void 0&&h(f))&&((o===!1||l.indexOf(f.stack)===-1||o===void 0&&f.stack===void 0)&&l.push(f.stack),f.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){let e={},n=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)e[Z(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){let s=this._getStacks(e,r),o=n!==void 0?s.indexOf(n):-1;return o===-1?s.length-1:o}_getRuler(){let e=this.options,n=this._cachedMeta,r=n.iScale,s=[],o,l;for(o=0,l=n.data.length;o<l;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let d=e.barThickness;return{min:d||ju(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:d?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:o,minBarLength:l}}=this,d=o||0,m=this.getParsed(e),h=m._custom,f=zs(h),x=m[n.axis],g=0,S=r?this.applyStack(n,m,r):x,w,A;S!==x&&(g=S-x,S=x),f&&(x=h.barStart,S=h.barEnd-h.barStart,x!==0&&gt(x)!==gt(h.barEnd)&&(g=0),g+=x);let L=!re(o)&&!f?o:g,V=n.getPixelForValue(L);if(this.chart.getDataVisibility(e)?w=n.getPixelForValue(g+S):w=V,A=w-V,Math.abs(A)<l){A=$u(A,n,d)*l,x===d&&(V-=A/2);let N=n.getPixelForDecimal(0),j=n.getPixelForDecimal(1),R=Math.min(N,j),B=Math.max(N,j);V=Math.max(Math.min(V,B),R),w=V+A,r&&!f&&(m._stacks[n.axis]._visualValues[s]=n.getValueForPixel(w)-n.getValueForPixel(V))}if(V===n.getPixelForValue(d)){let N=gt(A)*n.getLineWidthForValue(d)/2;V+=N,A-=N}return{size:A,base:V,head:w,center:w+A/2}}_calculateBarIndexPixels(e,n){let r=n.scale,s=this.options,o=s.skipNull,l=Z(s.maxBarThickness,1/0),d,m,h=this._getAxisCount();if(n.grouped){let f=o?this._getStackCount(e):n.stackCount,x=s.barThickness==="flex"?Wu(e,n,s,f*h):zu(e,n,s,f*h),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,S=this._getAxis().indexOf(Z(g,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+S;d=x.start+x.chunk*w+x.chunk/2,m=Math.min(l,x.chunk*x.ratio)}else d=r.getPixelForValue(this.getParsed(e)[r.axis],e),m=Math.min(l,n.min*n.ratio);return{base:d-m/2,head:d+m/2,center:d,size:m}}draw(){let e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[n.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return i})(),Xu=(()=>{class i extends ai{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){let o=super.parsePrimitiveData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+r).radius;return o}parseArrayData(e,n,r,s){let o=super.parseArrayData(e,n,r,s);for(let l=0;l<o.length;l++){let d=n[r+l];o[l]._custom=Z(d[2],this.resolveDataElementOptions(l+r).radius)}return o}parseObjectData(e,n,r,s){let o=super.parseObjectData(e,n,r,s);for(let l=0;l<o.length;l++){let d=n[r+l];o[l]._custom=Z(d&&d.r&&+d.r,this.resolveDataElementOptions(l+r).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){let n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=n,l=this.getParsed(e),d=s.getLabelForValue(l.x),m=o.getLabelForValue(l.y),h=l._custom;return{label:r[e]||"",value:"("+d+", "+m+(h?", "+h:"")+")"}}update(e){let n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){let o=s==="reset",{iScale:l,vScale:d}=this._cachedMeta,{sharedOptions:m,includeOptions:h}=this._getSharedOptions(n,s),f=l.axis,x=d.axis;for(let g=n;g<n+r;g++){let S=e[g],w=!o&&this.getParsed(g),A={},L=A[f]=o?l.getPixelForDecimal(.5):l.getPixelForValue(w[f]),V=A[x]=o?d.getBasePixel():d.getPixelForValue(w[x]);A.skip=isNaN(L)||isNaN(V),h&&(A.options=m||this.resolveDataElementOptions(g,S.active?"active":s),o&&(A.options.radius=0)),this.updateElement(S,g,A,s)}}resolveDataElementOptions(e,n){let r=this.getParsed(e),s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return n!=="active"&&(s.radius=0),s.radius+=Z(r&&r._custom,o),s}}return i})();function Ju(i,t,e){let n=1,r=1,s=0,o=0;if(t<be){let l=i,d=l+t,m=Math.cos(l),h=Math.sin(l),f=Math.cos(d),x=Math.sin(d),g=(N,j,R)=>Ni(N,l,d,!0)?1:Math.max(j,j*e,R,R*e),S=(N,j,R)=>Ni(N,l,d,!0)?-1:Math.min(j,j*e,R,R*e),w=g(0,m,f),A=g(Ae,h,x),L=S(oe,m,f),V=S(oe+Ae,h,x);n=(w-L)/2,r=(A-V)/2,s=-(w+L)/2,o=-(A+V)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}var xo=(()=>{class i extends ai{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let n=e.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((o,l)=>{let m=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:s,lineWidth:m.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=m=>+r[m];if(se(r[e])){let{key:m="value"}=this._parsing;o=h=>+Rt(r[h],m)}let l,d;for(l=e,d=e+n;l<d;++l)s._parsed[l]=o(l)}}_getRotation(){return ut(this.options.rotation-90)}_getCircumference(){return ut(this.options.circumference)}_getRotationExtents(){let e=be,n=-be;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),l=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){let n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,d=Math.max((Math.min(r.width,r.height)-l)/2,0),m=Math.min(fa(this.options.cutout,d),1),h=this._getRingWeight(this.index),{circumference:f,rotation:x}=this._getRotationExtents(),{ratioX:g,ratioY:S,offsetX:w,offsetY:A}=Ju(x,f,m),L=(r.width-l)/g,V=(r.height-l)/S,N=Math.max(Math.min(L,V)/2,0),j=ms(this.options.radius,N),R=Math.max(j*m,0),B=(j-R)/this._getVisibleDatasetWeightTotal();this.offsetX=w*j,this.offsetY=A*j,s.total=this.calculateTotal(),this.outerRadius=j-B*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-B*h,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/be)}updateElements(e,n,r,s){let o=s==="reset",l=this.chart,d=l.chartArea,h=l.options.animation,f=(d.left+d.right)/2,x=(d.top+d.bottom)/2,g=o&&h.animateScale,S=g?0:this.innerRadius,w=g?0:this.outerRadius,{sharedOptions:A,includeOptions:L}=this._getSharedOptions(n,s),V=this._getRotation(),N;for(N=0;N<n;++N)V+=this._circumference(N,o);for(N=n;N<n+r;++N){let j=this._circumference(N,o),R=e[N],B={x:f+this.offsetX,y:x+this.offsetY,startAngle:V,endAngle:V+j,circumference:j,outerRadius:w,innerRadius:S};L&&(B.options=A||this.resolveDataElementOptions(N,R.active?"active":s)),V+=j,this.updateElement(R,N,B,s)}}calculateTotal(){let e=this._cachedMeta,n=e.data,r=0,s;for(s=0;s<n.length;s++){let o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){let n=this._cachedMeta.total;return n>0&&!isNaN(e)?be*(Math.abs(e)/n):0}getLabelAndValue(e){let n=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Bi(n._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0,r=this.chart,s,o,l,d,m;if(!e){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){l=r.getDatasetMeta(s),e=l.data,d=l.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)m=d.resolveDataElementOptions(s),m.borderAlign!=="inner"&&(n=Math.max(n,m.borderWidth||0,m.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){let o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Z(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i})(),Zu=(()=>{class i extends ai{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,l=this.chart._animationsDisabled,{start:d,count:m}=ys(n,s,l);this._drawStart=d,this._drawCount=m,ws(n)&&(d=0,m=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:h},e),this.updateElements(s,d,m,e)}updateElements(e,n,r,s){let o=s==="reset",{iScale:l,vScale:d,_stacked:m,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:x}=this._getSharedOptions(n,s),g=l.axis,S=d.axis,{spanGaps:w,segment:A}=this.options,L=hi(w)?w:Number.POSITIVE_INFINITY,V=this.chart._animationsDisabled||o||s==="none",N=n+r,j=e.length,R=n>0&&this.getParsed(n-1);for(let B=0;B<j;++B){let U=e[B],G=V?U:{};if(B<n||B>=N){G.skip=!0;continue}let q=this.getParsed(B),J=re(q[S]),ee=G[g]=l.getPixelForValue(q[g],B),te=G[S]=o||J?d.getBasePixel():d.getPixelForValue(m?this.applyStack(d,q,m):q[S],B);G.skip=isNaN(ee)||isNaN(te)||J,G.stop=B>0&&Math.abs(q[g]-R[g])>L,A&&(G.parsed=q,G.raw=h.data[B]),x&&(G.options=f||this.resolveDataElementOptions(B,U.active?"active":s)),V||this.updateElement(U,B,G,s),R=q}}getMaxOverflow(){let e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,l)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i})(),$l=(()=>{class i extends ai{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let n=e.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((o,l)=>{let m=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:s,lineWidth:m.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let n=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Bi(n._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,n,r,s){return Is.bind(this)(e,n,r,s)}update(e){let n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){let e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){let e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),l=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),d=(o-l)/e.getVisibleDatasetCount();this.outerRadius=o-d*this.index,this.innerRadius=this.outerRadius-d}updateElements(e,n,r,s){let o=s==="reset",l=this.chart,m=l.options.animation,h=this._cachedMeta.rScale,f=h.xCenter,x=h.yCenter,g=h.getIndexAngle(0)-.5*oe,S=g,w,A=360/this.countVisibleElements();for(w=0;w<n;++w)S+=this._computeAngle(w,s,A);for(w=n;w<n+r;w++){let L=e[w],V=S,N=S+this._computeAngle(w,s,A),j=l.getDataVisibility(w)?h.getDistanceFromCenterForValue(this.getParsed(w).r):0;S=N,o&&(m.animateScale&&(j=0),m.animateRotate&&(V=N=g));let R={x:f,y:x,innerRadius:0,outerRadius:j,startAngle:V,endAngle:N,options:this.resolveDataElementOptions(w,L.active?"active":s)};this.updateElement(L,w,R,s)}}countVisibleElements(){let e=this._cachedMeta,n=0;return e.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?ut(this.resolveDataElementOptions(e,n).angle||r):0}}return i})(),ep=(()=>{class i extends xo{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return i})(),tp=(()=>{class i extends ai{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return Is.bind(this)(e,n,r,s)}update(e){let n=this._cachedMeta,r=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(r.points=s,e!=="resize"){let l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0);let d={_loop:!0,_fullLoop:o.length===s.length,options:l};this.updateElement(r,void 0,d,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){let o=this._cachedMeta.rScale,l=s==="reset";for(let d=n;d<n+r;d++){let m=e[d],h=this.resolveDataElementOptions(d,m.active?"active":s),f=o.getPointPositionForValue(d,this.getParsed(d).r),x=l?o.xCenter:f.x,g=l?o.yCenter:f.y,S={x,y:g,angle:f.angle,skip:isNaN(x)||isNaN(g),options:h};this.updateElement(m,d,S,s)}}}return i})(),ip=(()=>{class i extends ai{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=n,l=this.getParsed(e),d=s.getLabelForValue(l.x),m=o.getLabelForValue(l.y);return{label:r[e]||"",value:"("+d+", "+m+")"}}update(e){let n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled,{start:o,count:l}=ys(n,r,s);if(this._drawStart=o,this._drawCount=l,ws(n)&&(o=0,l=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:d,_dataset:m}=n;d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!m._decimated,d.points=r;let h=this.resolveDatasetElementOptions(e);h.segment=this.options.segment,this.updateElement(d,void 0,{animated:!s,options:h},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,o,l,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,s){let o=s==="reset",{iScale:l,vScale:d,_stacked:m,_dataset:h}=this._cachedMeta,f=this.resolveDataElementOptions(n,s),x=this.getSharedOptions(f),g=this.includeOptions(s,x),S=l.axis,w=d.axis,{spanGaps:A,segment:L}=this.options,V=hi(A)?A:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||s==="none",j=n>0&&this.getParsed(n-1);for(let R=n;R<n+r;++R){let B=e[R],U=this.getParsed(R),G=N?B:{},q=re(U[w]),J=G[S]=l.getPixelForValue(U[S],R),ee=G[w]=o||q?d.getBasePixel():d.getPixelForValue(m?this.applyStack(d,U,m):U[w],R);G.skip=isNaN(J)||isNaN(ee)||q,G.stop=R>0&&Math.abs(U[S]-j[S])>V,L&&(G.parsed=U,G.raw=h.data[R]),g&&(G.options=x||this.resolveDataElementOptions(R,B.active?"active":s)),N||this.updateElement(B,R,G,s),j=U}this.updateSharedOptions(x,s,f)}getMaxOverflow(){let e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let d=0;for(let m=n.length-1;m>=0;--m)d=Math.max(d,n[m].size(this.resolveDataElementOptions(m))/2);return d>0&&d}let r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;let o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,l)/2}}return i})(),np=Object.freeze({__proto__:null,BarController:Qu,BubbleController:Xu,DoughnutController:xo,LineController:Zu,PieController:ep,PolarAreaController:$l,RadarController:tp,ScatterController:ip});function gi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Js=class i{static override(t){Object.assign(i.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return gi()}parse(){return gi()}format(){return gi()}add(){return gi()}diff(){return gi()}startOf(){return gi()}endOf(){return gi()}},rp={_date:Js};function sp(i,t,e,n){let{controller:r,data:s,_sorted:o}=i,l=r._cachedMeta.iScale,d=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&s.length){let m=l._reversePixels?ya:St;if(n){if(r._sharedOptions){let h=s[0],f=typeof h.getRange=="function"&&h.getRange(t);if(f){let x=m(s,t,e-f),g=m(s,t,e+f);return{lo:x.lo,hi:g.hi}}}}else{let h=m(s,t,e);if(d){let{vScale:f}=r._cachedMeta,{_parsed:x}=i,g=x.slice(0,h.lo+1).reverse().findIndex(w=>!re(w[f.axis]));h.lo-=Math.max(0,g);let S=x.slice(h.hi).findIndex(w=>!re(w[f.axis]));h.hi+=Math.max(0,S)}return h}}return{lo:0,hi:s.length-1}}function bn(i,t,e,n,r){let s=i.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,d=s.length;l<d;++l){let{index:m,data:h}=s[l],{lo:f,hi:x}=sp(s[l],t,o,r);for(let g=f;g<=x;++g){let S=h[g];S.skip||n(S,m,g)}}}function op(i){let t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,r){let s=t?Math.abs(n.x-r.x):0,o=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Ws(i,t,e,n,r){let s=[];return!r&&!i.isPointInArea(t)||bn(i,e,t,function(l,d,m){!r&&!Mt(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&s.push({element:l,datasetIndex:d,index:m})},!0),s}function ap(i,t,e,n){let r=[];function s(o,l,d){let{startAngle:m,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:f}=gs(o,{x:t.x,y:t.y});Ni(f,m,h)&&r.push({element:o,datasetIndex:l,index:d})}return bn(i,e,t,s),r}function lp(i,t,e,n,r,s){let o=[],l=op(e),d=Number.POSITIVE_INFINITY;function m(h,f,x){let g=h.inRange(t.x,t.y,r);if(n&&!g)return;let S=h.getCenterPoint(r);if(!(!!s||i.isPointInArea(S))&&!g)return;let A=l(t,S);A<d?(o=[{element:h,datasetIndex:f,index:x}],d=A):A===d&&o.push({element:h,datasetIndex:f,index:x})}return bn(i,e,t,m),o}function Gs(i,t,e,n,r,s){return!s&&!i.isPointInArea(t)?[]:e==="r"&&!n?ap(i,t,e,r):lp(i,t,e,n,r,s)}function Ja(i,t,e,n,r){let s=[],o=e==="x"?"inXRange":"inYRange",l=!1;return bn(i,e,t,(d,m,h)=>{d[o]&&d[o](t[e],r)&&(s.push({element:d,datasetIndex:m,index:h}),l=l||d.inRange(t.x,t.y,r))}),n&&!l?[]:s}var cp={evaluateInteractionItems:bn,modes:{index(i,t,e,n){let r=si(t,i),s=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?Ws(i,r,s,n,o):Gs(i,r,s,!1,n,o),d=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(m=>{let h=l[0].index,f=m.data[h];f&&!f.skip&&d.push({element:f,datasetIndex:m.index,index:h})}),d):[]},dataset(i,t,e,n){let r=si(t,i),s=e.axis||"xy",o=e.includeInvisible||!1,l=e.intersect?Ws(i,r,s,n,o):Gs(i,r,s,!1,n,o);if(l.length>0){let d=l[0].datasetIndex,m=i.getDatasetMeta(d).data;l=[];for(let h=0;h<m.length;++h)l.push({element:m[h],datasetIndex:d,index:h})}return l},point(i,t,e,n){let r=si(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;return Ws(i,r,s,n,o)},nearest(i,t,e,n){let r=si(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;return Gs(i,r,s,e.intersect,n,o)},x(i,t,e,n){let r=si(t,i);return Ja(i,r,"x",e.intersect,n)},y(i,t,e,n){let r=si(t,i);return Ja(i,r,"y",e.intersect,n)}}},Ul=["left","top","right","bottom"];function mn(i,t){return i.filter(e=>e.pos===t)}function Za(i,t){return i.filter(e=>Ul.indexOf(e.pos)===-1&&e.box.axis===t)}function un(i,t){return i.sort((e,n)=>{let r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function dp(i){let t=[],e,n,r,s,o,l;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],{position:s,options:{stack:o,stackWeight:l=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return t}function mp(i){let t={};for(let e of i){let{stack:n,pos:r,stackWeight:s}=e;if(!n||!Ul.includes(r))continue;let o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function up(i,t){let e=mp(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t,s,o,l;for(s=0,o=i.length;s<o;++s){l=i[s];let{fullSize:d}=l.box,m=e[l.stack],h=m&&l.stackWeight/m.weight;l.horizontal?(l.width=h?h*n:d&&t.availableWidth,l.height=r):(l.width=n,l.height=h?h*r:d&&t.availableHeight)}return e}function pp(i){let t=dp(i),e=un(t.filter(m=>m.box.fullSize),!0),n=un(mn(t,"left"),!0),r=un(mn(t,"right")),s=un(mn(t,"top"),!0),o=un(mn(t,"bottom")),l=Za(t,"x"),d=Za(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(d).concat(o).concat(l),chartArea:mn(t,"chartArea"),vertical:n.concat(r).concat(d),horizontal:s.concat(o).concat(l)}}function el(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function Yl(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function hp(i,t,e,n){let{pos:r,box:s}=e,o=i.maxPadding;if(!se(r)){e.size&&(i[r]-=e.size);let f=n[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?s.height:s.width),e.size=f.size/f.count,i[r]+=e.size}s.getPadding&&Yl(o,s.getPadding());let l=Math.max(0,t.outerWidth-el(o,i,"left","right")),d=Math.max(0,t.outerHeight-el(o,i,"top","bottom")),m=l!==i.w,h=d!==i.h;return i.w=l,i.h=d,e.horizontal?{same:m,other:h}:{same:h,other:m}}function fp(i){let t=i.maxPadding;function e(n){let r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function gp(i,t){let e=t.maxPadding;function n(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return n(i?["left","right"]:["top","bottom"])}function fn(i,t,e,n){let r=[],s,o,l,d,m,h;for(s=0,o=i.length,m=0;s<o;++s){l=i[s],d=l.box,d.update(l.width||t.w,l.height||t.h,gp(l.horizontal,t));let{same:f,other:x}=hp(t,e,l,n);m|=f&&r.length,h=h||x,d.fullSize||r.push(l)}return m&&fn(r,t,e,n)||h}function Ar(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function tl(i,t,e,n){let r=e.padding,{x:s,y:o}=t;for(let l of i){let d=l.box,m=n[l.stack]||{count:1,placed:0,weight:1},h=l.stackWeight/m.weight||1;if(l.horizontal){let f=t.w*h,x=m.size||d.height;Ri(m.start)&&(o=m.start),d.fullSize?Ar(d,r.left,o,e.outerWidth-r.right-r.left,x):Ar(d,t.left+m.placed,o,f,x),m.start=o,m.placed+=f,o=d.bottom}else{let f=t.h*h,x=m.size||d.width;Ri(m.start)&&(s=m.start),d.fullSize?Ar(d,s,r.top,x,e.outerHeight-r.bottom-r.top):Ar(d,s,t.top+m.placed,x,f),m.start=s,m.placed+=f,s=d.right}}t.x=s,t.y=o}var Ke={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){let e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;let r=je(i.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),l=pp(i.boxes),d=l.vertical,m=l.horizontal;pe(i.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});let h=d.reduce((w,A)=>A.box.options&&A.box.options.display===!1?w:w+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),x=Object.assign({},r);Yl(x,je(n));let g=Object.assign({maxPadding:x,w:s,h:o,x:r.left,y:r.top},r),S=up(d.concat(m),f);fn(l.fullSize,g,f,S),fn(d,g,f,S),fn(m,g,f,S)&&fn(d,g,f,S),fp(g),tl(l.leftAndTop,g,f,S),g.x+=g.w,g.y+=g.h,tl(l.rightAndBottom,g,f,S),i.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},pe(l.chartArea,w=>{let A=w.box;Object.assign(A,i.chartArea),A.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},Rr=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}},Zs=class extends Rr{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Lr="$chartjs",_p={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},il=i=>i===null||i==="";function xp(i,t){let e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[Lr]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",il(r)){let s=Vs(i,"width");s!==void 0&&(i.width=s)}if(il(n))if(i.style.height==="")i.height=i.width/(t||2);else{let s=Vs(i,"height");s!==void 0&&(i.height=s)}return i}var ql=Ha?{passive:!0}:!1;function vp(i,t,e){i&&i.addEventListener(t,e,ql)}function bp(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,ql)}function yp(i,t){let e=_p[i.type]||i.type,{x:n,y:r}=si(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Hr(i,t){for(let e of i)if(e===t||e.contains(t))return!0}function wp(i,t,e){let n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(let l of s)o=o||Hr(l.addedNodes,n),o=o&&!Hr(l.removedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Cp(i,t,e){let n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(let l of s)o=o||Hr(l.removedNodes,n),o=o&&!Hr(l.addedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}var _n=new Map,nl=0;function Kl(){let i=window.devicePixelRatio;i!==nl&&(nl=i,_n.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function Sp(i,t){_n.size||window.addEventListener("resize",Kl),_n.set(i,t)}function Mp(i){_n.delete(i),_n.size||window.removeEventListener("resize",Kl)}function kp(i,t,e){let n=i.canvas,r=n&&kr(n);if(!r)return;let s=bs((l,d)=>{let m=r.clientWidth;e(l,d),m<r.clientWidth&&e()},window),o=new ResizeObserver(l=>{let d=l[0],m=d.contentRect.width,h=d.contentRect.height;m===0&&h===0||s(m,h)});return o.observe(r),Sp(i,s),o}function $s(i,t,e){e&&e.disconnect(),t==="resize"&&Mp(i)}function Ep(i,t,e){let n=i.canvas,r=bs(s=>{i.ctx!==null&&e(yp(s,i))},i);return vp(n,t,r),r}var eo=class extends Rr{acquireContext(t,e){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(xp(t,e),n):null}releaseContext(t){let e=t.canvas;if(!e[Lr])return!1;let n=e[Lr].initial;["height","width"].forEach(s=>{let o=n[s];re(o)?e.removeAttribute(s):e.setAttribute(s,o)});let r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[Lr],!0}addEventListener(t,e,n){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),o={attach:wp,detach:Cp,resize:kp}[e]||Ep;r[e]=o(t,e,n)}removeEventListener(t,e){let n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:$s,detach:$s,resize:$s}[e]||bp)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return Ra(t,e,n,r)}isAttached(t){let e=t&&kr(t);return!!(e&&e.isConnected)}};function Ap(i){return!Mr()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Zs:eo}var _t=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return hi(this.x)&&hi(this.y)}getProps(t,e){let n=this.$animations;if(!e||!n)return this;let r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}};function Dp(i,t){let e=i.options.ticks,n=Tp(i),r=Math.min(e.maxTicksLimit||n,n),s=e.major.enabled?Pp(t):[],o=s.length,l=s[0],d=s[o-1],m=[];if(o>r)return Vp(t,m,s,o/r),m;let h=Ip(s,t,r);if(o>0){let f,x,g=o>1?Math.round((d-l)/(o-1)):null;for(Dr(t,m,h,re(g)?0:l-g,l),f=0,x=o-1;f<x;f++)Dr(t,m,h,s[f],s[f+1]);return Dr(t,m,h,d,re(g)?t.length:d+g),m}return Dr(t,m,h),m}function Tp(i){let t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),r=i._maxLength/e;return Math.floor(Math.min(n,r))}function Ip(i,t,e){let n=Lp(i),r=t.length/e;if(!n)return Math.max(r,1);let s=xa(n);for(let o=0,l=s.length-1;o<l;o++){let d=s[o];if(d>r)return d}return Math.max(r,1)}function Pp(i){let t=[],e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function Vp(i,t,e,n){let r=0,s=e[0],o;for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(t.push(i[o]),r++,s=e[r*n])}function Dr(i,t,e,n,r){let s=Z(n,0),o=Math.min(Z(r,i.length),i.length),l=0,d,m,h;for(e=Math.ceil(e),r&&(d=r-n,e=d/Math.floor(d/e)),h=s;h<0;)l++,h=Math.round(s+l*e);for(m=Math.max(s,0);m<o;m++)m===h&&(t.push(i[m]),l++,h=Math.round(s+l*e))}function Lp(i){let t=i.length,e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}var Op=i=>i==="left"?"right":i==="right"?"left":i,rl=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,sl=(i,t)=>Math.min(t||i,i);function ol(i,t){let e=[],n=i.length/t,r=i.length,s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function Fp(i,t,e){let n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,o=i._endPixel,l=1e-6,d=i.getPixelForTick(r),m;if(!(e&&(n===1?m=Math.max(d-s,o-d):t===0?m=(i.getPixelForTick(1)-d)/2:m=(d-i.getPixelForTick(r-1))/2,d+=r<t?m:-m,d<s-l||d>o+l)))return d}function Rp(i,t){pe(i,e=>{let n=e.gc,r=n.length/2,s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}function pn(i){return i.drawTicks?i.tickLength:0}function al(i,t){if(!i.display)return 0;let e=Le(i.font,t),n=je(i.padding);return(ve(i.text)?i.text.length:1)*e.lineHeight+n.height}function Hp(i,t){return Ht(i,{scale:t,type:"scale"})}function Np(i,t,e){return Ht(i,{tick:e,index:t,type:"tick"})}function Bp(i,t,e){let n=br(i);return(e&&t!=="right"||!e&&t==="right")&&(n=Op(n)),n}function jp(i,t,e,n){let{top:r,left:s,bottom:o,right:l,chart:d}=i,{chartArea:m,scales:h}=d,f=0,x,g,S,w=o-r,A=l-s;if(i.isHorizontal()){if(g=Be(n,s,l),se(e)){let L=Object.keys(e)[0],V=e[L];S=h[L].getPixelForValue(V)+w-t}else e==="center"?S=(m.bottom+m.top)/2+w-t:S=rl(i,e,t);x=l-s}else{if(se(e)){let L=Object.keys(e)[0],V=e[L];g=h[L].getPixelForValue(V)-A+t}else e==="center"?g=(m.left+m.right)/2-A+t:g=rl(i,e,t);S=Be(n,o,r),f=e==="left"?-Ae:Ae}return{titleX:g,titleY:S,maxWidth:x,rotation:f}}var xi=class i extends _t{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=rt(t,Number.POSITIVE_INFINITY),e=rt(e,Number.NEGATIVE_INFINITY),n=rt(n,Number.POSITIVE_INFINITY),r=rt(r,Number.NEGATIVE_INFINITY),{min:rt(t,n),max:rt(e,r),minDefined:Ee(t),maxDefined:Ee(e)}}getMinMax(t){let{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:n};let l=this.getMatchingVisibleMetas();for(let d=0,m=l.length;d<m;++d)o=l[d].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(n=Math.max(n,o.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:rt(e,rt(n,e)),max:rt(n,rt(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_e(this.options.beforeUpdate,[this])}update(t,e,n){let{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ia(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let d=l<this.ticks.length;this._convertTicksToLabels(d?ol(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Dp(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_e(this.options.afterUpdate,[this])}beforeSetDimensions(){_e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_e(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_e(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=_e(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){_e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,n=sl(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation,o=r,l,d,m;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal()){this.labelRotation=r;return}let h=this._getLabelSizes(),f=h.widest.width,x=h.highest.height,g=Fe(this.chart.width-f,0,this.maxWidth);l=t.offset?this.maxWidth/n:g/(n-1),f+6>l&&(l=g/(n-(t.offset?.5:1)),d=this.maxHeight-pn(t.grid)-e.padding-al(t.title,this.chart.options.font),m=Math.sqrt(f*f+x*x),o=xr(Math.min(Math.asin(Fe((h.highest.height+6)/l,-1,1)),Math.asin(Fe(d/m,-1,1))-Math.asin(Fe(x/m,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){_e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_e(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){let d=al(r,e.options.font);if(l?(t.width=this.maxWidth,t.height=pn(s)+d):(t.height=this.maxHeight,t.width=pn(s)+d),n.display&&this.ticks.length){let{first:m,last:h,widest:f,highest:x}=this._getLabelSizes(),g=n.padding*2,S=ut(this.labelRotation),w=Math.cos(S),A=Math.sin(S);if(l){let L=n.mirror?0:A*f.width+w*x.height;t.height=Math.min(this.maxHeight,t.height+L+g)}else{let L=n.mirror?0:w*f.width+A*x.height;t.width=Math.min(this.maxWidth,t.width+L+g)}this._calculatePadding(m,h,A,w)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){let{ticks:{align:s,padding:o},position:l}=this.options,d=this.labelRotation!==0,m=l!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),x=0,g=0;d?m?(x=r*t.width,g=n*e.height):(x=n*t.height,g=r*e.width):s==="start"?g=e.width:s==="end"?x=t.width:s!=="inner"&&(x=t.width/2,g=e.width/2),this.paddingLeft=Math.max((x-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let h=e.height/2,f=t.height/2;s==="start"?(h=0,f=t.height):s==="end"&&(h=e.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_e(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)re(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,n=this.ticks;e<n.length&&(n=ol(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){let{ctx:r,_longestTextCache:s}=this,o=[],l=[],d=Math.floor(e/sl(e,n)),m=0,h=0,f,x,g,S,w,A,L,V,N,j,R;for(f=0;f<e;f+=d){if(S=t[f].label,w=this._resolveTickFontOptions(f),r.font=A=w.string,L=s[A]=s[A]||{data:{},gc:[]},V=w.lineHeight,N=j=0,!re(S)&&!ve(S))N=sn(r,L.data,L.gc,N,S),j=V;else if(ve(S))for(x=0,g=S.length;x<g;++x)R=S[x],!re(R)&&!ve(R)&&(N=sn(r,L.data,L.gc,N,R),j+=V);o.push(N),l.push(j),m=Math.max(N,m),h=Math.max(j,h)}Rp(s,e);let B=o.indexOf(m),U=l.indexOf(h),G=q=>({width:o[q]||0,height:l[q]||0});return{first:G(0),last:G(e-1),widest:G(B),highest:G(U),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return ba(this._alignToPixels?ii(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let n=e[t];return n.$context||(n.$context=Np(this.getContext(),t,n))}return this.$context||(this.$context=Hp(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=ut(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,l=s?s.widest.width+o:0,d=s?s.highest.height+o:0;return this.isHorizontal()?d*n>l*r?l/n:d/r:d*r<l*n?d/n:l/r}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,n=this.chart,r=this.options,{grid:s,position:o,border:l}=r,d=s.offset,m=this.isHorizontal(),f=this.ticks.length+(d?1:0),x=pn(s),g=[],S=l.setContext(this.getContext()),w=S.display?S.width:0,A=w/2,L=function(xe){return ii(n,xe,w)},V,N,j,R,B,U,G,q,J,ee,te,we;if(o==="top")V=L(this.bottom),U=this.bottom-x,q=V-A,ee=L(t.top)+A,we=t.bottom;else if(o==="bottom")V=L(this.top),ee=t.top,we=L(t.bottom)-A,U=V+A,q=this.top+x;else if(o==="left")V=L(this.right),B=this.right-x,G=V-A,J=L(t.left)+A,te=t.right;else if(o==="right")V=L(this.left),J=t.left,te=L(t.right)-A,B=V+A,G=this.left+x;else if(e==="x"){if(o==="center")V=L((t.top+t.bottom)/2+.5);else if(se(o)){let xe=Object.keys(o)[0],Se=o[xe];V=L(this.chart.scales[xe].getPixelForValue(Se))}ee=t.top,we=t.bottom,U=V+A,q=U+x}else if(e==="y"){if(o==="center")V=L((t.left+t.right)/2);else if(se(o)){let xe=Object.keys(o)[0],Se=o[xe];V=L(this.chart.scales[xe].getPixelForValue(Se))}B=V-A,G=B-x,J=t.left,te=t.right}let Qe=Z(r.ticks.maxTicksLimit,f),le=Math.max(1,Math.ceil(f/Qe));for(N=0;N<f;N+=le){let xe=this.getContext(N),Se=s.setContext(xe),Je=l.setContext(xe),Oe=Se.lineWidth,jt=Se.color,zt=Je.dash||[],Wt=Je.dashOffset,li=Se.tickWidth,Tt=Se.tickColor,pt=Se.tickBorderDash||[],ht=Se.tickBorderDashOffset;j=Fp(this,N,d),j!==void 0&&(R=ii(n,j,Oe),m?B=G=J=te=R:U=q=ee=we=R,g.push({tx1:B,ty1:U,tx2:G,ty2:q,x1:J,y1:ee,x2:te,y2:we,width:Oe,color:jt,borderDash:zt,borderDashOffset:Wt,tickWidth:li,tickColor:Tt,tickBorderDash:pt,tickBorderDashOffset:ht}))}return this._ticksLength=f,this._borderValue=V,g}_computeLabelItems(t){let e=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),l=this.ticks,{align:d,crossAlign:m,padding:h,mirror:f}=s,x=pn(n.grid),g=x+h,S=f?-h:g,w=-ut(this.labelRotation),A=[],L,V,N,j,R,B,U,G,q,J,ee,te,we="middle";if(r==="top")B=this.bottom-S,U=this._getXAxisLabelAlignment();else if(r==="bottom")B=this.top+S,U=this._getXAxisLabelAlignment();else if(r==="left"){let le=this._getYAxisLabelAlignment(x);U=le.textAlign,R=le.x}else if(r==="right"){let le=this._getYAxisLabelAlignment(x);U=le.textAlign,R=le.x}else if(e==="x"){if(r==="center")B=(t.top+t.bottom)/2+g;else if(se(r)){let le=Object.keys(r)[0],xe=r[le];B=this.chart.scales[le].getPixelForValue(xe)+g}U=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")R=(t.left+t.right)/2-g;else if(se(r)){let le=Object.keys(r)[0],xe=r[le];R=this.chart.scales[le].getPixelForValue(xe)}U=this._getYAxisLabelAlignment(x).textAlign}e==="y"&&(d==="start"?we="top":d==="end"&&(we="bottom"));let Qe=this._getLabelSizes();for(L=0,V=l.length;L<V;++L){N=l[L],j=N.label;let le=s.setContext(this.getContext(L));G=this.getPixelForTick(L)+s.labelOffset,q=this._resolveTickFontOptions(L),J=q.lineHeight,ee=ve(j)?j.length:1;let xe=ee/2,Se=le.color,Je=le.textStrokeColor,Oe=le.textStrokeWidth,jt=U;o?(R=G,U==="inner"&&(L===V-1?jt=this.options.reverse?"left":"right":L===0?jt=this.options.reverse?"right":"left":jt="center"),r==="top"?m==="near"||w!==0?te=-ee*J+J/2:m==="center"?te=-Qe.highest.height/2-xe*J+J:te=-Qe.highest.height+J/2:m==="near"||w!==0?te=J/2:m==="center"?te=Qe.highest.height/2-xe*J:te=Qe.highest.height-ee*J,f&&(te*=-1),w!==0&&!le.showLabelBackdrop&&(R+=J/2*Math.sin(w))):(B=G,te=(1-ee)*J/2);let zt;if(le.showLabelBackdrop){let Wt=je(le.backdropPadding),li=Qe.heights[L],Tt=Qe.widths[L],pt=te-Wt.top,ht=0-Wt.left;switch(we){case"middle":pt-=li/2;break;case"bottom":pt-=li;break}switch(U){case"center":ht-=Tt/2;break;case"right":ht-=Tt;break;case"inner":L===V-1?ht-=Tt:L>0&&(ht-=Tt/2);break}zt={left:ht,top:pt,width:Tt+Wt.width,height:li+Wt.height,color:le.backdropColor}}A.push({label:j,font:q,textOffset:te,options:{rotation:w,color:Se,strokeColor:Je,strokeWidth:Oe,textAlign:jt,textBaseline:we,translation:[R,B],backdrop:zt}})}return A}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-ut(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),l=t+s,d=o.widest.width,m,h;return e==="left"?r?(h=this.right+s,n==="near"?m="left":n==="center"?(m="center",h+=d/2):(m="right",h+=d)):(h=this.right-l,n==="near"?m="right":n==="center"?(m="center",h-=d/2):(m="left",h=this.left)):e==="right"?r?(h=this.left+s,n==="near"?m="right":n==="center"?(m="center",h-=d/2):(m="left",h-=d)):(h=this.left+l,n==="near"?m="left":n==="center"?(m="center",h+=d/2):(m="right",h=this.right)):m="right",{textAlign:m,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){let e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,o,l=(d,m,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(d.x,d.y),n.lineTo(m.x,m.y),n.stroke(),n.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){let d=r[s];e.drawOnChartArea&&l({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&l({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),o=n.display?s.width:0;if(!o)return;let l=r.setContext(this.getContext(0)).lineWidth,d=this._borderValue,m,h,f,x;this.isHorizontal()?(m=ii(t,this.left,o)-o/2,h=ii(t,this.right,l)+l/2,f=x=d):(f=ii(t,this.top,o)-o/2,x=ii(t,this.bottom,l)+l/2,m=h=d),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(m,f),e.lineTo(h,x),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,r=this._computeLabelArea();r&&ln(n,r);let s=this.getLabelItems(t);for(let o of s){let l=o.options,d=o.font,m=o.label,h=o.textOffset;ni(n,m,0,h,d,l)}r&&cn(n)}drawTitle(){let{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;let s=Le(n.font),o=je(n.padding),l=n.align,d=s.lineHeight/2;e==="bottom"||e==="center"||se(e)?(d+=o.bottom,ve(n.text)&&(d+=s.lineHeight*(n.text.length-1))):d+=o.top;let{titleX:m,titleY:h,maxWidth:f,rotation:x}=jp(this,d,e,l);ni(t,n.text,0,0,s,{color:n.color,maxWidth:f,rotation:x,textAlign:Bp(l,e,r),textBaseline:"middle",translation:[m,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,n=Z(t.grid&&t.grid.z,-1),r=Z(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[],s,o;for(s=0,o=e.length;s<o;++s){let l=e[s];l[n]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Le(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Gi=class{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),n;Gp(e)&&(n=this.register(e));let r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,zp(t,o,n),this.override&&ye.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in ye[r]&&(delete ye[r][n],this.override&&delete ti[n])}};function zp(i,t,e){let n=Li(Object.create(null),[e?ye.get(e):{},ye.get(t),i.defaults]);ye.set(t,n),i.defaultRoutes&&Wp(t,i.defaultRoutes),i.descriptors&&ye.describe(t,i.descriptors)}function Wp(i,t){Object.keys(t).forEach(e=>{let n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),o=t[e].split("."),l=o.pop(),d=o.join(".");ye.route(s,r,d,l)})}function Gp(i){return"id"in i&&"defaults"in i}var to=class{constructor(){this.controllers=new Gi(ai,"datasets",!0),this.elements=new Gi(_t,"elements"),this.plugins=new Gi(Object,"plugins"),this.scales=new Gi(xi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{let s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):pe(r,o=>{let l=n||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,n){let r=_r(t);_e(n["before"+r],[],n),e[t](n),_e(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){let r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return r}},Dt=new to,io=class{constructor(){this._init=[]}notify(t,e,n,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,n);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(let s of t){let o=s.plugin,l=o[n],d=[e,r,s.options];if(_e(l,d,o)===!1&&r.cancelable)return!1}return!0}invalidate(){re(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let n=t&&t.config,r=Z(n.options&&n.options.plugins,{}),s=$p(n);return r===!1&&!e?[]:Yp(t,s,r,e)}_notifyStateChanges(t){let e=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(l=>!o.some(d=>l.plugin.id===d.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}};function $p(i){let t={},e=[],n=Object.keys(Dt.plugins.items);for(let s=0;s<n.length;s++)e.push(Dt.getPlugin(n[s]));let r=i.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Up(i,t){return!t&&i===!1?null:i===!0?{}:i}function Yp(i,{plugins:t,localIds:e},n,r){let s=[],o=i.getContext();for(let l of t){let d=l.id,m=Up(n[d],r);m!==null&&s.push({plugin:l,options:qp(i.config,{plugin:l,local:e[d]},m,o)})}return s}function qp(i,{plugin:t,local:e},n,r){let s=i.pluginScopeKeys(t),o=i.getOptionScopes(n,s);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function no(i,t){let e=ye.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Kp(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Qp(i,t){return i===t?"_index_":"_value_"}function ll(i){if(i==="x"||i==="y"||i==="r")return i}function Xp(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function ro(i,...t){if(ll(i))return i;for(let e of t){let n=e.axis||Xp(e.position)||i.length>1&&ll(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function cl(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Jp(i,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return cl(i,"x",e[0])||cl(i,"y",e[0])}return{}}function Zp(i,t){let e=ti[i.type]||{scales:{}},n=t.scales||{},r=no(i.type,t),s=Object.create(null);return Object.keys(n).forEach(o=>{let l=n[o];if(!se(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let d=ro(o,l,Jp(o,i),ye.scales[l.type]),m=Qp(d,r),h=e.scales||{};s[o]=Fi(Object.create(null),[{axis:d},l,h[d],h[m]])}),i.data.datasets.forEach(o=>{let l=o.type||i.type,d=o.indexAxis||no(l,t),h=(ti[l]||{}).scales||{};Object.keys(h).forEach(f=>{let x=Kp(f,d),g=o[x+"AxisID"]||x;s[g]=s[g]||Object.create(null),Fi(s[g],[{axis:x},n[g],h[f]])})}),Object.keys(s).forEach(o=>{let l=s[o];Fi(l,[ye.scales[l.type],ye.scale])}),s}function Ql(i){let t=i.options||(i.options={});t.plugins=Z(t.plugins,{}),t.scales=Zp(i,t)}function Xl(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function eh(i){return i=i||{},i.data=Xl(i.data),Ql(i),i}var dl=new Map,Jl=new Set;function Tr(i,t){let e=dl.get(i);return e||(e=t(),dl.set(i,e),Jl.add(e)),e}var hn=(i,t,e)=>{let n=Rt(t,e);n!==void 0&&i.add(n)},so=class{constructor(t){this._config=eh(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Xl(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Ql(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Tr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Tr(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Tr(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,n=this.type;return Tr(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let n=this._scopeCache,r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){let{options:r,type:s}=this,o=this._cachedScopes(t,n),l=o.get(e);if(l)return l;let d=new Set;e.forEach(h=>{t&&(d.add(t),h.forEach(f=>hn(d,t,f))),h.forEach(f=>hn(d,r,f)),h.forEach(f=>hn(d,ti[s]||{},f)),h.forEach(f=>hn(d,ye,f)),h.forEach(f=>hn(d,yr,f))});let m=Array.from(d);return m.length===0&&m.push(Object.create(null)),Jl.has(e)&&o.set(e,m),m}chartOptionScopes(){let{options:t,type:e}=this;return[t,ti[e]||{},ye.datasets[e]||{},{type:e},ye,yr]}resolveNamedOptions(t,e,n,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:l}=ml(this._resolverCache,t,r),d=o;if(ih(o,e)){s.$shared=!1,n=Ot(n)?n():n;let m=this.createResolver(t,n,l);d=pi(o,n,m)}for(let m of e)s[m]=d[m];return s}createResolver(t,e,n=[""],r){let{resolver:s}=ml(this._resolverCache,t,n);return se(e)?pi(s,e,void 0,r):s}};function ml(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));let r=e.join(),s=n.get(r);return s||(s={resolver:Sr(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,s)),s}var th=i=>se(i)&&Object.getOwnPropertyNames(i).some(t=>Ot(i[t]));function ih(i,t){let{isScriptable:e,isIndexable:n}=As(i);for(let r of t){let s=e(r),o=n(r),l=(o||s)&&i[r];if(s&&(Ot(l)||th(l))||o&&ve(l))return!0}return!1}var nh="4.5.0",rh=["top","bottom","left","right","chartArea"];function ul(i,t){return i==="top"||i==="bottom"||rh.indexOf(i)===-1&&t==="x"}function pl(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function hl(i){let t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),_e(e&&e.onComplete,[i],t)}function sh(i){let t=i.chart,e=t.options.animation;_e(e&&e.onProgress,[i],t)}function Zl(i){return Mr()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var Or={},fl=i=>{let t=Zl(i);return Object.values(Or).filter(e=>e.canvas===t).pop()};function oh(i,t,e){let n=Object.keys(i);for(let r of n){let s=+r;if(s>=t){let o=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=o)}}}function ah(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}var yn=(()=>{class i{static defaults=ye;static instances=Or;static overrides=ti;static registry=Dt;static version=nh;static getChart=fl;static register(...e){Dt.add(...e),gl()}static unregister(...e){Dt.remove(...e),gl()}constructor(e,n){let r=this.config=new so(n),s=Zl(e),o=fl(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Ap(s)),this.platform.updateConfig(r);let d=this.platform.acquireContext(s,l.aspectRatio),m=d&&d.canvas,h=m&&m.height,f=m&&m.width;if(this.id=ha(),this.ctx=d,this.canvas=m,this.width=f,this.height=h,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new io,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ma(x=>this.update(x),l.resizeDelay||0),this._dataChanges=[],Or[this.id]=this,!d||!m){console.error("Failed to create chart: can't acquire context from the given item");return}Nt.listen(this,"complete",hl),Nt.listen(this,"progress",sh),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:o}=this;return re(e)?n&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Dt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ps(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ms(this.canvas,this.ctx),this}stop(){return Nt.stop(this),this}resize(e,n){Nt.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,e,n,o),d=r.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Ps(this,d,!0)&&(this.notifyPlugins("resize",{size:l}),_e(r.onResize,[this,l],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){let n=this.options.scales||{};pe(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){let e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((l,d)=>(l[d]=!1,l),{}),o=[];n&&(o=o.concat(Object.keys(n).map(l=>{let d=n[l],m=ro(l,d),h=m==="r",f=m==="x";return{options:d,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),pe(o,l=>{let d=l.options,m=d.id,h=ro(m,d),f=Z(d.type,l.dtype);(d.position===void 0||ul(d.position,h)!==ul(l.dposition))&&(d.position=l.dposition),s[m]=!0;let x=null;if(m in r&&r[m].type===f)x=r[m];else{let g=Dt.getScale(f);x=new g({id:m,type:f,ctx:this.ctx,chart:this}),r[x.id]=x}x.init(d,e)}),pe(s,(l,d)=>{l||delete r[d]}),pe(r,l=>{Ke.configure(this,l,l.options),Ke.addBox(this,l)})}_updateMetasets(){let e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(pl("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let e=[],n=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){let o=n[r],l=this.getDatasetMeta(r),d=o.type||this.config.type;if(l.type&&l.type!==d&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=d,l.indexAxis=o.indexAxis||no(d,this.options),l.order=o.order||0,l.index=r,l.label=""+o.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{let m=Dt.getController(d),{datasetElementType:h,dataElementType:f}=ye.datasets[d];Object.assign(m,{dataElementType:Dt.getElement(f),datasetElementType:h&&Dt.getElement(h)}),l.controller=new m(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){pe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let n=this.config;n.update();let r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let h=0,f=this.data.datasets.length;h<f;h++){let{controller:x}=this.getDatasetMeta(h),g=!s&&o.indexOf(x)===-1;x.buildOrUpdateElements(g),l=Math.max(+x.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),s||pe(o,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(pl("z","_idx"));let{_active:d,_lastEvent:m}=this;m?this._eventHandler(m,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){pe(this.scales,e=>{Ke.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!us(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of n){let l=r==="_removeElements"?-o:o;oh(e,s,l)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let n=this.data.datasets.length,r=o=>new Set(e.filter(l=>l[0]===o).map((l,d)=>d+","+l.splice(1).join(","))),s=r(0);for(let o=1;o<n;o++)if(!us(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ke.update(this,this.width,this.height,e);let n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],pe(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ot(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){let r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Nt.has(this)?this.attached&&!Nt.running(this)&&Nt.start(this):(this.draw(),hl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let n=this._sortedMetasets,r=[],s,o;for(s=0,o=n.length;s<o;++s){let l=n[s];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=Hs(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&ln(n,s),e.controller.draw(),s&&cn(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Mt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){let o=cp.modes[n];return typeof o=="function"?o(this,e,r,s):[]}getDatasetMeta(e){let n=this.data.datasets[e],r=this._metasets,s=r.filter(o=>o&&o._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ht(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let n=this.data.datasets[e];if(!n)return!1;let r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){let r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){let s=r?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,s);Ri(n)?(o.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(o,{visible:r}),this.update(d=>d.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){let n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Nt.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ms(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Or[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,n=this.platform,r=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},s=(o,l,d)=>{o.offsetX=l,o.offsetY=d,this._eventHandler(o)};pe(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,n=this.platform,r=(m,h)=>{n.addEventListener(this,m,h),e[m]=h},s=(m,h)=>{e[m]&&(n.removeEventListener(this,m,h),delete e[m])},o=(m,h)=>{this.canvas&&this.resize(m,h)},l,d=()=>{s("attach",d),this.attached=!0,this.resize(),r("resize",o),r("detach",l)};l=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",d)},n.isAttached(this.canvas)?d():l()}unbindEvents(){pe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){let s=r?"set":"remove",o,l,d,m;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),d=0,m=e.length;d<m;++d){l=e[d];let h=l&&this.getDatasetMeta(l.datasetIndex).controller;h&&h[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let n=this._active||[],r=e.map(({datasetIndex:o,index:l})=>{let d=this.getDatasetMeta(o);if(!d)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:d.data[l],index:l}});!on(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){let s=this.options.hover,o=(m,h)=>m.filter(f=>!h.some(x=>f.datasetIndex===x.datasetIndex&&f.index===x.index)),l=o(n,e),d=r?e:o(e,n);l.length&&this.updateHoverStyle(l,s.mode,!1),d.length&&s.mode&&this.updateHoverStyle(d,s.mode,!0)}_eventHandler(e,n){let r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,n,r){let{_active:s=[],options:o}=this,l=n,d=this._getActiveElements(e,s,r,l),m=_a(e),h=ah(e,this._lastEvent,r,m);r&&(this._lastEvent=null,_e(o.onHover,[e,d,this],this),m&&_e(o.onClick,[e,d,this],this));let f=!on(d,s);return(f||n)&&(this._active=d,this._updateHoverStyles(d,s,n)),this._lastEvent=h,f}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}return i})();function gl(){return pe(yn.instances,i=>i._plugins.invalidate())}function lh(i,t,e){let{startAngle:n,x:r,y:s,outerRadius:o,innerRadius:l,options:d}=t,{borderWidth:m,borderJoinStyle:h}=d,f=Math.min(m/o,Ne(n-e));if(i.beginPath(),i.arc(r,s,o-m/2,n+f/2,e-f/2),l>0){let x=Math.min(m/l,Ne(n-e));i.arc(r,s,l+m/2,e-x/2,n+x/2,!0)}else{let x=Math.min(m/2,o*Ne(n-e));if(h==="round")i.arc(r,s,x,e-oe/2,n+oe/2,!0);else if(h==="bevel"){let g=2*x*x,S=-g*Math.cos(e+oe/2)+r,w=-g*Math.sin(e+oe/2)+s,A=g*Math.cos(n+oe/2)+r,L=g*Math.sin(n+oe/2)+s;i.lineTo(S,w),i.lineTo(A,L)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function ch(i,t,e){let{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:l,innerRadius:d}=t,m=r/l;i.beginPath(),i.arc(s,o,l,n-m,e+m),d>r?(m=r/d,i.arc(s,o,d,e+m,n-m,!0)):i.arc(s,o,r,e+Ae,n-Ae),i.closePath(),i.clip()}function dh(i){return Cr(i,["outerStart","outerEnd","innerStart","innerEnd"])}function mh(i,t,e,n){let r=dh(i.options.borderRadius),s=(e-t)/2,o=Math.min(s,n*t/2),l=d=>{let m=(e-Math.min(s,d))*n/2;return Fe(d,0,Math.min(s,m))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Fe(r.innerStart,0,o),innerEnd:Fe(r.innerEnd,0,o)}}function Wi(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function Nr(i,t,e,n,r,s){let{x:o,y:l,startAngle:d,pixelMargin:m,innerRadius:h}=t,f=Math.max(t.outerRadius+n+e-m,0),x=h>0?h+n+e+m:0,g=0,S=r-d;if(n){let le=h>0?h-n:0,xe=f>0?f-n:0,Se=(le+xe)/2,Je=Se!==0?S*Se/(Se+n):S;g=(S-Je)/2}let w=Math.max(.001,S*f-e/oe)/f,A=(S-w)/2,L=d+A+g,V=r-A-g,{outerStart:N,outerEnd:j,innerStart:R,innerEnd:B}=mh(t,x,f,V-L),U=f-N,G=f-j,q=L+N/U,J=V-j/G,ee=x+R,te=x+B,we=L+R/ee,Qe=V-B/te;if(i.beginPath(),s){let le=(q+J)/2;if(i.arc(o,l,f,q,le),i.arc(o,l,f,le,J),j>0){let Oe=Wi(G,J,o,l);i.arc(Oe.x,Oe.y,j,J,V+Ae)}let xe=Wi(te,V,o,l);if(i.lineTo(xe.x,xe.y),B>0){let Oe=Wi(te,Qe,o,l);i.arc(Oe.x,Oe.y,B,V+Ae,Qe+Math.PI)}let Se=(V-B/x+(L+R/x))/2;if(i.arc(o,l,x,V-B/x,Se,!0),i.arc(o,l,x,Se,L+R/x,!0),R>0){let Oe=Wi(ee,we,o,l);i.arc(Oe.x,Oe.y,R,we+Math.PI,L-Ae)}let Je=Wi(U,L,o,l);if(i.lineTo(Je.x,Je.y),N>0){let Oe=Wi(U,q,o,l);i.arc(Oe.x,Oe.y,N,L-Ae,q)}}else{i.moveTo(o,l);let le=Math.cos(q)*f+o,xe=Math.sin(q)*f+l;i.lineTo(le,xe);let Se=Math.cos(J)*f+o,Je=Math.sin(J)*f+l;i.lineTo(Se,Je)}i.closePath()}function uh(i,t,e,n,r){let{fullCircles:s,startAngle:o,circumference:l}=t,d=t.endAngle;if(s){Nr(i,t,e,n,d,r);for(let m=0;m<s;++m)i.fill();isNaN(l)||(d=o+(l%be||be))}return Nr(i,t,e,n,d,r),i.fill(),d}function ph(i,t,e,n,r){let{fullCircles:s,startAngle:o,circumference:l,options:d}=t,{borderWidth:m,borderJoinStyle:h,borderDash:f,borderDashOffset:x,borderRadius:g}=d,S=d.borderAlign==="inner";if(!m)return;i.setLineDash(f||[]),i.lineDashOffset=x,S?(i.lineWidth=m*2,i.lineJoin=h||"round"):(i.lineWidth=m,i.lineJoin=h||"bevel");let w=t.endAngle;if(s){Nr(i,t,e,n,w,r);for(let A=0;A<s;++A)i.stroke();isNaN(l)||(w=o+(l%be||be))}S&&ch(i,t,w),d.selfJoin&&w-o>=oe&&g===0&&h!=="miter"&&lh(i,t,w),s||(Nr(i,t,e,n,w,r),i.stroke())}var oo=class extends _t{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){let r=this.getProps(["x","y"],n),{angle:s,distance:o}=gs(r,{x:t,y:e}),{startAngle:l,endAngle:d,innerRadius:m,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),x=(this.options.spacing+this.options.borderWidth)/2,g=Z(f,d-l),S=Ni(s,l,d)&&l!==d,w=g>=be||S,A=Et(o,m+x,h+x);return w&&A}getCenterPoint(t){let{x:e,y:n,startAngle:r,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:d,spacing:m}=this.options,h=(r+s)/2,f=(o+l+m+d)/2;return{x:e+Math.cos(h)*f,y:n+Math.sin(h)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:n}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>be?Math.floor(n/be):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);let d=1-Math.sin(Math.min(oe,n||0)),m=r*d;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,uh(t,this,m,s,o),ph(t,this,m,s,o),t.restore()}};function ec(i,t,e=t){i.lineCap=Z(e.borderCapStyle,t.borderCapStyle),i.setLineDash(Z(e.borderDash,t.borderDash)),i.lineDashOffset=Z(e.borderDashOffset,t.borderDashOffset),i.lineJoin=Z(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=Z(e.borderWidth,t.borderWidth),i.strokeStyle=Z(e.borderColor,t.borderColor)}function hh(i,t,e){i.lineTo(e.x,e.y)}function fh(i){return i.stepped?Da:i.tension||i.cubicInterpolationMode==="monotone"?Ta:hh}function tc(i,t,e={}){let n=i.length,{start:r=0,end:s=n-1}=e,{start:o,end:l}=t,d=Math.max(r,o),m=Math.min(s,l),h=r<o&&s<o||r>l&&s>l;return{count:n,start:d,loop:t.loop,ilen:m<d&&!h?n+m-d:m-d}}function gh(i,t,e,n){let{points:r,options:s}=t,{count:o,start:l,loop:d,ilen:m}=tc(r,e,n),h=fh(s),{move:f=!0,reverse:x}=n||{},g,S,w;for(g=0;g<=m;++g)S=r[(l+(x?m-g:g))%o],!S.skip&&(f?(i.moveTo(S.x,S.y),f=!1):h(i,w,S,x,s.stepped),w=S);return d&&(S=r[(l+(x?m:0))%o],h(i,w,S,x,s.stepped)),!!d}function _h(i,t,e,n){let r=t.points,{count:s,start:o,ilen:l}=tc(r,e,n),{move:d=!0,reverse:m}=n||{},h=0,f=0,x,g,S,w,A,L,V=j=>(o+(m?l-j:j))%s,N=()=>{w!==A&&(i.lineTo(h,A),i.lineTo(h,w),i.lineTo(h,L))};for(d&&(g=r[V(0)],i.moveTo(g.x,g.y)),x=0;x<=l;++x){if(g=r[V(x)],g.skip)continue;let j=g.x,R=g.y,B=j|0;B===S?(R<w?w=R:R>A&&(A=R),h=(f*h+j)/++f):(N(),i.lineTo(j,R),S=B,f=0,w=A=R),L=R}N()}function ao(i){let t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?_h:gh}function xh(i){return i.stepped?Na:i.tension||i.cubicInterpolationMode==="monotone"?Ba:ei}function vh(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),ec(i,t.options),i.stroke(r)}function bh(i,t,e,n){let{segments:r,options:s}=t,o=ao(t);for(let l of r)ec(i,s,l.style),i.beginPath(),o(i,t,l,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}var yh=typeof Path2D=="function";function wh(i,t,e,n){yh&&!t.options.segment?vh(i,t,e,n):bh(i,t,e,n)}var zr=(()=>{class i extends _t{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;Fa(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=za(this,this.options.segment))}first(){let e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){let e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){let r=this.options,s=e[n],o=this.points,l=Rs(this,{property:n,start:s,end:s});if(!l.length)return;let d=[],m=xh(r),h,f;for(h=0,f=l.length;h<f;++h){let{start:x,end:g}=l[h],S=o[x],w=o[g];if(S===w){d.push(S);continue}let A=Math.abs((s-S[n])/(w[n]-S[n])),L=m(S,w,A,r.stepped);L[n]=e[n],d.push(L)}return d.length===1?d[0]:d}pathSegment(e,n,r){return ao(this)(e,this,n,r)}path(e,n,r){let s=this.segments,o=ao(this),l=this._loop;n=n||0,r=r||this.points.length-n;for(let d of s)l&=o(e,this,d,{start:n,end:n+r-1});return!!l}draw(e,n,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),wh(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i})();function _l(i,t,e,n){let r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}var Ch=(()=>{class i extends _t{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){let s=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return _l(this,e,"x",n)}inYRange(e,n){return _l(this,e,"y",n)}getCenterPoint(e){let{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);let r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){let r=this.options;this.skip||r.radius<.1||!Mt(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,wr(e,r,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return i})();function ic(i,t){let{x:e,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],t),l,d,m,h,f;return i.horizontal?(f=o/2,l=Math.min(e,r),d=Math.max(e,r),m=n-f,h=n+f):(f=s/2,l=e-f,d=e+f,m=Math.min(n,r),h=Math.max(n,r)),{left:l,top:m,right:d,bottom:h}}function oi(i,t,e,n){return i?0:Fe(t,e,n)}function Sh(i,t,e){let n=i.options.borderWidth,r=i.borderSkipped,s=Es(n);return{t:oi(r.top,s.top,0,e),r:oi(r.right,s.right,0,t),b:oi(r.bottom,s.bottom,0,e),l:oi(r.left,s.left,0,t)}}function Mh(i,t,e){let{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=ri(r),o=Math.min(t,e),l=i.borderSkipped,d=n||se(r);return{topLeft:oi(!d||l.top||l.left,s.topLeft,0,o),topRight:oi(!d||l.top||l.right,s.topRight,0,o),bottomLeft:oi(!d||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:oi(!d||l.bottom||l.right,s.bottomRight,0,o)}}function kh(i){let t=ic(i),e=t.right-t.left,n=t.bottom-t.top,r=Sh(i,e/2,n/2),s=Mh(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Us(i,t,e,n){let r=t===null,s=e===null,l=i&&!(r&&s)&&ic(i,n);return l&&(r||Et(t,l.left,l.right))&&(s||Et(e,l.top,l.bottom))}function Eh(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function Ah(i,t){i.rect(t.x,t.y,t.w,t.h)}function Ys(i,t,e={}){let n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0,s=(i.x+i.w!==e.x+e.w?t:0)-n,o=(i.y+i.h!==e.y+e.h?t:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+s,h:i.h+o,radius:i.radius}}var lo=class extends _t{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=kh(this),l=Eh(o.radius)?ji:Ah;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),l(t,Ys(o,e,s)),t.clip(),l(t,Ys(s,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,Ys(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return Us(this,t,e,n)}inXRange(t,e){return Us(this,t,null,e)}inYRange(t,e){return Us(this,null,t,e)}getCenterPoint(t){let{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},Dh=Object.freeze({__proto__:null,ArcElement:oo,BarElement:lo,LineElement:zr,PointElement:Ch}),co=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],xl=co.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function nc(i){return co[i%co.length]}function rc(i){return xl[i%xl.length]}function Th(i,t){return i.borderColor=nc(t),i.backgroundColor=rc(t),++t}function Ih(i,t){return i.backgroundColor=i.data.map(()=>nc(t++)),t}function Ph(i,t){return i.backgroundColor=i.data.map(()=>rc(t++)),t}function Vh(i){let t=0;return(e,n)=>{let r=i.getDatasetMeta(n).controller;r instanceof xo?t=Ih(e,t):r instanceof $l?t=Ph(e,t):r&&(t=Th(e,t))}}function vl(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function Lh(i){return i&&(i.borderColor||i.backgroundColor)}function Oh(){return ye.borderColor!=="rgba(0,0,0,0.1)"||ye.backgroundColor!=="rgba(0,0,0,0.1)"}var Fh={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;let{data:{datasets:n},options:r}=i.config,{elements:s}=r,o=vl(n)||Lh(r)||s&&vl(s)||Oh();if(!e.forceOverride&&o)return;let l=Vh(i);n.forEach(l)}};function Rh(i,t,e,n,r){let s=r.samples||n;if(s>=e)return i.slice(t,t+e);let o=[],l=(e-2)/(s-2),d=0,m=t+e-1,h=t,f,x,g,S,w;for(o[d++]=i[h],f=0;f<s-2;f++){let A=0,L=0,V,N=Math.floor((f+1)*l)+1+t,j=Math.min(Math.floor((f+2)*l)+1,e)+t,R=j-N;for(V=N;V<j;V++)A+=i[V].x,L+=i[V].y;A/=R,L/=R;let B=Math.floor(f*l)+1+t,U=Math.min(Math.floor((f+1)*l)+1,e)+t,{x:G,y:q}=i[h];for(g=S=-1,V=B;V<U;V++)S=.5*Math.abs((G-A)*(i[V].y-q)-(G-i[V].x)*(L-q)),S>g&&(g=S,x=i[V],w=V);o[d++]=x,h=w}return o[d++]=i[m],o}function Hh(i,t,e,n){let r=0,s=0,o,l,d,m,h,f,x,g,S,w,A=[],L=t+e-1,V=i[t].x,j=i[L].x-V;for(o=t;o<t+e;++o){l=i[o],d=(l.x-V)/j*n,m=l.y;let R=d|0;if(R===h)m<S?(S=m,f=o):m>w&&(w=m,x=o),r=(s*r+l.x)/++s;else{let B=o-1;if(!re(f)&&!re(x)){let U=Math.min(f,x),G=Math.max(f,x);U!==g&&U!==B&&A.push(yi(bi({},i[U]),{x:r})),G!==g&&G!==B&&A.push(yi(bi({},i[G]),{x:r}))}o>0&&B!==g&&A.push(i[B]),A.push(l),h=R,s=0,S=w=m,f=x=g=o}}return A}function sc(i){if(i._decimated){let t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function bl(i){i.data.datasets.forEach(t=>{sc(t)})}function Nh(i,t){let e=t.length,n=0,r,{iScale:s}=i,{min:o,max:l,minDefined:d,maxDefined:m}=s.getUserBounds();return d&&(n=Fe(St(t,s.axis,o).lo,0,e-1)),m?r=Fe(St(t,s.axis,l).hi+1,n,e)-n:r=e-n,{start:n,count:r}}var Bh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){bl(i);return}let n=i.width;i.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:l}=r,d=i.getDatasetMeta(s),m=o||r.data;if(zi([l,i.options.indexAxis])==="y"||!d.controller.supportsDecimation)return;let h=i.scales[d.xAxisID];if(h.type!=="linear"&&h.type!=="time"||i.options.parsing)return;let{start:f,count:x}=Nh(d,m),g=e.threshold||4*n;if(x<=g){sc(r);return}re(o)&&(r._data=m,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let S;switch(e.algorithm){case"lttb":S=Rh(m,f,x,n,e);break;case"min-max":S=Hh(m,f,x,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=S})},destroy(i){bl(i)}};function jh(i,t,e){let n=i.segments,r=i.points,s=t.points,o=[];for(let l of n){let{start:d,end:m}=l;m=Wr(d,m,r);let h=mo(e,r[d],r[m],l.loop);if(!t.segments){o.push({source:l,target:h,start:r[d],end:r[m]});continue}let f=Rs(t,h);for(let x of f){let g=mo(e,s[x.start],s[x.end],x.loop),S=Fs(l,r,g);for(let w of S)o.push({source:w,target:x,start:{[e]:yl(h,g,"start",Math.max)},end:{[e]:yl(h,g,"end",Math.min)}})}}return o}function mo(i,t,e,n){if(n)return;let r=t[i],s=e[i];return i==="angle"&&(r=Ne(r),s=Ne(s)),{property:i,start:r,end:s}}function zh(i,t){let{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:l})=>{l=Wr(o,l,r);let d=r[o],m=r[l];n!==null?(s.push({x:d.x,y:n}),s.push({x:m.x,y:n})):e!==null&&(s.push({x:e,y:d.y}),s.push({x:e,y:m.y}))}),s}function Wr(i,t,e){for(;t>i;t--){let n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function yl(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function oc(i,t){let e=[],n=!1;return ve(i)?(n=!0,e=i):e=zh(i,t),e.length?new zr({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function wl(i){return i&&i.fill!==!1}function Wh(i,t,e){let r=i[t].fill,s=[t],o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ee(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Gh(i,t,e){let n=qh(i);if(se(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Ee(r)&&Math.floor(r)===r?$h(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function $h(i,t,e,n){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=n?!1:e}function Uh(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:se(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Yh(i,t,e){let n;return i==="start"?n=e:i==="end"?n=t.options.reverse?t.min:t.max:se(i)?n=i.value:n=t.getBaseValue(),n}function qh(i){let t=i.options,e=t.fill,n=Z(e&&e.target,e);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Kh(i){let{scale:t,index:e,line:n}=i,r=[],s=n.segments,o=n.points,l=Qh(t,e);l.push(oc({x:null,y:t.bottom},n));for(let d=0;d<s.length;d++){let m=s[d];for(let h=m.start;h<=m.end;h++)Xh(r,o[h],l)}return new zr({points:r,options:{}})}function Qh(i,t){let e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){let s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function Xh(i,t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],{first:o,last:l,point:d}=Jh(s,t,"x");if(!(!d||o&&l)){if(o)n.unshift(d);else if(i.push(d),!l)break}}i.push(...n)}function Jh(i,t,e){let n=i.interpolate(t,e);if(!n)return{};let r=n[e],s=i.segments,o=i.points,l=!1,d=!1;for(let m=0;m<s.length;m++){let h=s[m],f=o[h.start][e],x=o[h.end][e];if(Et(r,f,x)){l=r===f,d=r===x;break}}return{first:l,last:d,point:n}}var Br=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){let{x:r,y:s,radius:o}=this;return e=e||{start:0,end:be},t.arc(r,s,o,e.end,e.start,!0),!n.bounds}interpolate(t){let{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}};function Zh(i){let{chart:t,fill:e,line:n}=i;if(Ee(e))return ef(t,e);if(e==="stack")return Kh(i);if(e==="shape")return!0;let r=tf(i);return r instanceof Br?r:oc(r,n)}function ef(i,t){let e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function tf(i){return(i.scale||{}).getPointPositionForValue?rf(i):nf(i)}function nf(i){let{scale:t={},fill:e}=i,n=Uh(e,t);if(Ee(n)){let r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function rf(i){let{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=Yh(e,t,s),l=[];if(n.grid.circular){let d=t.getPointPositionForValue(0,s);return new Br({x:d.x,y:d.y,radius:t.getDistanceFromCenterForValue(o)})}for(let d=0;d<r;++d)l.push(t.getPointPositionForValue(d,o));return l}function qs(i,t,e){let n=Zh(t),{chart:r,index:s,line:o,scale:l,axis:d}=t,m=o.options,h=m.fill,f=m.backgroundColor,{above:x=f,below:g=f}=h||{},S=r.getDatasetMeta(s),w=Hs(r,S);n&&o.points.length&&(ln(i,e),sf(i,{line:o,target:n,above:x,below:g,area:e,scale:l,axis:d,clip:w}),cn(i))}function sf(i,t){let{line:e,target:n,above:r,below:s,area:o,scale:l,clip:d}=t,m=e._loop?"angle":t.axis;i.save();let h=s;s!==r&&(m==="x"?(Cl(i,n,o.top),Ks(i,{line:e,target:n,color:r,scale:l,property:m,clip:d}),i.restore(),i.save(),Cl(i,n,o.bottom)):m==="y"&&(Sl(i,n,o.left),Ks(i,{line:e,target:n,color:s,scale:l,property:m,clip:d}),i.restore(),i.save(),Sl(i,n,o.right),h=r)),Ks(i,{line:e,target:n,color:h,scale:l,property:m,clip:d}),i.restore()}function Cl(i,t,e){let{segments:n,points:r}=t,s=!0,o=!1;i.beginPath();for(let l of n){let{start:d,end:m}=l,h=r[d],f=r[Wr(d,m,r)];s?(i.moveTo(h.x,h.y),s=!1):(i.lineTo(h.x,e),i.lineTo(h.x,h.y)),o=!!t.pathSegment(i,l,{move:o}),o?i.closePath():i.lineTo(f.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function Sl(i,t,e){let{segments:n,points:r}=t,s=!0,o=!1;i.beginPath();for(let l of n){let{start:d,end:m}=l,h=r[d],f=r[Wr(d,m,r)];s?(i.moveTo(h.x,h.y),s=!1):(i.lineTo(e,h.y),i.lineTo(h.x,h.y)),o=!!t.pathSegment(i,l,{move:o}),o?i.closePath():i.lineTo(e,f.y)}i.lineTo(e,t.first().y),i.closePath(),i.clip()}function Ks(i,t){let{line:e,target:n,property:r,color:s,scale:o,clip:l}=t,d=jh(e,n,r);for(let{source:m,target:h,start:f,end:x}of d){let{style:{backgroundColor:g=s}={}}=m,S=n!==!0;i.save(),i.fillStyle=g,of(i,o,l,S&&mo(r,f,x)),i.beginPath();let w=!!e.pathSegment(i,m),A;if(S){w?i.closePath():Ml(i,n,x,r);let L=!!n.pathSegment(i,h,{move:w,reverse:!0});A=w&&L,A||Ml(i,n,f,r)}i.closePath(),i.fill(A?"evenodd":"nonzero"),i.restore()}}function of(i,t,e,n){let r=t.chart.chartArea,{property:s,start:o,end:l}=n||{};if(s==="x"||s==="y"){let d,m,h,f;s==="x"?(d=o,m=r.top,h=l,f=r.bottom):(d=r.left,m=o,h=r.right,f=l),i.beginPath(),e&&(d=Math.max(d,e.left),h=Math.min(h,e.right),m=Math.max(m,e.top),f=Math.min(f,e.bottom)),i.rect(d,m,h-d,f-m),i.clip()}}function Ml(i,t,e,n){let r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var af={id:"filler",afterDatasetsUpdate(i,t,e){let n=(i.data.datasets||[]).length,r=[],s,o,l,d;for(o=0;o<n;++o)s=i.getDatasetMeta(o),l=s.dataset,d=null,l&&l.options&&l instanceof zr&&(d={visible:i.isDatasetVisible(o),index:o,fill:Gh(l,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=d,r.push(d);for(o=0;o<n;++o)d=r[o],!(!d||d.fill===!1)&&(d.fill=Wh(r,o,e.propagate))},beforeDraw(i,t,e){let n=e.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){let l=r[o].$filler;l&&(l.line.updateControlPoints(s,l.axis),n&&l.fill&&qs(i.ctx,l,s))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){let s=n[r].$filler;wl(s)&&qs(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){let n=t.meta.$filler;!wl(n)||e.drawTime!=="beforeDatasetDraw"||qs(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},kl=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},lf=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index,jr=class extends _t{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=_e(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let n=t.labels,r=Le(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:d}=kl(n,s),m,h;e.font=r.string,this.isHorizontal()?(m=this.maxWidth,h=this._fitRows(o,s,l,d)+10):(h=this.maxHeight,m=this._fitCols(o,r,l,d)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){let{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],h=r+l,f=t;s.textAlign="left",s.textBaseline="middle";let x=-1,g=-h;return this.legendItems.forEach((S,w)=>{let A=n+e/2+s.measureText(S.text).width;(w===0||m[m.length-1]+A+2*l>o)&&(f+=h,m[m.length-(w>0?0:1)]=0,g+=h,x++),d[w]={left:0,top:g,row:x,width:A,height:r},m[m.length-1]+=A+l}),f}_fitCols(t,e,n,r){let{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],h=o-t,f=l,x=0,g=0,S=0,w=0;return this.legendItems.forEach((A,L)=>{let{itemWidth:V,itemHeight:N}=cf(n,e,s,A,r);L>0&&g+N+2*l>h&&(f+=x+l,m.push({width:x,height:g}),S+=x+l,w++,x=g=0),d[L]={left:S,top:g,col:w,width:V,height:N},x=Math.max(x,V),g+=N+l}),f+=x,m.push({width:x,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,o=fi(s,this.left,this.width);if(this.isHorizontal()){let l=0,d=Be(n,this.left+r,this.right-this.lineWidths[l]);for(let m of e)l!==m.row&&(l=m.row,d=Be(n,this.left+r,this.right-this.lineWidths[l])),m.top+=this.top+t+r,m.left=o.leftForLtr(o.x(d),m.width),d+=m.width+r}else{let l=0,d=Be(n,this.top+t+r,this.bottom-this.columnSizes[l].height);for(let m of e)m.col!==l&&(l=m.col,d=Be(n,this.top+t+r,this.bottom-this.columnSizes[l].height)),m.top=d,m.left+=this.left+r,m.left=o.leftForLtr(o.x(m.left),m.width),d+=m.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;ln(t,this),this._draw(),cn(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,l=ye.color,d=fi(t.rtl,this.left,this.width),m=Le(o.font),{padding:h}=o,f=m.size,x=f/2,g;this.drawTitle(),r.textAlign=d.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=m.string;let{boxWidth:S,boxHeight:w,itemHeight:A}=kl(o,f),L=function(B,U,G){if(isNaN(S)||S<=0||isNaN(w)||w<0)return;r.save();let q=Z(G.lineWidth,1);if(r.fillStyle=Z(G.fillStyle,l),r.lineCap=Z(G.lineCap,"butt"),r.lineDashOffset=Z(G.lineDashOffset,0),r.lineJoin=Z(G.lineJoin,"miter"),r.lineWidth=q,r.strokeStyle=Z(G.strokeStyle,l),r.setLineDash(Z(G.lineDash,[])),o.usePointStyle){let J={radius:w*Math.SQRT2/2,pointStyle:G.pointStyle,rotation:G.rotation,borderWidth:q},ee=d.xPlus(B,S/2),te=U+x;ks(r,J,ee,te,o.pointStyleWidth&&S)}else{let J=U+Math.max((f-w)/2,0),ee=d.leftForLtr(B,S),te=ri(G.borderRadius);r.beginPath(),Object.values(te).some(we=>we!==0)?ji(r,{x:ee,y:J,w:S,h:w,radius:te}):r.rect(ee,J,S,w),r.fill(),q!==0&&r.stroke()}r.restore()},V=function(B,U,G){ni(r,G.text,B,U+A/2,m,{strikethrough:G.hidden,textAlign:d.textAlign(G.textAlign)})},N=this.isHorizontal(),j=this._computeTitleHeight();N?g={x:Be(s,this.left+h,this.right-n[0]),y:this.top+h+j,line:0}:g={x:this.left+h,y:Be(s,this.top+j+h,this.bottom-e[0].height),line:0},Ls(this.ctx,t.textDirection);let R=A+h;this.legendItems.forEach((B,U)=>{r.strokeStyle=B.fontColor,r.fillStyle=B.fontColor;let G=r.measureText(B.text).width,q=d.textAlign(B.textAlign||(B.textAlign=o.textAlign)),J=S+x+G,ee=g.x,te=g.y;d.setWidth(this.width),N?U>0&&ee+J+h>this.right&&(te=g.y+=R,g.line++,ee=g.x=Be(s,this.left+h,this.right-n[g.line])):U>0&&te+R>this.bottom&&(ee=g.x=ee+e[g.line].width+h,g.line++,te=g.y=Be(s,this.top+j+h,this.bottom-e[g.line].height));let we=d.x(ee);if(L(we,te,B),ee=ka(q,ee+S+x,N?ee+J:this.right,t.rtl),V(d.x(ee),te,B),N)g.x+=J+h;else if(typeof B.text!="string"){let Qe=m.lineHeight;g.y+=ac(B,Qe)+h}else g.y+=R}),Os(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,n=Le(e.font),r=je(e.padding);if(!e.display)return;let s=fi(t.rtl,this.left,this.width),o=this.ctx,l=e.position,d=n.size/2,m=r.top+d,h,f=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),h=this.top+m,f=Be(t.align,f,this.right-x);else{let S=this.columnSizes.reduce((w,A)=>Math.max(w,A.height),0);h=m+Be(t.align,this.top,this.bottom-S-t.labels.padding-this._computeTitleHeight())}let g=Be(l,f,f+x);o.textAlign=s.textAlign(br(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,ni(o,e.text,g,h,n)}_computeTitleHeight(){let t=this.options.title,e=Le(t.font),n=je(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(Et(t,this.left,this.right)&&Et(e,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],Et(t,r.left,r.left+r.width)&&Et(e,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(t){let e=this.options;if(!uf(t.type,e))return;let n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let r=this._hoveredItem,s=lf(r,n);r&&!s&&_e(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&_e(e.onHover,[t,n,this],this)}else n&&_e(e.onClick,[t,n,this],this)}};function cf(i,t,e,n,r){let s=df(n,i,t,e),o=mf(r,n,t.lineHeight);return{itemWidth:s,itemHeight:o}}function df(i,t,e,n){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+n.measureText(r).width}function mf(i,t,e){let n=i;return typeof t.text!="string"&&(n=ac(t,e)),n}function ac(i,t){let e=i.text?i.text.length:0;return t*e}function uf(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var pf={id:"legend",_element:jr,start(i,t,e){let n=i.legend=new jr({ctx:i.ctx,options:e,chart:i});Ke.configure(i,n,e),Ke.addBox(i,n)},stop(i){Ke.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){let n=i.legend;Ke.configure(i,n,e),n.options=e},afterUpdate(i){let t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){let n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s,useBorderRadius:o,borderRadius:l}}=i.legend.options;return i._getSortedDatasetMetas().map(d=>{let m=d.controller.getStyle(e?0:void 0),h=je(m.borderWidth);return{text:t[d.index].label,fillStyle:m.backgroundColor,fontColor:s,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:m.borderColor,pointStyle:n||m.pointStyle,rotation:m.rotation,textAlign:r||m.textAlign,borderRadius:o&&(l||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},xn=class extends _t{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let r=ve(n.text)?n.text.length:1;this._padding=je(n.padding);let s=r*Le(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:n,bottom:r,right:s,options:o}=this,l=o.align,d=0,m,h,f;return this.isHorizontal()?(h=Be(l,n,s),f=e+t,m=s-n):(o.position==="left"?(h=n+t,f=Be(l,r,e),d=oe*-.5):(h=s-t,f=Be(l,e,r),d=oe*.5),m=r-e),{titleX:h,titleY:f,maxWidth:m,rotation:d}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let n=Le(e.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:d,rotation:m}=this._drawArgs(s);ni(t,e.text,0,0,n,{color:e.color,maxWidth:d,rotation:m,textAlign:br(e.align),textBaseline:"middle",translation:[o,l]})}};function hf(i,t){let e=new xn({ctx:i.ctx,options:t,chart:i});Ke.configure(i,e,t),Ke.addBox(i,e),i.titleBlock=e}var ff={id:"title",_element:xn,start(i,t,e){hf(i,e)},stop(i){let t=i.titleBlock;Ke.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){let n=i.titleBlock;Ke.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ir=new WeakMap,gf={id:"subtitle",start(i,t,e){let n=new xn({ctx:i.ctx,options:e,chart:i});Ke.configure(i,n,e),Ke.addBox(i,n),Ir.set(i,n)},stop(i){Ke.removeBox(i,Ir.get(i)),Ir.delete(i)},beforeUpdate(i,t,e){let n=Ir.get(i);Ke.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},gn={average(i){if(!i.length)return!1;let t,e,n=new Set,r=0,s=0;for(t=0,e=i.length;t<e;++t){let l=i[t].element;if(l&&l.hasValue()){let d=l.tooltipPosition();n.add(d.x),r+=d.y,++s}}return s===0||n.size===0?!1:{x:[...n].reduce((l,d)=>l+d)/n.size,y:r/s}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,r=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=i.length;s<o;++s){let d=i[s].element;if(d&&d.hasValue()){let m=d.getCenterPoint(),h=fr(t,m);h<r&&(r=h,l=d)}}if(l){let d=l.tooltipPosition();e=d.x,n=d.y}return{x:e,y:n}}};function At(i,t){return t&&(ve(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function Bt(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function _f(i,t){let{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function El(i,t){let e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:l}=t,d=Le(t.bodyFont),m=Le(t.titleFont),h=Le(t.footerFont),f=s.length,x=r.length,g=n.length,S=je(t.padding),w=S.height,A=0,L=n.reduce((j,R)=>j+R.before.length+R.lines.length+R.after.length,0);if(L+=i.beforeBody.length+i.afterBody.length,f&&(w+=f*m.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),L){let j=t.displayColors?Math.max(l,d.lineHeight):d.lineHeight;w+=g*j+(L-g)*d.lineHeight+(L-1)*t.bodySpacing}x&&(w+=t.footerMarginTop+x*h.lineHeight+(x-1)*t.footerSpacing);let V=0,N=function(j){A=Math.max(A,e.measureText(j).width+V)};return e.save(),e.font=m.string,pe(i.title,N),e.font=d.string,pe(i.beforeBody.concat(i.afterBody),N),V=t.displayColors?o+2+t.boxPadding:0,pe(n,j=>{pe(j.before,N),pe(j.lines,N),pe(j.after,N)}),V=0,e.font=h.string,pe(i.footer,N),e.restore(),A+=S.width,{width:A,height:w}}function xf(i,t){let{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function vf(i,t,e,n){let{x:r,width:s}=n,o=e.caretSize+e.caretPadding;if(i==="left"&&r+s+o>t.width||i==="right"&&r-s-o<0)return!0}function bf(i,t,e,n){let{x:r,width:s}=e,{width:o,chartArea:{left:l,right:d}}=i,m="center";return n==="center"?m=r<=(l+d)/2?"left":"right":r<=s/2?m="left":r>=o-s/2&&(m="right"),vf(m,i,t,e)&&(m="center"),m}function Al(i,t,e){let n=e.yAlign||t.yAlign||xf(i,e);return{xAlign:e.xAlign||t.xAlign||bf(i,t,e,n),yAlign:n}}function yf(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function wf(i,t,e){let{y:n,height:r}=i;return t==="top"?n+=e:t==="bottom"?n-=r+e:n-=r/2,n}function Dl(i,t,e,n){let{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:l,yAlign:d}=e,m=r+s,{topLeft:h,topRight:f,bottomLeft:x,bottomRight:g}=ri(o),S=yf(t,l),w=wf(t,d,m);return d==="center"?l==="left"?S+=m:l==="right"&&(S-=m):l==="left"?S-=Math.max(h,x)+r:l==="right"&&(S+=Math.max(f,g)+r),{x:Fe(S,0,n.width-t.width),y:Fe(w,0,n.height-t.height)}}function Pr(i,t,e){let n=je(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function Tl(i){return At([],Bt(i))}function Cf(i,t,e){return Ht(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Il(i,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}var lc={beforeTitle:kt,title(i){if(i.length>0){let t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:kt,beforeBody:kt,beforeLabel:kt,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");let e=i.formattedValue;return re(e)||(t+=e),t},labelColor(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:kt,afterBody:kt,beforeFooter:kt,footer:kt,afterFooter:kt};function st(i,t,e,n){let r=i[t].call(e,n);return typeof r>"u"?lc[t].call(e,n):r}var Pl=(()=>{class i extends _t{static positioners=gn;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new Fr(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Cf(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){let{callbacks:r}=n,s=st(r,"beforeTitle",this,e),o=st(r,"title",this,e),l=st(r,"afterTitle",this,e),d=[];return d=At(d,Bt(s)),d=At(d,Bt(o)),d=At(d,Bt(l)),d}getBeforeBody(e,n){return Tl(st(n.callbacks,"beforeBody",this,e))}getBody(e,n){let{callbacks:r}=n,s=[];return pe(e,o=>{let l={before:[],lines:[],after:[]},d=Il(r,o);At(l.before,Bt(st(d,"beforeLabel",this,o))),At(l.lines,st(d,"label",this,o)),At(l.after,Bt(st(d,"afterLabel",this,o))),s.push(l)}),s}getAfterBody(e,n){return Tl(st(n.callbacks,"afterBody",this,e))}getFooter(e,n){let{callbacks:r}=n,s=st(r,"beforeFooter",this,e),o=st(r,"footer",this,e),l=st(r,"afterFooter",this,e),d=[];return d=At(d,Bt(s)),d=At(d,Bt(o)),d=At(d,Bt(l)),d}_createItems(e){let n=this._active,r=this.chart.data,s=[],o=[],l=[],d=[],m,h;for(m=0,h=n.length;m<h;++m)d.push(_f(this.chart,n[m]));return e.filter&&(d=d.filter((f,x,g)=>e.filter(f,x,g,r))),e.itemSort&&(d=d.sort((f,x)=>e.itemSort(f,x,r))),pe(d,f=>{let x=Il(e.callbacks,f);s.push(st(x,"labelColor",this,f)),o.push(st(x,"labelPointStyle",this,f)),l.push(st(x,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=d,d}update(e,n){let r=this.options.setContext(this.getContext()),s=this._active,o,l=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let d=gn[r.position].call(this,s,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);let m=this._size=El(this,r),h=Object.assign({},d,m),f=Al(this.chart,r,h),x=Dl(r,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:x.x,y:x.y,width:m.width,height:m.height,caretX:d.x,caretY:d.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){let o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){let{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:d}=r,{topLeft:m,topRight:h,bottomLeft:f,bottomRight:x}=ri(d),{x:g,y:S}=e,{width:w,height:A}=n,L,V,N,j,R,B;return o==="center"?(R=S+A/2,s==="left"?(L=g,V=L-l,j=R+l,B=R-l):(L=g+w,V=L+l,j=R-l,B=R+l),N=L):(s==="left"?V=g+Math.max(m,f)+l:s==="right"?V=g+w-Math.max(h,x)-l:V=this.caretX,o==="top"?(j=S,R=j-l,L=V-l,N=V+l):(j=S+A,R=j+l,L=V+l,N=V-l),B=j),{x1:L,x2:V,x3:N,y1:j,y2:R,y3:B}}drawTitle(e,n,r){let s=this.title,o=s.length,l,d,m;if(o){let h=fi(r.rtl,this.x,this.width);for(e.x=Pr(this,r.titleAlign,r),n.textAlign=h.textAlign(r.titleAlign),n.textBaseline="middle",l=Le(r.titleFont),d=r.titleSpacing,n.fillStyle=r.titleColor,n.font=l.string,m=0;m<o;++m)n.fillText(s[m],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+d,m+1===o&&(e.y+=r.titleMarginBottom-d)}}_drawColorBox(e,n,r,s,o){let l=this.labelColors[r],d=this.labelPointStyles[r],{boxHeight:m,boxWidth:h}=o,f=Le(o.bodyFont),x=Pr(this,"left",o),g=s.x(x),S=m<f.lineHeight?(f.lineHeight-m)/2:0,w=n.y+S;if(o.usePointStyle){let A={radius:Math.min(h,m)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},L=s.leftForLtr(g,h)+h/2,V=w+m/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,wr(e,A,L,V),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,wr(e,A,L,V)}else{e.lineWidth=se(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;let A=s.leftForLtr(g,h),L=s.leftForLtr(s.xPlus(g,1),h-2),V=ri(l.borderRadius);Object.values(V).some(N=>N!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,ji(e,{x:A,y:w,w:h,h:m,radius:V}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),ji(e,{x:L,y:w+1,w:h-2,h:m-2,radius:V}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(A,w,h,m),e.strokeRect(A,w,h,m),e.fillStyle=l.backgroundColor,e.fillRect(L,w+1,h-2,m-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){let{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:d,boxHeight:m,boxWidth:h,boxPadding:f}=r,x=Le(r.bodyFont),g=x.lineHeight,S=0,w=fi(r.rtl,this.x,this.width),A=function(q){n.fillText(q,w.x(e.x+S),e.y+g/2),e.y+=g+o},L=w.textAlign(l),V,N,j,R,B,U,G;for(n.textAlign=l,n.textBaseline="middle",n.font=x.string,e.x=Pr(this,L,r),n.fillStyle=r.bodyColor,pe(this.beforeBody,A),S=d&&L!=="right"?l==="center"?h/2+f:h+2+f:0,R=0,U=s.length;R<U;++R){for(V=s[R],N=this.labelTextColors[R],n.fillStyle=N,pe(V.before,A),j=V.lines,d&&j.length&&(this._drawColorBox(n,e,R,w,r),g=Math.max(x.lineHeight,m)),B=0,G=j.length;B<G;++B)A(j[B]),g=x.lineHeight;pe(V.after,A)}S=0,g=x.lineHeight,pe(this.afterBody,A),e.y-=o}drawFooter(e,n,r){let s=this.footer,o=s.length,l,d;if(o){let m=fi(r.rtl,this.x,this.width);for(e.x=Pr(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=m.textAlign(r.footerAlign),n.textBaseline="middle",l=Le(r.footerFont),n.fillStyle=r.footerColor,n.font=l.string,d=0;d<o;++d)n.fillText(s[d],m.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){let{xAlign:o,yAlign:l}=this,{x:d,y:m}=e,{width:h,height:f}=r,{topLeft:x,topRight:g,bottomLeft:S,bottomRight:w}=ri(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(d+x,m),l==="top"&&this.drawCaret(e,n,r,s),n.lineTo(d+h-g,m),n.quadraticCurveTo(d+h,m,d+h,m+g),l==="center"&&o==="right"&&this.drawCaret(e,n,r,s),n.lineTo(d+h,m+f-w),n.quadraticCurveTo(d+h,m+f,d+h-w,m+f),l==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(d+S,m+f),n.quadraticCurveTo(d,m+f,d,m+f-S),l==="center"&&o==="left"&&this.drawCaret(e,n,r,s),n.lineTo(d,m+x),n.quadraticCurveTo(d,m,d+x,m),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){let n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let l=gn[e.position].call(this,this._active,this._eventPosition);if(!l)return;let d=this._size=El(this,e),m=Object.assign({},l,this._size),h=Al(n,e,m),f=Dl(e,m,h,n);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=d.width,this.height=d.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){let n=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(n);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let l=je(n.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&d&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),Ls(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),Os(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){let r=this._active,s=e.map(({datasetIndex:d,index:m})=>{let h=this.chart.getDatasetMeta(d);if(!h)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:h.data[m],index:m}}),o=!on(r,s),l=this._positionChanged(s,n);(o||l)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,r),d=this._positionChanged(l,e),m=n||!on(l,o)||d;return m&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),m}_getActiveElements(e,n,r,s){let o=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);let l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,n){let{caretX:r,caretY:s,options:o}=this,l=gn[o.position].call(this,e,n);return l!==!1&&(r!==l.x||s!==l.y)}}return i})(),Sf={id:"tooltip",_element:Pl,positioners:gn,afterInit(i,t,e){e&&(i.tooltip=new Pl({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){let t=i.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",yi(bi({},e),{cancelable:!0}))===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){let e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lc},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Mf=Object.freeze({__proto__:null,Colors:Fh,Decimation:Bh,Filler:af,Legend:pf,SubTitle:gf,Title:ff,Tooltip:Sf}),kf=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Ef(i,t,e,n){let r=i.indexOf(t);if(r===-1)return kf(i,t,e,n);let s=i.lastIndexOf(t);return r!==s?e:r}var Af=(i,t)=>i===null?null:Fe(Math.round(i),0,t);function Vl(i){let t=this.getLabels();return i>=0&&i<t.length?t[i]:i}var Df=(()=>{class i extends xi{static id="category";static defaults={ticks:{callback:Vl}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let n=this._addedLabels;if(n.length){let r=this.getLabels();for(let{index:s,label:o}of n)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(re(e))return null;let r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Ef(r,e,Z(n,e),this._addedLabels),Af(n,r.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let e=this.min,n=this.max,r=this.options.offset,s=[],o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let l=e;l<=n;l++)s.push({value:l});return s}getLabelForValue(e){return Vl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return i})();function Tf(i,t){let e=[],{bounds:r,step:s,min:o,max:l,precision:d,count:m,maxTicks:h,maxDigits:f,includeBounds:x}=i,g=s||1,S=h-1,{min:w,max:A}=t,L=!re(o),V=!re(l),N=!re(m),j=(A-w)/(f+1),R=ps((A-w)/S/g)*g,B,U,G,q;if(R<1e-14&&!L&&!V)return[{value:w},{value:A}];q=Math.ceil(A/R)-Math.floor(w/R),q>S&&(R=ps(q*R/S/g)*g),re(d)||(B=Math.pow(10,d),R=Math.ceil(R*B)/B),r==="ticks"?(U=Math.floor(w/R)*R,G=Math.ceil(A/R)*R):(U=w,G=A),L&&V&&s&&va((l-o)/s,R/1e3)?(q=Math.round(Math.min((l-o)/R,h)),R=(l-o)/q,U=o,G=l):N?(U=L?o:U,G=V?l:G,q=m-1,R=(G-U)/q):(q=(G-U)/R,Hi(q,Math.round(q),R/1e3)?q=Math.round(q):q=Math.ceil(q));let J=Math.max(fs(R),fs(U));B=Math.pow(10,re(d)?J:d),U=Math.round(U*B)/B,G=Math.round(G*B)/B;let ee=0;for(L&&(x&&U!==o?(e.push({value:o}),U<o&&ee++,Hi(Math.round((U+ee*R)*B)/B,o,Ll(o,j,i))&&ee++):U<o&&ee++);ee<q;++ee){let te=Math.round((U+ee*R)*B)/B;if(V&&te>l)break;e.push({value:te})}return V&&x&&G!==l?e.length&&Hi(e[e.length-1].value,l,Ll(l,j,i))?e[e.length-1].value=l:e.push({value:l}):(!V||G===l)&&e.push({value:G}),e}function Ll(i,t,{horizontal:e,minRotation:n}){let r=ut(n),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+i).length;return Math.min(t/s,o)}var $i=class extends xi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return re(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:r,max:s}=this,o=d=>r=e?r:d,l=d=>s=n?s:d;if(t){let d=gt(r),m=gt(s);d<0&&m<0?l(0):d>0&&m>0&&o(0)}if(r===s){let d=s===0?1:Math.abs(s*.05);l(s+d),t||o(r-d)}this.min=r,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:n}=t,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let r={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=Tf(r,s);return t.bounds==="ticks"&&hs(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Bi(t,this.chart.options.locale,this.options.ticks.format)}},uo=class extends $i{static id="linear";static defaults={ticks:{callback:an.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?t:0,this.max=Ee(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,n=ut(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},vn=i=>Math.floor(Ft(i)),_i=(i,t)=>Math.pow(10,vn(i)+t);function Ol(i){return i/Math.pow(10,vn(i))===1}function Fl(i,t,e){let n=Math.pow(10,e),r=Math.floor(i/n);return Math.ceil(t/n)-r}function If(i,t){let e=t-i,n=vn(e);for(;Fl(i,t,n)>10;)n++;for(;Fl(i,t,n)<10;)n--;return Math.min(n,vn(i))}function Pf(i,{min:t,max:e}){t=rt(i.min,t);let n=[],r=vn(t),s=If(t,e),o=s<0?Math.pow(10,Math.abs(s)):1,l=Math.pow(10,s),d=r>s?Math.pow(10,r):0,m=Math.round((t-d)*o)/o,h=Math.floor((t-d)/l/10)*l*10,f=Math.floor((m-h)/Math.pow(10,s)),x=rt(i.min,Math.round((d+h+f*Math.pow(10,s))*o)/o);for(;x<e;)n.push({value:x,major:Ol(x),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),x=Math.round((d+h+f*Math.pow(10,s))*o)/o;let g=rt(i.max,x);return n.push({value:g,major:Ol(g),significand:f}),n}var po=class extends xi{static id="logarithmic";static defaults={ticks:{callback:an.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let n=$i.prototype.parse.apply(this,[t,e]);if(n===0){this._zero=!0;return}return Ee(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?Math.max(0,t):null,this.max=Ee(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ee(this._userMin)&&(this.min=t===_i(this.min,0)?_i(this.min,-1):_i(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),n=this.min,r=this.max,s=l=>n=t?n:l,o=l=>r=e?r:l;n===r&&(n<=0?(s(1),o(10)):(s(_i(n,-1)),o(_i(r,1)))),n<=0&&s(_i(r,-1)),r<=0&&o(_i(n,1)),this.min=n,this.max=r}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},n=Pf(e,this);return t.bounds==="ticks"&&hs(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Bi(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=Ft(t),this._valueRange=Ft(this.max)-Ft(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ft(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function ho(i){let t=i.ticks;if(t.display&&i.display){let e=je(t.backdropPadding);return Z(t.font&&t.font.size,ye.font.size)+e.height}return 0}function Vf(i,t,e){return e=ve(e)?e:[e],{w:Aa(i,t.string,e),h:e.length*t.lineHeight}}function Rl(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function Lf(i){let t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,l=o.centerPointLabels?oe/s:0;for(let d=0;d<s;d++){let m=o.setContext(i.getPointLabelContext(d));r[d]=m.padding;let h=i.getPointPosition(d,i.drawingArea+r[d],l),f=Le(m.font),x=Vf(i.ctx,f,i._pointLabels[d]);n[d]=x;let g=Ne(i.getIndexAngle(d)+l),S=Math.round(xr(g)),w=Rl(S,h.x,x.w,0,180),A=Rl(S,h.y,x.h,90,270);Of(e,t,g,w,A)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=Hf(i,n,r)}function Of(i,t,e,n,r){let s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),l=0,d=0;n.start<t.l?(l=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+l)),r.start<t.t?(d=(t.t-r.start)/o,i.t=Math.min(i.t,t.t-d)):r.end>t.b&&(d=(r.end-t.b)/o,i.b=Math.max(i.b,t.b+d))}function Ff(i,t,e){let n=i.drawingArea,{extra:r,additionalAngle:s,padding:o,size:l}=e,d=i.getPointPosition(t,n+r+o,s),m=Math.round(xr(Ne(d.angle+Ae))),h=jf(d.y,l.h,m),f=Nf(m),x=Bf(d.x,l.w,f);return{visible:!0,x:d.x,y:h,textAlign:f,left:x,top:h,right:x+l.w,bottom:h+l.h}}function Rf(i,t){if(!t)return!0;let{left:e,top:n,right:r,bottom:s}=i;return!(Mt({x:e,y:n},t)||Mt({x:e,y:s},t)||Mt({x:r,y:n},t)||Mt({x:r,y:s},t))}function Hf(i,t,e){let n=[],r=i._pointLabels.length,s=i.options,{centerPointLabels:o,display:l}=s.pointLabels,d={extra:ho(s)/2,additionalAngle:o?oe/r:0},m;for(let h=0;h<r;h++){d.padding=e[h],d.size=t[h];let f=Ff(i,h,d);n.push(f),l==="auto"&&(f.visible=Rf(f,m),f.visible&&(m=f))}return n}function Nf(i){return i===0||i===180?"center":i<180?"left":"right"}function Bf(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function jf(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function zf(i,t,e){let{left:n,top:r,right:s,bottom:o}=e,{backdropColor:l}=t;if(!re(l)){let d=ri(t.borderRadius),m=je(t.backdropPadding);i.fillStyle=l;let h=n-m.left,f=r-m.top,x=s-n+m.width,g=o-r+m.height;Object.values(d).some(S=>S!==0)?(i.beginPath(),ji(i,{x:h,y:f,w:x,h:g,radius:d}),i.fill()):i.fillRect(h,f,x,g)}}function Wf(i,t){let{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){let s=i._pointLabelItems[r];if(!s.visible)continue;let o=n.setContext(i.getPointLabelContext(r));zf(e,o,s);let l=Le(o.font),{x:d,y:m,textAlign:h}=s;ni(e,i._pointLabels[r],d,m+l.lineHeight/2,l,{color:o.color,textAlign:h,textBaseline:"middle"})}}function cc(i,t,e,n){let{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,be);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function Gf(i,t,e,n,r){let s=i.ctx,o=t.circular,{color:l,lineWidth:d}=t;!o&&!n||!l||!d||e<0||(s.save(),s.strokeStyle=l,s.lineWidth=d,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),cc(i,e,o,n),s.closePath(),s.stroke(),s.restore())}function $f(i,t,e){return Ht(i,{label:e,index:t,type:"pointLabel"})}var fo=class extends $i{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:an.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=je(ho(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=Ee(t)&&!isNaN(t)?t:0,this.max=Ee(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ho(this.options))}generateTickLabels(t){$i.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{let r=_e(this.options.pointLabels.callback,[e,n],this);return r||r===0?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?Lf(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){let e=be/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ne(t*e+ut(n))}getDistanceFromCenterForValue(t){if(re(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(re(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let n=e[t];return $f(this.getContext(),t,n)}}getPointPosition(t,e,n=0){let r=this.getIndexAngle(t)-Ae+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),cc(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:n,grid:r,border:s}=e,o=this._pointLabels.length,l,d,m;if(e.pointLabels.display&&Wf(this,o),r.display&&this.ticks.forEach((h,f)=>{if(f!==0||f===0&&this.min<0){d=this.getDistanceFromCenterForValue(h.value);let x=this.getContext(f),g=r.setContext(x),S=s.setContext(x);Gf(this,g,d,o,S)}}),n.display){for(t.save(),l=o-1;l>=0;l--){let h=n.setContext(this.getPointLabelContext(l)),{color:f,lineWidth:x}=h;!x||!f||(t.lineWidth=x,t.strokeStyle=f,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,d=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),m=this.getPointPosition(l,d),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(m.x,m.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;let r=this.getIndexAngle(0),s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,d)=>{if(d===0&&this.min>=0&&!e.reverse)return;let m=n.setContext(this.getContext(d)),h=Le(m.font);if(s=this.getDistanceFromCenterForValue(this.ticks[d].value),m.showLabelBackdrop){t.font=h.string,o=t.measureText(l.label).width,t.fillStyle=m.backdropColor;let f=je(m.backdropPadding);t.fillRect(-o/2-f.left,-s-h.size/2-f.top,o+f.width,h.size+f.height)}ni(t,l.label,0,-s,h,{color:m.color,strokeColor:m.textStrokeColor,strokeWidth:m.textStrokeWidth})}),t.restore()}drawTitle(){}},Gr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ot=Object.keys(Gr);function Hl(i,t){return i-t}function Nl(i,t){if(re(t))return null;let e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts,o=t;return typeof n=="function"&&(o=n(o)),Ee(o)||(o=typeof n=="string"?e.parse(o,n):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(hi(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function Bl(i,t,e,n){let r=ot.length;for(let s=ot.indexOf(i);s<r-1;++s){let o=Gr[ot[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=n)return ot[s]}return ot[r-1]}function Uf(i,t,e,n,r){for(let s=ot.length-1;s>=ot.indexOf(e);s--){let o=ot[s];if(Gr[o].common&&i._adapter.diff(r,n,o)>=t-1)return o}return ot[e?ot.indexOf(e):0]}function Yf(i){for(let t=ot.indexOf(i)+1,e=ot.length;t<e;++t)if(Gr[ot[t]].common)return ot[t]}function jl(i,t,e){if(!e)i[t]=!0;else if(e.length){let{lo:n,hi:r}=vr(e,t),s=e[n]>=t?e[n]:e[r];i[s]=!0}}function qf(i,t,e,n){let r=i._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value,l,d;for(l=s;l<=o;l=+r.add(l,1,n))d=e[l],d>=0&&(t[d].major=!0);return t}function zl(i,t,e){let n=[],r={},s=t.length,o,l;for(o=0;o<s;++o)l=t[o],r[l]=o,n.push({value:l,major:!1});return s===0||!e?n:qf(i,n,r,e)}var go=(()=>{class i extends xi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){let r=e.time||(e.time={}),s=this._adapter=new rp._date(e.adapters.date);s.init(n),Fi(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Nl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,n=this._adapter,r=e.time.unit||"day",{min:s,max:o,minDefined:l,maxDefined:d}=this.getUserBounds();function m(h){!l&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!d&&!isNaN(h.max)&&(o=Math.max(o,h.max))}(!l||!d)&&(m(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&m(this.getMinMax(!1))),s=Ee(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=Ee(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){let e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,l=this.max,d=wa(s,o,l);return this._unit=n.unit||(r.autoSkip?Bl(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):Uf(this,d.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Yf(this._unit),this.initOffsets(s),e.reverse&&d.reverse(),zl(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);let l=e.length<3?.5:.25;n=Fe(n,0,l),r=Fe(r,0,l),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){let e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,l=o.unit||Bl(o.minUnit,n,r,this._getLabelCapacity(n)),d=Z(s.ticks.stepSize,1),m=l==="week"?o.isoWeekday:!1,h=hi(m)||m===!0,f={},x=n,g,S;if(h&&(x=+e.startOf(x,"isoWeek",m)),x=+e.startOf(x,h?"day":l),e.diff(r,n,l)>1e5*d)throw new Error(n+" and "+r+" are too far apart with stepSize of "+d+" "+l);let w=s.ticks.source==="data"&&this.getDataTimestamps();for(g=x,S=0;g<r;g=+e.add(g,d,l),S++)jl(f,g,w);return(g===r||s.bounds==="ticks"||S===1)&&jl(f,g,w),Object.keys(f).sort(Hl).map(A=>+A)}getLabelForValue(e){let n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){let s=this.options.time.displayFormats,o=this._unit,l=n||s[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,r,s){let o=this.options,l=o.ticks.callback;if(l)return _e(l,[e,n,r],this);let d=o.time.displayFormats,m=this._unit,h=this._majorUnit,f=m&&d[m],x=h&&d[h],g=r[n],S=h&&x&&g&&g.major;return this._adapter.format(e,s||(S?x:f))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){let n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){let n=this.options.ticks,r=this.ctx.measureText(e).width,s=ut(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),l=Math.sin(s),d=this._resolveTickFontOptions(0).size;return{w:r*o+d*l,h:r*l+d*o}}_getLabelCapacity(e){let n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,zl(this,[e],this._majorUnit),s),l=this._getLabelSize(o),d=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],n,r;if(e.length)return e;let s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Nl(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return xs(e.sort(Hl))}}return i})();function Vr(i,t,e){let n=0,r=i.length-1,s,o,l,d;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=St(i,"pos",t)),{pos:s,time:l}=i[n],{pos:o,time:d}=i[r]):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=St(i,"time",t)),{time:s,pos:l}=i[n],{time:o,pos:d}=i[r]);let m=o-s;return m?l+(d-l)*(t-s)/m:l}var _o=class extends go{static id="timeseries";static defaults=go.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Vr(e,this.min),this._tableRange=Vr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:n}=this,r=[],s=[],o,l,d,m,h;for(o=0,l=t.length;o<l;++o)m=t[o],m>=e&&m<=n&&r.push(m);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)h=r[o+1],d=r[o-1],m=r[o],Math.round((h+d)/2)!==m&&s.push({time:m,pos:o/(l-1)});return s}_generate(){let t=this.min,e=this.max,n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Vr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Vr(this._table,n*this._tableRange+this._minPos,!0)}},Kf=Object.freeze({__proto__:null,CategoryScale:Df,LinearScale:uo,LogarithmicScale:po,RadialLinearScale:fo,TimeScale:go,TimeSeriesScale:_o}),dc=[np,Dh,Mf,Kf];var Qf=["dateInput"],Xf=i=>["/locations",i],Jf=i=>["/assets/preview",i],Zf=()=>["all","category","location","department","manufacturer","parent","children","siblings","similar"];function eg(i,t){if(i&1){let e=H();a(0,"div",28)(1,"button",29),D("click",function(){k(e);let r=_();return r.transferAsset(),E(r.showActionsDropdown=!1)}),M(),a(2,"svg",30),y(3,"path",31),c(),T(),a(4,"span",32),u(5,"Transfer Asset"),c()(),a(6,"button",29),D("click",function(){k(e);let r=_();return r.duplicateAsset(),E(r.showActionsDropdown=!1)}),M(),a(7,"svg",30),y(8,"path",33),c(),T(),a(9,"span",32),u(10,"Duplicate"),c()(),y(11,"div",34),a(12,"button",29),D("click",function(){k(e);let r=_();return r.printAsset(),E(r.showActionsDropdown=!1)}),M(),a(13,"svg",30),y(14,"path",35),c(),T(),a(15,"span",32),u(16,"Print"),c()(),a(17,"button",29),D("click",function(){k(e);let r=_();return r.exportAsset(),E(r.showActionsDropdown=!1)}),M(),a(18,"svg",30),y(19,"path",36),c(),T(),a(20,"span",32),u(21,"Export"),c()(),a(22,"button",29),D("click",function(){k(e);let r=_();return r.sharePublicUrl(),E(r.showActionsDropdown=!1)}),M(),a(23,"svg",30),y(24,"path",37),c(),T(),a(25,"span",32),u(26,"Share Public URL"),c()()()}}function tg(i,t){i&1&&(a(0,"div",38)(1,"div",39)(2,"div",40),M(),a(3,"svg",41),y(4,"circle",42)(5,"path",43),c()(),T(),a(6,"h3",44),u(7,"Loading Asset"),c(),a(8,"p",45),u(9,"Please wait while we fetch the asset details..."),c()()())}function ig(i,t){if(i&1){let e=H();a(0,"div",38)(1,"div",39)(2,"div",46),M(),a(3,"svg",47),y(4,"path",48),c()(),T(),a(5,"h3",44),u(6,"Error Loading Asset"),c(),a(7,"p",49),u(8),c(),a(9,"button",50),D("click",function(){k(e);let r=_();return E(r.goBack())}),u(10," Back to Assets "),c()()()}if(i&2){let e=_();p(8),O(e.error)}}function ng(i,t){if(i&1&&(a(0,"span",175),u(1),c()),i&2){let e=_(2);Ce("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),p(),W(" ",e.asset.asset_status.name," ")}}function rg(i,t){if(i&1){let e=H();a(0,"div",7)(1,"span",45),u(2,"Serial:"),c(),a(3,"button",62),D("click",function(){k(e);let r=_(2);return E(r.copySerialNumber())}),a(4,"span"),u(5),c(),M(),a(6,"svg",63),y(7,"path",33),c()()()}if(i&2){let e=_(2);p(5),O(e.asset.serial_number)}}function sg(i,t){if(i&1){let e=H();a(0,"button",183),D("click",function(){k(e);let r=_(3);return E(r.previousImage())}),M(),a(1,"svg",18),y(2,"path",184),c()()}}function og(i,t){if(i&1){let e=H();a(0,"button",185),D("click",function(){k(e);let r=_(3);return E(r.nextImage())}),M(),a(1,"svg",18),y(2,"path",10),c()()}}function ag(i,t){if(i&1){let e=H();a(0,"div",188),D("click",function(){let r=k(e).index,s=_(4);return E(s.selectImage(r))}),a(1,"img",189),D("error",function(r){k(e);let s=_(4);return E(s.onImageError(r))}),c()()}if(i&2){let e=t.$implicit,n=t.index,r=_(4);z("border-blue-500",n===r.currentImageIndex)("border-gray-200",n!==r.currentImageIndex),p(),v("src",e.image_url,ke)("alt","Asset image "+(n+1))}}function lg(i,t){if(i&1&&(a(0,"div",186),I(1,ag,2,6,"div",187),c()),i&2){let e=_(3);p(),v("ngForOf",e.asset.images)}}function cg(i,t){if(i&1){let e=H();a(0,"div")(1,"div",176)(2,"div",177)(3,"img",178),D("click",function(){k(e);let r=_(2);return E(r.viewFullImage(r.selectedImageUrl||r.asset.images[0].image_url))})("error",function(r){k(e);let s=_(2);return E(s.onImageError(r))}),c(),I(4,sg,3,0,"button",179)(5,og,3,0,"button",180),a(6,"div",181),u(7),c()()(),I(8,lg,2,1,"div",182),c()}if(i&2){let e=_(2);p(3),v("src",e.selectedImageUrl||e.asset.images[0].image_url,ke)("alt",e.asset.name),p(),v("ngIf",e.asset.images.length>1),p(),v("ngIf",e.asset.images.length>1),p(2),De(" ",e.currentImageIndex+1," / ",e.asset.images.length," "),p(),v("ngIf",e.asset.images.length>1)}}function dg(i,t){i&1&&(a(0,"div",190),M(),a(1,"svg",191),y(2,"path",70),c(),T(),a(3,"h3",44),u(4,"No Images Available"),c(),a(5,"p",192),u(6,"No images have been uploaded for this asset."),c()())}function mg(i,t){if(i&1){let e=H();a(0,"button",193),D("click",function(){k(e);let r=_(2);return E(r.descriptionExpanded=!r.descriptionExpanded)}),u(1),c()}if(i&2){let e=_(2);p(),W(" ",e.descriptionExpanded?"Show Less":"Show More"," ")}}function ug(i,t){if(i&1){let e=H();a(0,"img",194),D("error",function(r){k(e);let s=_(2);return E(s.onCategoryIconError(r,s.asset.category))}),c()}if(i&2){let e=_(2);v("src",e.asset.category.icon,ke)("alt",e.asset.category.name)}}function pg(i,t){i&1&&(M(),a(0,"svg",159),y(1,"path",195),c())}function hg(i,t){if(i&1&&(a(0,"div",7)(1,"span",196),u(2),c()()),i&2){let e=_(2);p(),Ce("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),p(),W(" ",e.asset.asset_status.name," ")}}function fg(i,t){i&1&&(a(0,"span",90),u(1,"Not specified"),c())}function gg(i,t){if(i&1&&(a(0,"a",197),u(1),c()),i&2){let e=_(2);v("routerLink",Gt(2,Xf,e.asset.location.id)),p(),W(" ",e.asset.location.name," ")}}function _g(i,t){if(i&1&&(a(0,"span",90),u(1),c()),i&2){let e=_(2);p(),O((e.asset==null||e.asset.location==null?null:e.asset.location.name)||"No location assigned")}}function xg(i,t){if(i&1&&(a(0,"div")(1,"h4",76),u(2,"Parent Asset"),c(),a(3,"a",197),u(4),c()()),i&2){let e=_(2);p(3),v("routerLink",Gt(3,Jf,e.asset.parent.id)),p(),De(" ",e.asset.parent.name," (",e.asset.parent.asset_id,") ")}}function vg(i,t){if(i&1&&y(0,"img",198),i&2){let e=_(2);v("src",e.qrCodeDataUrl,ke)}}function bg(i,t){if(i&1&&y(0,"img",198),i&2){let e=_(2);v("src",e.asset.qr_code_url,ke)}}function yg(i,t){i&1&&(a(0,"div",199),y(1,"div",200),c())}function wg(i,t){if(i&1&&(a(0,"div",39),M(),a(1,"svg",201),y(2,"path",202),c(),T(),a(3,"p",203),u(4),c()()),i&2){let e=_(2);p(4),O(e.asset.asset_id||e.asset.id)}}function Cg(i,t){i&1&&(a(0,"div",204),M(),a(1,"svg",205),y(2,"path",48),c(),T(),a(3,"p",206),u(4,"No Asset ID"),c()())}function Sg(i,t){if(i&1){let e=H();a(0,"button",207),D("click",function(){k(e);let r=_(2);return E(r.downloadQRCode())}),u(1," Download "),c()}}function Mg(i,t){if(i&1){let e=H();a(0,"button",208),D("click",function(){k(e);let r=_(2);return E(r.copyPublicUrl())}),u(1," Copy URL "),c()}}function kg(i,t){if(i&1&&y(0,"img",209),i&2){let e=_(2);v("src",e.asset.barcode_url,ke)}}function Eg(i,t){if(i&1&&y(0,"img",209),i&2){let e=_(2);v("src",e.barcodeDataUrl,ke)}}function Ag(i,t){i&1&&(a(0,"div",210),y(1,"div",200),c())}function Dg(i,t){if(i&1&&(a(0,"div",211),M(),a(1,"svg",212),y(2,"path",74),c(),T(),a(3,"p",203),u(4),c()()),i&2){let e=_(2);p(4),O(e.asset.asset_id)}}function Tg(i,t){i&1&&(a(0,"div",213),M(),a(1,"svg",205),y(2,"path",48),c(),T(),a(3,"p",206),u(4,"No Asset ID"),c()())}function Ig(i,t){if(i&1){let e=H();a(0,"button",207),D("click",function(){k(e);let r=_(2);return E(r.downloadBarcode())}),u(1," Download "),c()}}function Pg(i,t){if(i&1){let e=H();a(0,"button",208),D("click",function(){k(e);let r=_(2);return E(r.copyAssetId())}),u(1," Copy ID "),c()}}function Vg(i,t){if(i&1&&(a(0,"p",214),u(1),c()),i&2){let e=_(2);p(),O(e.asset.asset_id)}}function Lg(i,t){if(i&1&&(a(0,"span",215),u(1),c()),i&2){let e=_(3);p(),W(" ",e.asset.asset_status.description," ")}}function Og(i,t){if(i&1&&(a(0,"div",7)(1,"span",196),u(2),c(),I(3,Lg,2,1,"span",174),c()),i&2){let e=_(2);p(),Ce("background-color",e.asset.asset_status.color+"20")("color",e.asset.asset_status.color),p(),W(" ",e.asset.asset_status.name," "),p(),v("ngIf",e.asset.asset_status.description)}}function Fg(i,t){i&1&&(a(0,"span",90),u(1,"Not specified"),c())}function Rg(i,t){if(i&1){let e=H();a(0,"div")(1,"h4",113),u(2,"Serial Number"),c(),a(3,"div",7)(4,"span",216),u(5),c(),a(6,"button",217),D("click",function(){k(e);let r=_(2);return E(r.copySerialNumber())}),M(),a(7,"svg",14),y(8,"path",33),c()()()()}if(i&2){let e=_(2);p(5),O(e.asset.serial_number)}}function Hg(i,t){if(i&1&&(a(0,"div",221)(1,"span",143),u(2),c(),a(3,"span",222),u(4),c()()),i&2){let e=t.$implicit;p(2),W("",e.key,":"),p(2),O(e.value)}}function Ng(i,t){if(i&1&&(a(0,"div",218)(1,"h4",168),u(2,"Additional Specifications"),c(),a(3,"div",219),I(4,Hg,5,2,"div",220),Xe(5,"keyvalue"),c()()),i&2){let e=_(2);p(4),v("ngForOf",Po(5,1,e.asset.specifications))}}function Bg(i,t){if(i&1&&(a(0,"div",223)(1,"div",155)(2,"div",137),u(3,"Average Health Score"),c(),a(4,"div",224),u(5),c()(),a(6,"div",139)(7,"div",137),u(8,"Average Performance"),c(),a(9,"div",140),u(10),c()(),a(11,"div",172)(12,"div",137),u(13,"Total Maintenance"),c(),a(14,"div",225),u(15),c()()()),i&2){let e=_(2);p(5),W("",e.healthPerformanceChartData.chart_data.metrics.average_health_score,"%"),p(5),W("",e.healthPerformanceChartData.chart_data.metrics.average_performance_score,"%"),p(5),O(e.healthPerformanceChartData.chart_data.metrics.total_maintenance_count)}}function jg(i,t){i&1&&(a(0,"div",226)(1,"div",39)(2,"div",227),M(),a(3,"svg",228),y(4,"circle",42)(5,"path",43),c()(),T(),a(6,"p",45),u(7,"Loading health & performance data..."),c()()())}function zg(i,t){if(i&1){let e=H();a(0,"div",229)(1,"div",39)(2,"div",230),u(3),c(),a(4,"button",148),D("click",function(){k(e);let r=_(2);return E(r.loadHealthPerformanceChart())}),u(5," Try Again "),c()()()}if(i&2){let e=_(2);p(3),O(e.healthPerformanceChartError)}}function Wg(i,t){i&1&&(a(0,"div",231),y(1,"canvas",232),c())}function Gg(i,t){i&1&&(a(0,"div",233),u(1," Green: Health Score | Blue: Performance Score | Orange: Maintenance Count "),c())}function $g(i,t){if(i&1&&(a(0,"div",234)(1,"div",142)(2,"div",143),u(3,"Health Trend"),c(),a(4,"div",235),u(5),c()(),a(6,"div",142)(7,"div",143),u(8,"Performance Trend"),c(),a(9,"div",235),u(10),c()()()),i&2){let e=_(2);p(4),v("ngClass",e.healthPerformanceChartData.chart_data.metrics.health_trend>=0?"text-green-600":"text-red-600"),p(),De(" ",e.healthPerformanceChartData.chart_data.metrics.health_trend>=0?"+":"","",e.healthPerformanceChartData.chart_data.metrics.health_trend,"% "),p(4),v("ngClass",e.healthPerformanceChartData.chart_data.metrics.performance_trend>=0?"text-green-600":"text-red-600"),p(),De(" ",e.healthPerformanceChartData.chart_data.metrics.performance_trend>=0?"+":"","",e.healthPerformanceChartData.chart_data.metrics.performance_trend,"% ")}}function Ug(i,t){i&1&&(a(0,"div",226)(1,"div",39)(2,"div",236),M(),a(3,"svg",237),y(4,"circle",42)(5,"path",43),c()(),T(),a(6,"p",45),u(7,"Loading chart data..."),c()()())}function Yg(i,t){if(i&1){let e=H();a(0,"div",229)(1,"div",39)(2,"div",230),u(3),c(),a(4,"button",148),D("click",function(){k(e);let r=_(2);return E(r.loadDepreciationChart())}),u(5," Try Again "),c()()()}if(i&2){let e=_(2);p(3),O(e.depreciationChartError)}}function qg(i,t){i&1&&(a(0,"div",231),y(1,"canvas",238),c())}function Kg(i,t){i&1&&(a(0,"div",233),u(1," Blue line: Asset Value | Red line: Accumulated Depreciation "),c())}function Qg(i,t){i&1&&(a(0,"div",239)(1,"div",39)(2,"div",236),M(),a(3,"svg",237),y(4,"circle",42)(5,"path",43),c()(),T(),a(6,"p",45),u(7,"Loading activities..."),c()()())}function Xg(i,t){if(i&1){let e=H();a(0,"div",240)(1,"div",230),u(2),c(),a(3,"button",148),D("click",function(){k(e);let r=_(2);return E(r.loadActivityHistory())}),u(4," Try Again "),c()()}if(i&2){let e=_(2);p(2),O(e.activityError)}}function Jg(i,t){if(i&1&&(a(0,"div",249),u(1),c()),i&2){let e=_().$implicit,n=_(3);p(),W(" ",n.formatActivityBeforeAfter(e.before,e.after)," ")}}function Zg(i,t){if(i&1&&(a(0,"div",250)(1,"strong"),u(2,"By:"),c(),u(3),c()),i&2){let e=_().$implicit,n=_(3);p(3),W(" ",n.getUserDisplayName(e.user)," ")}}function e1(i,t){if(i&1&&(a(0,"div",242)(1,"div",243),M(),a(2,"svg",14),y(3,"path",56),c()(),T(),a(4,"div",244)(5,"div",245)(6,"h4",246),u(7),c(),a(8,"span",215),u(9),c()(),a(10,"p",137),u(11),c(),I(12,Jg,2,1,"div",247)(13,Zg,4,1,"div",248),c()()),i&2){let e=t.$implicit,n=_(3);p(),v("ngClass",n.getActivityColor(e.action)),p(2),Tn("d",n.getActivityIcon(e.action)),p(4),O(e.action),p(2),O(e.time_ago),p(2),O(e.comment||"No comment"),p(),v("ngIf",n.formatActivityBeforeAfter(e.before,e.after)),p(),v("ngIf",e.user)}}function t1(i,t){i&1&&(a(0,"div",240),M(),a(1,"svg",251),y(2,"path",92),c(),T(),a(3,"h3",44),u(4,"No Recent Activity"),c(),a(5,"p",192),u(6,"No activity has been recorded for this asset yet."),c()())}function i1(i,t){if(i&1&&(a(0,"div",112),I(1,e1,14,7,"div",241)(2,t1,7,0,"div",145),c()),i&2){let e=_(2);p(),v("ngForOf",e.activities),p(),v("ngIf",e.activities.length===0)}}function n1(i,t){if(i&1){let e=H();a(0,"button",253),D("click",function(){let r=k(e).$implicit,s=_(3);return s.onRelatedFilterChange(r),E(s.showRelatedFilterDropdown=!1)}),a(1,"span",254),u(2),c()()}if(i&2){let e=t.$implicit,n=_(3);z("text-blue-600",n.selectedRelatedFilter===e)("bg-blue-50",n.selectedRelatedFilter===e),p(2),O(n.getRelatedFilterDisplayName(e))}}function r1(i,t){i&1&&(a(0,"div",28),I(1,n1,3,5,"button",252),c()),i&2&&(p(),v("ngForOf",Si(1,Zf)))}function s1(i,t){i&1&&(a(0,"div",239)(1,"div",39)(2,"div",236),M(),a(3,"svg",237),y(4,"circle",42)(5,"path",43),c()(),T(),a(6,"p",45),u(7,"Loading related assets..."),c()()())}function o1(i,t){if(i&1){let e=H();a(0,"div",240)(1,"div",230),u(2),c(),a(3,"button",148),D("click",function(){k(e);let r=_(2);return E(r.loadRelatedAssets())}),u(4," Try Again "),c()()}if(i&2){let e=_(2);p(2),O(e.relatedAssetsError)}}function a1(i,t){if(i&1){let e=H();a(0,"img",267),D("error",function(r){k(e);let s=_(4);return E(s.onImageError(r))}),c()}if(i&2){let e=_().$implicit;v("src",e.images[0].image_url,ke)("alt",e.name)}}function l1(i,t){i&1&&(M(),a(0,"svg",268),y(1,"path",269),c())}function c1(i,t){if(i&1&&(a(0,"span",215),u(1),c()),i&2){let e=_().$implicit;p(),W(" Health: ",e.health_score,"% ")}}function d1(i,t){if(i&1){let e=H();a(0,"div",257),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.navigateToRelatedAsset(r.id))}),a(1,"div",258),I(2,a1,1,2,"img",259)(3,l1,2,0,"svg",260),c(),a(4,"div",261)(5,"div",245)(6,"h4",262),u(7),c(),a(8,"span",215),u(9),c()(),a(10,"div",263)(11,"span",170),u(12),c(),a(13,"span",264),u(14,"\u2022"),c(),a(15,"span",170),u(16),c()(),a(17,"div",7)(18,"span",265),u(19),c(),I(20,c1,2,1,"span",174),c()(),M(),a(21,"svg",266),y(22,"path",10),c()()}if(i&2){let e=t.$implicit,n=_(3);p(2),v("ngIf",e.images&&e.images.length>0),p(),v("ngIf",!e.images||e.images.length===0),p(4),O(e.name),p(2),O(e.asset_id),p(3),O((e.category==null?null:e.category.name)||"General"),p(4),O((e.asset_type==null?null:e.asset_type.name)||e.type),p(2),v("ngClass",n.getRelatedAssetStatusColor(e.asset_status||e.status)),p(),W(" ",(e.asset_status==null?null:e.asset_status.name)||e.status," "),p(),v("ngIf",e.health_score)}}function m1(i,t){i&1&&(a(0,"div",240),M(),a(1,"svg",251),y(2,"path",269),c(),T(),a(3,"h3",44),u(4,"No Related Assets"),c(),a(5,"p",192),u(6,"No related assets found for this item."),c()())}function u1(i,t){if(i&1&&(a(0,"div",255),I(1,d1,23,9,"div",256)(2,m1,7,0,"div",145),c()),i&2){let e=_(2);p(),v("ngForOf",e.relatedAssets),p(),v("ngIf",e.relatedAssets.length===0)}}function p1(i,t){i&1&&(a(0,"div",270)(1,"div",271),M(),a(2,"svg",272),y(3,"circle",42)(4,"path",43),c()(),T(),a(5,"p",250),u(6,"Loading..."),c()())}function h1(i,t){if(i&1&&(a(0,"div",284),u(1),c()),i&2){let e=_().$implicit;p(),W(" ",e.notes," ")}}function f1(i,t){if(i&1){let e=H();a(0,"div",274)(1,"div",275)(2,"h4",276),u(3),c(),a(4,"div",277)(5,"span"),u(6),c(),a(7,"button",278),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.editMaintenanceSchedule(r))}),M(),a(8,"svg",63),y(9,"path",15),c()(),T(),a(10,"button",279),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.deleteMaintenanceSchedule(r))}),M(),a(11,"svg",63),y(12,"path",280),c()()()(),T(),a(13,"div",281)(14,"div")(15,"span",192),u(16,"Next Due:"),c(),a(17,"span",282),u(18),c()(),a(19,"div")(20,"span",192),u(21,"Frequency:"),c(),a(22,"span",282),u(23),c()()(),I(24,h1,2,1,"div",283),c()}if(i&2){let e=t.$implicit,n=_(3);p(3),O(e.schedule_type),p(2),Te("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+n.getScheduleStatusColor(e.status)+"-100 text-"+n.getScheduleStatusColor(e.status)+"-800"),p(),W(" ",e.status," "),p(12),O(n.formatDate(e.next_due)),p(5),O(e.frequency||"Not specified"),p(),v("ngIf",e.notes)}}function g1(i,t){if(i&1&&(a(0,"div",255),I(1,f1,25,7,"div",273),c()),i&2){let e=_(2);p(),v("ngForOf",e.maintenanceSchedules)}}function _1(i,t){if(i&1){let e=H();a(0,"div",270),M(),a(1,"svg",285),y(2,"path",91),c(),T(),a(3,"h3",286),u(4,"No Maintenance Schedules"),c(),a(5,"p",287),u(6,"Create maintenance schedules to track asset upkeep."),c(),a(7,"button",288),D("click",function(){k(e);let r=_(2);return E(r.addMaintenanceSchedule())}),u(8," Add First Schedule "),c()()}}function x1(i,t){if(i&1&&(a(0,"span",215),u(1),Xe(2,"date"),c()),i&2){let e=_(2);p(),W(" (Expires: ",$t(2,1,e.asset.warranty,"MMM d, y"),") ")}}function v1(i,t){if(i&1){let e=H();a(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",5)(4,"div",54),M(),a(5,"svg",55),y(6,"path",56),c()(),T(),a(7,"div")(8,"h1",57),u(9),c(),a(10,"div",5),I(11,ng,2,5,"span",58),a(12,"span",59),u(13),c(),a(14,"span",59),u(15,"\u2022"),c(),a(16,"span",59),u(17),c()()()(),a(18,"div",60)(19,"div",61)(20,"span",45),u(21,"Asset ID:"),c(),a(22,"button",62),D("click",function(){k(e);let r=_();return E(r.copyAssetId())}),a(23,"span"),u(24),c(),M(),a(25,"svg",63),y(26,"path",33),c()()(),I(27,rg,8,1,"div",64),c()()(),T(),a(28,"div",65)(29,"div",66)(30,"div",67)(31,"div",68),M(),a(32,"svg",69),y(33,"path",70),c(),T(),a(34,"h2",71),u(35,"Asset Images"),c()(),I(36,cg,9,7,"div",72)(37,dg,7,0,"ng-template",null,0,Vo),c(),a(39,"div",67)(40,"div",73),M(),a(41,"svg",69),y(42,"path",74),c(),T(),a(43,"h2",71),u(44,"Basic Information"),c()(),a(45,"div",65)(46,"div",75)(47,"div")(48,"h4",76),u(49,"Asset Name"),c(),a(50,"p",71),u(51),c()(),a(52,"div")(53,"h4",76),u(54,"Description"),c(),a(55,"div",77)(56,"p",78),u(57),c(),I(58,mg,2,1,"button",79),c()(),a(59,"div")(60,"h4",76),u(61,"Category"),c(),a(62,"div",12)(63,"div",80),I(64,ug,1,2,"img",81)(65,pg,2,0,"svg",82),c(),a(66,"span",11),u(67),c()()(),a(68,"div")(69,"h4",76),u(70,"Status"),c(),I(71,hg,3,5,"div",64)(72,fg,2,0,"span",83),c()(),a(73,"div",75)(74,"div")(75,"h4",76),u(76,"Asset ID"),c(),a(77,"div",7)(78,"span",84),u(79),c(),a(80,"button",85),D("click",function(){k(e);let r=_();return E(r.copyAssetId())}),M(),a(81,"svg",14),y(82,"path",33),c()()()(),T(),a(83,"div")(84,"h4",76),u(85,"Location"),c(),a(86,"div",7),M(),a(87,"svg",86),y(88,"path",87)(89,"path",88),c(),I(90,gg,2,4,"a",89)(91,_g,2,1,"span",83),c()(),T(),a(92,"div")(93,"h4",76),u(94,"Department"),c(),a(95,"span",90),u(96),c()(),a(97,"div")(98,"h4",76),u(99,"Created"),c(),a(100,"div",7),M(),a(101,"svg",86),y(102,"path",91),c(),T(),a(103,"span",90),u(104),Xe(105,"date"),c()()(),a(106,"div")(107,"h4",76),u(108,"Last Modified"),c(),a(109,"div",7),M(),a(110,"svg",86),y(111,"path",92),c(),T(),a(112,"span",90),u(113),Xe(114,"date"),c()()(),I(115,xg,5,5,"div",93),c(),a(116,"div",75)(117,"div")(118,"h4",76),u(119,"QR Code"),c(),a(120,"div",94)(121,"div",95),I(122,vg,1,1,"img",96)(123,bg,1,1,"img",96)(124,yg,2,0,"div",97)(125,wg,5,1,"div",98)(126,Cg,5,0,"div",99),c(),a(127,"div",100),I(128,Sg,2,0,"button",101)(129,Mg,2,0,"button",102),c(),a(130,"div",103)(131,"p"),u(132,"Scan to access public page"),c()()()(),a(133,"div")(134,"h4",76),u(135,"Barcode"),c(),a(136,"div",94)(137,"div",104),I(138,kg,1,1,"img",105)(139,Eg,1,1,"img",105)(140,Ag,2,0,"div",106)(141,Dg,5,1,"div",107)(142,Tg,5,0,"div",108),c(),a(143,"div",100),I(144,Ig,2,0,"button",101)(145,Pg,2,0,"button",102),c(),a(146,"div",103)(147,"p"),u(148,"Scan for asset identification"),c(),I(149,Vg,2,1,"p",109),c()()()()()(),a(150,"div",67)(151,"div",68),M(),a(152,"svg",69),y(153,"path",110),c(),T(),a(154,"h2",71),u(155,"Technical Specifications"),c()(),a(156,"div",111)(157,"div",112)(158,"div")(159,"h4",113),u(160,"Asset Status"),c(),I(161,Og,4,6,"div",64)(162,Fg,2,0,"span",83),c(),a(163,"div")(164,"h4",113),u(165,"Manufacturer"),c(),a(166,"span",90),u(167),c()(),a(168,"div")(169,"h4",113),u(170,"Model"),c(),a(171,"span",90),u(172),c()(),I(173,Rg,9,1,"div",93),a(174,"div")(175,"h4",113),u(176,"Brand"),c(),a(177,"span",90),u(178),c()(),a(179,"div")(180,"h4",113),u(181,"Capacity"),c(),a(182,"span",90),u(183),c()()(),a(184,"div",112)(185,"div")(186,"h4",113),u(187,"Dimensions"),c(),a(188,"span",90),u(189),c()(),a(190,"div")(191,"h4",113),u(192,"Weight"),c(),a(193,"span",90),u(194),c()(),a(195,"div")(196,"h4",113),u(197,"Power Requirements"),c(),a(198,"span",90),u(199),c()(),a(200,"div")(201,"h4",113),u(202,"Operating Conditions"),c(),a(203,"span",90),u(204),c()()()(),I(205,Ng,6,3,"div",114),c(),a(206,"div",67)(207,"div",115)(208,"div",7)(209,"div",116),M(),a(210,"svg",117),y(211,"path",118),c()(),T(),a(212,"h2",71),u(213,"Health & Performance"),c()(),a(214,"div",7)(215,"button",119),D("click",function(){k(e);let r=_();return E(r.refreshHealthPerformanceChart())}),M(),a(216,"svg",14),y(217,"path",120),c(),T(),a(218,"span"),u(219,"Refresh"),c()(),a(220,"button",121),D("click",function(){k(e);let r=_();return E(r.forceCreateHealthPerformanceChart())}),M(),a(221,"svg",14),y(222,"path",122),c(),T(),a(223,"span"),u(224,"Debug"),c()()()(),I(225,Bg,16,3,"div",123),a(226,"div",112)(227,"div",39)(228,"h3",124),u(229,"Health & Performance Timeline (Last 12 Months)"),c()(),I(230,jg,8,0,"div",125)(231,zg,6,1,"div",126)(232,Wg,2,0,"div",127)(233,Gg,2,0,"div",128)(234,$g,11,6,"div",129),c()(),a(235,"div",67)(236,"div",130)(237,"div",7)(238,"div",131),M(),a(239,"svg",132),y(240,"path",133),c()(),T(),a(241,"h2",71),u(242,"Asset Depreciation"),c()(),a(243,"div",7)(244,"button",134),D("click",function(){k(e);let r=_();return E(r.refreshDepreciationChart())}),M(),a(245,"svg",14),y(246,"path",120),c(),T(),a(247,"span"),u(248,"Refresh"),c()(),a(249,"button",121),D("click",function(){k(e);let r=_();return E(r.forceCreateChart())}),M(),a(250,"svg",14),y(251,"path",122),c(),T(),a(252,"span"),u(253,"Debug"),c()()()(),a(254,"div",135)(255,"div",136)(256,"div",137),u(257,"Original Value"),c(),a(258,"div",138),u(259),c()(),a(260,"div",139)(261,"div",137),u(262,"Current Value"),c(),a(263,"div",140),u(264),c()()(),a(265,"div",112)(266,"div",39)(267,"h3",124),u(268,"Depreciation Timeline (straight-line method)"),c()(),I(269,Ug,8,0,"div",125)(270,Yg,6,1,"div",126)(271,qg,2,0,"div",127)(272,Kg,2,0,"div",128),a(273,"div",141)(274,"div",142)(275,"div",143),u(276,"Annual Depreciation"),c(),a(277,"div",71),u(278),c()(),a(279,"div",142)(280,"div",143),u(281,"Depreciation Rate"),c(),a(282,"div",71),u(283),c()(),a(284,"div",142)(285,"div",143),u(286,"Years Remaining"),c(),a(287,"div",71),u(288),c()()()()()(),a(289,"div",75)(290,"div",67)(291,"div",68),M(),a(292,"svg",69),y(293,"path",92),c(),T(),a(294,"h2",71),u(295,"Recent Activity"),c()(),I(296,Qg,8,0,"div",144)(297,Xg,5,1,"div",145)(298,i1,3,2,"div",146),a(299,"div",147)(300,"button",148),D("click",function(){k(e);let r=_();return E(r.showFullActivityHistory())}),u(301," View Full Activity History "),c()()(),a(302,"div",67)(303,"div",130)(304,"div",7),M(),a(305,"svg",69),y(306,"path",149),c(),T(),a(307,"h2",71),u(308,"Related Assets"),c()(),a(309,"div",77)(310,"button",150),D("click",function(){k(e);let r=_();return E(r.showRelatedFilterDropdown=!r.showRelatedFilterDropdown)}),a(311,"span"),u(312),c(),M(),a(313,"svg",14),y(314,"path",151),c()(),I(315,r1,2,2,"div",22),c()(),I(316,s1,8,0,"div",144)(317,o1,5,1,"div",145)(318,u1,3,2,"div",152),c(),T(),a(319,"div",67)(320,"div",130)(321,"div",7),M(),a(322,"svg",69),y(323,"path",91),c(),T(),a(324,"h2",71),u(325,"Maintenance Schedule"),c()(),a(326,"button",121),D("click",function(){k(e);let r=_();return E(r.addMaintenanceSchedule())}),M(),a(327,"svg",14),y(328,"path",153),c(),T(),a(329,"span"),u(330,"Add"),c()()(),a(331,"div",154)(332,"div",155)(333,"div",7),M(),a(334,"svg",156),y(335,"path",122),c(),T(),a(336,"div")(337,"div",157),u(338,"Last Maintenance"),c(),a(339,"div",158),u(340),c()()()(),a(341,"div",139)(342,"div",7),M(),a(343,"svg",159),y(344,"path",92),c(),T(),a(345,"div")(346,"div",160),u(347,"Next Due"),c(),a(348,"div",161),u(349),c()()()(),a(350,"div",162)(351,"div",7),M(),a(352,"svg",163),y(353,"path",120),c(),T(),a(354,"div")(355,"div",164),u(356,"Frequency"),c(),a(357,"div",165),u(358),c()()()()(),I(359,p1,7,0,"div",166)(360,g1,2,1,"div",152)(361,_1,9,0,"div",166),c(),a(362,"div",67)(363,"div",68),M(),a(364,"svg",69),y(365,"path",167),c(),T(),a(366,"h2",71),u(367,"Financial Information"),c()(),a(368,"div",112)(369,"div",136)(370,"h4",168),u(371,"Purchase Details"),c(),a(372,"div",169)(373,"div")(374,"span",170),u(375,"Purchase Price"),c(),a(376,"div",71),u(377),Xe(378,"currency"),c()(),a(379,"div")(380,"span",170),u(381,"Purchase Date"),c(),a(382,"div",171),u(383),Xe(384,"date"),c()()()(),a(385,"div",139)(386,"h4",168),u(387,"Current Value"),c(),a(388,"div",169)(389,"div")(390,"span",170),u(391,"Book Value"),c(),a(392,"div",71),u(393),Xe(394,"currency"),c()(),a(395,"div")(396,"span",170),u(397,"Market Value"),c(),a(398,"div",171),u(399),Xe(400,"currency"),c()()()(),a(401,"div",172)(402,"h4",168),u(403,"Depreciation"),c(),a(404,"div",169)(405,"div")(406,"span",170),u(407,"Method"),c(),a(408,"div",171),u(409),c()(),a(410,"div")(411,"span",170),u(412,"Useful Life"),c(),a(413,"div",171),u(414),c()(),a(415,"div")(416,"span",170),u(417,"Annual Rate"),c(),a(418,"div",171),u(419),c()()()(),a(420,"div",155)(421,"h4",168),u(422,"Performance"),c(),a(423,"div",169)(424,"div")(425,"span",170),u(426,"Total Cost of Ownership"),c(),a(427,"div",71),u(428),Xe(429,"currency"),c()(),a(430,"div")(431,"span",170),u(432,"ROI"),c(),a(433,"div",171),u(434),c()()()(),a(435,"div",162)(436,"h4",168),u(437,"Warranty & Insurance"),c(),a(438,"div",169)(439,"div")(440,"span",170),u(441,"Warranty Status"),c(),a(442,"div",173)(443,"span"),u(444),c(),I(445,x1,3,4,"span",174),c()(),a(446,"div")(447,"span",170),u(448,"Insurance Value"),c(),a(449,"div",171),u(450),c()()()()()()()()()}if(i&2){let e=In(38),n=_();p(6),Tn("d",n.getAssetTypeIcon()),p(3),O(n.asset.name),p(2),v("ngIf",n.asset.asset_status),p(2),O(n.getAssetTypeName(n.asset.type)),p(4),O((n.asset.category==null?null:n.asset.category.name)||"General"),p(7),O(n.asset.asset_id||n.asset.id),p(3),v("ngIf",n.asset.serial_number),p(9),v("ngIf",n.asset.images&&n.asset.images.length>0)("ngIfElse",e),p(15),O((n.asset==null?null:n.asset.name)||"Unnamed Asset"),p(5),z("line-clamp-3",!n.descriptionExpanded),p(),W(" ",(n.asset==null?null:n.asset.description)||"No description available"," "),p(),v("ngIf",(n.asset==null?null:n.asset.description)&&n.asset.description.length>150),p(6),v("ngIf",(n.asset==null||n.asset.category==null?null:n.asset.category.icon)&&!n.asset.category.iconError),p(),v("ngIf",!(!(n.asset==null||n.asset.category==null)&&n.asset.category.icon)||n.asset.category.iconError),p(2),O((n.asset==null||n.asset.category==null?null:n.asset.category.name)||"Uncategorized"),p(4),v("ngIf",n.asset.asset_status),p(),v("ngIf",!n.asset.asset_status),p(7),O((n.asset==null?null:n.asset.asset_id)||"N/A"),p(11),v("ngIf",n.asset==null||n.asset.location==null?null:n.asset.location.id),p(),v("ngIf",!(!(n.asset==null||n.asset.location==null)&&n.asset.location.id)),p(5),O((n.asset==null||n.asset.department==null?null:n.asset.department.name)||"Not assigned"),p(8),O($t(105,100,n.asset==null?null:n.asset.created_at,"MMM d, y")),p(9),O($t(114,103,n.asset==null?null:n.asset.updated_at,"MMM d, y")),p(2),v("ngIf",n.asset==null?null:n.asset.parent),p(7),v("ngIf",n.qrCodeDataUrl),p(),v("ngIf",!n.qrCodeDataUrl&&(n.asset==null?null:n.asset.qr_code_url)),p(),v("ngIf",n.qrCodeLoading),p(),v("ngIf",!n.qrCodeDataUrl&&!(n.asset!=null&&n.asset.qr_code_url)&&!n.qrCodeLoading&&(n.asset==null?null:n.asset.id)),p(),v("ngIf",!n.qrCodeDataUrl&&!(n.asset!=null&&n.asset.qr_code_url)&&!n.qrCodeLoading&&!(n.asset!=null&&n.asset.id)),p(2),v("ngIf",n.asset==null?null:n.asset.id),p(),v("ngIf",n.asset==null?null:n.asset.id),p(9),v("ngIf",n.asset==null?null:n.asset.barcode_url),p(),v("ngIf",!(n.asset!=null&&n.asset.barcode_url)&&n.barcodeDataUrl),p(),v("ngIf",n.barcodeLoading),p(),v("ngIf",!(n.asset!=null&&n.asset.barcode_url)&&!n.barcodeDataUrl&&!n.barcodeLoading&&(n.asset==null?null:n.asset.asset_id)),p(),v("ngIf",!(n.asset!=null&&n.asset.barcode_url)&&!n.barcodeDataUrl&&!n.barcodeLoading&&!(n.asset!=null&&n.asset.asset_id)),p(2),v("ngIf",n.asset==null?null:n.asset.asset_id),p(),v("ngIf",n.asset==null?null:n.asset.asset_id),p(4),v("ngIf",n.asset==null?null:n.asset.asset_id),p(12),v("ngIf",n.asset.asset_status),p(),v("ngIf",!n.asset.asset_status),p(5),O(n.asset.manufacturer||"Not specified"),p(5),O(n.asset.model||"Not specified"),p(),v("ngIf",n.asset.serial_number),p(5),O(n.asset.brand||"Not specified"),p(5),O(n.asset.capacity||"Not specified"),p(6),O(n.asset.dimensions||"Not specified"),p(5),O(n.asset.weight||"Not specified"),p(5),O(n.asset.power_requirements||"Not specified"),p(5),O(n.asset.operating_conditions||"Standard conditions"),p(),v("ngIf",n.asset.specifications),p(20),v("ngIf",n.healthPerformanceChartData==null||n.healthPerformanceChartData.chart_data==null?null:n.healthPerformanceChartData.chart_data.metrics),p(5),v("ngIf",n.healthPerformanceChartLoading),p(),v("ngIf",n.healthPerformanceChartError&&!n.healthPerformanceChartLoading),p(),v("ngIf",!n.healthPerformanceChartLoading&&!n.healthPerformanceChartError),p(),v("ngIf",!n.healthPerformanceChartLoading&&!n.healthPerformanceChartError),p(),v("ngIf",n.healthPerformanceChartData==null||n.healthPerformanceChartData.chart_data==null?null:n.healthPerformanceChartData.chart_data.metrics),p(25),W("$",n.formatCurrency((n.asset==null?null:n.asset.purchase_price)||0),""),p(5),W("$",n.formatCurrency(n.calculateCurrentValue()),""),p(5),v("ngIf",n.depreciationChartLoading),p(),v("ngIf",n.depreciationChartError&&!n.depreciationChartLoading),p(),v("ngIf",!n.depreciationChartLoading&&!n.depreciationChartError),p(),v("ngIf",!n.depreciationChartLoading&&!n.depreciationChartError),p(6),W("$",n.formatCurrency(n.calculateAnnualDepreciation()),""),p(5),W("",n.calculateDepreciationRate(),"%"),p(5),O(n.calculateRemainingYears()),p(8),v("ngIf",n.activityLoading),p(),v("ngIf",n.activityError&&!n.activityLoading),p(),v("ngIf",!n.activityLoading&&!n.activityError),p(14),O(n.getRelatedFilterDisplayName(n.selectedRelatedFilter)),p(3),v("ngIf",n.showRelatedFilterDropdown),p(),v("ngIf",n.relatedAssetsLoading),p(),v("ngIf",n.relatedAssetsError&&!n.relatedAssetsLoading),p(),v("ngIf",!n.relatedAssetsLoading&&!n.relatedAssetsError),p(22),O(n.mockMaintenanceData.lastMaintenance||"Not recorded"),p(9),O(n.mockMaintenanceData.nextMaintenance||"Not scheduled"),p(9),O(n.mockMaintenanceData.interval),p(),v("ngIf",n.maintenanceLoading),p(),v("ngIf",!n.maintenanceLoading&&n.maintenanceSchedules.length>0),p(),v("ngIf",!n.maintenanceLoading&&n.maintenanceSchedules.length===0),p(16),W(" ",Ut(378,106,n.mockFinancialData.purchaseCost,"USD","symbol","1.2-2")," "),p(6),O($t(384,111,n.asset.purchase_date,"MMM d, y")),p(10),W(" ",Ut(394,114,n.mockFinancialData.currentValue,"USD","symbol","1.2-2")," "),p(6),O(Ut(400,119,n.mockFinancialData.currentValue*.95,"USD","symbol","1.2-2")),p(10),O(n.mockFinancialData.depreciationMethod),p(5),W("",n.mockFinancialData.usefulLife," years"),p(5),W("",n.calculateDepreciationRate(),"%"),p(9),W(" ",Ut(429,124,n.calculateTotalCostOfOwnership(),"USD","symbol","1.2-2")," "),p(5),z("text-green-600",n.calculateROI()>0)("text-red-600",n.calculateROI()<0),p(),W(" ",n.calculateROI(),"% "),p(9),Te(n.getWarrantyStatusClass(n.asset.warranty)),p(),W(" ",n.getWarrantyStatus(n.asset.warranty)," "),p(),v("ngIf",n.asset.warranty),p(5),O(n.asset.insurance_value||"Not specified")}}function b1(i,t){if(i&1){let e=H();a(0,"div",289)(1,"div",290)(2,"div",130)(3,"h3",71),u(4,"Add Maintenance Schedule"),c(),a(5,"button",291),D("click",function(){k(e);let r=_();return E(r.closeMaintenanceModals())}),M(),a(6,"svg",292),y(7,"path",293),c()()(),T(),a(8,"form",294),D("ngSubmit",function(){k(e);let r=_();return E(r.saveMaintenanceSchedule())}),a(9,"div",112)(10,"div")(11,"label",295),u(12,"Schedule Type"),c(),a(13,"select",296)(14,"option",297),u(15,"Select type"),c(),a(16,"option",298),u(17,"Preventive Maintenance"),c(),a(18,"option",299),u(19,"Inspection"),c(),a(20,"option",300),u(21,"Calibration"),c(),a(22,"option",301),u(23,"Cleaning"),c()()(),a(24,"div")(25,"label",295),u(26,"Next Due Date"),c(),y(27,"input",302,1),c(),a(29,"div")(30,"label",295),u(31,"Last Done Date"),c(),y(32,"input",303,1),c(),a(34,"div")(35,"label",295),u(36,"Frequency"),c(),a(37,"select",304)(38,"option",297),u(39,"Select frequency"),c(),a(40,"option",305),u(41,"Weekly"),c(),a(42,"option",306),u(43,"Monthly"),c(),a(44,"option",307),u(45,"Quarterly"),c(),a(46,"option",308),u(47,"Semi-Annual"),c(),a(48,"option",309),u(49,"Annual"),c()()(),a(50,"div")(51,"label",295),u(52,"Notes"),c(),y(53,"textarea",310),c()(),a(54,"div",311)(55,"button",312),D("click",function(){k(e);let r=_();return E(r.closeMaintenanceModals())}),u(56," Cancel "),c(),a(57,"button",313),u(58," Save Schedule "),c()()()()()}if(i&2){let e=_();p(8),v("formGroup",e.maintenanceForm),p(49),v("disabled",e.maintenanceForm.invalid)}}function y1(i,t){if(i&1){let e=H();a(0,"div",289)(1,"div",290)(2,"div",130)(3,"h3",71),u(4,"Edit Maintenance Schedule"),c(),a(5,"button",291),D("click",function(){k(e);let r=_();return E(r.closeMaintenanceModals())}),M(),a(6,"svg",292),y(7,"path",293),c()()(),T(),a(8,"form",294),D("ngSubmit",function(){k(e);let r=_();return E(r.saveMaintenanceSchedule())}),a(9,"div",112)(10,"div")(11,"label",295),u(12,"Schedule Type"),c(),a(13,"select",296)(14,"option",297),u(15,"Select type"),c(),a(16,"option",298),u(17,"Preventive Maintenance"),c(),a(18,"option",299),u(19,"Inspection"),c(),a(20,"option",300),u(21,"Calibration"),c(),a(22,"option",301),u(23,"Cleaning"),c()()(),a(24,"div")(25,"label",295),u(26,"Next Due Date"),c(),y(27,"input",302,1),c(),a(29,"div")(30,"label",295),u(31,"Last Done Date"),c(),y(32,"input",303,1),c(),a(34,"div")(35,"label",295),u(36,"Frequency"),c(),a(37,"select",304)(38,"option",297),u(39,"Select frequency"),c(),a(40,"option",305),u(41,"Weekly"),c(),a(42,"option",306),u(43,"Monthly"),c(),a(44,"option",307),u(45,"Quarterly"),c(),a(46,"option",308),u(47,"Semi-Annual"),c(),a(48,"option",309),u(49,"Annual"),c()()(),a(50,"div")(51,"label",295),u(52,"Status"),c(),a(53,"select",314)(54,"option",315),u(55,"Scheduled"),c(),a(56,"option",316),u(57,"In Progress"),c(),a(58,"option",317),u(59,"Completed"),c(),a(60,"option",318),u(61,"Overdue"),c()()(),a(62,"div")(63,"label",295),u(64,"Notes"),c(),y(65,"textarea",310),c()(),a(66,"div",311)(67,"button",312),D("click",function(){k(e);let r=_();return E(r.closeMaintenanceModals())}),u(68," Cancel "),c(),a(69,"button",313),u(70," Update Schedule "),c()()()()()}if(i&2){let e=_();p(8),v("formGroup",e.maintenanceForm),p(61),v("disabled",e.maintenanceForm.invalid)}}function w1(i,t){i&1&&(a(0,"div",347)(1,"div",39)(2,"div",348),M(),a(3,"svg",349),y(4,"circle",42)(5,"path",43),c()(),T(),a(6,"p",59),u(7,"Loading activity history..."),c()()())}function C1(i,t){if(i&1){let e=H();a(0,"div",350)(1,"div",351),u(2),c(),a(3,"button",50),D("click",function(){k(e);let r=_(2);return E(r.loadFullActivityHistory())}),u(4," Try Again "),c()()}if(i&2){let e=_(2);p(2),O(e.activityHistoryError)}}function S1(i,t){if(i&1&&(a(0,"div",361)(1,"div",362),u(2,"Changes:"),c(),a(3,"div",192),u(4),c()()),i&2){let e=_().$implicit,n=_(3);p(4),W(" ",n.formatActivityBeforeAfter(e.before,e.after)," ")}}function M1(i,t){if(i&1&&(a(0,"div",363)(1,"strong"),u(2,"By:"),c(),u(3),c()),i&2){let e=_().$implicit,n=_(3);p(3),W(" ",n.getUserDisplayName(e.user)," ")}}function k1(i,t){if(i&1&&(a(0,"div",354)(1,"div",355),M(),a(2,"svg",18),y(3,"path",56),c()(),T(),a(4,"div",244)(5,"div",275)(6,"h4",356),u(7),c(),a(8,"span",357),u(9),c()(),a(10,"p",358),u(11),c(),I(12,S1,5,1,"div",359)(13,M1,4,1,"div",360),c()()),i&2){let e=t.$implicit,n=_(3);p(),v("ngClass",n.getActivityColor(e.action)),p(2),Tn("d",n.getActivityIcon(e.action)),p(4),O(e.action),p(2),O(e.time_ago),p(2),O(e.comment||"No comment"),p(),v("ngIf",n.formatActivityBeforeAfter(e.before,e.after)),p(),v("ngIf",e.user)}}function E1(i,t){i&1&&(a(0,"div",350),M(),a(1,"svg",191),y(2,"path",92),c(),T(),a(3,"h3",44),u(4,"No Activity Found"),c(),a(5,"p",192),u(6,"No activity matches your current filters."),c()())}function A1(i,t){if(i&1&&(a(0,"div",352),I(1,k1,14,7,"div",353)(2,E1,7,0,"div",342),c()),i&2){let e=_(2);p(),v("ngForOf",e.fullActivityHistory),p(),v("ngIf",e.fullActivityHistory.length===0)}}function D1(i,t){if(i&1){let e=H();a(0,"button",367),D("click",function(){k(e);let r=_(3);return E(r.onActivityHistoryPageChange(r.activityHistoryPagination.current_page-1))}),u(1," Previous "),c()}}function T1(i,t){if(i&1){let e=H();a(0,"button",367),D("click",function(){k(e);let r=_(3);return E(r.onActivityHistoryPageChange(r.activityHistoryPagination.current_page+1))}),u(1," Next "),c()}}function I1(i,t){if(i&1&&(a(0,"div",364)(1,"div",143),u(2),c(),a(3,"div",365),I(4,D1,2,0,"button",366)(5,T1,2,0,"button",366),c()()),i&2){let e=_(2);p(2),Io(" Showing ",e.activityHistoryPagination.from||0," to ",e.activityHistoryPagination.to||0," of ",e.activityHistoryPagination.total||0," activities "),p(2),v("ngIf",e.activityHistoryPagination.prev_page_url),p(),v("ngIf",e.activityHistoryPagination.next_page_url)}}function P1(i,t){if(i&1){let e=H();a(0,"div",319)(1,"div",320)(2,"div",321)(3,"div",12),M(),a(4,"svg",322),y(5,"path",92),c(),T(),a(6,"h3",323),u(7,"Full Activity History"),c()(),a(8,"button",291),D("click",function(){k(e);let r=_();return E(r.closeActivityHistoryModal())}),M(),a(9,"svg",292),y(10,"path",293),c()()(),T(),a(11,"div",324)(12,"div",325)(13,"div",326)(14,"div",244)(15,"input",327),D("input",function(r){k(e);let s=_();return E(s.onActivityHistorySearch(r.target.value))}),c()(),a(16,"button",328),D("click",function(){k(e);let r=_();return E(r.clearActivityHistoryFilters())}),u(17," Clear Filters "),c()(),a(18,"div",329)(19,"div")(20,"label",330),u(21,"Action Type"),c(),a(22,"select",331),D("change",function(r){k(e);let s=_();return E(s.onActivityHistoryFilter("action",r.target.value))}),a(23,"option",297),u(24,"All Actions"),c(),a(25,"option",332),u(26,"Created"),c(),a(27,"option",333),u(28,"Updated"),c(),a(29,"option",334),u(30,"Deleted"),c(),a(31,"option",335),u(32,"Transferred"),c(),a(33,"option",336),u(34,"Maintenance"),c(),a(35,"option",337),u(36,"Imported"),c()()(),a(37,"div")(38,"label",330),u(39,"Date From"),c(),a(40,"input",338),D("change",function(r){k(e);let s=_();return E(s.onActivityHistoryFilter("date_from",r.target.value))}),c()(),a(41,"div")(42,"label",330),u(43,"Date To"),c(),a(44,"input",338),D("change",function(r){k(e);let s=_();return E(s.onActivityHistoryFilter("date_to",r.target.value))}),c()(),a(45,"div")(46,"label",330),u(47,"Sort By"),c(),a(48,"select",331),D("change",function(r){k(e);let s=_();return E(s.onActivityHistorySort("created_at",r.target.value))}),a(49,"option",339),u(50,"Newest First"),c(),a(51,"option",340),u(52,"Oldest First"),c()()()()(),I(53,w1,8,0,"div",341)(54,C1,5,1,"div",342)(55,A1,3,2,"div",343)(56,I1,6,5,"div",344),c(),a(57,"div",345)(58,"div",143),u(59),c(),a(60,"button",346),D("click",function(){k(e);let r=_();return E(r.closeActivityHistoryModal())}),u(61," Close "),c()()()()}if(i&2){let e=_();p(53),v("ngIf",e.activityHistoryLoading),p(),v("ngIf",e.activityHistoryError&&!e.activityHistoryLoading),p(),v("ngIf",!e.activityHistoryLoading&&!e.activityHistoryError),p(),v("ngIf",e.activityHistoryPagination&&e.fullActivityHistory.length>0),p(3),W(" Total Activities: ",(e.activityHistoryPagination==null?null:e.activityHistoryPagination.total)||e.fullActivityHistory.length," ")}}yn.register(...dc);var Ui=class i{constructor(t,e,n,r,s,o,l){this.route=t;this.router=e;this.assetService=n;this.angularLocation=r;this.pdfExportService=s;this.fb=o;this.cdr=l;this.maintenanceForm=this.fb.group({schedule_type:["",ft.required],next_due:[""],last_done:[""],frequency:[""],notes:[""],status:["Scheduled"]}),this.activities=[],this.fullActivityHistory=[]}destroy$=new wi;dateInputs;asset=null;loading=!0;error="";currentImageIndex=0;selectedImageUrl=null;descriptionExpanded=!1;showActionsDropdown=!1;showTransferModal=!1;showActivityHistoryModal=!1;maintenanceSchedules=[];maintenanceLoading=!1;showAddMaintenanceModal=!1;showEditMaintenanceModal=!1;selectedSchedule=null;maintenanceForm;flatpickrInstances=[];healthMetrics={lastUpdated:new Date,performanceTrend:[{month:"Jan",value:82},{month:"Feb",value:84},{month:"Mar",value:88},{month:"Apr",value:85}]};mockFinancialData={purchaseCost:0,currentValue:0,depreciationMethod:"Straight Line",usefulLife:10,originalValue:0};mockMaintenanceData={status:"Current",lastMaintenance:null,nextMaintenance:null,interval:"Every 6 months"};activities=[];fullActivityHistory=[];activityLoading=!1;activityHistoryLoading=!1;activityError="";activityHistoryError="";activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""};activityHistoryPagination=null;qrCodeDataUrl=null;qrCodeLoading=!1;barcodeDataUrl=null;barcodeLoading=!1;relatedAssets=[];relatedAssetsLoading=!1;relatedAssetsError="";selectedRelatedFilter="all";showRelatedFilterDropdown=!1;relatedAssetsParams={type:"all",limit:10};depreciationChart=null;depreciationChartLoading=!1;depreciationChartError="";depreciationChartData=null;healthPerformanceChart=null;healthPerformanceChartLoading=!1;healthPerformanceChartError="";healthPerformanceChartData=null;ngOnInit(){this.route.params.pipe(ce(this.destroy$)).subscribe(t=>{let e=t.id;e&&this.loadAsset(e)})}ngAfterViewInit(){this.initializeDatePickers(),setTimeout(()=>{this.asset&&!this.depreciationChart&&this.createDepreciationChart()},500)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.depreciationChart&&this.depreciationChart.destroy(),this.healthPerformanceChart&&this.healthPerformanceChart.destroy()}loadAsset(t){this.loading=!0,this.error="",this.assetService.getAsset(t).pipe(ce(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.updateMockData(),this.loadMaintenanceSchedules(),this.loadActivityHistory(),this.generateQRCode(),!this.asset.barcode_url&&this.asset.asset_id&&this.generateBarcode(),this.loadRelatedAssets(),this.loadDepreciationChart(),this.loadHealthPerformanceChart()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}loadMaintenanceSchedules(){this.asset&&(this.maintenanceLoading=!0,this.assetService.listMaintenanceSchedules(this.asset.id).pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&(this.maintenanceSchedules=t.data||[]),this.maintenanceLoading=!1},error:t=>{console.error("Error loading maintenance schedules:",t),this.maintenanceLoading=!1}}))}updateMockData(){this.asset&&(this.mockFinancialData={purchaseCost:this.asset.purchase_price||0,currentValue:this.asset.current_value||this.asset.purchase_price||0,depreciationMethod:"Straight Line",usefulLife:this.asset.depreciation||10,originalValue:this.asset.purchase_price||0},this.healthMetrics.lastUpdated=new Date,this.mockMaintenanceData={status:this.asset.status||"Active",lastMaintenance:this.asset.last_maintenance_date||null,nextMaintenance:this.asset.next_maintenance_date||null,interval:this.asset.maintenance_interval||"Every 6 months"},this.asset.images&&this.asset.images.length>0&&(this.selectedImageUrl=this.asset.images[0].image_url,this.currentImageIndex=0))}goBack(){this.angularLocation.back()}editAsset(){this.asset&&this.router.navigate(["/assets",this.asset.id,"edit"])}exportAsset(){this.asset&&this.pdfExportService.exportSingleAssetToPdf(this.asset)}printAsset(){let t=window.open("","_blank");if(!t){alert("Please allow popups to print this asset");return}let e=this.generatePrintContent();t.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Asset Details - ${this.asset?.name||"Asset"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
              .no-print { display: none !important; }
              .print-only { display: block !important; }
              .page-break { page-break-before: always; }
              .avoid-break { page-break-inside: avoid; }
              table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f8f9fa; font-weight: bold; }
              .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
              .section { margin-bottom: 25px; }
              .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
              .info-item { margin-bottom: 15px; }
              .info-label { font-weight: bold; color: #666; font-size: 14px; }
              .info-value { font-size: 16px; margin-top: 5px; }
              .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
              .qr-section { text-align: center; margin: 20px 0; }
              .qr-code { max-width: 200px; margin: 0 auto; }
              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #ddd; padding-top: 20px; }
              @page { margin: 1in; }
            }
            @media screen {
              body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
              .no-print { display: none; }
              .print-only { display: block; }
              .page-break { border-top: 2px solid #333; margin-top: 30px; padding-top: 30px; }
              .avoid-break { }
              table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f8f9fa; font-weight: bold; }
              .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
              .section { margin-bottom: 25px; }
              .section-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
              .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
              .info-item { margin-bottom: 15px; }
              .info-label { font-weight: bold; color: #666; font-size: 14px; }
              .info-value { font-size: 16px; margin-top: 5px; }
              .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
              .qr-section { text-align: center; margin: 20px 0; }
              .qr-code { max-width: 200px; margin: 0 auto; }
              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #ddd; padding-top: 20px; }
            }
          </style>
        </head>
        <body>
          ${e}
        </body>
      </html>
    `),t.document.close(),t.onload=()=>{t.print(),t.close()}}generatePrintContent(){if(!this.asset)return"<p>Asset not found</p>";let t=this.asset,e=new Date().toLocaleDateString();return`
      <div class="header">
        <h1>Asset Details Report</h1>
        <p>Generated on: ${e}</p>
      </div>

      <div class="section">
        <div class="section-title">Asset Overview</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Asset Name</div>
            <div class="info-value">${t.name||"N/A"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Asset ID</div>
            <div class="info-value">${t.asset_id||t.id||"N/A"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Category</div>
            <div class="info-value">${t.category?.name||"General"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Status</div>
            <div class="info-value">
              <span class="status-badge" style="background-color: ${t.asset_status?.color||"#6B7280"}20; color: ${t.asset_status?.color||"#6B7280"}">
                ${t.asset_status?.name||"Not specified"}
              </span>
            </div>
          </div>
          <div class="info-item">
            <div class="info-label">Type</div>
            <div class="info-value">${this.getAssetTypeName(t.type)}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Location</div>
            <div class="info-value">${t.location?.name||"No location assigned"}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Description</div>
        <p>${t.description||"No description available"}</p>
      </div>

      <div class="section">
        <div class="section-title">Technical Specifications</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Manufacturer</div>
            <div class="info-value">${t.manufacturer||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Model</div>
            <div class="info-value">${t.model||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Serial Number</div>
            <div class="info-value">${t.serial_number||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Brand</div>
            <div class="info-value">${t.brand||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Dimensions</div>
            <div class="info-value">${t.dimensions||"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Weight</div>
            <div class="info-value">${t.weight||"Not specified"}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Financial Information</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Purchase Price</div>
            <div class="info-value">$${this.formatCurrency(t.purchase_price||0)}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Current Value</div>
            <div class="info-value">$${this.formatCurrency(this.calculateCurrentValue())}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Purchase Date</div>
            <div class="info-value">${t.purchase_date?new Date(t.purchase_date).toLocaleDateString():"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Warranty Status</div>
            <div class="info-value">${this.getWarrantyStatus(t.warranty)}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Performance Metrics</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Health Score</div>
            <div class="info-value">${t.health_score||0}%</div>
          </div>
          <div class="info-item">
            <div class="info-label">Utilization Rate</div>
            <div class="info-value">${this.getUtilizationRate()}%</div>
          </div>
          <div class="info-item">
            <div class="info-label">Asset Age</div>
            <div class="info-value">${this.getAssetAge()}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Total Cost of Ownership</div>
            <div class="info-value">$${this.formatCurrency(this.calculateTotalCostOfOwnership())}</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Timeline Information</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Created Date</div>
            <div class="info-value">${t.created_at?new Date(t.created_at).toLocaleDateString():"Not specified"}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Last Modified</div>
            <div class="info-value">${t.updated_at?new Date(t.updated_at).toLocaleDateString():"Not specified"}</div>
          </div>
        </div>
      </div>

      <div class="qr-section">
        <div class="section-title">Asset Identification</div>
        <div class="qr-code">
          ${this.qrCodeDataUrl?`<img src="${this.qrCodeDataUrl}" alt="QR Code" style="max-width: 100%; height: auto;">`:"<p>QR Code not available</p>"}
        </div>
        <p><strong>Asset ID:</strong> ${t.asset_id||t.id||"N/A"}</p>
      </div>

      <div class="footer">
        <p>AssetGo - Asset Management System</p>
        <p>This report was generated automatically on ${e}</p>
      </div>
    `}getStatusColor(t){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[t]||"gray"}getAssetStatusColor(t){return!t||!t.color?"#6B7280":t.color}getAssetStatusBackgroundColor(t){return!t||!t.color?"#F3F4F6":t.color+"20"}getAssetTypeIcon(){if(!this.asset?.type)return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";let t={fixed:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4","semi-fixed":"M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4a2 2 0 001-1.73z",mobile:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",fleet:"M3 13l2-5a2 2 0 012-2h10a2 2 0 012 2l2 5M5 13v6a2 2 0 002 2h10a2 2 0 002-2v-6M5 13h14"};return t[this.asset.type]||t.fixed}generateSmartDescription(){console.log("Generate smart description")}analyzeAssetImage(){console.log("Analyze asset image")}addMaintenanceSchedule(){this.showAddMaintenanceModal=!0,this.maintenanceForm.reset({schedule_type:"",next_due:"",last_done:"",frequency:"",notes:"",status:"Scheduled"}),setTimeout(()=>{this.initializeDatePickers()},100)}editMaintenanceSchedule(t){this.selectedSchedule=t,this.showEditMaintenanceModal=!0,this.maintenanceForm.patchValue({schedule_type:t.schedule_type,next_due:t.next_due,last_done:t.last_done,frequency:t.frequency,notes:t.notes,status:t.status}),setTimeout(()=>{this.initializeDatePickers()},100)}deleteMaintenanceSchedule(t){confirm("Are you sure you want to delete this maintenance schedule?")&&this.assetService.deleteMaintenanceSchedule(this.asset.id,t.id).pipe(ce(this.destroy$)).subscribe({next:e=>{e.success&&this.loadMaintenanceSchedules()},error:e=>{console.error("Error deleting maintenance schedule:",e)}})}saveMaintenanceSchedule(){if(this.maintenanceForm.valid&&this.asset){let t=this.maintenanceForm.value;this.selectedSchedule?this.assetService.updateMaintenanceSchedule(this.asset.id,this.selectedSchedule.id,t).pipe(ce(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{console.error("Error updating maintenance schedule:",e)}}):this.assetService.addMaintenanceSchedule(this.asset.id,t).pipe(ce(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{console.error("Error adding maintenance schedule:",e)}})}}closeMaintenanceModals(){this.showAddMaintenanceModal=!1,this.showEditMaintenanceModal=!1,this.selectedSchedule=null,this.maintenanceForm.reset(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[]}initializeDatePickers(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let n=Xt(t.nativeElement,{dateFormat:"Y-m-d",allowInput:!0,clickOpens:!0,onChange:(r,s)=>{let o=t.nativeElement.getAttribute("formControlName");o&&this.maintenanceForm.get(o)&&this.maintenanceForm.get(o).setValue(s)}});this.flatpickrInstances.push(n)}})},50)}getScheduleStatusColor(t){return{Scheduled:"blue",Overdue:"red",Completed:"green","In Progress":"yellow"}[t]||"gray"}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set"}getAssetTypeName(t){return t?{1:"Fixed Asset",2:"Semi-Fixed Asset",3:"Mobile Asset",4:"Fleet Asset",5:"IT Equipment"}[t.toString()]||`Type ${t}`:"Standard Asset"}navigateToPrevious(){console.log("Navigate to previous asset")}navigateToNext(){console.log("Navigate to next asset")}loadRelatedAssets(){this.asset?.id&&(this.relatedAssetsLoading=!0,this.relatedAssetsError="",this.assetService.getRelatedAssets(this.asset.id,this.relatedAssetsParams).pipe(ce(this.destroy$)).subscribe({next:t=>{t.success?this.relatedAssets=t.data.related_assets||[]:this.relatedAssetsError=t.message||"Failed to load related assets",this.relatedAssetsLoading=!1},error:t=>{this.relatedAssetsError=t.error?.message||"An error occurred while loading related assets",this.relatedAssetsLoading=!1}}))}loadDepreciationChart(){this.asset?.id&&(this.depreciationChartLoading=!0,this.depreciationChartError="",console.log("Loading depreciation chart for asset:",this.asset.id),this.assetService.getAssetDepreciationChart(this.asset.id).pipe(ce(this.destroy$)).subscribe({next:t=>{console.log("Chart API Response:",t),t.success?(this.depreciationChartData=t.data,console.log("Chart data set:",this.depreciationChartData),this.createDepreciationChart()):(this.depreciationChartError=t.message||"Failed to load depreciation chart data",console.log("API returned error, using mock data"),this.createDepreciationChartWithMockData()),this.depreciationChartLoading=!1},error:t=>{console.error("Chart API Error:",t),this.depreciationChartError=t.error?.message||"An error occurred while loading depreciation chart data",this.depreciationChartLoading=!1,this.createDepreciationChartWithMockData()}}))}createDepreciationChart(){console.log("Creating depreciation chart..."),this.depreciationChart&&(console.log("Destroying existing chart"),this.depreciationChart.destroy()),setTimeout(()=>{let t=document.getElementById("depreciationChart");if(console.log("Canvas element:",t),!t){console.error("Depreciation chart canvas not found");return}let e=this.processChartData(this.depreciationChartData)||this.generateMockDepreciationData();console.log("Chart data to use:",e);try{this.depreciationChart=new yn(t,{type:"line",data:{labels:e.labels,datasets:[{label:"Asset Value",data:e.values,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!0,tension:.4},{label:"Accumulated Depreciation",data:e.depreciation,borderColor:"#EF4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:2,fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Asset Depreciation Over Time",font:{size:16,weight:"bold"}},legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:n=>{let r=n.dataset.label||"",s=n.parsed.y;return`${r}: $${s.toLocaleString()}`}}}},scales:{x:{title:{display:!0,text:"Month"}},y:{title:{display:!0,text:"Value ($)"},beginAtZero:!0,ticks:{callback:n=>`$${Number(n).toLocaleString()}`}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),console.log("Chart created successfully"),this.cdr.detectChanges()}catch(n){console.error("Error creating chart:",n)}},100)}processChartData(t){if(!t||!t.chart_data||!t.chart_data.has_data)return null;let e=t.chart_data,n=e.depreciation_months.map(l=>`Month ${l}`),r=e.depreciation_values.map(l=>parseFloat(l)),s=parseFloat(t.asset.purchase_price),o=r.map(l=>s-l);return{labels:n,values:r,depreciation:o}}createDepreciationChartWithMockData(){let t=this.generateMockDepreciationData();this.depreciationChartData=t,this.createDepreciationChart()}generateMockDepreciationData(){let t=parseFloat(this.asset?.purchase_price)||1e4,e=parseFloat(this.asset?.depreciation)||10,n=this.asset?.depreciation_life||10,r=[],s=[],o=[],l=n||e;for(let d=1;d<=l;d++){r.push(`Month ${d}`);let h=t/l*(d-1),f=Math.max(0,t-h);s.push(f),o.push(h)}return{labels:r,values:s,depreciation:o}}onRelatedFilterChange(t){this.selectedRelatedFilter=t,this.relatedAssetsParams.type=t,this.loadRelatedAssets()}getRelatedFilterDisplayName(t){return{all:"All Related",category:"Same Category",location:"Same Location",department:"Same Department",manufacturer:"Same Manufacturer",parent:"Same Parent",children:"Child Assets",siblings:"Sibling Assets",similar:"Similar Assets"}[t]||t}getRelatedAssetStatusColor(t){if(t?.color)return`bg-${this.getColorFromHex(t.color)}-100 text-${this.getColorFromHex(t.color)}-700`;let e=t?.name||t;return{Active:"bg-green-100 text-green-700",Inactive:"bg-gray-100 text-gray-700",Maintenance:"bg-orange-100 text-orange-700",Retired:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"}getColorFromHex(t){return{"#10B981":"green","#EF4444":"red","#F59E0B":"yellow","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange","#6B7280":"gray"}[t]||"gray"}navigateToRelatedAsset(t){this.router.navigate(["/assets",t])}loadActivityHistory(){if(!this.asset?.id)return;this.activityLoading=!0,this.activityError="";let t={page:1,per_page:5,sort_by:"created_at",sort_dir:"desc"};this.assetService.getActivityHistory(this.asset.id,t).pipe(ce(this.destroy$)).subscribe({next:e=>{e.success?this.activities=e.data.data||[]:this.activityError=e.message||"Failed to load activity history",this.activityLoading=!1},error:e=>{this.activityError=e.error?.message||"An error occurred while loading activity history",this.activityLoading=!1}})}loadPerformanceMetrics(){console.log("Load performance metrics")}refreshHealthMetrics(){this.loadPerformanceMetrics(),console.log("Refreshing health metrics")}refreshDepreciationChart(){console.log("Refreshing depreciation chart..."),this.loadDepreciationChart()}forceCreateChart(){console.log("Force creating chart..."),this.createDepreciationChart()}loadHealthPerformanceChart(){if(!this.asset?.id){console.log("No asset ID available for health performance chart");return}this.healthPerformanceChartLoading=!0,this.healthPerformanceChartError="",console.log("Loading health performance chart for asset:",this.asset.id),this.assetService.getAssetHealthPerformanceChart(this.asset.id,{months:12}).pipe(ce(this.destroy$)).subscribe({next:t=>{console.log("Health performance chart API response:",t),this.healthPerformanceChartLoading=!1,t.success&&t.data?(this.healthPerformanceChartData=t.data,setTimeout(()=>{this.createHealthPerformanceChart()},100)):(this.healthPerformanceChartError="Failed to load health performance data",console.error("Health performance chart API error:",t))},error:t=>{console.error("Health performance chart API error:",t),this.healthPerformanceChartLoading=!1,this.healthPerformanceChartError="Failed to load health performance data"}})}createHealthPerformanceChart(){console.log("Creating health performance chart..."),console.log("Health performance chart data:",this.healthPerformanceChartData),this.healthPerformanceChart&&(this.healthPerformanceChart.destroy(),this.healthPerformanceChart=null);let t=document.getElementById("healthPerformanceChart");if(console.log("Canvas element:",t),!t){console.error("Health performance chart canvas not found");return}setTimeout(()=>{try{console.log("Processing health performance data...");let e=this.processHealthPerformanceData(this.healthPerformanceChartData);console.log("Processed chart data:",e);let n={type:"line",data:{labels:e.labels,datasets:[{label:"Health Score",data:e.healthScores,borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#10B981",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6},{label:"Performance Score",data:e.performanceScores,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#3B82F6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6},{label:"Maintenance Count",data:e.maintenanceCounts,borderColor:"#F59E0B",backgroundColor:"rgba(245, 158, 11, 0.1)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"#F59E0B",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(r){let s=r.dataset.label||"",o=r.parsed.y;return s==="Maintenance Count"?`${s}: ${o} activities`:`${s}: ${o}%`}}}},scales:{x:{display:!0,title:{display:!0,text:"Month",font:{size:12,weight:"bold"}},grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Score (%)",font:{size:12,weight:"bold"}},min:0,max:100,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Maintenance Count",font:{size:12,weight:"bold"}},min:0,grid:{drawOnChartArea:!1,color:"rgba(0, 0, 0, 0.1)"}}}}};this.healthPerformanceChart=new yn(t,n),console.log("Health performance chart created successfully"),this.cdr.detectChanges()}catch(e){console.error("Error creating health performance chart:",e),setTimeout(()=>{console.log("Retrying health performance chart creation..."),this.createHealthPerformanceChart()},500)}},100)}processHealthPerformanceData(t){if(!t?.chart_data)return console.log("No chart data available, using mock data"),this.generateMockHealthPerformanceData();let e=t.chart_data;return console.log("Processing health performance data:",e),{labels:(e.dates||[]).map(r=>{if(r&&r.includes("-")){let[s,o]=r.split("-");return new Date(parseInt(s),parseInt(o)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}return r}),healthScores:e.health_scores||[],performanceScores:e.performance_scores||[],maintenanceCounts:e.maintenance_counts||[],metrics:e.metrics||{}}}generateMockHealthPerformanceData(){let e=[],n=[],r=[],s=[];for(let o=0;o<12;o++){let l=new Date;l.setMonth(l.getMonth()-(11-o)),e.push(l.toLocaleDateString("en-US",{month:"short",year:"2-digit"}));let d=85,m=o*2+Math.random()*5;n.push(Math.max(60,Math.round(d-m)));let h=90,f=(Math.random()-.5)*10;r.push(Math.max(75,Math.round(h+f))),s.push(Math.floor(Math.random()*5)+1)}return{labels:e,healthScores:n,performanceScores:r,maintenanceCounts:s,metrics:{average_health_score:Math.round(n.reduce((o,l)=>o+l,0)/n.length),average_performance_score:Math.round(r.reduce((o,l)=>o+l,0)/r.length),total_maintenance_count:s.reduce((o,l)=>o+l,0),health_trend:n[n.length-1]-n[0],performance_trend:r[r.length-1]-r[0]}}}refreshHealthPerformanceChart(){this.loadHealthPerformanceChart()}forceCreateHealthPerformanceChart(){if(console.log("Force creating health performance chart..."),console.log("Current health performance chart data:",this.healthPerformanceChartData),!this.healthPerformanceChartData){console.log("No data available, loading health performance chart..."),this.loadHealthPerformanceChart();return}this.createHealthPerformanceChart()}getHealthScoreColor(t){return t?t>=80?"text-green-600":t>=60?"text-yellow-600":t>=40?"text-orange-600":"text-red-600":"text-gray-400"}getHealthStatusColor(t){return t?t>=80?"text-green-600":t>=60?"text-yellow-600":t>=40?"text-orange-600":"text-red-600":"text-gray-600"}getHealthStatusText(t){return t?t>=80?"Excellent":t>=60?"Good":t>=40?"Fair":"Poor":"Unknown"}getAssetAge(){if(!this.asset?.purchase_date)return"Unknown";let t=new Date(this.asset.purchase_date),n=Math.abs(new Date().getTime()-t.getTime()),r=Math.ceil(n/(1e3*60*60*24));if(r<365)return`${Math.floor(r/30)} months`;{let s=Math.floor(r/365);return`${s} year${s>1?"s":""}`}}getUtilizationRate(){let t=this.asset?.health_score||0;return t>=80?95:t>=60?85:t>=40?70:50}getUptimePercentage(){let t=this.asset?.health_score||0;return t>=80?99.5:t>=60?98:t>=40?95:90}getMaintenanceFrequency(){let t=this.asset?.health_score||0;return t>=80?"Low":t>=60?"Medium":t>=40?"High":"Very High"}getMaintenanceFrequencyPercentage(){let t=this.asset?.health_score||0;return t>=80?20:t>=60?40:t>=40?60:80}getCostEfficiency(){let t=parseFloat(this.asset?.purchase_price)||0,e=this.calculateCurrentValue();if(t===0)return 85;let n=e/t*100;return Math.min(Math.max(n,0),100)}formatCurrency(t){return t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})}calculateCurrentValue(){let t=parseFloat(this.asset?.purchase_price)||0,e=this.calculateDepreciation();return Math.round(Math.max(t-e,0)*100)/100}getROIColor(t){return t>=0?"text-green-600":"text-red-600"}getPerformanceTrend(){let t=this.asset?.health_score||0;return t>=80?"Improving":t>=60?"Stable":t>=40?"Declining":"Critical"}getCostEfficiencyTrend(){let t=this.getCostEfficiency();return t>=80?"Optimal":t>=60?"Good":t>=40?"Fair":"Poor"}getMaintenanceTrend(){let t=this.asset?.health_score||0;return t>=80?"Low":t>=60?"Stable":t>=40?"Increasing":"High"}getTrendColor(t){switch(t.toLowerCase()){case"improving":case"optimal":case"low":return"text-green-600";case"stable":case"good":return"text-blue-600";case"declining":case"fair":case"increasing":return"text-yellow-600";case"critical":case"poor":case"high":return"text-red-600";default:return"text-gray-600"}}getTrendIcon(t){switch(t.toLowerCase()){case"improving":case"optimal":return"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6";case"declining":case"critical":return"M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6";case"stable":case"good":case"fair":case"low":case"increasing":case"high":default:return"M20 12H4"}}getFinancialAlerts(){let t=[],e=this.asset?.health_score||0,n=this.calculateCurrentValue(),r=parseFloat(this.asset?.purchase_price)||0;return e<40&&t.push({message:"Asset health is critical - consider replacement",class:"bg-red-50 text-red-700"}),n<r*.3&&t.push({message:"Asset value has depreciated significantly",class:"bg-orange-50 text-orange-700"}),(this.asset?.warranty==="None"||!this.asset?.warranty)&&t.push({message:"No warranty coverage - maintenance costs may increase",class:"bg-yellow-50 text-yellow-700"}),t}getPredictiveAlerts(){let t=[],e=this.asset?.health_score||0,n=this.getAssetAge();return e<60&&t.push({title:"Maintenance Alert",message:"Schedule preventive maintenance within 30 days",class:"bg-orange-50 text-orange-700"}),e<40&&t.push({title:"Critical Alert",message:"Asset requires immediate attention",class:"bg-red-50 text-red-700"}),n.includes("year")&&parseInt(n)>5&&t.push({title:"Age Alert",message:"Asset is aging - consider replacement planning",class:"bg-blue-50 text-blue-700"}),t}uploadDocument(){console.log("Upload document")}downloadDocument(t){console.log("Download document:",t)}compareWithSimilar(){console.log("Compare with similar assets")}scrollToSection(t){let e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}exportFinancialData(){console.log("Export financial data")}exportMaintenanceHistory(){console.log("Export maintenance history")}generateMaintenanceRecommendations(){console.log("Generate maintenance recommendations")}addMaintenanceCost(){console.log("Add maintenance cost")}viewCostHistory(){console.log("View cost history")}getWarrantyStatus(t){if(!t)return"No warranty";let e=new Date,n=new Date(t);if(n<e)return"Expired";{let r=Math.ceil((n.getTime()-e.getTime())/864e5);return r<=30?`Expires in ${r} days`:"Active"}}getWarrantyStatusClass(t){let e=this.getWarrantyStatus(t);return e==="Expired"?"text-red-600 font-medium":e.includes("Expires in")?"text-orange-600 font-medium":e==="Active"?"text-green-600 font-medium":"text-gray-500"}selectImage(t){this.asset.images&&t>=0&&t<this.asset.images.length&&(this.currentImageIndex=t,this.selectedImageUrl=this.asset.images[t].image_url)}previousImage(){if(this.asset.images&&this.asset.images.length>1){let t=this.currentImageIndex>0?this.currentImageIndex-1:this.asset.images.length-1;this.selectImage(t)}}nextImage(){if(this.asset.images&&this.asset.images.length>1){let t=this.currentImageIndex<this.asset.images.length-1?this.currentImageIndex+1:0;this.selectImage(t)}}copyAssetId(){let t=this.asset?.asset_id||this.asset?.id;t&&navigator.clipboard.writeText(t.toString()).then(()=>{console.log("Asset ID copied to clipboard")}).catch(e=>{console.error("Failed to copy asset ID:",e)})}copySerialNumber(){this.asset?.serial_number&&navigator.clipboard.writeText(this.asset.serial_number).then(()=>{console.log("Serial number copied to clipboard")}).catch(t=>{console.error("Failed to copy serial number:",t)})}calculateDepreciation(){if(!this.asset?.purchase_price)return 0;let t=this.asset.current_value||this.asset.purchase_price;return Math.round((this.asset.purchase_price-t)*100)/100}calculateDepreciationRate(){let t=this.asset?.depreciation||10;return Math.round(1/t*100)}getMaxDepreciationValue(){return this.asset?.purchase_price||1e4}getDepreciationPath(){let t=this.getMaxDepreciationValue(),e=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,n=new Date,r=10,s=new Date(e.getTime()+r*365.25*24*60*60*1e3),o=[],l=(s.getTime()-e.getTime())/(1e3*60*60*24);for(let d=0;d<=12;d++){let m=l*d/12,f=(new Date(e.getTime()+m*24*60*60*1e3).getTime()-e.getTime())/(1e3*60*60*24*365.25),x=t/r,g=Math.min(x*f,t),S=Math.max(0,t-g),w=d/12*100,A=100-S/t*100;o.push(`${w},${A}`)}return`M ${o.join(" L ")}`}getCurrentPeriodX(){if(!this.asset?.purchase_date)return 0;let t=new Date(this.asset.purchase_date),e=new Date,n=10,s=(new Date(t.getTime()+n*365.25*24*60*60*1e3).getTime()-t.getTime())/(1e3*60*60*24),o=(e.getTime()-t.getTime())/(1e3*60*60*24);return Math.min(100,Math.max(0,o/s*100))}getCurrentPeriodY(){let t=this.calculateCurrentValue(),e=this.getMaxDepreciationValue();return 100-t/e*100}getDepreciationDates(){let t=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,e=10,n=new Date(t.getTime()+e*365.25*24*60*60*1e3),r=[];for(let s=0;s<=12;s++){let o=(n.getTime()-t.getTime())/864e5*s/12;r.push(new Date(t.getTime()+o*24*60*60*1e3))}return r}calculateAnnualDepreciation(){return this.getMaxDepreciationValue()/10}calculateRemainingYears(){if(!this.asset?.purchase_date)return 10;let t=new Date(this.asset.purchase_date),e=new Date,n=10,r=(e.getTime()-t.getTime())/(1e3*60*60*24*365.25);return Math.round(Math.max(0,n-r)*100)/100}calculateTotalCostOfOwnership(){let t=this.asset?.purchase_price||0,e=this.asset?.total_maintenance_cost||0,n=this.asset?.operating_cost||0;return t+e+n}calculateROI(){let t=this.calculateTotalCostOfOwnership(),e=this.asset?.current_value||this.asset?.purchase_price||0;return t===0?0:Math.round((e-t)/t*100)}createWorkOrder(){console.log("Create work order for asset:",this.asset?.id)}transferAsset(){this.showTransferModal=!0}onTransferComplete(t){console.log("Transfer completed:",t),this.asset?.id&&this.loadAsset(this.asset.id.toString())}onTransferModalClose(){this.showTransferModal=!1}duplicateAsset(){this.asset&&this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:this.asset.id}})}onImageError(t){console.warn("Asset image failed to load:",t.target.src),t.target.onerror=null,t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onCategoryIconError(t,e){e&&(e.iconError=!0)}downloadQRCode(){if(this.qrCodeDataUrl){let t=document.createElement("a");t.href=this.qrCodeDataUrl,t.download=`asset-${this.asset.id}-qr.png`,t.click()}else if(this.asset?.qr_code_url){let t=document.createElement("a");t.href=this.asset.qr_code_url,t.download=`asset-${this.asset.id}-qr.png`,t.click()}else this.generateQRCode()}downloadBarcode(){if(this.asset?.barcode_url){let t=document.createElement("a");t.href=this.asset.barcode_url,t.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,t.click()}else if(this.barcodeDataUrl){let t=document.createElement("a");t.href=this.barcodeDataUrl,t.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,t.click()}else this.generateBarcode()}generateQRCode(){if(!this.asset)return;this.qrCodeLoading=!0;let t=`${window.location.origin}/public/asset/${this.asset.id}`;mc.toDataURL(t,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(e=>{this.qrCodeDataUrl=e,this.qrCodeLoading=!1}).catch(e=>{console.error("Error generating QR code:",e),this.qrCodeLoading=!1})}generateBarcode(){if(!this.asset?.asset_id)return;this.barcodeLoading=!0;let t=this.asset.asset_id,e=`https://quickchart.io/barcode?c=${encodeURIComponent(t)}&chs=300x100&chld=L%7C0&choe=UTF-8`;fetch(e).then(n=>n.blob()).then(n=>{let r=new FileReader;r.onloadend=()=>{this.barcodeDataUrl=r.result,this.barcodeLoading=!1},r.readAsDataURL(n)}).catch(n=>{console.error("Error generating barcode:",n),this.barcodeLoading=!1})}copyQRCodeUrl(){this.asset?.qr_code_url&&navigator.clipboard.writeText(this.asset.qr_code_url).then(()=>{console.log("QR code URL copied to clipboard")})}copyPublicUrl(){let t=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(t).then(()=>{console.log("Public URL copied to clipboard")})}get windowLocation(){return window.location.origin}showFullActivityHistory(){this.loadFullActivityHistory(),this.showActivityHistoryModal=!0}closeActivityHistoryModal(){this.showActivityHistoryModal=!1,this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.activityHistoryPagination=null}onActivityHistoryPageChange(t){this.activityHistoryParams.page=t,this.loadFullActivityHistory()}onActivityHistorySearch(t){this.activityHistoryParams.search=t,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistoryFilter(t,e){this.activityHistoryParams[t]=e,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistorySort(t,e){this.activityHistoryParams.sort_by=t,this.activityHistoryParams.sort_dir=e,this.loadFullActivityHistory()}clearActivityHistoryFilters(){this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.loadFullActivityHistory()}loadFullActivityHistory(){this.asset?.id&&(this.activityHistoryLoading=!0,this.activityHistoryError="",this.assetService.getActivityHistory(this.asset.id,this.activityHistoryParams).pipe(ce(this.destroy$)).subscribe({next:t=>{t.success?(this.fullActivityHistory=t.data.data||[],this.activityHistoryPagination=t.data):this.activityHistoryError=t.message||"Failed to load full activity history",this.activityHistoryLoading=!1},error:t=>{this.activityHistoryError=t.error?.message||"An error occurred while loading full activity history",this.activityHistoryLoading=!1}}))}viewFullImage(t){window.open(t,"_blank")}formatActivityBeforeAfter(t,e){if(!t&&!e)return"";let n=[];if(t&&e){let r=Object.keys(t),s=Object.keys(e);for(let o of s)if(t[o]!==e[o]){let l=this.getFieldDisplayName(o);l&&n.push(`${l}: ${this.formatFieldValue(t[o])} \u2192 ${this.formatFieldValue(e[o])}`)}}else if(e){let r=["name","type","status","location_id","department_id","purchase_price"];for(let s of r)if(e[s]!==void 0&&e[s]!==null){let o=this.getFieldDisplayName(s);o&&n.push(`${o}: ${this.formatFieldValue(e[s])}`)}}else if(t){let r=["name","type","status"];for(let s of r)if(t[s]!==void 0&&t[s]!==null){let o=this.getFieldDisplayName(s);o&&n.push(`${o}: ${this.formatFieldValue(t[s])} (deleted)`)}}return n.length>0?n.join(", "):""}getFieldDisplayName(t){return{name:"Asset Name",type:"Type",model:"Model",status:"Status",description:"Description",location_id:"Location",department_id:"Department",purchase_price:"Purchase Price",purchase_date:"Purchase Date",serial_number:"Serial Number",asset_id:"Asset ID",warranty:"Warranty",insurance:"Insurance",depreciation:"Depreciation",health_score:"Health Score",manufacturer:"Manufacturer",category_id:"Category"}[t]||t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}formatFieldValue(t){return t==null?"N/A":typeof t=="boolean"?t?"Yes":"No":typeof t=="number"?t.toString().includes(".")?`$${t.toFixed(2)}`:t.toString():typeof t=="string"?t.match(/^\d{4}-\d{2}-\d{2}/)?new Date(t).toLocaleDateString():t:JSON.stringify(t)}getUserDisplayName(t){return t?t.name?t.name:t.email?t.email.split("@")[0]:"Unknown User":"System"}getActivityIcon(t){return{created:"M12 6v6m0 0v6m0-6h6m-6 0H6",updated:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",deleted:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",transferred:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",maintenance:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",imported:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"}[t]||"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}getActivityColor(t){return{created:"bg-green-100 text-green-600",updated:"bg-blue-100 text-blue-600",deleted:"bg-red-100 text-red-600",transferred:"bg-purple-100 text-purple-600",maintenance:"bg-orange-100 text-orange-600",imported:"bg-indigo-100 text-indigo-600"}[t]||"bg-gray-100 text-gray-600"}sharePublicUrl(){if(this.asset?.id){let t=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(t).then(()=>{console.log("Public URL copied to clipboard:",t),alert("Public URL copied to clipboard!")}).catch(e=>{console.error("Failed to copy URL:",e),alert("Failed to copy URL to clipboard")})}}static \u0275fac=function(e){return new(e||i)(he(Mi),he(wt),he(dt),he(Pn),he(Yn),he($n),he(Lo))};static \u0275cmp=Re({type:i,selectors:[["app-asset-view"]],viewQuery:function(e,n){if(e&1&&vt(Qf,5),e&2){let r;bt(r=yt())&&(n.dateInputs=r)}},decls:34,vars:10,consts:[["noImages",""],["dateInput",""],[1,"min-h-screen","bg-gray-50","asset-view-container"],[1,"bg-white","border-b","border-gray-200","px-6","py-4","print-hide"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],["aria-label","Breadcrumb",1,"flex"],[1,"flex","items-center","space-x-2"],["routerLink","/assets/list",1,"text-gray-500","hover:text-gray-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mx-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-gray-900","font-medium"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"relative",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","text-gray-600","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",4,"ngIf"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",4,"ngIf"],["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[3,"closeModal","transferComplete","isOpen","asset"],[1,"absolute","right-0","mt-2","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"border-t","border-gray-100","my-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"px-6","py-6"],[1,"bg-white","rounded-lg","p-6","mb-6","shadow-sm","border","border-gray-200"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-16","h-16","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],["class","inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",3,"background-color","color",4,"ngIf"],[1,"text-gray-500"],[1,"text-right"],[1,"flex","items-center","space-x-2","mb-2"],[1,"flex","items-center","space-x-1","px-2","py-1","text-sm","font-mono","bg-gray-100","rounded","hover:bg-gray-200","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["class","flex items-center space-x-2",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","p-6","shadow-sm","border","border-gray-200"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-lg","font-semibold","text-gray-900"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-2","mb-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"space-y-6"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],[1,"text-gray-600","leading-relaxed"],["class","text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",3,"click",4,"ngIf"],[1,"w-8","h-8","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","text-gray-900",4,"ngIf"],[1,"text-gray-900","font-mono","text-lg"],["title","Copy Asset ID",1,"p-1","text-gray-400","hover:text-gray-600","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","text-blue-600 hover:underline cursor-pointer",3,"routerLink",4,"ngIf"],[1,"text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","flex","flex-col","items-center"],[1,"w-32","h-32","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","QR Code","class","w-full h-full object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center text-gray-400",4,"ngIf"],[1,"mt-3","flex","space-x-2"],["class","text-sm text-blue-600 hover:text-blue-700 font-medium",3,"click",4,"ngIf"],["class","text-sm text-green-600 hover:text-green-700 font-medium",3,"click",4,"ngIf"],[1,"mt-2","text-xs","text-gray-500","text-center"],[1,"w-full","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","Barcode","class","w-full h-20 object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center py-4",4,"ngIf"],["class","text-center py-4",4,"ngIf"],["class","text-center text-gray-400 py-4",4,"ngIf"],["class","mt-1 font-mono",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","mb-1"],["class","mt-6 pt-6 border-t border-gray-200",4,"ngIf"],[1,"flex","items-center","justify-between","mb-6"],[1,"w-8","h-8","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-green-600","hover:bg-green-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",4,"ngIf"],[1,"text-sm","font-medium","text-gray-700"],["class","flex items-center justify-center h-64 bg-gray-50 rounded-lg",4,"ngIf"],["class","flex items-center justify-center h-64 bg-red-50 rounded-lg",4,"ngIf"],["class","relative h-64 bg-white border border-gray-200 rounded-lg p-4",4,"ngIf"],["class","text-center text-xs text-gray-500",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4"],[1,"w-8","h-8","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-orange-600","hover:bg-orange-50","rounded-lg","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-6"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-gray-900"],[1,"bg-blue-50","rounded-lg","p-4"],[1,"text-2xl","font-bold","text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mt-4"],[1,"text-center","p-3","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-600"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-center","mt-6"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"flex","items-center","space-x-2","px-3","py-1","text-sm","text-gray-600","hover:text-gray-800","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","space-y-3",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"grid","grid-cols-1","gap-4","mb-6"],[1,"bg-green-50","rounded-lg","p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],[1,"text-sm","text-green-600"],[1,"font-semibold","text-green-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"text-sm","text-blue-600"],[1,"font-semibold","text-blue-800"],[1,"bg-purple-50","rounded-lg","p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],[1,"text-sm","text-purple-600"],[1,"font-semibold","text-purple-800"],["class","text-center py-6",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","font-medium","text-gray-700","mb-3"],[1,"space-y-2"],[1,"text-xs","text-gray-600"],[1,"text-sm","text-gray-900"],[1,"bg-orange-50","rounded-lg","p-4"],[1,"flex","items-center","space-x-2","mt-1"],["class","text-xs text-gray-500",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"mb-4"],[1,"relative","bg-gray-100","rounded-lg","overflow-hidden",2,"height","400px"],[1,"w-full","h-full","object-contain","bg-white","cursor-pointer",3,"click","error","src","alt"],["class","absolute left-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"click",4,"ngIf"],["class","absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"click",4,"ngIf"],[1,"absolute","bottom-4","right-4","bg-black","bg-opacity-50","text-white","px-3","py-1","rounded-full","text-sm"],["class","grid grid-cols-6 gap-2",4,"ngIf"],[1,"absolute","left-2","top-1/2","transform","-translate-y-1/2","w-10","h-10","bg-black","bg-opacity-50","text-white","rounded-full","flex","items-center","justify-center","hover:bg-opacity-70","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","w-10","h-10","bg-black","bg-opacity-50","text-white","rounded-full","flex","items-center","justify-center","hover:bg-opacity-70","transition-all",3,"click"],[1,"grid","grid-cols-6","gap-2"],["class","relative aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer border-2 transition-all",3,"border-blue-500","border-gray-200","click",4,"ngFor","ngForOf"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","cursor-pointer","border-2","transition-all",3,"click"],[1,"w-full","h-full","object-cover",3,"error","src","alt"],[1,"text-center","py-12","bg-gray-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto","mb-4"],[1,"text-gray-600"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium","mt-2",3,"click"],[1,"w-5","h-5",3,"error","src","alt"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-sm","font-medium"],[1,"text-blue-600","hover:underline","cursor-pointer",3,"routerLink"],["alt","QR Code",1,"w-full","h-full","object-contain",3,"src"],[1,"flex","items-center","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],["fill","currentColor","viewBox","0 0 24 24",1,"w-24","h-24","text-gray-400"],["d","M3 3h6v6H3V3zm2 2v2h2V5H5zm8-2h6v6h-6V3zm2 2v2h2V5h-2zM3 11h6v6H3v-6zm2 2v2h2v-2H5zm8 2h6v6h-6v-6zm2 2v2h2v-2h-2z"],[1,"text-xs","text-gray-500","mt-2","font-mono"],[1,"text-center","text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto"],[1,"text-xs","mt-2"],[1,"text-sm","text-blue-600","hover:text-blue-700","font-medium",3,"click"],[1,"text-sm","text-green-600","hover:text-green-700","font-medium",3,"click"],["alt","Barcode",1,"w-full","h-20","object-contain",3,"src"],[1,"flex","items-center","justify-center","py-4"],[1,"text-center","py-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto"],[1,"text-center","text-gray-400","py-4"],[1,"mt-1","font-mono"],[1,"text-xs","text-gray-500"],[1,"text-gray-900","font-mono"],[1,"p-1","text-gray-400","hover:text-gray-600","transition-colors",3,"click"],[1,"mt-6","pt-6","border-t","border-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-sm","text-gray-900","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-orange-600"],[1,"flex","items-center","justify-center","h-64","bg-gray-50","rounded-lg"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-green-100","rounded-full","mb-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4","text-green-600"],[1,"flex","items-center","justify-center","h-64","bg-red-50","rounded-lg"],[1,"text-red-600","text-sm","mb-2"],[1,"relative","h-64","bg-white","border","border-gray-200","rounded-lg","p-4"],["id","healthPerformanceChart","width","400","height","200"],[1,"text-center","text-xs","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-4"],[1,"text-lg","font-semibold",3,"ngClass"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-blue-100","rounded-full","mb-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4","text-blue-600"],["id","depreciationChart","width","400","height","200"],[1,"flex","items-center","justify-center","py-8"],[1,"text-center","py-8"],["class","flex items-start space-x-3",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-3"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"flex-1"],[1,"flex","items-center","justify-between","mb-1"],[1,"font-medium","text-gray-900","capitalize"],["class","text-xs text-gray-500 bg-gray-50 p-2 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","bg-gray-50","p-2","rounded","border"],[1,"text-xs","text-gray-500","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mx-auto","mb-4"],["class","w-full flex items-center px-4 py-2 text-left hover:bg-gray-50 transition-colors",3,"text-blue-600","bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-full","flex","items-center","px-4","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-sm"],[1,"space-y-3"],["class","flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["class","w-full h-full object-cover rounded-lg",3,"src","alt","error",4,"ngIf"],["class","w-6 h-6 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"font-medium","text-gray-900","truncate"],[1,"flex","items-center","space-x-2","mb-1"],[1,"text-gray-400"],[1,"text-xs","px-2","py-1","rounded-full","font-medium",3,"ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","flex-shrink-0"],[1,"w-full","h-full","object-cover","rounded-lg",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-center","py-6"],[1,"inline-flex","items-center","justify-center","w-6","h-6","bg-blue-100","rounded-full"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-3","h-3","text-blue-600"],["class","border border-gray-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-3"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-gray-900","text-sm"],[1,"flex","items-center","space-x-1"],[1,"p-1","text-gray-400","hover:text-blue-600","transition-colors",3,"click"],[1,"p-1","text-gray-400","hover:text-red-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"space-y-1","text-xs"],[1,"ml-1","text-gray-900"],["class","mt-2 text-xs text-gray-600",4,"ngIf"],[1,"mt-2","text-xs","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400","mx-auto","mb-2"],[1,"text-sm","font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-600","mb-3"],[1,"px-3","py-1","bg-blue-600","text-white","rounded","text-xs","hover:bg-blue-700","transition-colors",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-lg","max-w-md","w-full","p-6"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["formControlName","schedule_type",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value",""],["value","Preventive"],["value","Inspection"],["value","Calibration"],["value","Cleaning"],["type","text","formControlName","next_due","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","text","formControlName","last_done","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","frequency",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Weekly"],["value","Monthly"],["value","Quarterly"],["value","Semi-Annual"],["value","Annual"],["formControlName","notes","rows","3","placeholder","Additional notes...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"flex","items-center","justify-end","space-x-3","mt-6"],["type","button",1,"px-4","py-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","disabled:opacity-50","transition-colors",3,"disabled"],["formControlName","status",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Scheduled"],["value","In Progress"],["value","Completed"],["value","Overdue"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-lg","max-w-4xl","w-full","max-h-[90vh]","flex","flex-col"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex-1","overflow-auto","p-6"],[1,"mb-6","space-y-4"],[1,"flex","space-x-4"],["type","text","placeholder","Search activities...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"input"],[1,"px-4","py-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","created"],["value","updated"],["value","deleted"],["value","transferred"],["value","maintenance"],["value","imported"],["type","date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","desc"],["value","asc"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","space-y-4 max-h-[60vh] overflow-y-auto",4,"ngIf"],["class","mt-6 flex items-center justify-between",4,"ngIf"],[1,"flex","items-center","justify-between","p-6","border-t","border-gray-200","bg-gray-50"],[1,"px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","items-center","justify-center","py-12"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-6","h-6","text-blue-600"],[1,"text-center","py-12"],[1,"text-red-600","mb-4"],[1,"space-y-4","max-h-[60vh]","overflow-y-auto"],["class","flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-4","p-4","bg-gray-50","rounded-lg"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"font-semibold","text-gray-900","capitalize"],[1,"text-xs","text-gray-500","bg-white","px-2","py-1","rounded-full"],[1,"text-sm","text-gray-600","mb-2"],["class","text-xs text-gray-500 bg-white p-3 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-2",4,"ngIf"],[1,"text-xs","text-gray-500","bg-white","p-3","rounded","border"],[1,"font-medium","mb-1"],[1,"text-xs","text-gray-500","mt-2"],[1,"mt-6","flex","items-center","justify-between"],[1,"flex","space-x-2"],["class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"px-3","py-1","text-sm","border","border-gray-300","rounded","hover:bg-gray-50","transition-colors",3,"click"]],template:function(e,n){e&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"nav",6)(5,"ol",7)(6,"li")(7,"a",8),u(8,"Assets"),c()(),a(9,"li"),M(),a(10,"svg",9),y(11,"path",10),c()(),T(),a(12,"li",11),u(13),c()()()(),a(14,"div",12)(15,"button",13),D("click",function(){return n.editAsset()}),M(),a(16,"svg",14),y(17,"path",15),c(),T(),a(18,"span"),u(19,"Edit Asset"),c()(),a(20,"div",16),D("click",function(s){return s.stopPropagation()}),a(21,"button",17),D("click",function(){return n.showActionsDropdown=!n.showActionsDropdown}),M(),a(22,"svg",18),y(23,"circle",19)(24,"circle",20)(25,"circle",21),c()(),I(26,eg,27,0,"div",22),c()()()(),I(27,tg,10,0,"div",23)(28,ig,11,1,"div",23)(29,v1,451,129,"div",24)(30,b1,59,2,"div",25)(31,y1,71,2,"div",25)(32,P1,62,5,"div",26),T(),a(33,"app-transfer-asset-modal",27),D("closeModal",function(){return n.onTransferModalClose()})("transferComplete",function(s){return n.onTransferComplete(s)}),c()()),e&2&&(p(13),O((n.asset==null?null:n.asset.name)||"Asset Details"),p(13),v("ngIf",n.showActionsDropdown),p(),v("ngIf",n.loading),p(),v("ngIf",n.error&&!n.loading),p(),v("ngIf",n.asset&&!n.loading),p(),v("ngIf",n.showAddMaintenanceModal),p(),v("ngIf",n.showEditMaintenanceModal),p(),v("ngIf",n.showActivityHistoryModal),p(),v("isOpen",n.showTransferModal)("asset",n.asset))},dependencies:[ze,Vn,lt,He,On,Ln,Oo,Pt,Fn,Un,qt,Bo,jo,We,No,Ge,Yt,Bn,jn,Ii],styles:[".asset-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.asset-image-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:.5rem;min-height:16rem;display:flex;align-items:center;justify-content:center}.info-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.health-score-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669);transition:width .3s ease-in-out}.chart-placeholder[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:.5rem}.chart-placeholder[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.ai-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.ai-button[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.ai-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.action-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;border-radius:.5rem;padding:.5rem 1rem;margin:-.5rem -1rem}.status-badge[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px}.section-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.section-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:1rem}.empty-state[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.lg\\:col-span-2[_ngcontent-%COMP%]{grid-column:span 1}.asset-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media print{.bg-white.border-b[_ngcontent-%COMP%], .flex.items-center.justify-between[_ngcontent-%COMP%], .bg-white.rounded-lg.p-6.shadow-sm.border.border-gray-200[_ngcontent-%COMP%]:has(button), button[_ngcontent-%COMP%], .relative[_ngcontent-%COMP%], .dropdown[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%], .fixed[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%], .actions-dropdown[_ngcontent-%COMP%], .quick-actions[_ngcontent-%COMP%], .print-hide[_ngcontent-%COMP%]{display:none!important}.bg-white.rounded-lg.p-6.shadow-sm.border.border-gray-200[_ngcontent-%COMP%]{border:1px solid #ddd!important;box-shadow:none!important;margin-bottom:20px!important;page-break-inside:avoid}.grid.grid-cols-1.lg\\\\[_ngcontent-%COMP%]:grid-cols-3{display:block!important}.lg\\\\[_ngcontent-%COMP%]:col-span-2{width:100%!important}body[_ngcontent-%COMP%]{margin:0!important;padding:20px!important;background:#fff!important}*[_ngcontent-%COMP%]{color:#000!important;background:#fff!important}.asset-image-container[_ngcontent-%COMP%]{border:1px solid #000!important;background:#fff!important;max-width:100%!important}.qr-section[_ngcontent-%COMP%], .barcode-section[_ngcontent-%COMP%]{text-align:center!important;page-break-inside:avoid}table[_ngcontent-%COMP%]{width:100%!important;border-collapse:collapse!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd!important;padding:8px!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{color:#000!important;page-break-after:avoid}.status-badge[_ngcontent-%COMP%]{border:1px solid #000!important;background:#fff!important;color:#000!important}}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.asset-view[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}.value-display[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums}.section-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:.75rem;margin-bottom:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ai-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#faf5ff,#f3e8ff);border:1px solid #e9d5ff}.financial-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1px solid #bbf7d0}.technical-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:1px solid #bfdbfe}"]})};var V1=["fileInput"],L1=["dateInput"],O1=()=>({standalone:!0});function F1(i,t){i&1&&(a(0,"div",14)(1,"div",15)(2,"div",16),M(),a(3,"svg",17),y(4,"circle",18)(5,"path",19),c()(),T(),a(6,"h3",20),u(7,"Loading Asset"),c(),a(8,"p",21),u(9,"Please wait while we fetch the asset details..."),c()()())}function R1(i,t){if(i&1){let e=H();a(0,"div",14)(1,"div",15)(2,"div",22),M(),a(3,"svg",23),y(4,"path",24),c()(),T(),a(5,"h3",20),u(6,"Error Loading Asset"),c(),a(7,"p",25),u(8),c(),a(9,"button",26),D("click",function(){k(e);let r=_();return E(r.goBack())}),u(10," Back to Assets "),c()()()}if(i&2){let e=_();p(8),O(e.error)}}function H1(i,t){if(i&1&&(a(0,"div",116),M(),a(1,"svg",117),y(2,"path",24),c(),u(3),c()),i&2){let e=_(2);p(3),W(" ",e.nameError," ")}}function N1(i,t){i&1&&(a(0,"span",94),u(1,"Select parent asset"),c())}function B1(i,t){if(i&1&&(a(0,"span",118),u(1),c()),i&2){let e=_(2);p(),De(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function j1(i,t){if(i&1){let e=H();a(0,"button",122),D("click",function(){let r,s=k(e).$implicit,o=_(3);return(r=o.assetForm.get("parent_id"))==null||r.setValue(s.id),E(o.showParentDropdown=!1)}),a(1,"div",40)(2,"div",124),M(),a(3,"svg",125),y(4,"path",66),c()(),T(),a(5,"div")(6,"div",126),u(7),c(),a(8,"div",127),u(9),c()()()()}if(i&2){let e,n=t.$implicit,r=_(3);z("bg-blue-50",((e=r.assetForm.get("parent_id"))==null?null:e.value)===n.id),p(7),O(n.name),p(2),O(n.asset_id)}}function z1(i,t){if(i&1){let e=H();a(0,"div",119)(1,"div",120)(2,"div",121),u(3,"Select parent asset"),c(),a(4,"button",122),D("click",function(){let r;k(e);let s=_(2);return(r=s.assetForm.get("parent_id"))==null||r.setValue(null),E(s.showParentDropdown=!1)}),u(5," -- None -- "),c(),I(6,j1,10,4,"button",123),c()()}if(i&2){let e,n=_(2);p(4),z("bg-blue-50",!((e=n.assetForm.get("parent_id"))!=null&&e.value)),p(2),v("ngForOf",n.possibleParents)}}function W1(i,t){i&1&&(a(0,"span",94),u(1,"Select asset type"),c())}function G1(i,t){if(i&1){let e=H();a(0,"img",131),D("error",function(r){k(e);let s=_(3);return E(s.onAssetTypeIconError(r,s.selectedAssetType))}),c()}if(i&2){let e=_(3);v("src",e.selectedAssetType.icon,ke)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function $1(i,t){if(i&1&&(M(),a(0,"svg",132),y(1,"path",133),c()),i&2){let e=_(3);Ce("color",e.selectedAssetType.color)}}function U1(i,t){if(i&1&&(a(0,"div",40)(1,"div",128),I(2,G1,1,2,"img",129)(3,$1,2,2,"svg",130),c(),a(4,"span",118),u(5),c()()),i&2){let e=_(2);p(),Ce("background-color",e.selectedAssetType.color+"20"),p(),v("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),p(),v("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),p(2),O(e.selectedAssetType.label)}}function Y1(i,t){if(i&1){let e=H();a(0,"img",138),D("error",function(r){k(e);let s=_().$implicit,o=_(3);return E(o.onAssetTypeIconError(r,s))}),c()}if(i&2){let e=_().$implicit;v("src",e.icon,ke)("alt",e.name||e.label)}}function q1(i,t){i&1&&(M(),a(0,"svg",31),y(1,"path",133),c())}function K1(i,t){if(i&1){let e=H();a(0,"button",122),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.selectAssetType(r))}),a(1,"div",40)(2,"div",135),I(3,Y1,1,2,"img",136)(4,q1,2,0,"svg",137),c(),a(5,"div")(6,"div",126),u(7),c(),a(8,"div",21),u(9),c()()()()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",(n.selectedAssetType==null?null:n.selectedAssetType.id)===e.id)("text-blue-700",(n.selectedAssetType==null?null:n.selectedAssetType.id)===e.id),p(3),v("ngIf",e.icon&&!e.iconError),p(),v("ngIf",!e.icon||e.iconError),p(3),O(e.label||e.name),p(2),O(e.description)}}function Q1(i,t){if(i&1&&(a(0,"div",119)(1,"div",120)(2,"div",121),u(3,"Select asset type"),c(),I(4,K1,10,8,"button",134),c()()),i&2){let e=_(2);p(4),v("ngForOf",e.assetTypes)}}function X1(i,t){if(i&1&&(a(0,"div",116),M(),a(1,"svg",117),y(2,"path",24),c(),u(3),c()),i&2){let e=_(2);p(3),W(" ",e.assetTypeError," ")}}function J1(i,t){i&1&&(a(0,"span",94),u(1,"Select category"),c())}function Z1(i,t){if(i&1&&(a(0,"span",118),u(1),c()),i&2){let e=_(2);p(),O(e.selectedCategory.name)}}function e_(i,t){if(i&1){let e=H();a(0,"img",138),D("error",function(r){k(e);let s=_().$implicit,o=_(3);return E(o.onCategoryIconError(r,s))}),c()}if(i&2){let e=_().$implicit;v("src",e.icon,ke)("alt",e.name)}}function t_(i,t){i&1&&(M(),a(0,"svg",125),y(1,"path",66),c())}function i_(i,t){if(i&1&&(a(0,"div",21),u(1),c()),i&2){let e=_().$implicit;p(),O(e.description)}}function n_(i,t){if(i&1){let e=H();a(0,"button",122),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.selectCategory(r))}),a(1,"div",40)(2,"div",124),I(3,e_,1,2,"img",136)(4,t_,2,0,"svg",139),c(),a(5,"div")(6,"div",126),u(7),c(),I(8,i_,2,1,"div",96),c()()()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",(n.selectedCategory==null?null:n.selectedCategory.id)===e.id)("text-blue-700",(n.selectedCategory==null?null:n.selectedCategory.id)===e.id),p(3),v("ngIf",e.icon),p(),v("ngIf",!e.icon||e.iconError),p(3),O(e.name),p(),v("ngIf",e.description)}}function r_(i,t){if(i&1&&(a(0,"div",119)(1,"div",120)(2,"div",121),u(3,"Select category"),c(),I(4,n_,9,8,"button",134),c()()),i&2){let e=_(2);p(4),v("ngForOf",e.categories)}}function s_(i,t){if(i&1&&(a(0,"div",116),M(),a(1,"svg",117),y(2,"path",24),c(),u(3),c()),i&2){let e=_(2);p(3),W(" ",e.categoryError," ")}}function o_(i,t){if(i&1&&(a(0,"div",116),M(),a(1,"svg",117),y(2,"path",24),c(),u(3),c()),i&2){let e=_(2);p(3),W(" ",e.serialNumberError," ")}}function a_(i,t){i&1&&(a(0,"span",94),u(1,"Select location"),c())}function l_(i,t){if(i&1&&(a(0,"div",40)(1,"div",140),M(),a(2,"svg",141),y(3,"path",90)(4,"path",91),c()(),T(),a(5,"span",118),u(6),c()()),i&2){let e=_(2);p(6),O(e.selectedLocation.name)}}function c_(i,t){if(i&1&&(a(0,"div",21),u(1),c()),i&2){let e=_().$implicit;p(),O(e.type.name)}}function d_(i,t){if(i&1){let e=H();a(0,"button",122),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.selectLocation(r))}),a(1,"div",40)(2,"div",142),M(),a(3,"svg",89),y(4,"path",90)(5,"path",91),c()(),T(),a(6,"div")(7,"div",126),u(8),c(),I(9,c_,2,1,"div",96),c()()()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",(n.selectedLocation==null?null:n.selectedLocation.id)===e.id)("text-blue-700",(n.selectedLocation==null?null:n.selectedLocation.id)===e.id),p(8),O(e.name),p(),v("ngIf",e.type)}}function m_(i,t){if(i&1&&(a(0,"div",119)(1,"div",120)(2,"div",121),u(3,"Select location"),c(),I(4,d_,10,6,"button",134),c()()),i&2){let e=_(2);p(4),v("ngForOf",e.locations)}}function u_(i,t){i&1&&(a(0,"span",94),u(1,"Select department"),c())}function p_(i,t){if(i&1&&(a(0,"div",40)(1,"div",143),M(),a(2,"svg",144),y(3,"path",145),c()(),T(),a(4,"span",118),u(5),c()()),i&2){let e=_(2);p(5),O(e.selectedDepartment.name)}}function h_(i,t){if(i&1&&(a(0,"div",21),u(1),c()),i&2){let e=_().$implicit;p(),O(e.description)}}function f_(i,t){if(i&1&&(a(0,"div",148),u(1),c()),i&2){let e=_().$implicit;p(),W("Code: ",e.code,"")}}function g_(i,t){if(i&1){let e=H();a(0,"button",122),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.selectDepartment(r))}),a(1,"div",40)(2,"div",146),M(),a(3,"svg",65),y(4,"path",145),c()(),T(),a(5,"div")(6,"div",126),u(7),c(),I(8,h_,2,1,"div",96)(9,f_,2,1,"div",147),c()()()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",(n.selectedDepartment==null?null:n.selectedDepartment.id)===e.id)("text-blue-700",(n.selectedDepartment==null?null:n.selectedDepartment.id)===e.id),p(7),O(e.name),p(),v("ngIf",e.description),p(),v("ngIf",e.code)}}function __(i,t){if(i&1&&(a(0,"div",119)(1,"div",120)(2,"div",121),u(3,"Select department"),c(),I(4,g_,10,7,"button",134),c()()),i&2){let e=_(2);p(4),v("ngForOf",e.departments)}}function x_(i,t){if(i&1&&(a(0,"div",40),y(1,"div",149),a(2,"span",118),u(3),c()()),i&2){let e=_(2);p(),Ce("background-color",e.selectedStatus.hexColor||"#6B7280"),p(2),O(e.selectedStatus.label)}}function v_(i,t){if(i&1){let e=H();a(0,"button",122),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.selectStatus(r))}),a(1,"div",40)(2,"div"),y(3,"div",149),c(),a(4,"div")(5,"div",126),u(6),c(),a(7,"div",21),u(8),c()()()()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value)("text-blue-700",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value),p(2),Te("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),p(),Ce("background-color",e.hexColor||"#6B7280"),p(3),O(e.label),p(2),O(e.description)}}function b_(i,t){if(i&1&&(a(0,"div",150)(1,"div",120)(2,"div",121),u(3,"Select status"),c(),I(4,v_,9,10,"button",134),c()()),i&2){let e=_(2);p(4),v("ngForOf",e.statusOptions)}}function y_(i,t){if(i&1){let e=H();a(0,"span"),u(1),a(2,"button",154),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.removeTag(r))}),M(),a(3,"svg",155),y(4,"path",156),c()()()}if(i&2){let e=t.$implicit;Te("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),p(),W(" ",e.name," ")}}function w_(i,t){if(i&1&&(a(0,"div",151)(1,"div",152),I(2,y_,5,3,"span",153),c()()),i&2){let e=_(2);p(2),v("ngForOf",e.selectedTags)}}function C_(i,t){if(i&1&&(a(0,"span",21),u(1),c()),i&2){let e=_(2);p(),W(" ",e.selectedTags.length," selected ")}}function S_(i,t){i&1&&(a(0,"div",161),M(),a(1,"svg",132),y(2,"path",162),c()())}function M_(i,t){if(i&1){let e=H();a(0,"button",122),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.toggleTag(r))}),a(1,"div",46)(2,"div",40)(3,"div"),y(4,"div"),c(),a(5,"span",126),u(6),c()(),I(7,S_,3,0,"div",160),c()()}if(i&2){let e=t.$implicit,n=_(3);z("bg-blue-50",n.isTagSelected(e)),p(3),Te("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),p(),Te("w-3 h-3 rounded-full bg-"+e.color+"-500"),p(2),O(e.name),p(),v("ngIf",n.isTagSelected(e))}}function k_(i,t){if(i&1){let e=H();a(0,"div",119)(1,"div",120)(2,"div",157)(3,"div",79)(4,"input",158),ue("ngModelChange",function(r){k(e);let s=_(2);return me(s.newTagInput,r)||(s.newTagInput=r),E(r)}),D("keydown",function(r){k(e);let s=_(2);return E(s.onTagInputKeydown(r))})("click",function(r){return k(e),E(r.stopPropagation())}),c(),a(5,"div",159),u(6," Press Enter "),c()()(),a(7,"div",121),u(8,"Select tags"),c(),I(9,M_,8,8,"button",123),c()()}if(i&2){let e=_(2);p(4),de("ngModel",e.newTagInput),v("ngModelOptions",Si(3,O1)),p(5),v("ngForOf",e.availableTags)}}function E_(i,t){if(i&1){let e=H();a(0,"div",172)(1,"div",173)(2,"img",174),D("error",function(r){let s=k(e).index,o=_(3);return E(o.onImageError(r,s))}),c(),a(3,"div",175)(4,"div",176)(5,"button",177),D("click",function(){let r=k(e).$implicit,s=_(3);return E(s.viewFullImage(r.image_url))}),M(),a(6,"svg",132),y(7,"path",178)(8,"path",179),c()()()(),T(),a(9,"button",180),D("click",function(){let r=k(e).index,s=_(3);return E(s.removeExistingImage(r))}),M(),a(10,"svg",132),y(11,"path",156),c()(),T(),a(12,"div",181),u(13," Existing "),c()(),a(14,"div",182)(15,"p",183),u(16),c(),a(17,"p",127),u(18,"Existing Image"),c()()()}if(i&2){let e=t.$implicit,n=t.index;p(2),v("src",e.image_url,ke)("alt","Existing Asset Image "+(n+1)),p(14),O(e.image_path.split("/").pop())}}function A_(i,t){if(i&1){let e=H();a(0,"button",177),D("click",function(){k(e);let r=_().index,s=_(3);return E(s.moveImageUp(r))}),M(),a(1,"svg",132),y(2,"path",188),c()()}}function D_(i,t){if(i&1){let e=H();a(0,"button",177),D("click",function(){k(e);let r=_().index,s=_(3);return E(s.moveImageDown(r))}),M(),a(1,"svg",132),y(2,"path",50),c()()}}function T_(i,t){if(i&1){let e=H();a(0,"div",172)(1,"div",173)(2,"img",184),D("error",function(r){let s=k(e).index,o=_(3);return E(o.onImageError(r,o.existingImages.length+s))})("load",function(r){let s=k(e).index,o=_(3);return E(o.onImageLoad(r,o.existingImages.length+s))}),c(),a(3,"div",185)(4,"div",176),I(5,A_,3,0,"button",186)(6,D_,3,0,"button",186),c()(),a(7,"button",180),D("click",function(){let r=k(e).index,s=_(3);return E(s.removeImage(r))}),M(),a(8,"svg",132),y(9,"path",156),c()(),T(),a(10,"div",187),u(11," New "),c()(),a(12,"div",182)(13,"p",183),u(14),c(),a(15,"p",127),u(16),c()()()}if(i&2){let e,n=t.$implicit,r=t.index,s=_(3);p(2),v("src",n,ke)("alt","Asset Image "+(r+1)),p(3),v("ngIf",r>0),p(),v("ngIf",r<s.imagePreviewUrls.length-1),p(8),O(s.images[r]==null?null:s.images[r].name),p(2),W("",(((e=s.images[r]==null?null:s.images[r].size)!==null&&e!==void 0?e:0)/1024/1024).toFixed(1)," MB")}}function I_(i,t){if(i&1){let e=H();a(0,"div",163)(1,"div",164)(2,"h4",165),u(3),c(),a(4,"button",166),D("click",function(){k(e);let r=_(2);return r.removeAllImages(),E(r.removeAllExistingImages())}),u(5," Remove All "),c()(),a(6,"div",167),I(7,E_,19,3,"div",168)(8,T_,17,6,"div",168),c(),a(9,"div",169)(10,"div",95),M(),a(11,"svg",170),y(12,"path",98),c(),T(),a(13,"p",171)(14,"strong"),u(15,"Gallery Tips:"),c(),u(16," Existing images are preserved. New images can be reordered. Green badges indicate existing images, blue badges indicate new uploads. "),c()()()()}if(i&2){let e=_(2);p(3),W("Asset Images (",e.existingImages.length+e.imagePreviewUrls.length,")"),p(4),v("ngForOf",e.existingImages),p(),v("ngForOf",e.imagePreviewUrls)}}function P_(i,t){if(i&1&&(a(0,"div",189)(1,"div",95),M(),a(2,"svg",190),y(3,"path",24),c(),T(),a(4,"p",191),u(5),c()()()),i&2){let e=_(2);p(5),O(e.submitError)}}function V_(i,t){if(i&1&&(a(0,"div",192)(1,"div",95),M(),a(2,"svg",70),y(3,"path",162),c(),T(),a(4,"p",193),u(5),c()()()),i&2){let e=_(2);p(5),O(e.submitSuccess)}}function L_(i,t){i&1&&(a(0,"span",95),M(),a(1,"svg",194),y(2,"path",162),c(),T(),a(3,"span"),u(4,"Update Asset"),c()())}function O_(i,t){i&1&&(a(0,"span",95),M(),a(1,"svg",195),y(2,"circle",18)(3,"path",19),c(),T(),a(4,"span"),u(5,"Updating Asset..."),c()())}function F_(i,t){if(i&1){let e=H();a(0,"div")(1,"form",27),D("ngSubmit",function(){k(e);let r=_();return E(r.onSubmit())}),a(2,"div",28)(3,"div",29)(4,"div",30),M(),a(5,"svg",31),y(6,"path",32),c()(),T(),a(7,"h2",33),u(8,"Basic Information"),c()(),a(9,"div",34)(10,"div")(11,"label",35),u(12," Asset Name "),a(13,"span",36),u(14,"*"),c()(),y(15,"input",37),I(16,H1,4,1,"div",38),a(17,"div",39),u(18,"Maximum 100 characters"),c()(),a(19,"div")(20,"label",35),u(21,"Asset ID"),c(),a(22,"div",40),y(23,"input",41),a(24,"span",42),u(25," auto-generated "),c()(),a(26,"p",39),u(27,"Unique identifier automatically assigned"),c()()(),a(28,"div",43)(29,"label",35),u(30,"Parent Asset"),c(),a(31,"div",44),D("click",function(r){return k(e),E(r.stopPropagation())}),a(32,"button",45),D("click",function(){k(e);let r=_();return E(r.showParentDropdown=!r.showParentDropdown)}),a(33,"div",46),I(34,N1,2,0,"span",47)(35,B1,2,2,"span",48),M(),a(36,"svg",49),y(37,"path",50),c()()(),I(38,z1,7,3,"div",51),c(),T(),a(39,"div",39),u(40,"Optional: Select a parent asset if this asset is a child of another."),c()(),a(41,"div",43)(42,"label",35),u(43,"Description"),c(),y(44,"textarea",52),a(45,"div",39),u(46,"Maximum 500 characters"),c()(),a(47,"div")(48,"label",53),u(49,"Health Score"),c(),a(50,"div",54)(51,"div",55)(52,"span",56),u(53,"Current Score"),c(),a(54,"span",57),u(55),c()(),a(56,"div",58),y(57,"div",59)(58,"div",60)(59,"input",61)(60,"div",62),c(),a(61,"div",63)(62,"span"),u(63,"Poor (0%)"),c(),a(64,"span"),u(65,"Fair (25%)"),c(),a(66,"span"),u(67,"Good (50%)"),c(),a(68,"span"),u(69,"Very Good (75%)"),c(),a(70,"span"),u(71,"Excellent (100%)"),c()()()()(),a(72,"div",28)(73,"div",29)(74,"div",64),M(),a(75,"svg",65),y(76,"path",66),c()(),T(),a(77,"h2",33),u(78,"Asset Classification"),c()(),a(79,"div",67)(80,"div")(81,"label",35),u(82," Asset Type "),a(83,"span",36),u(84,"*"),c()(),a(85,"div",44),D("click",function(r){return k(e),E(r.stopPropagation())}),a(86,"button",45),D("click",function(){k(e);let r=_();return E(r.toggleAssetTypeDropdown())}),a(87,"div",46),I(88,W1,2,0,"span",47)(89,U1,6,5,"div",68),M(),a(90,"svg",49),y(91,"path",50),c()()(),I(92,Q1,5,1,"div",51),c(),I(93,X1,4,1,"div",38),c(),T(),a(94,"div")(95,"label",35),u(96," Category "),a(97,"span",36),u(98,"*"),c()(),a(99,"div",44),D("click",function(r){return k(e),E(r.stopPropagation())}),a(100,"button",45),D("click",function(){k(e);let r=_();return E(r.toggleCategoryDropdown())}),a(101,"div",46),I(102,J1,2,0,"span",47)(103,Z1,2,1,"span",48),M(),a(104,"svg",49),y(105,"path",50),c()()(),I(106,r_,5,1,"div",51),c(),I(107,s_,4,1,"div",38),c()()(),T(),a(108,"div",28)(109,"div",29)(110,"div",69),M(),a(111,"svg",70),y(112,"path",71),c()(),T(),a(113,"h2",33),u(114,"Technical Details"),c()(),a(115,"div",72)(116,"div")(117,"label",35),u(118,"Manufacturer"),c(),y(119,"input",73),a(120,"div",39),u(121,"Maximum 100 characters"),c()(),a(122,"div")(123,"label",35),u(124,"Model"),c(),y(125,"input",74),a(126,"div",39),u(127,"Maximum 100 characters"),c()(),a(128,"div")(129,"label",35),u(130," Serial Number "),a(131,"span",36),u(132,"*"),c()(),y(133,"input",75),I(134,o_,4,1,"div",38),a(135,"div",39),u(136,"Required, max 100 chars, must be unique within your company"),c()()()(),a(137,"div",28)(138,"div",29)(139,"div",76),M(),a(140,"svg",77),y(141,"path",78),c()(),T(),a(142,"h2",33),u(143,"Financial Information"),c()(),a(144,"div",34)(145,"div")(146,"label",35),u(147,"Purchase Value (USD)"),c(),a(148,"div",79)(149,"div",80)(150,"span",81),u(151,"$ "),c()(),y(152,"input",82),c(),a(153,"div",39),u(154,"Must be a non-negative number"),c()(),a(155,"div")(156,"label",35),u(157,"Purchase Date"),c(),y(158,"input",83,0),a(160,"div",39),u(161,"Cannot be in the future"),c()()(),a(162,"div",34)(163,"div")(164,"label",35),u(165,"Depreciation Rate (%)"),c(),y(166,"input",84),a(167,"div",39),u(168,"Annual depreciation rate (0-100%)"),c()(),a(169,"div")(170,"label",35),u(171,"Depreciation Life (Years)"),c(),y(172,"input",85),a(173,"div",39),u(174,"Useful life for depreciation calculation (1-100 years)"),c()()(),a(175,"div",34)(176,"div")(177,"label",35),u(178,"Warranty Information"),c(),y(179,"input",86),a(180,"div",39),u(181,"Warranty details (max 255 characters)"),c()(),a(182,"div")(183,"label",35),u(184,"Insurance Information"),c(),y(185,"input",87),a(186,"div",39),u(187,"Insurance details (max 255 characters)"),c()()()(),a(188,"div",28)(189,"div",29)(190,"div",88),M(),a(191,"svg",89),y(192,"path",90)(193,"path",91),c()(),T(),a(194,"h2",33),u(195,"Location & Assignment"),c()(),a(196,"div",67)(197,"div")(198,"label",35),u(199,"Location"),c(),a(200,"div",44),D("click",function(r){return k(e),E(r.stopPropagation())}),a(201,"button",45),D("click",function(){k(e);let r=_();return E(r.toggleLocationDropdown())}),a(202,"div",46),I(203,a_,2,0,"span",47)(204,l_,7,1,"div",68),M(),a(205,"svg",49),y(206,"path",50),c()()(),I(207,m_,5,1,"div",51),c()(),T(),a(208,"div")(209,"label",35),u(210,"Department ID"),c(),a(211,"div",44),D("click",function(r){return k(e),E(r.stopPropagation())}),a(212,"button",45),D("click",function(){k(e);let r=_();return E(r.toggleDepartmentDropdown())}),a(213,"div",46),I(214,u_,2,0,"span",47)(215,p_,6,1,"div",68),M(),a(216,"svg",49),y(217,"path",50),c()()(),I(218,__,5,1,"div",51),c(),T(),a(219,"div",39),u(220,"Optional department assignment"),c()(),a(221,"div")(222,"label",35),u(223,"Status"),c(),a(224,"div",44),D("click",function(r){return k(e),E(r.stopPropagation())}),a(225,"button",45),D("click",function(){k(e);let r=_();return E(r.toggleStatusDropdown())}),a(226,"div",46),I(227,x_,4,3,"div",68),M(),a(228,"svg",49),y(229,"path",50),c()()(),I(230,b_,5,1,"div",92),c(),T(),a(231,"div",39),u(232,"Current operational status of the asset"),c()(),a(233,"div")(234,"label",35),u(235,"Tags"),c(),I(236,w_,3,1,"div",93),a(237,"div",44),D("click",function(r){return k(e),E(r.stopPropagation())}),a(238,"button",45),D("click",function(){k(e);let r=_();return E(r.toggleTagsDropdown())}),a(239,"div",46)(240,"span",94),u(241),c(),a(242,"div",95),I(243,C_,2,1,"span",96),M(),a(244,"svg",49),y(245,"path",50),c()()()(),I(246,k_,10,4,"div",51),c(),T(),a(247,"div",39),M(),a(248,"svg",97),y(249,"path",98),c(),u(250," Select existing tags or type to create new ones. Press Enter to add custom tags. "),c()()()(),T(),a(251,"div",28)(252,"div",29)(253,"div",99),M(),a(254,"svg",100),y(255,"path",101),c()(),T(),a(256,"h2",33),u(257,"Asset Image"),c()(),a(258,"div")(259,"label",35),u(260,"Upload Image"),c(),a(261,"div",102),D("click",function(){k(e);let r=_();return E(r.triggerFileInput())})("dragover",function(r){k(e);let s=_();return E(s.onDragOver(r))})("dragleave",function(r){k(e);let s=_();return E(s.onDragLeave(r))})("drop",function(r){k(e);let s=_();return E(s.onDrop(r))}),a(262,"div",103)(263,"div",104),M(),a(264,"svg",105),y(265,"path",106),c()(),T(),a(266,"p",107),u(267),c(),a(268,"input",108,1),D("change",function(r){k(e);let s=_();return E(s.onFileChange(r))}),c()()(),I(270,I_,17,3,"div",109),c()(),I(271,P_,6,1,"div",110)(272,V_,6,1,"div",111),a(273,"div",112)(274,"button",113),D("click",function(){k(e);let r=_();return E(r.goBack())}),u(275," Cancel "),c(),a(276,"button",114),I(277,L_,5,0,"span",115)(278,O_,6,0,"span",115),c()()()()}if(i&2){let e,n,r,s,o,l,d,m,h,f,x,g=_();p(),v("formGroup",g.assetForm),p(14),z("border-red-300",g.nameError),p(),v("ngIf",g.nameError),p(7),v("value",(g.asset==null?null:g.asset.asset_id)||(g.asset==null?null:g.asset.id)),p(9),z("border-blue-500",g.showParentDropdown),p(2),v("ngIf",!((e=g.assetForm.get("parent_id"))!=null&&e.value)),p(),v("ngIf",((n=g.assetForm.get("parent_id"))==null?null:n.value)&&g.getSelectedParent()),p(),z("rotate-180",g.showParentDropdown),p(2),v("ngIf",g.showParentDropdown),p(16),z("text-red-600",(((r=g.assetForm.get("health_score"))==null?null:r.value)||85)<50)("text-green-600",(((s=g.assetForm.get("health_score"))==null?null:s.value)||85)>=50),p(),W("",((o=g.assetForm.get("health_score"))==null?null:o.value)||85,"%"),p(3),Ce("width",((l=g.assetForm.get("health_score"))==null?null:l.value)||85,"%"),z("bg-red-500",(((d=g.assetForm.get("health_score"))==null?null:d.value)||85)<50)("bg-green-500",(((m=g.assetForm.get("health_score"))==null?null:m.value)||85)>=50),p(2),Ce("left",((h=g.assetForm.get("health_score"))==null?null:h.value)||85,"%"),z("bg-red-500",(((f=g.assetForm.get("health_score"))==null?null:f.value)||85)<50)("bg-green-500",(((x=g.assetForm.get("health_score"))==null?null:x.value)||85)>=50),p(26),z("border-red-300",g.assetTypeError)("border-blue-500",g.showAssetTypeDropdown),p(2),v("ngIf",!g.selectedAssetType),p(),v("ngIf",g.selectedAssetType),p(),z("rotate-180",g.showAssetTypeDropdown),p(2),v("ngIf",g.showAssetTypeDropdown),p(),v("ngIf",g.assetTypeError),p(7),z("border-red-300",g.categoryError)("border-blue-500",g.showCategoryDropdown),p(2),v("ngIf",!g.selectedCategory),p(),v("ngIf",g.selectedCategory),p(),z("rotate-180",g.showCategoryDropdown),p(2),v("ngIf",g.showCategoryDropdown),p(),v("ngIf",g.categoryError),p(26),z("border-red-300",g.serialNumberError),p(),v("ngIf",g.serialNumberError),p(67),z("border-blue-500",g.showLocationDropdown),p(2),v("ngIf",!g.selectedLocation),p(),v("ngIf",g.selectedLocation),p(),z("rotate-180",g.showLocationDropdown),p(2),v("ngIf",g.showLocationDropdown),p(5),z("border-blue-500",g.showDepartmentDropdown),p(2),v("ngIf",!g.selectedDepartment),p(),v("ngIf",g.selectedDepartment),p(),z("rotate-180",g.showDepartmentDropdown),p(2),v("ngIf",g.showDepartmentDropdown),p(7),z("border-blue-500",g.showStatusDropdown),p(2),v("ngIf",g.selectedStatus),p(),z("rotate-180",g.showStatusDropdown),p(2),v("ngIf",g.showStatusDropdown),p(6),v("ngIf",g.selectedTags.length>0),p(2),z("border-blue-500",g.showTagsDropdown),p(3),W(" ",g.selectedTags.length===0?"Select tags":"Add more tags"," "),p(2),v("ngIf",g.selectedTags.length>0),p(),z("rotate-180",g.showTagsDropdown),p(2),v("ngIf",g.showTagsDropdown),p(15),z("border-gray-300",!g.isDragOver)("border-blue-500",g.isDragOver)("bg-blue-50",g.isDragOver)("hover:border-blue-400",!g.isDragOver),p(3),z("text-gray-400",!g.isDragOver)("text-blue-500",g.isDragOver),p(2),z("text-gray-500",!g.isDragOver)("text-blue-600",g.isDragOver),p(),W(" ",g.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),p(3),v("ngIf",g.existingImages.length>0||g.imagePreviewUrls.length>0),p(),v("ngIf",g.submitError),p(),v("ngIf",g.submitSuccess),p(2),v("disabled",g.saving),p(2),v("disabled",g.saving||!g.isFormValid()),p(),v("ngIf",!g.saving),p(),v("ngIf",g.saving)}}var Yi=class i{constructor(t,e,n,r,s){this.fb=t;this.route=e;this.router=n;this.assetService=r;this.angularLocation=s;this.assetForm=this.fb.group({name:["",[ft.required,ft.minLength(2)]],description:[""],serial_number:["",[ft.required,ft.minLength(3)]],model:[""],manufacturer:[""],purchase_date:[""],purchase_price:[null],depreciation:[null],depreciation_life:[null],location_id:[null],department_id:[null],parent_id:[null],warranty:[""],insurance:[""],health_score:[85,[ft.min(0),ft.max(100)]],status:[null],type:[null,ft.required],category_id:[null,ft.required],tags:[[]]})}destroy$=new wi;dateInputs;fileInput;flatpickrInstances=[];asset=null;assetForm;loading=!0;saving=!1;error="";successMessage="";categories=[];locations=[];departments=[];availableTags=[];statusOptionsFromAPI=[];showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";assetTypes=[];assetTypesFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];previewImage=null;selectedFile=null;images=[];imagePreviewUrls=[];existingImages=[];removedImageIds=[];isDragOver=!1;nameError="";assetTypeError="";categoryError="";serialNumberError="";submitError="";submitSuccess="";possibleParents=[];ngOnInit(){this.route.params.pipe(ce(this.destroy$)).subscribe(t=>{let e=t.id;e&&(this.loadAsset(e),this.assetService.getPossibleParents(e).subscribe(n=>{n.success&&n.data?.possible_parents&&(this.possibleParents=n.data.possible_parents)}))}),this.loadAssetTypes(),this.loadCategories(),this.loadLocations(),this.loadDepartments(),this.loadAvailableTags(),this.loadAssetStatuses()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(t=>{t&&t.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(t=>{t&&t.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((t,e)=>{if(t?.nativeElement){let n=t.nativeElement,r=n.getAttribute("formControlName");if(console.log("Processing date input:",r),r==="purchase_date"){console.log("Initializing Flatpickr for purchase_date");let s={dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,maxDate:"today",defaultDate:null,onChange:(d,m)=>{console.log("Date selected:",m),this.assetForm.get("purchase_date")?.setValue(m)}},o=this.assetForm.get("purchase_date")?.value;o&&(s.defaultDate=this.convertDisplayDateToDate(o));let l=Xt(n,s);this.flatpickrInstances.push(l),console.log("Flatpickr initialized successfully for purchase_date")}}})},50)}loadAsset(t){this.loading=!0,this.error="",this.assetService.getAsset(t).pipe(ce(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.populateForm()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}populateForm(){if(this.asset){let t=this.asset.purchase_date?this.convertBackendDateToDisplay(this.asset.purchase_date):"",e=this.asset.warranty?this.convertBackendDateToDisplay(this.asset.warranty):"";this.assetForm.patchValue({name:this.asset.name||"",description:this.asset.description||"",serial_number:this.asset.serial_number||"",model:this.asset.model||"",manufacturer:this.asset.manufacturer||"",purchase_date:t,purchase_price:this.asset.purchase_price||null,depreciation:this.asset.depreciation||null,depreciation_life:this.asset.depreciation_life||null,location_id:this.asset.location_id||null,department_id:this.asset.department_id||null,warranty:e,insurance:this.asset.insurance||"",health_score:this.asset.health_score||85,status:this.asset.status||null,type:this.asset.type||"",category_id:this.asset.category_id||null,tags:this.asset.tags||[],parent_id:this.asset.parent_id||null}),this.asset.images&&Array.isArray(this.asset.images)&&(this.existingImages=this.asset.images),setTimeout(()=>{this.selectedAssetType=this.assetTypes.find(n=>n.id==this.asset.type)||null,this.selectedCategory=this.categories.find(n=>n.id===this.asset.category_id)||null,this.selectedLocation=this.locations.find(n=>n.id===this.asset.location_id)||null,this.selectedDepartment=this.departments.find(n=>n.id===this.asset.department_id)||null,this.selectedStatus=this.statusOptions.find(n=>n.value===this.asset.status||n.label===this.asset.status||n.id===this.asset.status)||null,this.selectedStatus&&this.assetForm.patchValue({status:this.selectedStatus.value}),this.asset.tags&&Array.isArray(this.asset.tags)&&(this.selectedTags=this.asset.tags.map(n=>this.availableTags.find(r=>r.id===n.id)||n)),this.assetForm.markAllAsTouched(),this.assetForm.updateValueAndValidity(),setTimeout(()=>{this.initializeFlatpickr()},100)},100)}}loadAssetTypes(){this.assetService.getAssetTypes().pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.assetTypesFromAPI=t.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,value:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})),this.asset&&this.populateForm())},error:t=>{console.error("Error loading asset types:",t)}})}loadCategories(){this.assetService.getAssetCategories().pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&t.data?.categories&&(this.categories=t.data.categories,this.asset&&this.populateForm())},error:t=>{console.error("Error loading categories:",t)}})}loadLocations(){this.assetService.getLocations().pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.locations=t.data.locations||t.data,this.asset&&this.populateForm())},error:t=>{console.error("Error loading locations:",t)}})}loadDepartments(){this.assetService.getDepartments().pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.departments=t.data,this.asset&&this.populateForm())},error:t=>{console.error("Error loading departments:",t)}})}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetStatuses(){this.assetService.getAssetStatuses().pipe(ce(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.statusOptionsFromAPI=t.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,n)=>e.sort_order-n.sort_order),this.asset&&this.populateForm())},error:t=>{console.error("Error loading asset statuses:",t)}})}hexToTailwindColor(t){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[t.toUpperCase()]||"gray"}getColorForType(t){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[t]||"#6b7280"}onAssetTypeIconError(t,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(t){this.selectedAssetType=t,this.assetForm.patchValue({type:t.id}),this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(t){this.selectedCategory=t,this.assetForm.patchValue({category_id:t.id}),this.showCategoryDropdown=!1,this.clearErrors()}selectLocation(t){this.selectedLocation=t,this.assetForm.patchValue({location_id:t.id}),this.showLocationDropdown=!1}selectStatus(t){this.selectedStatus=t,this.assetForm.patchValue({status:t.value}),this.showStatusDropdown=!1}selectDepartment(t){this.selectedDepartment=t,this.assetForm.patchValue({department_id:t.id}),this.showDepartmentDropdown=!1}toggleTag(t){let e=this.selectedTags.findIndex(n=>n.id===t.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(t)}isTagSelected(t){return this.selectedTags.some(e=>e.id===t.id)}onTagInputKeydown(t){t.key==="Enter"&&(t.preventDefault(),this.createNewTag())}createNewTag(){let t=this.newTagInput.trim();if(t&&!this.selectedTags.some(e=>e.name.toLowerCase()===t.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],n=e[Math.floor(Math.random()*e.length)],r={id:Date.now(),name:t,color:n,isNew:!0};this.selectedTags.push(r),this.newTagInput=""}}removeTag(t){let e=this.selectedTags.findIndex(n=>n.id===t.id);e>-1&&this.selectedTags.splice(e,1)}onFileChange(t){if(t.target.files&&t.target.files.length){let e=Array.from(t.target.files);this.processFiles(e),t.target.value=""}}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1;let e=t.dataTransfer?.files;if(e&&e.length>0){let n=Array.from(e).filter(r=>r.type.startsWith("image/"));n.length>0&&this.processFiles(n)}}processFiles(t){let n=["image/jpeg","image/png","image/gif","image/webp"],r=[];for(let s of t){if(!n.includes(s.type)){console.warn("Invalid file type:",s.name);continue}if(s.size>10*1024*1024){console.warn("File too large:",s.name);continue}if(this.images.some(d=>d.name===s.name&&d.size===s.size)){console.warn("Duplicate file skipped:",s.name);continue}if(this.images.length+r.length>=10){console.warn("Max image count exceeded:",s.name);break}r.push(s);let l=new FileReader;l.onload=d=>{d.target?.result&&this.imagePreviewUrls.push(d.target.result)},l.onerror=d=>{console.error("Preview failed for:",s.name,d)},l.readAsDataURL(s)}this.images=[...this.images,...r]}removeImage(t){this.images.splice(t,1),this.imagePreviewUrls.splice(t,1)}removeAllImages(){this.images=[],this.imagePreviewUrls=[]}removeExistingImage(t){let e=this.existingImages[t];e&&e.id&&this.removedImageIds.push(e.id),this.existingImages.splice(t,1)}removeAllExistingImages(){this.existingImages.forEach(t=>{t&&t.id&&this.removedImageIds.push(t.id)}),this.existingImages=[]}moveImage(t,e){if(e>=0&&e<this.images.length){let n=this.images.splice(t,1)[0];this.images.splice(e,0,n);let r=this.imagePreviewUrls.splice(t,1)[0];this.imagePreviewUrls.splice(e,0,r)}}moveImageUp(t){t>0&&this.moveImage(t,t-1)}moveImageDown(t){t<this.images.length-1&&this.moveImage(t,t+1)}triggerFileInput(){this.fileInput.nativeElement.click()}onImageError(t,e){console.warn("Image failed to load at index:",e),t.target.onerror=null,t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onImageLoad(t,e){console.log("Image loaded successfully at index:",e)}viewFullImage(t){window.open(t,"_blank")}convertImagesToBase64(){return Promise.all(this.images.map(t=>new Promise((e,n)=>{let r=new FileReader;r.onload=()=>{r.result?e(r.result):n(new Error("Failed to read file"))},r.onerror=()=>n(r.error),r.readAsDataURL(t)})))}onCategoryIconError(t,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,t.target.style.display="none"}validateForm(){let t=!0;this.clearErrors(),!this.assetForm.get("name")?.value||this.assetForm.get("name")?.value.trim().length===0?(this.nameError="Asset name is required",t=!1):this.assetForm.get("name")?.value.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",t=!1),this.selectedAssetType||(this.assetTypeError="Asset type is required",t=!1),this.selectedCategory||(this.categoryError="Category is required",t=!1);let e=this.assetForm.get("serial_number")?.value;return e&&e.trim().length===0?(this.serialNumberError="Serial number cannot be empty if provided",t=!1):e&&e.length>255&&(this.serialNumberError="Serial number cannot exceed 255 characters",t=!1),t}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}onSubmit(){!this.validateForm()||this.saving||!this.asset||this.assetForm.valid&&!this.saving&&this.asset&&(this.saving=!0,this.error="",this.successMessage="",this.submitError="",this.submitSuccess="",this.convertImagesToBase64().then(t=>{let e=this.assetForm.value;e.tags=this.selectedTags.map(n=>n.name),e.purchase_date&&(e.purchase_date=this.convertDateToBackendFormat(e.purchase_date)),e.warranty&&(e.warranty=this.convertDateToBackendFormat(e.warranty)),e.images=t,e.existing_images=this.existingImages.map(n=>n.id||n.image_url),this.removedImageIds.length>0&&(e.remove_image_ids=this.removedImageIds),this.assetService.updateAsset(this.asset.id,e).pipe(ce(this.destroy$)).subscribe({next:n=>{n.success?(this.submitSuccess="Asset updated successfully!",setTimeout(()=>{this.router.navigate(["/assets/preview",this.asset.id])},2e3)):this.submitError=n.message||"Failed to update asset",this.saving=!1},error:n=>{this.submitError=n.error?.message||"An error occurred while updating the asset",this.saving=!1}})}).catch(t=>{this.saving=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",t)}))}goBack(){this.angularLocation.back()}onDocumentClick(t){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}isFormValid(){return this.assetForm.valid&&this.selectedAssetType!==null&&this.selectedCategory!==null&&!this.nameError&&!this.assetTypeError&&!this.categoryError&&!this.serialNumberError}getSelectedParent(){return this.possibleParents.find(t=>t.id===this.assetForm.get("parent_id")?.value)}convertDateToBackendFormat(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`}catch(e){return console.error("Date conversion error:",e),t}}convertBackendDateToDisplay(t){if(!t)return"";try{let e=new Date(t);if(isNaN(e.getTime()))return t;let n={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",n).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),t}}convertDisplayDateToDate(t){if(!t)return null;try{let e=new Date(t);return isNaN(e.getTime())?null:e}catch(e){return console.error("Date conversion error:",e),null}}static \u0275fac=function(e){return new(e||i)(he($n),he(Mi),he(wt),he(dt),he(Pn))};static \u0275cmp=Re({type:i,selectors:[["app-asset-edit"]],viewQuery:function(e,n){if(e&1&&(vt(V1,5),vt(L1,5)),e&2){let r;bt(r=yt())&&(n.fileInput=r.first),bt(r=yt())&&(n.dateInputs=r)}},hostBindings:function(e,n){e&1&&D("click",function(s){return n.onDocumentClick(s)},!1,Ci)},decls:16,vars:3,consts:[["dateInput",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-edit-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","flex items-center justify-center py-20",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[3,"ngSubmit","formGroup"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","formControlName","name",1,"input"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","space-x-3"],["type","text","readonly","",1,"input","flex-1",3,"value"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","formControlName","description","maxlength","500",1,"input","resize-none"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","formControlName","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","placeholder","e.g., Dell, HP, Toyota","formControlName","manufacturer","maxlength","100",1,"input"],["type","text","placeholder","e.g., PowerEdge R730","formControlName","model","maxlength","100",1,"input"],["type","text","placeholder","e.g., SN123456789","formControlName","serial_number","required","","maxlength","100",1,"input"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","formControlName","purchase_price","step","0.01","min","0",1,"input",2,"padding-left","24px"],["type","text","formControlName","purchase_date","placeholder","Select purchase date","readonly","",1,"input"],["type","number","formControlName","depreciation","placeholder","e.g., 20","min","0","max","100","step","0.01",1,"input"],["type","number","formControlName","depreciation_life","placeholder","e.g., 5","min","1","max","100",1,"input"],["type","text","formControlName","warranty","placeholder","e.g., 2 years manufacturer warranty","maxlength","255",1,"input"],["type","text","formControlName","insurance","placeholder","e.g., Policy #12345, expires 2025-12-31","maxlength","255",1,"input"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel","ngModelOptions"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mt-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","src","alt"],[1,"absolute","inset-0","bg-black","opacity-0","group-hover:opacity-50","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","px-2","py-1","bg-green-600","text-white","rounded","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],[1,"absolute","top-2","left-2","px-2","py-1","bg-blue-600","text-white","rounded","text-xs","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"]],template:function(e,n){e&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"button",6),D("click",function(){return n.goBack()}),M(),a(5,"svg",7),y(6,"path",8),c(),T(),a(7,"span",9),u(8,"Back to Assets"),c()()(),a(9,"h1",10),u(10,"Edit Asset"),c(),a(11,"p",11),u(12," Update asset information and specifications "),c()(),I(13,F1,10,0,"div",12)(14,R1,11,1,"div",12)(15,F_,279,104,"div",13),c()()),e&2&&(p(13),v("ngIf",n.loading),p(),v("ngIf",n.error&&!n.loading),p(),v("ngIf",!n.loading&&!n.error))},dependencies:[ze,lt,He,Un,qt,We,Hn,Nn,Ge,Yt,ki,Gn,Wn,zn,Bn,jn,$e,et,Pt],styles:[".asset-edit-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 768px){.asset-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.transition-transform[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb;font-family:inherit}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6;font-weight:600}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}[_nghost-%COMP%]     .flatpickr-input{cursor:pointer}[_nghost-%COMP%]     .flatpickr-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.slider-input[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;outline:none;z-index:20}.slider-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;position:relative;z-index:30}.slider-input[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;box-shadow:none}.slider-input[_ngcontent-%COMP%]:focus{outline:none}"]})};var R_=()=>[1,2,3,4];function H_(i,t){if(i&1){let e=H();a(0,"div",16)(1,"div",3)(2,"div",17),M(),a(3,"svg",18),y(4,"path",19),c(),T(),a(5,"span",20),u(6),c()(),a(7,"button",21),D("click",function(){k(e);let r=_();return E(r.clearError())}),M(),a(8,"svg",22),y(9,"path",23),c()()()()}if(i&2){let e=_();p(6),O(e.errorMessage)}}function N_(i,t){i&1&&(a(0,"span"),M(),a(1,"svg",22),y(2,"path",28),c()())}function B_(i,t){if(i&1&&(a(0,"span"),u(1),c()),i&2){let e=_().$implicit;p(),O(e)}}function j_(i,t){if(i&1&&y(0,"div",29),i&2){let e=_().$implicit,n=_();Te(n.currentStep>e?"bg-green-500":"bg-gray-200")}}function z_(i,t){if(i&1&&(a(0,"div",17)(1,"div",24)(2,"div",25),I(3,N_,3,0,"span",15)(4,B_,2,1,"span",15),c(),a(5,"span",26),u(6),c()(),I(7,j_,1,2,"div",27),c()),i&2){let e=t.$implicit,n=t.index,r=_();p(2),Te(r.currentStep>e?"bg-green-500 text-white":r.currentStep===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"),p(),v("ngIf",r.currentStep>e),p(),v("ngIf",r.currentStep<=e),p(),Te(r.currentStep>=e?"text-blue-600":"text-gray-500"),p(),W(" ",e===1?"Upload":e===2?"Preview":e===3?"Map Fields":"Import"," "),p(),v("ngIf",n<3)}}function W_(i,t){if(i&1){let e=H();a(0,"div",30)(1,"div",2)(2,"div",31),M(),a(3,"svg",32),y(4,"path",33),c()(),T(),a(5,"h2",34),u(6,"Upload Asset File"),c(),a(7,"p",35),u(8,"Upload a spreadsheet file (CSV, Excel, etc.) with your asset data to get started."),c()(),a(9,"div",36)(10,"div",30),M(),a(11,"svg",37),y(12,"path",33),c(),T(),a(13,"p",38),u(14,"Choose Spreadsheet File"),c(),a(15,"p",39),u(16,"or drag and drop your file here"),c(),a(17,"button",40),D("click",function(){k(e);let r=In(20);return E(r.click())}),u(18," Browse Files "),c(),a(19,"input",41,0),D("change",function(r){k(e);let s=_();return E(s.parseFile(r))}),c()()(),a(21,"div",42)(22,"h3",43),M(),a(23,"svg",44),y(24,"path",45),c(),u(25," Supported Formats "),c(),T(),a(26,"div",46)(27,"div")(28,"h4",47),u(29,"Standard Asset List"),c(),a(30,"p",48),u(31,"Includes: Asset Name, Description, Category, Type, Serial Number, Model, Manufacturer, Purchase Date, Purchase Price, Depreciation, Location, Department, Warranty, Insurance, Health Score, Status"),c(),a(32,"ul",49)(33,"li",17),M(),a(34,"svg",50),y(35,"path",28),c(),u(36," Spreadsheet formats (.csv, .xlsx, .xls, .ods) "),c(),T(),a(37,"li",17),M(),a(38,"svg",50),y(39,"path",28),c(),u(40," Asset Name is required "),c()()()()(),T(),a(41,"div",51)(42,"a",52),M(),a(43,"svg",7),y(44,"path",53),c(),u(45," Download Standard Template "),c(),T(),a(46,"a",54),M(),a(47,"svg",7),y(48,"path",53),c(),u(49," Download EY Master Template "),c()()()}}function G_(i,t){if(i&1&&(a(0,"div",69)(1,"div",70),M(),a(2,"svg",71),y(3,"path",57),c(),T(),a(4,"h3",72),u(5,"Format Detected"),c()(),a(6,"p",73),u(7),c(),a(8,"p",74),u(9),c()()),i&2){let e=_(2);p(7),O(e.formatName),p(2),W(" ",e.detectedFormat==="STANDARD"?"Standard asset list format with comprehensive fields including financial and operational data.":e.detectedFormat==="EY_MASTER"?"EY Master asset list format with location hierarchy and technical specifications. Data will be imported starting from row 2 (skipping the header row).":"Unknown format - manual field mapping may be required."," ")}}function $_(i,t){if(i&1){let e=H();a(0,"div",30)(1,"div",2)(2,"div",55),M(),a(3,"svg",56),y(4,"path",57),c()(),T(),a(5,"h2",34),u(6,"File Uploaded Successfully"),c(),a(7,"p",35),u(8,"Detected format: "),a(9,"span",58),u(10),c()()(),I(11,G_,10,2,"div",59),a(12,"div",60)(13,"div",61)(14,"div",30)(15,"div",62),u(16),c(),a(17,"div",63),u(18,"File Name"),c()(),a(19,"div",30)(20,"div",62),u(21),c(),a(22,"div",63),u(23,"File Size"),c()(),a(24,"div",30)(25,"div",62),u(26),c(),a(27,"div",63),u(28,"Data Rows"),c()(),a(29,"div",30)(30,"div",62),u(31),c(),a(32,"div",63),u(33,"Columns"),c()()()(),a(34,"div",64)(35,"button",65),D("click",function(){k(e);let r=_();return E(r.back())}),u(36," Back "),c(),a(37,"button",66),D("click",function(){k(e);let r=_();return E(r.makeMapped())}),u(38," Continue to Mapping "),M(),a(39,"svg",67),y(40,"path",68),c()()()()}if(i&2){let e=_();p(10),O(e.formatName),p(),v("ngIf",e.detectedFormat!=="UNKNOWN"),p(5),O((e.uploadedData==null?null:e.uploadedData.name)||"N/A"),p(5),W("",e.getFileSizeInKB(e.uploadedData==null?null:e.uploadedData.size)," KB"),p(5),O((e.parsedData==null||e.parsedData.rows==null?null:e.parsedData.rows.length)||0),p(5),O((e.parsedData==null||e.parsedData.headers==null?null:e.parsedData.headers.length)||0)}}function U_(i,t){if(i&1&&(a(0,"div",86)(1,"div",3)(2,"span",87),u(3),c(),a(4,"span",88),u(5),c()()()),i&2){let e=_(2);p(3),W("Detected ",e.parsedData.headers.length," columns in your file"),p(2),W("",e.importFields.length," available for mapping")}}function Y_(i,t){i&1&&(a(0,"span",103),u(1,"*"),c())}function q_(i,t){i&1&&(a(0,"span",104),u(1,"(Required)"),c())}function K_(i,t){i&1&&(a(0,"span",105),u(1,"Not Mapped"),c())}function Q_(i,t){if(i&1&&(a(0,"span",106),u(1),c()),i&2){let e=_().$implicit,n=_(2);p(),W(" ",n.getSelectedFieldName(e)," ")}}function X_(i,t){if(i&1){let e=H();a(0,"button",110),D("click",function(){let r=k(e).$implicit,s=_(2).$implicit;return s.map=r.map,E(s.showDropdown=!1)}),a(1,"div",93)(2,"div",112),M(),a(3,"svg",113),y(4,"path",114),c()(),T(),a(5,"div")(6,"div",90),u(7),c(),a(8,"div",63),u(9),c()()()()}if(i&2){let e=t.$implicit,n=_(2).$implicit;z("bg-blue-50",n.map===e.map)("text-blue-700",n.map===e.map),p(7),O(e.field),p(2),W("Column ",e.map,"")}}function J_(i,t){if(i&1){let e=H();a(0,"div",107)(1,"div",108)(2,"div",109),u(3,"Select field to map"),c(),a(4,"button",110),D("click",function(){k(e);let r=_().$implicit;return r.map="-1",E(r.showDropdown=!1)}),u(5," -- Not Mapped -- "),c(),I(6,X_,10,6,"button",111),c()()}if(i&2){let e=_().$implicit,n=_(2);p(4),z("bg-blue-50",e.map==="-1"),p(2),v("ngForOf",n.importFields)("ngForTrackBy",n.trackByImportField)}}function Z_(i,t){i&1&&(a(0,"div",115),M(),a(1,"svg",116),y(2,"path",28),c()())}function e2(i,t){i&1&&(a(0,"div",117),M(),a(1,"svg",118),y(2,"path",23),c()())}function t2(i,t){if(i&1){let e=H();a(0,"div",89)(1,"div",3)(2,"div",17)(3,"span",90),u(4),c(),I(5,Y_,2,0,"span",91)(6,q_,2,0,"span",92),c(),a(7,"div",93)(8,"div",94),D("click",function(r){return k(e),E(r.stopPropagation())}),a(9,"button",95),D("click",function(){let r=k(e).$implicit,s=_(2);return E(s.toggleFieldDropdown(r))}),a(10,"div",3),I(11,K_,2,0,"span",96)(12,Q_,2,1,"span",97),M(),a(13,"svg",98),y(14,"path",99),c()()(),I(15,J_,7,4,"div",100),c(),I(16,Z_,3,0,"div",101)(17,e2,3,0,"div",102),c()()()}if(i&2){let e=t.$implicit,n=_(2);Ce("display",n.detectedFormat==="EY_MASTER"&&(e.name==="type"||e.name==="sm_type")?"none":"block"),p(4),O(e.title),p(),v("ngIf",e.required),p(),v("ngIf",e.required),p(3),z("border-blue-500",e.showDropdown),p(2),v("ngIf",e.map==="-1"),p(),v("ngIf",e.map!=="-1"),p(),z("rotate-180",e.showDropdown),p(2),v("ngIf",e.showDropdown),p(),v("ngIf",e.map!=="-1"),p(),v("ngIf",e.map==="-1")}}function i2(i,t){i&1&&(M(),a(0,"svg",119),y(1,"circle",120)(2,"path",121),c())}function n2(i,t){if(i&1){let e=H();a(0,"div")(1,"div",75)(2,"div",31),M(),a(3,"svg",32),y(4,"path",76),c()(),T(),a(5,"h2",34),u(6,"Map Your Fields"),c(),a(7,"p",35),u(8,"Match your CSV columns to the system fields"),c()(),I(9,U_,6,2,"div",77),a(10,"div",78)(11,"div",79)(12,"h3",80),u(13,"Field Mapping"),c(),a(14,"p",81),u(15,"Select which column from your file maps to each system field"),c()(),a(16,"div",82),I(17,t2,18,14,"div",83),c()(),a(18,"div",64)(19,"button",65),D("click",function(){k(e);let r=_();return E(r.previousStep())}),u(20," Back "),c(),a(21,"button",84),D("click",function(){k(e);let r=_();return E(r.import())}),I(22,i2,3,0,"svg",85),u(23),c()()()}if(i&2){let e=_();p(9),v("ngIf",(e.parsedData==null||e.parsedData.headers==null?null:e.parsedData.headers.length)>0),p(8),v("ngForOf",e.assetFields)("ngForTrackBy",e.trackByField),p(4),v("disabled",e.importLoading),p(),v("ngIf",e.importLoading),p(),W(" ",e.importLoading?"Importing...":"Import Assets"," ")}}function r2(i,t){if(i&1&&(a(0,"div",138)(1,"div",139),u(2),c(),a(3,"div",128),u(4),c()()),i&2){let e=t.$implicit;p(2),O(e.name),p(2),W("ID: ",e.asset_id,"")}}function s2(i,t){if(i&1&&(a(0,"div",133)(1,"div",134)(2,"h3",135),M(),a(3,"svg",44),y(4,"path",28),c(),u(5),c(),T(),a(6,"div",136),I(7,r2,5,2,"div",137),c()()()),i&2){let e=_(3);p(5),W(" Successfully Imported (",e.importResults.imported.length,") "),p(2),v("ngForOf",e.importResults.imported)}}function o2(i,t){if(i&1&&(a(0,"div",144)(1,"div",145)(2,"div",146),u(3),c(),a(4,"span",147),u(5),c()(),a(6,"div",148),u(7),c()()),i&2){let e=t.$implicit;p(3),O(e.name),p(2),W("Row ",e.index,""),p(2),W(" ",e.error," ")}}function a2(i,t){if(i&1&&(a(0,"div",133)(1,"div",140)(2,"h3",141),M(),a(3,"svg",44),y(4,"path",19),c(),u(5),c(),T(),a(6,"div",142),I(7,o2,8,3,"div",143),c()()()),i&2){let e=_(3);p(5),W(" Failed Imports (",e.importResults.failed.length,") "),p(2),v("ngForOf",e.importResults.failed)}}function l2(i,t){if(i&1&&(a(0,"div",2)(1,"div",124)(2,"div",125)(3,"div",62),u(4),c(),a(5,"div",63),u(6,"Total Processed"),c()(),a(7,"div",126)(8,"div",127),u(9),c(),a(10,"div",128),u(11,"Successfully Imported"),c()(),a(12,"div",129)(13,"div",130),u(14),c(),a(15,"div",131),u(16,"Failed"),c()()(),I(17,s2,8,2,"div",132)(18,a2,8,2,"div",132),c()),i&2){let e=_(2);p(4),O(e.importResults.total_processed),p(5),O(e.importResults.imported_count),p(5),O(e.importResults.failed_count),p(3),v("ngIf",e.importResults.imported&&e.importResults.imported.length>0),p(),v("ngIf",e.importResults.failed&&e.importResults.failed.length>0)}}function c2(i,t){if(i&1){let e=H();a(0,"div",30)(1,"div",2)(2,"div",55),M(),a(3,"svg",56),y(4,"path",57),c()(),T(),a(5,"h2",34),u(6,"Import Results"),c(),a(7,"p",35),u(8,"Import process completed. Review the results below."),c()(),I(9,l2,19,5,"div",122),a(10,"div",64)(11,"button",65),D("click",function(){k(e);let r=_();return E(r.reset())}),u(12," Import More Assets "),c(),a(13,"button",123),D("click",function(){k(e);let r=_();return E(r.closeModal())}),u(14," View Assets "),c()()()}if(i&2){let e=_();p(9),v("ngIf",e.importResults)}}var qi=class i{constructor(t,e){this.assetService=t;this.router=e}importComplete=new Ze;currentStep=1;totalSteps=4;uploadedData=null;parsedData=null;uploaded=!1;importFields=[];initMapFields=!1;importLoading=!1;isImportComplete=!1;importedCount=0;importResults=null;showResults=!1;errorMessage="";showError=!1;detectedFormat="UNKNOWN";formatName="";assetFields=[{name:"name",title:"Asset Name",map:"-1",required:!0,showDropdown:!1},{name:"description",title:"Description",map:"-1",required:!1,showDropdown:!1},{name:"category",title:"Category",map:"-1",required:!1,showDropdown:!1},{name:"type",title:"Asset Type",map:"-1",required:!1,showDropdown:!1},{name:"serial_number",title:"Serial Number",map:"-1",required:!1,showDropdown:!1},{name:"model",title:"Model",map:"-1",required:!1,showDropdown:!1},{name:"manufacturer",title:"Manufacturer",map:"-1",required:!1,showDropdown:!1},{name:"purchase_date",title:"Purchase Date",map:"-1",required:!1,showDropdown:!1},{name:"purchase_price",title:"Purchase Price",map:"-1",required:!1,showDropdown:!1},{name:"depreciation",title:"Depreciation",map:"-1",required:!1,showDropdown:!1},{name:"location",title:"Location",map:"-1",required:!1,showDropdown:!1},{name:"department",title:"Department",map:"-1",required:!1,showDropdown:!1},{name:"warranty",title:"Warranty",map:"-1",required:!1,showDropdown:!1},{name:"insurance",title:"Insurance",map:"-1",required:!1,showDropdown:!1},{name:"health_score",title:"Health Score",map:"-1",required:!1,showDropdown:!1},{name:"status",title:"Status",map:"-1",required:!1,showDropdown:!1},{name:"sm_type",title:"S/M Type",map:"-1",required:!1,showDropdown:!1},{name:"building",title:"Building",map:"-1",required:!1,showDropdown:!1},{name:"floor",title:"Floor",map:"-1",required:!1,showDropdown:!1},{name:"brand",title:"Brand/Make",map:"-1",required:!1,showDropdown:!1},{name:"capacity",title:"Capacity/Rating",map:"-1",required:!1,showDropdown:!1},{name:"depreciation_life",title:"Depreciation Life (Years)",map:"-1",required:!1,showDropdown:!1}];formatPatterns={STANDARD:["Asset Name","Description","Category","Type","Serial Number","Model","Manufacturer","Purchase Date","Purchase Price","Depreciation","Location","Department","Warranty","Insurance","Health Score","Status"],EY_MASTER:["Asset ID Number","S/M Type","Building","Location","Floor","Asset Description","Brand/Make","Model No","Capacity/Rating"]};detectFormat(t){let e=this.formatPatterns.STANDARD.filter(r=>t.some(s=>this.normalize(s)===this.normalize(r))).length,n=this.formatPatterns.EY_MASTER.filter(r=>t.some(s=>this.normalize(s)===this.normalize(r))).length;return e>=10?(this.formatName="Standard Asset List","STANDARD"):n>=7?(this.formatName="EY Master Asset List (Starting from Row 2)","EY_MASTER"):(this.formatName="Unknown Format","UNKNOWN")}autoMapFields(t){this.assetFields.forEach(e=>{let n=-1;if(this.detectedFormat==="EY_MASTER")switch(e.name){case"name":n=t.findIndex(r=>this.normalize(r).includes("assetdescription")||this.normalize(r).includes("description"));break;case"description":n=t.findIndex(r=>this.normalize(r).includes("assetdescription")||this.normalize(r).includes("description"));break;case"manufacturer":n=t.findIndex(r=>this.normalize(r).includes("brandmake")||this.normalize(r).includes("brand")||this.normalize(r).includes("make"));break;case"model":n=t.findIndex(r=>this.normalize(r).includes("modelno")||this.normalize(r).includes("model"));break;case"capacity":n=t.findIndex(r=>this.normalize(r).includes("capacityrating")||this.normalize(r).includes("capacity")||this.normalize(r).includes("rating"));break;case"sm_type":n=t.findIndex(r=>this.normalize(r).includes("smtype")||this.normalize(r).includes("type"));break;case"category":n=t.findIndex(r=>this.normalize(r).includes("smtype")||this.normalize(r).includes("type"));break;case"building":n=t.findIndex(r=>this.normalize(r).includes("building"));break;case"floor":n=t.findIndex(r=>this.normalize(r).includes("floor"));break;case"location":n=t.findIndex(r=>this.normalize(r).includes("location"));break;default:n=t.findIndex(r=>this.normalize(r)===this.normalize(e.title))}else n=t.findIndex(r=>this.normalize(r)===this.normalize(e.title));e.map=n>=0?n.toString():"-1"})}parseFile(t){let e=t.target.files[0];if(this.uploadedData=e,this.clearError(),!e){this.errorMessage="No file selected",this.showError=!0;return}let n=e.name.split(".").pop()?.toLowerCase();if(!n||!["csv"].includes(n)){this.errorMessage="Please upload a valid CSV file. Excel files (.xls, .xlsx) are not supported in this version.",this.showError=!0;return}let r=new FileReader;r.readAsText(e),r.onload=()=>{try{let s=r.result;if(s.length>1e3&&s.includes("\0")){this.errorMessage="Invalid file format. Please ensure you are uploading a valid CSV file.",this.showError=!0;return}let o=s.split(/\r?\n/).filter(g=>g.trim()!=="");if(o.length<2){this.errorMessage="File must contain at least a header row and one data row.",this.showError=!0;return}let l,d,m;if(o.length>=2){let S=this.parseCSVLine(o[0]).join(" ").toLowerCase();S.includes("ey_master")||S.includes("asset list")?(l=o[1],d=this.parseCSVLine(l),m=2,this.detectedFormat="EY_MASTER"):(l=o[0],d=this.parseCSVLine(l),m=1,this.detectedFormat=this.detectFormat(d))}else l=o[0],d=this.parseCSVLine(l),m=1,this.detectedFormat=this.detectFormat(d);if(d.length===0){this.errorMessage="No valid headers found in the CSV file.",this.showError=!0;return}this.autoMapFields(d);let h=this.detectedFormat==="EY_MASTER"?3:2;if(o.length<h){this.errorMessage=this.detectedFormat==="EY_MASTER"?"EY Master format requires at least a title row, header row, and one data row.":"File must contain at least a header row and one data row.",this.showError=!0;return}let x=o.slice(m).map(g=>this.parseCSVLine(g)).filter(g=>g.length>0&&g.some(S=>S.trim()!==""));this.parsedData={headers:d,rows:x},this.uploaded=!0,this.nextStep()}catch(s){console.error("Error parsing file:",s),this.errorMessage="Error parsing the file. Please ensure it is a valid CSV file.",this.showError=!0}},r.onerror=()=>{this.errorMessage="Error reading the file. Please try again.",this.showError=!0}}parseCSVLine(t){let e=[],n="",r=!1;for(let s=0;s<t.length;s++){let o=t[s];o==='"'?r&&t[s+1]==='"'?(n+='"',s++):r=!r:o===","&&!r?(e.push(n.trim()),n=""):n+=o}return e.push(n.trim()),e}normalize(t){return t.toLowerCase().replace(/[^a-z0-9]/gi,"").trim()}getFileSizeInKB(t=0){return Math.round(t/1024)}nextStep(){this.currentStep<this.totalSteps&&(this.clearError(),this.currentStep++)}previousStep(){this.currentStep>1&&(this.clearError(),this.currentStep--)}back(){this.clearError(),this.uploaded=!1,this.parsedData=null,this.uploadedData=null,this.currentStep=1}makeMapped(){this.clearError(),this.importFields=[];let t=this.parsedData.headers;if(this.initMapFields=!0,this.assetFields.forEach(e=>{e.map="-1",e.showDropdown=!1}),this.assetFields.forEach((e,n)=>{let r=-1;if(this.detectedFormat==="EY_MASTER")switch(e.name){case"name":r=t.findIndex(s=>this.normalize(s).includes("assetdescription")||this.normalize(s).includes("description"));break;case"description":r=t.findIndex(s=>this.normalize(s).includes("assetdescription")||this.normalize(s).includes("description"));break;case"manufacturer":r=t.findIndex(s=>this.normalize(s).includes("brandmake")||this.normalize(s).includes("brand")||this.normalize(s).includes("make"));break;case"model":r=t.findIndex(s=>this.normalize(s).includes("modelno")||this.normalize(s).includes("model"));break;case"capacity":r=t.findIndex(s=>this.normalize(s).includes("capacityrating")||this.normalize(s).includes("capacity")||this.normalize(s).includes("rating"));break;case"sm_type":r=t.findIndex(s=>this.normalize(s).includes("smtype")||this.normalize(s).includes("type"));break;case"category":r=t.findIndex(s=>this.normalize(s).includes("smtype")||this.normalize(s).includes("type"));break;case"building":r=t.findIndex(s=>this.normalize(s).includes("building"));break;case"floor":r=t.findIndex(s=>this.normalize(s).includes("floor"));break;case"location":r=t.findIndex(s=>this.normalize(s).includes("location"));break;default:r=t.findIndex(s=>this.normalize(e.title)===this.normalize(s))}else r=t.findIndex(s=>this.normalize(e.title)===this.normalize(s));r>=0&&(this.assetFields[n].map=r.toString())}),t.forEach((e,n)=>{let r=e.trim();r&&r.length>0&&this.importFields.push({field:r,map:n.toString()})}),this.importFields.length===0){this.errorMessage="No valid fields found in the uploaded file. Please check your CSV format.",this.showError=!0;return}this.nextStep()}formatErrorMessage(t){if(t.error&&t.error.data&&t.error.data.errors){let e=t.error.data.errors;return`Validation errors:
${Object.keys(e).map(r=>`${r}: ${e[r].join(", ")}`).join(`
`)}`}else return t.error&&t.error.message?t.error.message:t.error&&t.error.error?t.error.error:t.message?t.message:"Import failed. Please check your data and try again."}import(){this.clearError(),this.importLoading=!0;let t=[],n=this.assetFields.filter(s=>s.required).filter(s=>s.map==="-1");if(n.length>0){this.importLoading=!1,this.errorMessage=`Please map the following required fields: ${n.map(s=>s.title).join(", ")}`,this.showError=!0;return}let r=["Active","Inactive","Maintenance","Retired","active","inactive","maintenance","retired"];if(this.parsedData.rows.forEach((s,o)=>{if(!s||s.length===0||s.every(h=>!h||h.trim()===""))return;let l={},d=!0,m="";if(this.assetFields.forEach(h=>{if(h.map!=="-1"&&s[parseInt(h.map)]!==void 0){let f=s[parseInt(h.map)].trim();if(h.required&&(!f||f==="")&&(d=!1),h.name==="status"&&f&&(r.includes(f)||(m=`Invalid status value "${f}" in row ${o+1}. Valid values are: ${r.join(", ")}`)),this.detectedFormat==="EY_MASTER")switch(h.name){case"description":l.name=f;break;case"brand":l.manufacturer=f;break;case"capacity":l.capacity=f;break;case"category":l.category=f;break;case"building":case"floor":case"location":l[h.name]=f;break;default:l[h.name]=f}else l[h.name]=f}}),m){this.importLoading=!1,this.errorMessage=m,this.showError=!0;return}d&&l.name&&t.push(l)}),t.length===0){this.importLoading=!1,this.errorMessage="No valid assets found to import. Please check your data and field mappings.",this.showError=!0;return}console.log("Importing assets:",t),Do(300).subscribe({complete:()=>{this.assetService.bulkImportAssets({assets:t}).subscribe({next:s=>{console.log("Import response:",s),s.success?(this.importResults=s.data,this.importedCount=s.data.imported_count||0,this.isImportComplete=!0,this.showResults=!0,this.nextStep()):(this.errorMessage=s.message||"Import failed",this.showError=!0),this.importLoading=!1},error:s=>{console.error("Import error:",s),this.errorMessage=this.formatErrorMessage(s),this.showError=!0,this.importLoading=!1}})}})}clearError(){this.errorMessage="",this.showError=!1}reset(){this.currentStep=1,this.uploaded=!1,this.initMapFields=!1,this.importLoading=!1,this.isImportComplete=!1,this.importedCount=0,this.parsedData=null,this.uploadedData=null,this.importFields=[],this.assetFields.forEach(t=>{t.map="-1",t.showDropdown=!1}),this.importResults=null,this.showResults=!1,this.clearError()}closeModal(){this.importComplete.emit(),this.reset(),this.router.navigate(["/assets/list"])}trackByField(t,e){return e.name}trackByImportField(t,e){return e.map}toggleFieldDropdown(t){this.assetFields.forEach(e=>{e!==t&&(e.showDropdown=!1)}),t.showDropdown=!t.showDropdown}getSelectedFieldName(t){if(t.map==="-1")return"Not Mapped";let e=this.importFields.find(n=>n.map===t.map);return e?e.field:"Unknown Field"}closeAllDropdowns(){this.assetFields.forEach(t=>{t.showDropdown=!1})}static \u0275fac=function(e){return new(e||i)(he(dt),he(wt))};static \u0275cmp=Re({type:i,selectors:[["app-smart-import"]],outputs:{importComplete:"importComplete"},decls:22,vars:7,consts:[["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6",3,"click"],[1,"mb-8"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],["routerLink","/assets/list",1,"bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","px-4","py-2","rounded-lg","transition-colors","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["class","mb-6 bg-red-50 border border-red-200 rounded-xl p-4",4,"ngIf"],[1,"max-w-4xl","mx-auto"],[1,"flex","items-center","justify-center","space-x-4"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-8"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"mb-6","bg-red-50","border","border-red-200","rounded-xl","p-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","font-medium"],[1,"text-red-500","hover:text-red-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","flex-col","items-center"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-sm","font-semibold","transition-all","duration-300"],[1,"mt-2","text-xs","font-medium"],["class","w-16 h-0.5 mx-4 transition-all duration-300",3,"class",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"w-16","h-0.5","mx-4","transition-all","duration-300"],[1,"text-center"],[1,"w-20","h-20","bg-blue-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"border-2","border-dashed","border-blue-300","rounded-xl","p-8","mb-6","hover:border-blue-400","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-blue-400","mx-auto","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],["type","file","accept",".csv,.CSV,.xlsx,.xls,.ods",1,"hidden",3,"change"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-6","mb-6"],[1,"text-lg","font-semibold","text-blue-900","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm"],[1,"font-medium","text-blue-900","mb-2"],[1,"text-blue-800","mb-3"],[1,"space-y-1","text-blue-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","text-blue-600"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-center"],["href","/assets/templates/asset-import-template.csv","download","standard-asset-import-template.csv",1,"inline-flex","items-center","text-blue-600","hover:text-blue-700","font-medium","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["href","/assets/templates/ey-master-asset-template.csv","download","ey-master-asset-template.csv",1,"inline-flex","items-center","text-blue-600","hover:text-blue-700","font-medium","transition-colors"],[1,"w-20","h-20","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-semibold","text-blue-600"],["class","bg-green-50 border border-green-200 rounded-xl p-6 mb-6",4,"ngIf"],[1,"bg-gray-50","border","border-gray-200","rounded-xl","p-6","mb-8"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","justify-center","space-x-4"],[1,"bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"bg-green-50","border","border-green-200","rounded-xl","p-6","mb-6"],[1,"flex","items-center","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600","mr-3"],[1,"text-lg","font-semibold","text-green-900"],[1,"text-green-800"],[1,"text-sm","text-green-700","mt-2"],[1,"mb-8","text-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["class","bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",4,"ngIf"],[1,"bg-white","border","border-gray-200","rounded-xl","overflow-hidden","mb-8"],[1,"bg-gray-50","px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4",3,"display",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors","flex","items-center",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-4 w-4 text-white","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-4","mb-6"],[1,"text-sm","font-medium","text-blue-900"],[1,"text-xs","text-blue-600","bg-blue-100","px-2","py-1","rounded-full"],[1,"px-6","py-4"],[1,"font-medium","text-gray-900"],["class","ml-2 text-red-500 text-sm font-medium",4,"ngIf"],["class","ml-1 text-xs text-gray-500",4,"ngIf"],[1,"flex","items-center","space-x-3"],[1,"relative","min-w-[200px]",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["class","w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",4,"ngIf"],["class","w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",4,"ngIf"],[1,"ml-2","text-red-500","text-sm","font-medium"],[1,"ml-1","text-xs","text-gray-500"],[1,"text-gray-400"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-8","h-8","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"w-6","h-6","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],[1,"w-6","h-6","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["class","mb-8",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"bg-gray-50","border","border-gray-200","rounded-xl","p-6","text-center"],[1,"bg-green-50","border","border-green-200","rounded-xl","p-6","text-center"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-sm","text-green-600"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-6","text-center"],[1,"text-2xl","font-bold","text-red-600"],[1,"text-sm","text-red-600"],["class","mb-6",4,"ngIf"],[1,"mb-6"],[1,"bg-green-50","border","border-green-200","rounded-xl","p-6"],[1,"text-lg","font-semibold","text-green-900","mb-4","flex","items-center"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],["class","bg-white border border-green-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"bg-white","border","border-green-200","rounded-lg","p-3"],[1,"font-medium","text-green-900"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-6"],[1,"text-lg","font-semibold","text-red-900","mb-4","flex","items-center"],[1,"space-y-3"],["class","bg-white border border-red-200 rounded-lg p-4",4,"ngFor","ngForOf"],[1,"bg-white","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-red-900"],[1,"text-xs","bg-red-100","text-red-600","px-2","py-1","rounded-full"],[1,"text-sm","text-red-700","bg-red-50","border-l-4","border-red-400","pl-3","py-2"]],template:function(e,n){e&1&&(a(0,"div",1),D("click",function(){return n.closeAllDropdowns()}),a(1,"div",2)(2,"div",3)(3,"div")(4,"h1",4),u(5,"Smart Asset Import"),c(),a(6,"p",5),u(7,"Import multiple assets efficiently with our guided wizard"),c()(),a(8,"button",6),M(),a(9,"svg",7),y(10,"path",8),c(),u(11," Back to Assets "),c()()(),I(12,H_,10,1,"div",9),T(),a(13,"div",10)(14,"div",2)(15,"div",11),I(16,z_,8,8,"div",12),c()(),a(17,"div",13),I(18,W_,50,0,"div",14)(19,$_,41,6,"div",14)(20,n2,24,6,"div",15)(21,c2,15,1,"div",14),c()()()),e&2&&(p(12),v("ngIf",n.showError),p(4),v("ngForOf",Si(6,R_)),p(2),v("ngIf",n.currentStep===1),p(),v("ngIf",n.currentStep===2),p(),v("ngIf",n.currentStep===3),p(),v("ngIf",n.currentStep===4))},dependencies:[ze,lt,He,$e],encapsulation:2})};var d2=[{path:"list",component:Ai},{path:"create",component:sr},{path:"import",component:qi},{path:"preview/:id",component:Ui},{path:":id/edit",component:Yi}],$r=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Dn({type:i});static \u0275inj=An({imports:[Pt.forChild(d2),Pt]})};var uc=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Dn({type:i});static \u0275inj=An({imports:[ze,$r,Ai,Ui,Yi,Ii,qi,Wo]})};export{uc as AssetsModule};
