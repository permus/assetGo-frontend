import{a as w}from"./chunk-KUZRVUCX.js";import"./chunk-47ABMRM7.js";import{d as y,f as _}from"./chunk-GBVAJLSS.js";import{x as b}from"./chunk-SXJTW2OO.js";import{Cb as c,Gb as t,Hb as n,Ib as h,Pb as p,Qb as v,Xa as a,ab as s,bc as r,cc as o,ec as S,jb as f,ka as u,la as m,ob as x}from"./chunk-XGV57TRJ.js";import{a as g}from"./chunk-EQDQRRRY.js";function k(d,i){d&1&&(t(0,"div",15),r(1,"Loading..."),n())}function E(d,i){if(d&1&&(t(0,"div",16),r(1),n()),d&2){let e=v();a(),o(e.error)}}function M(d,i){if(d&1&&(t(0,"div",17)(1,"div",18)(2,"div")(3,"div",19),r(4,"Maintenance Schedule"),n(),t(5,"h1",20),r(6),n()(),t(7,"span",21),r(8),n()(),t(9,"div",22)(10,"div")(11,"div",23),r(12,"Start"),n(),t(13,"div",7),r(14),n()(),t(15,"div")(16,"div",23),r(17,"Due"),n(),t(18,"div",7),r(19),n()(),t(20,"div")(21,"div",23),r(22,"Priority"),n(),t(23,"div",7),r(24),n()(),t(25,"div")(26,"div",23),r(27,"Assets"),n(),t(28,"div",7),r(29),n()()()()),d&2){let e=v();a(6),S("#",e.schedule==null?null:e.schedule.id," \u2022 ",(e.schedule==null?null:e.schedule.plan_name)||"Plan "+(e.schedule==null?null:e.schedule.maintenance_plan_id),""),a(2),o(e.getStatusName(e.schedule==null?null:e.schedule.status)||"Scheduled"),a(6),o(e.formatDate(e.schedule==null?null:e.schedule.start_date)),a(5),o(e.formatDate(e.schedule==null?null:e.schedule.due_date)),a(5),o((e.schedule==null||e.schedule.priority==null?null:e.schedule.priority.name)||"-"),a(5),o(e.getAssetNames()||"-")}}var C=class d{constructor(i,e,l){this.route=i;this.router=e;this.api=l}loading=!1;error=null;schedule=null;ngOnInit(){let i=Number(this.route.snapshot.paramMap.get("id"));if(!i){this.error="Invalid schedule id";return}this.fetch(i)}fetch(i){this.loading=!0,this.error=null,this.api.getSchedule(i).subscribe({next:e=>{let l=e?.data?.schedule||e?.data||e;l&&l.id?this.schedule=g({},l):this.error="Schedule not found",this.loading=!1},error:e=>{console.error("Error loading schedule:",e),this.loading=!1,this.error="Failed to load schedule"}})}formatDate(i){if(!i)return"-";let e=new Date(i);return isNaN(e.getTime())?"-":e.toLocaleString()}getStatusName(i){if(!i)return"Scheduled";switch(i){case"in_progress":return"In Progress";case"overdue":return"Overdue";case"completed":return"Completed";case"scheduled":return"Scheduled";default:return i.charAt(0).toUpperCase()+i.slice(1).replace("_"," ")}}getAssetNames(){return this.schedule?this.schedule.assets&&Array.isArray(this.schedule.assets)&&this.schedule.assets.length>0?this.schedule.assets.map(i=>i.name).join(", "):this.schedule.asset_ids&&Array.isArray(this.schedule.asset_ids)?this.schedule.asset_ids.join(", "):"-":"-"}goBack(){this.router.navigate(["/maintenance/scheduled"])}static \u0275fac=function(e){return new(e||d)(s(y),s(_),s(w))};static \u0275cmp=f({type:d,selectors:[["app-schedule-preview-page"]],decls:23,vars:3,consts:[[1,""],[1,"bg-white","border-b","border-gray-200","px-6","py-4","print-hide"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors","p-2","-ml-2","rounded-lg","hover:bg-gray-50",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],["aria-label","Breadcrumb",1,"flex"],[1,"flex","items-center","space-x-2"],["href","javascript:void(0)",1,"text-gray-500","hover:text-gray-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mx-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-gray-900","font-medium"],[1,"min-h-screen","bg-gray-50","p-6"],[1,"text-center","py-20"],[1,"text-center","text-red-600","py-20"],[1,"max-w-3xl","mx-auto","bg-white","border","border-gray-200","rounded-2xl","shadow-sm","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-semibold"],[1,"bg-gray-100","text-gray-700","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"text-sm","text-gray-600"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),p("click",function(){return l.goBack()}),u(),t(5,"svg",5),h(6,"path",6),n(),m(),t(7,"span",7),r(8,"Back"),n()(),t(9,"nav",8)(10,"ol",9)(11,"li")(12,"a",10),p("click",function(){return l.goBack()}),r(13,"Maintenance Schedule"),n()(),t(14,"li"),u(),t(15,"svg",11),h(16,"path",12),n()(),m(),t(17,"li",13),r(18,"Schedule Details"),n()()()()()(),t(19,"div",14),x(20,k,2,0,"div",15)(21,E,2,1,"div",16)(22,M,30,7,"div",17),n()()),e&2&&(a(20),c(l.loading?20:-1),a(),c(l.error?21:-1),a(),c(!l.loading&&!l.error&&l.schedule?22:-1))},dependencies:[b],styles:[".btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151;border:1px solid #d1d5db;padding:.5rem 1rem;border-radius:.5rem}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#f9fafb}"]})};export{C as SchedulePreviewPageComponent};
