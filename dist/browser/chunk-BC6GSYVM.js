import"./chunk-GGQ7LRWG.js";import{a as $e}from"./chunk-NH73C22A.js";import{a as Q}from"./chunk-MJQIMB35.js";import{c as fe,d as F,f as D,g as R}from"./chunk-C5P3YSZX.js";import{A as Re,B as He,C as Be,c as X,d as H,e as Z,f as Te,i as Le,j as De,o as Pe,r as je,s as Oe,t as Ve,u as Ne,x as Fe}from"./chunk-BV4EONZX.js";import{a as K}from"./chunk-47ABMRM7.js";import{a as Ue,b as Ee,c as E,d as ke,e as Me,g as N}from"./chunk-SSTOZ5OJ.js";import"./chunk-J7FUFURU.js";import{E as ge,F as J,j as Ae,k as Y,l as U,q as Ie,x as S}from"./chunk-CDW6MD7D.js";import{G as he,Gb as t,Hb as i,Ib as g,J as be,Mb as I,Pb as p,Qb as m,S as ye,U as z,Ua as j,Wa as Ce,X as P,Xa as a,Y as G,aa as T,ab as b,bc as o,cc as c,dc as h,ec as L,f as $,fc as W,g as _e,gc as ce,hc as pe,ia as x,ic as ue,ja as _,jb as y,ka as v,kb as q,la as w,ob as u,qc as Se,rc as we,sa as me,wb as l,yb as A,zb as C}from"./chunk-ZHYBNXXX.js";import{a as le,b as de}from"./chunk-EQDQRRRY.js";var M=class n{constructor(r){this.http=r;this.loadAdminFromStorage()}apiUrl=K.apiUrl;currentAdminSubject=new _e(null);currentAdmin$=this.currentAdminSubject.asObservable();loadAdminFromStorage(){let r=localStorage.getItem("admin");if(r)try{let e=JSON.parse(r);this.currentAdminSubject.next(e)}catch{localStorage.removeItem("admin"),localStorage.removeItem("admin_token")}}getAuthHeaders(){return{headers:{Authorization:`Bearer ${this.getToken()}`,"Content-Type":"application/json"}}}login(r){return this.http.post(`${this.apiUrl}/admin/login`,r,{headers:{"Content-Type":"application/json"}}).pipe(z(e=>{e.success&&e.data?.token&&this.setSession(e.data.token,e.data.admin)}))}logout(){return this.http.post(`${this.apiUrl}/admin/logout`,{},this.getAuthHeaders()).pipe(z(()=>{this.clearSession()}))}getProfile(){return this.http.get(`${this.apiUrl}/admin/profile`,this.getAuthHeaders()).pipe(z(r=>{r.success&&r.data&&(this.currentAdminSubject.next(r.data),localStorage.setItem("admin",JSON.stringify(r.data)))}))}setSession(r,e){localStorage.setItem("admin_token",r),localStorage.setItem("admin",JSON.stringify(e)),this.currentAdminSubject.next(e)}clearSession(){localStorage.removeItem("admin_token"),localStorage.removeItem("admin"),this.currentAdminSubject.next(null)}getToken(){return localStorage.getItem("admin_token")}isAuthenticated(){return!!this.getToken()}getCurrentAdmin(){return this.currentAdminSubject.value}static \u0275fac=function(e){return new(e||n)(T(J))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ye(n,r){if(n&1&&(t(0,"div",23)(1,"p",24),o(2),i()()),n&2){let e=m();a(2),c(e.errorMessage)}}function Je(n,r){n&1&&(v(),t(0,"svg",25),g(1,"path",26)(2,"path",27),i())}function Ke(n,r){n&1&&(v(),t(0,"svg",25),g(1,"path",28),i())}function Qe(n,r){n&1&&(t(0,"span"),o(1,"Sign In"),i())}function Xe(n,r){n&1&&(t(0,"span",29),v(),t(1,"svg",30),g(2,"circle",31)(3,"path",32),i(),o(4," Signing In... "),i())}var ee=class n{constructor(r,e,s){this.fb=r;this.router=e;this.adminAuthService=s;this.loginForm=this.fb.group({email:["",[H.required,H.email]],password:["",[H.required,H.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";showPassword=!1;onSubmit(){this.loginForm.valid&&!this.isLoading&&(this.isLoading=!0,this.errorMessage="",this.adminAuthService.login(this.loginForm.value).subscribe({next:r=>{r.success?this.router.navigate(["/admin/dashboard"]):this.errorMessage=r.message||"Login failed",this.isLoading=!1},error:r=>{let e=r.error;this.errorMessage=e?.message||"An error occurred during login",this.isLoading=!1}}))}togglePasswordVisibility(){this.showPassword=!this.showPassword}ngOnDestroy(){}static \u0275fac=function(e){return new(e||n)(b(Re),b(E),b(M))};static \u0275cmp=y({type:n,selectors:[["app-admin-login"]],decls:32,vars:13,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center","mb-6"],[1,"flex","items-center","space-x-3"],["alt","AssetGo Logo",1,"h-20","w-auto",3,"src"],[1,"text-gray-600"],[1,"bg-white","rounded-2xl","shadow-lg","p-8","max-w-md","mx-auto"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","type","email","formControlName","email","placeholder","Enter your email","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["id","password","formControlName","password","placeholder","Enter your password","required","",1,"w-full","px-4","py-3","pr-10","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","placeholder-gray-400",3,"type"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","cursor-pointer","text-gray-400","hover:text-gray-600",3,"click"],["class","h-5 w-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,s){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),g(5,"img",5),i()(),t(6,"p",6),o(7,"Admin Panel"),i()(),t(8,"div",7)(9,"div",8)(10,"h2",9),o(11,"Admin Login"),i(),t(12,"p",6),o(13,"Sign in to access the admin panel"),i()(),u(14,Ye,3,1,"div",10),t(15,"form",11),p("ngSubmit",function(){return s.onSubmit()}),t(16,"div",12)(17,"div")(18,"label",13),o(19,"Email"),i(),g(20,"input",14),i(),t(21,"div")(22,"label",15),o(23,"Password"),i(),t(24,"div",16),g(25,"input",17),t(26,"button",18),p("click",function(){return s.togglePasswordVisibility()}),u(27,Je,3,0,"svg",19)(28,Ke,2,0,"svg",19),i()()(),t(29,"button",20),u(30,Qe,2,0,"span",21)(31,Xe,5,0,"span",22),i()()()()()()),e&2){let d,f;a(5),l("src","images/logo.png",j),a(9),l("ngIf",s.errorMessage),a(),l("formGroup",s.loginForm),a(5),A("border-red-300",((d=s.loginForm.get("email"))==null?null:d.invalid)&&((d=s.loginForm.get("email"))==null?null:d.touched)),a(5),A("border-red-300",((f=s.loginForm.get("password"))==null?null:f.invalid)&&((f=s.loginForm.get("password"))==null?null:f.touched)),l("type",s.showPassword?"text":"password"),a(2),l("ngIf",!s.showPassword),a(),l("ngIf",s.showPassword),a(),l("disabled",s.loginForm.invalid||s.isLoading),a(),l("ngIf",!s.isLoading),a(),l("ngIf",s.isLoading)}},dependencies:[U,Be,De,X,Z,Te,Fe,Pe,je],encapsulation:2})};function Ze(n,r){if(n&1){let e=I();t(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",42)(4,"span"),o(5),i()(),t(6,"div")(7,"div",43),o(8),i(),t(9,"div",44),o(10),i()()()(),t(11,"div",45)(12,"button",46),p("click",function(){x(e);let d=m();return _(d.signOut())}),t(13,"div",47),v(),t(14,"svg",48),g(15,"path",49),i()(),w(),t(16,"div")(17,"div",33),o(18,"Sign Out"),i(),t(19,"div",50),o(20,"Sign out of admin panel"),i()()()()()}if(n&2){let e=m();a(5),c(e.getAdminInitials()),a(3),c(e.currentAdmin==null?null:e.currentAdmin.name),a(2),c(e.currentAdmin==null?null:e.currentAdmin.email)}}var ie=class n{constructor(r,e){this.router=r;this.adminAuthService=e}currentAdmin=null;showUserDropdown=!1;sidebarOpen=!0;destroy$=new $;ngOnInit(){this.adminAuthService.currentAdmin$.pipe(ye(this.destroy$)).subscribe(r=>{this.currentAdmin=r})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getAdminInitials(){return this.currentAdmin?this.currentAdmin.name.charAt(0).toUpperCase():"A"}toggleUserDropdown(){this.showUserDropdown=!this.showUserDropdown}signOut(){this.adminAuthService.logout().subscribe({next:()=>{this.router.navigate(["/admin/login"])},error:()=>{this.router.navigate(["/admin/login"])}})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}onDocumentClick(r){r.target.closest(".relative")||(this.showUserDropdown=!1)}static \u0275fac=function(e){return new(e||n)(b(E),b(M))};static \u0275cmp=y({type:n,selectors:[["app-admin-layout"]],hostBindings:function(e,s){e&1&&p("click",function(f){return s.onDocumentClick(f)},!1,Ce)},decls:54,vars:37,consts:[[1,"min-h-screen","bg-gray-50","flex"],[1,"bg-white","border-r","border-gray-200","h-screen","fixed","left-0","top-0","z-40","transition-all","duration-300","ease-in-out","overflow-y-auto"],[3,"ngClass"],["alt","AssetGo Logo",3,"src"],[1,"text-2xl","text-gray-900",3,"ngClass"],[1,"font-bold"],[1,"p-4"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wider","mb-4",3,"ngClass"],["routerLink","/admin/dashboard","routerLinkActive","bg-blue-50 text-blue-700",1,"flex","items-center","space-x-3","px-3","py-2","rounded-lg","text-gray-700","hover:bg-gray-100","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chart-column","mr-3","h-5","w-5","text-blue-600"],["d","M3 3v16a2 2 0 0 0 2 2h16"],["d","M18 17V9"],["d","M13 17V5"],["d","M8 17v-3"],["routerLink","/admin/users","routerLinkActive","bg-blue-50 text-blue-700",1,"flex","items-center","space-x-3","px-3","py-2","rounded-lg","text-gray-700","hover:bg-gray-100","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-users","mr-3","h-5","w-5","text-teal-600"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],[1,"flex","flex-col","flex-1","transition-all","duration-300","ease-in-out"],[1,"bg-white","border-b","border-gray-200","sticky","top-0","z-50"],[1,"flex","items-center","justify-between","px-6","py-4"],[1,"flex","items-center","space-x-4"],[1,"p-2","rounded-lg","hover:bg-gray-100","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"size-5","text-gray-600"],["width","18","height","18","x","3","y","3","rx","2"],["d","M9 3v18"],[1,"flex","items-center","space-x-4","ml-auto"],[1,"relative"],[1,"flex","items-center","space-x-3","p-2","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],[1,"w-8","h-8","bg-blue-600","rounded-full","flex","items-center","justify-center","text-white","font-medium"],[1,"text-sm"],[1,"font-medium","text-gray-900"],[1,"text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",4,"ngIf"],[1,"flex-1","overflow-y-auto"],[1,"absolute","right-0","mt-2","w-80","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"px-4","py-3","border-b","border-gray-100"],[1,"flex","items-center","space-x-3"],[1,"w-12","h-12","bg-blue-600","rounded-full","flex","items-center","justify-center","text-white","font-medium","text-lg"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-4","py-2","border-t","border-gray-100"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","rounded-lg","hover:bg-red-50","text-left","transition-colors","cursor-pointer",3,"click"],[1,"w-8","h-8","bg-red-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"text-xs","text-gray-500"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"aside",1)(2,"div",2),g(3,"img",3),t(4,"h3",4)(5,"span",5),o(6,"Admin"),i()()(),t(7,"nav",6)(8,"div",7),o(9,"Navigation "),i(),t(10,"ul",2)(11,"li")(12,"a",8),v(),t(13,"svg",9),g(14,"path",10)(15,"path",11)(16,"path",12)(17,"path",13),i(),w(),t(18,"span",2),o(19,"Dashboard"),i()()(),t(20,"li")(21,"a",14),v(),t(22,"svg",15),g(23,"path",16)(24,"circle",17)(25,"path",18)(26,"path",19),i(),w(),t(27,"span",2),o(28,"Users"),i()()()()()(),t(29,"div",20)(30,"header",21)(31,"div",22)(32,"div",23)(33,"button",24),p("click",function(){return s.toggleSidebar()}),v(),t(34,"svg",25),g(35,"rect",26)(36,"path",27),i()()(),w(),t(37,"div",28)(38,"div",29)(39,"button",30),p("click",function(){return s.toggleUserDropdown()}),t(40,"div",31)(41,"span"),o(42),i()(),t(43,"div",32)(44,"div",33),o(45),i(),t(46,"div",34),o(47),i()(),v(),t(48,"svg",35),g(49,"path",36),i()(),u(50,Ze,21,3,"div",37),i()()()(),w(),t(51,"main",38),g(52,"router-outlet"),i()(),g(53,"app-toast"),i()),e&2&&(a(),A("w-64",s.sidebarOpen)("w-16",!s.sidebarOpen),a(),l("ngClass",s.sidebarOpen?"flex items-center space-x-2 p-6":"px-2 py-6"),a(),A("h-10",s.sidebarOpen)("w-auto",s.sidebarOpen)("size-10",!s.sidebarOpen)("object-contain",!s.sidebarOpen),l("src","images/logo-short.png",j),a(),l("ngClass",s.sidebarOpen?"":"hidden"),a(3),A("p-4",s.sidebarOpen)("p-2",!s.sidebarOpen),a(),l("ngClass",s.sidebarOpen?"":"hidden"),a(2),l("ngClass",s.sidebarOpen?"space-y-3":"space-y-2"),a(2),A("!block",!s.sidebarOpen),a(6),l("ngClass",s.sidebarOpen?"":"hidden"),a(3),A("!block",!s.sidebarOpen),a(6),l("ngClass",s.sidebarOpen?"":"hidden"),a(2),A("ml-64",s.sidebarOpen)("ml-16",!s.sidebarOpen),a(13),c(s.getAdminInitials()),a(3),c(s.currentAdmin==null?null:s.currentAdmin.name),a(2),c(s.currentAdmin==null?null:s.currentAdmin.email),a(),A("rotate-180",s.showUserDropdown),a(2),l("ngIf",s.showUserDropdown))},dependencies:[S,Ae,U,Ee,N,ke,Me,$e],encapsulation:2})};var ne=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-admin-dashboard"]],decls:3,vars:0,consts:[[1,"p-6","grid","place-items-center","h-[calc(100vh-200px)]"],[1,"text-2xl","font-bold","text-gray-900","mb-6"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"h1",1),o(2,"Admin Dashboard"),i()())},dependencies:[S],encapsulation:2})};function et(n,r){n&1&&(v(),t(0,"svg",21),g(1,"path",22),i())}function tt(n,r){n&1&&(v(),t(0,"svg",23),g(1,"path",24),i())}function it(n,r){n&1&&(t(0,"span"),o(1," This user will be suspended and will not be able to access the system. You can activate them again later. "),i())}function nt(n,r){n&1&&(t(0,"span"),o(1," This user will be activated and will regain access to the system. "),i())}function rt(n,r){if(n&1&&(t(0,"span"),o(1),Se(2,"titlecase"),i()),n&2){let e=m(2);a(),c(we(2,1,e.actionText))}}function at(n,r){n&1&&(t(0,"span",25),v(),t(1,"svg",26),g(2,"circle",27)(3,"path",28),i(),w(),t(4,"span"),o(5,"Processing..."),i()())}function ot(n,r){if(n&1){let e=I();t(0,"div",1),p("click",function(){x(e);let d=m();return _(d.onCancel())}),t(1,"div",2),p("click",function(d){return x(e),_(d.stopPropagation())}),t(2,"div",3)(3,"div",4)(4,"div"),u(5,et,2,0,"svg",5)(6,tt,2,0,"svg",6),i(),t(7,"h2",7),o(8),i()(),t(9,"button",8),p("click",function(){x(e);let d=m();return _(d.onCancel())}),v(),t(10,"svg",9),g(11,"path",10),i()()(),w(),t(12,"div",11)(13,"div",12)(14,"h3",13),o(15),t(16,"span",14),o(17),i(),o(18,"? "),i(),t(19,"p",15),u(20,it,2,0,"span",16)(21,nt,2,0,"span",16),i()(),t(22,"div",17)(23,"button",18),p("click",function(){x(e);let d=m();return _(d.onCancel())}),o(24," Cancel "),i(),t(25,"button",19),p("click",function(){x(e);let d=m();return _(d.onConfirm())}),u(26,rt,3,3,"span",16)(27,at,6,0,"span",20),i()()()()()}if(n&2){let e=m();l("@backdropAnimation",void 0),a(),l("@modalAnimation",void 0),a(3),C(e.isActive?"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center":"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"),a(),l("ngIf",e.isActive),a(),l("ngIf",!e.isActive),a(2),c(e.actionTitle),a(),l("disabled",e.isLoading),a(6),h(" Are you sure you want to ",e.actionText," "),a(2),c(e.userName),a(3),l("ngIf",e.isActive),a(),l("ngIf",!e.isActive),a(2),l("disabled",e.isLoading),a(2),C(e.isActive?"px-6 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed":"px-6 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed"),l("disabled",e.isLoading),a(),l("ngIf",!e.isLoading),a(),l("ngIf",e.isLoading)}}var O=class n{isOpen=!1;isActive=!0;userName="";isLoading=!1;closeModal=new me;confirmAction=new me;get actionText(){return this.isActive?"suspend":"activate"}get actionTitle(){return this.isActive?"Suspend User":"Activate User"}onConfirm(){this.isLoading||this.confirmAction.emit(!this.isActive)}onCancel(){this.isLoading||this.closeModal.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-suspend-activate-confirmation-modal"]],inputs:{isOpen:"isOpen",isActive:"isActive",userName:"userName",isLoading:"isLoading"},outputs:{closeModal:"closeModal",confirmAction:"confirmAction"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",3,"click",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full",3,"click"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],["class","w-5 h-5 text-orange-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-5 h-5 text-green-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"font-bold"],[1,"text-gray-600"],[4,"ngIf"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[3,"click","disabled"],["class","flex items-center space-x-2",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,s){e&1&&u(0,ot,28,18,"div",0),e&2&&l("ngIf",s.isOpen)},dependencies:[S,U,Ie],encapsulation:2,data:{animation:[fe("backdropAnimation",[R(":enter",[D({opacity:0}),F("150ms ease-out",D({opacity:1}))]),R(":leave",[F("150ms ease-in",D({opacity:0}))])]),fe("modalAnimation",[R(":enter",[D({opacity:0,transform:"scale(0.7) translateY(-50px)"}),F("200ms ease-out",D({opacity:1,transform:"scale(1) translateY(0)"}))]),R(":leave",[F("150ms ease-in",D({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var V=class n{constructor(r){this.http=r}apiUrl=K.apiUrl;getAuthHeaders(){let r=localStorage.getItem("admin_token"),e=localStorage.getItem("token");if(!r)throw console.error("AdminUsersService: No admin_token found in localStorage"),console.error("Regular token exists:",!!e),console.error("Please login through /admin/login to get an admin token"),alert("Admin authentication required. Please login through the admin panel at /admin/login"),new Error("Admin token not found. Please login through /admin/login");return console.log("AdminUsersService: Using admin_token (first 20 chars):",r.substring(0,20)+"..."),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r.trim()}`}}}getUsers(r){let e=new ge;return r&&Object.keys(r).forEach(s=>{r[s]!==void 0&&r[s]!==null&&(e=e.set(s,r[s].toString()))}),this.http.get(`${this.apiUrl}/admin/users`,de(le({},this.getAuthHeaders()),{params:e}))}getUser(r){return this.http.get(`${this.apiUrl}/admin/users/${r}`,this.getAuthHeaders())}updateUser(r,e){return this.http.put(`${this.apiUrl}/admin/users/${r}`,e,this.getAuthHeaders())}deleteUser(r){return this.http.delete(`${this.apiUrl}/admin/users/${r}`,this.getAuthHeaders())}getCreatedTeams(r,e){let s=new ge;return e&&Object.keys(e).forEach(d=>{e[d]!==void 0&&e[d]!==null&&(s=s.set(d,e[d].toString()))}),this.http.get(`${this.apiUrl}/admin/users/${r}/teams`,de(le({},this.getAuthHeaders()),{params:s}))}static \u0275fac=function(e){return new(e||n)(T(J))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function lt(n,r){n&1&&(v(),t(0,"svg",15),g(1,"path",16),i())}function dt(n,r){n&1&&(v(),t(0,"svg",15),g(1,"path",17),i())}function mt(n,r){if(n&1&&(t(0,"option",18),o(1),i()),n&2){let e=r.$implicit;l("value",e.value),a(),c(e.label)}}function ct(n,r){n&1&&(t(0,"div",19),o(1," Loading... "),i())}function pt(n,r){if(n&1){let e=I();t(0,"tr")(1,"td",28)(2,"div",29),o(3),i()(),t(4,"td",28)(5,"div",30),o(6),i()(),t(7,"td",28)(8,"span",31),o(9),i()(),t(10,"td",28)(11,"div",30),o(12),i()(),t(13,"td",28)(14,"span"),o(15),i()(),t(16,"td",32)(17,"div",33)(18,"button",34),p("click",function(){let d=x(e).$implicit,f=m(3);return _(f.viewUser(d))}),o(19," View "),i(),t(20,"button",35),p("click",function(){let d=x(e).$implicit,f=m(3);return _(f.toggleUserStatus(d))}),o(21),i()()()()}if(n&2){let e=r.$implicit;a(3),L("",e.first_name," ",e.last_name,""),a(3),c(e.email),a(3),h(" ",e.user_type," "),a(3),c((e.company==null?null:e.company.name)||"N/A"),a(2),C(e.active?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"),a(),h(" ",e.active?"Active":"Inactive"," "),a(5),C(e.active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"),a(),h(" ",e.active?"Suspend":"Activate"," ")}}function ut(n,r){if(n&1&&(t(0,"table",23)(1,"thead",24)(2,"tr")(3,"th",25),o(4,"Name"),i(),t(5,"th",25),o(6,"Email"),i(),t(7,"th",25),o(8,"Type"),i(),t(9,"th",25),o(10,"Company"),i(),t(11,"th",25),o(12,"Status"),i(),t(13,"th",25),o(14,"Actions"),i()()(),t(15,"tbody",26),u(16,pt,22,11,"tr",27),i()()),n&2){let e=m(2);a(16),l("ngForOf",e.users)}}function gt(n,r){n&1&&(t(0,"div",36),o(1," No users found. "),i())}function ft(n,r){if(n&1&&(t(0,"div")(1,"div",20),u(2,ut,17,1,"table",21)(3,gt,2,0,"div",22),i()()),n&2){let e=m();a(2),l("ngIf",e.users.length>0),a(),l("ngIf",e.users.length===0)}}function vt(n,r){if(n&1){let e=I();t(0,"div",40)(1,"div",41)(2,"div",42)(3,"div",43),o(4),i(),t(5,"div")(6,"h3",44),o(7),i(),t(8,"p",45),o(9),i()()()(),t(10,"div",46)(11,"div",47)(12,"span",45),o(13,"Type:"),i(),t(14,"span",48),o(15),i()(),t(16,"div",47)(17,"span",45),o(18,"Company:"),i(),t(19,"span",49),o(20),i()(),t(21,"div",47)(22,"span",45),o(23,"Status:"),i(),t(24,"span"),o(25),i()()(),t(26,"div",50)(27,"button",51),p("click",function(){let d=x(e).$implicit,f=m(3);return _(f.viewUser(d))}),o(28," View "),i(),t(29,"button",52),p("click",function(){let d=x(e).$implicit,f=m(3);return _(f.toggleUserStatus(d))}),o(30),i()()()}if(n&2){let e=r.$implicit;a(4),L(" ",e.first_name.charAt(0),"",e.last_name.charAt(0)," "),a(3),L("",e.first_name," ",e.last_name,""),a(2),c(e.email),a(6),h(" ",e.user_type," "),a(5),c((e.company==null?null:e.company.name)||"N/A"),a(4),C(e.active?"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800":"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"),a(),h(" ",e.active?"Active":"Inactive"," "),a(4),C(e.active?"flex-1 px-3 py-2 text-xs font-medium text-orange-600 hover:text-orange-900 hover:bg-orange-50 rounded-lg cursor-pointer transition-colors":"flex-1 px-3 py-2 text-xs font-medium text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg cursor-pointer transition-colors"),a(),h(" ",e.active?"Suspend":"Activate"," ")}}function xt(n,r){if(n&1&&(t(0,"div",38),u(1,vt,31,13,"div",39),i()),n&2){let e=m(2);a(),l("ngForOf",e.users)}}function _t(n,r){n&1&&(t(0,"div",19),o(1," No users found. "),i())}function ht(n,r){if(n&1&&(t(0,"div"),u(1,xt,2,1,"div",37)(2,_t,2,0,"div",11),i()),n&2){let e=m();a(),l("ngIf",e.users.length>0),a(),l("ngIf",e.users.length===0)}}function bt(n,r){if(n&1){let e=I();t(0,"div",53)(1,"div",5),o(2),i(),t(3,"div",54)(4,"button",55),p("click",function(){x(e);let d=m();return _(d.onPageChange(d.currentPage-1))}),o(5," Previous "),i(),t(6,"button",55),p("click",function(){x(e);let d=m();return _(d.onPageChange(d.currentPage+1))}),o(7," Next "),i()()()}if(n&2){let e=m();a(2),W(" Showing ",(e.currentPage-1)*e.perPage+1," to ",e.Math.min(e.currentPage*e.perPage,e.total)," of ",e.total," users "),a(2),l("disabled",e.currentPage===1),a(2),l("disabled",e.currentPage===e.lastPage)}}var re=class n{constructor(r,e,s){this.adminUsersService=r;this.router=e;this.toastService=s}users=[];loading=!1;searchTerm="";selectedUserType=null;currentPage=1;perPage=15;total=0;lastPage=1;userTypeOptions=[{value:null,label:"All"},{value:"user",label:"User"},{value:"admin",label:"Admin"},{value:"manager",label:"Manager"},{value:"team",label:"Team"}];showConfirmModal=!1;selectedUser=null;confirmModalLoading=!1;viewMode="list";searchSubject=new $;ngOnInit(){this.searchSubject.pipe(he(500),be()).subscribe(r=>{this.searchTerm=r,this.currentPage=1,this.loadUsers()}),this.loadUsers()}ngOnDestroy(){this.searchSubject.complete()}loadUsers(){this.loading=!0,this.adminUsersService.getUsers({page:this.currentPage,per_page:this.perPage,search:this.searchTerm||void 0,user_type:this.selectedUserType||void 0,sort_by:"created_at",sort_dir:"desc"}).subscribe({next:r=>{r.success&&(this.users=r.data.users,this.total=r.data.pagination.total,this.lastPage=r.data.pagination.last_page,this.currentPage=r.data.pagination.current_page),this.loading=!1},error:()=>{this.loading=!1}})}onSearch(){this.currentPage=1,this.loadUsers()}onSearchInputChange(){this.searchSubject.next(this.searchTerm)}onUserTypeFilter(){this.currentPage=1,this.loadUsers()}onPageChange(r){this.currentPage=r,this.loadUsers()}toggleUserStatus(r){this.selectedUser=r,this.showConfirmModal=!0}onConfirmStatusChange(r){if(!this.selectedUser)return;this.confirmModalLoading=!0;let e=r?"activate":"suspend";this.adminUsersService.updateUser(this.selectedUser.id,{active:r}).subscribe({next:()=>{this.selectedUser.active=r,this.showConfirmModal=!1,this.selectedUser=null,this.confirmModalLoading=!1,this.toastService.success(`User ${e}d successfully`)},error:s=>{this.confirmModalLoading=!1,this.toastService.error(`Failed to ${e} user`),console.error(s)}})}onCloseConfirmModal(){this.showConfirmModal=!1,this.selectedUser=null}viewUser(r){this.router.navigate(["/admin/users",r.id])}toggleViewMode(){this.viewMode=this.viewMode==="list"?"grid":"list"}Math=Math;static \u0275fac=function(e){return new(e||n)(b(V),b(E),b(Q))};static \u0275cmp=y({type:n,selectors:[["app-admin-users"]],decls:19,vars:14,consts:[[1,"p-6"],[1,"mb-6","flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900"],[1,"flex","items-center","gap-2","px-4","py-2","border","border-gray-300","rounded-lg","hover:bg-gray-50","cursor-pointer",3,"click"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-sm","text-gray-700"],[1,"mb-4"],[1,"flex","gap-4","items-center"],["type","text","placeholder","Search users...",1,"w-64","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","keyup.enter","ngModel"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","bg-white rounded-lg shadow p-6 text-center text-gray-500",4,"ngIf"],[4,"ngIf"],["class","mt-4 flex items-center justify-between",4,"ngIf"],[3,"closeModal","confirmAction","isOpen","isActive","userName","isLoading"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[3,"value"],[1,"bg-white","rounded-lg","shadow","p-6","text-center","text-gray-500"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],["class","min-w-full divide-y divide-gray-200",4,"ngIf"],["class","p-6 text-center text-gray-500",4,"ngIf"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-blue-100","text-blue-800","capitalize"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"flex","gap-3"],[1,"text-blue-600","hover:text-blue-900","cursor-pointer",3,"click"],[1,"cursor-pointer",3,"click"],[1,"p-6","text-center","text-gray-500"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],["class","bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow","hover:shadow-md","transition-shadow","p-6"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","bg-blue-600","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"space-y-2","mb-4"],[1,"flex","items-center","justify-between"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full","bg-blue-100","text-blue-800","capitalize"],[1,"text-xs","font-medium","text-gray-900"],[1,"flex","gap-2","pt-4","border-t","border-gray-200"],[1,"flex-1","px-3","py-2","text-xs","font-medium","text-blue-600","hover:text-blue-900","hover:bg-blue-50","rounded-lg","cursor-pointer","transition-colors",3,"click"],[3,"click"],[1,"mt-4","flex","items-center","justify-between"],[1,"flex","gap-2"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","disabled:opacity-50","disabled:cursor-not-allowed","hover:bg-gray-50","cursor-pointer",3,"click","disabled"]],template:function(e,s){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Users"),i(),t(4,"button",3),p("click",function(){return s.toggleViewMode()}),u(5,lt,2,0,"svg",4)(6,dt,2,0,"svg",4),t(7,"span",5),o(8),i()()(),t(9,"div",6)(10,"div",7)(11,"input",8),ue("ngModelChange",function(f){return pe(s.searchTerm,f)||(s.searchTerm=f),f}),p("ngModelChange",function(){return s.onSearchInputChange()})("keyup.enter",function(){return s.onSearch()}),i(),t(12,"select",9),ue("ngModelChange",function(f){return pe(s.selectedUserType,f)||(s.selectedUserType=f),f}),p("change",function(){return s.onUserTypeFilter()}),u(13,mt,2,2,"option",10),i()()(),u(14,ct,2,0,"div",11)(15,ft,4,2,"div",12)(16,ht,3,2,"div",12)(17,bt,8,5,"div",13),t(18,"app-suspend-activate-confirmation-modal",14),p("closeModal",function(){return s.onCloseConfirmModal()})("confirmAction",function(f){return s.onConfirmStatusChange(f)}),i()()),e&2){let d;a(5),l("ngIf",s.viewMode==="list"),a(),l("ngIf",s.viewMode==="grid"),a(2),c(s.viewMode==="list"?"Grid View":"List View"),a(3),ce("ngModel",s.searchTerm),a(),ce("ngModel",s.selectedUserType),a(),l("ngForOf",s.userTypeOptions),a(),l("ngIf",s.loading),a(),l("ngIf",!s.loading&&s.viewMode==="list"),a(),l("ngIf",!s.loading&&s.viewMode==="grid"),a(),l("ngIf",!s.loading&&s.total>0),a(),l("isOpen",s.showConfirmModal)("isActive",(d=s.selectedUser==null?null:s.selectedUser.active)!==null&&d!==void 0?d:!0)("userName",s.selectedUser?s.selectedUser.first_name+" "+s.selectedUser.last_name:"")("isLoading",s.confirmModalLoading)}},dependencies:[S,Y,U,He,Ve,Ne,X,Oe,Z,Le,O],encapsulation:2})};function yt(n,r){if(n&1){let e=I();t(0,"button",11),p("click",function(){x(e);let d=m();return _(d.toggleUserStatus())}),o(1),i()}if(n&2){let e=m();C(e.user.active?"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 cursor-pointer":"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer"),a(),h(" ",e.user.active?"Suspend User":"Activate User"," ")}}function Ct(n,r){n&1&&(t(0,"div",12),o(1," Loading user details... "),i())}function St(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Avatar"),i(),g(3,"img",27),i()),n&2){let e=m(2);a(3),l("src",e.user.avatar,j)}}function wt(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Hourly Rate"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(2);a(4),h("$",e.user.hourly_rate,"")}}function At(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Created By"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(2);a(4),h("User ID: ",e.user.created_by,"")}}function It(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Phone"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(3);a(4),c(e.user.company.phone)}}function Ut(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Email"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(3);a(4),c(e.user.company.email)}}function Et(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Address"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(3);a(4),c(e.user.company.address)}}function kt(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Business Type"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(3);a(4),c(e.user.company.business_type)}}function Mt(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Industry"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(3);a(4),c(e.user.company.industry)}}function Tt(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Currency"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(3);a(4),c(e.user.company.currency)}}function Lt(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Subscription Status"),i(),t(3,"p",20)(4,"span",21),o(5),i()()()),n&2){let e=m(3);a(5),h(" ",e.user.company.subscription_status," ")}}function Dt(n,r){if(n&1&&(t(0,"div")(1,"label",18),o(2,"Slug"),i(),t(3,"p",20),o(4),i()()),n&2){let e=m(3);a(4),c(e.user.company.slug)}}function Pt(n,r){if(n&1&&(t(0,"div",14)(1,"div",15)(2,"h2",16),o(3,"Company Information"),i()(),t(4,"div",0)(5,"div",17)(6,"div")(7,"label",18),o(8,"Company Name"),i(),t(9,"p",20),o(10),i()(),u(11,It,5,1,"div",22)(12,Ut,5,1,"div",22)(13,Et,5,1,"div",22)(14,kt,5,1,"div",22)(15,Mt,5,1,"div",22)(16,Tt,5,1,"div",22)(17,Lt,6,1,"div",22)(18,Dt,5,1,"div",22),i()()()),n&2){let e=m(2);a(10),c(e.user.company.name),a(),l("ngIf",e.user.company.phone),a(),l("ngIf",e.user.company.email),a(),l("ngIf",e.user.company.address),a(),l("ngIf",e.user.company.business_type),a(),l("ngIf",e.user.company.industry),a(),l("ngIf",e.user.company.currency),a(),l("ngIf",e.user.company.subscription_status),a(),l("ngIf",e.user.company.slug)}}function jt(n,r){if(n&1&&(t(0,"span",30),o(1),i()),n&2){let e=r.$implicit;a(),h(" ",e.name," ")}}function Ot(n,r){if(n&1&&(t(0,"div",14)(1,"div",15)(2,"h2",16),o(3,"Roles"),i()(),t(4,"div",0)(5,"div",28),u(6,jt,2,1,"span",29),i()()()),n&2){let e=m(2);a(6),l("ngForOf",e.user.roles)}}function Vt(n,r){n&1&&(t(0,"div",31),o(1," Loading teams... "),i())}function Nt(n,r){if(n&1&&(t(0,"tr")(1,"td",38)(2,"div",39),o(3),i()(),t(4,"td",38)(5,"div",40),o(6),i()(),t(7,"td",38)(8,"div",41),o(9),i()(),t(10,"td",38)(11,"span"),o(12),i()(),t(13,"td",38)(14,"div",40),o(15),i()()()),n&2){let e=r.$implicit,s=m(3);a(3),L("",e.first_name," ",e.last_name,""),a(3),c(e.email),a(3),c(s.getRoleName(e)),a(2),C(e.active?"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800":"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"),a(),h(" ",e.active?"Active":"Inactive"," "),a(3),c(s.formatDate(e.created_at))}}function Ft(n,r){if(n&1&&(t(0,"div",32)(1,"table",33)(2,"thead",34)(3,"tr")(4,"th",35),o(5,"Name"),i(),t(6,"th",35),o(7,"Email"),i(),t(8,"th",35),o(9,"Role"),i(),t(10,"th",35),o(11,"Status"),i(),t(12,"th",35),o(13,"Created"),i()()(),t(14,"tbody",36),u(15,Nt,16,8,"tr",37),i()()()),n&2){let e=m(2);a(15),l("ngForOf",e.teams)}}function Rt(n,r){n&1&&(t(0,"div",31),o(1," No teams created by this user. "),i())}function Ht(n,r){if(n&1){let e=I();t(0,"div",42)(1,"div",43),o(2),i(),t(3,"div",44)(4,"button",45),p("click",function(){x(e);let d=m(2);return _(d.onTeamsPageChange(d.teamsCurrentPage-1))}),o(5," Previous "),i(),t(6,"button",45),p("click",function(){x(e);let d=m(2);return _(d.onTeamsPageChange(d.teamsCurrentPage+1))}),o(7," Next "),i()()()}if(n&2){let e=m(2);a(2),W(" Showing ",(e.teamsCurrentPage-1)*e.teamsPerPage+1," to ",e.Math.min(e.teamsCurrentPage*e.teamsPerPage,e.teamsTotal)," of ",e.teamsTotal," teams "),a(2),l("disabled",e.teamsCurrentPage===1),a(2),l("disabled",e.teamsCurrentPage===e.teamsLastPage)}}function Bt(n,r){if(n&1&&(t(0,"div",13)(1,"div",14)(2,"div",15)(3,"h2",16),o(4,"User Information"),i()(),t(5,"div",0)(6,"div",17)(7,"div")(8,"label",18),o(9,"Name"),i(),t(10,"p",19),o(11),i()(),t(12,"div")(13,"label",18),o(14,"Email"),i(),t(15,"p",20),o(16),i()(),t(17,"div")(18,"label",18),o(19,"User Type"),i(),t(20,"p",20)(21,"span",21),o(22),i()()(),t(23,"div")(24,"label",18),o(25,"Status"),i(),t(26,"p",20)(27,"span"),o(28),i()()(),u(29,St,4,1,"div",22)(30,wt,5,1,"div",22),t(31,"div")(32,"label",18),o(33,"Created Date"),i(),t(34,"p",20),o(35),i()(),t(36,"div")(37,"label",18),o(38,"Last Updated"),i(),t(39,"p",20),o(40),i()(),u(41,At,5,1,"div",22),i()()(),u(42,Pt,19,9,"div",23)(43,Ot,7,1,"div",23),t(44,"div",14)(45,"div",15)(46,"h2",16),o(47,"Teams Created by User"),i()(),t(48,"div",0),u(49,Vt,2,0,"div",24)(50,Ft,16,1,"div",25)(51,Rt,2,0,"div",24)(52,Ht,8,5,"div",26),i()()()),n&2){let e=m();a(11),L("",e.user.first_name," ",e.user.last_name,""),a(5),c(e.user.email),a(6),h(" ",e.user.user_type," "),a(5),C(e.user.active?"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800":"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"),a(),h(" ",e.user.active?"Active":"Inactive"," "),a(),l("ngIf",e.user.avatar),a(),l("ngIf",e.user.hourly_rate),a(5),c(e.formatDate(e.user.created_at)),a(5),c(e.formatDate(e.user.updated_at)),a(),l("ngIf",e.user.created_by),a(),l("ngIf",e.user.company),a(),l("ngIf",e.user.roles&&e.user.roles.length>0),a(6),l("ngIf",e.teamsLoading),a(),l("ngIf",!e.teamsLoading&&e.teams.length>0),a(),l("ngIf",!e.teamsLoading&&e.teams.length===0),a(),l("ngIf",!e.teamsLoading&&e.teamsTotal>0)}}var ae=class n{constructor(r,e,s,d){this.route=r;this.router=e;this.adminUsersService=s;this.toastService=d}user=null;loading=!1;userId=null;teams=[];teamsLoading=!1;teamsCurrentPage=1;teamsPerPage=15;teamsTotal=0;teamsLastPage=1;showConfirmModal=!1;confirmModalLoading=!1;ngOnInit(){this.route.params.subscribe(r=>{this.userId=+r.id,this.userId&&(this.loadUserDetails(),this.loadTeams())})}loadUserDetails(){this.userId&&(this.loading=!0,this.adminUsersService.getUser(this.userId).subscribe({next:r=>{r.success&&(this.user=r.data.user),this.loading=!1},error:r=>{this.loading=!1,this.toastService.error("Failed to load user details"),console.error(r)}}))}loadTeams(r=1){this.userId&&(this.teamsLoading=!0,this.teamsCurrentPage=r,this.adminUsersService.getCreatedTeams(this.userId,{page:this.teamsCurrentPage,per_page:this.teamsPerPage,sort_by:"created_at",sort_dir:"desc"}).subscribe({next:e=>{e.success&&(this.teams=e.data.teams,this.teamsTotal=e.data.pagination.total,this.teamsLastPage=e.data.pagination.last_page,this.teamsCurrentPage=e.data.pagination.current_page),this.teamsLoading=!1},error:()=>{this.teamsLoading=!1}}))}onTeamsPageChange(r){this.loadTeams(r)}formatDate(r){return r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}getRoleName(r){return r.roles&&r.roles.length>0?r.roles[0].name:"N/A"}toggleUserStatus(){this.user&&(this.showConfirmModal=!0)}onConfirmStatusChange(r){!this.user||!this.userId||(this.confirmModalLoading=!0,this.adminUsersService.updateUser(this.userId,{active:r}).subscribe({next:()=>{this.user&&(this.user.active=r),this.showConfirmModal=!1,this.confirmModalLoading=!1,this.toastService.success(`User ${r?"activated":"suspended"} successfully`)},error:e=>{this.confirmModalLoading=!1,this.toastService.error(`Failed to ${r?"activate":"suspend"} user`),console.error(e)}}))}onCloseConfirmModal(){this.showConfirmModal=!1}goBack(){this.router.navigate(["/admin/users"])}Math=Math;static \u0275fac=function(e){return new(e||n)(b(Ue),b(E),b(V),b(Q))};static \u0275cmp=y({type:n,selectors:[["app-user-details"]],decls:13,vars:7,consts:[[1,"p-6"],[1,"mb-6","flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"px-4","py-2","text-gray-600","hover:text-gray-800","flex","items-center","gap-2","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","font-bold","text-gray-900"],[3,"class","click",4,"ngIf"],["class","bg-white rounded-lg shadow p-6 text-center text-gray-500",4,"ngIf"],["class","space-y-6",4,"ngIf"],[3,"closeModal","confirmAction","isOpen","isActive","userName","isLoading"],[3,"click"],[1,"bg-white","rounded-lg","shadow","p-6","text-center","text-gray-500"],[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900"],[1,"grid","grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-500","mb-1"],[1,"text-gray-900","font-medium"],[1,"text-gray-900"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[4,"ngIf"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngIf"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],["class","mt-4 flex items-center justify-between",4,"ngIf"],["alt","User Avatar",1,"w-16","h-16","rounded-full","object-cover",3,"src"],[1,"flex","flex-wrap","gap-2"],["class","px-3 py-1 text-sm font-medium rounded-full bg-purple-100 text-purple-800",4,"ngFor","ngForOf"],[1,"px-3","py-1","text-sm","font-medium","rounded-full","bg-purple-100","text-purple-800"],[1,"text-center","py-8","text-gray-500"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-4","py-3","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-900"],[1,"mt-4","flex","items-center","justify-between"],[1,"text-sm","text-gray-700"],[1,"flex","gap-2"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","disabled:opacity-50","disabled:cursor-not-allowed","hover:bg-gray-50","cursor-pointer",3,"click","disabled"]],template:function(e,s){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),p("click",function(){return s.goBack()}),v(),t(4,"svg",4),g(5,"path",5),i(),o(6," Back to Users "),i(),w(),t(7,"h1",6),o(8,"User Details"),i()(),u(9,yt,2,3,"button",7),i(),u(10,Ct,2,0,"div",8)(11,Bt,53,18,"div",9),t(12,"app-suspend-activate-confirmation-modal",10),p("closeModal",function(){return s.onCloseConfirmModal()})("confirmAction",function(f){return s.onConfirmStatusChange(f)}),i()()),e&2){let d;a(9),l("ngIf",s.user),a(),l("ngIf",s.loading),a(),l("ngIf",!s.loading&&s.user),a(),l("isOpen",s.showConfirmModal)("isActive",(d=s.user==null?null:s.user.active)!==null&&d!==void 0?d:!0)("userName",s.user?s.user.first_name+" "+s.user.last_name:"")("isLoading",s.confirmModalLoading)}},dependencies:[S,Y,U,O],encapsulation:2})};var oe=class n{constructor(r,e){this.router=r;this.adminAuthService=e}canActivate(){return this.adminAuthService.isAuthenticated()?!0:(this.router.navigate(["/admin/login"]),!1)}static \u0275fac=function(e){return new(e||n)(T(E),T(M))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var $t=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:ee},{path:"",component:ie,canActivate:[oe],children:[{path:"dashboard",component:ne},{path:"users",component:re},{path:"users/:id",component:ae},{path:"",redirectTo:"dashboard",pathMatch:"full"}]}],se=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=q({type:n});static \u0275inj=G({imports:[N.forChild($t),N]})};var Ge=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=q({type:n});static \u0275inj=G({imports:[S,se]})};export{Ge as AdminModule};
