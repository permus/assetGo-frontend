import{a as l}from"./chunk-6WXWVH7L.js";import{E as i}from"./chunk-OO62REYN.js";import{X as o,ba as c,g as n}from"./chunk-I4CHZ5QN.js";import{a as t,b as a}from"./chunk-EQDQRRRY.js";var p=class s{http=c(i);apiUrl=l.apiUrl;preferencesSubject=new n({email_notifications:!0,push_notifications:!0,maintenance_alerts:!0,work_order_updates:!0,dashboard_layout:"grid",items_per_page:20,auto_refresh:!1,compact_view:!1,show_avatars:!0,dark_mode:!1});preferences$=this.preferencesSubject.asObservable();constructor(){this.loadPreferences()}loadPreferences(){let e=localStorage.getItem("app.preferences");if(e)try{let r=JSON.parse(e);this.preferencesSubject.next(t(t({},this.preferencesSubject.value),r)),this.applyPreferences(r)}catch(r){console.error("Failed to load preferences:",r)}}getPreferences(){return this.preferencesSubject.value}updatePreferences(e){let r=t(t({},this.preferencesSubject.value),e);this.preferencesSubject.next(r),localStorage.setItem("app.preferences",JSON.stringify(r)),this.applyPreferences(r)}applyPreferences(e){e.dark_mode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),e.compact_view?document.documentElement.classList.add("compact-mode"):document.documentElement.classList.remove("compact-mode"),e.rtl?document.documentElement.setAttribute("dir","rtl"):document.documentElement.setAttribute("dir","ltr")}get(e){return this.preferencesSubject.value[e]}set(e,r){let f=a(t({},this.preferencesSubject.value),{[e]:r});this.updatePreferences(f)}syncFromBackend(){return this.http.get(`${this.apiUrl}/settings/preferences`)}saveToBackend(e){return this.http.put(`${this.apiUrl}/settings/preferences`,e)}static \u0275fac=function(r){return new(r||s)};static \u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})};export{p as a};
