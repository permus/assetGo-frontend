import{a as T}from"./chunk-AVICQQGW.js";import{A as N,C as k,c as z,d as x,e as V,f as A,j,o as G,r as D}from"./chunk-E3TUIQ6F.js";import{a as oe}from"./chunk-ANASMPQJ.js";import{c as ne}from"./chunk-6DC6CTDU.js";import"./chunk-GSMNBVZZ.js";import{F as re,l as y,x as S}from"./chunk-SXJTW2OO.js";import{Gb as o,Hb as i,Ib as p,Mb as O,Pb as g,Qb as d,S as w,Ua as U,X,Xa as a,aa as Z,ab as _,ac as ee,bc as s,cc as Y,dc as f,ec as te,f as C,ia as h,ja as b,jb as M,ka as u,la as E,ob as c,sa as I,wb as l,yb as v}from"./chunk-XGV57TRJ.js";import{a as K,b as Q}from"./chunk-EQDQRRRY.js";var P=class r{constructor(t){this.http=t}apiUrl=oe.apiUrl;getProfile(){return this.http.get(`${this.apiUrl}/profile`)}updateProfile(t){return this.http.put(`${this.apiUrl}/profile`,t)}changePassword(t){return this.http.post(`${this.apiUrl}/change-password`,t)}uploadAvatar(t){let e=new FormData;return e.append("avatar",t),this.http.post(`${this.apiUrl}/profile/avatar`,e)}static \u0275fac=function(e){return new(e||r)(Z(re))};static \u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"})};function se(r,t){if(r&1&&(o(0,"div",19),u(),o(1,"svg",20),p(2,"path",21),i(),s(3),i()),r&2){let e=d();a(3),f(" ",e.error," ")}}function le(r,t){if(r&1&&(o(0,"div",22),s(1),i()),r&2){let e=d();a(),f(" ",e.getFieldError("first_name")," ")}}function de(r,t){if(r&1&&(o(0,"div",22),s(1),i()),r&2){let e=d();a(),f(" ",e.getFieldError("last_name")," ")}}function pe(r,t){if(r&1&&(o(0,"div",22),s(1),i()),r&2){let e=d();a(),f(" ",e.getFieldError("email")," ")}}function ce(r,t){r&1&&p(0,"span",23)}var B=class r{constructor(t,e){this.fb=t;this.profileService=e;this.profileForm=this.fb.group({first_name:["",[x.required,x.maxLength(255)]],last_name:["",[x.required,x.maxLength(255)]],email:["",[x.required,x.email,x.maxLength(255)]],user_type:[""]})}userProfile=null;profileUpdated=new I;destroy$=new C;profileForm;loading=!1;error="";ngOnInit(){this.userProfile&&this.populateForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}populateForm(){this.userProfile&&this.profileForm.patchValue({first_name:this.userProfile.first_name||"",last_name:this.userProfile.last_name||"",email:this.userProfile.email||"",user_type:this.userProfile.user_type||""})}onSubmit(){if(this.profileForm.invalid){this.markFormGroupTouched();return}this.loading=!0,this.error="";let t={first_name:this.profileForm.get("first_name")?.value,last_name:this.profileForm.get("last_name")?.value,email:this.profileForm.get("email")?.value};this.profileService.updateProfile(t).pipe(w(this.destroy$)).subscribe({next:e=>{e.success&&this.profileUpdated.emit(e.data.user),this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to update profile",this.loading=!1}})}markFormGroupTouched(){Object.keys(this.profileForm.controls).forEach(t=>{this.profileForm.get(t)?.markAsTouched()})}getFieldError(t){let e=this.profileForm.get(t);return!e||!e.errors||!e.touched?"":e.errors.required?`${t} is required`:e.errors.email?"Please enter a valid email address":e.errors.maxlength?`${t} is too long`:"Invalid input"}hasFieldError(t){let e=this.profileForm.get(t);return!!(e&&e.errors&&e.touched)}static \u0275fac=function(e){return new(e||r)(_(N),_(P))};static \u0275cmp=M({type:r,selectors:[["app-profile-form"]],inputs:{userProfile:"userProfile"},outputs:{profileUpdated:"profileUpdated"},decls:35,vars:16,consts:[[1,"profile-form-card"],[1,"profile-form",3,"ngSubmit","formGroup"],["class","form-error",4,"ngIf"],[1,"form-grid"],[1,"form-group"],["for","first_name",1,"form-label"],[1,"required"],["id","first_name","type","text","formControlName","first_name","placeholder","Enter your first name",1,"form-input"],["class","field-error",4,"ngIf"],["for","last_name",1,"form-label"],["id","last_name","type","text","formControlName","last_name","placeholder","Enter your last name",1,"form-input"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","placeholder","Enter your email address",1,"form-input"],["for","user_type",1,"form-label"],["id","user_type","type","text","formControlName","user_type","readonly","",1,"form-input"],[1,"form-help"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"form-error"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"error-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"field-error"],[1,"loading-spinner"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"form",1),g("ngSubmit",function(){return n.onSubmit()}),c(2,se,4,1,"div",2),o(3,"div",3)(4,"div",4)(5,"label",5),s(6," First Name "),o(7,"span",6),s(8,"*"),i()(),p(9,"input",7),c(10,le,2,1,"div",8),i(),o(11,"div",4)(12,"label",9),s(13," Last Name "),o(14,"span",6),s(15,"*"),i()(),p(16,"input",10),c(17,de,2,1,"div",8),i(),o(18,"div",4)(19,"label",11),s(20," Email Address "),o(21,"span",6),s(22,"*"),i()(),p(23,"input",12),c(24,pe,2,1,"div",8),i(),o(25,"div",4)(26,"label",13),s(27,"User Type"),i(),p(28,"input",14),o(29,"div",15),s(30," Your user type is managed by your administrator "),i()()(),o(31,"div",16)(32,"button",17),c(33,ce,1,0,"span",18),s(34),i()()()()),e&2&&(a(),l("formGroup",n.profileForm),a(),l("ngIf",n.error),a(7),v("error",n.hasFieldError("first_name")),a(),l("ngIf",n.hasFieldError("first_name")),a(6),v("error",n.hasFieldError("last_name")),a(),l("ngIf",n.hasFieldError("last_name")),a(6),v("error",n.hasFieldError("email")),a(),l("ngIf",n.hasFieldError("email")),a(4),v("error",n.hasFieldError("user_type")),a(4),l("disabled",n.loading||n.profileForm.invalid),a(),l("ngIf",n.loading),a(),f(" ",n.loading?"Updating...":"Update Profile"," "))},dependencies:[S,y,k,j,z,V,A,G,D],styles:[".profile-form-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden}.profile-form[_ngcontent-%COMP%]{padding:24px}.form-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:#fef2f2;border:1px solid #fecaca;border-radius:8px;margin-bottom:20px;color:#dc2626;font-size:14px}.form-error[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px}@media (min-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#374151;margin:0}.form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc2626;margin-left:2px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;transition:all .2s ease-in-out;background-color:#fff}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-input[_ngcontent-%COMP%]:read-only{background-color:#f9fafb;color:#6b7280;cursor:not-allowed}.form-input.error[_ngcontent-%COMP%]{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.field-error[_ngcontent-%COMP%]{font-size:12px;color:#dc2626;margin-top:4px}.form-help[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-top:4px}.form-actions[_ngcontent-%COMP%]{margin-top:24px;padding-top:20px;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border-radius:8px;font-weight:500;font-size:14px;transition:all .2s ease-in-out;cursor:pointer;border:none;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn.btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f64d}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function me(r,t){if(r&1&&(o(0,"div",17),u(),o(1,"svg",18),p(2,"path",19),i(),s(3),i()),r&2){let e=d();a(3),f(" ",e.error," ")}}function fe(r,t){if(r&1&&(o(0,"div",20),s(1),i()),r&2){let e=d();a(),f(" ",e.getFieldError("current_password")," ")}}function ue(r,t){if(r&1&&(o(0,"div",20),s(1),i()),r&2){let e=d();a(),f(" ",e.getFieldError("password")," ")}}function ge(r,t){if(r&1&&(o(0,"div",20),s(1),i()),r&2){let e=d();a(),f(" ",e.getFieldError("password_confirmation")," ")}}function ve(r,t){r&1&&p(0,"span",21)}var R=class r{constructor(t,e){this.fb=t;this.profileService=e;this.passwordForm=this.fb.group({current_password:["",[x.required]],password:["",[x.required,x.minLength(8)]],password_confirmation:["",[x.required]]},{validators:this.passwordMatchValidator})}passwordChanged=new I;destroy$=new C;passwordForm;loading=!1;error="";ngOnInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}passwordMatchValidator(t){let e=t.get("password"),n=t.get("password_confirmation");return e&&n&&e.value!==n.value?n.setErrors({passwordMismatch:!0}):n&&n.errors&&n.errors.passwordMismatch&&(delete n.errors.passwordMismatch,Object.keys(n.errors).length===0&&n.setErrors(null)),null}onSubmit(){if(this.passwordForm.invalid){this.markFormGroupTouched();return}this.loading=!0,this.error="";let t={current_password:this.passwordForm.get("current_password")?.value,password:this.passwordForm.get("password")?.value,password_confirmation:this.passwordForm.get("password_confirmation")?.value};this.profileService.changePassword(t).pipe(w(this.destroy$)).subscribe({next:e=>{e.success&&(this.passwordForm.reset(),this.passwordChanged.emit()),this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to change password",this.loading=!1}})}markFormGroupTouched(){Object.keys(this.passwordForm.controls).forEach(t=>{this.passwordForm.get(t)?.markAsTouched()})}getFieldError(t){let e=this.passwordForm.get(t);return!e||!e.errors||!e.touched?"":e.errors.required?`${t} is required`:e.errors.minlength?"Password must be at least 8 characters":e.errors.passwordMismatch?"Passwords do not match":"Invalid input"}hasFieldError(t){let e=this.passwordForm.get(t);return!!(e&&e.errors&&e.touched)}static \u0275fac=function(e){return new(e||r)(_(N),_(P))};static \u0275cmp=M({type:r,selectors:[["app-password-change-form"]],outputs:{passwordChanged:"passwordChanged"},decls:31,vars:14,consts:[[1,"password-form-card"],[1,"password-form",3,"ngSubmit","formGroup"],["class","form-error",4,"ngIf"],[1,"form-grid"],[1,"form-group"],["for","current_password",1,"form-label"],[1,"required"],["id","current_password","type","password","formControlName","current_password","placeholder","Enter your current password",1,"form-input"],["class","field-error",4,"ngIf"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password","placeholder","Enter your new password",1,"form-input"],[1,"form-help"],["for","password_confirmation",1,"form-label"],["id","password_confirmation","type","password","formControlName","password_confirmation","placeholder","Confirm your new password",1,"form-input"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"form-error"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"error-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"field-error"],[1,"loading-spinner"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"form",1),g("ngSubmit",function(){return n.onSubmit()}),c(2,me,4,1,"div",2),o(3,"div",3)(4,"div",4)(5,"label",5),s(6," Current Password "),o(7,"span",6),s(8,"*"),i()(),p(9,"input",7),c(10,fe,2,1,"div",8),i(),o(11,"div",4)(12,"label",9),s(13," New Password "),o(14,"span",6),s(15,"*"),i()(),p(16,"input",10),c(17,ue,2,1,"div",8),o(18,"div",11),s(19," Password must be at least 8 characters long "),i()(),o(20,"div",4)(21,"label",12),s(22," Confirm New Password "),o(23,"span",6),s(24,"*"),i()(),p(25,"input",13),c(26,ge,2,1,"div",8),i()(),o(27,"div",14)(28,"button",15),c(29,ve,1,0,"span",16),s(30),i()()()()),e&2&&(a(),l("formGroup",n.passwordForm),a(),l("ngIf",n.error),a(7),v("error",n.hasFieldError("current_password")),a(),l("ngIf",n.hasFieldError("current_password")),a(6),v("error",n.hasFieldError("password")),a(),l("ngIf",n.hasFieldError("password")),a(8),v("error",n.hasFieldError("password_confirmation")),a(),l("ngIf",n.hasFieldError("password_confirmation")),a(2),l("disabled",n.loading||n.passwordForm.invalid),a(),l("ngIf",n.loading),a(),f(" ",n.loading?"Changing...":"Change Password"," "))},dependencies:[S,y,k,j,z,V,A,G,D],styles:[".password-form-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden}.password-form[_ngcontent-%COMP%]{padding:24px}.form-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:#fef2f2;border:1px solid #fecaca;border-radius:8px;margin-bottom:20px;color:#dc2626;font-size:14px}.form-error[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px}@media (min-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]:last-child{grid-column:1/-1}.form-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#374151;margin:0}.form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc2626;margin-left:2px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;transition:all .2s ease-in-out;background-color:#fff}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.field-error[_ngcontent-%COMP%]{font-size:12px;color:#dc2626;margin-top:4px}.form-help[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-top:4px}.form-actions[_ngcontent-%COMP%]{margin-top:24px;padding-top:20px;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border-radius:8px;font-weight:500;font-size:14px;transition:all .2s ease-in-out;cursor:pointer;border:none;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn.btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f64d}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function xe(r,t){if(r&1&&p(0,"img",19),r&2){let e=d();l("src",e.previewUrl||(e.userProfile==null?null:e.userProfile.avatar_url),U)}}function he(r,t){if(r&1&&(o(0,"div",20),s(1),i()),r&2){let e=d();a(),f(" ",e.getUserInitials()," ")}}function be(r,t){if(r&1){let e=O();o(0,"button",21),g("click",function(){h(e);let m=d();return b(m.removeAvatar())}),u(),o(1,"svg",13),p(2,"path",22),i(),s(3," Remove "),i()}if(r&2){let e=d();l("disabled",e.loading)}}function Pe(r,t){r&1&&(u(),o(0,"svg",27),p(1,"circle",28)(2,"path",29),i())}function Ce(r,t){r&1&&(u(),o(0,"svg",13),p(1,"path",30),i())}function we(r,t){if(r&1){let e=O();o(0,"div",23)(1,"button",24),g("click",function(){h(e);let m=d();return b(m.uploadAvatar())}),c(2,Pe,3,0,"svg",25)(3,Ce,2,0,"svg",26),s(4),i()()}if(r&2){let e=d();a(),l("disabled",!e.canUpload),a(),l("ngIf",e.loading),a(),l("ngIf",!e.loading),a(),f(" ",e.loading?"Uploading...":"Save Picture"," ")}}function Me(r,t){if(r&1&&(o(0,"div",31),u(),o(1,"svg",32),p(2,"path",33),i(),s(3),i()),r&2){let e=d();a(3),f(" ",e.error," ")}}var L=class r{constructor(t,e){this.profileService=t;this.authService=e}userProfile=null;avatarUpdated=new I;destroy$=new C;loading=!1;error="";previewUrl=null;selectedFile=null;ngOnInit(){this.userProfile?.avatar_url&&(this.previewUrl=this.userProfile.avatar_url)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onFileSelected(t){let e=t.target;if(e.files&&e.files[0]){let n=e.files[0];if(!n.type.startsWith("image/")){this.error="Please select an image file";return}if(n.size>2*1024*1024){this.error="File size must be less than 2MB";return}this.selectedFile=n,this.error="";let m=new FileReader;m.onload=F=>{this.previewUrl=F.target?.result},m.readAsDataURL(n)}}uploadAvatar(){if(!this.selectedFile){this.error="Please select a file first";return}this.loading=!0,this.error="",this.profileService.uploadAvatar(this.selectedFile).pipe(w(this.destroy$)).subscribe({next:t=>{if(t.success){if(this.userProfile){let e=Q(K({},this.userProfile),{avatar_url:t.data.avatar_url,avatar:t.data.avatar_path});this.authService.updateCurrentUser(e),this.avatarUpdated.emit(t.data.avatar_url)}this.selectedFile=null}this.loading=!1},error:t=>{this.error=t.error?.message||"Failed to upload avatar",this.loading=!1}})}removeAvatar(){this.previewUrl=null,this.selectedFile=null,this.error=""}getUserInitials(){if(!this.userProfile)return"U";let t=this.userProfile.first_name?.charAt(0)||"",e=this.userProfile.last_name?.charAt(0)||"";return(t+e).toUpperCase()||"U"}get hasFile(){return!!this.selectedFile}get canUpload(){return this.hasFile&&!this.loading}static \u0275fac=function(e){return new(e||r)(_(P),_(T))};static \u0275cmp=M({type:r,selectors:[["app-avatar-upload"]],inputs:{userProfile:"userProfile"},outputs:{avatarUpdated:"avatarUpdated"},decls:26,vars:9,consts:[["fileInput",""],[1,"avatar-upload"],[1,"avatar-section"],[1,"section-title"],[1,"section-description"],[1,"avatar-container"],[1,"avatar-display"],[1,"avatar-circle"],["alt","Profile Picture","class","avatar-image",3,"src",4,"ngIf"],["class","avatar-initials",4,"ngIf"],[1,"avatar-controls"],["type","file","id","avatar-input","accept","image/*",1,"file-input",3,"change"],["type","button",1,"upload-button",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"button-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["type","button","class","remove-button",3,"disabled","click",4,"ngIf"],["class","upload-actions",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"help-text"],["alt","Profile Picture",1,"avatar-image",3,"src"],[1,"avatar-initials"],["type","button",1,"remove-button",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"upload-actions"],["type","button",1,"save-button",3,"click","disabled"],["class","button-icon animate-spin","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","button-icon","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","viewBox","0 0 24 24",1,"button-icon","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"error-message"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"error-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,n){if(e&1){let m=O();o(0,"div",1)(1,"div",2)(2,"h3",3),s(3,"Profile Picture"),i(),o(4,"p",4),s(5,"Upload a profile picture to personalize your account"),i(),o(6,"div",5)(7,"div",6)(8,"div",7),c(9,xe,1,1,"img",8)(10,he,2,1,"div",9),i(),o(11,"div",10)(12,"input",11,0),g("change",function(H){return h(m),b(n.onFileSelected(H))}),i(),o(14,"button",12),g("click",function(){h(m);let H=ee(13);return b(H.click())}),u(),o(15,"svg",13),p(16,"path",14),i(),s(17),i(),c(18,be,4,1,"button",15),i()(),c(19,we,5,4,"div",16),i(),c(20,Me,4,1,"div",17),E(),o(21,"div",18)(22,"p"),s(23,"Supported formats: JPEG, PNG, JPG, GIF, SVG"),i(),o(24,"p"),s(25,"Maximum file size: 2MB"),i()()()()}e&2&&(a(8),v("has-avatar",n.previewUrl||(n.userProfile==null?null:n.userProfile.avatar_url)),a(),l("ngIf",n.previewUrl||(n.userProfile==null?null:n.userProfile.avatar_url)),a(),l("ngIf",!n.previewUrl&&!(n.userProfile!=null&&n.userProfile.avatar_url)),a(4),l("disabled",n.loading),a(3),f(" ",n.loading?"Uploading...":n.hasFile?"Change Picture":"Upload Picture"," "),a(),l("ngIf",n.hasFile),a(),l("ngIf",n.hasFile),a(),l("ngIf",n.error))},dependencies:[S,y],styles:[".avatar-upload[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;border:1px solid #e5e7eb}.avatar-upload[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#111827;margin:0 0 8px}.avatar-upload[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0 0 24px}.avatar-upload[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:24px}.avatar-upload[_ngcontent-%COMP%]   .avatar-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.avatar-upload[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background:#f3f4f6;display:flex;align-items:center;justify-content:center;border:3px solid #e5e7eb;overflow:hidden;transition:all .3s ease}.avatar-upload[_ngcontent-%COMP%]   .avatar-circle.has-avatar[_ngcontent-%COMP%]{border-color:#3b82f6}.avatar-upload[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.avatar-upload[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{font-size:36px;font-weight:600;color:#6b7280}.avatar-upload[_ngcontent-%COMP%]   .avatar-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;align-items:center}.avatar-upload[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.avatar-upload[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%], .avatar-upload[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;border-radius:8px;font-size:14px;font-weight:500;border:1px solid;cursor:pointer;transition:all .2s ease}.avatar-upload[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]:disabled, .avatar-upload[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.avatar-upload[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border-color:#3b82f6}.avatar-upload[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;border-color:#2563eb}.avatar-upload[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{background:#fff;color:#dc2626;border-color:#dc2626}.avatar-upload[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#fef2f2}.avatar-upload[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{width:16px;height:16px}.avatar-upload[_ngcontent-%COMP%]   .button-icon.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.avatar-upload[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.avatar-upload[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;background:#10b981;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.avatar-upload[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.avatar-upload[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}.avatar-upload[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:14px;margin-top:16px}.avatar-upload[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0}.avatar-upload[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e5e7eb}.avatar-upload[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin:4px 0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 640px){.avatar-upload[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]{padding:16px}.avatar-upload[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:100px;height:100px}.avatar-upload[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{font-size:28px}.avatar-upload[_ngcontent-%COMP%]   .avatar-controls[_ngcontent-%COMP%]{flex-direction:column;width:100%}.avatar-upload[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%], .avatar-upload[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};function Oe(r,t){if(r&1&&p(0,"img",18),r&2){let e=d();l("src",e.userProfile.avatar_url,U)("alt",e.userProfile.first_name+" "+e.userProfile.last_name)}}function ye(r,t){if(r&1&&(o(0,"span"),s(1),i()),r&2){let e=d();a(),Y(e.getUserInitials())}}function Se(r,t){if(r&1&&(o(0,"div",19),u(),o(1,"svg",20),p(2,"path",21),i(),s(3),i()),r&2){let e=d();a(3),f(" ",e.successMessage," ")}}function Fe(r,t){if(r&1&&(o(0,"div",22),u(),o(1,"svg",20),p(2,"path",23),i(),s(3),i()),r&2){let e=d();a(3),f(" ",e.error," ")}}function Ie(r,t){r&1&&(o(0,"div",24),p(1,"div",25),o(2,"p"),s(3,"Loading profile information..."),i()())}function ke(r,t){if(r&1){let e=O();o(0,"div",34)(1,"div",35)(2,"h2",36),s(3,"Personal Information"),i(),o(4,"p",37),s(5,"Update your personal details and contact information"),i()(),o(6,"app-avatar-upload",38),g("avatarUpdated",function(m){h(e);let F=d(2);return b(F.onAvatarUpdated(m))}),i(),o(7,"app-profile-form",39),g("profileUpdated",function(m){h(e);let F=d(2);return b(F.onProfileUpdated(m))}),i()()}if(r&2){let e=d(2);a(6),l("userProfile",e.userProfile),a(),l("userProfile",e.userProfile)}}function Ee(r,t){if(r&1){let e=O();o(0,"div",34)(1,"div",35)(2,"h2",36),s(3,"Change Password"),i(),o(4,"p",37),s(5,"Update your password to keep your account secure"),i()(),o(6,"app-password-change-form",40),g("passwordChanged",function(){h(e);let m=d(2);return b(m.onPasswordChanged())}),i()()}}function Ue(r,t){if(r&1){let e=O();o(0,"div",26)(1,"div",27)(2,"button",28),g("click",function(){h(e);let m=d();return b(m.setActiveTab("profile"))}),u(),o(3,"svg",29),p(4,"path",30),i(),s(5," Personal Information "),i(),E(),o(6,"button",28),g("click",function(){h(e);let m=d();return b(m.setActiveTab("password"))}),u(),o(7,"svg",29),p(8,"path",31),i(),s(9," Change Password "),i()(),E(),o(10,"div",32),c(11,ke,8,2,"div",33)(12,Ee,7,0,"div",33),i()()}if(r&2){let e=d();a(2),v("active",e.activeTab==="profile"),a(4),v("active",e.activeTab==="password"),a(5),l("ngIf",e.activeTab==="profile"),a(),l("ngIf",e.activeTab==="password")}}var ie=class r{constructor(t,e,n){this.profileService=t;this.authService=e;this.router=n}destroy$=new C;userProfile=null;loading=!1;error="";successMessage="";activeTab="profile";ngOnInit(){this.loadProfile()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProfile(){this.loading=!0,this.error="",this.profileService.getProfile().pipe(w(this.destroy$)).subscribe({next:t=>{t.success&&(this.userProfile=t.data.user),this.loading=!1},error:t=>{this.error="Failed to load profile information",this.loading=!1,console.error("Profile load error:",t)}})}getUserInitials(){if(!this.userProfile)return"U";let t=this.userProfile.first_name?.charAt(0)||"",e=this.userProfile.last_name?.charAt(0)||"";return(t+e).toUpperCase()||"U"}onProfileUpdated(t){this.userProfile=t,this.authService.updateCurrentUser(t),this.showSuccessMessage("Profile updated successfully")}onPasswordChanged(){this.showSuccessMessage("Password changed successfully")}onAvatarUpdated(t){this.showSuccessMessage("Avatar updated successfully")}showSuccessMessage(t){this.successMessage=t,setTimeout(()=>{this.successMessage=""},5e3)}setActiveTab(t){this.activeTab=t,this.error="",this.successMessage=""}static \u0275fac=function(e){return new(e||r)(_(P),_(T),_(ne))};static \u0275cmp=M({type:r,selectors:[["app-profile"]],decls:22,vars:9,consts:[[1,"profile-page"],[1,"page-header"],[1,"header-content"],[1,"header-left"],[1,"page-title"],[1,"page-subtitle"],[1,"header-right"],[1,"user-avatar"],[1,"avatar-circle"],["class","avatar-image",3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"avatar-info"],[1,"user-name"],[1,"user-email"],["class","alert alert-success",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","profile-content",4,"ngIf"],[1,"avatar-image",3,"src","alt"],[1,"alert","alert-success"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"alert-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"alert","alert-error"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading-state"],[1,"loading-spinner"],[1,"profile-content"],[1,"tab-navigation"],[1,"tab-button",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"tab-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1721 9z"],[1,"tab-content"],["class","tab-panel",4,"ngIf"],[1,"tab-panel"],[1,"panel-header"],[1,"panel-title"],[1,"panel-subtitle"],[3,"avatarUpdated","userProfile"],[3,"profileUpdated","userProfile"],[3,"passwordChanged"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),s(5,"Profile Settings"),i(),o(6,"p",5),s(7,"Manage your account information and password"),i()(),o(8,"div",6)(9,"div",7)(10,"div",8),c(11,Oe,1,2,"img",9)(12,ye,2,1,"span",10),i(),o(13,"div",11)(14,"div",12),s(15),i(),o(16,"div",13),s(17),i()()()()()(),c(18,Se,4,1,"div",14)(19,Fe,4,1,"div",15)(20,Ie,4,0,"div",16)(21,Ue,13,6,"div",17),i()),e&2&&(a(11),l("ngIf",n.userProfile==null?null:n.userProfile.avatar_url),a(),l("ngIf",!(n.userProfile!=null&&n.userProfile.avatar_url)),a(3),te("",n.userProfile==null?null:n.userProfile.first_name," ",n.userProfile==null?null:n.userProfile.last_name,""),a(2),Y(n.userProfile==null?null:n.userProfile.email),a(),l("ngIf",n.successMessage),a(),l("ngIf",n.error),a(),l("ngIf",n.loading),a(),l("ngIf",!n.loading&&n.userProfile))},dependencies:[S,y,k,B,R,L],styles:[".profile-page[_ngcontent-%COMP%]{min-height:100vh;background-color:#f9fafb;padding:24px}.page-header[_ngcontent-%COMP%]{background:#fff;border-radius:16px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;margin-bottom:24px;overflow:hidden}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:32px;gap:24px}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:24px}}.header-left[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#111827;margin:0 0 8px;line-height:1.2}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:24px}}.page-subtitle[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0;line-height:1.5}.header-right[_ngcontent-%COMP%]{flex-shrink:0}.user-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;background-color:#f3f4f6;border-radius:12px;border:1px solid #e5e7eb}.avatar-circle[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:600;flex-shrink:0;overflow:hidden;position:relative}.avatar-circle[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.avatar-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.user-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#111827;line-height:1.2}.user-email[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;line-height:1.2}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;border-radius:12px;margin-bottom:24px;font-size:14px;font-weight:500}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.alert.alert-success[_ngcontent-%COMP%]{background-color:#f0fdf4;border:1px solid #bbf7d0;color:#166534}.alert.alert-error[_ngcontent-%COMP%]{background-color:#fef2f2;border:1px solid #fecaca;color:#dc2626}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 24px;background:#fff;border-radius:16px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e5e7eb;border-top:4px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:16px;margin:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.profile-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden}.tab-navigation[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e5e7eb;background-color:#f9fafb}@media (max-width: 768px){.tab-navigation[_ngcontent-%COMP%]{flex-direction:column}}.tab-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 24px;background:none;border:none;font-size:14px;font-weight:500;color:#6b7280;cursor:pointer;transition:all .2s ease-in-out;position:relative}.tab-button[_ngcontent-%COMP%]:hover{color:#374151;background-color:#f3f4f6}.tab-button.active[_ngcontent-%COMP%]{color:#3b82f6;background-color:#fff;border-bottom:2px solid #3b82f6}.tab-button[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}@media (max-width: 768px){.tab-button[_ngcontent-%COMP%]{justify-content:center;border-bottom:1px solid #e5e7eb}.tab-button.active[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;border-right:2px solid #3b82f6}}.tab-content[_ngcontent-%COMP%]{padding:32px;min-height:400px}@media (max-width: 768px){.tab-content[_ngcontent-%COMP%]{padding:24px}}.tab-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.panel-header[_ngcontent-%COMP%]{margin-bottom:32px}.panel-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#111827;margin:0 0 8px;line-height:1.2}.panel-subtitle[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0;line-height:1.5}"]})};export{ie as ProfilePage};
