import{a as p}from"./chunk-VPAYI7QR.js";import{a as l}from"./chunk-MEXLA3FU.js";import{b as c}from"./chunk-YGU4T3V7.js";import{Y as u,ba as m,s as b}from"./chunk-RHVXZUNF.js";import{a as n}from"./chunk-EQDQRRRY.js";var d=class i{constructor(e,r){this.http=e;this.authService=r}apiUrl=`${l.apiUrl}/teams`;getAuthHeaders(){let e=this.authService.getToken();return{headers:n({"Content-Type":"application/json"},e?{Authorization:`Bearer ${e}`}:{})}}getTeamMembers(e=1,r=15,t){let s=this.authService.getToken(),o=n({"Content-Type":"application/json"},s?{Authorization:`Bearer ${s}`}:{}),a=new URLSearchParams;a.set("page",String(e)),a.set("per_page",String(r)),t?.search&&a.set("search",t.search),t?.role_id!==void 0&&a.set("role_id",String(t.role_id)),t?.role_name&&a.set("role_name",t.role_name),t?.status&&a.set("status",t.status),t?.active!==void 0&&a.set("active",String(t.active)),t?.type&&a.set("type",t.type),t?.sort_by&&a.set("sort_by",t.sort_by),t?.sort_dir&&a.set("sort_dir",t.sort_dir);let g=`${this.apiUrl}?${a.toString()}`;return this.http.get(g,{headers:o})}getTeamMembersFlat(e=1e3){return this.getTeamMembers(1,e).pipe(b(r=>r?.data?.teams??[]))}getTeamMember(e){return this.http.get(`${this.apiUrl}/${e}`,this.getAuthHeaders())}createTeamMember(e){return this.http.post(this.apiUrl,e,this.getAuthHeaders())}updateTeamMember(e,r){return this.http.put(`${this.apiUrl}/${e}`,r,this.getAuthHeaders())}toggleTeamMemberStatus(e){return this.http.post(`${this.apiUrl}/${e}/toggle-status`,{},this.getAuthHeaders())}deleteTeamMember(e){return this.http.delete(`${this.apiUrl}/${e}`,this.getAuthHeaders())}resendInvitation(e){return this.http.post(`${this.apiUrl}/${e}/resend-invitation`,{},this.getAuthHeaders())}getTeamMemberStatistics(){return this.http.get(`${this.apiUrl}/statistics`,this.getAuthHeaders())}getTeamAnalytics(e){let r=this.authService.getToken(),t=n({"Content-Type":"application/json"},r?{Authorization:`Bearer ${r}`}:{}),s=new URLSearchParams;e?.date_range&&s.set("date_range",String(e.date_range));let o=`${this.apiUrl}/analytics${s.toString()?`?${s.toString()}`:""}`;return this.http.get(o,{headers:t})}getAvailableRoles(){return this.http.get(`${this.apiUrl}/available-roles`,this.getAuthHeaders())}getTeam(e){return this.http.get(`${this.apiUrl}/teams/${e}`,this.getAuthHeaders())}createTeam(e){return this.http.post(`${this.apiUrl}/teams`,e,this.getAuthHeaders())}updateTeam(e,r){return this.http.put(`${this.apiUrl}/teams/${e}`,r,this.getAuthHeaders())}static \u0275fac=function(r){return new(r||i)(m(c),m(p))};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
