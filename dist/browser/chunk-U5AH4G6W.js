import{a as ei}from"./chunk-S737KGQC.js";import{a as N}from"./chunk-G42DB7FG.js";import"./chunk-GGQ7LRWG.js";import{c as B,d as D,f as k,g as P}from"./chunk-C5P3YSZX.js";import{c as oe,d as Z,e as re,f as ae,h as Wt,i as se,j as Qt,l as le,m as Zt,n as Yt,o as ce,p as Be,q as Ge,r as $e,s as Kt,t as Xt,u as Jt,w as de,x as Ue,y as ee}from"./chunk-2HMAJ7TT.js";import{c as Ut,e as ze,f as qt,i as xe}from"./chunk-QMPG64S5.js";import"./chunk-VUTA7ABU.js";import{D as je,a as Ie,h as Gt,k as Q,l as A,v as F,y as $t}from"./chunk-FMXY27HN.js";import{$ as V,$b as zt,A as It,Aa as Ht,C as Vt,Cb as v,Db as d,F as Ot,Gb as Nt,I as st,Ia as z,Jb as _e,Ka as At,Kb as fe,La as l,Lb as ve,Oa as Pe,Qa as E,Qb as c,R,Rb as w,Sb as S,Tb as J,Ub as jt,V as K,Vb as mt,W as ie,Wb as pt,Xb as ht,Za as O,_a as ne,a as ue,c as rt,ca as Rt,cb as b,f as L,fa as Ce,ga as _,ha as f,hb as Ft,ia as u,ib as ge,ic as ut,j as at,ja as g,jb as p,lb as H,ma as Fe,mb as I,pb as Se,qa as j,ra as De,tb as n,ub as a,va as Ne,vb as h,wa as lt,wb as ct,wc as Bt,xb as dt,z as Pt,zb as M}from"./chunk-EBK772Q5.js";import{a as X,b as Ae,f as $}from"./chunk-EQDQRRRY.js";var me=class r{isLoaded=!1;loadPromise=null;constructor(){}loadGoogleMaps(){return $(this,null,function*(){return this.isLoaded?Promise.resolve():this.loadPromise?this.loadPromise:(this.loadPromise=new Promise((t,e)=>{if(typeof window.google<"u"&&window.google.maps){this.isLoaded=!0,t();return}let i=document.querySelector('script[src*="maps.googleapis.com"]');if(i){i.addEventListener("load",()=>{this.isLoaded=!0,t()}),i.addEventListener("error",e);return}let o=()=>{typeof window.google<"u"&&window.google.maps?(this.isLoaded=!0,t()):setTimeout(o,100)};o()}),this.loadPromise)})}initializeAutocomplete(o,s){return $(this,arguments,function*(t,e,i={}){yield this.loadGoogleMaps();let x=X(X({},{types:["geocode"],fields:["formatted_address","place_id","geometry","address_components"]}),i),y=new window.google.maps.places.Autocomplete(t,x);return y.addListener("place_changed",()=>{let C=y.getPlace();C&&C.formatted_address&&e({formatted_address:C.formatted_address,place_id:C.place_id,geometry:C.geometry,address_components:C.address_components})}),y})}searchPlaces(i){return $(this,arguments,function*(t,e={}){return yield this.loadGoogleMaps(),new Promise((o,s)=>{let m=new window.google.maps.places.PlacesService(document.createElement("div")),x=X({query:t,fields:["formatted_address","place_id","geometry"]},e);m.textSearch(x,(y,C)=>{C===window.google.maps.places.PlacesServiceStatus.OK?o(y||[]):s(new Error(`Places search failed: ${C}`))})})})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=K({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ii=["addressInput"];function Vi(r,t){r&1&&(n(0,"div",51)(1,"p",52),c(2,"Location Hierarchy:"),a(),n(3,"div",53)(4,"div")(5,"strong"),c(6,"Level 0:"),a(),c(7," Communities, Campuses, Buildings"),a(),n(8,"div")(9,"strong"),c(10,"Level 1:"),a(),c(11," Buildings, Floors"),a(),n(12,"div")(13,"strong"),c(14,"Level 2+:"),a(),c(15," Rooms, Areas, Amenities"),a()(),n(16,"p",54),c(17,"Available types: 16 options including Community, Campus, and Buildings"),a()())}function Oi(r,t){if(r&1&&(n(0,"div",55)(1,"div",5)(2,"div",56),h(3,"img",57),a(),n(4,"div",58)(5,"p",59),c(6,"Parent Location:"),a(),n(7,"p",60),c(8),a(),n(9,"p",61),c(10),a()()()()),r&2){let e=d(2);l(3),p("src",e.parentLocation.type.icon,z)("alt",e.parentLocation.type.name),l(5),J("",e.parentLocation.name," (",e.parentLocation.type.name,")"),l(2),S("Creating Level ",e.parentLocation.hierarchy_level+1," location")}}function Ri(r,t){r&1&&(n(0,"div",62)(1,"div",63),u(),n(2,"svg",64),h(3,"path",65),a(),c(4," Drag the marker or click on the map to adjust the location "),a(),g(),h(5,"div",66),a())}function Hi(r,t){if(r&1){let e=M();n(0,"div",67),v("click",function(){let o=_(e).$implicit,s=d(2);return f(s.selectLocationType(o))}),n(1,"div",68)(2,"div",69),h(3,"img",70),a(),n(4,"div",71),c(5),a(),n(6,"div",72),c(7),a()()()}if(r&2){let e=t.$implicit,i=d(2);I(i.selectedTypeId===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),l(3),p("src",e.icon,z)("alt",e.name),l(2),w(e.name),l(2),w(i.getTypeDescription(e))}}function Ai(r,t){if(r&1){let e=M();n(0,"div",68)(1,"button",73),v("click",function(){_(e);let o=d(2);return f(o.toggleShowAllTypes())}),u(),n(2,"svg",74),h(3,"path",75),a(),g(),n(4,"span"),c(5),a()()()}if(r&2){let e=d(2);l(5),w(e.showAllTypes?"Show Less":e.locationTypes.length-6+" More Types")}}function Fi(r,t){if(r&1&&(n(0,"div",76)(1,"p",77),c(2),a()()),r&2){let e=d(2);l(2),w(e.errorMessage)}}function Ni(r,t){r&1&&(n(0,"span"),c(1,"Create Location"),a())}function ji(r,t){r&1&&(n(0,"span",78),u(),n(1,"svg",79),h(2,"circle",80)(3,"path",81),a(),g(),n(4,"span"),c(5,"Creating..."),a()())}function zi(r,t){if(r&1){let e=M();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),u(),n(5,"svg",7),h(6,"path",8)(7,"path",9),a()(),g(),n(8,"h2",10),c(9,"Add New Location"),a()(),n(10,"button",11),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),u(),n(11,"svg",12),h(12,"path",13),a()()(),g(),n(13,"div",14)(14,"div",15)(15,"div",16),u(),n(16,"svg",17),h(17,"path",18),a()(),g(),n(18,"h3",19),c(19),a(),n(20,"p",20),c(21),a(),b(22,Vi,18,0,"div",21)(23,Oi,11,5,"div",22),a(),n(24,"form",23),v("ngSubmit",function(){_(e);let o=d();return f(o.onSubmit())}),n(25,"div",24)(26,"div",25),u(),n(27,"svg",26),h(28,"path",27),a(),g(),n(29,"h4",28),c(30,"Basic Information"),a()(),n(31,"div",29)(32,"label",30),c(33," Location Name "),n(34,"span",31),c(35,"*"),a()(),h(36,"input",32),a(),n(37,"div",29)(38,"label",33),c(39,"Description"),a(),h(40,"textarea",34),a(),n(41,"div",29)(42,"label",35),c(43,"Address"),a(),n(44,"div",36),u(),n(45,"svg",37),h(46,"path",8)(47,"path",9),a(),g(),n(48,"input",38,0),v("blur",function(){_(e);let o=d();return f(o.onAddressChanged())}),a()(),n(50,"div",39),c(51,"Enter the physical address of the location"),a(),b(52,Ri,6,0,"div",40),a()(),n(53,"div",24)(54,"div",25),u(),n(55,"svg",26),h(56,"path",41),a(),g(),n(57,"h4",28),c(58,"Location Type"),a()(),n(59,"div",42),b(60,Hi,8,6,"div",43),a(),b(61,Ai,6,1,"div",44),a(),b(62,Fi,3,1,"div",45),n(63,"div",46)(64,"button",47),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),c(65," Close "),a(),n(66,"button",48),b(67,Ni,2,0,"span",49)(68,ji,6,0,"span",50),a()()()()()()}if(r&2){let e,i=d();p("@backdropAnimation",void 0),l(),p("@modalAnimation",void 0),l(18),S(" ",i.parentLocation?"Add New Sub-location":"Add New Facility"," "),l(2),S(" ",i.parentLocation?"Create a new sub-location under "+i.parentLocation.name:"Create a new top-level facility or community"," "),l(),p("ngIf",!i.parentLocation),l(),p("ngIf",i.parentLocation),l(),p("formGroup",i.locationForm),l(12),H("border-red-300",((e=i.locationForm.get("name"))==null?null:e.invalid)&&((e=i.locationForm.get("name"))==null?null:e.touched)),l(16),p("ngIf",i.showMap),l(8),p("ngForOf",i.getDisplayedTypes()),l(),p("ngIf",i.locationTypes.length>6),l(),p("ngIf",i.errorMessage),l(4),p("disabled",i.locationForm.invalid||i.isLoading),l(),p("ngIf",!i.isLoading),l(),p("ngIf",i.isLoading)}}var Me=class r{constructor(t,e,i,o){this.fb=t;this.locationService=e;this.googlePlacesService=i;this.http=o;this.locationForm=this.fb.group({name:["",[Z.required,Z.minLength(2)]],description:[""],address:[""],location_type_id:[null,Z.required]})}isOpen=!1;parentLocation=null;closeModal=new j;locationCreated=new j;addressInput;locationForm;locationTypes=[];selectedTypeId=null;isLoading=!1;errorMessage="";showAllTypes=!1;autocomplete;showMap=!1;map;marker;geocoder;ngOnInit(){this.loadLocationTypes()}ngAfterViewInit(){this.initializeAutocomplete()}ngOnChanges(t){t.isOpen&&this.isOpen&&!t.isOpen.firstChange&&(this.resetForm(),setTimeout(()=>{this.initializeAutocomplete()},200))}loadLocationTypes(){let t=this.parentLocation?this.parentLocation.hierarchy_level+1:0;this.locationService.getLocationTypes(t).subscribe({next:e=>{e.success&&(this.locationTypes=e.data.types)},error:e=>{console.error("Error loading location types:",e)}})}getDisplayedTypes(){return this.showAllTypes?this.locationTypes:this.locationTypes.slice(0,6)}selectLocationType(t){this.selectedTypeId=t.id,this.locationForm.patchValue({location_type_id:t.id})}getTypeDescription(t){return t.description||`${t.category}`}getTypeIcon(t){return`assets/icons/${t.icon}.svg`}onSubmit(){if(this.locationForm.valid&&!this.isLoading){this.isLoading=!0,this.errorMessage="";let t=Ae(X({},this.locationForm.value),{parent_id:this.parentLocation?this.parentLocation.id:null});this.locationService.createLocation(t).subscribe({next:e=>{e.success?(this.locationCreated.emit(e.data.location),this.closeModalHandler()):this.errorMessage=e.message||"Failed to create location",this.isLoading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while creating the location",this.isLoading=!1}})}}initializeAutocomplete(){return $(this,null,function*(){setTimeout(()=>$(this,null,function*(){if(this.addressInput?.nativeElement&&this.isOpen)try{this.autocomplete&&(this.autocomplete=null),this.autocomplete=yield this.googlePlacesService.initializeAutocomplete(this.addressInput.nativeElement,t=>{if(this.locationForm.patchValue({address:t.formatted_address}),t.geometry&&t.geometry.location){let e=t.geometry.location.lat(),i=t.geometry.location.lng();this.showMap=!0,setTimeout(()=>this.showMapOnCoords(e,i),100)}},{types:["geocode"]})}catch(t){console.error("Failed to initialize Google Places Autocomplete:",t)}}),300)})}closeModalHandler(){this.autocomplete&&(this.autocomplete=null),this.cleanupMap(),this.isOpen=!1,this.closeModal.emit()}cleanupMap(){if(this.marker&&typeof google<"u"&&google.maps){try{google.maps.event.clearInstanceListeners(this.marker),this.marker.setMap(null)}catch(e){console.warn("Error cleaning up marker:",e)}this.marker=void 0}if(this.map&&typeof google<"u"&&google.maps){try{google.maps.event.clearInstanceListeners(this.map)}catch(e){console.warn("Error cleaning up map:",e)}this.map=void 0}let t=document.getElementById("location-map");t&&(t.innerHTML=""),this.geocoder=void 0,this.showMap=!1}toggleShowAllTypes(){this.showAllTypes=!this.showAllTypes}resetForm(){this.locationForm.reset(),this.selectedTypeId=null,this.errorMessage="",this.showAllTypes=!1,this.isLoading=!1,this.cleanupMap(),this.autocomplete&&(this.autocomplete=null)}onAddressChanged(){let t=this.locationForm.get("address")?.value;t&&t.trim().length>0?this.geocodeAddress():(this.showMap=!1,this.map&&(this.map=void 0,this.marker=void 0))}geocodeAddress(){let t=this.locationForm.get("address")?.value;if(t){if(typeof google>"u"||!google.maps){console.warn("Google Maps not loaded yet");return}this.geocoder||(this.geocoder=new google.maps.Geocoder),this.geocoder.geocode({address:t},(e,i)=>{if(i==="OK"&&e&&e.length>0){let o=e[0].geometry.location,s=o.lat(),m=o.lng();this.showMap=!0,setTimeout(()=>this.showMapOnCoords(s,m),100)}})}}showMapOnCoords(t,e){let i=document.getElementById("location-map");if(!i){console.warn("Map element not found");return}if(typeof google>"u"||!google.maps){console.warn("Google Maps not loaded yet");return}if(i.offsetWidth===0||i.offsetHeight===0){console.warn("Map element has no dimensions");return}this.map?this.map.setCenter({lat:t,lng:e}):this.map=new google.maps.Map(i,{center:{lat:t,lng:e},zoom:15,mapTypeId:"roadmap",mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),this.marker?this.marker.setPosition({lat:t,lng:e}):(this.marker=new google.maps.Marker({position:{lat:t,lng:e},map:this.map,title:this.locationForm.get("name")?.value||"Location",draggable:!0}),this.marker.addListener("dragend",()=>{let o=this.marker.getPosition();o&&this.reverseGeocode(o.lat(),o.lng())}),this.map.addListener("click",o=>{let s=o.latLng;this.marker.setPosition(s),this.reverseGeocode(s.lat(),s.lng())}))}reverseGeocode(t,e){this.geocoder||(this.geocoder=new google.maps.Geocoder),this.geocoder.geocode({location:{lat:t,lng:e}},(i,o)=>{if(o==="OK"&&i&&i.length>0){let s=i[0].formatted_address;this.locationForm.patchValue({address:s})}})}static \u0275fac=function(e){return new(e||r)(E(de),E(N),E(me),E(je))};static \u0275cmp=O({type:r,selectors:[["app-add-location-modal"]],viewQuery:function(e,i){if(e&1&&_e(Ii,5),e&2){let o;fe(o=ve())&&(i.addressInput=o.first)}},inputs:{isOpen:"isOpen",parentLocation:"parentLocation"},outputs:{closeModal:"closeModal",locationCreated:"locationCreated"},features:[Ce],decls:1,vars:1,consts:[["addressInput",""],["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"text-center","mb-8"],[1,"w-16","h-16","bg-blue-50","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","text-sm"],["class","mt-4 p-4 bg-blue-50 rounded-lg",4,"ngIf"],["class","mt-4 p-4 bg-green-50 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","name","type","text","formControlName","name","placeholder","Enter location name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Brief description of this location",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],["for","address",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["id","address","type","text","formControlName","address","placeholder","Enter location address","autocomplete","off",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"blur"],[1,"text-xs","text-gray-500","mt-1"],["class","mt-4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],["class","border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-sm",3,"class","click",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-end","pt-6","gap-3","border-t","border-gray-200"],["type","button",1,"px-6","py-2","text-gray-600","height-[40px]","border","border-gray-200","rounded-lg","hover:border-gray-300","hover:text-gray-800","font-medium","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mt-4","p-4","bg-blue-50","rounded-lg"],[1,"text-sm","font-medium","text-blue-900","mb-2"],[1,"text-xs","text-blue-700","space-y-1"],[1,"text-xs","text-blue-600","mt-2"],[1,"mt-4","p-4","bg-green-50","rounded-lg"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6",3,"src","alt"],[1,"text-left"],[1,"text-sm","font-medium","text-green-900"],[1,"text-sm","text-green-700"],[1,"text-xs","text-green-600"],[1,"mt-4"],[1,"text-xs","text-gray-600","mb-2","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16l-4-4m0 0l4-4m-4 4h18"],["id","location-map",2,"height","300px","width","100%","border-radius","0.5rem","border","1px solid #e5e7eb"],[1,"border-2","rounded-lg","p-4","cursor-pointer","transition-all","hover:shadow-sm",3,"click"],[1,"text-center"],[1,"mb-2","flex","justify-center"],[1,"w-8","h-8","text-gray-600",3,"src","alt"],[1,"font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-500"],["type","button",1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-sm","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,i){e&1&&b(0,zi,69,16,"div",1),e&2&&p("ngIf",i.isOpen)},dependencies:[F,Q,A,ee,se,oe,re,ae,le,ce],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-type-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.location-type-card.selected[_ngcontent-%COMP%]{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f633}.type-icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.hierarchy-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-type-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[B("backdropAnimation",[P(":enter",[k({opacity:0}),D("150ms ease-out",k({opacity:1}))]),P(":leave",[D("150ms ease-in",k({opacity:0}))])]),B("modalAnimation",[P(":enter",[k({opacity:0,transform:"scale(0.7) translateY(-50px)"}),D("200ms ease-out",k({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[D("150ms ease-in",k({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var Bi=["addressInput"];function Gi(r,t){if(r&1&&(n(0,"div",47)(1,"p",48),c(2),a()()),r&2){let e=d(2);l(2),w(e.errorMessage)}}function $i(r,t){r&1&&(n(0,"div",49)(1,"div",50),u(),n(2,"svg",51),h(3,"path",52),a(),c(4," Drag the marker or click on the map to adjust the location "),a(),g(),h(5,"div",53),a())}function Ui(r,t){if(r&1&&(n(0,"div",54)(1,"div",5)(2,"div",6),h(3,"img",55),a(),n(4,"div")(5,"div",56),c(6),a(),n(7,"div",57),c(8,"Current location type"),a()()()()),r&2){let e=d(2);l(3),p("src",e.location.type.icon,z)("alt",e.location.type.name),l(3),w(e.location.type.name)}}function qi(r,t){if(r&1){let e=M();n(0,"div",58),v("click",function(){let o=_(e).$implicit,s=d(2);return f(s.selectLocationType(o))}),n(1,"div",59)(2,"div",60),h(3,"img",61),a(),n(4,"div",62),c(5),a(),n(6,"div",63),c(7),a()()()}if(r&2){let e=t.$implicit,i=d(2);I(i.selectedTypeId===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),l(3),p("src",e.icon,z)("alt",e.name),l(2),w(e.name),l(2),w(i.getTypeDescription(e))}}function Wi(r,t){if(r&1){let e=M();n(0,"div",59)(1,"button",64),v("click",function(){_(e);let o=d(2);return f(o.toggleShowAllTypes())}),u(),n(2,"svg",65),h(3,"path",66),a(),g(),n(4,"span"),c(5),a()()()}if(r&2){let e=d(2);l(5),w(e.showAllTypes?"Show Less":e.locationTypes.length-6+" More Types")}}function Qi(r,t){r&1&&(n(0,"span"),c(1,"Update Location"),a())}function Zi(r,t){r&1&&(n(0,"span",67),u(),n(1,"svg",68),h(2,"circle",69)(3,"path",70),a(),g(),n(4,"span"),c(5,"Updating..."),a()())}function Yi(r,t){if(r&1){let e=M();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),u(),n(5,"svg",7),h(6,"path",8),a()(),g(),n(7,"h2",9),c(8,"Edit Location"),a()(),n(9,"button",10),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),u(),n(10,"svg",11),h(11,"path",12),a()()(),g(),n(12,"div",13),b(13,Gi,3,1,"div",14),n(14,"form",15),v("ngSubmit",function(){_(e);let o=d();return f(o.onSubmit())}),n(15,"div",16)(16,"div",17),u(),n(17,"svg",18),h(18,"path",19),a(),g(),n(19,"h4",20),c(20,"Basic Information"),a()(),n(21,"div",21)(22,"label",22),c(23," Location Name "),n(24,"span",23),c(25,"*"),a()(),h(26,"input",24),a(),n(27,"div",21)(28,"label",25),c(29,"Description"),a(),h(30,"textarea",26),a(),n(31,"div",21)(32,"label",27),c(33,"Address"),a(),n(34,"div",28),u(),n(35,"svg",29),h(36,"path",30)(37,"path",31),a(),g(),n(38,"input",32,0),v("blur",function(){_(e);let o=d();return f(o.onAddressChanged())}),a()(),n(40,"p",33),u(),n(41,"svg",34),h(42,"path",35),a(),c(43," Address suggestions powered by Google Places "),a(),b(44,$i,6,0,"div",36),a()(),g(),n(45,"div",16)(46,"div",17),u(),n(47,"svg",18),h(48,"path",37),a(),g(),n(49,"h4",20),c(50,"Location Type"),a()(),b(51,Ui,9,3,"div",38),n(52,"div",39),b(53,qi,8,6,"div",40),a(),b(54,Wi,6,1,"div",41),a(),n(55,"div",42)(56,"button",43),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),c(57," Cancel "),a(),n(58,"button",44),b(59,Qi,2,0,"span",45)(60,Zi,6,0,"span",46),a()()()()()()}if(r&2){let e,i=d();p("@backdropAnimation",void 0),l(),p("@modalAnimation",void 0),l(12),p("ngIf",i.errorMessage),l(),p("formGroup",i.editForm),l(12),H("border-red-300",((e=i.editForm.get("name"))==null?null:e.invalid)&&((e=i.editForm.get("name"))==null?null:e.touched)),l(18),p("ngIf",i.showMap),l(7),p("ngIf",i.location),l(2),p("ngForOf",i.getDisplayedTypes()),l(),p("ngIf",i.locationTypes.length>6),l(4),p("disabled",i.editForm.invalid||i.loading),l(),p("ngIf",!i.loading),l(),p("ngIf",i.loading)}}var Ee=class r{constructor(t,e,i,o){this.fb=t;this.locationService=e;this.googlePlacesService=i;this.http=o;this.editForm=this.fb.group({name:["",[Z.required,Z.minLength(2)]],description:[""],address:[""],location_type_id:[null,Z.required]})}isOpen=!1;location=null;closeModal=new j;locationUpdated=new j;addressInput;editForm;locationTypes=[];selectedTypeId=null;loading=!1;errorMessage="";showAllTypes=!1;autocomplete;showMap=!1;map;marker;geocoder;ngOnInit(){this.loadLocationTypes()}ngAfterViewInit(){this.isOpen&&this.initializeAutocomplete()}ngOnChanges(t){t.location&&this.location&&this.populateForm(),t.isOpen&&this.isOpen&&!t.isOpen.firstChange&&setTimeout(()=>{this.initializeAutocomplete()},200)}initializeAutocomplete(){return $(this,null,function*(){setTimeout(()=>$(this,null,function*(){if(this.addressInput?.nativeElement&&this.isOpen)try{this.autocomplete&&(this.autocomplete=null),this.autocomplete=yield this.googlePlacesService.initializeAutocomplete(this.addressInput.nativeElement,t=>{if(this.editForm.patchValue({address:t.formatted_address}),t.geometry&&t.geometry.location){let e=t.geometry.location.lat(),i=t.geometry.location.lng();this.showMap=!0,setTimeout(()=>this.showMapOnCoords(e,i),100)}},{types:["geocode"]})}catch(t){console.error("Failed to initialize Google Places Autocomplete:",t)}}),300)})}loadLocationTypes(){let t=this.location?.hierarchy_level;this.locationService.getLocationTypes(t).subscribe({next:e=>{e.success&&(this.locationTypes=e.data.types)},error:e=>{console.error("Error loading location types:",e)}})}populateForm(){if(this.location)if(this.editForm.patchValue({name:this.location.name,description:this.location.description||"",address:this.location.address||"",location_type_id:this.location.location_type_id}),this.selectedTypeId=this.location?.location_type_id||null,this.location&&this.location.latitude!==void 0&&this.location.longitude!==void 0){this.showMap=!0;let t=this.location.latitude,e=this.location.longitude;setTimeout(()=>this.showMapOnCoords(t,e),100)}else this.location&&this.location.address&&this.geocodeAddress()}getDisplayedTypes(){return this.showAllTypes?this.locationTypes:this.locationTypes.slice(0,6)}selectLocationType(t){this.selectedTypeId=t.id,this.editForm.patchValue({location_type_id:t.id})}getTypeDescription(t){return t.description||`${t.category}`}getTypeIcon(t){return`assets/icons/${t.icon}.svg`}onSubmit(){if(this.editForm.valid&&!this.loading&&this.location){this.loading=!0,this.errorMessage="";let t=X({},this.editForm.value);this.locationService.updateLocation(this.location.id,t).subscribe({next:e=>{e.success?(this.locationUpdated.emit(e.data.location),this.closeModalHandler()):this.errorMessage=e.message||"Failed to update location",this.loading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while updating the location",this.loading=!1}})}}closeModalHandler(){this.autocomplete&&(this.autocomplete=null),this.cleanupMap(),this.isOpen=!1,this.closeModal.emit(),this.resetForm()}cleanupMap(){if(this.marker&&typeof google<"u"&&google.maps){try{google.maps.event.clearInstanceListeners(this.marker),this.marker.setMap(null)}catch(e){console.warn("Error cleaning up marker:",e)}this.marker=void 0}if(this.map&&typeof google<"u"&&google.maps){try{google.maps.event.clearInstanceListeners(this.map)}catch(e){console.warn("Error cleaning up map:",e)}this.map=void 0}let t=document.getElementById("edit-location-map");t&&(t.innerHTML=""),this.geocoder=void 0,this.showMap=!1}resetForm(){this.editForm.reset(),this.selectedTypeId=null,this.errorMessage="",this.showAllTypes=!1}toggleShowAllTypes(){this.showAllTypes=!this.showAllTypes}onAddressChanged(){let t=this.editForm.get("address")?.value;t&&t.trim().length>0?this.geocodeAddress():(this.showMap=!1,this.map&&(this.map=void 0,this.marker=void 0))}geocodeAddress(){let t=this.editForm.get("address")?.value;if(t){if(typeof google>"u"||!google.maps){console.warn("Google Maps not loaded yet");return}this.geocoder||(this.geocoder=new google.maps.Geocoder),this.geocoder.geocode({address:t},(e,i)=>{if(i==="OK"&&e&&e.length>0){let o=e[0].geometry.location,s=o.lat(),m=o.lng();this.showMap=!0,setTimeout(()=>this.showMapOnCoords(s,m),100)}})}}showMapOnCoords(t,e){let i=document.getElementById("edit-location-map");if(!i){console.warn("Map element not found");return}if(typeof google>"u"||!google.maps){console.warn("Google Maps not loaded yet");return}if(i.offsetWidth===0||i.offsetHeight===0){console.warn("Map element has no dimensions");return}this.map?this.map.setCenter({lat:t,lng:e}):this.map=new google.maps.Map(i,{center:{lat:t,lng:e},zoom:15,mapTypeId:"roadmap",mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),this.marker?this.marker.setPosition({lat:t,lng:e}):(this.marker=new google.maps.Marker({position:{lat:t,lng:e},map:this.map,title:this.editForm.get("name")?.value||"Location",draggable:!0}),this.marker.addListener("dragend",()=>{let o=this.marker.getPosition();o&&this.reverseGeocode(o.lat(),o.lng())}),this.map.addListener("click",o=>{let s=o.latLng;this.marker.setPosition(s),this.reverseGeocode(s.lat(),s.lng())}))}reverseGeocode(t,e){this.geocoder||(this.geocoder=new google.maps.Geocoder),this.geocoder.geocode({location:{lat:t,lng:e}},(i,o)=>{if(o==="OK"&&i&&i.length>0){let s=i[0].formatted_address;this.editForm.patchValue({address:s})}})}static \u0275fac=function(e){return new(e||r)(E(de),E(N),E(me),E(je))};static \u0275cmp=O({type:r,selectors:[["app-edit-location-modal"]],viewQuery:function(e,i){if(e&1&&_e(Bi,5),e&2){let o;fe(o=ve())&&(i.addressInput=o.first)}},inputs:{isOpen:"isOpen",location:"location"},outputs:{closeModal:"closeModal",locationUpdated:"locationUpdated"},features:[Ce],decls:1,vars:1,consts:[["addressInput",""],["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","name","type","text","formControlName","name","placeholder","Enter location name","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Brief description of this location",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],["for","address",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["id","address","type","text","formControlName","address","placeholder","Start typing address...","autocomplete","off",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"blur"],[1,"text-xs","text-gray-500","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["class","mt-4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["class","mb-4 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],["class","border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-sm",3,"class","click",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"mt-4"],[1,"text-xs","text-gray-600","mb-2","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16l-4-4m0 0l4-4m-4 4h18"],["id","edit-location-map",2,"height","300px","width","100%","border-radius","0.5rem","border","1px solid #e5e7eb"],[1,"mb-4","p-4","bg-gray-50","rounded-lg"],[1,"w-6","h-6",3,"src","alt"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"border-2","rounded-lg","p-4","cursor-pointer","transition-all","hover:shadow-sm",3,"click"],[1,"text-center"],[1,"mb-2","flex","justify-center"],[1,"w-8","h-8","text-gray-600",3,"src","alt"],[1,"font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-500"],["type","button",1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-sm","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,i){e&1&&b(0,Yi,61,13,"div",1),e&2&&p("ngIf",i.isOpen)},dependencies:[F,Q,A,ee,se,oe,re,ae,Jt,le,ce],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-type-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.location-type-card.selected[_ngcontent-%COMP%]{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f633}.type-icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.current-type-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-type-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[B("backdropAnimation",[P(":enter",[k({opacity:0}),D("150ms ease-out",k({opacity:1}))]),P(":leave",[D("150ms ease-in",k({opacity:0}))])]),B("modalAnimation",[P(":enter",[k({opacity:0,transform:"scale(0.7) translateY(-50px)"}),D("200ms ease-out",k({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[D("150ms ease-in",k({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Ki(r,t){if(r&1&&(n(0,"div",34),c(1),a()),r&2){let e=d(3);l(),S(" \u26A0\uFE0F This location has ",e.location.children==null?null:e.location.children.length," child location(s) ")}}function Xi(r,t){if(r&1&&(n(0,"div",27)(1,"div",4)(2,"div",28),h(3,"img",29),a(),n(4,"div",30)(5,"div",31),c(6),a(),n(7,"div",32),c(8),a(),b(9,Ki,2,1,"div",33),a()()()),r&2){let e=d(2);l(3),p("src",e.location.type.icon,z)("alt",e.location.type.name),l(3),w(e.location.name),l(2),w(e.location.type.name),l(),p("ngIf",e.location.children==null?null:e.location.children.length)}}function Ji(r,t){if(r&1&&(n(0,"div",35)(1,"p",36),c(2),a()()),r&2){let e=d(2);l(2),w(e.errorMessage)}}function en(r,t){r&1&&(n(0,"span"),c(1,"Delete Location"),a())}function tn(r,t){r&1&&(n(0,"span",37),u(),n(1,"svg",38),h(2,"circle",39)(3,"path",40),a(),g(),n(4,"span"),c(5,"Deleting..."),a()())}function nn(r,t){if(r&1){let e=M();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),u(),n(5,"svg",6),h(6,"path",7),a()(),g(),n(7,"h2",8),c(8,"Delete Location"),a()(),n(9,"button",9),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),u(),n(10,"svg",10),h(11,"path",11),a()()(),g(),n(12,"div",12)(13,"div",13)(14,"div",14),u(),n(15,"svg",15),h(16,"path",16),a()()(),g(),n(17,"div",17)(18,"h3",18),c(19,"Are you sure?"),a(),n(20,"p",19),c(21," You are about to delete the location "),n(22,"strong"),c(23),a(),c(24,". This action cannot be undone. "),a(),b(25,Xi,10,5,"div",20),a(),b(26,Ji,3,1,"div",21),n(27,"div",22)(28,"button",23),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),c(29," Cancel "),a(),n(30,"button",24),v("click",function(){_(e);let o=d();return f(o.confirmDelete())}),b(31,en,2,0,"span",25)(32,tn,6,0,"span",26),a()()()()()}if(r&2){let e=d();p("@backdropAnimation",void 0),l(),p("@modalAnimation",void 0),l(22),S('"',e.location==null?null:e.location.name,'"'),l(2),p("ngIf",e.location),l(),p("ngIf",e.errorMessage),l(2),p("disabled",e.loading),l(2),p("disabled",e.loading),l(),p("ngIf",!e.loading),l(),p("ngIf",e.loading)}}var pe=class r{constructor(t){this.locationService=t}isOpen=!1;location=null;closeModal=new j;locationDeleted=new j;loading=!1;errorMessage="";confirmDelete(){!this.location||this.loading||(this.loading=!0,this.errorMessage="",this.locationService.deleteLocation(this.location.id).subscribe({next:t=>{t.success?(this.locationDeleted.emit(this.location),this.closeModalHandler()):this.errorMessage=t.message||"Failed to delete location",this.loading=!1},error:t=>{this.errorMessage=t.error?.message||"An error occurred while deleting the location",this.loading=!1}}))}closeModalHandler(){this.loading||(this.isOpen=!1,this.closeModal.emit(),this.resetModal())}resetModal(){this.errorMessage="",this.loading=!1}static \u0275fac=function(e){return new(e||r)(E(N))};static \u0275cmp=O({type:r,selectors:[["app-delete-confirmation-modal"]],inputs:{isOpen:"isOpen",location:"location"},outputs:{closeModal:"closeModal",locationDeleted:"locationDeleted"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-red-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["class","bg-gray-50 rounded-lg p-4 mb-4",4,"ngIf"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-red-600","text-white","font-medium","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","mb-4"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6",3,"src","alt"],[1,"text-left"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],["class","text-xs text-red-600 mt-1",4,"ngIf"],[1,"text-xs","text-red-600","mt-1"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,i){e&1&&b(0,nn,33,9,"div",0),e&2&&p("ngIf",i.isOpen)},dependencies:[F,A],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[B("backdropAnimation",[P(":enter",[k({opacity:0}),D("150ms ease-out",k({opacity:1}))]),P(":leave",[D("150ms ease-in",k({opacity:0}))])]),B("modalAnimation",[P(":enter",[k({opacity:0,transform:"scale(0.7) translateY(-50px)"}),D("200ms ease-out",k({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[D("150ms ease-in",k({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var on=["addressInput"];function rn(r,t){if(r&1&&(n(0,"div",27)(1,"div",28),u(),n(2,"svg",29),h(3,"path",30),a(),g(),n(4,"span",31),c(5),a()()()),r&2){let e=d(2);l(5),S("Successfully created ",e.successCount," locations!")}}function an(r,t){if(r&1&&(n(0,"div",32)(1,"p",33),c(2),a()()),r&2){let e=d(2);l(2),w(e.errorMessage)}}function sn(r,t){if(r&1&&(n(0,"option",55),c(1),a()),r&2){let e=t.$implicit;p("value",e.id),l(),w(e.name)}}function ln(r,t){if(r&1){let e=M();n(0,"div",34)(1,"div",35)(2,"h3",36),c(3),a(),n(4,"div",28)(5,"button",37),v("click",function(){let o=_(e).index,s=d(2);return f(s.duplicateLocationRow(o))}),u(),n(6,"svg",8),h(7,"path",38),a()(),g(),n(8,"button",39),v("click",function(){let o=_(e).index,s=d(2);return f(s.removeLocationRow(o))}),u(),n(9,"svg",8),h(10,"path",40),a()()()(),g(),n(11,"div",41)(12,"div")(13,"label",42),c(14," Name "),n(15,"span",43),c(16,"*"),a()(),h(17,"input",44),a(),n(18,"div")(19,"label",42),c(20,"Type"),a(),n(21,"div",45)(22,"select",46)(23,"option",47),c(24,"Select type"),a(),b(25,sn,2,2,"option",48),a(),n(26,"div",49),u(),n(27,"svg",50),h(28,"path",51),a()()()()(),g(),n(29,"div",52)(30,"label",42),c(31,"Address"),a(),h(32,"input",53,0),a(),n(34,"div",52)(35,"label",42),c(36,"Description"),a(),h(37,"textarea",54),a()()}if(r&2){let e,i,o=t.$implicit,s=t.index,m=d(2);p("formGroupName",s),l(3),S("Location ",s+1,""),l(5),p("disabled",m.locationsArray.length<=1),l(9),H("border-red-300",((e=o.get("name"))==null?null:e.invalid)&&((e=o.get("name"))==null?null:e.touched)),l(5),H("border-red-300",((i=o.get("location_type_id"))==null?null:i.invalid)&&((i=o.get("location_type_id"))==null?null:i.touched)),l(3),p("ngForOf",m.locationTypes)}}function cn(r,t){if(r&1&&(n(0,"span"),c(1),a()),r&2){let e=d(2);l(),S("Create ",e.getValidLocationsCount()," Locations")}}function dn(r,t){r&1&&(n(0,"span",28),u(),n(1,"svg",56),h(2,"circle",57)(3,"path",58),a(),g(),n(4,"span"),c(5,"Creating..."),a()())}function mn(r,t){if(r&1){let e=M();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"h2",5),c(5),a()(),n(6,"div",6)(7,"button",7),v("click",function(){_(e);let o=d();return f(o.addLocationRow())}),u(),n(8,"svg",8),h(9,"path",9),a(),g(),n(10,"span"),c(11,"Add Location"),a()(),n(12,"button",10),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),u(),n(13,"svg",11),h(14,"path",12),a()()()(),g(),n(15,"div",13),b(16,rn,6,1,"div",14)(17,an,3,1,"div",15),n(18,"div",16)(19,"form",17),v("ngSubmit",function(){_(e);let o=d();return f(o.onSubmit())}),n(20,"div",18),b(21,ln,38,8,"div",19),a()()(),n(22,"div",20)(23,"div",21)(24,"span",22),c(25),a(),c(26," of "),n(27,"span",22),c(28),a(),c(29," locations ready "),a(),n(30,"div",6)(31,"button",23),v("click",function(){_(e);let o=d();return f(o.closeModalHandler())}),c(32," Cancel "),a(),n(33,"button",24),v("click",function(){_(e);let o=d();return f(o.onSubmit())}),b(34,cn,2,1,"span",25)(35,dn,6,0,"span",26),a()()()()()()}if(r&2){let e=d();p("@backdropAnimation",void 0),l(),p("@modalAnimation",void 0),l(4),S("Create up to 5 locations at once (",e.getTotalLocationsCount(),"/5)"),l(11),p("ngIf",e.successCount>0),l(),p("ngIf",e.errorMessage),l(2),p("formGroup",e.bulkForm),l(2),p("ngForOf",e.locationsArray.controls),l(4),w(e.getValidLocationsCount()),l(3),w(e.getTotalLocationsCount()),l(3),p("disabled",e.isLoading),l(2),p("disabled",e.bulkForm.invalid||e.isLoading||e.getValidLocationsCount()===0),l(),p("ngIf",!e.isLoading),l(),p("ngIf",e.isLoading)}}var qe=class r{constructor(t,e,i){this.fb=t;this.locationService=e;this.googlePlacesService=i;this.bulkForm=this.fb.group({locations:this.fb.array([])})}isOpen=!1;closeModal=new j;locationsCreated=new j;addressInputs;bulkForm;locationTypes=[];isLoading=!1;errorMessage="";successCount=0;autocompleteInstances=[];ngOnInit(){this.loadLocationTypes(),this.addLocationRow(),this.addLocationRow(),this.addLocationRow(),this.bulkForm.valueChanges.subscribe(()=>{this.locationsArray.updateValueAndValidity()})}ngAfterViewInit(){this.isOpen&&this.initializeAllAutocomplete()}get locationsArray(){return this.bulkForm.get("locations")}loadLocationTypes(){this.locationService.getLocationTypes(0).subscribe({next:t=>{t.success&&(this.locationTypes=t.data.types)},error:t=>{console.error("Error loading location types:",t)}})}createLocationFormGroup(){return this.fb.group({name:["",[Z.required,Z.minLength(2)]],description:[""],address:[""],location_type_id:[null,Z.required]})}addLocationRow(){this.locationsArray.length>=5||this.locationsArray.push(this.createLocationFormGroup())}initializeAllAutocomplete(){return $(this,null,function*(){setTimeout(()=>$(this,null,function*(){this.addressInputs&&this.addressInputs.forEach((t,e)=>$(this,null,function*(){if(t?.nativeElement)try{let i=yield this.googlePlacesService.initializeAutocomplete(t.nativeElement,o=>{let s=this.locationsArray.at(e);s&&s.patchValue({address:o.formatted_address})},{types:["geocode"]});this.autocompleteInstances[e]=i}catch(i){console.error("Failed to initialize Google Places Autocomplete:",i)}}))}),100)})}duplicateLocationRow(t){if(this.locationsArray.length>=5)return;let e=this.locationsArray.at(t);if(e){let i=this.createLocationFormGroup();i.patchValue(e.value),this.locationsArray.push(i)}setTimeout(()=>this.initializeAllAutocomplete(),100)}removeLocationRow(t){this.locationsArray.length>1&&this.locationsArray.removeAt(t)}getLocationTypeName(t){let e=this.locationTypes.find(i=>i.id===t);return e?e.name:"Unknown"}onSubmit(){if(this.bulkForm.valid&&!this.isLoading){this.isLoading=!0,this.errorMessage="",this.successCount=0;let t=this.locationsArray.value.map(e=>Ae(X({},e),{parent_id:null}));this.locationService.bulkCreateLocations(t).subscribe({next:e=>{e.success?(this.successCount=t.length,this.locationsCreated.emit(e.data.location?[e.data.location]:[]),setTimeout(()=>{this.closeModalHandler()},2e3)):this.errorMessage=e.message||"Failed to create locations",this.isLoading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while creating locations",this.isLoading=!1}})}}closeModalHandler(){this.isOpen=!1,this.closeModal.emit(),this.resetForm()}resetForm(){for(;this.locationsArray.length>0;)this.locationsArray.removeAt(0);this.addLocationRow(),this.addLocationRow(),this.addLocationRow(),this.errorMessage="",this.successCount=0}getValidLocationsCount(){return this.locationsArray.controls.filter(t=>{let e=t.get("name")?.value,i=t.get("location_type_id")?.value;return t.valid&&e&&e.trim().length>=2&&i}).length}getTotalLocationsCount(){return this.locationsArray.length}static \u0275fac=function(e){return new(e||r)(E(de),E(N),E(me))};static \u0275cmp=O({type:r,selectors:[["app-bulk-create-modal"]],viewQuery:function(e,i){if(e&1&&_e(on,5),e&2){let o;fe(o=ve())&&(i.addressInputs=o)}},inputs:{isOpen:"isOpen"},outputs:{closeModal:"closeModal",locationsCreated:"locationsCreated"},decls:1,vars:1,consts:[["addressInput",""],["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-4xl","w-full","max-h-[90vh]","overflow-hidden"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex","items-center","space-x-3"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","flex-col","h-full","max-h-[calc(90vh-140px)]"],["class","p-4 bg-green-50 border-b border-green-200",4,"ngIf"],["class","p-4 bg-red-50 border-b border-red-200",4,"ngIf"],[1,"flex-1","overflow-auto","p-6"],[3,"ngSubmit","formGroup"],["formArrayName","locations",1,"space-y-6"],["class","bg-white border border-gray-200 rounded-lg p-6 relative",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-6","border-t","border-gray-200","bg-gray-50"],[1,"text-sm","text-gray-600"],[1,"font-medium"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"p-4","bg-green-50","border-b","border-green-200"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-green-800","font-medium"],[1,"p-4","bg-red-50","border-b","border-red-200"],[1,"text-red-600","text-sm"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6","relative",3,"formGroupName"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],["type","button",1,"p-2","text-gray-400","hover:text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],["type","button",1,"p-2","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","formControlName","name","placeholder","Enter location name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],[1,"relative"],["formControlName","location_type_id",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","appearance-none","bg-white"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mt-6"],["type","text","formControlName","address","placeholder","Enter location address","autocomplete","off",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["formControlName","description","rows","3","placeholder","Enter location description",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],[3,"value"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,i){e&1&&b(0,mn,36,13,"div",1),e&2&&p("ngIf",i.isOpen)},dependencies:[F,Q,A,ee,se,Ge,$e,oe,Be,re,ae,le,ce,Zt,Yt],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;border-color:#e5e7eb}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:1rem;margin-bottom:1.5rem}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}select[_ngcontent-%COMP%]{background-image:none}select[_ngcontent-%COMP%]:focus{outline:none}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ef4444!important}.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#10b981}.success-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.location-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;box-shadow:0 1px 3px #0000001a}.location-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.location-card[_ngcontent-%COMP%]{padding:1rem}}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}[_ngcontent-%COMP%]::placeholder{color:#9ca3af;opacity:1}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px)}button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}"],data:{animation:[B("backdropAnimation",[P(":enter",[k({opacity:0}),D("150ms ease-out",k({opacity:1}))]),P(":leave",[D("150ms ease-in",k({opacity:0}))])]),B("modalAnimation",[P(":enter",[k({opacity:0,transform:"scale(0.7) translateY(-50px)"}),D("200ms ease-out",k({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[D("150ms ease-in",k({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var ft;function pn(){if(ft==null){let r=typeof document<"u"?document.head:null;ft=!!(r&&(r.createShadowRoot||r.attachShadow))}return ft}function We(r){if(pn()){let t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Ve(r){return r.composedPath?r.composedPath()[0]:r.target}function ti(r){return r.buttons===0||r.detail===0}function ii(r){let t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}function we(r){return r instanceof Ne?r.nativeElement:r}function he(r,t,e,i,o){let s=parseInt(ut.major),m=parseInt(ut.minor);return s>19||s===19&&m>0||s===0&&m===0?r.listen(t,e,i,o):(t.addEventListener(e,i,o),()=>{t.removeEventListener(e,i,o)})}var Qe=new WeakMap,ni=(()=>{class r{_appRef;_injector=V(Fe);_environmentInjector=V(Rt);load(e){let i=this._appRef=this._appRef||this._injector.get(Ft),o=Qe.get(i);o||(o={loaders:new Set,refs:[]},Qe.set(i,o),i.onDestroy(()=>{Qe.get(i)?.refs.forEach(s=>s.destroy()),Qe.delete(i)})),o.loaders.has(e)||(o.loaders.add(e),o.refs.push(Bt(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=K({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var vt;try{vt=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vt=!1}var oi=(()=>{class r{_platformId=V(Ht);isBrowser=this._platformId?$t(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||vt)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275prov=K({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Cn=20,ri=(()=>{class r{_platform=V(oi);_listeners;_viewportSize;_change=new L;_document=V(Ie,{optional:!0});constructor(){let e=V(De),i=V(Pe).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=s=>this._change.next(s);this._listeners=[i.listen("window","resize",o),i.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),o=e.documentElement,s=o.getBoundingClientRect(),m=-s.top||e.body.scrollTop||i.scrollY||o.scrollTop||0,x=-s.left||e.body.scrollLeft||i.scrollX||o.scrollLeft||0;return{top:m,left:x}}change(e=Cn){return e>0?this._change.pipe(Vt(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=K({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ai=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=ne({type:r});static \u0275inj=ie({})}return r})();function bi(r){let t=r.cloneNode(!0),e=t.querySelectorAll("[id]"),i=r.nodeName.toLowerCase();t.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return i==="canvas"?ci(r,t):(i==="input"||i==="select"||i==="textarea")&&li(r,t),si("canvas",r,t,ci),si("input, textarea, select",r,t,li),t}function si(r,t,e,i){let o=t.querySelectorAll(r);if(o.length){let s=e.querySelectorAll(r);for(let m=0;m<o.length;m++)i(o[m],s[m])}}var Sn=0;function li(r,t){t.type!=="file"&&(t.value=r.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${Sn++}`)}function ci(r,t){let e=t.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}function kt(r){let t=r.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function yt(r,t,e){let{top:i,bottom:o,left:s,right:m}=r;return e>=i&&e<=o&&t>=s&&t<=m}function He(r,t,e){r.top+=t,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function di(r,t,e,i){let{top:o,right:s,bottom:m,left:x,width:y,height:C}=r,T=y*t,q=C*t;return i>o-q&&i<m+q&&e>x-T&&e<s+T}var Ze=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:kt(e)})})}handleScroll(t){let e=Ve(t),i=this.positions.get(e);if(!i)return null;let o=i.scrollPosition,s,m;if(e===this._document){let C=this.getViewportScrollPosition();s=C.top,m=C.left}else s=e.scrollTop,m=e.scrollLeft;let x=o.top-s,y=o.left-m;return this.positions.forEach((C,T)=>{C.clientRect&&e!==T&&e.contains(T)&&He(C.clientRect,x,y)}),o.top=s,o.left=m,{top:x,left:y}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function yi(r,t){let e=r.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(o=>i.appendChild(o)),i}function Et(r,t,e){for(let i in t)if(t.hasOwnProperty(i)){let o=t[i];o?r.setProperty(i,o,e?.has(i)?"important":""):r.removeProperty(i)}return r}function Le(r,t){let e=t?"":"none";Et(r.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function mi(r,t,e){Et(r.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Ye(r,t){return t&&t!="none"?r+" "+t:r}function pi(r,t){r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.transform=Ke(t.left,t.top)}function Ke(r,t){return`translate3d(${Math.round(r)}px, ${Math.round(t)}px, 0)`}function hi(r){let t=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*t}function Mn(r){let t=getComputedStyle(r),e=xt(t,"transition-property"),i=e.find(x=>x==="transform"||x==="all");if(!i)return 0;let o=e.indexOf(i),s=xt(t,"transition-duration"),m=xt(t,"transition-delay");return hi(s[o])+hi(m[o])}function xt(r,t){return r.getPropertyValue(t).split(",").map(i=>i.trim())}var kn=new Set(["position"]),wt=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,o,s,m,x,y,C,T){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=o,this._previewTemplate=s,this._previewClass=m,this._pickupPositionOnPage=x,this._initialTransform=y,this._zIndex=C,this._renderer=T}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),ui(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return Mn(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,o;if(i&&t){let s=t.matchSize?this._initialDomRect:null,m=t.viewContainer.createEmbeddedView(i,t.context);m.detectChanges(),o=yi(m,this._document),this._previewEmbeddedView=m,t.matchSize?pi(o,s):o.style.transform=Ke(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=bi(this._rootElement),pi(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return Et(o.style,{"pointer-events":"none",margin:ui(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},kn),Le(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>o.classList.add(s)):o.classList.add(e)),o}};function ui(r){return"showPopover"in r}var En={passive:!0},gi={passive:!1},Ln={passive:!1,capture:!0},Tn=800,_i=new Set(["position"]),Ct=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=lt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new L;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=ue.EMPTY;_pointerUpSubscription=ue.EMPTY;_scrollSubscription=ue.EMPTY;_resizeSubscription=ue.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Le(e,t)))}_disabled=!1;beforeStarted=new L;started=new L;released=new L;ended=new L;entered=new L;exited=new L;dropped=new L;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,o,s,m,x){this._config=e,this._document=i,this._ngZone=o,this._viewportRuler=s,this._dragDropRegistry=m,this._renderer=x,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Ze(i),m.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>we(i)),this._handles.forEach(i=>Le(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=we(t);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[he(this._renderer,e,"mousedown",this._pointerDown,gi),he(this._renderer,e,"touchstart",this._pointerDown,En),he(this._renderer,e,"dragstart",this._nativeDragStart,gi)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?we(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Le(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Le(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let o=Math.abs(e.x-this._pickupPositionOnPage.x),s=Math.abs(e.y-this._pickupPositionOnPage.y);if(o+s>=this._config.dragStartThreshold){let x=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),y=this._dropContainer;if(!x){this._endDragSequence(t);return}(!y||!y.isDragging()&&!y.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let o=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=i.x-o.x+this._passiveTransform.x,s.y=i.y-o.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Oe(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=he(this._renderer,e,"selectstart",Dn,Ln)}),i){let o=this._rootElement,s=o.parentNode,m=this._placeholder=this._createPlaceholderElement(),x=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(x,o),this._initialTransform=o.style.transform||"",this._preview=new wt(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,e)),mi(o,!1,_i),this._document.body.appendChild(s.replaceChild(m,o)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),o=Oe(e),s=!o&&e.button!==0,m=this._rootElement,x=Ve(e),y=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+Tn>Date.now(),C=o?ii(e):ti(e);if(x&&x.draggable&&e.type==="mousedown"&&e.preventDefault(),i||s||y||C)return;if(this._handles.length){let te=m.style;this._rootElementTapHighlight=te.webkitTapHighlightColor||"",te.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(te=>this._updateOnScroll(te)),this._boundaryElement&&(this._boundaryRect=kt(this._boundaryElement));let T=this._previewTemplate;this._pickupPositionInElement=T&&T.template&&!T.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let q=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:q.x,y:q.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){mi(this._rootElement,!0,_i),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),o=this._getPointerPositionOnPage(t),s=this._getDragDistance(o),m=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:s,dropPoint:o,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:m,distance:s,dropPoint:o,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,m,s,o,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:o}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,o),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let o=x=>{(!x||this._preview&&Ve(x)===this._preview.element&&x.propertyName==="transform")&&(m(),i(),clearTimeout(s))},s=setTimeout(o,e*1.5),m=this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=yi(this._placeholderRef,this._document)):i=bi(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let o=e===this._rootElement?null:e,s=o?o.getBoundingClientRect():t,m=Oe(i)?i.targetTouches[0]:i,x=this._getViewportScrollPosition(),y=m.pageX-s.left-x.left,C=m.pageY-s.top-x.top;return{x:s.left-t.left+y,y:s.top-t.top+C}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=Oe(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,o=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){let m=this._ownerSVGElement.getScreenCTM();if(m){let x=this._ownerSVGElement.createSVGPoint();return x.x=o,x.y=s,x.matrixTransform(m.inverse())}}return{x:o,y:s}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:o}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:m}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,x=this._boundaryRect,{width:y,height:C}=this._getPreviewRect(),T=x.top+m,q=x.bottom-(C-m),te=x.left+s,nt=x.right-(y-s);i=fi(i,te,nt),o=fi(o,T,q)}return{x:i,y:o}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,o=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,m=Math.abs(e-s.x),x=Math.abs(i-s.y);return m>this._config.pointerDirectionChangeThreshold&&(o.x=e>s.x?1:-1,s.x=e),x>this._config.pointerDirectionChangeThreshold&&(o.y=i>s.y?1:-1,s.y=i),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Le(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,o=Ke(t*i,e*i),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=Ye(o,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,o=Ke(t,e);this._preview.setTransform(Ye(o,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||i.width===0&&i.height===0)return;let s=o.left-i.left,m=i.right-o.right,x=o.top-i.top,y=i.bottom-o.bottom;o.width>i.width?(s>0&&(t+=s),m>0&&(t-=m)):t=0,o.height>i.height?(x>0&&(e+=x),y>0&&(e-=y)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:Oe(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=Ve(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&He(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=We(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return we(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function fi(r,t,e){return Math.max(t,Math.min(e,r))}function Oe(r){return r.type[0]==="t"}function Dn(r){r.preventDefault()}function wi(r,t,e){let i=vi(t,r.length-1),o=vi(e,r.length-1);if(i===o)return;let s=r[i],m=o<i?-1:1;for(let x=i;x!==o;x+=m)r[x]=r[x+m];r[o]=s}function vi(r,t){return Math.max(0,Math.min(t,r))}var Xe=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,o){let s=this._itemPositions,m=this._getItemIndexFromPointerPosition(t,e,i,o);if(m===-1&&s.length>0)return null;let x=this.orientation==="horizontal",y=s.findIndex(W=>W.drag===t),C=s[m],T=s[y].clientRect,q=C.clientRect,te=y>m?1:-1,nt=this._getItemOffsetPx(T,q,te),Li=this._getSiblingOffsetPx(y,s,te),Ti=s.slice();return wi(s,y,m),s.forEach((W,Di)=>{if(Ti[Di]===W)return;let Lt=W.drag===t,ot=Lt?nt:Li,Tt=Lt?t.getPlaceholderElement():W.drag.getRootElement();W.offset+=ot;let Dt=Math.round(W.offset*(1/W.drag.scale));x?(Tt.style.transform=Ye(`translate3d(${Dt}px, 0, 0)`,W.initialTransform),He(W.clientRect,0,ot)):(Tt.style.transform=Ye(`translate3d(0, ${Dt}px, 0)`,W.initialTransform),He(W.clientRect,ot,0))}),this._previousSwap.overlaps=yt(q,e,i),this._previousSwap.drag=C.drag,this._previousSwap.delta=x?o.x:o.y,{previousIndex:y,currentIndex:m}}enter(t,e,i,o){let s=o==null||o<0?this._getItemIndexFromPointerPosition(t,e,i):o,m=this._activeDraggables,x=m.indexOf(t),y=t.getPlaceholderElement(),C=m[s];if(C===t&&(C=m[s+1]),!C&&(s==null||s===-1||s<m.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(C=m[0]),x>-1&&m.splice(x,1),C&&!this._dragDropRegistry.isDragging(C)){let T=C.getRootElement();T.parentElement.insertBefore(y,T),m.splice(s,0,t)}else this._element.appendChild(y),m.push(t);y.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(o=>o.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{He(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:kt(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let o=this.orientation==="horizontal",s=o?e.left-t.left:e.top-t.top;return i===-1&&(s+=o?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){let o=this.orientation==="horizontal",s=e[t].clientRect,m=e[t+i*-1],x=s[o?"width":"height"]*i;if(m){let y=o?"left":"top",C=o?"right":"bottom";i===-1?x-=m.clientRect[y]-s[C]:x+=s[y]-m.clientRect[C]}return x}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,o=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let m=i[i.length-1].clientRect;return o?t>=m.right:e>=m.bottom}else{let m=i[0].clientRect;return o?t<=m.left:e<=m.top}}_getItemIndexFromPointerPosition(t,e,i,o){let s=this.orientation==="horizontal",m=this._itemPositions.findIndex(({drag:x,clientRect:y})=>{if(x===t)return!1;if(o){let C=s?o.x:o.y;if(x===this._previousSwap.drag&&this._previousSwap.overlaps&&C===this._previousSwap.delta)return!1}return s?e>=Math.floor(y.left)&&e<Math.floor(y.right):i>=Math.floor(y.top)&&i<Math.floor(y.bottom)});return m===-1||!this._sortPredicate(m,t)?-1:m}},St=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let o=e[i];this._relatedNodes.push([o,o.nextSibling])}this.withItems(t)}sort(t,e,i,o){let s=this._getItemIndexFromPointerPosition(t,e,i),m=this._previousSwap;if(s===-1||this._activeItems[s]===t)return null;let x=this._activeItems[s];if(m.drag===x&&m.overlaps&&m.deltaX===o.x&&m.deltaY===o.y)return null;let y=this.getItemIndex(t),C=t.getPlaceholderElement(),T=x.getRootElement();s>y?T.after(C):T.before(C),wi(this._activeItems,y,s);let q=this._getRootNode().elementFromPoint(e,i);return m.deltaX=o.x,m.deltaY=o.y,m.drag=x,m.overlaps=T===q||T.contains(q),{previousIndex:y,currentIndex:s}}enter(t,e,i,o){let s=o==null||o<0?this._getItemIndexFromPointerPosition(t,e,i):o;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,i));let m=this._activeItems[s],x=this._activeItems.indexOf(t);x>-1&&this._activeItems.splice(x,1),m&&!this._dragDropRegistry.isDragging(m)?(this._activeItems.splice(s,0,t),m.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[o,s]=this._relatedNodes[i];o.parentNode===t&&o.nextSibling!==s&&(s===null?t.appendChild(o):s.parentNode===t&&t.insertBefore(o,s))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let o=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),s=o?this._activeItems.findIndex(m=>{let x=m.getRootElement();return o===x||x.contains(o)}):-1;return s===-1||!this._sortPredicate(s,t)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=We(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,s=-1;for(let m=0;m<this._activeItems.length;m++){let x=this._activeItems[m];if(x!==t){let{x:y,y:C}=x.getRootElement().getBoundingClientRect(),T=Math.hypot(e-y,i-C);T<o&&(o=T,s=m)}}return s}},xi=.05,Ci=.05,Y=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(Y||{}),G=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(G||{}),Mt=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new L;entered=new L;exited=new L;dropped=new L;sorted=new L;receivingStarted=new L;receivingStopped=new L;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=ue.EMPTY;_verticalScrollDirection=Y.NONE;_horizontalScrollDirection=G.NONE;_scrollNode;_stopScrollTimers=new L;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,o,s){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=s;let m=this.element=we(t);this._document=i,this.withOrientation("vertical").withElementContainer(m),e.registerDropContainer(this),this._parentPositions=new Ze(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,o,s,m,x,y={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:o,isPointerOverContainer:s,distance:m,dropPoint:x,event:y})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>t.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof Xe&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new St(this._document,this._dragDropRegistry);else{let e=new Xe(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=we(this.element),i=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,o){if(this.sortingDisabled||!this._domRect||!di(this._domRect,xi,e,i))return;let s=this._sortStrategy.sort(t,e,i,o);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,o=Y.NONE,s=G.NONE;if(this._parentPositions.positions.forEach((m,x)=>{x===this._document||!m.clientRect||i||di(m.clientRect,xi,t,e)&&([o,s]=Pn(x,m.clientRect,this._direction,t,e),(o||s)&&(i=x))}),!o&&!s){let{width:m,height:x}=this._viewportRuler.getViewportSize(),y={width:m,height:x,top:0,right:m,bottom:x,left:0};o=Si(y,e),s=Mi(y,t),i=window}i&&(o!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=s,this._scrollNode=i,(o||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Pt(0,at).pipe(R(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Y.UP?t.scrollBy(0,-e):this._verticalScrollDirection===Y.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===G.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===G.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&yt(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(o=>o._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!yt(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let o=this._getShadowRoot().elementFromPoint(e,i);return o?o===this._container||this._container.contains(o):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=We(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function Si(r,t){let{top:e,bottom:i,height:o}=r,s=o*Ci;return t>=e-s&&t<=e+s?Y.UP:t>=i-s&&t<=i+s?Y.DOWN:Y.NONE}function Mi(r,t){let{left:e,right:i,width:o}=r,s=o*Ci;return t>=e-s&&t<=e+s?G.LEFT:t>=i-s&&t<=i+s?G.RIGHT:G.NONE}function Pn(r,t,e,i,o){let s=Si(t,o),m=Mi(t,i),x=Y.NONE,y=G.NONE;if(s){let C=r.scrollTop;s===Y.UP?C>0&&(x=Y.UP):r.scrollHeight-C>r.clientHeight&&(x=Y.DOWN)}if(m){let C=r.scrollLeft;e==="rtl"?m===G.RIGHT?C<0&&(y=G.RIGHT):r.scrollWidth+C>r.clientWidth&&(y=G.LEFT):m===G.LEFT?C>0&&(y=G.LEFT):r.scrollWidth-C>r.clientWidth&&(y=G.RIGHT)}return[x,y]}var Re={capture:!0},bt={passive:!1,capture:!0},In=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=O({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,o){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return r})(),Vn=(()=>{class r{_ngZone=V(De);_document=V(Ie);_styleLoader=V(ni);_renderer=V(Pe).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=lt([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new L;pointerUp=new L;scroll=new L;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=he(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,bt)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(In),this._activeDragInstances.update(o=>[...o,e]),this._activeDragInstances().length===1)){let o=i.type.startsWith("touch"),s=x=>this.pointerUp.next(x),m=[["scroll",x=>this.scroll.next(x),Re],["selectstart",this._preventDefaultWhileDragging,bt]];o?m.push(["touchend",s,Re],["touchcancel",s,Re]):m.push(["mouseup",s,Re]),o||m.push(["mousemove",x=>this.pointerMove.next(x),bt]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=m.map(([x,y,C])=>he(this._renderer,this._document,x,y,C))})}}stopDragging(e){this._activeDragInstances.update(i=>{let o=i.indexOf(e);return o>-1?(i.splice(o,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this.scroll];return e&&e!==this._document&&i.push(new rt(o=>this._ngZone.runOutsideAngular(()=>{let s=he(this._renderer,e,"scroll",m=>{this._activeDragInstances().length&&o.next(m)},Re);return()=>{s()}}))),It(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||r)};static \u0275prov=K({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),On={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Rn=(()=>{class r{_document=V(Ie);_ngZone=V(De);_viewportRuler=V(ri);_dragDropRegistry=V(Vn);_renderer=V(Pe).createRenderer(null,null);constructor(){}createDrag(e,i=On){return new Ct(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Mt(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=K({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ki=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=ne({type:r});static \u0275inj=ie({providers:[Rn],imports:[ai]})}return r})();function Hn(r,t){if(r&1){let e=M();n(0,"div",4)(1,"button",9),v("click",function(){_(e);let o=d();return f(o.moveSelectedToRoot())}),c(2),a(),n(3,"button",10),v("click",function(){_(e);let o=d();return f(o.deleteSelected())}),c(4),a(),n(5,"button",11),v("click",function(){_(e);let o=d();return f(o.clearSelection())}),c(6," Clear Selection "),a()()}if(r&2){let e=d();l(2),S(" Move to Root (",e.selectedNodes.size,") "),l(2),S(" Delete Selected (",e.selectedNodes.size,") ")}}function An(r,t){r&1&&(n(0,"div",12)(1,"div",13)(2,"div",14),u(),n(3,"svg",15),h(4,"circle",16)(5,"path",17),a()(),g(),n(6,"h3",18),c(7,"Loading Hierarchy"),a(),n(8,"p",19),c(9,"Please wait while we fetch the location hierarchy..."),a()()())}function Fn(r,t){if(r&1){let e=M();n(0,"div",20)(1,"div",21),u(),n(2,"svg",22),h(3,"path",23),a()(),g(),n(4,"h3",18),c(5,"Error Loading Hierarchy"),a(),n(6,"p",24),c(7),a(),n(8,"button",25),v("click",function(){_(e);let o=d();return f(o.loadHierarchy())}),c(9," Retry "),a()()}if(r&2){let e=d();l(7),w(e.error)}}function Nn(r,t){if(r&1&&(n(0,"span",49),c(1),a()),r&2){let e=d().$implicit;l(),J(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function jn(r,t){if(r&1&&(n(0,"span",49),c(1),a()),r&2){let e=d().$implicit;l(),J(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function zn(r,t){if(r&1){let e=M();n(0,"div",59),v("click",function(o){let s=_(e).$implicit,m=d(6);return f(m.toggleNodeSelection(s,o))})("dragover",function(o){_(e);let s=d(6);return f(s.onDragOver(o))})("drop",function(o){let s=_(e).$implicit,m=d(6);return f(m.onDropOnNode(o,s))}),n(1,"div",35)(2,"div",4)(3,"div",36),v("dragstart",function(o){let s=_(e).$implicit,m=d(6);return f(m.onDragStart(o,s))})("dragend",function(o){_(e);let s=d(6);return f(s.onDragEnd(o))}),u(),n(4,"svg",37),h(5,"path",38),a()(),g(),n(6,"div"),u(),n(7,"svg",39),h(8,"path",40),a()(),g(),n(9,"div",41)(10,"div",4)(11,"span",54),c(12),a(),n(13,"span",60),c(14),a()(),n(15,"div",44),c(16),a()()(),n(17,"span",61),c(18),a()()()}if(r&2){let e=t.$implicit,i=d(6);H("ring-2",e.selected)("ring-blue-500",e.selected)("bg-blue-50",e.selected),l(6),I("w-6 h-6 bg-"+i.getNodeIconColor(e)+"-100 rounded flex items-center justify-center"),l(),I("w-3 h-3 text-"+i.getNodeIconColor(e)+"-600"),l(),ge("d",i.getNodeIcon(e)),l(4),w(e.name),l(2),S(" ",(e.type==null?null:e.type.name)||"Floor"," "),l(2),S("",e.asset_count," assets"),l(2),S(" ",i.getLevelText(e)," ")}}function Bn(r,t){if(r&1&&(n(0,"div",57),b(1,zn,19,15,"div",58),a()),r&2){let e=d().$implicit;l(),p("ngForOf",e.children)}}function Gn(r,t){if(r&1){let e=M();n(0,"div",52),v("click",function(o){let s=_(e).$implicit,m=d(4);return f(m.toggleNodeSelection(s,o))})("dragover",function(o){_(e);let s=d(4);return f(s.onDragOver(o))})("drop",function(o){let s=_(e).$implicit,m=d(4);return f(m.onDropOnNode(o,s))}),n(1,"div",35)(2,"div",4)(3,"div",53),v("dragstart",function(o){let s=_(e).$implicit,m=d(4);return f(m.onDragStart(o,s))})("dragend",function(o){_(e);let s=d(4);return f(s.onDragEnd(o))}),u(),n(4,"svg",37),h(5,"path",38),a()(),g(),n(6,"div"),u(),n(7,"svg",39),h(8,"path",40),a()(),g(),n(9,"div",41)(10,"div",4)(11,"span",54),c(12),a(),n(13,"span",55),c(14),a()(),n(15,"div",44),c(16),b(17,jn,2,2,"span",45),a()()(),n(18,"span",47),c(19),a()(),b(20,Bn,2,1,"div",56),a()}if(r&2){let e=t.$implicit,i=d(4);H("ring-2",e.selected)("ring-blue-500",e.selected)("bg-blue-50",e.selected),l(6),I("w-8 h-8 bg-"+i.getNodeIconColor(e)+"-100 rounded flex items-center justify-center"),l(),I("w-4 h-4 text-"+i.getNodeIconColor(e)+"-600"),l(),ge("d",i.getNodeIcon(e)),l(4),w(e.name),l(2),S(" ",(e.type==null?null:e.type.name)||"Residential Building"," "),l(2),S(" ",e.asset_count," assets "),l(),p("ngIf",e.children.length>0),l(2),S(" ",i.getLevelText(e)," "),l(),p("ngIf",e.children.length>0)}}function $n(r,t){if(r&1&&(n(0,"div",50),b(1,Gn,21,17,"div",51),a()),r&2){let e=d().$implicit;l(),p("ngForOf",e.children)}}function Un(r,t){if(r&1){let e=M();n(0,"div",33)(1,"div",34),v("click",function(o){let s=_(e).$implicit,m=d(2);return f(m.toggleNodeSelection(s,o))})("dragover",function(o){_(e);let s=d(2);return f(s.onDragOver(o))})("drop",function(o){let s=_(e).$implicit,m=d(2);return f(m.onDropOnNode(o,s))}),n(2,"div",35)(3,"div",4)(4,"div",36),v("dragstart",function(o){let s=_(e).$implicit,m=d(2);return f(m.onDragStart(o,s))})("dragend",function(o){_(e);let s=d(2);return f(s.onDragEnd(o))}),u(),n(5,"svg",37),h(6,"path",38),a()(),g(),n(7,"div"),u(),n(8,"svg",39),h(9,"path",40),a()(),g(),n(10,"div",41)(11,"div",4)(12,"span",42),c(13),a(),n(14,"span",43),c(15),a()(),n(16,"div",44),c(17),b(18,Nn,2,2,"span",45),a()()(),n(19,"div",46)(20,"span",47),c(21),a()()(),b(22,$n,2,1,"div",48),a()()}if(r&2){let e=t.$implicit,i=d(2);l(),H("ring-2",e.selected)("ring-blue-500",e.selected)("bg-blue-50",e.selected),l(6),I("w-10 h-10 bg-"+i.getNodeIconColor(e)+"-100 rounded-lg flex items-center justify-center"),l(),I("w-5 h-5 text-"+i.getNodeIconColor(e)+"-600"),l(),ge("d",i.getNodeIcon(e)),l(4),w(e.name),l(2),S(" ",(e.type==null?null:e.type.name)||"Community"," "),l(2),S(" ",e.asset_count," assets "),l(),p("ngIf",e.children.length>0),l(3),S(" ",i.getLevelText(e)," "),l(),p("ngIf",e.children.length>0)}}function qn(r,t){r&1&&(n(0,"div",20)(1,"div",62),u(),n(2,"svg",63),h(3,"path",64),a()(),g(),n(4,"h3",18),c(5,"No hierarchy data"),a(),n(6,"p",19),c(7,"Create some locations to manage the hierarchy."),a()())}function Wn(r,t){if(r&1){let e=M();n(0,"div",26)(1,"div",27),v("dragover",function(o){_(e);let s=d();return f(s.onDragOver(o))})("drop",function(o){_(e);let s=d();return f(s.onDropToRoot(o))}),n(2,"div",28),u(),n(3,"svg",29),h(4,"path",30),a(),g(),n(5,"span",31),c(6,"Root Level - Drop here to make location top-level"),a()()(),n(7,"div",26),b(8,Un,23,17,"div",32),a(),b(9,qn,8,0,"div",6),a()}if(r&2){let e=d();l(),H("border-blue-500",e.dropZoneActive)("bg-blue-50",e.dropZoneActive),l(7),p("ngForOf",e.hierarchyData),l(),p("ngIf",e.hierarchyData.length===0)}}var Je=class r{constructor(t){this.locationService=t}destroy$=new L;hierarchyData=[];selectedNodes=new Set;loading=!1;error="";draggedNode=null;dropZoneActive=!1;showDeleteConfirmationModal=!1;selectedLocation=null;ngOnInit(){this.loadHierarchy()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadHierarchy(){this.loading=!0,this.error="",this.locationService.getHierarchy().pipe(R(this.destroy$)).subscribe({next:t=>{t.success?this.hierarchyData=this.transformHierarchyData(t.data.hierarchy):this.error="Failed to load hierarchy data",this.loading=!1},error:t=>{this.error=t.error?.message||"An error occurred while loading hierarchy",this.loading=!1}})}transformHierarchyData(t){return t.map(e=>({id:e.id,name:e.name,type:e.type,hierarchy_level:e.hierarchy_level||0,asset_count:e.asset_count||0,children:e.children?this.transformHierarchyData(e.children):[],parent_id:e.parent_id,selected:!1,expanded:!0}))}toggleNodeSelection(t,e){e.stopPropagation(),e.ctrlKey||e.metaKey?this.selectedNodes.has(t.id)?(this.selectedNodes.delete(t.id),t.selected=!1):(this.selectedNodes.add(t.id),t.selected=!0):(this.clearSelection(),this.selectedNodes.add(t.id),t.selected=!0)}clearSelection(){this.selectedNodes.clear(),this.updateSelectionState(this.hierarchyData,!1)}updateSelectionState(t,e){t.forEach(i=>{i.selected=e,i.children.length>0&&this.updateSelectionState(i.children,e)})}onDragStart(t,e){this.draggedNode=e,this.dropZoneActive=!0,t.dataTransfer.effectAllowed="move"}onDragEnd(t){this.draggedNode=null,this.dropZoneActive=!1}onDragOver(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}onDropToRoot(t){t.preventDefault(),this.draggedNode&&this.moveToRoot(this.draggedNode),this.dropZoneActive=!1,this.draggedNode=null}onDropOnNode(t,e){t.preventDefault(),t.stopPropagation(),this.draggedNode&&this.draggedNode.id!==e.id&&this.moveToParent(this.draggedNode,e),this.dropZoneActive=!1,this.draggedNode=null}moveToRoot(t){this.removeNodeFromHierarchy(t),t.hierarchy_level=0,t.parent_id=void 0,this.hierarchyData.push(t),this.updateLocationHierarchy(t.id,null)}moveToParent(t,e){this.removeNodeFromHierarchy(t),t.hierarchy_level=e.hierarchy_level+1,t.parent_id=e.id,e.children.push(t),e.expanded=!0,this.updateLocationHierarchy(t.id,e.id)}removeNodeFromHierarchy(t){let e=this.hierarchyData.findIndex(i=>i.id===t.id);if(e!==-1){this.hierarchyData.splice(e,1);return}this.removeFromChildren(this.hierarchyData,t)}removeFromChildren(t,e){for(let i of t){let o=i.children.findIndex(s=>s.id===e.id);if(o!==-1)return i.children.splice(o,1),!0;if(this.removeFromChildren(i.children,e))return!0}return!1}updateLocationHierarchy(t,e){this.locationService.moveLocations([t],e).pipe(R(this.destroy$)).subscribe({next:i=>{i.success?console.log("Location moved successfully"):(console.error("Failed to move location:",i.message),this.loadHierarchy())},error:i=>{console.error("Error moving location:",i),this.loadHierarchy()}})}moveSelectedToRoot(){if(this.selectedNodes.size===0)return;let t=Array.from(this.selectedNodes);this.locationService.moveLocations(t,null).pipe(R(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadHierarchy(),this.clearSelection())},error:e=>{console.error("Error moving locations:",e)}})}deleteSelected(){this.selectedNodes.size!==0&&this.selectedNodes.forEach(t=>{this.loadLocation(t)})}loadLocation(t){this.locationService.getLocation(t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success&&(this.selectedLocation=e.data.location,this.showDeleteConfirmationModal=!0)}})}getNodeIcon(t){return t.hierarchy_level===0||t.hierarchy_level===1?"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4":"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}getNodeIconColor(t){return t.hierarchy_level===0||t.hierarchy_level===1?"blue":"green"}getLevelText(t){return t.hierarchy_level===0?"Level 0":"Parent"}closeDeleteConfirmationModal(){this.showDeleteConfirmationModal=!1,this.selectedLocation=null}onLocationDeleted(){this.loadHierarchy(),this.closeDeleteConfirmationModal()}static \u0275fac=function(e){return new(e||r)(E(N))};static \u0275cmp=O({type:r,selectors:[["app-hierarchy-management"]],decls:12,vars:6,consts:[[1,"hierarchy-management"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","space-y-4",4,"ngIf"],[3,"closeModal","locationDeleted","isOpen","location"],[1,"px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors","text-sm","font-medium",3,"click"],[1,"px-4","py-2","text-red-600","hover:bg-red-50","rounded-lg","transition-colors","text-sm","font-medium",3,"click"],[1,"px-4","py-2","text-gray-600","hover:bg-gray-100","rounded-lg","transition-colors","text-sm","font-medium",3,"click"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"space-y-4"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-8","text-center","transition-all",3,"dragover","drop"],[1,"flex","items-center","justify-center","space-x-2","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"font-medium"],["class","hierarchy-card",4,"ngFor","ngForOf"],[1,"hierarchy-card"],[1,"bg-white","border","border-gray-200","rounded-lg","p-4","transition-all","hover:shadow-sm",3,"click","dragover","drop"],[1,"flex","items-center","justify-between"],["draggable","true",1,"drag-handle","cursor-move","p-1","hover:bg-gray-100","rounded",3,"dragstart","dragend"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 8h16M4 16h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-gray-100","text-gray-700"],[1,"text-sm","text-gray-500","mt-1"],["class","ml-4",4,"ngIf"],[1,"flex","items-center","space-x-2"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-blue-100","text-blue-800"],["class","mt-4 ml-7 space-y-3",4,"ngIf"],[1,"ml-4"],[1,"mt-4","ml-7","space-y-3"],["class","bg-gray-50 rounded-lg p-3 transition-all hover:bg-gray-100",3,"ring-2","ring-blue-500","bg-blue-50","click","dragover","drop",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-3","transition-all","hover:bg-gray-100",3,"click","dragover","drop"],["draggable","true",1,"drag-handle","cursor-move","p-1","hover:bg-gray-200","rounded",3,"dragstart","dragend"],[1,"font-medium","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-blue-100","text-blue-700"],["class","mt-3 ml-7 space-y-2",4,"ngIf"],[1,"mt-3","ml-7","space-y-2"],["class","bg-white rounded border border-gray-100 p-3 transition-all hover:shadow-sm",3,"ring-2","ring-blue-500","bg-blue-50","click","dragover","drop",4,"ngFor","ngForOf"],[1,"bg-white","rounded","border","border-gray-100","p-3","transition-all","hover:shadow-sm",3,"click","dragover","drop"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-green-100","text-green-700"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-green-100","text-green-800"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),c(4,"Hierarchy Management"),a(),n(5,"p",3),c(6," Drag and drop locations to reorganize your hierarchy. Hold Ctrl/Cmd and click to select multiple locations for bulk operations. "),a()(),b(7,Hn,7,2,"div",4),a(),b(8,An,10,0,"div",5)(9,Fn,10,1,"div",6)(10,Wn,10,6,"div",7),a(),n(11,"app-delete-confirmation-modal",8),v("closeModal",function(){return i.closeDeleteConfirmationModal()})("locationDeleted",function(){return i.onLocationDeleted()}),a()),e&2&&(l(7),Se(i.selectedNodes.size>0?7:-1),l(),p("ngIf",i.loading),l(),p("ngIf",i.error&&!i.loading),l(),p("ngIf",!i.loading&&!i.error),l(),p("isOpen",i.showDeleteConfirmationModal)("location",i.selectedLocation))},dependencies:[F,Q,A,ki,pe],styles:['.hierarchy-management[_ngcontent-%COMP%]   .hierarchy-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .hierarchy-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{opacity:.6;transition:all .2s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:hover{opacity:1;background-color:#f3f4f6}.hierarchy-management[_ngcontent-%COMP%]   .dragging[_ngcontent-%COMP%]{opacity:.5;transform:rotate(2deg)}.hierarchy-management[_ngcontent-%COMP%]   .drop-zone-active[_ngcontent-%COMP%]{border-color:#3b82f6!important;background-color:#eff6ff!important}.hierarchy-management[_ngcontent-%COMP%]   .drop-zone-active[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border:2px dashed #3b82f6;border-radius:.5rem;pointer-events:none}.hierarchy-management[_ngcontent-%COMP%]   .drop-target[_ngcontent-%COMP%]{background-color:#eff6ff;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f633}.hierarchy-management[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#eff6ff!important;border-color:#3b82f6!important;box-shadow:0 0 0 2px #3b82f633}.hierarchy-management[_ngcontent-%COMP%]   .level-0[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.hierarchy-management[_ngcontent-%COMP%]   .level-1[_ngcontent-%COMP%]{border-left:4px solid #10b981;margin-left:1rem}.hierarchy-management[_ngcontent-%COMP%]   .level-2[_ngcontent-%COMP%]{border-left:4px solid #f59e0b;margin-left:2rem}.hierarchy-management[_ngcontent-%COMP%]   .node-card[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .node-card[_ngcontent-%COMP%]:hover{background-color:#f8fafc;border-color:#e2e8f0;box-shadow:0 1px 3px #0000001a}.hierarchy-management[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px}.hierarchy-management[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.hierarchy-management[_ngcontent-%COMP%]   .multi-select-info[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background:#1f2937;color:#fff;padding:.75rem 1rem;border-radius:.5rem;font-size:.875rem;z-index:50;box-shadow:0 10px 15px -3px #0000001a}.hierarchy-management[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.hierarchy-management[_ngcontent-%COMP%]   .hierarchy-card[_ngcontent-%COMP%]{margin:.5rem}.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{display:none}.hierarchy-management[_ngcontent-%COMP%]   .level-1[_ngcontent-%COMP%]{margin-left:.5rem}.hierarchy-management[_ngcontent-%COMP%]   .level-2[_ngcontent-%COMP%]{margin-left:1rem}}@media print{.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%], .hierarchy-management[_ngcontent-%COMP%]   .multi-select-info[_ngcontent-%COMP%]{display:none}}.hierarchy-management[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;background:#fff;border:1px solid #e5e7eb}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.4;background:#f3f4f6;border:2px dashed #d1d5db}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}']})};function Qn(r,t){if(r&1&&(n(0,"div",13),h(1,"img",31),a()),r&2){let e=d(2);l(),p("src",e.location==null?null:e.location.quick_chart_qr_url,z)}}function Zn(r,t){r&1&&h(0,"span",14)}function Yn(r,t){if(r&1){let e=M();n(0,"div",1)(1,"div",2),v("clickOutside",function(){_(e);let o=d();return f(o.closeModalHandler())}),n(2,"div",3)(3,"div",4)(4,"h2",5),c(5),a()()(),n(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),u(),n(10,"svg",10),h(11,"path",11),a()(),c(12," Location QR Code "),a(),g(),n(13,"div",12),b(14,Qn,2,1,"div",13)(15,Zn,1,0,"span",14),a(),n(16,"div",15)(17,"div",16),c(18),a(),n(19,"div",17)(20,"div",18),c(21),a(),c(22),a(),n(23,"div",19),u(),n(24,"svg",20),h(25,"path",21)(26,"circle",22),a(),g(),n(27,"span",23),c(28),a()(),n(29,"div",24)(30,"button",25),v("click",function(){_(e);let o=d();return f(o.regenerateQr())}),u(),n(31,"svg",10),h(32,"path",11),a(),c(33," Regenerate "),a(),g(),n(34,"a",26),v("click",function(){_(e);let o=d();return f(o.downloadQr())}),u(),n(35,"svg",27),h(36,"path",28),a(),c(37," Download "),a(),g(),n(38,"button",25),v("click",function(){_(e);let o=d();return f(o.printLabel())}),u(),n(39,"svg",27),h(40,"path",29),a(),c(41," Print Label "),a()(),g(),n(42,"div",30),c(43,"Scan this QR code to quickly access location details and view assets "),a()()()()()()}if(r&2){let e=d();p("@backdropAnimation",void 0),l(),p("@modalAnimation",void 0),l(4),S("Generate QR Code for ",e.location==null?null:e.location.name,""),l(9),Se(e.regenLoading?15:14),l(4),w(e.location==null?null:e.location.name),l(3),S(" ",e.location==null||e.location.type==null?null:e.location.type.name," "),l(),S(" ",e.location==null?null:e.location.hierarchy_level," "),l(6),w((e.location==null?null:e.location.address)||"N/A"),l(6),p("href",e.location==null?null:e.location.quick_chart_qr_url,z)("download",e.location==null?null:e.location.quick_chart_qr_url)}}var et=class r{constructor(t){this.locationService=t}isOpen=!1;location=null;closeModal=new j;loading=!1;regenLoading=!1;errorMessage;closeModalHandler(){this.loading||(this.isOpen=!1,this.closeModal.emit(),this.resetModal())}resetModal(){this.errorMessage="",this.loading=!1}regenerateQr(){this.regenLoading=!0,setTimeout(()=>{this.regenLoading=!1},500)}downloadQr(){}getLocationTypeById(t){}printLabel(){if(this.location?.quick_chart_qr_url){let t=window.open("","_blank");t&&(t.document.write(`
          <html>
         <head>
           <title>Print Label</title>
           <style>
             body {
               font-family: Arial, sans-serif;
               text-align: center;
               margin: 20px;
             }
             img {
               max-width: 100%;
               height: auto;
               margin: 10px 0;
             }
             .info {
               margin-top: 15px;
               font-size: 14px;

             }
             .info strong {
               display: inline-block;
              margin: 0 auto;
               width: 120px;
             }
           </style>
         </head>
         <body>
           <h1>${this.location.name}</h1>
           <img src="${this.location.quick_chart_qr_url}" alt="QR Code for ${this.location.name}">
           <p>Scan this QR code to access location details.</p>

           <div class="info text-center">
             <p><strong>Branch:</strong> ${this.location.name}</p>
             <p><strong>Location ID:</strong> ${this.location.id}</p>
             <p><strong>Type:</strong> ${this.location.type.name}</p>
             <p><strong>Address:</strong> ${this.location.address}</p>
           </div>

           <script>
             window.onload = function() {
               setTimeout(() => {
                 window.print();
                 window.close();
               }, 200);
             };
           <\/script>
         </body>
       </html>
       `),t.document.close())}else console.error("QR code URL is not available for printing.")}static \u0275fac=function(e){return new(e||r)(E(N))};static \u0275cmp=O({type:r,selectors:[["app-qr-view"]],inputs:{isOpen:"isOpen",location:"location"},outputs:{closeModal:"closeModal"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-xl","w-full",3,"clickOutside"],[1,"flex","items-center","justify-between","p-6","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-6","pt-0"],[1,"p-6","border","border-gray-200","rounded-2xl"],[1,"flex","items-center","gap-2","font-semibold","mb-6","tracking-tight","text-lg"],[1,"p-2","text-gray-400","bg-gray-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"flex","justify-center"],[1,"bg-white","p-4","rounded-lg","border","border-gray-200","shadow-sm"],[1,"border-t","border-blue-400","animate-spin","border-opacity-25","ml-2","w-12","h-12","rounded-full","inline-block"],[1,"space-y-2","mt-4","text-center"],[1,"font-medium","text-sm","text-foreground"],[1,"flex","items-center","justify-center","gap-2"],[1,"inline-flex","items-center","rounded-full","border","border-gray-200","px-2.5","py-0.5","font-semibold","transition-colors","text-xs"],[1,"flex","items-center","justify-center","gap-1","text-xs","text-gray-400"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"size-3"],["d","M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"],["cx","12","cy","10","r","3"],[1,"truncate","max-w-[200px]"],[1,"flex","gap-2","justify-center","my-4"],[1,"flex","gap-2","items-center","text-sm","font-medium","border","border-gray-200","rounded-lg","py-2","px-3","cursor-pointer","hover:bg-gray-100","transition-colors",3,"click"],["target","_blank",1,"flex","gap-2","items-center","text-sm","font-medium","border","border-gray-200","rounded-lg","py-2","px-3","cursor-pointer","hover:bg-gray-100","transition-colors",3,"click","href","download"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-4"],["stroke-linecap","round","stroke-linejoin","round","d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"],["stroke-linecap","round","stroke-linejoin","round","d","M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"],[1,"text-xs","text-gray-400","text-center","pt-2","border-t","border-gray-200"],["alt","qr code",1,"w-40","h-40",3,"src"]],template:function(e,i){e&1&&b(0,Yn,44,10,"div",0),e&2&&p("ngIf",i.isOpen)},dependencies:[A,ei],encapsulation:2,data:{animation:[B("backdropAnimation",[P(":enter",[k({opacity:0}),D("150ms ease-out",k({opacity:1}))]),P(":leave",[D("150ms ease-in",k({opacity:0}))])]),B("modalAnimation",[P(":enter",[k({opacity:0,transform:"scale(0.7) translateY(-50px)"}),D("200ms ease-out",k({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[D("150ms ease-in",k({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Xn(r,t){r&1&&(u(),n(0,"svg",10),h(1,"path",26),a())}function Jn(r,t){r&1&&h(0,"div",27)}function eo(r,t){if(r&1&&(n(0,"option",55),c(1),a()),r&2){let e=t.$implicit;p("value",e.id),l(),w(e.name)}}function to(r,t){if(r&1&&(n(0,"option",55),c(1),a()),r&2){let e=t.$implicit;p("value",e.value),l(),w(e.label)}}function io(r,t){if(r&1){let e=M();n(0,"div",39)(1,"form",40),v("ngSubmit",function(){_(e);let o=d(2);return f(o.applyFilters())}),n(2,"div",41)(3,"div")(4,"label",42),c(5,"Location Type"),a(),n(6,"select",43)(7,"option",44),c(8,"All Types"),a(),b(9,eo,2,2,"option",45),a()(),n(10,"div")(11,"label",42),c(12,"Hierarchy Level"),a(),n(13,"select",46),b(14,to,2,2,"option",45),a()(),n(15,"div")(16,"label",42),c(17,"Asset Count"),a(),n(18,"select",47)(19,"option",44),c(20,"Any Count"),a(),n(21,"option",48),c(22,"No Assets"),a(),n(23,"option",49),c(24,"1-10 Assets"),a(),n(25,"option",50),c(26,"11-50 Assets"),a(),n(27,"option",51),c(28,"51+ Assets"),a()()()(),n(29,"div",52)(30,"button",53),v("click",function(){_(e);let o=d(2);return f(o.clearFilters())}),c(31," Clear Filters "),a(),n(32,"button",54),c(33," Apply Filters "),a()()()()}if(r&2){let e=d(2);l(),p("formGroup",e.filtersForm),l(8),p("ngForOf",e.locationTypes),l(5),p("ngForOf",e.hierarchyLevels)}}function no(r,t){if(r&1){let e=M();n(0,"div",28)(1,"div",2)(2,"form",29)(3,"div",30),u(),n(4,"svg",31),h(5,"path",32),a(),g(),h(6,"input",33),a()(),n(7,"div",30)(8,"button",34),v("click",function(){_(e);let o=d();return f(o.toggleFilters())}),u(),n(9,"svg",10),h(10,"path",35),a(),g(),n(11,"span"),c(12,"Filters"),a(),u(),n(13,"svg",36),h(14,"path",37),a()(),b(15,io,34,3,"div",38),a()()()}if(r&2){let e=d();l(2),p("formGroup",e.searchForm),l(11),H("rotate-180",e.showFilters),l(2),p("ngIf",e.showFilters)}}function oo(r,t){if(r&1){let e=M();n(0,"div",56)(1,"div",57),c(2),a(),n(3,"div",58)(4,"button",59),v("click",function(){_(e);let o=d();return f(o.currentListView="grid")}),u(),n(5,"svg",10),h(6,"path",60),a()(),g(),n(7,"button",59),v("click",function(){_(e);let o=d();return f(o.currentListView="list")}),u(),n(8,"svg",10),h(9,"path",61),a()()()()}if(r&2){let e=d();l(2),S(" Showing ",e.locations.length," locations "),l(2),I(e.currentListView==="grid"?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-300"),l(3),I(e.currentListView==="list"?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-300")}}function ro(r,t){r&1&&(n(0,"div",66)(1,"div",67)(2,"div",68),u(),n(3,"svg",69),h(4,"circle",70)(5,"path",71),a()(),g(),n(6,"h3",72),c(7,"Loading Locations"),a(),n(8,"p",73),c(9,"Please wait while we fetch your locations..."),a()()())}function ao(r,t){if(r&1&&(n(0,"span"),c(1),a()),r&2){let e=d().$implicit;l(),S(" (",e.children==null?null:e.children.length,")")}}function so(r,t){if(r&1){let e=M();n(0,"div",76)(1,"div",77)(2,"div",78)(3,"div",79)(4,"div",80),u(),n(5,"svg",81),h(6,"path",82),a()()(),g(),n(7,"div")(8,"h3",83),c(9),a(),n(10,"div",84)(11,"span",85),c(12),a(),n(13,"span",57),c(14),a()()()()(),n(15,"div",86)(16,"div",87),u(),n(17,"svg",88),h(18,"path",89)(19,"path",90),a(),g(),n(20,"span"),c(21),a()(),n(22,"div",57),c(23),a()(),n(24,"div",91),u(),n(25,"svg",10),h(26,"path",92),a(),g(),n(27,"span",93),c(28),a()(),n(29,"div",94)(30,"button",95),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.viewLocation(o))}),u(),n(31,"svg",10),h(32,"path",96),a(),g(),n(33,"span"),c(34,"View Details"),b(35,ao,2,1,"span",18),a()(),n(36,"div",58)(37,"button",97),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.openQRCodeModal(o))}),u(),n(38,"svg",10),h(39,"path",98),a()(),g(),n(40,"button",99),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.editLocation(o))}),u(),n(41,"svg",10),h(42,"path",100),a()(),g(),n(43,"button",101),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.deleteLocation(o))}),u(),n(44,"svg",10),h(45,"path",102),a()()()()()}if(r&2){let e=t.$implicit,i=d(3);l(9),w(e.name),l(3),S(" ",i.getHierarchyLevelBadge(e.hierarchy_level)," "),l(2),w((e.type==null?null:e.type.name)||"Unknown Type"),l(7),w(e.address||e.name),l(2),S(" ",e.description||e.name," "),l(5),w((e.children==null?null:e.children.length)||0),l(7),p("ngIf",e.children==null?null:e.children.length),l(5),p("disabled",i.loading),l(3),p("disabled",i.loading)}}function lo(r,t){if(r&1&&(n(0,"div",74),b(1,so,46,9,"div",75),a()),r&2){let e=d(2);l(),p("ngForOf",e.locations)}}function co(r,t){if(r&1&&(n(0,"div",73),c(1),a()),r&2){let e=d().$implicit;l(),w(e.description)}}function mo(r,t){if(r&1){let e=M();n(0,"div",111)(1,"div",112)(2,"div",106)(3,"div",5)(4,"div",113),h(5,"img",114),a(),n(6,"div")(7,"div",115),c(8),a(),b(9,co,2,1,"div",116),a()()(),n(10,"div",107)(11,"span",57),c(12),a()(),n(13,"div",107)(14,"span",57),c(15),a()(),n(16,"div",108)(17,"span"),c(18),a()(),n(19,"div",108)(20,"div",117),u(),n(21,"svg",118),h(22,"path",119),a(),g(),n(23,"span",57),c(24),a()()(),n(25,"div",108)(26,"div",117),u(),n(27,"svg",118),h(28,"path",92),a(),g(),n(29,"span",57),c(30),a()()(),n(31,"div",107)(32,"div",58)(33,"button",120),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.viewLocation(o))}),u(),n(34,"svg",10),h(35,"path",96),a()(),g(),n(36,"button",121),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.editLocation(o))}),u(),n(37,"svg",10),h(38,"path",100),a()(),g(),n(39,"button",122),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.deleteLocation(o))}),u(),n(40,"svg",10),h(41,"path",102),a()()()()()()}if(r&2){let e=t.$implicit,i=d(3);l(5),p("src",e.type.icon,z)("alt",e.type.name),l(3),S("",e.name," "),l(),p("ngIf",e.description),l(3),w(e.type.name),l(3),S(" ",(e.parent==null?null:e.parent.name)||"Root Level"," "),l(2),I("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+i.getHierarchyLevelColor(e.hierarchy_level)+"-100 text-"+i.getHierarchyLevelColor(e.hierarchy_level)+"-800"),l(),S(" ",i.getHierarchyLevelBadge(e.hierarchy_level)," "),l(6),w((e.asset_summary==null?null:e.asset_summary.asset_count)||0),l(6),w((e.children==null?null:e.children.length)||0),l(6),p("disabled",i.loading),l(3),p("disabled",i.loading)}}function po(r,t){if(r&1&&(n(0,"div",103)(1,"div",104)(2,"div",105)(3,"div",106),c(4,"Location"),a(),n(5,"div",107),c(6,"Type"),a(),n(7,"div",107),c(8,"Parent"),a(),n(9,"div",108),c(10,"Level"),a(),n(11,"div",108),c(12,"Assets"),a(),n(13,"div",108),c(14,"Children"),a(),n(15,"div",107),c(16,"Actions"),a()()(),n(17,"div",109),b(18,mo,42,13,"div",110),a()()),r&2){let e=d(2);l(18),p("ngForOf",e.locations)}}function ho(r,t){if(r&1){let e=M();n(0,"div",123),u(),n(1,"svg",124),h(2,"path",89)(3,"path",90),a(),g(),n(4,"h3",125),c(5,"No locations found"),a(),n(6,"p",126),c(7,"Get started by creating your first location."),a(),n(8,"div",127)(9,"button",128),v("click",function(){_(e);let o=d(2);return f(o.addLocation())}),u(),n(10,"svg",129),h(11,"path",11),a(),c(12," Add Location "),a()()()}}function uo(r,t){if(r&1&&(n(0,"div"),b(1,ro,10,0,"div",62)(2,lo,2,1,"div",63)(3,po,19,1,"div",64)(4,ho,13,0,"div",65),a()),r&2){let e=d();l(),p("ngIf",e.loading),l(),p("ngIf",!e.loading&&e.currentListView==="grid"),l(),p("ngIf",!e.loading&&e.currentListView==="list"),l(),p("ngIf",!e.loading&&e.locations.length===0)}}function go(r,t){r&1&&(n(0,"div",66)(1,"div",67)(2,"div",68),u(),n(3,"svg",69),h(4,"circle",70)(5,"path",71),a()(),g(),n(6,"h3",72),c(7,"Loading Hierarchy"),a(),n(8,"p",73),c(9,"Please wait while we fetch the location hierarchy..."),a()()())}function _o(r,t){if(r&1){let e=M();n(0,"button",148),v("click",function(){_(e);let o=d().$implicit,s=d(3);return f(s.toggleNode(o.id))}),u(),n(1,"svg",149),h(2,"path",96),a()()}if(r&2){let e=d().$implicit,i=d(3);l(),H("rotate-90",i.isNodeExpanded(e.id))}}function fo(r,t){r&1&&(n(0,"div",150),h(1,"div",151),a())}function vo(r,t){if(r&1&&(n(0,"span",152),c(1),a()),r&2){let e=d().$implicit;l(),J(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function xo(r,t){if(r&1){let e=M();n(0,"button",148),v("click",function(){_(e);let o=d().$implicit,s=d(5);return f(s.toggleNode(o.id))}),u(),n(1,"svg",149),h(2,"path",96),a()()}if(r&2){let e=d().$implicit,i=d(5);l(),H("rotate-90",i.isNodeExpanded(e.id))}}function bo(r,t){r&1&&(n(0,"div",150),h(1,"div",151),a())}function yo(r,t){if(r&1&&(n(0,"span",152),c(1),a()),r&2){let e=d().$implicit;l(),J(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function wo(r,t){if(r&1&&(n(0,"div",163)(1,"div",150),h(2,"div",151),a(),n(3,"div",164),u(),n(4,"svg",165),h(5,"path",166),a()(),g(),n(6,"div",142)(7,"div",5)(8,"span",158),c(9),a(),n(10,"span",167),c(11),a()(),n(12,"div",145),c(13),a()()()),r&2){let e=t.$implicit;l(9),w(e.name),l(2),S(" ",(e.type==null?null:e.type.name)||"Floor"," "),l(2),S("",e.asset_count||0," assets")}}function Co(r,t){if(r&1&&(n(0,"div",161),b(1,wo,14,3,"div",162),a()),r&2){let e=d().$implicit;l(),p("ngForOf",e.children)}}function So(r,t){if(r&1&&(ct(0),n(1,"div",154)(2,"div",5),b(3,xo,3,2,"button",136)(4,bo,2,0,"div",137),n(5,"div",155),u(),n(6,"svg",156),h(7,"path",157),a()(),g(),n(8,"div",142)(9,"div",5)(10,"span",158),c(11),a(),n(12,"span",159),c(13),a()(),n(14,"div",145),c(15),b(16,yo,2,2,"span",146),a()()()(),b(17,Co,2,1,"div",160),dt()),r&2){let e=t.$implicit,i=d(5);l(3),p("ngIf",e.children&&e.children.length>0),l(),p("ngIf",!e.children||e.children.length===0),l(7),w(e.name),l(2),S(" ",(e.type==null?null:e.type.name)||"Residential Building"," "),l(2),S(" ",e.asset_count||0," assets "),l(),p("ngIf",e.children&&e.children.length>0),l(),p("ngIf",i.isNodeExpanded(e.id)&&e.children&&e.children.length>0)}}function Mo(r,t){if(r&1&&(n(0,"div",153),b(1,So,18,7,"ng-container",134),a()),r&2){let e=d().$implicit;l(),p("ngForOf",e.children)}}function ko(r,t){if(r&1&&(ct(0),n(1,"div",135)(2,"div",94)(3,"div",5),b(4,_o,3,2,"button",136)(5,fo,2,0,"div",137),n(6,"div",138),u(),n(7,"svg",139),h(8,"path",140)(9,"path",141),a()(),g(),n(10,"div",142)(11,"div",5)(12,"span",143),c(13),a(),n(14,"span",144),c(15),a()(),n(16,"div",145),c(17),b(18,vo,2,2,"span",146),a()()()(),b(19,Mo,2,1,"div",147),a(),dt()),r&2){let e=t.$implicit,i=d(3);l(4),p("ngIf",e.children&&e.children.length>0),l(),p("ngIf",!e.children||e.children.length===0),l(8),w(e.name),l(2),S(" ",(e.type==null?null:e.type.name)||"Community"," "),l(2),S(" ",e.asset_count||0," assets "),l(),p("ngIf",e.children&&e.children.length>0),l(),p("ngIf",i.isNodeExpanded(e.id)&&e.children&&e.children.length>0)}}function Eo(r,t){r&1&&(n(0,"div",123),u(),n(1,"svg",124),h(2,"path",92),a(),g(),n(3,"h3",125),c(4,"No hierarchy data"),a(),n(5,"p",126),c(6,"Create some locations to see the hierarchy tree."),a()())}function Lo(r,t){if(r&1&&(n(0,"div",133),b(1,ko,20,7,"ng-container",134)(2,Eo,7,0,"div",65),a()),r&2){let e=d(2);l(),p("ngForOf",e.hierarchyData),l(),p("ngIf",e.hierarchyData.length===0)}}function To(r,t){if(r&1){let e=M();n(0,"div")(1,"div",56)(2,"h2",130),c(3,"Location Hierarchy"),a(),n(4,"div",5)(5,"button",131),v("click",function(){_(e);let o=d();return f(o.expandAll())}),c(6," Expand All "),a(),n(7,"button",131),v("click",function(){_(e);let o=d();return f(o.collapseAll())}),c(8," Collapse All "),a()()(),b(9,go,10,0,"div",62)(10,Lo,3,2,"div",132),a()}if(r&2){let e=d();l(9),p("ngIf",e.hierarchyLoading),l(),p("ngIf",!e.hierarchyLoading)}}function Do(r,t){r&1&&(n(0,"div",168),h(1,"app-hierarchy-management"),a())}function Po(r,t){r&1&&(n(0,"div")(1,"div",56)(2,"h2",130),c(3,"Location Analytics"),a(),n(4,"div",5)(5,"button",169),c(6," Export Report "),a()()(),n(7,"div",123)(8,"div",170),u(),n(9,"svg",171),h(10,"path",172),a()(),g(),n(11,"h3",72),c(12,"Analytics Coming Soon"),a(),n(13,"p",73),c(14,"Detailed analytics and insights about your locations will be available here."),a()()())}function Io(r,t){if(r&1){let e=M();n(0,"button",191),v("click",function(){_(e);let o=d(3);return f(o.goToPage(1))}),c(1," 1 "),a()}}function Vo(r,t){r&1&&(n(0,"span",192),u(),n(1,"svg",193),h(2,"circle",194)(3,"circle",195)(4,"circle",196),a()())}function Oo(r,t){if(r&1){let e=M();n(0,"button",197),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.goToPage(o))}),c(1),a()}if(r&2){let e=t.$implicit,i=d(3);I(i.pagination.current_page===e?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-gray-500 border-gray-300 hover:bg-gray-50"),p("title","Page "+e),l(),S(" ",e," ")}}function Ro(r,t){r&1&&(n(0,"span",192),u(),n(1,"svg",193),h(2,"circle",194)(3,"circle",195)(4,"circle",196),a()())}function Ho(r,t){if(r&1){let e=M();n(0,"button",191),v("click",function(){_(e);let o=d(3);return f(o.goToPage(o.pagination.last_page))}),c(1),a()}if(r&2){let e=d(3);l(),S(" ",e.pagination.last_page," ")}}function Ao(r,t){if(r&1){let e=M();n(0,"nav",184)(1,"button",185),v("click",function(){_(e);let o=d(2);return f(o.goToPage(o.pagination.current_page-1))}),u(),n(2,"svg",10),h(3,"path",186),a()(),g(),n(4,"div",117),b(5,Io,2,0,"button",187)(6,Vo,5,0,"span",188)(7,Oo,2,4,"button",189)(8,Ro,5,0,"span",188)(9,Ho,2,1,"button",187),a(),n(10,"button",190),v("click",function(){_(e);let o=d(2);return f(o.goToPage(o.pagination.current_page+1))}),u(),n(11,"svg",10),h(12,"path",96),a()()()}if(r&2){let e=d(2);l(),p("disabled",e.pagination.current_page===1),l(4),p("ngIf",e.getVisiblePages()[0]>1),l(),p("ngIf",e.getVisiblePages()[0]>2),l(),p("ngForOf",e.getVisiblePages()),l(),p("ngIf",e.getVisiblePages()[e.getVisiblePages().length-1]<e.pagination.last_page-1),l(),p("ngIf",e.getVisiblePages()[e.getVisiblePages().length-1]<e.pagination.last_page),l(),p("disabled",e.pagination.current_page===e.pagination.last_page)}}function Fo(r,t){if(r&1){let e=M();n(0,"div",198)(1,"div",174)(2,"span"),c(3,"Go to page:"),a(),n(4,"input",199),ht("ngModelChange",function(o){_(e);let s=d(2);return pt(s.jumpToPage,o)||(s.jumpToPage=o),f(o)}),v("keyup.enter",function(){_(e);let o=d(2);return f(o.goToPage(o.jumpToPage))}),a(),n(5,"button",200),v("click",function(){_(e);let o=d(2);return f(o.goToPage(o.jumpToPage))}),c(6," Go "),a()()()}if(r&2){let e=d(2);l(4),Nt("placeholder",e.pagination.current_page),p("min",1)("max",e.pagination.last_page),mt("ngModel",e.jumpToPage),l(),p("disabled",!e.jumpToPage||e.jumpToPage<1||e.jumpToPage>e.pagination.last_page)}}function No(r,t){if(r&1){let e=M();n(0,"div",173)(1,"div",94)(2,"div",174)(3,"span"),c(4,"Show"),a(),n(5,"select",175),ht("ngModelChange",function(o){_(e);let s=d();return pt(s.pagination.per_page,o)||(s.pagination.per_page=o),f(o)}),v("change",function(o){_(e);let s=d();return f(s.changePerPage(o))}),n(6,"option",176),c(7,"10"),a(),n(8,"option",177),c(9,"15"),a(),n(10,"option",178),c(11,"25"),a(),n(12,"option",179),c(13,"50"),a(),n(14,"option",180),c(15,"100"),a()(),n(16,"span"),c(17,"entries"),a()(),b(18,Ao,13,7,"nav",181),n(19,"div",182),c(20),a()(),b(21,Fo,7,5,"div",183),a()}if(r&2){let e=d();l(5),mt("ngModel",e.pagination.per_page),l(13),p("ngIf",e.pagination.last_page>1),l(2),jt(" Showing ",e.pagination.from," - ",e.pagination.to," of ",e.pagination.total," entries "),l(),p("ngIf",e.pagination.last_page>10)}}var Te=class r{constructor(t,e,i){this.fb=t;this.locationService=e;this.router=i;this.searchForm=this.fb.group({search:[""]}),this.filtersForm=this.fb.group({type_id:[""],parent_id:[""],hierarchy_level:["0"],asset_count:[""],sort_by:["created"],sort_direction:["desc"]})}destroy$=new L;locations=[];locationTypes=[];hierarchyData=[];loading=!1;hierarchyLoading=!1;showFilters=!1;currentView="grid";currentListView="grid";expandedNodes=new Set;showAddLocationModal=!1;showEditLocationModal=!1;showDeleteConfirmationModal=!1;showBulkCreateModal=!1;selectedLocation=null;pagination={current_page:1,last_page:1,per_page:15,total:0,from:0,to:0};searchForm;filtersForm;jumpToPage;sortOptions=[{value:"created",label:"Created"},{value:"name",label:"Name"},{value:"type",label:"Type"},{value:"updated",label:"Updated"}];hierarchyLevels=[{value:"",label:"All Levels"},{value:"0",label:"Level 0 (Root)"},{value:"1",label:"Level 1"},{value:"2",label:"Level 2"},{value:"3",label:"Level 3"},{value:"true",label:"Hierarchy Level"}];showQrViewModal=!1;qrData;ngOnInit(){this.initializeSearchSubscription(),this.loadLocationTypes(),this.loadLocations(),this.loadHierarchy()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeSearchSubscription(){this.searchForm.get("search")?.valueChanges.pipe(Ot(300),st(),R(this.destroy$)).subscribe(()=>{this.loadLocations()})}loadLocationTypes(){this.locationService.getLocationTypes().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&(this.locationTypes=t.data.types)},error:t=>{console.error("Error loading location types:",t)}})}loadLocations(t=1){this.loading=!0;let e=this.searchForm.get("search")?.value,i=this.filtersForm.value,o={page:t,per_page:this.pagination.per_page,hierarchy_level:i.hierarchy_level||"0",sort_by:i.sort_by||"created",sort_direction:i.sort_direction||"desc"};e&&e.trim()!==""&&(o.search=e),i.type_id&&i.type_id!==""&&(o.type_id=i.type_id),i.parent_id&&i.parent_id!==""&&(o.parent_id=i.parent_id),i.asset_count&&i.asset_count!==""&&(o.asset_count=i.asset_count),this.locationService.getLocations(o).pipe(R(this.destroy$)).subscribe({next:s=>{s.success&&(this.locations=s.data.locations,this.pagination=s.data.pagination),this.loading=!1},error:s=>{console.error("Error loading locations:",s),this.loading=!1}})}loadHierarchy(){this.hierarchyLoading=!0,this.locationService.getHierarchy().pipe(R(this.destroy$)).subscribe({next:t=>{t.success&&(this.hierarchyData=t.data.hierarchy),this.hierarchyLoading=!1},error:t=>{console.error("Error loading hierarchy:",t),this.hierarchyLoading=!1}})}setView(t){this.currentView=t,t==="grid"?this.clearFilters():t==="tree"&&this.hierarchyData.length===0&&this.loadHierarchy()}setListView(t){this.currentListView=t}toggleFilters(){this.showFilters=!this.showFilters}applyFilters(){this.loadLocations(1),this.showFilters=!1}clearFilters(){this.filtersForm.reset({type_id:"",parent_id:"",hierarchy_level:"0",asset_count:"",sort_by:"created",sort_direction:"desc"}),this.loadLocations(1)}goToPage(t){t>=1&&t<=this.pagination.last_page&&this.loadLocations(t)}getVisiblePages(){let t=this.pagination.current_page,e=this.pagination.last_page,i=[],o=Math.max(1,t-2),s=Math.min(e,t+2);for(let m=o;m<=s;m++)i.push(m);return i}changePerPage(t){this.pagination.per_page=parseInt(t.target.value),this.loadLocations(1)}getHierarchyLevelBadge(t){return`L${t}`}getHierarchyLevelColor(t){return["blue","green","yellow","purple"][t]||"gray"}editLocation(t){this.selectedLocation=t,this.showEditLocationModal=!0}deleteLocation(t){this.selectedLocation=t,this.showDeleteConfirmationModal=!0}viewLocation(t){this.router.navigate(["/locations",t.id])}addLocation(){this.showAddLocationModal=!0}closeAddLocationModal(){this.showAddLocationModal=!1}closeEditLocationModal(){this.showEditLocationModal=!1,this.selectedLocation=null}closeDeleteConfirmationModal(){this.showDeleteConfirmationModal=!1,this.selectedLocation=null}openBulkCreateModal(){this.showBulkCreateModal=!0}closeBulkCreateModal(){this.showBulkCreateModal=!1}onLocationCreated(t){this.loadLocations(this.pagination.current_page),this.showAddLocationModal=!1}onLocationUpdated(t){let e=this.locations.findIndex(i=>i.id===t.id);e!==-1&&(this.locations[e]=t),this.showEditLocationModal=!1,this.selectedLocation=null}onLocationDeleted(t){this.locations=this.locations.filter(e=>e.id!==t.id),this.pagination.total=Math.max(0,this.pagination.total-1),this.pagination.to=Math.max(0,this.pagination.to-1),this.locations.length===0&&this.pagination.current_page>1&&this.loadLocations(this.pagination.current_page-1),this.showDeleteConfirmationModal=!1,this.selectedLocation=null}onLocationsCreated(t){this.loadLocations(this.pagination.current_page),this.loadHierarchy(),this.showBulkCreateModal=!1}toggleNode(t){this.expandedNodes.has(t)?this.expandedNodes.delete(t):this.expandedNodes.add(t)}isNodeExpanded(t){return this.expandedNodes.has(t)}expandAll(){this.hierarchyData.forEach(t=>{this.addAllNodeIds(t,this.expandedNodes)})}collapseAll(){this.expandedNodes.clear()}addAllNodeIds(t,e){e.add(t.id),t.children&&t.children.length>0&&t.children.forEach(i=>{this.addAllNodeIds(i,e)})}getLocationTypeColor(t){return{Community:"gray","Residential Building":"blue",Floor:"green",Garden:"orange","Office Building":"blue"}[t]||"gray"}exportQR(){this.loading=!0,this.locationService.exportQRCodes().subscribe({next:t=>{let e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`locations-qr-codes-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(e),this.loading=!1},error:t=>{console.error("Failed to export QR codes:",t),this.loading=!1}})}onDocumentClick(t){let e=t.target,i=e.closest(".filter-button"),o=e.closest(".filter-dropdown"),s=e.closest("select"),m=e.tagName==="OPTION";!i&&!o&&!s&&!m&&this.showFilters&&(this.showFilters=!1)}openQRCodeModal(t){this.qrData=t,this.showQrViewModal=!0}closeQrViewModal(){this.showQrViewModal=!1,this.qrData=null}static \u0275fac=function(e){return new(e||r)(E(de),E(N),E(ze))};static \u0275cmp=O({type:r,selectors:[["app-locations"]],hostBindings:function(e,i){e&1&&v("click",function(s){return i.onDocumentClick(s)},!1,At)},decls:46,vars:27,consts:[[1,"bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-6","py-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin",4,"ngIf"],[1,"flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"flex","items-center","space-x-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","font-medium","hover:bg-blue-700","transition-colors",3,"click"],[1,"flex","items-center","space-x-1","bg-gray-100","rounded-lg","p-1"],[1,"flex-1","px-4","py-2","rounded-md","text-sm","font-medium","transition-all",3,"click"],["class","bg-white border-b border-gray-200 px-6 py-4",4,"ngIf"],[1,"px-6","py-6"],["class","flex items-center justify-between mb-6",4,"ngIf"],[4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200 p-6",4,"ngIf"],["class","mt-8 pt-6 border-t border-gray-200",4,"ngIf"],[3,"closeModal","locationCreated","isOpen"],[3,"closeModal","locationUpdated","isOpen","location"],[3,"closeModal","locationDeleted","isOpen","location"],[3,"closeModal","locationsCreated","isOpen"],[3,"closeModal","isOpen","location"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"w-4","h-4","border-2","border-gray-300","border-t-blue-600","rounded-full","animate-spin"],[1,"bg-white","border-b","border-gray-200","px-6","py-4"],[1,"flex-1","max-w-md",3,"formGroup"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","formControlName","search","placeholder","Search locations...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"filter-button","relative","flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","filter-dropdown absolute text-start top-full right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 py-4 z-50",4,"ngIf"],[1,"filter-dropdown","absolute","text-start","top-full","right-0","mt-2","w-80","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-4","z-50"],[1,"p-4",3,"ngSubmit","formGroup"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["formControlName","type_id",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","hierarchy_level",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","asset_count",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value","0"],["value","1-10"],["value","11-50"],["value","51+"],[1,"flex","items-center","justify-between","pt-4","border-t","border-gray-100","mt-4"],["type","button",1,"px-4","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","cursor-pointer",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","cursor-pointer"],[3,"value"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","space-x-2"],[1,"px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 10h16M4 14h16M4 18h16"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","mb-6"],["class","relative bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-blue-300 hover:-translate-y-1 transition-all duration-300 cursor-pointer group",4,"ngFor","ngForOf"],[1,"relative","bg-white","rounded-xl","p-6","shadow-sm","border","border-gray-200","hover:shadow-lg","hover:border-blue-300","hover:-translate-y-1","transition-all","duration-300","cursor-pointer","group"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-start","space-x-3"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","transition-colors","duration-300"],[1,""],["_ngcontent-ng-c40972065","","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","text-blue-600","w-5"],["_ngcontent-ng-c40972065","","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"text-lg","font-bold","text-gray-900","group-hover:text-blue-700","transition-colors","duration-300"],[1,"flex","items-center","space-x-2","mt-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"space-y-2","mb-6"],[1,"flex","items-center","text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"absolute","top-4","right-4","flex","items-center","space-x-1","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-sm","font-medium"],[1,"flex","items-center","justify-between"],[1,"bg-blue-600","text-white","px-6","py-2","rounded-lg","text-sm","font-medium","hover:bg-blue-700","transition-all","duration-300","flex","items-center","space-x-2","hover:shadow-lg","transform","hover:scale-105",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"p-2","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"p-2","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md","cursor-pointer",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-2","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md","cursor-pointer",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-3"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 hover:shadow-sm transition-all duration-200 cursor-pointer group",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","hover:shadow-sm","transition-all","duration-200","cursor-pointer","group"],[1,"grid","grid-cols-12","gap-4","items-center"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","transition-colors","duration-200"],[1,"w-6","h-6",3,"src","alt"],[1,"font-medium","text-gray-900","group-hover:text-blue-700","transition-colors","duration-200"],["class","text-sm text-gray-500",4,"ngIf"],[1,"flex","items-center","space-x-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all","duration-200","hover:scale-110","cursor-pointer",3,"click"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all","duration-200","hover:scale-110","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],[1,"p-1","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded","transition-all","duration-200","hover:scale-110","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],[1,"text-2xl","font-bold","text-gray-900"],[1,"px-4","py-2","text-sm","font-medium","text-gray-600","hover:text-gray-800","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["class","space-y-1",4,"ngIf"],[1,"space-y-1"],[4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","border","border-gray-200","p-4"],["class","w-4 h-4 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors cursor-pointer",3,"click",4,"ngIf"],["class","w-4 h-4 flex items-center justify-center",4,"ngIf"],[1,"w-8","h-8","bg-blue-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 21l4-4 4 4"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-gray-100","text-gray-700"],[1,"text-sm","text-gray-500","mt-1"],["class","ml-4",4,"ngIf"],["class","mt-4 ml-7 space-y-3",4,"ngIf"],[1,"w-4","h-4","flex","items-center","justify-center","text-gray-400","hover:text-gray-600","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","transition-transform"],[1,"w-4","h-4","flex","items-center","justify-center"],[1,"w-1","h-1","bg-gray-300","rounded-full"],[1,"ml-4"],[1,"mt-4","ml-7","space-y-3"],[1,"flex","items-center","justify-between","py-2","px-3","bg-gray-50","rounded-lg"],[1,"w-6","h-6","bg-blue-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"font-medium","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-blue-100","text-blue-700"],["class","ml-7 space-y-2",4,"ngIf"],[1,"ml-7","space-y-2"],["class","flex items-center space-x-3 py-2 px-3 bg-white rounded border border-gray-100",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3","py-2","px-3","bg-white","rounded","border","border-gray-100"],[1,"w-6","h-6","bg-green-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-green-100","text-green-700"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","p-6"],[1,"px-4","py-2","text-gray-600","hover:text-gray-800","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer","hidden"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"flex","items-center","space-x-2","text-sm","text-gray-600"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white",3,"ngModelChange","change","ngModel"],["value","10"],["value","15"],["value","25"],["value","50"],["value","100"],["class","flex items-center space-x-1","aria-label","Pagination",4,"ngIf"],[1,"text-sm","text-gray-700"],["class","flex items-center justify-center mt-4",4,"ngIf"],["aria-label","Pagination",1,"flex","items-center","space-x-1"],["title","Previous page",1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["class","flex items-center justify-center w-10 h-10 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],["class","flex items-center justify-center w-10 h-10 text-gray-400",4,"ngIf"],["class","flex items-center justify-center w-10 h-10 text-sm font-medium border rounded-lg transition-colors",3,"class","title","click",4,"ngFor","ngForOf"],["title","Next page",1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","text-gray-400"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["cx","3","cy","10","r","1.5"],["cx","10","cy","10","r","1.5"],["cx","17","cy","10","r","1.5"],[1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","border","rounded-lg","transition-colors",3,"click","title"],[1,"flex","items-center","justify-center","mt-4"],["type","number",1,"w-16","px-2","py-1","border","border-gray-300","rounded","text-center","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keyup.enter","min","max","ngModel","placeholder"],[1,"px-3","py-1","bg-blue-600","text-white","rounded","text-sm","hover:bg-blue-700","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),c(5,"Facilities & Locations"),a(),n(6,"p",4),c(7,"Organize and monitor your facilities with hierarchical location management"),a()(),n(8,"div",5)(9,"button",6),v("click",function(){return i.exportQR()}),b(10,Xn,2,0,"svg",7)(11,Jn,1,0,"div",8),n(12,"span"),c(13),a()(),n(14,"button",9),v("click",function(){return i.openBulkCreateModal()}),u(),n(15,"svg",10),h(16,"path",11),a(),g(),n(17,"span"),c(18,"Bulk"),a()(),n(19,"button",12),v("click",function(){return i.addLocation()}),u(),n(20,"svg",10),h(21,"path",11),a(),g(),n(22,"span"),c(23,"Add Location"),a()()()(),n(24,"div",13)(25,"button",14),v("click",function(){return i.setView("grid")}),c(26," Grid "),a(),n(27,"button",14),v("click",function(){return i.setView("tree")}),c(28," Tree "),a(),n(29,"button",14),v("click",function(){return i.setView("analytics")}),c(30," Analytics "),a(),n(31,"button",14),v("click",function(){return i.setView("mgmt")}),c(32," Mgmt "),a()()(),b(33,no,16,4,"div",15),n(34,"div",16),b(35,oo,10,5,"div",17)(36,uo,5,4,"div",18)(37,To,11,2,"div",18)(38,Do,2,0,"div",19)(39,Po,15,0,"div",18)(40,No,22,6,"div",20),a(),n(41,"app-add-location-modal",21),v("closeModal",function(){return i.closeAddLocationModal()})("locationCreated",function(s){return i.onLocationCreated(s)}),a(),n(42,"app-edit-location-modal",22),v("closeModal",function(){return i.closeEditLocationModal()})("locationUpdated",function(s){return i.onLocationUpdated(s)}),a(),n(43,"app-delete-confirmation-modal",23),v("closeModal",function(){return i.closeDeleteConfirmationModal()})("locationDeleted",function(s){return i.onLocationDeleted(s)}),a(),n(44,"app-bulk-create-modal",24),v("closeModal",function(){return i.closeBulkCreateModal()})("locationsCreated",function(s){return i.onLocationsCreated(s)}),a(),n(45,"app-qr-view",25),v("closeModal",function(){return i.closeQrViewModal()}),a()()),e&2&&(l(9),p("disabled",i.loading),l(),p("ngIf",!i.loading),l(),p("ngIf",i.loading),l(2),w(i.loading?"Exporting...":"Export QR"),l(12),I(i.currentView==="grid"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(2),I(i.currentView==="tree"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(2),I(i.currentView==="analytics"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(2),I(i.currentView==="mgmt"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(2),p("ngIf",i.currentView==="grid"),l(2),p("ngIf",i.currentView==="grid"),l(),p("ngIf",i.currentView==="grid"),l(),p("ngIf",i.currentView==="tree"),l(),p("ngIf",i.currentView==="mgmt"),l(),p("ngIf",i.currentView==="analytics"),l(),p("ngIf",i.currentView==="grid"&&!i.loading&&i.locations.length>0),l(),p("isOpen",i.showAddLocationModal),l(),p("isOpen",i.showEditLocationModal)("location",i.selectedLocation),l(),p("isOpen",i.showDeleteConfirmationModal)("location",i.selectedLocation),l(),p("isOpen",i.showBulkCreateModal),l(),p("isOpen",i.showQrViewModal)("location",i.qrData))},dependencies:[F,Q,A,ee,se,Ge,$e,oe,Qt,Be,re,ae,Xt,Kt,le,ce,Ue,Wt,xe,Me,Ee,pe,qe,Je,et],styles:[".location-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.filter-button[_ngcontent-%COMP%]{width:100%;padding:0 1rem;text-align:left;border:2px solid #e5e7eb;border-radius:12px;background:#fff;color:#374151;font-size:.875rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:space-between;min-height:56px}.filter-button[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f9fafb;transform:translateY(-1px);box-shadow:0 4px 6px -1px #0000001a}.filter-button[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px #2563eb1a}.filter-button.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eff6ff;box-shadow:0 0 0 4px #2563eb1a}.filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{color:#9ca3af;font-style:italic}.filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%], .filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]   .priority-indicator[_ngcontent-%COMP%], .filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]   .category-indicator[_ngcontent-%COMP%], .filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]   .asset-indicator[_ngcontent-%COMP%], .filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]   .location-indicator[_ngcontent-%COMP%]{width:2rem;height:2rem;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]   .selected-text[_ngcontent-%COMP%]{color:#111827;font-weight:500}.filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .chevron-icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;color:#9ca3af;transition:transform .3s ease;flex-shrink:0}.filter-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   .chevron-icon.active[_ngcontent-%COMP%]{transform:rotate(180deg)}.hierarchy-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;padding:.25rem .5rem;border-radius:9999px}.location-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;border-radius:.5rem;font-size:1.25rem}.filter-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:1px solid #e2e8f0}.search-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.search-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 2px 4px #3b82f633}.table-row[_ngcontent-%COMP%]{transition:background-color .15s ease-in-out}.table-row[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-grid[_ngcontent-%COMP%], .filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.table-header[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%], .table-row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}}"]})};var jo=r=>["/locations",r];function zo(r,t){if(r&1&&(n(0,"li")(1,"div",14),u(),n(2,"svg",21),h(3,"path",22),a(),g(),n(4,"a",28),c(5),a()()()),r&2){let e=t.$implicit;l(4),p("routerLink",zt(2,jo,e.id)),l(),S(" ",e.name," ")}}function Bo(r,t){if(r&1&&(n(0,"span",29),c(1),a()),r&2){let e=d(2);l(),J(" \u2022 ",e.ancestors.length," parent location",e.ancestors.length!==1?"s":""," ")}}function Go(r,t){if(r&1&&(n(0,"div",11)(1,"nav",12)(2,"ol",13)(3,"li")(4,"div",14)(5,"a",15),u(),n(6,"svg",16),h(7,"path",17)(8,"path",18),a(),g(),n(9,"span",19),c(10,"Locations"),a()()()(),b(11,zo,6,4,"li",20),n(12,"li")(13,"div",14),u(),n(14,"svg",21),h(15,"path",22),a(),g(),n(16,"span",23),c(17),a()()()()(),n(18,"div",24)(19,"span",25),c(20),a(),n(21,"span",26),c(22),a(),b(23,Bo,2,2,"span",27),a()()),r&2){let e=d();l(11),p("ngForOf",e.ancestors),l(6),w(e.location.name),l(3),S(" Level ",e.location.hierarchy_level," "),l(2),w((e.location.type==null?null:e.location.type.name)||"Unknown Type"),l(),p("ngIf",e.ancestors.length>0)}}function $o(r,t){r&1&&(n(0,"div",30)(1,"div",31)(2,"div",32),u(),n(3,"svg",33),h(4,"circle",34)(5,"path",35),a()(),g(),n(6,"h3",36),c(7,"Loading Location"),a(),n(8,"p",37),c(9,"Please wait while we fetch the location details..."),a()()())}function Uo(r,t){if(r&1){let e=M();n(0,"div",30)(1,"div",31)(2,"div",38),u(),n(3,"svg",39),h(4,"path",40),a()(),g(),n(5,"h3",36),c(6,"Error Loading Location"),a(),n(7,"p",41),c(8),a(),n(9,"button",42),v("click",function(){_(e);let o=d();return f(o.goBack())}),c(10," Back to Locations "),a()()()}if(r&2){let e=d();l(8),w(e.error)}}function qo(r,t){r&1&&(n(0,"div",94)(1,"div",116),u(),n(2,"svg",117),h(3,"circle",34)(4,"path",35),a()(),g(),n(5,"h3",36),c(6,"Loading Sub-locations"),a(),n(7,"p",37),c(8,"Please wait..."),a()())}function Wo(r,t){if(r&1){let e=M();n(0,"div",127),v("click",function(){let o=_(e).$implicit,s=d(3);return f(s.viewSubLocation(o))}),n(1,"div",128)(2,"div",49)(3,"div",129),u(),n(4,"svg",130),h(5,"path",70),a()(),g(),n(6,"div")(7,"h4",131),c(8),a(),n(9,"div",132)(10,"span"),c(11),a()(),n(12,"div",133),c(13),a()()(),n(14,"div",134)(15,"button",135),v("click",function(o){let s=_(e).$implicit;return d(3).editSubLocation(s),f(o.stopPropagation())}),u(),n(16,"svg",16),h(17,"path",51),a()(),g(),n(18,"button",136),v("click",function(o){return _(e),f(o.stopPropagation())}),u(),n(19,"svg",16),h(20,"path",137),a()()()(),g(),n(21,"div",138)(22,"div",3)(23,"span",83),c(24,"Assets: "),n(25,"span",139),c(26),a()()(),n(27,"div",3)(28,"span",83),c(29,"Status: "),n(30,"span",140),c(31,"Active"),a()()()()()}if(r&2){let e=t.$implicit;l(8),w(e.name),l(3),w(e.type.name),l(2),w(e.description||e.name),l(13),w((e.asset_summary==null?null:e.asset_summary.asset_count)||0)}}function Qo(r,t){if(r&1&&(n(0,"div",141)(1,"div",14)(2,"div",142),u(),n(3,"svg",143),h(4,"path",144),a()()(),g(),n(5,"div",145),u(),n(6,"svg",146),h(7,"path",70),a()(),g(),n(8,"span",147),c(9),a()()),r&2){let e=t.$implicit;l(9),w(e.name)}}function Zo(r,t){if(r&1&&(n(0,"div",81),b(1,Wo,32,4,"div",118),n(2,"div",119)(3,"h3",120),c(4,"Hierarchy View"),a(),n(5,"div",121)(6,"div",49)(7,"div",122),u(),n(8,"svg",123),h(9,"path",47),a()(),g(),n(10,"div")(11,"h4",124),c(12),a()()()(),n(13,"div",125),b(14,Qo,10,1,"div",126),a()()()),r&2){let e=d(2);l(),p("ngForOf",e.subLocations),l(11),w(e.location.name),l(2),p("ngForOf",e.subLocations)}}function Yo(r,t){if(r&1){let e=M();n(0,"div",94)(1,"div",95),u(),n(2,"svg",96),h(3,"path",70),a()(),g(),n(4,"h3",36),c(5,"No Sub-locations"),a(),n(6,"p",97),c(7,"Create sub-locations to organize your space more effectively."),a(),n(8,"button",148),v("click",function(){_(e);let o=d(2);return f(o.addSubLocation())}),u(),n(9,"svg",16),h(10,"path",52),a(),g(),n(11,"span"),c(12,"Add First Sub-location"),a()()()}}function Ko(r,t){if(r&1&&(n(0,"div",149)(1,"div"),u(),n(2,"svg",150),h(3,"path",151),a()(),g(),n(4,"div",152)(5,"h4",139),c(6),a(),n(7,"p",153),c(8),a(),n(9,"p",154),c(10),a()()()),r&2){let e=t.$implicit,i=d(2);l(),I("w-8 h-8 bg-"+i.getActivityColor(e.type)+"-100 rounded-lg flex items-center justify-center"),l(),I("w-4 h-4 text-"+i.getActivityColor(e.type)+"-600"),l(),ge("d",i.getActivityIcon(e.type)),l(3),w(e.title),l(2),w(e.description),l(2),w(e.time)}}function Xo(r,t){if(r&1){let e=M();n(0,"img",155),v("error",function(o){_(e);let s=d(2);return f(s.onQRCodeError(o))}),a()}if(r&2){let e=d(2);p("src",e.location.quick_chart_qr_url,z)("alt","QR Code for "+e.location.name)}}function Jo(r,t){r&1&&(n(0,"div",156),u(),n(1,"svg",157),h(2,"path",105),a()())}function er(r,t){if(r&1){let e=M();n(0,"div",43)(1,"div",44)(2,"div",2)(3,"div",3)(4,"div",45),u(),n(5,"svg",46),h(6,"path",47),a()(),g(),n(7,"h1",48),c(8),a()(),n(9,"div",49)(10,"button",50),v("click",function(){_(e);let o=d();return f(o.editLocation())}),u(),n(11,"svg",16),h(12,"path",51),a(),g(),n(13,"span"),c(14,"Edit"),a()(),n(15,"button",50),v("click",function(){_(e);let o=d();return f(o.addAsset())}),u(),n(16,"svg",16),h(17,"path",52),a(),g(),n(18,"span"),c(19,"Add Asset"),a()(),n(20,"button",53),v("click",function(){_(e);let o=d();return f(o.deleteLocation())}),u(),n(21,"svg",16),h(22,"path",54),a(),g(),n(23,"span"),c(24,"Delete"),a()()()()(),n(25,"div",55)(26,"div",56)(27,"div",57)(28,"h3",58),c(29,"Total Assets"),a(),n(30,"div",59),u(),n(31,"svg",60),h(32,"path",61),a()()(),g(),n(33,"div",62),c(34),a()(),n(35,"div",56)(36,"div",57)(37,"h3",63),c(38,"Health Score"),a(),n(39,"div",64),u(),n(40,"svg",65),h(41,"path",66),a()()(),g(),n(42,"div",62),c(43),a()(),n(44,"div",56)(45,"div",57)(46,"h3",67),c(47,"Sub-locations"),a(),n(48,"div",68),u(),n(49,"svg",69),h(50,"path",70),a()()(),g(),n(51,"div",62),c(52),a()(),n(53,"div",56)(54,"div",57)(55,"h3",71),c(56,"Total Value"),a(),n(57,"div",72),u(),n(58,"svg",73),h(59,"path",66),a()()(),g(),n(60,"div",62),c(61),a()()(),n(62,"div",74)(63,"div",75)(64,"div",76)(65,"div",77),u(),n(66,"svg",78),h(67,"path",79),a(),g(),n(68,"h2",80),c(69,"Location Overview"),a()(),n(70,"div",81)(71,"div")(72,"h4",82),c(73,"Description"),a(),n(74,"p",83),c(75),a()(),n(76,"div")(77,"h4",82),c(78,"Capacity & Utilization"),a(),n(79,"div",84)(80,"div",85)(81,"span",83),c(82,"Asset Utilization"),a(),n(83,"span",7),c(84,"0%"),a()(),n(85,"div",86),h(86,"div",87),a()(),n(87,"div",88)(88,"div",13),u(),n(89,"svg",89),h(90,"path",90),a(),g(),n(91,"div")(92,"div",80),c(93,"72\xB0F"),a(),n(94,"div",26),c(95,"Temperature"),a()()(),n(96,"div",13),u(),n(97,"svg",91),h(98,"path",92),a(),g(),n(99,"div")(100,"div",80),c(101,"Normal"),a(),n(102,"div",26),c(103,"Status"),a()()()()()()(),n(104,"div",76)(105,"div",77),u(),n(106,"svg",78),h(107,"path",93),a(),g(),n(108,"h2",80),c(109,"Asset Health Dashboard"),a()(),n(110,"div",94)(111,"div",95),u(),n(112,"svg",96),h(113,"path",61),a()(),g(),n(114,"h3",36),c(115,"No Assets Found"),a(),n(116,"p",97),c(117,"This location doesn't have any assets assigned yet."),a(),n(118,"button",42),v("click",function(){_(e);let o=d();return f(o.addAsset())}),c(119," Add Assets "),a()()(),n(120,"div",76)(121,"div",98)(122,"div",13),u(),n(123,"svg",78),h(124,"path",70),a(),g(),n(125,"h2",80),c(126),a()(),n(127,"button",99),v("click",function(){_(e);let o=d();return f(o.addSubLocation())}),u(),n(128,"svg",16),h(129,"path",52),a(),g(),n(130,"span"),c(131,"Add Sub-location"),a()()(),b(132,qo,9,0,"div",100)(133,Zo,15,3,"div",101)(134,Yo,13,0,"div",100),a()(),n(135,"div",102)(136,"div",76)(137,"div",77),u(),n(138,"svg",78),h(139,"path",103),a(),g(),n(140,"h2",80),c(141,"Recent Activity"),a()(),n(142,"div",81),b(143,Ko,11,8,"div",104),a()(),n(144,"div",76)(145,"div",77),u(),n(146,"svg",78),h(147,"path",105),a(),g(),n(148,"h2",80),c(149,"Location QR Code"),a()(),n(150,"div",31)(151,"div",106),b(152,Xo,1,2,"img",107)(153,Jo,3,0,"div",108),a(),n(154,"h4",109),c(155),a(),n(156,"p",110),c(157),a(),n(158,"div",111)(159,"button",112),v("click",function(){_(e);let o=d();return f(o.downloadQR())}),u(),n(160,"svg",16),h(161,"path",113),a(),g(),n(162,"span"),c(163,"Download"),a()(),n(164,"button",112),v("click",function(){_(e);let o=d();return f(o.printLabel())}),u(),n(165,"svg",16),h(166,"path",114),a(),g(),n(167,"span"),c(168,"Print Label"),a()()(),n(169,"p",115),c(170," Scan this QR code to quickly access location details and view assets. "),a()()()()()()}if(r&2){let e=d();l(8),w(e.location.name),l(26),w(e.mockStats.totalAssets),l(9),S("",e.mockStats.healthScore,"%"),l(9),w(e.mockStats.subLocations),l(9),S("$",e.mockStats.totalValue,""),l(14),w(e.location.description||e.location.name),l(51),S("Sub-locations (",e.mockStats.subLocations,")"),l(6),p("ngIf",e.subLocationsLoading),l(),p("ngIf",!e.subLocationsLoading&&e.subLocations.length>0),l(),p("ngIf",!e.subLocationsLoading&&e.subLocations.length===0),l(9),p("ngForOf",e.mockActivities),l(9),p("ngIf",e.location.quick_chart_qr_url),l(),p("ngIf",!e.location.quick_chart_qr_url),l(2),w(e.location.name),l(2),w(e.mockStats.totalAssets)}}function tr(r,t){if(r&1){let e=M();n(0,"app-add-location-modal",161),v("closeModal",function(){_(e);let o=d(2);return f(o.closeAddSubLocationModal())})("locationCreated",function(o){_(e);let s=d(2);return f(s.onSubLocationCreated(o))}),a()}if(r&2){let e=d(2);p("isOpen",e.showAddSubLocationModal)("parentLocation",e.location)}}function ir(r,t){if(r&1){let e=M();b(0,tr,1,2,"app-add-location-modal",158),n(1,"app-edit-location-modal",159),v("closeModal",function(){_(e);let o=d();return f(o.closeEditLocationModal())})("locationUpdated",function(o){_(e);let s=d();return f(s.isEditingSubLocation?s.onSubLocationUpdated():s.onLocationUpdated(o))}),a(),n(2,"app-delete-confirmation-modal",160),v("closeModal",function(){_(e);let o=d();return f(o.closeDeleteConfirmationModal())})("locationDeleted",function(o){_(e);let s=d();return f(s.onLocationDeleted(o))}),a()}if(r&2){let e=d();p("ngIf",e.location),l(),p("isOpen",e.showEditLocationModal)("location",e.isEditingSubLocation?e.subLocation:e.location),l(),p("isOpen",e.showDeleteConfirmationModal)("location",e.location)}}var tt=class r{constructor(t,e,i,o){this.route=t;this.router=e;this.locationService=i;this.angularLocation=o}destroy$=new L;location=null;subLocation=null;loading=!0;error="";ancestors=[];subLocations=[];subLocationsLoading=!1;showAddSubLocationModal=!1;showEditLocationModal=!1;showDeleteConfirmationModal=!1;mockStats={totalAssets:0,healthScore:100,subLocations:0,totalValue:0};mockActivities=[{type:"maintenance",title:"Maintenance Scheduled",description:"Routine maintenance scheduled for next week",time:"about 2 hours ago",icon:"maintenance"},{type:"utilization",title:"High Utilization",description:"Location utilization increased by 15%",time:"about 6 hours ago",icon:"chart"},{type:"safety",title:"Safety Inspection",description:"Monthly safety inspection completed",time:"1 day ago",icon:"shield"}];isEditingSubLocation=!1;ngOnInit(){this.route.params.pipe(R(this.destroy$)).subscribe(t=>{let e=t.id;e&&this.loadLocation(parseInt(e))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadLocation(t){this.loading=!0,this.error="",this.locationService.getLocation(t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success?(this.location=e.data.location,this.ancestors=e.data.ancestors||[],this.updateMockStats(),this.loadSubLocations()):this.error=e.message||"Failed to load location",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the location",this.loading=!1}})}loadSubLocations(){if(!this.location)return;this.subLocationsLoading=!0;let t={parent_id:this.location.id,per_page:50};this.locationService.getLocations(t).pipe(R(this.destroy$)).subscribe({next:e=>{e.success&&(this.subLocations=e.data.locations,this.updateMockStats()),this.subLocationsLoading=!1},error:e=>{console.error("Error loading sub-locations:",e),this.subLocationsLoading=!1}})}updateMockStats(){this.location&&(this.mockStats={totalAssets:this.location.asset_summary?.asset_count||0,healthScore:100,subLocations:this.subLocations.length,totalValue:this.location.asset_summary?.total_value||0})}goBack(){this.angularLocation.back()}editLocation(){this.isEditingSubLocation=!1,this.showEditLocationModal=!0}addAsset(){this.router.navigate(["/assets/create"],{queryParams:{location_id:this.location?.id}})}deleteLocation(){this.showDeleteConfirmationModal=!0}addSubLocation(){this.showAddSubLocationModal=!0}closeAddSubLocationModal(){this.showAddSubLocationModal=!1}onSubLocationCreated(t){this.loadSubLocations(),this.showAddSubLocationModal=!1}closeEditLocationModal(){this.showEditLocationModal=!1,this.isEditingSubLocation=!1,this.subLocation&&(this.subLocation=null)}onLocationUpdated(t){console.log(t,"updated location"),this.location=t,this.updateMockStats(),this.showEditLocationModal=!1}onSubLocationUpdated(){this.loadSubLocations(),this.showEditLocationModal=!1}closeDeleteConfirmationModal(){this.showDeleteConfirmationModal=!1}onLocationDeleted(t){this.router.navigate(["/locations"])}onQRCodeError(t){t.target.style.display="none",console.log("QR code image failed to load")}regenerateQR(){console.log("Regenerate QR code")}downloadQR(){if(this.location?.quick_chart_qr_url){let t=document.createElement("a");t.href=this.location.quick_chart_qr_url,t.target="_blank",t.download=`qr-code-${this.location.name.toLowerCase().replace(/\s+/g,"-")}.png`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}printLabel(){if(this.location?.quick_chart_qr_url){let t=window.open("","_blank");t&&(t.document.write(`
         <html>
           <head>
             <title>Print Label</title>
             <style>
               body {
                 font-family: Arial, sans-serif;
                 text-align: center;
                 margin: 20px;
               }
               img {
                 max-width: 100%;
                 height: auto;
               }
                .info {
               margin-top: 15px;
               font-size: 14px;

             }
             .info strong {
               display: inline-block;
              margin: 0 auto;
               width: 120px;
             }
             </style>
           </head>
           <body>
             <h1>${this.location.name}</h1>
             <img src="${this.location.quick_chart_qr_url}" alt="QR Code for ${this.location.name}">
             <p>Scan this QR code to access location details.</p>

              <div class="info text-center">
             <p><strong>Branch:</strong> ${this.location.name}</p>
             <p><strong>Location ID:</strong> ${this.location.id}</p>
             <p><strong>Type:</strong> ${this.location.type.name}</p>
             <p><strong>Address:</strong> ${this.location.address}</p>
           </div>
             <script>
               window.onload = function() {
                setTimeout(() => {
                  window.print();
                  window.close();
                }, 200);
               };
             <\/script>
           </body>
         </html>
       `),t.document.close())}else console.error("QR code URL is not available for printing.")}getActivityIcon(t){let e={maintenance:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",chart:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6",shield:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"};return e[t]||e.maintenance}getActivityColor(t){return{maintenance:"orange",chart:"purple",shield:"blue"}[t]||"gray"}viewSubLocation(t){this.router.navigate(["/locations",t.id]),setTimeout(()=>{this.route.params.pipe(R(this.destroy$)).subscribe(e=>{let i=e.id;i&&this.loadLocation(parseInt(i))})},500)}editSubLocation(t){this.subLocation=t,this.isEditingSubLocation=!0,this.showEditLocationModal=!0}deleteSubLocation(t){console.log("Delete sublocation:",t)}static \u0275fac=function(e){return new(e||r)(E(Ut),E(ze),E(N),E(Gt))};static \u0275cmp=O({type:r,selectors:[["app-location-view"]],decls:14,vars:5,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],["class","mt-4",4,"ngIf"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],[1,"mt-4"],["aria-label","Breadcrumb",1,"flex"],[1,"flex","items-center","space-x-2"],[1,"flex","items-center"],["routerLink","/locations",1,"text-gray-500","hover:text-gray-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 21l4-4 4 4"],[1,"sr-only"],[4,"ngFor","ngForOf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mx-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-gray-900","text-sm","font-medium"],[1,"mt-2","flex","items-center","space-x-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"text-xs","text-gray-500"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-gray-500","hover:text-gray-700","transition-colors","text-sm","font-medium",3,"routerLink"],[1,"text-xs","text-gray-400"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"px-6","py-6"],[1,"bg-blue-100","rounded-lg","p-6","mb-6"],[1,"w-12","h-12","bg-blue-200","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-4","py-2","text-gray-700","hover:bg-blue-200","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"flex","items-center","space-x-2","px-4","py-2","text-red-600","hover:bg-red-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"bg-white","rounded-lg","p-4","border","border-gray-200"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-blue-600"],[1,"w-8","h-8","bg-blue-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","font-medium","text-green-600"],[1,"w-8","h-8","bg-green-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-sm","font-medium","text-purple-600"],[1,"w-8","h-8","bg-purple-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-sm","font-medium","text-orange-600"],[1,"w-8","h-8","bg-orange-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","p-6","shadow-sm","border","border-gray-200"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"text-gray-600"],[1,"space-y-2"],[1,"flex","justify-between","text-sm"],[1,"w-full","bg-gray-200","rounded-full","h-2"],[1,"bg-blue-600","h-2","rounded-full",2,"width","0%"],[1,"grid","grid-cols-2","gap-4","mt-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["class","text-center py-12",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"space-y-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-start space-x-3",4,"ngFor","ngForOf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"w-32","h-32","bg-gray-100","rounded-lg","mx-auto","mb-4","flex","items-center","justify-center","overflow-hidden"],["class","w-full h-full object-contain",3,"src","alt","error",4,"ngIf"],["class","w-24 h-24 bg-gray-300 rounded flex items-center justify-center",4,"ngIf"],[1,"font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-600","mb-4"],[1,"flex","gap-3","items-center"],[1,"border","border-gray-200","hover:border-gray-300","font-medium","cursor-pointer","w-full","flex","items-center","justify-center","space-x-2","px-3","py-2","text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"text-xs","text-gray-500","mt-4"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-6","h-6","text-blue-600"],["class","bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-all cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"text-base","font-semibold","text-gray-900","mb-4"],[1,"bg-blue-100","rounded-lg","p-3","mb-2"],[1,"w-6","h-6","bg-blue-200","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-blue-700"],[1,"font-medium","text-blue-800","text-sm"],[1,"space-y-1"],["class","flex items-center space-x-3 p-2 hover:bg-gray-50 rounded transition-colors",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-4","hover:bg-gray-100","transition-all","cursor-pointer",3,"click"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-8","h-8","bg-white","rounded-lg","flex","items-center","justify-center","border","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],[1,"font-semibold","text-gray-900"],[1,"flex","items-center","space-x-2","text-sm","text-gray-500"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","items-center","space-x-1"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all",3,"click"],["type","button",1,"p-1","text-gray-400","hover:text-gray-600","hover:bg-gray-200","rounded","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"],[1,"flex","items-center","justify-between","text-sm"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-600"],[1,"flex","items-center","space-x-3","p-2","hover:bg-gray-50","rounded","transition-colors"],[1,"w-6","h-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M12 2v20M2 12h20"],[1,"w-5","h-5","bg-gray-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-gray-600"],[1,"text-sm","text-gray-700"],[1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],[1,"flex","items-start","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex-1"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500","mt-1"],[1,"w-full","h-full","object-contain",3,"error","src","alt"],[1,"w-24","h-24","bg-gray-300","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-500"],[3,"isOpen","parentLocation","closeModal","locationCreated",4,"ngIf"],[3,"closeModal","locationUpdated","isOpen","location"],[3,"closeModal","locationDeleted","isOpen","location"],[3,"closeModal","locationCreated","isOpen","parentLocation"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),v("click",function(){return i.goBack()}),u(),n(5,"svg",5),h(6,"path",6),a(),g(),n(7,"span",7),c(8,"Back to Locations"),a()()()(),b(9,Go,24,5,"div",8),a(),b(10,$o,10,0,"div",9)(11,Uo,11,1,"div",9)(12,er,171,15,"div",10)(13,ir,3,5),a()),e&2&&(l(9),p("ngIf",i.location&&!i.loading),l(),p("ngIf",i.loading),l(),p("ngIf",i.error&&!i.loading),l(),p("ngIf",i.location&&!i.loading),l(),Se(i.loading?-1:13))},dependencies:[F,Q,A,xe,qt,Me,Ee,pe],styles:[".location-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.stats-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.activity-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc;border-radius:.5rem;padding:.75rem;margin:-.75rem}.qr-code-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border:2px dashed #e5e7eb}.qr-code-container[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.action-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.back-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.back-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;border-radius:.5rem;padding:.5rem 1rem;margin:-.5rem -1rem}.overview-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc)}.utilization-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#1d4ed8);transition:width .3s ease-in-out}.temperature-reading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:.75rem;padding:1rem}.status-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border-radius:.75rem;padding:1rem}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:1rem}.empty-state[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%], .main-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.location-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media print{.action-buttons[_ngcontent-%COMP%], .back-button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{border:1px solid #000;background:#fff}}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.activity-scroll[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"]})};var nr=[{path:"",component:Te},{path:":id",component:tt}],it=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=ne({type:r});static \u0275inj=ie({imports:[xe.forChild(nr),xe]})};var Ei=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=ne({type:r});static \u0275inj=ie({imports:[F,ee,Ue,it,Te]})};export{Ei as LocationsModule};
