import{a as d}from"./chunk-HC7LNL3A.js";import{X as f,ba as g}from"./chunk-XGV57TRJ.js";var p=class u{prefsService=g(d);formatDate(t){if(!t)return"";let e=new Date(t);if(isNaN(e.getTime()))return String(t);let r=this.prefsService.get("date_format")||"MM/DD/YYYY",n=this.prefsService.get("timezone")||"UTC",a=this.convertToTimezone(e,n),i=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0"),c=a.getFullYear(),m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];switch(r){case"DD/MM/YYYY":return`${s}/${i}/${c}`;case"YYYY-MM-DD":return`${c}-${i}-${s}`;case"MMM DD, YYYY":return`${m[a.getMonth()]} ${s}, ${c}`;case"MM/DD/YYYY":default:return`${i}/${s}/${c}`}}formatTime(t){if(!t)return"";let e=new Date(t);if(isNaN(e.getTime()))return String(t);let r=this.prefsService.get("time_format")||"12",n=this.prefsService.get("timezone")||"UTC",a=this.convertToTimezone(e,n),i=a.getHours(),s=String(a.getMinutes()).padStart(2,"0");if(r==="24")return`${String(i).padStart(2,"0")}:${s}`;{let c=i>=12?"PM":"AM";return`${i%12||12}:${s} ${c}`}}formatNumber(t,e=2){if(t==null||t==="")return"";let r=Number(t);if(isNaN(r))return String(t);switch(this.prefsService.get("number_format")||"US"){case"EU":return r.toLocaleString("de-DE",{minimumFractionDigits:e,maximumFractionDigits:e});case"AR":return r.toLocaleString("ar-EG",{minimumFractionDigits:e,maximumFractionDigits:e}).replace(/\d/g,i=>String.fromCharCode(i.charCodeAt(0)+1584));case"US":default:return r.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:e})}}convertToTimezone(t,e){try{let n=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),a=parseInt(n.find(o=>o.type==="year")?.value||"0"),i=parseInt(n.find(o=>o.type==="month")?.value||"0")-1,s=parseInt(n.find(o=>o.type==="day")?.value||"0"),c=parseInt(n.find(o=>o.type==="hour")?.value||"0"),m=parseInt(n.find(o=>o.type==="minute")?.value||"0"),S=parseInt(n.find(o=>o.type==="second")?.value||"0");return new Date(a,i,s,c,m,S)}catch(r){return console.warn("Timezone conversion failed, using local time:",r),t}}static \u0275fac=function(e){return new(e||u)};static \u0275prov=f({token:u,factory:u.\u0275fac,providedIn:"root"})};export{p as a};
