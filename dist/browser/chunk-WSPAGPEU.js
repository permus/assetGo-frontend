import{a as p}from"./chunk-JRZIQKWL.js";import{a as l}from"./chunk-MPFP4EBB.js";import{D as c,E as d}from"./chunk-BG2KDKD3.js";import{V as m,_ as u,r as s}from"./chunk-LSPYFKLS.js";import{a,b as g}from"./chunk-EQDQRRRY.js";var _=class o{constructor(e,t){this.http=e;this.authService=t}apiUrl=`${l.apiUrl}/teams`;getAuthHeaders(){let e=this.authService.getToken();return{headers:a({"Content-Type":"application/json"},e?{Authorization:`Bearer ${e}`}:{})}}getTeamMembers(e=1,t=15,r){let n=this.authService.getToken(),b=a({"Content-Type":"application/json"},n?{Authorization:`Bearer ${n}`}:{}),i=new URLSearchParams;i.set("page",String(e)),i.set("per_page",String(t)),r?.search&&i.set("search",r.search),r?.role_id!==void 0&&i.set("role_id",String(r.role_id)),r?.role_name&&i.set("role_name",r.role_name),r?.status&&i.set("status",r.status),r?.type&&i.set("type",r.type),r?.sort_by&&i.set("sort_by",r.sort_by),r?.sort_dir&&i.set("sort_dir",r.sort_dir);let O=`${this.apiUrl}?${i.toString()}`;return this.http.get(O,{headers:b})}getTeamMembersFlat(e=1e3){return this.getTeamMembers(1,e).pipe(s(t=>t?.data?.teams??[]))}getTeamMember(e){return this.http.get(`${this.apiUrl}/${e}`,this.getAuthHeaders())}createTeamMember(e){return this.http.post(this.apiUrl,e,this.getAuthHeaders())}updateTeamMember(e,t){return this.http.put(`${this.apiUrl}/${e}`,t,this.getAuthHeaders())}deleteTeamMember(e){return this.http.delete(`${this.apiUrl}/${e}`,this.getAuthHeaders())}resendInvitation(e){return this.http.post(`${this.apiUrl}/${e}/resend-invitation`,{},this.getAuthHeaders())}getTeamMemberStatistics(){return this.http.get(`${this.apiUrl}/statistics`,this.getAuthHeaders())}getTeamAnalytics(e){let t=this.authService.getToken(),r=a({"Content-Type":"application/json"},t?{Authorization:`Bearer ${t}`}:{}),n=new URLSearchParams;e?.date_range&&n.set("date_range",String(e.date_range));let b=`${this.apiUrl}/analytics${n.toString()?`?${n.toString()}`:""}`;return this.http.get(b,{headers:r})}getAvailableRoles(){return this.http.get(`${this.apiUrl}/available-roles`,this.getAuthHeaders())}static \u0275fac=function(t){return new(t||o)(u(d),u(p))};static \u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"})};var h=class o{constructor(e,t){this.http=e;this.authService=t}apiUrl=`${l.apiUrl}/work-orders`;getAuthHeaders(){let e=this.authService.getToken();return{headers:a({"Content-Type":"application/json"},e?{Authorization:`Bearer ${e}`}:{})}}getComments(e){return this.http.get(`${this.apiUrl}/${e}/comments`,this.getAuthHeaders()).pipe(s(t=>t.data))}getAssignments(e){return this.http.get(`${this.apiUrl}/${e}/assignments`,this.getAuthHeaders()).pipe(s(t=>t.data))}setAssignments(e,t){return this.http.post(`${this.apiUrl}/${e}/assignments`,{user_ids:t},this.getAuthHeaders()).pipe(s(r=>r.data))}deleteAssignment(e,t){return this.http.delete(`${this.apiUrl}/${e}/assignments/${t}`,this.getAuthHeaders())}updateAssignmentStatus(e,t,r){return this.http.put(`${this.apiUrl}/${e}/assignments/${t}`,{status:r},this.getAuthHeaders()).pipe(s(n=>n.data))}assignWorkOrder(e,t){return this.http.post(`${this.apiUrl}/${e}/assign`,t,this.getAuthHeaders()).pipe(s(r=>r.data))}getParts(e){return this.http.get(`${this.apiUrl}/${e}/parts`,this.getAuthHeaders()).pipe(s(t=>t.data))}addParts(e,t){return this.http.post(`${this.apiUrl}/${e}/parts`,{items:t},this.getAuthHeaders()).pipe(s(r=>r.data))}updatePart(e,t,r){return this.http.put(`${this.apiUrl}/${e}/parts/${t}`,r,this.getAuthHeaders()).pipe(s(n=>n.data))}deletePart(e,t){return this.http.delete(`${this.apiUrl}/${e}/parts/${t}`,this.getAuthHeaders())}addComment(e,t,r){return this.http.post(`${this.apiUrl}/${e}/comments`,{comment:t,meta:r},this.getAuthHeaders()).pipe(s(n=>n.data))}deleteComment(e,t){return this.http.delete(`${this.apiUrl}/${e}/comments/${t}`,this.getAuthHeaders())}getWorkOrders(e){let t=new c;return e&&Object.keys(e).forEach(r=>{let n=e[r];n!=null&&n!==""&&(t=t.set(r,n.toString()))}),this.http.get(this.apiUrl,g(a({},this.getAuthHeaders()),{params:t}))}getWorkOrderById(e){return this.http.get(`${this.apiUrl}/${e}`,this.getAuthHeaders()).pipe(s(t=>t.data))}updateWorkOrderStatus(e,t){return this.http.post(`${this.apiUrl}/${e}/status`,{status_id:t},this.getAuthHeaders()).pipe(s(r=>r.data))}createWorkOrder(e){return this.http.post(this.apiUrl,e,this.getAuthHeaders())}updateWorkOrder(e,t){return this.http.put(`${this.apiUrl}/${e}`,t,this.getAuthHeaders())}deleteWorkOrder(e){return this.http.delete(`${this.apiUrl}/${e}`,this.getAuthHeaders())}getWorkOrderAnalytics(){return this.http.get(`${this.apiUrl}/analytics`,this.getAuthHeaders()).pipe(s(e=>e.data))}getWorkOrderStatistics(){return this.http.get(`${this.apiUrl}/statistics`,this.getAuthHeaders()).pipe(s(e=>e.data))}getWorkOrderCount(e){let t=new c;return e&&Object.keys(e).forEach(r=>{let n=e[r];n!=null&&n!==""&&(t=t.set(r,n.toString()))}),this.http.get(`${this.apiUrl}/count`,g(a({},this.getAuthHeaders()),{params:t})).pipe(s(r=>r.data))}getWorkOrderFilters(){return this.http.get(`${this.apiUrl}/filters`,this.getAuthHeaders()).pipe(s(e=>e.data))}getWorkOrderHistory(e){return this.http.get(`${this.apiUrl}/${e}/history`,this.getAuthHeaders()).pipe(s(t=>t.data))}getTimeLogs(e){return this.http.get(`${this.apiUrl}/${e}/time-logs`,this.getAuthHeaders()).pipe(s(t=>t.data))}startTimer(e,t){return this.http.post(`${this.apiUrl}/${e}/time-logs/start`,t,this.getAuthHeaders()).pipe(s(r=>r.data))}stopTimer(e){return this.http.post(`${this.apiUrl}/${e}/time-logs/stop`,{},this.getAuthHeaders()).pipe(s(t=>t.data))}getWorkOrderStats(){return this.http.get(`${this.apiUrl}/statistics`,this.getAuthHeaders()).pipe(s(e=>({total:Object.values(e.status_counts||{}).reduce((t,r)=>t+r,0),open:e.status_counts?.open||0,inProgress:e.status_counts?.["in-progress"]||0,completed:e.status_counts?.completed||0,critical:e.priority_counts?.critical||0})))}static \u0275fac=function(t){return new(t||o)(u(d),u(p))};static \u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"})};export{_ as a,h as b};
