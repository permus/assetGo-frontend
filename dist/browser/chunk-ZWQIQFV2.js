import{a as S}from"./chunk-OMXYFOPY.js";import{B as E}from"./chunk-E3TUIQ6F.js";import"./chunk-47ABMRM7.js";import{k as w,l as O,x as P}from"./chunk-SXJTW2OO.js";import{Gb as t,Hb as n,Ib as M,Mb as y,Pb as f,Qb as s,Ua as b,Xa as l,ab as I,bc as o,cc as p,dc as m,ia as _,ja as C,jb as h,ob as d,wb as c,zb as u}from"./chunk-XGV57TRJ.js";import{f as v}from"./chunk-EQDQRRRY.js";function F(i,r){if(i&1){let e=y();t(0,"div",10),M(1,"img",11),t(2,"button",12),f("click",function(){let g=_(e).index,x=s(2);return C(x.remove(g))}),o(3,"Remove"),n()()}if(i&2){let e=r.$implicit,a=r.index;l(),c("src",e,b)("alt","preview-"+a)}}function R(i,r){if(i&1&&(t(0,"div",8),d(1,F,4,2,"div",9),n()),i&2){let e=s();l(),c("ngForOf",e.previews)}}function z(i,r){if(i&1&&(t(0,"p",13),o(1),n()),i&2){let e=s();l(),p(e.errorMsg)}}function k(i,r){if(i&1&&(t(0,"span",29),o(1),n()),i&2){let e=s(2);u(e.getConfidenceClass(e.result.evidence==null||e.result.evidence.fieldsFound==null?null:e.result.evidence.fieldsFound.includes("manufacturer"))),l(),m(" ",!(e.result.evidence==null||e.result.evidence.fieldsFound==null)&&e.result.evidence.fieldsFound.includes("manufacturer")?"High":"Low"," confidence ")}}function T(i,r){if(i&1&&(t(0,"span",29),o(1),n()),i&2){let e=s(2);u(e.getConfidenceClass(e.result.evidence==null||e.result.evidence.fieldsFound==null?null:e.result.evidence.fieldsFound.includes("model"))),l(),m(" ",!(e.result.evidence==null||e.result.evidence.fieldsFound==null)&&e.result.evidence.fieldsFound.includes("model")?"High":"Low"," confidence ")}}function N(i,r){if(i&1&&(t(0,"span",29),o(1),n()),i&2){let e=s(2);u(e.getConfidenceClass(e.result.evidence==null||e.result.evidence.fieldsFound==null?null:e.result.evidence.fieldsFound.includes("serialNumber"))),l(),m(" ",!(e.result.evidence==null||e.result.evidence.fieldsFound==null)&&e.result.evidence.fieldsFound.includes("serialNumber")?"High":"Low"," confidence ")}}function L(i,r){i&1&&(t(0,"div",30)(1,"div",31),o(2,"\u26A0\uFE0F"),n(),t(3,"div",32)(4,"strong"),o(5,"Low confidence detected."),n(),o(6," For better results, try uploading a close-up of the nameplate or label. "),n()())}function U(i,r){if(i&1&&(t(0,"li"),o(1),n()),i&2){let e=r.$implicit;l(),p(e)}}function j(i,r){if(i&1&&(t(0,"section",14)(1,"div",15)(2,"div")(3,"div",16),o(4,"Asset Type"),n(),t(5,"div",17),o(6),n()(),t(7,"div",18),o(8),n()(),t(9,"div",19)(10,"div",20)(11,"span"),o(12,"Manufacturer"),n(),t(13,"div",21)(14,"strong"),o(15),n(),d(16,k,2,3,"span",22),n()(),t(17,"div",20)(18,"span"),o(19,"Model"),n(),t(20,"div",21)(21,"strong"),o(22),n(),d(23,T,2,3,"span",22),n()(),t(24,"div",20)(25,"span"),o(26,"Serial"),n(),t(27,"div",21)(28,"strong"),o(29),n(),d(30,N,2,3,"span",22),n()(),t(31,"div",20)(32,"span"),o(33,"Condition"),n(),t(34,"div",21)(35,"strong"),o(36),n(),t(37,"span",23),o(38),n()()()(),d(39,L,7,0,"div",24),t(40,"div",25)(41,"div",16),o(42,"Recommendations"),n(),t(43,"ul"),d(44,U,2,1,"li",26),n()(),t(45,"div",27)(46,"button"),o(47,"Generate QR"),n(),t(48,"button",28),o(49,"Create Asset Record"),n()()()),i&2){let e=s();l(6),p(e.result.assetType),l(2),m("Confidence ",e.result.confidence,"%"),l(7),p(e.result.manufacturer||"\u2014"),l(),c("ngIf",e.result.manufacturer),l(6),p(e.result.model||"\u2014"),l(),c("ngIf",e.result.model),l(6),p(e.result.serialNumber||"\u2014"),l(),c("ngIf",e.result.serialNumber),l(6),p(e.result.condition),l(),u("condition-"+e.result.condition.toLowerCase()),l(),m(" ",e.result.condition," "),l(),c("ngIf",e.result.confidence<70),l(5),c("ngForOf",e.result.recommendations)}}var A=class i{constructor(r){this.up=r}files=[];previews=[];isAnalyzing=!1;result=null;errorMsg="";onSelect(r){return v(this,null,function*(){let e=r.target;if(e.files?.length)for(let a of Array.from(e.files)){let g=this.up.validate(a);if(!g.ok){this.errorMsg=g.reason||"Invalid file";continue}this.files.push(a),this.previews.push(yield this.up.toDataUrl(a))}})}analyze(){return v(this,null,function*(){this.previews.length!==0&&(this.isAnalyzing=!0,this.errorMsg="",this.result=null,this.up.analyze(this.previews).subscribe({next:r=>{this.result=r.data,this.isAnalyzing=!1},error:r=>{this.errorMsg=r?.error?.message||"Analysis failed",this.isAnalyzing=!1}}))})}remove(r){this.files.splice(r,1),this.previews.splice(r,1)}getConfidenceClass(r){return r?"confidence-high":"confidence-low"}static \u0275fac=function(e){return new(e||i)(I(S))};static \u0275cmp=h({type:i,selectors:[["app-ai-image-recognition"]],decls:12,vars:5,consts:[[1,"container"],[1,"uploader"],["type","file","multiple","","accept","image/png,image/jpeg",3,"change"],[1,"hint"],["class","previews",4,"ngIf"],[3,"click","disabled"],["class","error",4,"ngIf"],["class","result",4,"ngIf"],[1,"previews"],["class","thumb",4,"ngFor","ngForOf"],[1,"thumb"],[3,"src","alt"],[3,"click"],[1,"error"],[1,"result"],[1,"header"],[1,"label"],[1,"value"],[1,"chip"],[1,"grid"],[1,"field"],[1,"field-content"],["class","confidence-chip",3,"class",4,"ngIf"],[1,"condition-badge"],["class","low-confidence-warning",4,"ngIf"],[1,"recs"],[4,"ngFor","ngForOf"],[1,"actions"],[1,"primary"],[1,"confidence-chip"],[1,"low-confidence-warning"],[1,"warning-icon"],[1,"warning-text"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"h2"),o(2,"AI Image Recognition"),n(),t(3,"div",1)(4,"input",2),f("change",function(x){return a.onSelect(x)}),n(),t(5,"p",3),o(6,"PNG/JPG up to 10MB. Add 1\u20135 images. Include nameplate close-ups."),n()(),d(7,R,2,1,"div",4),t(8,"button",5),f("click",function(){return a.analyze()}),o(9),n(),d(10,z,2,1,"p",6)(11,j,50,14,"section",7),n()),e&2&&(l(7),c("ngIf",a.previews.length),l(),c("disabled",a.isAnalyzing||!a.previews.length),l(),m(" ",a.isAnalyzing?"Analyzing\u2026":"Analyze Image"," "),l(),c("ngIf",a.errorMsg),l(),c("ngIf",a.result))},dependencies:[P,w,O,E],styles:[".container[_ngcontent-%COMP%]{max-width:960px;margin:20px auto;padding:16px}.uploader[_ngcontent-%COMP%]{border:2px dashed #d1d5db;padding:24px;border-radius:12px;text-align:center}.hint[_ngcontent-%COMP%]{color:#6b7280;margin-top:8px}.previews[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;margin-top:16px}.thumb[_ngcontent-%COMP%]{position:relative;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:140px;object-fit:cover;display:block}.thumb[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px}button[_ngcontent-%COMP%]{margin-top:16px;padding:10px 16px;border-radius:8px;border:1px solid rgba(17,24,39,.1333333333);background:#111827;color:#fff}button[disabled][_ngcontent-%COMP%]{opacity:.6}.error[_ngcontent-%COMP%]{color:#b91c1c;margin-top:8px}.result[_ngcontent-%COMP%]{margin-top:24px;border:1px solid #e5e7eb;border-radius:12px;padding:16px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.label[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.value[_ngcontent-%COMP%]{font-weight:600;font-size:18px}.chip[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46;padding:6px 10px;border-radius:999px;font-size:12px}.grid[_ngcontent-%COMP%]{margin-top:12px;display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.field-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.confidence-chip[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;border-radius:4px;font-weight:500}.confidence-high[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.confidence-low[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.condition-badge[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;border-radius:4px;font-weight:500}.condition-excellent[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.condition-good[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.condition-fair[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.condition-poor[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.low-confidence-warning[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background:#fef3c7;border:1px solid #f59e0b;border-radius:8px;display:flex;align-items:center;gap:8px}.warning-icon[_ngcontent-%COMP%]{font-size:16px}.warning-text[_ngcontent-%COMP%]{color:#92400e;font-size:14px}.recs[_ngcontent-%COMP%]{margin-top:12px}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:12px}.actions[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{background:#2563eb}"]})};export{A as AIImageRecognitionComponent};
