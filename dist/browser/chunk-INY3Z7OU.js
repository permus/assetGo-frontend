import{a as o}from"./chunk-MEXLA3FU.js";import{a as i,b as h}from"./chunk-YGU4T3V7.js";import{Y as u,ba as l}from"./chunk-RHVXZUNF.js";import{a as n,b as c}from"./chunk-EQDQRRRY.js";var b=class p{constructor(t){this.http=t}apiUrl=`${o.apiUrl}/locations`;getAuthHeaders(){let t=localStorage.getItem("token");return{headers:n({"Content-Type":"application/json"},t?{Authorization:`Bearer ${t}`}:{})}}getLocations(t={}){let e=new i;return Object.keys(t).forEach(s=>{let r=t[s];r!=null&&r!==""&&(e=e.set(s,r.toString()))}),this.http.get(this.apiUrl,n({params:e},this.getAuthHeaders()))}getLocation(t){return this.http.get(`${this.apiUrl}/${t}`,this.getAuthHeaders())}createLocation(t){return this.http.post(this.apiUrl,t,this.getAuthHeaders())}updateLocation(t,e){return this.http.put(`${this.apiUrl}/${t}`,e,this.getAuthHeaders())}deleteLocation(t){return this.http.delete(`${this.apiUrl}/${t}`,this.getAuthHeaders())}bulkCreateLocations(t){return this.http.post(`${this.apiUrl}/bulk`,{locations:t},this.getAuthHeaders())}moveLocations(t,e){return this.http.post(`${this.apiUrl}/move`,{location_ids:t,new_parent_id:e},this.getAuthHeaders())}getQRCode(t,e="download",s="png"){let r=new i().set("action",e).set("format",s);return this.http.get(`${this.apiUrl}/${t}/qr`,n({params:r,responseType:"blob"},this.getAuthHeaders()))}getLocationActivities(t,e){let s=new i;return e&&(e.page&&(s=s.set("page",e.page.toString())),e.per_page&&(s=s.set("per_page",e.per_page.toString())),e.action&&(s=s.set("action",e.action))),this.http.get(`${this.apiUrl}/${t}/activities`,n({params:s},this.getAuthHeaders()))}getLocationTypes(t){let e=new i;return t!==void 0&&(e=e.set("hierarchy_level",t.toString())),this.http.get(`${o.apiUrl}/location-types`,n({params:e},this.getAuthHeaders()))}getHierarchy(){return this.http.get(`${o.apiUrl}/locations-hierarchy`,this.getAuthHeaders())}getPossibleParents(t,e){let s=new i().set("type_id",t.toString());e&&(s=s.set("location_id",e.toString()));let r=e?`${o.apiUrl}/locations/possible-parents/${e}`:`${o.apiUrl}/locations/possible-parents`;return this.http.get(r,n({params:s},this.getAuthHeaders()))}exportQRCodes(){return this.http.get(`${o.apiUrl}/locations/export-qr`,c(n({},this.getAuthHeaders()),{responseType:"blob"}))}getLocationAssets(t,e={}){let s=new i;return Object.keys(e).forEach(r=>{let a=e[r];a!=null&&a!==""&&(s=s.set(r,a.toString()))}),this.http.get(`${this.apiUrl}/${t}/assets`,n({params:s},this.getAuthHeaders()))}getAssignableAssets(t,e={}){let s=new i;return Object.keys(e).forEach(r=>{let a=e[r];a!=null&&a!==""&&(s=s.set(r,a.toString()))}),this.http.get(`${this.apiUrl}/${t}/assignable-assets`,n({params:s},this.getAuthHeaders()))}assignAssets(t,e,s){let r={asset_ids:e};return s&&(r.department_id=s),this.http.post(`${this.apiUrl}/${t}/assign-assets`,r,this.getAuthHeaders())}static \u0275fac=function(e){return new(e||p)(l(h))};static \u0275prov=u({token:p,factory:p.\u0275fac,providedIn:"root"})};export{b as a};
