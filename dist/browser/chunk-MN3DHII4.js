import{a as De,b as Ae}from"./chunk-GQ2ENNPW.js";import{a as Le}from"./chunk-GV4TZXHO.js";import{a as Ve}from"./chunk-ZSVXREIR.js";import{a as K,b as Re}from"./chunk-XXWOHFFO.js";import{a as U}from"./chunk-ZZSEPLY2.js";import"./chunk-VEZ3XDJG.js";import{A as k,B as J,b as we,c as P,d as y,e as L,f as Ce,i as W,j as ye,k as Te,o as Se,r as ke,s as Ee,t as Oe,u as Ie,w as Fe,z as Pe}from"./chunk-LTANXHE4.js";import{i as B}from"./chunk-7Z53IGV3.js";import{a as Me}from"./chunk-6WXWVH7L.js";import{E as ve,k as Z,l as N,s as xe,w as S}from"./chunk-OO62REYN.js";import{$a as F,Ab as fe,Cb as C,Fb as u,Gb as d,Ma as pe,Na as a,P as se,Sa as T,Tb as s,Ub as h,Vb as b,Wb as Y,X as me,Xb as _e,Y as G,Yb as D,Zb as A,_b as R,aa as de,ab as q,eb as f,gc as be,ha as ce,ia as x,ic as he,ja as v,ka as g,la as _,lb as ue,mb as c,ob as M,r as le,sa as O,sb as I,ub as ie,vb as oe,wb as i,xb as o,yb as p,zb as ge}from"./chunk-I4CHZ5QN.js";import{a as V,b as z}from"./chunk-EQDQRRRY.js";var Q=class r{teamMember=null;cancelled=new O;confirmed=new O;deleteReason="";onClose(){this.cancelled.emit()}onConfirmDelete(){this.teamMember&&this.confirmed.emit({teamId:this.teamMember.id,reason:this.deleteReason.trim()})}onBackdropClick(t){t.target===t.currentTarget&&this.onClose()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=F({type:r,selectors:[["app-team-delete-confirmation-modal"]],inputs:{teamMember:"teamMember"},outputs:{cancelled:"cancelled",confirmed:"confirmed"},decls:40,vars:3,consts:[[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50",3,"click"],[1,"relative","mx-auto","p-6","w-[500px]","rounded-lg","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-6"],["for","deleteReason",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","deleteReason","rows","4","placeholder","Enter reason for removing this team member...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-red-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],[1,"text-center","mb-6"],[1,"mx-auto","flex","items-center","justify-center","h-16","w-16","rounded-full","bg-red-100","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-8","w-8","text-red-600"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-600","mb-4"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","font-medium","text-red-800"],[1,"flex","justify-end","space-x-3"],[1,"inline-flex","justify-center","px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500","transition-colors",3,"click"],[1,"inline-flex","justify-center","px-4","py-2","text-sm","font-medium","text-white","bg-red-600","border","border-transparent","rounded-md","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","transition-colors",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0),u("click",function(m){return n.onBackdropClick(m)}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),g(),i(5,"svg",5),p(6,"path",6),o(),_(),i(7,"h3",7),s(8,"Remove Team Member"),o()(),i(9,"button",8),u("click",function(){return n.onClose()}),g(),i(10,"svg",9),p(11,"path",10),o()()(),_(),i(12,"div",11)(13,"label",12),s(14," Deletion Reason (Optional) "),o(),i(15,"textarea",13),R("ngModelChange",function(m){return A(n.deleteReason,m)||(n.deleteReason=m),m}),o(),i(16,"p",14),s(17,"This will be recorded in the audit trail."),o()(),i(18,"div",15)(19,"div",16),g(),i(20,"svg",17),p(21,"path",6),o()(),_(),i(22,"h3",18),s(23," Are you sure you want to remove "),i(24,"strong"),s(25),o(),s(26,"? "),o(),i(27,"p",19),s(28," This action cannot be undone. The team member will be permanently removed from the system. "),o(),i(29,"div",20)(30,"div",4),g(),i(31,"svg",21),p(32,"path",22),o(),_(),i(33,"span",23),s(34," Warning: This action will permanently remove the team member and all associated data. "),o()()()(),i(35,"div",24)(36,"button",25),u("click",function(){return n.onClose()}),s(37," Cancel "),o(),i(38,"button",26),u("click",function(){return n.onConfirmDelete()}),s(39," Remove Member "),o()()()()()),e&2&&(a(15),D("ngModel",n.deleteReason),a(10),Y('"',n.teamMember==null?null:n.teamMember.first_name," ",n.teamMember==null?null:n.teamMember.last_name,'"'))},dependencies:[S,k,P,L,W],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};var X=class r{constructor(t){this.http=t}cache$;apiUrl=`${Me.apiUrl}/locations-hierarchy`;getTree(){return this.cache$||(this.cache$=this.http.get(this.apiUrl).pipe(le(t=>t.data.hierarchy),se(1))),this.cache$}clearCache(){this.cache$=void 0}static \u0275fac=function(e){return new(e||r)(de(ve))};static \u0275prov=me({token:r,factory:r.\u0275fac,providedIn:"root"})};function Be(r,t){if(r&1&&(i(0,"div",33)(1,"div",34),g(),i(2,"svg",35),p(3,"path",36),o(),_(),i(4,"p",37),s(5),o()()()),r&2){let e=d();a(5),h(e.error)}}function Ge(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d();a(),b(" ",e.getFieldError("first_name")," ")}}function qe(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d();a(),b(" ",e.getFieldError("last_name")," ")}}function Ye(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d();a(),b(" ",e.getFieldError("email")," ")}}function Ze(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d(2);a(),b(" ",e.getFieldError("password")," ")}}function Ue(r,t){if(r&1&&(i(0,"div",12)(1,"label",39),s(2," Password (Optional) "),o(),p(3,"input",40),f(4,Ze,2,1,"p",15),i(5,"p",27),s(6," Leave blank to auto-generate a secure password and send via email. "),o()()),r&2){let e,n=d();a(3),M("border-red-300",((e=n.teamMemberForm.get("password"))==null?null:e.invalid)&&(((e=n.teamMemberForm.get("password"))==null?null:e.dirty)||((e=n.teamMemberForm.get("password"))==null?null:e.touched))),a(),c("ngIf",n.getFieldError("password"))}}function Je(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d(2);a(),b(" ",e.getFieldError("password_confirmation")," ")}}function Ke(r,t){if(r&1&&(i(0,"div",12)(1,"label",41),s(2," Confirm Password "),o(),p(3,"input",42),f(4,Je,2,1,"p",15),o()),r&2){let e,n=d();a(3),M("border-red-300",((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.invalid)&&(((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.dirty)||((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.touched))),a(),c("ngIf",n.getFieldError("password_confirmation"))}}function Qe(r,t){if(r&1&&(i(0,"option",43),s(1),o()),r&2){let e=t.$implicit;c("value",e.id),a(),b(" ",e.name," ")}}function Xe(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d();a(),b(" ",e.getFieldError("role_id")," ")}}function et(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d();a(),b(" ",e.rolesError," ")}}function tt(r,t){if(r&1&&(i(0,"p",38),s(1),o()),r&2){let e=d();a(),b(" ",e.getFieldError("hourly_rate")," ")}}function nt(r,t){r&1&&(i(0,"div",55),s(1,"Loading locations..."),o())}function it(r,t){if(r&1&&(i(0,"div",56),s(1),o()),r&2){let e=d(2);a(),h(e.treeError)}}function ot(r,t){if(r&1&&(i(0,"div"),p(1,"ng-select",57),o()),r&2){let e=d(2);a(),c("items",e.flatLocationOptions)("multiple",!0)("closeOnSelect",!1)("searchable",!0)}}function rt(r,t){if(r&1){let e=C();i(0,"div",44)(1,"div",45)(2,"div",46),s(3,"Location Scope"),o(),i(4,"button",47),u("click",function(){x(e);let l=d();return v(l.clearSelection())}),s(5,"Clear selection (Full access)"),o()(),i(6,"div",48),p(7,"input",49),i(8,"label",50),s(9,"Include descendants (recommended)"),o()(),f(10,nt,2,0,"div",51)(11,it,2,1,"div",52)(12,ot,2,4,"div",53),i(13,"p",54),s(14,"No selection means full access to all locations."),o()()}if(r&2){let e=d();a(10),c("ngIf",e.loadingTree),a(),c("ngIf",e.treeError),a(),c("ngIf",!e.loadingTree&&!e.treeError)}}function at(r,t){r&1&&(g(),i(0,"svg",58),p(1,"circle",59)(2,"path",60),o())}var ee=class r{constructor(t,e,n,l,m){this.fb=t;this.teamService=e;this.roleService=n;this.locationTreeService=l;this.toastService=m;this.teamMemberForm=this.fb.group({first_name:["",[y.required,y.minLength(2),y.maxLength(100)]],last_name:["",[y.required,y.minLength(2),y.maxLength(100)]],email:["",[y.required,y.email]],role_id:["",[y.required]],hourly_rate:[null,[y.min(0)]],location_ids:[[]],expand_descendants:[!0],password:["",[y.minLength(8),y.maxLength(72)]],password_confirmation:[""]},{validators:r.passwordMatchValidator}),this.loadAvailableRoles()}teamMember=null;isEditMode=!1;teamMemberSaved=new O;cancelled=new O;teamMemberForm;loading=!1;error="";availableRoles=[];loadingRoles=!1;rolesError="";locationTree=[];loadingTree=!1;treeError="";expandDescendants=!0;flatLocationOptions=[];ngOnInit(){this.teamMember&&this.isEditMode&&this.teamService.getTeamMember(this.teamMember.id).subscribe({next:t=>{this.teamMember=t.data,this.loadTeamMember()},error:()=>{this.loadTeamMember()}}),this.teamMemberForm.get("role_id")?.valueChanges.subscribe(t=>{let e=this.availableRoles.find(n=>n.id===Number(t));if(e&&e.has_location_access){if(this.ensureTreeLoaded(),this.isEditMode&&this.teamMember&&Array.isArray(this.teamMember.locations)){let n=this.teamMember.locations.map(l=>l.id);n.length>0&&this.teamMember.has_full_location_access===!1&&this.teamMemberForm.patchValue({location_ids:n})}}else this.teamMemberForm.patchValue({location_ids:[]})})}ngOnChanges(t){t.teamMember&&t.teamMember.currentValue&&this.isEditMode&&(this.availableRoles.length>0?this.loadTeamMember():setTimeout(()=>{this.availableRoles.length>0&&this.loadTeamMember()},100))}updateFormWithTeamMember(){this.teamMember&&this.isEditMode&&this.availableRoles.length>0&&this.loadTeamMember()}loadAvailableRoles(){this.loadingRoles=!0,this.rolesError="",this.roleService.getRoles().subscribe({next:t=>{this.availableRoles=t.data||[],this.loadingRoles=!1,this.isEditMode&&this.teamMember&&this.loadTeamMember()},error:t=>{this.teamService.getAvailableRoles().subscribe({next:e=>{this.availableRoles=e.data||[],this.loadingRoles=!1,this.isEditMode&&this.teamMember&&this.loadTeamMember()},error:e=>{this.rolesError="Failed to load roles. Please try again.",this.loadingRoles=!1,this.toastService.error("Failed to load available roles")}})}})}loadTeamMember(){if(this.teamMember){let t=this.teamMember.role_id||this.teamMember.role?.id||(Array.isArray(this.teamMember.roles)?this.teamMember.roles[0]?.id:void 0),e=this.teamMember.hourly_rate,n=t?Number(t):"";this.teamMemberForm.patchValue({first_name:this.teamMember.first_name,last_name:this.teamMember.last_name,email:this.teamMember.email,role_id:n,hourly_rate:e!=null?Number(e):null,expand_descendants:!0});let l=this.availableRoles.find(m=>m.id===Number(n));if(l&&l.has_location_access){this.ensureTreeLoaded();let m=Array.isArray(this.teamMember.locations)?this.teamMember.locations.map(w=>w.id):[];m.length>0&&this.teamMember.has_full_location_access===!1?this.teamMemberForm.patchValue({location_ids:m}):this.teamMemberForm.patchValue({location_ids:[]})}}}onBackdropClick(t){t.target===t.currentTarget&&this.onCancel()}onSubmit(){if(this.teamMemberForm.invalid){this.markFormGroupTouched(),this.toastService.warning("Please fill in all required fields correctly");return}this.loading=!0,this.error="";let t=V({},this.teamMemberForm.value);t.location_ids=t.location_ids&&t.location_ids.length>0?t.location_ids:null,(t.expand_descendants===void 0||t.expand_descendants===null)&&(t.expand_descendants=!0),(!t.password||t.password.trim()==="")&&(delete t.password,delete t.password_confirmation),this.isEditMode&&this.teamMember?this.teamService.updateTeamMember(this.teamMember.id,t).subscribe({next:e=>{this.loading=!1,this.teamMemberSaved.emit(e.data)},error:e=>{this.loading=!1,this.error=e.error?.message||"Failed to update team member. Please try again.",this.toastService.error(this.error)}}):this.teamService.createTeamMember(t).subscribe({next:e=>{this.loading=!1,this.teamMemberSaved.emit(e.data)},error:e=>{this.loading=!1,this.error=e.error?.message||"Failed to create team member. Please try again.",this.toastService.error(this.error)}})}onCancel(){this.cancelled.emit()}getFieldError(t){let e=this.teamMemberForm.get(t);if(e?.invalid&&(e?.dirty||e?.touched)){if(e?.errors?.required)return`${this.getFieldLabel(t)} is required.`;if(e?.errors?.email)return"Please enter a valid email address.";if(e?.errors?.minlength)return`${this.getFieldLabel(t)} must be at least ${e.errors.minlength.requiredLength} characters.`;if(e?.errors?.maxlength)return`${this.getFieldLabel(t)} must not exceed ${e.errors.maxlength.requiredLength} characters.`;if(e?.errors?.min)return`${this.getFieldLabel(t)} must be at least ${e.errors.min.min}.`;if(e?.errors?.passwordMismatch)return"Password confirmation does not match."}return t==="password_confirmation"&&this.teamMemberForm.hasError("passwordMismatch")?"Password confirmation does not match.":""}getFieldLabel(t){return{first_name:"First name",last_name:"Last name",email:"Email",role_id:"Team role",hourly_rate:"Hourly rate",password:"Password",password_confirmation:"Confirm Password"}[t]||t}markFormGroupTouched(){Object.keys(this.teamMemberForm.controls).forEach(t=>{this.teamMemberForm.get(t)?.markAsTouched()})}get selectedRole(){let t=this.teamMemberForm.get("role_id")?.value;return this.availableRoles.find(e=>e.id===Number(t))}get showLocationScope(){return!!this.selectedRole?.has_location_access}ensureTreeLoaded(){this.locationTree.length>0||this.loadingTree||(this.loadingTree=!0,this.treeError="",this.locationTreeService.getTree().subscribe({next:t=>{this.locationTree=t,this.flatLocationOptions=this.flatten(t),this.loadingTree=!1},error:t=>{this.treeError="Failed to load locations tree.",this.loadingTree=!1,this.toastService.error("Failed to load location tree")}}))}isChecked(t){return(this.teamMemberForm.get("location_ids")?.value||[]).includes(t)}toggleNode(t,e){let n=this.teamMemberForm.get("location_ids"),l=[...n?.value||[]],m=this.collectIds(t);e?m.forEach(w=>{l.includes(w)||l.push(w)}):m.forEach(w=>{let E=l.indexOf(w);E>=0&&l.splice(E,1)}),n?.setValue(l)}clearSelection(){this.teamMemberForm.patchValue({location_ids:[]})}collectIds(t){let e=[t.id];return t.children&&t.children.length&&t.children.forEach(n=>e.push(...this.collectIds(n))),e}flatten(t,e=0,n=[]){for(let l of t)n.push({id:l.id,label:`${"\u2014 ".repeat(e)}${l.name}`}),l.children?.length&&this.flatten(l.children,e+1,n);return n}static passwordMatchValidator(t){let e=t.get("password"),n=t.get("password_confirmation");return!e||!n?null:e.value&&n.value!==e.value?(n.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(n.hasError("passwordMismatch")&&n.setErrors(null),null)}static \u0275fac=function(e){return new(e||r)(T(Pe),T(K),T(Ve),T(X),T(U))};static \u0275cmp=F({type:r,selectors:[["app-team-form-modal"]],inputs:{teamMember:"teamMember",isEditMode:"isEditMode"},outputs:{teamMemberSaved:"teamMemberSaved",cancelled:"cancelled"},features:[ce],decls:53,vars:26,consts:[[1,"modal-overlay","fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-4xl","mx-4","transform","transition-all"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-6","py-4"],[3,"ngSubmit","formGroup"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],[1,"mb-4"],["for","first_name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","first_name","type","text","formControlName","first_name","placeholder","Enter first name",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","last_name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","last_name","type","text","formControlName","last_name","placeholder","Enter last name",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","type","email","formControlName","email","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["class","mb-4",4,"ngIf"],["for","role_id",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","role_id","formControlName","role_id",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","hourly_rate",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","hourly_rate","type","number","formControlName","hourly_rate","placeholder","Enter hourly rate","min","0","step","0.01",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],[1,"mt-1","text-xs","text-gray-500"],["class","mb-4 border rounded-lg p-3 bg-gray-50",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-200"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-2 h-4 w-4 text-white inline","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-2","text-sm","text-red-700"],[1,"mt-1","text-sm","text-red-600"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password","type","password","formControlName","password","placeholder","Enter custom password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password_confirmation","type","password","formControlName","password_confirmation","placeholder","Confirm password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],[3,"value"],[1,"mb-4","border","rounded-lg","p-3","bg-gray-50"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-gray-800"],["type","button",1,"text-sm","text-blue-600","hover:underline",3,"click"],[1,"flex","items-center","mb-3"],["type","checkbox","id","expand_descendants","formControlName","expand_descendants",1,"mr-2"],["for","expand_descendants",1,"text-sm","text-gray-700"],["class","text-sm text-gray-500",4,"ngIf"],["class","text-sm text-red-600",4,"ngIf"],[4,"ngIf"],[1,"mt-2","text-xs","text-gray-500"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-red-600"],["bindLabel","label","bindValue","id","placeholder","Select locations (empty = full access)","formControlName","location_ids",3,"items","multiple","closeOnSelect","searchable"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white","inline"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){if(e&1&&(i(0,"div",0),u("click",function(m){return n.onBackdropClick(m)}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),s(5),o(),i(6,"button",5),u("click",function(){return n.onCancel()}),g(),i(7,"svg",6),p(8,"path",7),o()()()(),_(),i(9,"div",8)(10,"form",9),u("ngSubmit",function(){return n.onSubmit()}),f(11,Be,6,1,"div",10),i(12,"div",11)(13,"div",12)(14,"label",13),s(15," First Name * "),o(),p(16,"input",14),f(17,Ge,2,1,"p",15),o(),i(18,"div",12)(19,"label",16),s(20," Last Name * "),o(),p(21,"input",17),f(22,qe,2,1,"p",15),o(),i(23,"div",12)(24,"label",18),s(25," Email * "),o(),p(26,"input",19),f(27,Ye,2,1,"p",15),o(),f(28,Ue,7,3,"div",20)(29,Ke,5,3,"div",20),i(30,"div",12)(31,"label",21),s(32," Team Role * "),o(),i(33,"select",22)(34,"option",23),s(35,"Select a role"),o(),f(36,Qe,2,2,"option",24),o(),f(37,Xe,2,1,"p",15)(38,et,2,1,"p",15),o(),i(39,"div",12)(40,"label",25),s(41," Hourly Rate (Optional) "),o(),p(42,"input",26),f(43,tt,2,1,"p",15),i(44,"p",27),s(45," Optional hourly rate for this team member "),o()()(),f(46,rt,15,3,"div",28),i(47,"div",29)(48,"button",30),u("click",function(){return n.onCancel()}),s(49," Cancel "),o(),i(50,"button",31),f(51,at,3,0,"svg",32),s(52),o()()()()()()),e&2){let l,m,w,E,j;a(5),b(" ",n.isEditMode?"Edit Team Member":"Invite New Team Member"," "),a(5),c("formGroup",n.teamMemberForm),a(),c("ngIf",n.error),a(5),M("border-red-300",((l=n.teamMemberForm.get("first_name"))==null?null:l.invalid)&&(((l=n.teamMemberForm.get("first_name"))==null?null:l.dirty)||((l=n.teamMemberForm.get("first_name"))==null?null:l.touched))),a(),c("ngIf",n.getFieldError("first_name")),a(4),M("border-red-300",((m=n.teamMemberForm.get("last_name"))==null?null:m.invalid)&&(((m=n.teamMemberForm.get("last_name"))==null?null:m.dirty)||((m=n.teamMemberForm.get("last_name"))==null?null:m.touched))),a(),c("ngIf",n.getFieldError("last_name")),a(4),M("border-red-300",((w=n.teamMemberForm.get("email"))==null?null:w.invalid)&&(((w=n.teamMemberForm.get("email"))==null?null:w.dirty)||((w=n.teamMemberForm.get("email"))==null?null:w.touched))),a(),c("ngIf",n.getFieldError("email")),a(),c("ngIf",!n.isEditMode),a(),c("ngIf",!n.isEditMode),a(4),M("border-red-300",((E=n.teamMemberForm.get("role_id"))==null?null:E.invalid)&&(((E=n.teamMemberForm.get("role_id"))==null?null:E.dirty)||((E=n.teamMemberForm.get("role_id"))==null?null:E.touched))),a(3),c("ngForOf",n.availableRoles),a(),c("ngIf",n.getFieldError("role_id")),a(),c("ngIf",n.rolesError),a(4),M("border-red-300",((j=n.teamMemberForm.get("hourly_rate"))==null?null:j.invalid)&&(((j=n.teamMemberForm.get("hourly_rate"))==null?null:j.dirty)||((j=n.teamMemberForm.get("hourly_rate"))==null?null:j.touched))),a(),c("ngIf",n.getFieldError("hourly_rate")),a(3),c("ngIf",n.showLocationScope),a(4),c("disabled",n.teamMemberForm.invalid||n.loading),a(),c("ngIf",n.loading),a(),b(" ",n.isEditMode?"Update Team Member":"Send Invitation"," ")}},dependencies:[S,Z,N,J,ye,Oe,Ie,P,Te,we,Ee,L,Ce,Fe,Se,ke,k,Ae,De],styles:[".modal-overlay[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-enter[_ngcontent-%COMP%]{opacity:0;transform:scale(.9)}.modal-enter-active[_ngcontent-%COMP%]{opacity:1;transform:scale(1);transition:opacity .2s ease-out,transform .2s ease-out}.modal-exit[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.modal-exit-active[_ngcontent-%COMP%]{opacity:0;transform:scale(.9);transition:opacity .2s ease-in,transform .2s ease-in}.backdrop-enter[_ngcontent-%COMP%]{opacity:0}.backdrop-enter-active[_ngcontent-%COMP%]{opacity:1;transition:opacity .2s ease-out}.backdrop-exit[_ngcontent-%COMP%]{opacity:1}.backdrop-exit-active[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s ease-in}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);transition:transform .1s ease-in-out}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};function lt(r,t){if(r&1&&(i(0,"div",14),s(1),o()),r&2){let e=d();a(),b(" ",e.errorMessage," ")}}function st(r,t){r&1&&(i(0,"span"),s(1,"Assigning..."),o())}function mt(r,t){r&1&&(i(0,"span"),s(1,"Assign Work Order"),o())}var te=class r{constructor(t){this.workOrderService=t}teamMemberName="";teamMemberId=0;closed=new O;submitted=new O;workOrders=[];selectedWorkOrderId=null;selectedWorkOrder=null;dueDate="";notes="";loading=!1;errorMessage="";ngOnInit(){this.fetchWorkOrders()}fetchWorkOrders(){this.loading=!0,this.workOrderService.getWorkOrders({page:1,per_page:1e3}).subscribe({next:t=>{this.workOrders=(t.data||[]).map(e=>({id:e.id,name:e.title,description:e.description||`Status: ${e.status_id}`,icon:"work-order"})),this.loading=!1},error:t=>{console.error("Error fetching work orders:",t),this.errorMessage="Failed to load work orders",this.loading=!1}})}submit(){if(!this.selectedWorkOrderId){this.errorMessage="Please select a work order";return}this.errorMessage="",this.workOrderService.assignWorkOrder(this.selectedWorkOrderId,{user_id:this.teamMemberId,due_date:this.dueDate||void 0,notes:this.notes||void 0}).subscribe({next:t=>{this.submitted.emit({work_order_id:this.selectedWorkOrderId,due_date:this.dueDate||void 0,notes:this.notes||void 0})},error:t=>{console.error("Error assigning work order:",t),t.error&&t.error.message?this.errorMessage=t.error.message:this.errorMessage="Failed to assign work order. Please try again."}})}selectWorkOrder(t){this.selectedWorkOrder=t,this.selectedWorkOrderId=t.id,this.errorMessage=""}onInputChange(){this.errorMessage=""}close(){this.closed.emit()}static \u0275fac=function(e){return new(e||r)(T(Re))};static \u0275cmp=F({type:r,selectors:[["app-assign-work-order-modal"]],inputs:{teamMemberName:"teamMemberName",teamMemberId:"teamMemberId"},outputs:{closed:"closed",submitted:"submitted"},decls:26,vars:12,consts:[[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"subtitle"],["class","error-message",4,"ngIf"],[1,"form-group"],["label","Available Work Orders","placeholder","Select a work order",3,"selectionChange","required","options","selectedOption","searchable","disabled"],["type","datetime-local",1,"input",3,"ngModelChange","input","ngModel"],["rows","5","placeholder","Add any specific instructions or notes for this assignment...",1,"textarea",3,"ngModelChange","input","ngModel"],[1,"modal-actions"],[1,"btn","secondary",3,"click"],[1,"btn","primary",3,"click","disabled"],[4,"ngIf"],[1,"error-message"]],template:function(e,n){e&1&&(i(0,"div",0),u("click",function(){return n.close()}),i(1,"div",1),u("click",function(m){return m.stopPropagation()}),i(2,"div",2)(3,"h3"),s(4),o(),i(5,"button",3),u("click",function(){return n.close()}),s(6,"\xD7"),o()(),i(7,"p",4),s(8,"Select a work order to assign to this team member"),o(),f(9,lt,2,1,"div",5),i(10,"div",6)(11,"app-global-dropdown",7),u("selectionChange",function(m){return n.selectWorkOrder(m)}),o()(),i(12,"div",6)(13,"label"),s(14,"Due Date (Optional)"),o(),i(15,"input",8),R("ngModelChange",function(m){return A(n.dueDate,m)||(n.dueDate=m),m}),u("input",function(){return n.onInputChange()}),o()(),i(16,"div",6)(17,"label"),s(18,"Assignment Notes (Optional)"),o(),i(19,"textarea",9),R("ngModelChange",function(m){return A(n.notes,m)||(n.notes=m),m}),u("input",function(){return n.onInputChange()}),o()(),i(20,"div",10)(21,"button",11),u("click",function(){return n.close()}),s(22,"Cancel"),o(),i(23,"button",12),u("click",function(){return n.submit()}),f(24,st,2,0,"span",13)(25,mt,2,0,"span",13),o()()()()),e&2&&(a(4),b("Assign Work Order to ",n.teamMemberName,""),a(5),c("ngIf",n.errorMessage),a(2),c("required",!0)("options",n.workOrders)("selectedOption",n.selectedWorkOrder)("searchable",!0)("disabled",n.loading),a(4),D("ngModel",n.dueDate),a(4),D("ngModel",n.notes),a(4),c("disabled",!n.selectedWorkOrderId||n.loading),a(),c("ngIf",n.loading),a(),c("ngIf",!n.loading))},dependencies:[S,N,k,P,L,W,Le],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;width:90%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#6b7280;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;color:#374151}.subtitle[_ngcontent-%COMP%]{margin:0 24px 20px;color:#6b7280;font-size:14px}.form-group[_ngcontent-%COMP%]{margin:0 24px 20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#374151;font-size:14px}.input[_ngcontent-%COMP%], .textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #d1d5db;border-radius:8px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.input[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.error-message[_ngcontent-%COMP%]{margin:0 24px 20px;padding:12px 16px;background-color:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:14px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 24px 24px;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s;border:none}.btn.secondary[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn.secondary[_ngcontent-%COMP%]:hover{background-color:#e5e7eb}.btn.primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn.primary[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}.required[_ngcontent-%COMP%]{color:#dc2626;margin-left:4px}.generic-dropdown[_ngcontent-%COMP%]{position:relative;width:100%}.dropdown-button[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #d1d5db;border-radius:8px;background:#fff;cursor:pointer;transition:all .2s;text-align:left;font-size:14px;min-height:48px;display:flex;align-items:center;justify-content:space-between}.dropdown-button[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#9ca3af}.dropdown-button[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.dropdown-button.active[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.dropdown-button[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;color:#9ca3af;cursor:not-allowed;border-color:#e5e7eb}.dropdown-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.placeholder[_ngcontent-%COMP%]{color:#9ca3af;font-style:italic}.selected-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%}.item-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;flex-shrink:0}.icon[_ngcontent-%COMP%]{width:16px;height:16px;color:#6b7280}.selected-text[_ngcontent-%COMP%]{color:#111827;font-weight:500;flex:1}.dropdown-arrow[_ngcontent-%COMP%]{width:20px;height:20px;color:#6b7280;transition:transform .2s;flex-shrink:0}.dropdown-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #d1d5db;border-top:none;border-radius:0 0 8px 8px;box-shadow:0 10px 15px -3px #0000001a;z-index:10;max-height:300px;overflow-y:auto}.dropdown-header[_ngcontent-%COMP%]{padding:12px 16px;background-color:#f9fafb;border-bottom:1px solid #e5e7eb;font-weight:500;color:#374151;font-size:14px}.dropdown-item[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;background:none;text-align:left;cursor:pointer;transition:background-color .2s;border-bottom:1px solid #f3f4f6}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dropdown-item.selected[_ngcontent-%COMP%]{background-color:#eff6ff;color:#1d4ed8}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.item-details[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-weight:500;color:#111827;margin-bottom:2px}.item-description[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.4}"]})};var Ne=(r,t)=>t.value;function dt(r,t){if(r&1){let e=C();i(0,"div",51)(1,"div",60)(2,"div",61),s(3),o(),i(4,"div",62)(5,"button",63),u("click",function(){x(e);let l=d(2);return v(l.loadTeamMembers(l.pagination.current_page-1))}),s(6," Prev "),o(),i(7,"span",64),s(8),o(),i(9,"button",63),u("click",function(){x(e);let l=d(2);return v(l.loadTeamMembers(l.pagination.current_page+1))}),s(10," Next "),o()()()()}if(r&2){let e=d(2);a(3),_e(" Showing ",e.pagination.from," - ",e.pagination.to," of ",e.pagination.total," "),a(2),c("disabled",e.pagination.current_page<=1),a(3),Y("Page ",e.pagination.current_page," / ",e.pagination.last_page,""),a(),c("disabled",e.pagination.current_page>=e.pagination.last_page)}}function ct(r,t){if(r&1&&(i(0,"div",8)(1,"div",55),g(),i(2,"svg",56),p(3,"path",57),o(),_(),i(4,"span",58),s(5),o()(),f(6,dt,11,7,"div",59),o()),r&2){let e=d();a(5),h(e.successMessage),a(),c("ngIf",e.pagination)}}function pt(r,t){if(r&1&&(i(0,"p",18),s(1),o()),r&2){let e=d();a(),b("",(e.statistics==null?null:e.statistics.active_team_members)||0," Active")}}function ut(r,t){r&1&&(g(),i(0,"svg",69),p(1,"path",70),o())}function gt(r,t){if(r&1){let e=C();i(0,"div",67),u("click",function(){let l=x(e).$implicit,m=d(2);return v(m.selectSort(l))}),i(1,"span"),s(2),o(),f(3,ut,2,0,"svg",68),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedSort==null?null:n.selectedSort.value)===e.value),a(2),h(e.label),a(),c("ngIf",(n.selectedSort==null?null:n.selectedSort.value)===e.value)}}function ft(r,t){if(r&1&&(i(0,"div",47)(1,"div",65),f(2,gt,4,4,"div",66),o()()),r&2){let e=d();a(2),c("ngForOf",e.sortOptions)}}function _t(r,t){r&1&&(g(),i(0,"svg",69),p(1,"path",70),o())}function bt(r,t){if(r&1){let e=C();i(0,"div",67),u("click",function(){let l=x(e).$implicit,m=d(2);return v(m.selectRole(l))}),i(1,"span"),s(2),o(),f(3,_t,2,0,"svg",68),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedRole==null?null:n.selectedRole.value)===e.value),a(2),h(e.label),a(),c("ngIf",(n.selectedRole==null?null:n.selectedRole.value)===e.value)}}function ht(r,t){if(r&1&&(i(0,"div",47)(1,"div",65),ie(2,bt,4,4,"div",71,Ne),o()()),r&2){let e=d();a(2),oe(e.roleOptions)}}function xt(r,t){r&1&&(g(),i(0,"svg",69),p(1,"path",70),o())}function vt(r,t){if(r&1){let e=C();i(0,"div",67),u("click",function(){let l=x(e).$implicit,m=d(2);return v(m.selectStatus(l))}),i(1,"span"),s(2),o(),f(3,xt,2,0,"svg",68),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value),a(2),h(e.label),a(),c("ngIf",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value)}}function Mt(r,t){if(r&1&&(i(0,"div",47)(1,"div",65),ie(2,vt,4,4,"div",71,Ne),o()()),r&2){let e=d();a(2),oe(e.statusOptions)}}function wt(r,t){if(r&1&&(i(0,"div",48)(1,"div",72),g(),i(2,"svg",73),p(3,"path",74),o(),_(),i(4,"p",75),s(5),o()()()),r&2){let e=d();a(5),h(e.error)}}function Ct(r,t){if(r&1){let e=C();i(0,"div",112)(1,"div",65)(2,"button",113),u("click",function(){x(e);let l=d().$implicit,m=d(2);return v(m.editTeamMember(l))}),g(),i(3,"svg",114),p(4,"path",115),o(),_(),i(5,"span"),s(6,"Edit Member"),o()(),i(7,"button",116),g(),i(8,"svg",117),p(9,"path",118),o(),s(10," Inactive "),o(),_(),i(11,"button",119),u("click",function(){x(e);let l=d().$implicit,m=d(2);return v(m.deleteTeamMember(l))}),g(),i(12,"svg",120),p(13,"path",121),o(),_(),i(14,"span"),s(15,"Remove Member"),o()()()()}}function yt(r,t){if(r&1&&(i(0,"div",122),g(),i(1,"svg",100),p(2,"path",123),o(),_(),i(3,"span"),s(4),o()()),r&2){let e=d().$implicit;a(4),h(e.role.name)}}function Tt(r,t){if(r&1&&(i(0,"div",124),g(),i(1,"svg",100),p(2,"path",125),o(),_(),i(3,"span"),s(4),o()()),r&2){let e=d().$implicit;a(4),b("$",e.hourly_rate,"/hour")}}function St(r,t){r&1&&(i(0,"span",126),s(1,"Full access"),o())}function kt(r,t){if(r&1&&(i(0,"span",129),s(1),o()),r&2){let e=t.$implicit;a(),b(" ",e.name," ")}}function Et(r,t){if(r&1&&(ge(0),i(1,"div",127),f(2,kt,2,1,"span",128),o(),fe()),r&2){let e=d().$implicit;a(2),c("ngForOf",e.locations)}}function Ot(r,t){if(r&1){let e=C();i(0,"div",77)(1,"div",78)(2,"div",11)(3,"div",55)(4,"div",79),g(),i(5,"svg",80),p(6,"path",81),o()(),_(),i(7,"div")(8,"span",82),s(9),o(),i(10,"div",83),s(11),o()()(),i(12,"div",84)(13,"button",85),u("click",function(){let l=x(e).$implicit,m=d(2);return v(m.openAssign(l))}),g(),i(14,"svg",86),p(15,"path",87)(16,"path",88),o(),_(),i(17,"span"),s(18,"Assign"),o()(),i(19,"button",89),u("click",function(){let l=x(e).$implicit,m=d(2);return v(m.toggleTeamMemberMenu(l.id))}),g(),i(20,"svg",90),p(21,"path",91),o()(),f(22,Ct,16,0,"div",92),o()()(),_(),i(23,"div",93)(24,"h3",94),s(25),o(),i(26,"p",95),s(27),o(),f(28,yt,5,1,"div",96)(29,Tt,5,1,"div",97),i(30,"div",98)(31,"div",99),g(),i(32,"svg",100),p(33,"path",101),o(),_(),i(34,"span"),s(35),be(36,"date"),o()(),i(37,"div",102),f(38,St,2,0,"span",103)(39,Et,3,1,"ng-container",104),o()(),p(40,"hr",105),i(41,"div",106)(42,"div",107)(43,"div",108),s(44),o(),i(45,"div",109),s(46,"Assigned"),o()(),i(47,"div",107)(48,"div",110),s(49),o(),i(50,"div",109),s(51,"Active"),o()(),i(52,"div",107)(53,"div",111),s(54),o(),i(55,"div",109),s(56,"Completed"),o()()()()()}if(r&2){let e,n,l,m=t.$implicit,w=d(2);a(9),b(" ",w.getTeamMemberFullName(m)," "),a(2),h(m.roles[0].name),a(11),c("ngIf",m.showMenu),a(3),h(w.getTeamMemberFullName(m)),a(2),h(m.email),a(),c("ngIf",m.role),a(),c("ngIf",m.hourly_rate!==void 0&&m.hourly_rate!==null),a(6),b("Created ",he(36,13,m.created_at,"MMM d, y"),""),a(3),c("ngIf",m.has_full_location_access),a(),c("ngIf",!m.has_full_location_access&&(m.locations==null?null:m.locations.length)),a(5),h((e=(e=m.assigned_work_orders_total_count)!==null&&e!==void 0?e:m.assigned_work_orders_count)!==null&&e!==void 0?e:0),a(5),h((n=m.assigned_work_orders_active_count)!==null&&n!==void 0?n:0),a(5),h((l=m.assigned_work_orders_completed_count)!==null&&l!==void 0?l:0)}}function It(r,t){if(r&1&&(i(0,"div",50),f(1,Ot,57,16,"div",76),o()),r&2){let e=d();a(),c("ngForOf",e.filteredTeamMembers)}}function Ft(r,t){if(r&1){let e=C();i(0,"div",51)(1,"div",130),g(),i(2,"svg",131),p(3,"path",132),o(),_(),i(4,"h3",133),s(5,"No team members found"),o(),i(6,"p",134),s(7),o(),i(8,"div",135)(9,"button",136),u("click",function(){x(e);let l=d();return v(l.createTeamMember())}),g(),i(10,"svg",6),p(11,"path",7),o(),s(12," Invite Team Member "),o()()()()}if(r&2){let e=d();a(7),b(" ",e.searchTerm?"Try adjusting your search terms.":"Get started by inviting your first team member."," ")}}function Pt(r,t){r&1&&(i(0,"div",51)(1,"div",137),p(2,"div",138),o()())}function Lt(r,t){if(r&1){let e=C();i(0,"app-team-delete-confirmation-modal",139),u("confirmed",function(l){x(e);let m=d();return v(m.confirmDeleteTeamMember(l))})("cancelled",function(){x(e);let l=d();return v(l.closeDeleteModal())}),o()}if(r&2){let e=d();c("teamMember",e.teamMemberToDelete)}}function Vt(r,t){if(r&1){let e=C();i(0,"app-team-form-modal",140),u("teamMemberSaved",function(l){x(e);let m=d();return v(m.onTeamMemberSaved(l))})("cancelled",function(){x(e);let l=d();return v(l.closeFormModal())}),o()}if(r&2){let e=d();c("teamMember",e.teamMemberToEdit)("isEditMode",e.isEditMode)}}function Dt(r,t){if(r&1){let e=C();i(0,"app-assign-work-order-modal",141),u("closed",function(){x(e);let l=d();return v(l.closeAssign())})("submitted",function(l){x(e);let m=d();return v(m.onAssignmentSubmitted(l))}),o()}if(r&2){let e=d();c("teamMemberName",e.teamMemberToAssign?e.getTeamMemberFullName(e.teamMemberToAssign):"")("teamMemberId",e.teamMemberToAssign?e.teamMemberToAssign.id:0)}}var H=class r{constructor(t,e){this.teamService=t;this.toastService=e}teamMembers=[];filteredTeamMembers=[];pagination=null;loading=!1;error="";successMessage="";statistics=null;analytics=null;searchTerm="";selectedSort=null;selectedRole={label:"All Roles",value:""};selectedStatus={label:"All Status",value:""};selectedSortDir="asc";showSortDropdown=!1;showRoleDropdown=!1;showStatusDropdown=!1;showDeleteModal=!1;teamMemberToDelete=null;showFormModal=!1;teamMemberToEdit=null;isEditMode=!1;showAssignModal=!1;teamMemberToAssign=null;sortOptions=[{label:"Name",value:"name"},{label:"Created Date",value:"created_at"},{label:"Email",value:"email"},{label:"Role",value:"role"}];roleOptions=[{label:"All Roles",value:""},{label:"Admin",value:"admin"},{label:"User",value:"user"},{label:"Technician",value:"technician"}];statusOptions=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];onDocumentClick(t){let e=t.target,n=e.closest("button"),l=e.closest(".dropdown-menu");n||l||(this.teamMembers=this.teamMembers.map(m=>z(V({},m),{showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(m=>z(V({},m),{showMenu:!1})))}ngOnInit(){this.loadTeamMembers(),this.loadStatistics()}loadTeamMembers(t=1){this.loading=!0,this.error="",this.teamService.getTeamMembers(t,15,{search:this.searchTerm||void 0,role_name:this.selectedRole?.value||void 0,status:this.selectedStatus?.value||void 0,sort_by:this.selectedSort?.value||void 0,sort_dir:this.selectedSortDir}).subscribe({next:e=>{this.teamMembers=e.data.teams,this.pagination=e.data.pagination,this.filteredTeamMembers=[...this.teamMembers],this.loading=!1},error:e=>{this.error="Failed to load team members",this.loading=!1,this.toastService.error("Failed to load team members")}})}loadStatistics(){this.teamService.getTeamMemberStatistics().subscribe({next:t=>{this.statistics=t.data},error:t=>{this.toastService.error("Failed to load team statistics")}}),this.teamService.getTeamAnalytics({date_range:30}).subscribe({next:t=>{this.analytics=t.data},error:t=>{this.toastService.error("Failed to load team analytics")}})}refreshStats(){this.loadStatistics()}createTeamMember(){this.teamMemberToEdit=null,this.isEditMode=!1,this.showFormModal=!0}editTeamMember(t){this.teamMemberToEdit=t,this.isEditMode=!0,this.showFormModal=!0}openAssign(t){this.teamMemberToAssign=t,this.showAssignModal=!0}closeAssign(){this.showAssignModal=!1,this.teamMemberToAssign=null}onAssignmentSubmitted(t){this.toastService.success(`Work order successfully assigned to ${this.teamMemberToAssign?.first_name} ${this.teamMemberToAssign?.last_name}`),this.loadTeamMembers(),this.closeAssign()}viewTeamMember(t){this.toastService.info("View team member feature coming soon")}deleteTeamMember(t){this.teamMemberToDelete=t,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.teamMemberToDelete=null}confirmDeleteTeamMember(t){if(!this.teamMemberToDelete)return;let e=`${this.teamMemberToDelete.first_name} ${this.teamMemberToDelete.last_name}`;this.teamService.deleteTeamMember(this.teamMemberToDelete.id).subscribe({next:n=>{this.teamMembers=this.teamMembers.filter(l=>l.id!==this.teamMemberToDelete.id),this.filteredTeamMembers=this.filteredTeamMembers.filter(l=>l.id!==this.teamMemberToDelete.id),this.toastService.success(`Team member ${e} removed successfully`),this.closeDeleteModal()},error:n=>{this.error="Failed to delete team member",this.toastService.error("Failed to delete team member"),this.closeDeleteModal()}})}closeFormModal(){this.showFormModal=!1,this.teamMemberToEdit=null,this.isEditMode=!1}onTeamMemberSaved(t){let e=`${t.first_name} ${t.last_name}`;if(this.isEditMode){let n=this.teamMembers.findIndex(l=>l.id===t.id);n!==-1&&(this.teamMembers[n]=t,this.filteredTeamMembers=this.filteredTeamMembers.map(l=>l.id===t.id?t:l)),this.toastService.success(`Team member ${e} updated successfully`)}else this.teamMembers.unshift(t),this.filteredTeamMembers.unshift(t),this.toastService.success(`Team member ${e} created successfully`);this.closeFormModal()}onSearchChange(){this.loadTeamMembers(1)}filterTeamMembers(){this.searchTerm.trim()?this.filteredTeamMembers=this.teamMembers.filter(t=>`${t.first_name} ${t.last_name}`.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase())||t.role?.name&&t.role.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredTeamMembers=[...this.teamMembers],this.sortTeamMembers()}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}toggleRoleDropdown(){this.showRoleDropdown=!this.showRoleDropdown}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown}selectSort(t){this.selectedSort=t,this.showSortDropdown=!1,this.loadTeamMembers(1)}selectRole(t){this.selectedRole=t,this.showRoleDropdown=!1,this.loadTeamMembers(1)}selectStatus(t){this.selectedStatus=t,this.showStatusDropdown=!1,this.loadTeamMembers(1)}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.loadTeamMembers(1)}sortTeamMembers(){this.selectedSort&&this.filteredTeamMembers.sort((t,e)=>{let n,l;switch(this.selectedSort.value){case"name":n=`${t.first_name} ${t.last_name}`.toLowerCase(),l=`${e.first_name} ${e.last_name}`.toLowerCase();break;case"email":n=t.email.toLowerCase(),l=e.email.toLowerCase();break;case"created_at":n=new Date(t.created_at).getTime(),l=new Date(e.created_at).getTime();break;case"role":n=(t.role?.name||"").toLowerCase(),l=(e.role?.name||"").toLowerCase();break;default:n=`${t.first_name} ${t.last_name}`.toLowerCase(),l=`${e.first_name} ${e.last_name}`.toLowerCase()}return n<l?this.selectedSortDir==="asc"?-1:1:n>l?this.selectedSortDir==="asc"?1:-1:0})}getTeamMemberFullName(t){return`${t.first_name} ${t.last_name}`}getTeamMemberInitials(t){return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase()}toggleTeamMemberMenu(t){this.teamMembers=this.teamMembers.map(e=>z(V({},e),{showMenu:e.id===t?!e.showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(e=>z(V({},e),{showMenu:e.id===t?!e.showMenu:!1}))}static \u0275fac=function(e){return new(e||r)(T(K),T(U))};static \u0275cmp=F({type:r,selectors:[["app-team-list"]],hostBindings:function(e,n){e&1&&u("click",function(m){return n.onDocumentClick(m)},!1,pe)},decls:103,vars:33,consts:[[1,"team-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-5","py-2","rounded-lg","shadow-sm","transition-colors","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"mb-6","bg-green-50","border","border-green-200","rounded-lg","p-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","mb-6"],[1,"bg-blue-50","rounded-xl","border","border-blue-100","p-6","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"text-base","font-medium","text-gray-700"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","d","M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"],[1,""],[1,"text-2xl","font-bold","text-gray-900","my-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"bg-green-50","rounded-xl","border","border-green-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","d","M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"],["stroke-linecap","round","stroke-linejoin","round","d","M4.867 19.125h.008v.008h-.008v-.008Z"],[1,"bg-orange-50","rounded-xl","border","border-orange-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","d","M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"bg-red-50","rounded-xl","border","border-red-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-red-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","mb-6"],[1,"flex-1","flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:items-center","md:space-x-3"],[1,"relative","w-full","md:w-80"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search team members by name or email...",1,"w-full","pl-10","pr-4","py-2","border-2","border-blue-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","input","ngModel"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[180px]",3,"click"],[1,"text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",4,"ngIf"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","gap-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"xl:col-span-2"],[3,"teamMember","confirmed","cancelled",4,"ngIf"],[3,"teamMember","isEditMode","teamMemberSaved","cancelled",4,"ngIf"],[3,"teamMemberName","teamMemberId","closed","submitted",4,"ngIf"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","font-medium"],["class","xl:col-span-2",4,"ngIf"],[1,"flex","items-center","justify-between","mt-4"],[1,"text-sm","text-gray-600"],[1,"flex","gap-2"],[1,"px-3","py-1.5","rounded","border","text-sm",3,"click","disabled"],[1,"px-3","py-1.5","text-sm"],[1,"py-1"],["class","px-3 py-2 text-sm text-gray-900 hover:bg-blue-50 cursor-pointer transition-colors flex items-center justify-between",3,"bg-blue-100","click",4,"ngFor","ngForOf"],[1,"px-3","py-2","text-sm","text-gray-900","hover:bg-blue-50","cursor-pointer","transition-colors","flex","items-center","justify-between",3,"click"],["class","w-4 h-4 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"px-3","py-2","text-sm","text-gray-900","hover:bg-blue-50","cursor-pointer","transition-colors","flex","items-center","justify-between",3,"bg-blue-100"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-2","text-sm","text-red-700"],["class","bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-shadow","overflow-hidden"],[1,"px-6","py-4","relative"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","mr-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-sm","font-medium","text-blue-400","block","mb-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800","inline"],[1,"relative","flex","items-center","gap-2"],["title","Assign",1,"flex","items-center","gap-1","text-sm","px-3","py-1.5","rounded-md","bg-gray-100","hover:bg-gray-200","text-gray-700","border","border-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-gray-400","hover:text-gray-600","p-1.5","rounded-full","hover:bg-gray-100","transition-colors","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"],["class","absolute right-0 top-1/2 mt-1 w-40 bg-white rounded-lg shadow-lg border border-gray-200 z-20",4,"ngIf"],[1,"px-6","py-4"],[1,"text-xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["class","flex items-center text-sm text-gray-500 mb-3",4,"ngIf"],["class","flex items-center text-sm text-gray-500 mb-2",4,"ngIf"],[1,"grid","grid-cols-2"],[1,"flex","items-center","text-sm","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-xs","mb-2"],["class","inline-flex items-center px-2 py-0.5 rounded bg-green-100 text-green-700 border border-green-200",4,"ngIf"],[4,"ngIf"],[1,"my-3","border-gray-200"],[1,"grid","grid-cols-3"],[1,"text-center"],[1,"text-lg","font-semibold","text-blue-600"],[1,"text-xs","text-gray-500"],[1,"text-lg","font-semibold","text-yellow-600"],[1,"text-lg","font-semibold","text-green-600"],[1,"absolute","right-0","top-1/2","mt-1","w-40","bg-white","rounded-lg","shadow-lg","border","border-gray-200","z-20"],[1,"flex","items-center","w-full","px-3","py-2.5","text-sm","text-gray-700","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2.5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["type","button",1,"flex","items-center","w-full","px-3","py-2.5","text-sm","text-gray-700","hover:bg-gray-50","transition-colors"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-4","text-gray-400","mr-2.5"],["stroke-linecap","round","stroke-linejoin","round","d","M14.25 9v6m-4.5 0V9M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"flex","items-center","w-full","px-3","py-2.5","text-sm","text-red-600","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2.5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","text-sm","text-gray-500","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"flex","items-center","text-sm","text-gray-500","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-green-100","text-green-700","border","border-green-200"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-0.5 rounded bg-gray-100 text-gray-700 border border-gray-200",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-gray-100","text-gray-700","border","border-gray-200"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"flex","justify-center","items-center","py-12","h-100"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[3,"confirmed","cancelled","teamMember"],[3,"teamMemberSaved","cancelled","teamMember","isEditMode"],[3,"closed","submitted","teamMemberName","teamMemberId"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),s(4,"Team Management"),o(),i(5,"p",3),s(6,"Manage team members, assign work orders, and track team performance"),o()(),i(7,"div",4)(8,"button",5),u("click",function(){return n.createTeamMember()}),g(),i(9,"svg",6),p(10,"path",7),o(),s(11," Invite Team Member "),o()()(),f(12,ct,7,2,"div",8),_(),i(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12),s(17,"Total Members"),o(),i(18,"div",13),g(),i(19,"svg",14),p(20,"path",15),o()()(),_(),i(21,"div",16)(22,"p",17),s(23),o(),f(24,pt,2,1,"p",18),o()(),i(25,"div",19)(26,"div",11)(27,"div",12),s(28,"Assigned Task"),o(),i(29,"div",20),g(),i(30,"svg",21),p(31,"path",22)(32,"path",23),o()()(),_(),i(33,"div",16)(34,"p",17),s(35),o(),i(36,"p",18),s(37,"Work orders pending"),o()()(),i(38,"div",24)(39,"div",11)(40,"div",12),s(41,"Active Task"),o(),i(42,"div",25),g(),i(43,"svg",26),p(44,"path",27),o()()(),_(),i(45,"div",16)(46,"p",17),s(47),o(),i(48,"p",18),s(49,"Currently in progress"),o()()(),i(50,"div",28)(51,"div",11)(52,"div",12),s(53,"Completion Rate"),o(),i(54,"div",29),g(),i(55,"svg",30),p(56,"path",31),o()()(),_(),i(57,"div",16)(58,"p",17),s(59),o(),i(60,"p",18),s(61,"Tasks completed"),o()()()(),i(62,"div",32)(63,"div",33)(64,"div",34),g(),i(65,"svg",35),p(66,"path",36),o(),_(),i(67,"input",37),R("ngModelChange",function(m){return A(n.searchTerm,m)||(n.searchTerm=m),m}),u("input",function(){return n.onSearchChange()}),o()(),i(68,"div",38),u("click",function(m){return m.stopPropagation()}),i(69,"button",39),u("click",function(){return n.toggleSortDropdown()}),i(70,"div",11)(71,"span",40),s(72),o(),g(),i(73,"svg",41),p(74,"path",42),o()()(),f(75,ft,3,1,"div",43),o(),_(),i(76,"button",44),u("click",function(){return n.toggleSortDir()}),g(),i(77,"svg",45),p(78,"path",46),o()(),_(),i(79,"div",38),u("click",function(m){return m.stopPropagation()}),i(80,"button",39),u("click",function(){return n.toggleRoleDropdown()}),i(81,"div",11)(82,"span",40),s(83),o(),g(),i(84,"svg",41),p(85,"path",42),o()()(),f(86,ht,4,0,"div",47),o(),_(),i(87,"div",38),u("click",function(m){return m.stopPropagation()}),i(88,"button",39),u("click",function(){return n.toggleStatusDropdown()}),i(89,"div",11)(90,"span",40),s(91),o(),g(),i(92,"svg",41),p(93,"path",42),o()()(),f(94,Mt,4,0,"div",47),o()()(),f(95,wt,6,1,"div",48),_(),i(96,"div",49),f(97,It,2,1,"div",50)(98,Ft,13,1,"div",51)(99,Pt,3,0,"div",51),o(),f(100,Lt,1,1,"app-team-delete-confirmation-modal",52)(101,Vt,1,2,"app-team-form-modal",53)(102,Dt,1,2,"app-assign-work-order-modal",54),o()),e&2){let l;a(12),I(n.successMessage?12:-1),a(11),h((n.statistics==null?null:n.statistics.total_team_members)||0),a(),I(((l=n.statistics==null?null:n.statistics.active_team_members)!==null&&l!==void 0?l:0)!==0?24:-1),a(11),h((n.statistics==null?null:n.statistics.assigned_work_orders_total_count)||0),a(12),h((n.statistics==null?null:n.statistics.assigned_work_orders_active_count)||0),a(12),h((n.statistics==null?null:n.statistics.assigned_work_orders_completed_count)||0),a(8),D("ngModel",n.searchTerm),a(2),M("border-blue-500",n.showSortDropdown),a(3),b(" ",n.selectedSort?"Sort by: "+n.selectedSort.label:"Sort by"," "),a(),M("rotate-180",n.showSortDropdown),a(2),c("ngIf",n.showSortDropdown),a(3),ue("d",n.selectedSortDir==="asc"?"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4":"M17 8V4m0 0l4 4m-4-4l-4 4M7 16v4m0 0l-4-4m4 4l4-4"),a(2),M("border-blue-500",n.showRoleDropdown),a(3),b(" ",n.selectedRole?n.selectedRole.label:"All Roles"," "),a(),M("rotate-180",n.showRoleDropdown),a(2),I(n.showRoleDropdown?86:-1),a(2),M("border-blue-500",n.showStatusDropdown),a(3),b(" ",n.selectedStatus?n.selectedStatus.label:"All Status"," "),a(),M("rotate-180",n.showStatusDropdown),a(2),I(n.showStatusDropdown?94:-1),a(),I(n.error&&!n.loading?95:-1),a(2),I(n.loading?-1:97),a(),I(!n.loading&&n.filteredTeamMembers.length===0?98:-1),a(),I(n.loading?99:-1),a(),c("ngIf",n.showDeleteModal),a(),c("ngIf",n.showFormModal),a(),c("ngIf",n.showAssignModal)}},dependencies:[S,Z,N,xe,k,P,L,W,Q,ee,te],styles:[".team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #101e3614;overflow:hidden;background:#fff;border:1px solid #bfdbfe;display:flex;flex-direction:column;transition:box-shadow .2s}.team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;border-color:#e5e7eb}.team-list-page[_ngcontent-%COMP%]   .team-card-header[_ngcontent-%COMP%]{background:#e0edff;height:8rem;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;border-top-left-radius:1rem;border-top-right-radius:1rem;overflow:hidden}.team-list-page[_ngcontent-%COMP%]   .dropdown-enter[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px)}.team-list-page[_ngcontent-%COMP%]   .dropdown-enter-active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);transition:opacity .2s,transform .2s}.team-list-page[_ngcontent-%COMP%]   .dropdown-exit[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.team-list-page[_ngcontent-%COMP%]   .dropdown-exit-active[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px);transition:opacity .2s,transform .2s}.team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #101e361f}.team-list-page[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.team-list-page[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.team-list-page[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.team-list-page[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.team-list-page[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.team-list-page[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.team-list-page[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.team-list-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.team-list-page[_ngcontent-%COMP%]   .statistics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.team-list-page[_ngcontent-%COMP%]   .statistics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var At=[{path:"",component:H}],ne=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=q({type:r});static \u0275inj=G({imports:[B.forChild(At),B]})};var We=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=q({type:r});static \u0275inj=G({imports:[S,J,k,B,ne,H]})};export{We as TeamsModule};
