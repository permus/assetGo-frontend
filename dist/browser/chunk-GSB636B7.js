import{a as ze,b as He}from"./chunk-VLFJ6IL7.js";import{a as We}from"./chunk-7AMSJZ4Z.js";import{a as Be}from"./chunk-TYROG7HE.js";import{a as X}from"./chunk-L4NOJUTC.js";import{a as Ne}from"./chunk-75FJR6SK.js";import{a as $e}from"./chunk-YUGLTDU2.js";import{a as K}from"./chunk-GVXPQDBC.js";import{a as J}from"./chunk-VPAYI7QR.js";import{A as je,B as I,C as Q,b as Ee,c as D,d as T,e as V,f as Oe,i as W,j as Ie,k as Pe,o as Le,r as Fe,s as Ae,t as De,u as Ve,w as Re}from"./chunk-UQACUQIP.js";import{a as ke}from"./chunk-MEXLA3FU.js";import{j as B}from"./chunk-4LZAODCJ.js";import{b as Se}from"./chunk-YGU4T3V7.js";import{k as Z,l as $,s as ye,w as Te,x as O}from"./chunk-HV2J6S7U.js";import{Bc as Ce,Cb as k,Eb as ae,Fb as le,Gb as i,Hb as o,Ib as p,Jb as ve,Kb as xe,Mb as S,Pb as u,Q as ue,Qb as d,Xa as _e,Y as ge,Ya as a,Z as G,ba as fe,bb as y,bc as m,cc as w,dc as h,ec as q,fc as se,gc as R,hc as j,ia as be,ic as N,ja as v,ka as x,kb as A,la as g,lb as U,ma as _,pb as f,qc as me,s as pe,sc as Me,ta as L,tc as we,vb as he,wb as c,yb as M,zb as Y}from"./chunk-RHVXZUNF.js";import{a as E,b as F}from"./chunk-EQDQRRRY.js";var ee=class r{teamMember=null;cancelled=new L;confirmed=new L;deleteReason="";onClose(){this.cancelled.emit()}onConfirmDelete(){this.teamMember&&this.confirmed.emit({teamId:this.teamMember.id,reason:this.deleteReason.trim()})}onBackdropClick(t){t.target===t.currentTarget&&this.onClose()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=A({type:r,selectors:[["app-team-delete-confirmation-modal"]],inputs:{teamMember:"teamMember"},outputs:{cancelled:"cancelled",confirmed:"confirmed"},decls:40,vars:3,consts:[[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center",2,"z-index","1000",3,"click"],[1,"relative","mx-auto","p-6","w-[500px]","rounded-lg","bg-white"],[1,"mt-3"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-6"],["for","deleteReason",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","deleteReason","rows","4","placeholder","Enter reason for removing this team member...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-red-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],[1,"text-center","mb-6"],[1,"mx-auto","flex","items-center","justify-center","h-16","w-16","rounded-full","bg-red-100","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-8","w-8","text-red-600"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-600","mb-4"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","font-medium","text-red-800"],[1,"flex","justify-end","space-x-3"],[1,"inline-flex","justify-center","px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-gray-500","transition-colors",3,"click"],[1,"inline-flex","justify-center","px-4","py-2","text-sm","font-medium","text-white","bg-red-600","border","border-transparent","rounded-md","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","transition-colors",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0),u("click",function(s){return n.onBackdropClick(s)}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),g(),i(5,"svg",5),p(6,"path",6),o(),_(),i(7,"h3",7),m(8,"Remove Team Member"),o()(),i(9,"button",8),u("click",function(){return n.onClose()}),g(),i(10,"svg",9),p(11,"path",10),o()()(),_(),i(12,"div",11)(13,"label",12),m(14," Deletion Reason (Optional) "),o(),i(15,"textarea",13),N("ngModelChange",function(s){return j(n.deleteReason,s)||(n.deleteReason=s),s}),o(),i(16,"p",14),m(17,"This will be recorded in the audit trail."),o()(),i(18,"div",15)(19,"div",16),g(),i(20,"svg",17),p(21,"path",6),o()(),_(),i(22,"h3",18),m(23," Are you sure you want to remove "),i(24,"strong"),m(25),o(),m(26,"? "),o(),i(27,"p",19),m(28," This action cannot be undone. The team member will be permanently removed from the system. "),o(),i(29,"div",20)(30,"div",4),g(),i(31,"svg",21),p(32,"path",22),o(),_(),i(33,"span",23),m(34," Warning: This action will permanently remove the team member and all associated data. "),o()()()(),i(35,"div",24)(36,"button",25),u("click",function(){return n.onClose()}),m(37," Cancel "),o(),i(38,"button",26),u("click",function(){return n.onConfirmDelete()}),m(39," Remove Member "),o()()()()()),e&2&&(a(15),R("ngModel",n.deleteReason),a(10),q('"',n.teamMember==null?null:n.teamMember.first_name," ",n.teamMember==null?null:n.teamMember.last_name,'"'))},dependencies:[O,I,D,V,W],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};var te=class r{constructor(t){this.http=t}cache$;apiUrl=`${ke.apiUrl}/locations-hierarchy`;getTree(){return this.cache$||(this.cache$=this.http.get(this.apiUrl).pipe(pe(t=>t.data.hierarchy),ue(1))),this.cache$}clearCache(){this.cache$=void 0}static \u0275fac=function(e){return new(e||r)(fe(Se))};static \u0275prov=ge({token:r,factory:r.\u0275fac,providedIn:"root"})};function Qe(r,t){if(r&1&&(i(0,"div",33)(1,"div",34),g(),i(2,"svg",35),p(3,"path",36),o(),_(),i(4,"p",37),m(5),o()()()),r&2){let e=d();a(5),w(e.error)}}function Xe(r,t){if(r&1&&(i(0,"div",41)(1,"div",42),g(),i(2,"svg",43),p(3,"path",44),o(),_(),i(4,"div",45)(5,"p",46),m(6,"Approaching Team Limit"),o(),i(7,"p",47),m(8),o()()()()),r&2){let e=d(2);a(8),se("You have ",e.currentTeamCount," / ",e.teamsAllowedCount," teams. Only ",e.getRemainingTeams()," more team member(s) allowed.")}}function et(r,t){if(r&1&&(i(0,"div",48)(1,"div",42),g(),i(2,"svg",49),p(3,"path",36),o(),_(),i(4,"div",45)(5,"p",50),m(6,"Team Limit Reached"),o(),i(7,"p",51),m(8),o()()()()),r&2){let e=d(2);a(8),h("You have reached your team limit of ",e.teamsAllowedCount," team member(s). Please contact your administrator to increase your limit.")}}function tt(r,t){if(r&1&&(i(0,"div",52)(1,"div",53),g(),i(2,"svg",54),p(3,"path",55),o(),_(),i(4,"p",56),m(5),o()()()),r&2){let e=d(2);a(5),se("You have ",e.currentTeamCount," / ",e.teamsAllowedCount," teams. ",e.getRemainingTeams()," more team member(s) allowed.")}}function nt(r,t){if(r&1&&(i(0,"div",13),f(1,Xe,9,3,"div",38)(2,et,9,1,"div",39)(3,tt,6,3,"div",40),o()),r&2){let e=d();a(),c("ngIf",e.limitStatus==="warning"),a(),c("ngIf",e.limitStatus==="error"),a(),c("ngIf",e.limitStatus==="ok"&&e.teamsAllowedCount!==null)}}function it(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d();a(),h(" ",e.getFieldError("first_name")," ")}}function ot(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d();a(),h(" ",e.getFieldError("last_name")," ")}}function rt(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d();a(),h(" ",e.getFieldError("email")," ")}}function at(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d(2);a(),h(" ",e.getFieldError("password")," ")}}function lt(r,t){if(r&1&&(i(0,"div",13)(1,"label",58),m(2," Password (Optional) "),o(),p(3,"input",59),f(4,at,2,1,"p",16),i(5,"p",27),m(6," Leave blank to auto-generate a secure password and send via email. "),o()()),r&2){let e,n=d();a(3),M("border-red-300",((e=n.teamMemberForm.get("password"))==null?null:e.invalid)&&(((e=n.teamMemberForm.get("password"))==null?null:e.dirty)||((e=n.teamMemberForm.get("password"))==null?null:e.touched))),a(),c("ngIf",n.getFieldError("password"))}}function st(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d(2);a(),h(" ",e.getFieldError("password_confirmation")," ")}}function mt(r,t){if(r&1&&(i(0,"div",13)(1,"label",60),m(2," Confirm Password "),o(),p(3,"input",61),f(4,st,2,1,"p",16),o()),r&2){let e,n=d();a(3),M("border-red-300",((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.invalid)&&(((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.dirty)||((e=n.teamMemberForm.get("password_confirmation"))==null?null:e.touched))),a(),c("ngIf",n.getFieldError("password_confirmation"))}}function dt(r,t){if(r&1&&(i(0,"option",62),m(1),o()),r&2){let e=t.$implicit;c("value",e.id),a(),h(" ",e.name," ")}}function ct(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d();a(),h(" ",e.getFieldError("role_id")," ")}}function pt(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d();a(),h(" ",e.rolesError," ")}}function ut(r,t){if(r&1&&(i(0,"p",57),m(1),o()),r&2){let e=d();a(),h(" ",e.getFieldError("hourly_rate")," ")}}function gt(r,t){r&1&&(i(0,"div",74),m(1,"Loading locations..."),o())}function ft(r,t){if(r&1&&(i(0,"div",75),m(1),o()),r&2){let e=d(2);a(),w(e.treeError)}}function bt(r,t){if(r&1&&(i(0,"div"),p(1,"ng-select",76),o()),r&2){let e=d(2);a(),c("items",e.flatLocationOptions)("multiple",!0)("closeOnSelect",!1)("searchable",!0)}}function _t(r,t){if(r&1){let e=S();i(0,"div",63)(1,"div",64)(2,"div",65),m(3,"Location Scope"),o(),i(4,"button",66),u("click",function(){v(e);let l=d();return x(l.clearSelection())}),m(5,"Clear selection (Full access)"),o()(),i(6,"div",67),p(7,"input",68),i(8,"label",69),m(9,"Include descendants (recommended)"),o()(),f(10,gt,2,0,"div",70)(11,ft,2,1,"div",71)(12,bt,2,4,"div",72),i(13,"p",73),m(14,"No selection means full access to all locations."),o()()}if(r&2){let e=d();a(10),c("ngIf",e.loadingTree),a(),c("ngIf",e.treeError),a(),c("ngIf",!e.loadingTree&&!e.treeError)}}function ht(r,t){r&1&&(g(),i(0,"svg",77),p(1,"circle",78)(2,"path",79),o())}var ne=class r{constructor(t,e,n,l,s,b){this.fb=t;this.teamService=e;this.roleService=n;this.locationTreeService=l;this.toastService=s;this.authService=b;this.teamMemberForm=this.fb.group({first_name:["",[T.required,T.minLength(2),T.maxLength(100)]],last_name:["",[T.required,T.minLength(2),T.maxLength(100)]],email:["",[T.required,T.email]],role_id:["",[T.required]],hourly_rate:[null,[T.min(0)]],location_ids:[[]],expand_descendants:[!0],password:["",[T.minLength(8),T.maxLength(72),T.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/)]],password_confirmation:[""]},{validators:r.passwordMatchValidator}),this.loadAvailableRoles()}teamMember=null;isEditMode=!1;teamMemberSaved=new L;cancelled=new L;teamMemberForm;loading=!1;error="";availableRoles=[];loadingRoles=!1;rolesError="";locationTree=[];loadingTree=!1;treeError="";expandDescendants=!0;flatLocationOptions=[];currentTeamCount=0;teamsAllowedCount=null;limitStatus="ok";ngOnInit(){this.loadTeamLimitInfo(),this.teamMember&&this.isEditMode&&this.teamService.getTeamMember(this.teamMember.id).subscribe({next:t=>{this.teamMember=t.data,this.loadTeamMember()},error:()=>{this.loadTeamMember()}}),this.teamMemberForm.get("role_id")?.valueChanges.subscribe(t=>{let e=this.availableRoles.find(n=>n.id===Number(t));if(e&&e.has_location_access){if(this.ensureTreeLoaded(),this.isEditMode&&this.teamMember&&Array.isArray(this.teamMember.locations)){let n=this.teamMember.locations.map(l=>l.id);n.length>0&&this.teamMember.has_full_location_access===!1&&this.teamMemberForm.patchValue({location_ids:n})}}else this.teamMemberForm.patchValue({location_ids:[]})})}ngOnChanges(t){t.teamMember&&t.teamMember.currentValue&&this.isEditMode&&(this.availableRoles.length>0?this.loadTeamMember():setTimeout(()=>{this.availableRoles.length>0&&this.loadTeamMember()},100))}updateFormWithTeamMember(){this.teamMember&&this.isEditMode&&this.availableRoles.length>0&&this.loadTeamMember()}loadAvailableRoles(){this.loadingRoles=!0,this.rolesError="",this.roleService.getRoles().subscribe({next:t=>{this.availableRoles=t.data||[],this.loadingRoles=!1,this.isEditMode&&this.teamMember&&this.loadTeamMember()},error:t=>{this.teamService.getAvailableRoles().subscribe({next:e=>{this.availableRoles=e.data||[],this.loadingRoles=!1,this.isEditMode&&this.teamMember&&this.loadTeamMember()},error:e=>{this.rolesError="Failed to load roles. Please try again.",this.loadingRoles=!1,this.toastService.error("Failed to load available roles")}})}})}loadTeamMember(){if(this.teamMember){let t;this.teamMember.role_id?t=this.teamMember.role?.name:this.teamMember.role?.name?t=this.teamMember.role.name:Array.isArray(this.teamMember.roles)&&this.teamMember.roles.length>0&&(t=this.teamMember.roles[0].name);let e;if(t){let s=this.availableRoles.find(b=>b.name===t);e=s?.id,console.log("Team Member Role Matching:",{teamMemberRoleName:t,availableRoles:this.availableRoles.map(b=>({id:b.id,name:b.name})),matchingRole:s?{id:s.id,name:s.name}:null,selectedRoleId:e})}let n=this.teamMember.hourly_rate;this.teamMemberForm.patchValue({first_name:this.teamMember.first_name,last_name:this.teamMember.last_name,email:this.teamMember.email,role_id:e||"",hourly_rate:n!=null?Number(n):null,expand_descendants:!0});let l=this.availableRoles.find(s=>s.id===e);if(l&&l.has_location_access){this.ensureTreeLoaded();let s=Array.isArray(this.teamMember.locations)?this.teamMember.locations.map(b=>b.id):[];s.length>0&&this.teamMember.has_full_location_access===!1?this.teamMemberForm.patchValue({location_ids:s}):this.teamMemberForm.patchValue({location_ids:[]})}}}onBackdropClick(t){t.target===t.currentTarget&&this.onCancel()}onSubmit(){if(this.teamMemberForm.invalid){this.markFormGroupTouched(),this.toastService.warning("Please fill in all required fields correctly");return}if(!this.isEditMode&&!this.canCreateMoreTeams()){this.error=`You have reached your team limit of ${this.teamsAllowedCount} team member(s). Please contact your administrator to increase your limit.`,this.toastService.error(this.error);return}this.loading=!0,this.error="";let t=E({},this.teamMemberForm.value);t.location_ids=t.location_ids&&t.location_ids.length>0?t.location_ids:null,(t.expand_descendants===void 0||t.expand_descendants===null)&&(t.expand_descendants=!0),(!t.password||t.password.trim()==="")&&(delete t.password,delete t.password_confirmation),this.isEditMode&&this.teamMember?this.teamService.updateTeamMember(this.teamMember.id,t).subscribe({next:e=>{this.loading=!1,this.teamMemberSaved.emit(e.data)},error:e=>{this.loading=!1,this.error=e.error?.message||"Failed to update team member. Please try again.",this.toastService.error(this.error)}}):this.teamService.createTeamMember(t).subscribe({next:e=>{this.loading=!1,this.teamMemberSaved.emit(e.data)},error:e=>{this.loading=!1,this.error=e.error?.message||"Failed to create team member. Please try again.",this.toastService.error(this.error)}})}onCancel(){this.cancelled.emit()}getFieldError(t){let e=this.teamMemberForm.get(t);if(e?.invalid&&(e?.dirty||e?.touched)){if(e?.errors?.required)return`${this.getFieldLabel(t)} is required.`;if(e?.errors?.email)return"Please enter a valid email address.";if(e?.errors?.minlength)return`${this.getFieldLabel(t)} must be at least ${e.errors.minlength.requiredLength} characters.`;if(e?.errors?.maxlength)return`${this.getFieldLabel(t)} must not exceed ${e.errors.maxlength.requiredLength} characters.`;if(e?.errors?.min)return`${this.getFieldLabel(t)} must be at least ${e.errors.min.min}.`;if(e?.errors?.pattern&&t==="password")return"Password must contain at least one uppercase letter, one lowercase letter, and one number.";if(e?.errors?.passwordMismatch)return"Password confirmation does not match."}return t==="password_confirmation"&&this.teamMemberForm.hasError("passwordMismatch")?"Password confirmation does not match.":""}getFieldLabel(t){return{first_name:"First name",last_name:"Last name",email:"Email",role_id:"Team role",hourly_rate:"Hourly rate",password:"Password",password_confirmation:"Confirm Password"}[t]||t}markFormGroupTouched(){Object.keys(this.teamMemberForm.controls).forEach(t=>{this.teamMemberForm.get(t)?.markAsTouched()})}get selectedRole(){let t=this.teamMemberForm.get("role_id")?.value;return this.availableRoles.find(e=>e.id===Number(t))}get showLocationScope(){return!!this.selectedRole?.has_location_access}ensureTreeLoaded(){this.locationTree.length>0||this.loadingTree||(this.loadingTree=!0,this.treeError="",this.locationTreeService.getTree().subscribe({next:t=>{this.locationTree=t,this.flatLocationOptions=this.flatten(t),this.loadingTree=!1},error:t=>{this.treeError="Failed to load locations tree.",this.loadingTree=!1,this.toastService.error("Failed to load location tree")}}))}isChecked(t){return(this.teamMemberForm.get("location_ids")?.value||[]).includes(t)}toggleNode(t,e){let n=this.teamMemberForm.get("location_ids"),l=[...n?.value||[]],s=this.collectIds(t);e?s.forEach(b=>{l.includes(b)||l.push(b)}):s.forEach(b=>{let C=l.indexOf(b);C>=0&&l.splice(C,1)}),n?.setValue(l)}clearSelection(){this.teamMemberForm.patchValue({location_ids:[]})}collectIds(t){let e=[t.id];return t.children&&t.children.length&&t.children.forEach(n=>e.push(...this.collectIds(n))),e}flatten(t,e=0,n=[]){for(let l of t)n.push({id:l.id,label:`${"\u2014 ".repeat(e)}${l.name}`}),l.children?.length&&this.flatten(l.children,e+1,n);return n}static passwordMatchValidator(t){let e=t.get("password"),n=t.get("password_confirmation");return!e||!n?null:e.value&&n.value!==e.value?(n.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(n.hasError("passwordMismatch")&&n.setErrors(null),null)}loadTeamLimitInfo(){this.authService.currentUser$.subscribe(t=>{this.teamsAllowedCount=t?.teams_allowed_count??null}),this.isEditMode||this.teamService.getTeamMemberStatistics().subscribe({next:t=>{this.currentTeamCount=t.data?.total_team_members||0,this.updateLimitStatus()},error:()=>{}})}updateLimitStatus(){if(this.teamsAllowedCount===null||this.teamsAllowedCount===void 0){this.limitStatus="ok";return}this.currentTeamCount>=this.teamsAllowedCount?this.limitStatus="error":this.currentTeamCount>=this.teamsAllowedCount*.8?this.limitStatus="warning":this.limitStatus="ok"}isUnlimited(){return this.teamsAllowedCount===null||this.teamsAllowedCount===void 0}canCreateMoreTeams(){return this.isUnlimited()?!0:this.currentTeamCount<(this.teamsAllowedCount||0)}getRemainingTeams(){return this.isUnlimited()?1/0:Math.max(0,(this.teamsAllowedCount||0)-this.currentTeamCount)}static \u0275fac=function(e){return new(e||r)(y(je),y(X),y(We),y(te),y(K),y(J))};static \u0275cmp=A({type:r,selectors:[["app-team-form-modal"]],inputs:{teamMember:"teamMember",isEditMode:"isEditMode"},outputs:{teamMemberSaved:"teamMemberSaved",cancelled:"cancelled"},features:[be],decls:54,vars:27,consts:[[1,"modal-overlay","fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center",2,"z-index","1000",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-4xl","mx-4","transform","transition-all"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-6","py-4"],[3,"ngSubmit","formGroup"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],[1,"mb-4"],["for","first_name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","first_name","type","text","formControlName","first_name","placeholder","Enter first name",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","last_name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","last_name","type","text","formControlName","last_name","placeholder","Enter last name",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","type","email","formControlName","email","placeholder","Enter email address",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["for","role_id",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","role_id","formControlName","role_id",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","hourly_rate",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","hourly_rate","type","number","formControlName","hourly_rate","placeholder","Enter hourly rate","min","0","step","0.01",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],[1,"mt-1","text-xs","text-gray-500"],["class","mb-4 border rounded-lg p-3 bg-gray-50",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-200"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin -ml-1 mr-2 h-4 w-4 text-white inline","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mt-0.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-2","text-sm","text-red-700"],["class","p-3 bg-orange-50 border border-orange-200 rounded-lg",4,"ngIf"],["class","p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","p-3 bg-blue-50 border border-blue-200 rounded-lg",4,"ngIf"],[1,"p-3","bg-orange-50","border","border-orange-200","rounded-lg"],[1,"flex","items-start"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-400","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"ml-2"],[1,"text-sm","font-medium","text-orange-800"],[1,"text-sm","text-orange-700","mt-1"],[1,"p-3","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mt-0.5","flex-shrink-0"],[1,"text-sm","font-medium","text-red-800"],[1,"text-sm","text-red-700","mt-1"],[1,"p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-2","text-sm","text-blue-700"],[1,"mt-1","text-sm","text-red-600"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password","type","password","formControlName","password","placeholder","Enter custom password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password_confirmation","type","password","formControlName","password_confirmation","placeholder","Confirm password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],[3,"value"],[1,"mb-4","border","rounded-lg","p-3","bg-gray-50"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-gray-800"],["type","button",1,"text-sm","text-blue-600","hover:underline",3,"click"],[1,"flex","items-center","mb-3"],["type","checkbox","id","expand_descendants","formControlName","expand_descendants",1,"mr-2"],["for","expand_descendants",1,"text-sm","text-gray-700"],["class","text-sm text-gray-500",4,"ngIf"],["class","text-sm text-red-600",4,"ngIf"],[4,"ngIf"],[1,"mt-2","text-xs","text-gray-500"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-red-600"],["bindLabel","label","bindValue","id","placeholder","Select locations (empty = full access)","formControlName","location_ids",3,"items","multiple","closeOnSelect","searchable"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white","inline"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){if(e&1&&(i(0,"div",0),u("click",function(s){return n.onBackdropClick(s)}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),m(5),o(),i(6,"button",5),u("click",function(){return n.onCancel()}),g(),i(7,"svg",6),p(8,"path",7),o()()()(),_(),i(9,"div",8)(10,"form",9),u("ngSubmit",function(){return n.onSubmit()}),f(11,Qe,6,1,"div",10)(12,nt,4,3,"div",11),i(13,"div",12)(14,"div",13)(15,"label",14),m(16," First Name * "),o(),p(17,"input",15),f(18,it,2,1,"p",16),o(),i(19,"div",13)(20,"label",17),m(21," Last Name * "),o(),p(22,"input",18),f(23,ot,2,1,"p",16),o(),i(24,"div",13)(25,"label",19),m(26," Email * "),o(),p(27,"input",20),f(28,rt,2,1,"p",16),o(),f(29,lt,7,3,"div",11)(30,mt,5,3,"div",11),i(31,"div",13)(32,"label",21),m(33," Team Role * "),o(),i(34,"select",22)(35,"option",23),m(36,"Select a role"),o(),f(37,dt,2,2,"option",24),o(),f(38,ct,2,1,"p",16)(39,pt,2,1,"p",16),o(),i(40,"div",13)(41,"label",25),m(42," Hourly Rate (Optional) "),o(),p(43,"input",26),f(44,ut,2,1,"p",16),i(45,"p",27),m(46," Optional hourly rate for this team member "),o()()(),f(47,_t,15,3,"div",28),i(48,"div",29)(49,"button",30),u("click",function(){return n.onCancel()}),m(50," Cancel "),o(),i(51,"button",31),f(52,ht,3,0,"svg",32),m(53),o()()()()()()),e&2){let l,s,b,C,P;a(5),h(" ",n.isEditMode?"Edit Team Member":"Invite New Team Member"," "),a(5),c("formGroup",n.teamMemberForm),a(),c("ngIf",n.error),a(),c("ngIf",!n.isEditMode&&!n.isUnlimited()),a(5),M("border-red-300",((l=n.teamMemberForm.get("first_name"))==null?null:l.invalid)&&(((l=n.teamMemberForm.get("first_name"))==null?null:l.dirty)||((l=n.teamMemberForm.get("first_name"))==null?null:l.touched))),a(),c("ngIf",n.getFieldError("first_name")),a(4),M("border-red-300",((s=n.teamMemberForm.get("last_name"))==null?null:s.invalid)&&(((s=n.teamMemberForm.get("last_name"))==null?null:s.dirty)||((s=n.teamMemberForm.get("last_name"))==null?null:s.touched))),a(),c("ngIf",n.getFieldError("last_name")),a(4),M("border-red-300",((b=n.teamMemberForm.get("email"))==null?null:b.invalid)&&(((b=n.teamMemberForm.get("email"))==null?null:b.dirty)||((b=n.teamMemberForm.get("email"))==null?null:b.touched))),a(),c("ngIf",n.getFieldError("email")),a(),c("ngIf",!n.isEditMode),a(),c("ngIf",!n.isEditMode),a(4),M("border-red-300",((C=n.teamMemberForm.get("role_id"))==null?null:C.invalid)&&(((C=n.teamMemberForm.get("role_id"))==null?null:C.dirty)||((C=n.teamMemberForm.get("role_id"))==null?null:C.touched))),a(3),c("ngForOf",n.availableRoles),a(),c("ngIf",n.getFieldError("role_id")),a(),c("ngIf",n.rolesError),a(4),M("border-red-300",((P=n.teamMemberForm.get("hourly_rate"))==null?null:P.invalid)&&(((P=n.teamMemberForm.get("hourly_rate"))==null?null:P.dirty)||((P=n.teamMemberForm.get("hourly_rate"))==null?null:P.touched))),a(),c("ngIf",n.getFieldError("hourly_rate")),a(3),c("ngIf",n.showLocationScope),a(4),c("disabled",n.teamMemberForm.invalid||n.loading||!n.isEditMode&&!n.canCreateMoreTeams()),a(),c("ngIf",n.loading),a(),h(" ",n.isEditMode?"Update Team Member":"Send Invitation"," ")}},dependencies:[O,Z,$,Q,Ie,De,Ve,D,Pe,Ee,Ae,V,Oe,Re,Le,Fe,I,He,ze],styles:[".modal-overlay[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-enter[_ngcontent-%COMP%]{opacity:0;transform:scale(.9)}.modal-enter-active[_ngcontent-%COMP%]{opacity:1;transform:scale(1);transition:opacity .2s ease-out,transform .2s ease-out}.modal-exit[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.modal-exit-active[_ngcontent-%COMP%]{opacity:0;transform:scale(.9);transition:opacity .2s ease-in,transform .2s ease-in}.backdrop-enter[_ngcontent-%COMP%]{opacity:0}.backdrop-enter-active[_ngcontent-%COMP%]{opacity:1;transition:opacity .2s ease-out}.backdrop-exit[_ngcontent-%COMP%]{opacity:1}.backdrop-exit-active[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s ease-in}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);transition:transform .1s ease-in-out}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};function vt(r,t){if(r&1&&(i(0,"div",16),m(1),o()),r&2){let e=d();a(),h(" ",e.errorMessage," ")}}function xt(r,t){r&1&&(i(0,"div",17),p(1,"div",18),i(2,"span"),m(3,"Loading work orders..."),o()())}function Mt(r,t){r&1&&(i(0,"div",19),g(),i(1,"svg",20),p(2,"path",21),o(),_(),i(3,"span"),m(4,"No available work orders to assign"),o()())}function wt(r,t){r&1&&(i(0,"span"),m(1,"Assigning..."),o())}function Ct(r,t){r&1&&(i(0,"span"),m(1,"Assign Work Order"),o())}var ie=class r{constructor(t){this.workOrderService=t}teamMemberName="";teamMemberId=0;closed=new L;submitted=new L;workOrders=[];selectedWorkOrderId=null;selectedWorkOrder=null;dueDate="";notes="";loading=!1;errorMessage="";ngOnInit(){this.fetchWorkOrders()}fetchWorkOrders(){this.loading=!0,this.errorMessage="",this.workOrderService.getWorkOrders({page:1,per_page:1e3}).subscribe({next:t=>{console.log("Work orders response:",t);let e=(t.data.data||[]).filter(n=>n.assigned_to!==this.teamMemberId&&n.status?.slug!=="completed"&&n.status?.slug!=="cancelled");this.workOrders=e.map(n=>({id:n.id,name:n.title,description:n.description||`Status: ${n.status?.name||"Unknown"}`,icon:"work-order"})),console.log("Transformed work orders:",this.workOrders),this.loading=!1},error:t=>{console.error("Error fetching work orders:",t),this.errorMessage="Failed to load work orders. Please try again.",this.loading=!1}})}submit(){if(!this.selectedWorkOrderId){this.errorMessage="Please select a work order";return}this.errorMessage="",this.loading=!0,this.workOrderService.assignWorkOrder(this.selectedWorkOrderId,{user_id:this.teamMemberId,due_date:this.dueDate||void 0,notes:this.notes||void 0}).subscribe({next:t=>{console.log("Work order assigned successfully:",t),this.loading=!1,this.submitted.emit({work_order_id:this.selectedWorkOrderId,due_date:this.dueDate||void 0,notes:this.notes||void 0})},error:t=>{console.error("Error assigning work order:",t),this.loading=!1,t.error&&t.error.message?this.errorMessage=t.error.message:this.errorMessage="Failed to assign work order. Please try again."}})}selectWorkOrder(t){this.selectedWorkOrder=t,this.selectedWorkOrderId=t.id,this.errorMessage=""}onInputChange(){this.errorMessage=""}close(){this.closed.emit()}static \u0275fac=function(e){return new(e||r)(y(Be))};static \u0275cmp=A({type:r,selectors:[["app-assign-work-order-modal"]],inputs:{teamMemberName:"teamMemberName",teamMemberId:"teamMemberId"},outputs:{closed:"closed",submitted:"submitted"},decls:28,vars:15,consts:[[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"subtitle"],["class","error-message",4,"ngIf"],[1,"form-group"],["label","Available Work Orders",3,"selectionChange","required","options","selectedOption","placeholder","searchable","disabled"],["class","loading-indicator",4,"ngIf"],["class","no-work-orders",4,"ngIf"],["type","datetime-local",1,"input",3,"ngModelChange","input","ngModel"],["rows","5","placeholder","Add any specific instructions or notes for this assignment...",1,"textarea",3,"ngModelChange","input","ngModel"],[1,"modal-actions"],[1,"btn","secondary",3,"click"],[1,"btn","primary",3,"click","disabled"],[4,"ngIf"],[1,"error-message"],[1,"loading-indicator"],[1,"spinner"],[1,"no-work-orders"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"]],template:function(e,n){e&1&&(i(0,"div",0),u("click",function(){return n.close()}),i(1,"div",1),u("click",function(s){return s.stopPropagation()}),i(2,"div",2)(3,"h3"),m(4),o(),i(5,"button",3),u("click",function(){return n.close()}),m(6,"\xD7"),o()(),i(7,"p",4),m(8,"Select a work order to assign to this team member"),o(),f(9,vt,2,1,"div",5),i(10,"div",6)(11,"app-global-dropdown",7),u("selectionChange",function(s){return n.selectWorkOrder(s)}),o(),f(12,xt,4,0,"div",8)(13,Mt,5,0,"div",9),o(),i(14,"div",6)(15,"label"),m(16,"Due Date (Optional)"),o(),i(17,"input",10),N("ngModelChange",function(s){return j(n.dueDate,s)||(n.dueDate=s),s}),u("input",function(){return n.onInputChange()}),o()(),i(18,"div",6)(19,"label"),m(20,"Assignment Notes (Optional)"),o(),i(21,"textarea",11),N("ngModelChange",function(s){return j(n.notes,s)||(n.notes=s),s}),u("input",function(){return n.onInputChange()}),o()(),i(22,"div",12)(23,"button",13),u("click",function(){return n.close()}),m(24,"Cancel"),o(),i(25,"button",14),u("click",function(){return n.submit()}),f(26,wt,2,0,"span",15)(27,Ct,2,0,"span",15),o()()()()),e&2&&(a(4),h("Assign Work Order to ",n.teamMemberName,""),a(5),c("ngIf",n.errorMessage),a(2),c("required",!0)("options",n.workOrders)("selectedOption",n.selectedWorkOrder)("placeholder",n.loading?"Loading work orders...":"Select a work order")("searchable",!0)("disabled",n.loading),a(),c("ngIf",n.loading),a(),c("ngIf",!n.loading&&n.workOrders.length===0),a(4),R("ngModel",n.dueDate),a(4),R("ngModel",n.notes),a(4),c("disabled",!n.selectedWorkOrderId||n.loading||n.workOrders.length===0),a(),c("ngIf",n.loading),a(),c("ngIf",!n.loading))},dependencies:[O,$,I,D,V,W,$e],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;width:90%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#6b7280;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;color:#374151}.subtitle[_ngcontent-%COMP%]{margin:0 24px 20px;color:#6b7280;font-size:14px}.form-group[_ngcontent-%COMP%]{margin:0 24px 20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#374151;font-size:14px}.input[_ngcontent-%COMP%], .textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #d1d5db;border-radius:8px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.input[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.error-message[_ngcontent-%COMP%]{margin:0 24px 20px;padding:12px 16px;background-color:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:14px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 24px 24px;border-top:1px solid #e5e7eb}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;color:#6b7280;font-size:14px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e5e7eb;border-top:2px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-work-orders[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;padding:12px;background-color:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;color:#6b7280;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s;border:none}.btn.secondary[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn.secondary[_ngcontent-%COMP%]:hover{background-color:#e5e7eb}.btn.primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn.primary[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}.required[_ngcontent-%COMP%]{color:#dc2626;margin-left:4px}.generic-dropdown[_ngcontent-%COMP%]{position:relative;width:100%}.dropdown-button[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #d1d5db;border-radius:8px;background:#fff;cursor:pointer;transition:all .2s;text-align:left;font-size:14px;min-height:48px;display:flex;align-items:center;justify-content:space-between}.dropdown-button[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#9ca3af}.dropdown-button[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.dropdown-button.active[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.dropdown-button[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;color:#9ca3af;cursor:not-allowed;border-color:#e5e7eb}.dropdown-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.placeholder[_ngcontent-%COMP%]{color:#9ca3af;font-style:italic}.selected-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%}.item-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;flex-shrink:0}.icon[_ngcontent-%COMP%]{width:16px;height:16px;color:#6b7280}.selected-text[_ngcontent-%COMP%]{color:#111827;font-weight:500;flex:1}.dropdown-arrow[_ngcontent-%COMP%]{width:20px;height:20px;color:#6b7280;transition:transform .2s;flex-shrink:0}.dropdown-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #d1d5db;border-top:none;border-radius:0 0 8px 8px;box-shadow:0 10px 15px -3px #0000001a;z-index:10;max-height:300px;overflow-y:auto}.dropdown-header[_ngcontent-%COMP%]{padding:12px 16px;background-color:#f9fafb;border-bottom:1px solid #e5e7eb;font-weight:500;color:#374151;font-size:14px}.dropdown-item[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;background:none;text-align:left;cursor:pointer;transition:background-color .2s;border-bottom:1px solid #f3f4f6}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dropdown-item.selected[_ngcontent-%COMP%]{background-color:#eff6ff;color:#1d4ed8}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.item-details[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-weight:500;color:#111827;margin-bottom:2px}.item-description[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;line-height:1.4}"]})};var Ue=(r,t)=>t.value;function yt(r,t){if(r&1&&(i(0,"span"),m(1),o()),r&2){let e=d();Y(e.getLimitStatus()==="error"?"px-3 py-1 text-sm font-semibold rounded-full bg-red-100 text-red-800":e.getLimitStatus()==="warning"?"px-3 py-1 text-sm font-semibold rounded-full bg-orange-100 text-orange-800":"px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-800"),a(),q(" ",e.getCurrentTeamCount()," / ",e.getTeamLimit()," teams ")}}function Tt(r,t){if(r&1&&(i(0,"div",6),g(),i(1,"svg",60),p(2,"path",61),o(),m(3),o()),r&2){let e=d();a(3),h(" Approaching team limit. ",(e.getTeamLimit()||0)-e.getCurrentTeamCount()," more team member(s) allowed. ")}}function St(r,t){r&1&&(i(0,"div",7),g(),i(1,"svg",60),p(2,"path",62),o(),m(3," Team limit reached. Please contact your administrator to increase your limit. "),o())}function kt(r,t){if(r&1&&(i(0,"div",12)(1,"div",63),g(),i(2,"svg",64),p(3,"path",65),o(),_(),i(4,"span",66),m(5),o()()()),r&2){let e=d();a(5),w(e.successMessage)}}function Et(r,t){if(r&1&&(i(0,"p",22),m(1),o()),r&2){let e=d();a(),h("",(e.statistics==null?null:e.statistics.active_team_members)||0," Active")}}function Ot(r,t){r&1&&(g(),i(0,"svg",71),p(1,"path",72),o())}function It(r,t){if(r&1){let e=S();i(0,"div",69),u("click",function(){let l=v(e).$implicit,s=d(2);return x(s.selectSort(l))}),i(1,"span"),m(2),o(),f(3,Ot,2,0,"svg",70),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedSort==null?null:n.selectedSort.value)===e.value),a(2),w(e.label),a(),c("ngIf",(n.selectedSort==null?null:n.selectedSort.value)===e.value)}}function Pt(r,t){if(r&1&&(i(0,"div",51)(1,"div",67),f(2,It,4,4,"div",68),o()()),r&2){let e=d();a(2),c("ngForOf",e.sortOptions)}}function Lt(r,t){r&1&&(g(),i(0,"svg",71),p(1,"path",72),o())}function Ft(r,t){if(r&1){let e=S();i(0,"div",69),u("click",function(){let l=v(e).$implicit,s=d(2);return x(s.selectRole(l))}),i(1,"span"),m(2),o(),f(3,Lt,2,0,"svg",70),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedRole==null?null:n.selectedRole.value)===e.value),a(2),w(e.label),a(),c("ngIf",(n.selectedRole==null?null:n.selectedRole.value)===e.value)}}function At(r,t){if(r&1&&(i(0,"div",51)(1,"div",67),ae(2,Ft,4,4,"div",73,Ue),o()()),r&2){let e=d();a(2),le(e.roleOptions)}}function Dt(r,t){r&1&&(g(),i(0,"svg",71),p(1,"path",72),o())}function Vt(r,t){if(r&1){let e=S();i(0,"div",69),u("click",function(){let l=v(e).$implicit,s=d(2);return x(s.selectStatus(l))}),i(1,"span"),m(2),o(),f(3,Dt,2,0,"svg",70),o()}if(r&2){let e=t.$implicit,n=d(2);M("bg-blue-100",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value),a(2),w(e.label),a(),c("ngIf",(n.selectedStatus==null?null:n.selectedStatus.value)===e.value)}}function Rt(r,t){if(r&1&&(i(0,"div",51)(1,"div",67),ae(2,Vt,4,4,"div",73,Ue),o()()),r&2){let e=d();a(2),le(e.statusOptions)}}function jt(r,t){if(r&1&&(i(0,"div",52)(1,"div",74),g(),i(2,"svg",75),p(3,"path",62),o(),_(),i(4,"p",76),m(5),o()()()),r&2){let e=d();a(5),w(e.error)}}function Nt(r,t){if(r&1){let e=S();i(0,"div",117),u("click",function(l){return v(e),x(l.stopPropagation())}),i(1,"div",67)(2,"button",118),u("click",function(l){v(e);let s=d().$implicit,b=d(2);return x(b.onEditClick(l,s))}),g(),i(3,"svg",119),p(4,"path",120),o(),_(),i(5,"span"),m(6,"Edit Member"),o()(),i(7,"button",121),u("click",function(l){v(e);let s=d().$implicit,b=d(2);return x(b.onToggleStatusClick(l,s))}),g(),i(8,"svg",122),p(9,"path",123),o(),m(10),o(),_(),i(11,"button",124),u("click",function(l){v(e);let s=d().$implicit,b=d(2);return x(b.onDeleteClick(l,s))}),g(),i(12,"svg",125),p(13,"path",126),o(),_(),i(14,"span"),m(15,"Remove Member"),o()()()()}if(r&2){let e=d().$implicit;a(7),M("text-red-500",e.active)("text-green-600",!e.active)("hover:bg-red-50",e.active)("hover:bg-green-50",!e.active),a(),Y(e.active?"size-4 text-red-500 mr-2.5":"size-4 text-green-500 mr-2.5"),a(2),h(" ",e.active?"Inactive":"Active"," ")}}function $t(r,t){if(r&1&&(i(0,"div",127),g(),i(1,"svg",100),p(2,"path",128),o(),_(),i(3,"span"),m(4),o()()),r&2){let e=d().$implicit;a(4),w(e.role.name)}}function Wt(r,t){if(r&1&&(i(0,"div",129)(1,"span"),m(2),o()()),r&2){let e=d().$implicit;a(2),h("$",e.hourly_rate,"/hour")}}function zt(r,t){r&1&&(i(0,"span",130),m(1,"Full access"),o())}function Ht(r,t){if(r&1&&(i(0,"span",134),m(1),o()),r&2){let e=t.$implicit;a(),h(" ",e.name," ")}}function Bt(r,t){if(r&1&&(i(0,"span",135),m(1),o()),r&2){let e=d(2).$implicit;a(),h(" ",e.locations.length-2," more+ ")}}function Gt(r,t){if(r&1&&(ve(0),i(1,"div",131),f(2,Ht,2,1,"span",132),me(3,"slice"),f(4,Bt,2,1,"span",133),o(),xe()),r&2){let e=d().$implicit;a(2),c("ngForOf",we(3,2,e.locations,0,2)),a(2),c("ngIf",e.locations.length>2)}}function Ut(r,t){if(r&1){let e=S();i(0,"div",78)(1,"div",79)(2,"div",15)(3,"div",63)(4,"div",80),g(),i(5,"svg",81),p(6,"path",82),o()(),_(),i(7,"div")(8,"span",83),m(9),o(),i(10,"div",63)(11,"div",84),m(12),o(),i(13,"div",85),m(14),o()()()(),i(15,"div",86)(16,"button",87),u("click",function(l){let s=v(e).$implicit;return d(2).openAssign(s),x(l.stopPropagation())}),g(),i(17,"svg",88),p(18,"path",89)(19,"path",90),o(),_(),i(20,"span"),m(21,"Assign"),o()(),i(22,"button",91),u("click",function(l){let s=v(e).$implicit,b=d(2);return x(b.onToggleMenuClick(l,s.id))}),g(),i(23,"svg",92),p(24,"path",93),o()(),f(25,Nt,16,11,"div",94),o()()(),_(),i(26,"div",95)(27,"h3",96),m(28),o(),i(29,"p",97),m(30),o(),f(31,$t,5,1,"div",98),i(32,"div",99),g(),i(33,"svg",100),p(34,"path",65),o(),_(),i(35,"span",101),m(36,"Status: "),o(),i(37,"span",102),m(38),o()(),f(39,Wt,3,1,"div",103),i(40,"div",104)(41,"div",105),g(),i(42,"svg",100),p(43,"path",106),o(),_(),i(44,"span"),m(45),me(46,"date"),o()(),i(47,"div",107),f(48,zt,2,0,"span",108)(49,Gt,5,6,"ng-container",109),o()(),p(50,"hr",110),i(51,"div",111)(52,"div",112)(53,"div",113),m(54),o(),i(55,"div",114),m(56,"Assigned"),o()(),i(57,"div",112)(58,"div",115),m(59),o(),i(60,"div",114),m(61,"Active"),o()(),i(62,"div",112)(63,"div",116),m(64),o(),i(65,"div",114),m(66,"Completed"),o()()()()()}if(r&2){let e,n,l,s=t.$implicit,b=d(2);a(9),h(" ",b.getTeamMemberFullName(s)," "),a(3),h("",s.roles[0].name," "),a(),M("bg-green-100",s.active)("text-green-800",s.active)("bg-red-100",!s.active)("text-red-800",!s.active),a(),h(" ",s.active?"Active":"Inactive"," "),a(11),c("ngIf",s.showMenu),a(3),w(b.getTeamMemberFullName(s)),a(2),w(s.email),a(),c("ngIf",s.role),a(6),M("text-green-600",s.active)("text-red-600",!s.active),a(),h(" ",s.active?"Active":"Inactive"," "),a(),c("ngIf",s.hourly_rate!==void 0&&s.hourly_rate!==null),a(6),h("Created ",Me(46,27,s.created_at,"MMM d, y"),""),a(3),c("ngIf",s.has_full_location_access),a(),c("ngIf",!s.has_full_location_access&&(s.locations==null?null:s.locations.length)),a(5),h("",(e=(e=s.assigned_work_orders_total_count)!==null&&e!==void 0?e:s.assigned_work_orders_count)!==null&&e!==void 0?e:0," "),a(5),h("",(n=s.assigned_work_orders_active_count)!==null&&n!==void 0?n:0," "),a(5),h("",(l=s.assigned_work_orders_completed_count)!==null&&l!==void 0?l:0," ")}}function Yt(r,t){if(r&1&&(i(0,"div",54),f(1,Ut,67,30,"div",77),o()),r&2){let e=d();a(),c("ngForOf",e.filteredTeamMembers)}}function qt(r,t){if(r&1){let e=S();i(0,"div",55)(1,"div",136),g(),i(2,"svg",137),p(3,"path",138),o(),_(),i(4,"h3",139),m(5,"No team members found"),o(),i(6,"p",140),m(7),o(),i(8,"div",141)(9,"button",142),u("click",function(){v(e);let l=d();return x(l.createTeamMember())}),g(),i(10,"svg",10),p(11,"path",11),o(),m(12," Invite Team Member "),o()()()()}if(r&2){let e=d();a(7),h(" ",e.searchTerm?"Try adjusting your search terms.":"Get started by inviting your first team member."," ")}}function Zt(r,t){r&1&&(i(0,"div",55)(1,"div",143),p(2,"div",144),o()())}function Jt(r,t){if(r&1){let e=S();i(0,"app-pagination",145),u("pageChange",function(l){v(e);let s=d();return x(s.onPageChange(l))})("perPageChange",function(l){v(e);let s=d();return x(s.onPerPageChange(l))}),o()}if(r&2){let e=d();c("pagination",e.pagination)}}function Kt(r,t){if(r&1){let e=S();i(0,"app-team-delete-confirmation-modal",146),u("confirmed",function(l){v(e);let s=d();return x(s.confirmDeleteTeamMember(l))})("cancelled",function(){v(e);let l=d();return x(l.closeDeleteModal())}),o()}if(r&2){let e=d();c("teamMember",e.teamMemberToDelete)}}function Qt(r,t){if(r&1){let e=S();i(0,"app-team-form-modal",147),u("teamMemberSaved",function(l){v(e);let s=d();return x(s.onTeamMemberSaved(l))})("cancelled",function(){v(e);let l=d();return x(l.closeFormModal())}),o()}if(r&2){let e=d();c("teamMember",e.teamMemberToEdit)("isEditMode",e.isEditMode)}}function Xt(r,t){if(r&1){let e=S();i(0,"app-assign-work-order-modal",148),u("closed",function(){v(e);let l=d();return x(l.closeAssign())})("submitted",function(l){v(e);let s=d();return x(s.onAssignmentSubmitted(l))}),o()}if(r&2){let e=d();c("teamMemberName",e.teamMemberToAssign?e.getTeamMemberFullName(e.teamMemberToAssign):"")("teamMemberId",e.teamMemberToAssign?e.teamMemberToAssign.id:0)}}var H=class r{constructor(t,e,n,l){this.teamService=t;this.toastService=e;this.cdr=n;this.authService=l}teamMembers=[];filteredTeamMembers=[];pagination=null;loading=!1;error="";successMessage="";statistics=null;analytics=null;currentPerPage=10;currentUserId=null;currentUser=null;teamsAllowedCount=null;searchTerm="";selectedSort=null;selectedRole={label:"All Roles",value:""};selectedStatus={label:"All Status",value:""};selectedSortDir="asc";showSortDropdown=!1;showRoleDropdown=!1;showStatusDropdown=!1;showDeleteModal=!1;teamMemberToDelete=null;showFormModal=!1;teamMemberToEdit=null;isEditMode=!1;showAssignModal=!1;teamMemberToAssign=null;sortOptions=[{label:"Name",value:"name"},{label:"Created Date",value:"created_at"},{label:"Email",value:"email"},{label:"Role",value:"role_name"}];roleOptions=[{label:"All Roles",value:""},{label:"Admin",value:"admin"},{label:"User",value:"user"},{label:"Technician",value:"technician"}];statusOptions=[{label:"All Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];onDocumentClick(t){let e=t.target,n=e.closest("button"),l=e.closest(".dropdown-menu");n||l||(this.teamMembers=this.teamMembers.map(s=>F(E({},s),{showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(s=>F(E({},s),{showMenu:!1})),this.showSortDropdown=!1,this.showRoleDropdown=!1,this.showStatusDropdown=!1)}ngOnInit(){this.authService.currentUser$.subscribe(t=>{this.currentUserId=t?.id||null,this.currentUser=t,this.teamsAllowedCount=t?.teams_allowed_count??null}),this.loadTeamMembers(),this.loadStatistics()}loadTeamMembers(t=1,e=10){this.loading=!0,this.error="";let n;this.selectedStatus?.value==="active"?n=!0:this.selectedStatus?.value==="inactive"&&(n=!1),this.teamService.getTeamMembers(t,e,{search:this.searchTerm||void 0,role_name:this.selectedRole?.value||void 0,active:n,sort_by:this.selectedSort?.value||void 0,sort_dir:this.selectedSortDir}).subscribe({next:l=>{this.teamMembers=l.data.teams,this.pagination=l.data.pagination,this.filteredTeamMembers=this.teamMembers.filter(s=>s.id!==this.currentUserId),this.loading=!1},error:l=>{this.error="Failed to load team members",this.loading=!1,this.toastService.error("Failed to load team members")}})}loadStatistics(){this.teamService.getTeamMemberStatistics().subscribe({next:t=>{this.statistics=t.data},error:t=>{this.toastService.error("Failed to load team statistics")}}),this.teamService.getTeamAnalytics({date_range:30}).subscribe({next:t=>{this.analytics=t.data},error:t=>{this.toastService.error("Failed to load team analytics")}})}refreshStats(){this.loadStatistics()}createTeamMember(){this.teamMemberToEdit=null,this.isEditMode=!1,this.showFormModal=!0}editTeamMember(t){this.teamMemberToEdit=t,this.isEditMode=!0,this.showFormModal=!0}openAssign(t){this.teamMemberToAssign=t,this.showAssignModal=!0}closeAssign(){this.showAssignModal=!1,this.teamMemberToAssign=null}onAssignmentSubmitted(t){this.toastService.success(`Work order #${t.work_order_id} successfully assigned to ${this.teamMemberToAssign?.first_name} ${this.teamMemberToAssign?.last_name}`),this.loadTeamMembers(this.pagination?.current_page||1,this.currentPerPage),this.loadStatistics(),this.closeAssign()}viewTeamMember(t){this.toastService.info("View team member feature coming soon")}deleteTeamMember(t){this.teamMemberToDelete=t,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.teamMemberToDelete=null}confirmDeleteTeamMember(t){if(!this.teamMemberToDelete)return;let e=`${this.teamMemberToDelete.first_name} ${this.teamMemberToDelete.last_name}`;this.teamService.deleteTeamMember(this.teamMemberToDelete.id).subscribe({next:n=>{this.teamMembers=this.teamMembers.filter(l=>l.id!==this.teamMemberToDelete.id),this.filteredTeamMembers=this.filteredTeamMembers.filter(l=>l.id!==this.teamMemberToDelete.id),this.toastService.success(`Team member ${e} removed successfully`),this.closeDeleteModal()},error:n=>{this.error="Failed to delete team member",this.toastService.error("Failed to delete team member"),this.closeDeleteModal()}})}closeFormModal(){this.showFormModal=!1,this.teamMemberToEdit=null,this.isEditMode=!1}onTeamMemberSaved(t){let e=`${t.first_name} ${t.last_name}`;if(this.isEditMode){let n=this.teamMembers.findIndex(l=>l.id===t.id);n!==-1&&(this.teamMembers[n]=t,this.filteredTeamMembers=this.filteredTeamMembers.map(l=>l.id===t.id?t:l)),this.toastService.success(`Team member ${e} updated successfully`)}else this.teamMembers.unshift(t),this.filteredTeamMembers.unshift(t),this.toastService.success(`Team member ${e} created successfully`);this.closeFormModal()}onSearchChange(){this.loadTeamMembers(1)}filterTeamMembers(){let t=this.teamMembers.filter(e=>e.id!==this.currentUserId);this.searchTerm.trim()?this.filteredTeamMembers=t.filter(e=>`${e.first_name} ${e.last_name}`.toLowerCase().includes(this.searchTerm.toLowerCase())||e.email.toLowerCase().includes(this.searchTerm.toLowerCase())||e.role?.name&&e.role.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredTeamMembers=[...t],this.sortTeamMembers()}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}toggleRoleDropdown(){this.showRoleDropdown=!this.showRoleDropdown}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown}selectSort(t){this.selectedSort=t,this.showSortDropdown=!1,this.loadTeamMembers(1)}selectRole(t){this.selectedRole=t,this.showRoleDropdown=!1,this.loadTeamMembers(1)}selectStatus(t){this.selectedStatus=t,this.showStatusDropdown=!1,this.loadTeamMembers(1)}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.loadTeamMembers(1)}sortTeamMembers(){this.selectedSort&&this.filteredTeamMembers.sort((t,e)=>{let n,l;switch(this.selectedSort.value){case"name":n=`${t.first_name} ${t.last_name}`.toLowerCase(),l=`${e.first_name} ${e.last_name}`.toLowerCase();break;case"email":n=t.email.toLowerCase(),l=e.email.toLowerCase();break;case"created_at":n=new Date(t.created_at).getTime(),l=new Date(e.created_at).getTime();break;case"role":n=(t.role?.name||"").toLowerCase(),l=(e.role?.name||"").toLowerCase();break;default:n=`${t.first_name} ${t.last_name}`.toLowerCase(),l=`${e.first_name} ${e.last_name}`.toLowerCase()}return n<l?this.selectedSortDir==="asc"?-1:1:n>l?this.selectedSortDir==="asc"?1:-1:0})}getTeamMemberFullName(t){return`${t.first_name} ${t.last_name}`}getTeamMemberInitials(t){return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase()}toggleTeamMemberMenu(t){this.teamMembers=this.teamMembers.map(e=>F(E({},e),{showMenu:e.id===t?!e.showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(e=>F(E({},e),{showMenu:e.id===t?!e.showMenu:!1}))}onPageChange(t){this.loadTeamMembers(t,this.currentPerPage)}onPerPageChange(t){this.currentPerPage=t,this.loadTeamMembers(1,t)}toggleTeamMemberStatus(t){let e=`${t.first_name} ${t.last_name}`,n=t.active?"active":"inactive",l=t.active?"inactive":"active";this.teamService.toggleTeamMemberStatus(t.id).subscribe({next:s=>{let b=F(E({},t),{active:!t.active}),C=this.teamMembers.findIndex(re=>re.id===t.id);C!==-1&&(this.teamMembers[C]=b);let P=this.filteredTeamMembers.findIndex(re=>re.id===t.id);P!==-1&&(this.filteredTeamMembers[P]=b),this.toastService.success(`Team member ${e} status changed to ${l}`),setTimeout(()=>{this.loadStatistics()},100)},error:s=>{this.toastService.error(`Failed to update ${e}'s status`)}})}onEditClick(t,e){t.preventDefault(),t.stopPropagation(),this.closeAllDropdowns(),this.editTeamMember(e)}onToggleStatusClick(t,e){t.preventDefault(),t.stopPropagation(),this.closeAllDropdowns(),this.toggleTeamMemberStatus(e)}onDeleteClick(t,e){t.preventDefault(),t.stopPropagation(),this.closeAllDropdowns(),this.deleteTeamMember(e)}onToggleMenuClick(t,e){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),console.log("Toggle menu clicked for team member:",e);let n=window.pageYOffset||document.documentElement.scrollTop,l=window.innerWidth-document.documentElement.clientWidth,s=document.body.style.overflow,b=document.body.style.paddingRight;document.body.style.overflow="hidden",document.body.style.paddingRight=`${l}px`,document.body.style.position="fixed",document.body.style.top=`-${n}px`,document.body.style.width="100%",this.toggleTeamMemberMenu(e),setTimeout(()=>{document.body.style.overflow=s,document.body.style.paddingRight=b,document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,n)},50),console.log("After toggle, showMenu states:",this.teamMembers.map(C=>({id:C.id,showMenu:C.showMenu})))}closeAllDropdowns(){this.teamMembers=this.teamMembers.map(t=>F(E({},t),{showMenu:!1})),this.filteredTeamMembers=this.filteredTeamMembers.map(t=>F(E({},t),{showMenu:!1}))}getCurrentTeamCount(){return this.statistics?.total_team_members||0}getTeamLimit(){return this.teamsAllowedCount??null}isUnlimited(){return this.teamsAllowedCount===null||this.teamsAllowedCount===void 0}getLimitStatus(){if(this.isUnlimited())return"ok";let t=this.getCurrentTeamCount(),e=this.teamsAllowedCount;return t>=e?"error":t>=e*.8?"warning":"ok"}canCreateMoreTeams(){return this.isUnlimited()?!0:this.getCurrentTeamCount()<(this.teamsAllowedCount||0)}static \u0275fac=function(e){return new(e||r)(y(X),y(K),y(Ce),y(J))};static \u0275cmp=A({type:r,selectors:[["app-team-list"]],hostBindings:function(e,n){e&1&&u("click",function(s){return n.onDocumentClick(s)},!1,_e)},decls:108,vars:41,consts:[[1,"team-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"flex","items-center","gap-3","mb-1"],[1,"text-2xl","font-bold","text-gray-900"],[3,"class"],[1,"text-gray-600","text-base"],[1,"mt-2","flex","items-center","text-sm","text-orange-600"],[1,"mt-2","flex","items-center","text-sm","text-red-600"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"mb-6","bg-green-50","border","border-green-200","rounded-lg","p-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","mb-6"],[1,"bg-blue-50","rounded-xl","border","border-blue-100","p-6","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"text-base","font-medium","text-gray-700"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","d","M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"],[1,""],[1,"text-2xl","font-bold","text-gray-900","my-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"bg-green-50","rounded-xl","border","border-green-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","d","M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"],["stroke-linecap","round","stroke-linejoin","round","d","M4.867 19.125h.008v.008h-.008v-.008Z"],[1,"bg-orange-50","rounded-xl","border","border-orange-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","d","M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"bg-red-50","rounded-xl","border","border-red-100","p-6","shadow-sm"],[1,"w-12","h-12","bg-red-100","rounded-lg","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","mb-6"],[1,"flex-1","flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:items-center","md:space-x-3"],[1,"relative","w-full","md:w-80"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search team members by name or email...",1,"w-full","pl-10","pr-4","py-2","border-2","border-blue-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","input","ngModel"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[180px]",3,"click"],[1,"text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",4,"ngIf"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors","group","relative",3,"click","title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600","group-hover:text-blue-600","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","gap-6","mb-5"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"xl:col-span-2"],[3,"pagination","pageChange","perPageChange",4,"ngIf"],[3,"teamMember","confirmed","cancelled",4,"ngIf"],[3,"teamMember","isEditMode","teamMemberSaved","cancelled",4,"ngIf"],[3,"teamMemberName","teamMemberId","closed","submitted",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","font-medium"],[1,"py-1"],["class","px-3 py-2 text-sm text-gray-900 hover:bg-blue-50 cursor-pointer transition-colors flex items-center justify-between",3,"bg-blue-100","click",4,"ngFor","ngForOf"],[1,"px-3","py-2","text-sm","text-gray-900","hover:bg-blue-50","cursor-pointer","transition-colors","flex","items-center","justify-between",3,"click"],["class","w-4 h-4 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"px-3","py-2","text-sm","text-gray-900","hover:bg-blue-50","cursor-pointer","transition-colors","flex","items-center","justify-between",3,"bg-blue-100"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400","mt-0.5"],[1,"ml-2","text-sm","text-red-700"],["class","bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-shadow","overflow-hidden"],[1,"px-6","py-4","relative"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","mr-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-sm","font-medium","text-blue-400","block","mb-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800","inline"],[1,"ml-2","px-2","py-1","rounded-full","text-xs","font-medium"],[1,"relative","flex","items-center","gap-2"],["type","button","title","Assign",1,"flex","items-center","gap-1","text-sm","px-3","py-1.5","rounded-md","bg-gray-100","hover:bg-gray-200","text-gray-700","border","border-gray-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["type","button",1,"text-gray-400","hover:text-gray-600","p-1.5","rounded-full","hover:bg-gray-100","transition-colors","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"],["class","absolute right-0 top-full mt-1 w-40 bg-white rounded-lg shadow-lg border border-gray-200 z-50",3,"click",4,"ngIf"],[1,"px-6","py-4"],[1,"text-xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["class","flex items-center text-sm text-gray-500 mb-3",4,"ngIf"],[1,"flex","items-center","text-sm","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"text-gray-500"],[1,"ml-1","font-medium"],["class","flex items-center text-sm text-gray-500 mb-2",4,"ngIf"],[1,"grid","grid-cols-2"],[1,"flex","items-center","text-sm","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-xs","mb-2"],["class","inline-flex items-center px-2 py-0.5 rounded bg-green-100 text-green-700 border border-green-200",4,"ngIf"],[4,"ngIf"],[1,"my-3","border-gray-200"],[1,"grid","grid-cols-3"],[1,"text-center"],[1,"text-lg","font-semibold","text-blue-600"],[1,"text-xs","text-gray-500"],[1,"text-lg","font-semibold","text-yellow-600"],[1,"text-lg","font-semibold","text-green-600"],[1,"absolute","right-0","top-full","mt-1","w-40","bg-white","rounded-lg","shadow-lg","border","border-gray-200","z-50",3,"click"],["type","button",1,"flex","items-center","w-full","px-3","py-2.5","text-sm","text-gray-700","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2.5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["type","button",1,"flex","items-center","w-full","px-3","py-2.5","text-sm","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","d","M14.25 9v6m-4.5 0V9M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],["type","button",1,"flex","items-center","w-full","px-3","py-2.5","text-sm","text-red-600","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2.5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","text-sm","text-gray-500","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"flex","items-center","text-sm","text-gray-500","mb-2"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-green-100","text-green-700","border","border-green-200"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-0.5 rounded bg-gray-100 text-gray-700 border border-gray-200",4,"ngFor","ngForOf"],["class","inline-flex items-center px-2 py-0.5 rounded bg-blue-100 text-blue-700 border border-blue-200",4,"ngIf"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-gray-100","text-gray-700","border","border-gray-200"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-blue-100","text-blue-700","border","border-blue-200"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"flex","justify-center","items-center","py-12","h-100"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[3,"pageChange","perPageChange","pagination"],[3,"confirmed","cancelled","teamMember"],[3,"teamMemberSaved","cancelled","teamMember","isEditMode"],[3,"closed","submitted","teamMemberName","teamMemberId"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"h1",3),m(5,"Team Management"),o(),f(6,yt,2,4,"span",4),o(),i(7,"p",5),m(8,"Manage team members, assign work orders, and track team performance"),o(),f(9,Tt,4,1,"div",6)(10,St,4,0,"div",7),o(),i(11,"div",8)(12,"button",9),u("click",function(){return n.createTeamMember()}),g(),i(13,"svg",10),p(14,"path",11),o(),m(15," Invite Team Member "),o()()(),f(16,kt,6,1,"div",12),_(),i(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16),m(21,"Total Members"),o(),i(22,"div",17),g(),i(23,"svg",18),p(24,"path",19),o()()(),_(),i(25,"div",20)(26,"p",21),m(27),o(),f(28,Et,2,1,"p",22),o()(),i(29,"div",23)(30,"div",15)(31,"div",16),m(32,"Assigned Task"),o(),i(33,"div",24),g(),i(34,"svg",25),p(35,"path",26)(36,"path",27),o()()(),_(),i(37,"div",20)(38,"p",21),m(39),o(),i(40,"p",22),m(41,"Work orders pending"),o()()(),i(42,"div",28)(43,"div",15)(44,"div",16),m(45,"Active Task"),o(),i(46,"div",29),g(),i(47,"svg",30),p(48,"path",31),o()()(),_(),i(49,"div",20)(50,"p",21),m(51),o(),i(52,"p",22),m(53,"Currently in progress"),o()()(),i(54,"div",32)(55,"div",15)(56,"div",16),m(57,"Completion Rate"),o(),i(58,"div",33),g(),i(59,"svg",34),p(60,"path",35),o()()(),_(),i(61,"div",20)(62,"p",21),m(63),o(),i(64,"p",22),m(65,"Tasks completed"),o()()()(),i(66,"div",36)(67,"div",37)(68,"div",38),g(),i(69,"svg",39),p(70,"path",40),o(),_(),i(71,"input",41),N("ngModelChange",function(s){return j(n.searchTerm,s)||(n.searchTerm=s),s}),u("input",function(){return n.onSearchChange()}),o()(),i(72,"div",42),u("click",function(s){return s.stopPropagation()}),i(73,"button",43),u("click",function(){return n.toggleSortDropdown()}),i(74,"div",15)(75,"span",44),m(76),o(),g(),i(77,"svg",45),p(78,"path",46),o()()(),f(79,Pt,3,1,"div",47),o(),_(),i(80,"button",48),u("click",function(){return n.toggleSortDir()}),g(),i(81,"svg",49),p(82,"path",50),o()(),_(),i(83,"div",42),u("click",function(s){return s.stopPropagation()}),i(84,"button",43),u("click",function(){return n.toggleRoleDropdown()}),i(85,"div",15)(86,"span",44),m(87),o(),g(),i(88,"svg",45),p(89,"path",46),o()()(),f(90,At,4,0,"div",51),o(),_(),i(91,"div",42),u("click",function(s){return s.stopPropagation()}),i(92,"button",43),u("click",function(){return n.toggleStatusDropdown()}),i(93,"div",15)(94,"span",44),m(95),o(),g(),i(96,"svg",45),p(97,"path",46),o()()(),f(98,Rt,4,0,"div",51),o()()(),f(99,jt,6,1,"div",52),_(),i(100,"div",53),f(101,Yt,2,1,"div",54)(102,qt,13,1,"div",55)(103,Zt,3,0,"div",55),o(),f(104,Jt,1,1,"app-pagination",56)(105,Kt,1,1,"app-team-delete-confirmation-modal",57)(106,Qt,1,2,"app-team-form-modal",58)(107,Xt,1,2,"app-assign-work-order-modal",59),o()),e&2){let l;a(6),k(n.isUnlimited()?-1:6),a(3),k(n.getLimitStatus()==="warning"&&!n.isUnlimited()?9:-1),a(),k(n.getLimitStatus()==="error"&&!n.isUnlimited()?10:-1),a(2),Y(n.canCreateMoreTeams()?"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-2 rounded-lg shadow-sm transition-colors flex items-center cursor-pointer":"bg-gray-400 text-white font-semibold px-5 py-2 rounded-lg shadow-sm flex items-center cursor-not-allowed opacity-60"),c("disabled",!n.canCreateMoreTeams()),a(4),k(n.successMessage?16:-1),a(11),w((n.statistics==null?null:n.statistics.total_team_members)||0),a(),k(((l=n.statistics==null?null:n.statistics.active_team_members)!==null&&l!==void 0?l:0)!==0?28:-1),a(11),w((n.statistics==null?null:n.statistics.assigned_work_orders_total_count)||0),a(12),w((n.statistics==null?null:n.statistics.assigned_work_orders_active_count)||0),a(12),w((n.statistics==null?null:n.statistics.assigned_work_orders_completed_count)||0),a(8),R("ngModel",n.searchTerm),a(2),M("border-blue-500",n.showSortDropdown),a(3),h(" ",n.selectedSort?"Sort by: "+n.selectedSort.label:"Sort by"," "),a(),M("rotate-180",n.showSortDropdown),a(2),c("ngIf",n.showSortDropdown),a(),c("title",n.selectedSortDir==="asc"?"Currently: Ascending (A-Z, 1-9). Click to sort Descending (Z-A, 9-1)":"Currently: Descending (Z-A, 9-1). Click to sort Ascending (A-Z, 1-9)"),a(2),he("d",n.selectedSortDir==="asc"?"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4":"M17 8V4m0 0l4 4m-4-4l-4 4M7 16v4m0 0l-4-4m4 4l4-4"),a(2),M("border-blue-500",n.showRoleDropdown),a(3),h(" ",n.selectedRole?n.selectedRole.label:"All Roles"," "),a(),M("rotate-180",n.showRoleDropdown),a(2),k(n.showRoleDropdown?90:-1),a(2),M("border-blue-500",n.showStatusDropdown),a(3),h(" ",n.selectedStatus?n.selectedStatus.label:"All Status"," "),a(),M("rotate-180",n.showStatusDropdown),a(2),k(n.showStatusDropdown?98:-1),a(),k(n.error&&!n.loading?99:-1),a(2),k(n.loading?-1:101),a(),k(!n.loading&&n.filteredTeamMembers.length===0?102:-1),a(),k(n.loading?103:-1),a(),c("ngIf",n.pagination&&(n.teamMembers.length>0||n.pagination.total>0)),a(),c("ngIf",n.showDeleteModal),a(),c("ngIf",n.showFormModal),a(),c("ngIf",n.showAssignModal)}},dependencies:[O,Z,$,Te,ye,I,D,V,W,ee,ne,ie,Ne],styles:[".team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #101e3614;overflow:hidden;background:#fff;border:1px solid #bfdbfe;display:flex;flex-direction:column;transition:box-shadow .2s}.team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;border-color:#e5e7eb}.team-list-page[_ngcontent-%COMP%]   .team-card-header[_ngcontent-%COMP%]{background:#e0edff;height:8rem;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;border-top-left-radius:1rem;border-top-right-radius:1rem;overflow:hidden}.team-list-page[_ngcontent-%COMP%]   .dropdown-enter[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px)}.team-list-page[_ngcontent-%COMP%]   .dropdown-enter-active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);transition:opacity .2s,transform .2s}.team-list-page[_ngcontent-%COMP%]   .dropdown-exit[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.team-list-page[_ngcontent-%COMP%]   .dropdown-exit-active[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px);transition:opacity .2s,transform .2s}.team-list-page[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #101e361f}.team-list-page[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.team-list-page[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.team-list-page[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.team-list-page[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.team-list-page[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.team-list-page[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.team-list-page[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.team-list-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.team-list-page[_ngcontent-%COMP%]   .statistics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.team-list-page[_ngcontent-%COMP%]   .statistics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var en=[{path:"",component:H}],oe=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=U({type:r});static \u0275inj=G({imports:[B.forChild(en),B]})};var Ye=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=U({type:r});static \u0275inj=G({imports:[O,Q,I,B,oe,H]})};export{Ye as TeamsModule};
