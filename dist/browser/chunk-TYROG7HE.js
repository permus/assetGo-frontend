import{a as g}from"./chunk-VPAYI7QR.js";import{a as l}from"./chunk-MEXLA3FU.js";import{a as m,b as p}from"./chunk-YGU4T3V7.js";import{Y as d,ba as u,s}from"./chunk-RHVXZUNF.js";import{a as i,b as o}from"./chunk-EQDQRRRY.js";var b=class a{constructor(e,r){this.http=e;this.authService=r}apiUrl=`${l.apiUrl}/work-orders`;getAuthHeaders(){let e=this.authService.getToken();return{headers:i({"Content-Type":"application/json"},e?{Authorization:`Bearer ${e}`}:{})}}getComments(e){return this.http.get(`${this.apiUrl}/${e}/comments`,this.getAuthHeaders()).pipe(s(r=>r.data))}getAssignments(e){return this.http.get(`${this.apiUrl}/${e}/assignments`,this.getAuthHeaders()).pipe(s(r=>r.data))}setAssignments(e,r){return this.http.post(`${this.apiUrl}/${e}/assignments`,{user_ids:r},this.getAuthHeaders()).pipe(s(t=>t.data))}deleteAssignment(e,r){return this.http.delete(`${this.apiUrl}/${e}/assignments/${r}`,this.getAuthHeaders())}updateAssignmentStatus(e,r,t){return this.http.put(`${this.apiUrl}/${e}/assignments/${r}`,{status:t},this.getAuthHeaders()).pipe(s(n=>n.data))}assignWorkOrder(e,r){return this.http.post(`${this.apiUrl}/${e}/assign`,r,this.getAuthHeaders()).pipe(s(t=>t.data))}getParts(e){return this.http.get(`${this.apiUrl}/${e}/parts`,this.getAuthHeaders()).pipe(s(r=>r.data))}addParts(e,r){return this.http.post(`${this.apiUrl}/${e}/parts`,{items:r},this.getAuthHeaders()).pipe(s(t=>t.data))}updatePart(e,r,t){return this.http.put(`${this.apiUrl}/${e}/parts/${r}`,t,this.getAuthHeaders()).pipe(s(n=>n.data))}deletePart(e,r){return this.http.delete(`${this.apiUrl}/${e}/parts/${r}`,this.getAuthHeaders())}addComment(e,r,t){return this.http.post(`${this.apiUrl}/${e}/comments`,{comment:r,meta:t},this.getAuthHeaders()).pipe(s(n=>n.data))}deleteComment(e,r){return this.http.delete(`${this.apiUrl}/${e}/comments/${r}`,this.getAuthHeaders())}getWorkOrders(e){let r=new m;return e&&Object.keys(e).forEach(t=>{let n=e[t];n!=null&&n!==""&&(r=r.set(t,n.toString()))}),this.http.get(this.apiUrl,o(i({},this.getAuthHeaders()),{params:r}))}getWorkOrderById(e){return this.http.get(`${this.apiUrl}/${e}`,this.getAuthHeaders()).pipe(s(r=>r.data))}updateWorkOrderStatus(e,r){return this.http.post(`${this.apiUrl}/${e}/status`,{status_id:r},this.getAuthHeaders()).pipe(s(t=>t.data))}createWorkOrder(e){return this.http.post(this.apiUrl,e,this.getAuthHeaders()).pipe(s(r=>r.data))}updateWorkOrder(e,r){return this.http.put(`${this.apiUrl}/${e}`,r,this.getAuthHeaders())}deleteWorkOrder(e){return this.http.delete(`${this.apiUrl}/${e}`,this.getAuthHeaders())}getWorkOrderAnalytics(){return this.http.get(`${this.apiUrl}/analytics`,this.getAuthHeaders()).pipe(s(e=>e.data))}getWorkOrderStatistics(){return this.http.get(`${this.apiUrl}/statistics`,this.getAuthHeaders()).pipe(s(e=>e.data))}getWorkOrderCount(e){let r=new m;return e&&Object.keys(e).forEach(t=>{let n=e[t];n!=null&&n!==""&&(r=r.set(t,n.toString()))}),this.http.get(`${this.apiUrl}/count`,o(i({},this.getAuthHeaders()),{params:r})).pipe(s(t=>t.data))}getWorkOrderFilters(){return this.http.get(`${this.apiUrl}/filters`,this.getAuthHeaders()).pipe(s(e=>e.data))}getWorkOrderHistory(e){return this.http.get(`${this.apiUrl}/${e}/history`,this.getAuthHeaders()).pipe(s(r=>r.data))}getTimeLogs(e){return this.http.get(`${this.apiUrl}/${e}/time-logs`,this.getAuthHeaders()).pipe(s(r=>r.data))}startTimer(e,r){return this.http.post(`${this.apiUrl}/${e}/time-logs/start`,r,this.getAuthHeaders()).pipe(s(t=>t.data))}stopTimer(e){return this.http.post(`${this.apiUrl}/${e}/time-logs/stop`,{},this.getAuthHeaders()).pipe(s(r=>r.data))}getWorkOrderStats(){return this.http.get(`${this.apiUrl}/statistics`,this.getAuthHeaders()).pipe(s(e=>({total:Object.values(e.status_counts||{}).reduce((r,t)=>r+t,0),open:e.status_counts?.open||0,inProgress:e.status_counts?.["in-progress"]||0,completed:e.status_counts?.completed||0,critical:e.priority_counts?.critical||0})))}static \u0275fac=function(r){return new(r||a)(u(p),u(g))};static \u0275prov=d({token:a,factory:a.\u0275fac,providedIn:"root"})};export{b as a};
