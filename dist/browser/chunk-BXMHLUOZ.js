import{a as Qn,b as Wt,c as Kn}from"./chunk-IU46CV4W.js";import"./chunk-FK6H3RFT.js";import{a as Ce}from"./chunk-LPXHZ3OP.js";import"./chunk-4GAB36YI.js";import"./chunk-GGQ7LRWG.js";import{c as ye,d as ee,f as U,g as te}from"./chunk-C5P3YSZX.js";import{a as $n,b as le,c as Se,d as de,e as Be,f as Ft,g as _e,h as Ge,i as Ot,j as Ht,k as jt,n as Nt,o as Wn,p as Yn,q as qn,r as Rt,s as Bt,t as Gt,u as zt,v as Ut,w as ce,x as $t}from"./chunk-VGEK25LZ.js";import{$ as W,A as h,Aa as He,B as g,Ba as je,C as x,Ca as fe,Da as Bn,Ea as Ne,F as ge,Fa as Re,Ga as Gn,M as X,N as it,O as s,Qa as It,R as K,Ra as Dt,S as ae,Sa as we,T as At,Ta as oe,Ua as Vt,Va as zn,W as b,Wa as Un,Xa as Pt,Ya as se,Z as Pe,_ as m,aa as M,ba as z,c as nt,ea as t,eb as rt,fa as i,ga as p,gb as Te,ha as hn,hb as Lt,i as jn,ia as vn,ja as E,ka as v,kb as Le,la as c,na as ke,o as G,oa as Me,pa as Ae,qa as Tt,ra as o,sa as C,t as Mt,ta as k,ua as ie,va as Rn,wa as Y,xa as q,y as Nn,ya as Q,z as _}from"./chunk-XJNQJKZP.js";import{a as Fn,b as On,e as Hn}from"./chunk-EQDQRRRY.js";function Ni(a,n){if(a&1&&(t(0,"span"),o(1),i()),a&2){let e=c(2);s(),ie("Archive ",e.selectedCount," Asset",e.selectedCount!==1?"s":"","")}}function Ri(a,n){a&1&&(t(0,"span",28),g(),t(1,"svg",29),p(2,"circle",30)(3,"path",31),i(),x(),t(4,"span"),o(5,"Archiving..."),i()())}function Bi(a,n){if(a&1){let e=E();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),g(),t(5,"svg",6),p(6,"path",7),i()(),x(),t(7,"h2",8),o(8,"Archive Selected Assets"),i()(),t(9,"button",9),v("click",function(){_(e);let l=c();return h(l.onCancel())}),g(),t(10,"svg",10),p(11,"path",11),i()()(),x(),t(12,"div",12)(13,"div",13)(14,"label",14),o(15,"Archive Reason (Optional)"),i(),t(16,"textarea",15),Q("ngModelChange",function(l){_(e);let d=c();return q(d.archiveReason,l)||(d.archiveReason=l),h(l)}),i(),t(17,"p",16),o(18,"This will be recorded in the audit trail"),i()(),t(19,"div",17)(20,"div",18),g(),t(21,"svg",19),p(22,"path",7),i()()(),x(),t(23,"div",20)(24,"h3",21),o(25),i(),t(26,"p",22),o(27," This will change their status to inactive but keep all data intact. "),i()(),t(28,"div",23)(29,"button",24),v("click",function(){_(e);let l=c();return h(l.onCancel())}),o(30," Cancel "),i(),t(31,"button",25),v("click",function(){_(e);let l=c();return h(l.onConfirm())}),b(32,Ni,2,2,"span",26)(33,Ri,6,0,"span",27),i()()()()()}if(a&2){let e=c();m("@backdropAnimation",void 0),s(),m("@modalAnimation",void 0),s(8),m("disabled",e.loading),s(7),Y("ngModel",e.archiveReason),s(9),ie("Are you sure you want to archive ",e.selectedCount," asset",e.selectedCount!==1?"s":"","?"),s(4),m("disabled",e.loading),s(2),m("disabled",e.loading),s(),m("ngIf",!e.loading),s(),m("ngIf",e.loading)}}var Yt=class a{isOpen=!1;selectedCount=0;closeModal=new ge;confirmArchive=new ge;loading=!1;archiveReason="";onConfirm(){this.loading=!0,this.confirmArchive.emit(this.archiveReason),setTimeout(()=>{this.loading=!1,this.archiveReason=""},2e3)}onCancel(){this.loading||(this.archiveReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=ae({type:a,selectors:[["app-archive-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount"},outputs:{closeModal:"closeModal",confirmArchive:"confirmArchive"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3","placeholder","Enter reason for archiving these assets...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-orange-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-orange-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-orange-600","text-white","font-medium","rounded-lg","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&b(0,Bi,34,10,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[se,oe,ce,le,de,_e],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[ye("backdropAnimation",[te(":enter",[U({opacity:0}),ee("150ms ease-out",U({opacity:1}))]),te(":leave",[ee("150ms ease-in",U({opacity:0}))])]),ye("modalAnimation",[te(":enter",[U({opacity:0,transform:"scale(0.7) translateY(-50px)"}),ee("200ms ease-out",U({opacity:1,transform:"scale(1) translateY(0)"}))]),te(":leave",[ee("150ms ease-in",U({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Gi(a,n){if(a&1&&(t(0,"span"),o(1),i()),a&2){let e=c(2);s(),ie("Delete ",e.selectedCount," Asset",e.selectedCount!==1?"s":"","")}}function zi(a,n){a&1&&(t(0,"span",30),g(),t(1,"svg",31),p(2,"circle",32)(3,"path",33),i(),x(),t(4,"span"),o(5,"Deleting..."),i()())}function Ui(a,n){if(a&1){let e=E();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),g(),t(5,"svg",6),p(6,"path",7),i()(),x(),t(7,"h2",8),o(8,"Delete Selected Assets"),i()(),t(9,"button",9),v("click",function(){_(e);let l=c();return h(l.onCancel())}),g(),t(10,"svg",10),p(11,"path",11),i()()(),x(),t(12,"div",12)(13,"div",13)(14,"label",14),o(15,"Deletion Reason (Optional)"),i(),t(16,"textarea",15),Q("ngModelChange",function(l){_(e);let d=c();return q(d.deletionReason,l)||(d.deletionReason=l),h(l)}),i(),t(17,"p",16),o(18,"This will be recorded in the audit trail"),i()(),t(19,"div",17)(20,"div",18),g(),t(21,"svg",19),p(22,"path",7),i()()(),x(),t(23,"div",20)(24,"h3",21),o(25),i(),t(26,"p",22),o(27," This action cannot be undone. The assets will be permanently removed from the system. "),i(),t(28,"div",23)(29,"p",24),o(30," \u26A0\uFE0F Warning: Only archived assets can be permanently deleted "),i()()(),t(31,"div",25)(32,"button",26),v("click",function(){_(e);let l=c();return h(l.onCancel())}),o(33," Cancel "),i(),t(34,"button",27),v("click",function(){_(e);let l=c();return h(l.onConfirm())}),b(35,Gi,2,2,"span",28)(36,zi,6,0,"span",29),i()()()()()}if(a&2){let e=c();m("@backdropAnimation",void 0),s(),m("@modalAnimation",void 0),s(8),m("disabled",e.loading),s(7),Y("ngModel",e.deletionReason),s(9),ie("Are you sure you want to permanently delete ",e.selectedCount," asset",e.selectedCount!==1?"s":"","?"),s(7),m("disabled",e.loading),s(2),m("disabled",e.loading),s(),m("ngIf",!e.loading),s(),m("ngIf",e.loading)}}var qt=class a{isOpen=!1;selectedCount=0;closeModal=new ge;confirmDelete=new ge;loading=!1;deletionReason="";onConfirm(){this.loading=!0,this.confirmDelete.emit(this.deletionReason),setTimeout(()=>{this.loading=!1,this.deletionReason=""},2e3)}onCancel(){this.loading||(this.deletionReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=ae({type:a,selectors:[["app-delete-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount"},outputs:{closeModal:"closeModal",confirmDelete:"confirmDelete"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-red-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3","placeholder","Enter reason for permanently deleting these assets...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-800","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-red-600","text-white","font-medium","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&b(0,Ui,37,10,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[se,oe,ce,le,de,_e],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[ye("backdropAnimation",[te(":enter",[U({opacity:0}),ee("150ms ease-out",U({opacity:1}))]),te(":leave",[ee("150ms ease-in",U({opacity:0}))])]),ye("modalAnimation",[te(":enter",[U({opacity:0,transform:"scale(0.7) translateY(-50px)"}),ee("200ms ease-out",U({opacity:1,transform:"scale(1) translateY(0)"}))]),te(":leave",[ee("150ms ease-in",U({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function $i(a,n){if(a&1&&(t(0,"span"),o(1),i()),a&2){let e=c(2);s(),ie(" Restore ",e.selectedCount," Asset",e.selectedCount!==1?"s":""," ")}}function Wi(a,n){a&1&&(t(0,"span",24),g(),t(1,"svg",33),p(2,"circle",34)(3,"path",35),i(),x(),t(4,"span"),o(5,"Restoring..."),i()())}function Yi(a,n){if(a&1){let e=E();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),g(),t(5,"svg",6),p(6,"path",7),i()(),x(),t(7,"h2",8),o(8),i()(),t(9,"button",9),v("click",function(){_(e);let l=c();return h(l.onCancel())}),g(),t(10,"svg",10),p(11,"path",11),i()()(),x(),t(12,"div",12)(13,"div",13)(14,"div",14),g(),t(15,"svg",15),p(16,"path",7),i()()(),x(),t(17,"div",16)(18,"h3",17),o(19),i(),t(20,"p",18),o(21),i()(),t(22,"div",19)(23,"label",20),o(24,"Restore Reason (Optional)"),i(),t(25,"textarea",21),Q("ngModelChange",function(l){_(e);let d=c();return q(d.restoreReason,l)||(d.restoreReason=l),h(l)}),i(),t(26,"p",22),o(27,"This will be recorded in the audit trail"),i()(),t(28,"div",23)(29,"div",24),g(),t(30,"svg",25),p(31,"path",26),i(),x(),t(32,"p",27),o(33," Assets will be restored to active status "),i()()(),t(34,"div",28)(35,"button",29),v("click",function(){_(e);let l=c();return h(l.onCancel())}),o(36," Cancel "),i(),t(37,"button",30),v("click",function(){_(e);let l=c();return h(l.onConfirm())}),b(38,$i,2,2,"span",31)(39,Wi,6,0,"span",32),i()()()()()}if(a&2){let e=c();m("@backdropAnimation",void 0),s(),m("@modalAnimation",void 0),s(7),k(" ",e.selectedCount>1?"Restore Selected Assets":"Restore Asset"," "),s(),m("disabled",e.loading),s(10),k(" Are you sure you want to restore ",e.selectedCount>1?e.selectedCount+" assets":e.assetName||"1 asset","? "),s(2),k(" ",e.selectedCount>1?"These assets will be moved back to active status and become available in searches.":"This asset will be moved back to active status and become available in searches."," "),s(4),Y("ngModel",e.restoreReason),m("placeholder","Enter reason for restoring "+(e.selectedCount>1?"these assets":"this asset")+"..."),s(10),m("disabled",e.loading),s(2),m("disabled",e.loading),s(),m("ngIf",!e.loading),s(),m("ngIf",e.loading)}}var Qt=class a{isOpen=!1;selectedCount=0;assetName="";closeModal=new ge;confirmRestore=new ge;loading=!1;restoreReason="";onConfirm(){this.loading=!0,this.confirmRestore.emit(this.restoreReason),setTimeout(()=>{this.loading=!1,this.restoreReason=""},2e3)}onCancel(){this.loading||(this.restoreReason="",this.closeModal.emit())}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=ae({type:a,selectors:[["app-restore-confirmation-modal"]],inputs:{isOpen:"isOpen",selectedCount:"selectedCount",assetName:"assetName"},outputs:{closeModal:"closeModal",confirmRestore:"confirmRestore"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"flex","justify-center","mb-6"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-600","mb-4"],[1,"mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","resize-none","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-3","mb-6"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-green-800","text-sm","font-medium"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-green-600","text-white","font-medium","rounded-lg","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&b(0,Yi,40,12,"div",0),e&2&&m("ngIf",r.isOpen)},dependencies:[se,oe,ce,le,de,_e],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.success-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[ye("backdropAnimation",[te(":enter",[U({opacity:0}),ee("150ms ease-out",U({opacity:1}))]),te(":leave",[ee("150ms ease-in",U({opacity:0}))])]),ye("modalAnimation",[te(":enter",[U({opacity:0,transform:"scale(0.7) translateY(-50px)"}),ee("200ms ease-out",U({opacity:1,transform:"scale(1) translateY(0)"}))]),te(":leave",[ee("150ms ease-in",U({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var Jn=Hn(Qn());var Zn=a=>({"bg-blue-100":a}),Qi=a=>({"bg-blue-100 font-semibold":a}),Ki=a=>["/assets/preview",a];function Ji(a,n){a&1&&(g(),p(0,"path",101))}function Zi(a,n){a&1&&(g(),p(0,"path",102))}function Xi(a,n){if(a&1){let e=E();t(0,"div",84)(1,"button",85),g(),t(2,"svg",86),p(3,"path",87),i(),x(),t(4,"span"),o(5,"Analytics"),i()(),t(6,"button",88),v("click",function(){_(e);let l=c();return h(l.toggleArchivedView())}),g(),t(7,"svg",86),b(8,Ji,1,0,"path",89)(9,Zi,1,0,"path",90),i(),x(),t(10,"span"),o(11),i()(),t(12,"button",88),v("click",function(){_(e);let l=c();return h(l.exportToPdf())}),g(),t(13,"svg",86),p(14,"path",91),i(),x(),t(15,"span"),o(16,"Export Assets to PDF"),i()(),t(17,"button",92),g(),t(18,"svg",86),p(19,"path",93),i(),x(),t(20,"span"),o(21,"Smart Import"),i()(),p(22,"div",94),t(23,"button",95),g(),t(24,"svg",96),p(25,"path",97),i(),x(),t(26,"span"),o(27,"Archive Selected"),i()(),t(28,"button",98),g(),t(29,"svg",99),p(30,"path",100),i(),x(),t(31,"span"),o(32,"Delete Selected"),i()()()}if(a&2){let e=c();s(8),m("ngIf",!e.showingArchived),s(),m("ngIf",e.showingArchived),s(2),C(e.showingArchived?"View Active Assets":"View Archived Assets")}}function er(a,n){a&1&&(t(0,"span",103),o(1,"Select asset type"),i())}function tr(a,n){if(a&1&&(hn(0),p(1,"img",105),vn()),a&2){let e=c(2);s(),m("src",e.selectedAssetType.icon,X)}}function nr(a,n){if(a&1&&(t(0,"div",104),b(1,tr,2,1,"ng-container",60),t(2,"span"),o(3),i()()),a&2){let e=c();s(),m("ngIf",e.selectedAssetType.icon),s(2),C(e.selectedAssetType.label)}}function ir(a,n){if(a&1&&(hn(0),p(1,"img",110),vn()),a&2){let e=c().$implicit;s(),m("src",e.icon,X)}}function rr(a,n){if(a&1){let e=E();t(0,"div",109),v("click",function(){let l=_(e).$implicit,d=c(2);return d.selectAssetType(l),h(d.showAssetTypeDropdown=!1)}),b(1,ir,2,1,"ng-container",60),t(2,"span"),o(3),i()()}if(a&2){let e=n.$implicit,r=c(2);m("ngClass",je(3,Zn,(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id)),s(),m("ngIf",e.icon),s(2),C(e.label)}}function ar(a,n){if(a&1&&(t(0,"div",106)(1,"div",107),o(2,"Select Asset Type"),i(),b(3,rr,4,5,"div",108),i()),a&2){let e=c();s(3),m("ngForOf",e.assetTypes)}}function or(a,n){a&1&&(t(0,"span",103),o(1,"Select asset status"),i())}function sr(a,n){if(a&1&&p(0,"span",112),a&2){let e=c(2);W("background",e.selectedAssetStatus.color)}}function lr(a,n){if(a&1&&(t(0,"div",104),b(1,sr,1,2,"span",111),t(2,"span"),o(3),i()()),a&2){let e=c();s(),m("ngIf",e.selectedAssetStatus.color),s(2),C(e.selectedAssetStatus.label)}}function dr(a,n){if(a&1&&p(0,"span",112),a&2){let e=c().$implicit;W("background",e.color)}}function cr(a,n){if(a&1){let e=E();t(0,"div",109),v("click",function(){let l=_(e).$implicit,d=c(2);return d.selectAssetStatus(l),h(d.showAssetStatusDropdown=!1)}),b(1,dr,1,2,"span",111),t(2,"span"),o(3),i()()}if(a&2){let e=n.$implicit,r=c(2);m("ngClass",je(3,Zn,(r.selectedAssetStatus==null?null:r.selectedAssetStatus.id)===e.id)),s(),m("ngIf",e.color),s(2),C(e.label)}}function mr(a,n){if(a&1&&(t(0,"div",106)(1,"div",107),o(2,"Select Asset Status"),i(),b(3,cr,4,5,"div",108),i()),a&2){let e=c();s(3),m("ngForOf",e.assetStatuses)}}function pr(a,n){a&1&&(t(0,"span",103),o(1,"Sort By"),i())}function ur(a,n){if(a&1&&(t(0,"span"),o(1),i()),a&2){let e=c();s(),C(e.selectedSort.label)}}function fr(a,n){if(a&1){let e=E();t(0,"div",115),v("click",function(){let l=_(e).$implicit,d=c(2);return d.selectSort(l),h(d.showSortDropdown=!1)}),o(1),i()}if(a&2){let e=n.$implicit,r=c(2);m("ngClass",je(2,Qi,(r.selectedSort==null?null:r.selectedSort.value)===e.value)),s(),k(" ",e.label," ")}}function gr(a,n){if(a&1&&(t(0,"div",113)(1,"div",107),o(2,"Sort By"),i(),b(3,fr,2,4,"div",114),i()),a&2){let e=c();s(3),m("ngForOf",e.sortOptions)}}function _r(a,n){a&1&&(g(),t(0,"svg",116),p(1,"path",117),i())}function hr(a,n){a&1&&(g(),t(0,"svg",116),p(1,"path",118),i())}function vr(a,n){a&1&&(t(0,"div",119)(1,"div",120)(2,"div",121),g(),t(3,"svg",122),p(4,"circle",123)(5,"path",124),i()(),x(),t(6,"h3",125),o(7,"Loading Assets"),i(),t(8,"p",126),o(9,"Please wait while we fetch your assets..."),i()()())}function xr(a,n){if(a&1){let e=E();t(0,"div",119)(1,"div",120)(2,"div",127),g(),t(3,"svg",128),p(4,"path",129),i()(),x(),t(5,"h3",125),o(6,"Error Loading Assets"),i(),t(7,"p",130),o(8),i(),t(9,"button",131),v("click",function(){_(e);let l=c();return h(l.loadAssets())}),o(10," Retry "),i()()()}if(a&2){let e=c();s(8),C(e.error)}}function br(a,n){if(a&1){let e=E();t(0,"div",132)(1,"button",133),v("click",function(){_(e);let l=c();return h(l.toggleSelectAllAssets())}),p(2,"span",134),i(),t(3,"span",135),o(4),i()()}if(a&2){let e=c();s(4),k("Select all ",e.assetList.length," assets")}}function wr(a,n){if(a&1){let e=E();t(0,"button",151),v("click",function(){_(e);let l=c(2);return h(l.duplicateSelected())}),g(),t(1,"svg",141),p(2,"rect",152)(3,"rect",153),i(),o(4," Duplicate"),i()}if(a&2){let e=c(2);m("disabled",e.selectedCount===0)}}function yr(a,n){if(a&1){let e=E();t(0,"button",154),v("click",function(){_(e);let l=c(2);return h(l.showArchiveModal())}),g(),t(1,"svg",141),p(2,"rect",155)(3,"path",156),i(),o(4," Archive "),i()}if(a&2){let e=c(2);m("disabled",e.selectedCount===0)}}function Cr(a,n){if(a&1){let e=E();t(0,"button",157),v("click",function(){_(e);let l=c(2);return h(l.showDeleteModal())}),g(),t(1,"svg",141),p(2,"rect",155)(3,"path",158),i(),o(4," Delete "),i()}if(a&2){let e=c(2);m("disabled",e.selectedCount===0)}}function Sr(a,n){if(a&1){let e=E();t(0,"button",159),v("click",function(){_(e);let l=c(2);return h(l.restoreSelected())}),g(),t(1,"svg",141),p(2,"path",160),i(),o(3," Restore "),i()}if(a&2){let e=c(2);m("disabled",e.selectedCount===0)}}function Er(a,n){if(a&1){let e=E();t(0,"div",136)(1,"div",137)(2,"button",133),v("click",function(){_(e);let l=c();return h(l.toggleSelectAllAssets())}),p(3,"span",138),i(),t(4,"span",139),o(5),i(),t(6,"span",140),g(),t(7,"svg",141),p(8,"path",142),i(),o(9," Selection Mode Active - Click cards to select "),i()(),x(),t(10,"div",104),b(11,wr,5,1,"button",143),t(12,"button",144),v("click",function(){_(e);let l=c();return h(l.generateQRCodeForSelectedAssets())}),g(),t(13,"svg",141),p(14,"path",145),i(),o(15," Generate QR Codes "),i(),b(16,yr,5,1,"button",146)(17,Cr,5,1,"button",147)(18,Sr,4,1,"button",148),x(),t(19,"button",149),v("click",function(){_(e);let l=c();return h(l.clearSelection())}),t(20,"span",150),o(21,"\xD7"),i(),o(22," Clear"),i()()()}if(a&2){let e=c();s(2),M("bg-blue-100",e.selectedCount===e.assetList.length),s(),M("bg-blue-400",e.selectedCount===e.assetList.length)("bg-white",e.selectedCount!==e.assetList.length),s(2),ie("",e.selectedCount," asset",e.selectedCount>1?"s":""," selected"),s(6),m("ngIf",!e.showingArchived),s(),m("disabled",e.selectedCount===0),s(4),m("ngIf",!e.showingArchived),s(),m("ngIf",e.showingArchived),s(),m("ngIf",e.showingArchived)}}function kr(a,n){if(a&1){let e=E();t(0,"div",161)(1,"div",162),g(),t(2,"svg",163),p(3,"path",21),i()(),x(),t(4,"h3",125),o(5,"No Assets Found"),i(),t(6,"p",164),o(7,"Get started by creating your first asset."),i(),t(8,"button",131),v("click",function(){_(e);let l=c();return h(l.goToCreateAsset())}),o(9," Add Asset "),i()()}}function Mr(a,n){a&1&&(t(0,"span",196),o(1,"Active"),i())}function Ar(a,n){if(a&1&&(t(0,"span"),o(1),i()),a&2){let e=c().$implicit,r=c(2);z("bg-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-100 text-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-700 text-xs font-semibold px-3 py-1 rounded-full"),s(),C((e.asset_status==null?null:e.asset_status.name)||e.status)}}function Tr(a,n){if(a&1){let e=E();t(0,"button",210),v("click",function(){_(e);let l=c(2).$implicit,d=c(2);return h(d.viewAsset(l))}),g(),t(1,"svg",211),p(2,"path",212)(3,"path",213),i(),x(),t(4,"span",214),o(5,"View Details"),i()()}}function Ir(a,n){if(a&1){let e=E();t(0,"button",210),v("click",function(){_(e);let l=c(2).$implicit,d=c(2);return h(d.editAsset(l))}),g(),t(1,"svg",211),p(2,"path",215),i(),x(),t(3,"span",214),o(4,"Edit Asset"),i()()}}function Dr(a,n){if(a&1){let e=E();t(0,"button",210),v("click",function(){_(e);let l=c(2).$implicit,d=c(2);return h(d.duplicateAsset(l))}),g(),t(1,"svg",211),p(2,"path",204),i(),x(),t(3,"span",214),o(4,"Duplicate"),i()()}}function Vr(a,n){if(a&1){let e=E();t(0,"button",216),v("click",function(){_(e);let l=c(2).$implicit,d=c(2);return h(d.archiveAsset(l))}),g(),t(1,"svg",217),p(2,"path",101),i(),x(),t(3,"span",218),o(4,"Archive"),i()()}}function Pr(a,n){if(a&1){let e=E();t(0,"button",219),v("click",function(){_(e);let l=c(2).$implicit,d=c(2);return h(d.restoreAsset(l))}),g(),t(1,"svg",220),p(2,"path",160),i(),x(),t(3,"span",221),o(4,"Restore"),i()()}}function Lr(a,n){if(a&1){let e=E();t(0,"button",222),v("click",function(){_(e);let l=c(2).$implicit,d=c(2);return h(d.deleteAsset(l))}),g(),t(1,"svg",223),p(2,"path",224),i(),x(),t(3,"span",225),o(4,"Delete Permanently"),i()()}}function Fr(a,n){if(a&1){let e=E();t(0,"div",197),b(1,Tr,6,0,"button",198)(2,Ir,5,0,"button",198)(3,Dr,5,0,"button",198),t(4,"button",199),v("click",function(){_(e);let l=c().$implicit,d=c(2);return h(d.generateQRCodeForAsset(l))}),g(),t(5,"svg",200),p(6,"path",145),i(),x(),t(7,"span",201),o(8,"Generate QR Code"),i()(),t(9,"button",202),v("click",function(){_(e);let l=c().$implicit,d=c(2);return h(d.copyPublicUrl(l))}),g(),t(10,"svg",203),p(11,"path",204),i(),x(),t(12,"span",205),o(13,"Copy Public URL"),i()(),p(14,"div",206),b(15,Vr,5,0,"button",207)(16,Pr,5,0,"button",208)(17,Lr,5,0,"button",209),i()}if(a&2){let e=c(3);s(),m("ngIf",!e.showingArchived),s(),m("ngIf",!e.showingArchived),s(),m("ngIf",!e.showingArchived),s(12),m("ngIf",!e.showingArchived),s(),m("ngIf",e.showingArchived),s(),m("ngIf",e.showingArchived)}}function Or(a,n){if(a&1&&(t(0,"div",226)(1,"a",227),o(2),i()()),a&2){let e=c().$implicit;s(),m("routerLink",je(3,Ki,e.parent.id)),s(),ie(" Parent: ",e.parent.name," (",e.parent.asset_id,") ")}}function Hr(a,n){if(a&1&&(t(0,"b"),o(1),fe(2,"number"),i()),a&2){let e=c().$implicit;s(),k("$",Ne(2,1,e.purchase_price,"1.0-0"),"")}}function jr(a,n){a&1&&(t(0,"b"),o(1,"N/A"),i())}function Nr(a,n){if(a&1&&(t(0,"div",188),g(),t(1,"svg",141),p(2,"path",228),i(),x(),t(3,"span"),o(4,"Purchase Date "),t(5,"b"),o(6),fe(7,"date"),i()()()),a&2){let e=c().$implicit;s(6),C(Ne(7,1,e.purchase_date,"MMM d, y"))}}function Rr(a,n){if(a&1){let e=E();t(0,"div",167)(1,"div",168)(2,"div",169)(3,"input",170),Q("ngModelChange",function(l){let d=_(e).$implicit;return q(d.selected,l)||(d.selected=l),h(l)}),i()(),t(4,"div",171),b(5,Mr,2,0,"span",172)(6,Ar,2,3,"span",173),t(7,"div",8),v("click",function(l){return _(e),h(l.stopPropagation())}),t(8,"button",174),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.toggleAssetMenu(l.id))}),g(),t(9,"svg",175),p(10,"circle",176)(11,"circle",177)(12,"circle",178),i()(),b(13,Fr,18,6,"div",179),i()(),t(14,"svg",180),p(15,"path",21),i()(),x(),t(16,"div",181)(17,"div"),b(18,Or,3,5,"div",182),t(19,"div",183),v("click",function(){let l=_(e).$implicit,d=c(2);return h(!d.showingArchived&&d.viewAsset(l))}),o(20),i(),t(21,"div",184),o(22),i(),t(23,"div",185),g(),t(24,"svg",141),p(25,"path",186),i(),x(),t(26,"span"),o(27),i()(),p(28,"hr",187),t(29,"div",188),g(),t(30,"svg",141),p(31,"path",43),i(),x(),t(32,"span"),o(33,"Value "),b(34,Hr,3,4,"b",60)(35,jr,2,0,"b",60),i()(),b(36,Nr,8,4,"div",189),i(),t(37,"div",190)(38,"div",191)(39,"span",192),o(40,"Health Score"),i(),t(41,"span",193),o(42),i()(),t(43,"div",194),p(44,"div",195),i()()()()}if(a&2){let e=n.$implicit,r=c(2);M("border-blue-400",e.selected),s(3),Y("ngModel",e.selected),s(2),m("ngIf",(e.asset_status==null?null:e.asset_status.name)==="Active"),s(),m("ngIf",(e.asset_status==null?null:e.asset_status.name)!=="Active"),s(7),m("ngIf",e.showMenu),s(5),m("ngIf",e.parent),s(),M("cursor-pointer",!r.showingArchived)("hover:text-blue-600",!r.showingArchived)("cursor-default",r.showingArchived),s(),k(" ",e.name||"Unnamed Asset"," "),s(2),ie("",e.asset_id||e.id," \u2022 ",e.type||"General",""),s(5),C((e.location==null?null:e.location.name)||"No location"),s(7),m("ngIf",e.purchase_price!==null),s(),m("ngIf",e.purchase_price===null),s(),m("ngIf",e.purchase_date),s(6),k("",e.health_score||100,"%"),s(2),W("width",e.health_score||100,"%"),m("ngClass",(e.health_score||100)<50?"bg-red-500":"bg-green-500")}}function Br(a,n){if(a&1&&(t(0,"div",165),b(1,Rr,45,24,"div",166),i()),a&2){let e=c();s(),m("ngForOf",e.assetList)}}function Gr(a,n){if(a&1){let e=E();t(0,"div",239)(1,"div",240)(2,"div",236)(3,"input",241),Q("ngModelChange",function(l){let d=_(e).$implicit;return q(d.selected,l)||(d.selected=l),h(l)}),i()(),t(4,"div",234)(5,"div",242)(6,"div",243),g(),t(7,"svg",244),p(8,"path",21),i()(),x(),t(9,"div")(10,"div",245),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.viewAsset(l))}),o(11),i(),t(12,"div",126),o(13),i()()()(),t(14,"div",235)(15,"div",246),o(16),i(),t(17,"div",126),o(18),i()(),t(19,"div",235)(20,"div",247),g(),t(21,"svg",248),p(22,"path",249)(23,"path",250),i(),x(),t(24,"span",251),o(25),i()()(),t(26,"div",236)(27,"span"),o(28),i()(),t(29,"div",235)(30,"div",246),o(31),fe(32,"currency"),i(),t(33,"div",126),o(34),i()(),t(35,"div",236)(36,"div",104)(37,"button",252),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.viewAsset(l))}),g(),t(38,"svg",116),p(39,"path",212)(40,"path",213),i()(),x(),t(41,"button",253),g(),t(42,"svg",116),p(43,"path",215),i()(),x(),t(44,"button",254),g(),t(45,"svg",116),p(46,"path",224),i()()()()()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",e.selected),s(3),Y("ngModel",e.selected),s(8),k(" ",e.name||"Unnamed Asset"," "),s(2),C(e.asset_id||"AST-"+e.id),s(3),C(e.type||"Standard Asset"),s(2),C((e.category==null?null:e.category.name)||"General"),s(7),C((e.location==null?null:e.location.name)||"No location"),s(2),z("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-100 text-"+r.getStatusColor((e.asset_status==null?null:e.asset_status.name)||e.status||"Active")+"-800"),s(),k(" ",(e.asset_status==null?null:e.asset_status.name)||e.status||"Active"," "),s(3),k(" ",e.purchase_price?Re(32,13,e.purchase_price,"USD","symbol","1.0-0"):"N/A"," "),s(3),k(" Health: ",e.health_score||100,"% ")}}function zr(a,n){if(a&1){let e=E();t(0,"div",229)(1,"div",230)(2,"div",231)(3,"div",232)(4,"input",233),v("change",function(){_(e);let l=c();return h(l.toggleSelectAllAssets())}),i()(),t(5,"div",234),o(6,"Asset"),i(),t(7,"div",235),o(8,"Type & Category"),i(),t(9,"div",235),o(10,"Location"),i(),t(11,"div",236),o(12,"Status"),i(),t(13,"div",235),o(14,"Financial"),i(),t(15,"div",236),o(16,"Actions"),i()()(),t(17,"div",237),b(18,Gr,47,18,"div",238),i()()}if(a&2){let e=c();s(4),m("checked",e.selectedCount===e.assetList.length&&e.assetList.length>0)("indeterminate",e.selectedCount>0&&e.selectedCount<e.assetList.length),s(14),m("ngForOf",e.assetList)}}var ot=class a{constructor(n,e,r){this.router=n;this.assetService=e;this.pdfExportService=r}destroy$=new nt;summary={totalAssets:0,activeAssets:0,maintenance:0,totalValue:0,assetHealth:0};loading=!1;error="";showMenu=!1;showTypeDropdown=!1;showStatusDropdown=!1;showSortDropdown=!1;showSortDirDropdown=!1;showArchiveConfirmationModal=!1;showDeleteConfirmationModal=!1;showRestoreConfirmationModal=!1;selectedAssetForRestore=null;showingArchived=!1;typeOptions=[{value:"",label:"All Types"},{value:"fixed",label:"Fixed Asset"},{value:"semi-fixed",label:"Semi-Fixed Asset"},{value:"mobile",label:"Mobile Asset"},{value:"fleet",label:"Fleet Asset"}];statusOptions=[{value:"",label:"All Status"},{value:"Active",label:"Active"},{value:"Maintenance",label:"Maintenance"},{value:"Inactive",label:"Inactive"},{value:"Retired",label:"Retired"}];sortOptions=[{value:"name",label:"Name"},{value:"created_at",label:"Date Added"},{value:"status",label:"Status"},{value:"manufacturer",label:"Manufacturer"},{value:"purchase_price",label:"Cost"}];selectedType=this.typeOptions[0];selectedStatus=this.statusOptions[0];selectedSort=this.sortOptions[0];selectedSortDir="desc";viewType="grid";searchQuery="";currentFilters={search:"",type:"",status:"",category_id:"",location_id:"",sort_by:"name",sort_direction:"desc",page:1,per_page:20,archived:!1};assetList=[];categories=[];locations=[];assetTypes=[];showAssetTypeDropdown=!1;selectedAssetType=null;assetStatuses=[];showAssetStatusDropdown=!1;selectedAssetStatus=null;openAssetMenuId=null;pagination={current_page:1,last_page:1,per_page:20,total:0,from:0,to:0};selectAllAssets=!1;ngOnInit(){this.loadAssetStatistics(),this.loadAssets(),this.loadCategories(),this.loadLocations(),this.assetService.getAssetTypes().subscribe(n=>{n.success&&n.data&&(this.assetTypes=[{id:"",name:"All Types",label:"All Types",icon:null},...n.data.map(e=>({id:e.id,name:e.name,label:e.name,icon:e.icon||null}))],this.selectedAssetType=this.assetTypes[0])}),this.assetService.getAssetStatuses().subscribe(n=>{n.success&&n.data&&(this.assetStatuses=[{id:"",name:"All Statuses",label:"All Statuses",color:null},...n.data.map(e=>({id:e.id,name:e.name,label:e.name,color:e.color||null}))],this.selectedAssetStatus=this.assetStatuses[0])})}loadAssetStatistics(){this.assetService.getAssetStatistics().pipe(G(this.destroy$)).subscribe({next:n=>{if(n.success&&n.data){let e=n.data;this.summary={totalAssets:e.total_assets||0,activeAssets:e.active_assets||0,maintenance:e.maintenance||0,totalValue:e.total_asset_value||0,assetHealth:e.total_asset_health&&e.total_assets?Math.round(e.total_asset_health/e.total_assets):100}}},error:n=>{console.error("Error loading asset statistics:",n)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadAssets(){this.loading=!0,this.error="";let n={};this.currentFilters.search&&(n.search=this.currentFilters.search),this.currentFilters.type&&(n.type=this.currentFilters.type),this.currentFilters.status&&(n.status=this.currentFilters.status),this.currentFilters.category_id&&(n.category_id=this.currentFilters.category_id),this.currentFilters.location_id&&(n.location_id=this.currentFilters.location_id),this.currentFilters.sort_by&&(n.sort_by=this.currentFilters.sort_by),this.currentFilters.sort_direction&&(n.sort_direction=this.currentFilters.sort_direction),n.archived=this.currentFilters.archived,n.page=this.currentFilters.page,n.per_page=this.currentFilters.per_page,this.assetService.getAssets(n).pipe(G(this.destroy$)).subscribe({next:e=>{e.success?(this.assetList=(e.data.assets||e.data).map(r=>On(Fn({},r),{selected:!1,showMenu:!1})),e.data.pagination&&(this.pagination=e.data.pagination)):this.error=e.message||"Failed to load assets",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading assets",this.loading=!1}})}loadCategories(){this.assetService.getAssetCategories().pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&(this.categories=n.data.categories)},error:n=>{console.error("Error loading categories:",n)}})}loadLocations(){this.assetService.getLocations().pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&(this.locations=n.data.locations||n.data)},error:n=>{console.error("Error loading locations:",n)}})}onSearch(){this.currentFilters.search=this.searchQuery,this.currentFilters.page=1,this.loadAssets()}applyFilters(){this.currentFilters.page=1,this.loadAssets()}get selectedCount(){return this.assetList.filter(n=>n.selected).length}toggleSelectAllAssets(){let n=this.selectedCount===this.assetList.length;this.assetList.forEach(e=>e.selected=!n),this.selectAllAssets=!n}selectType(n){let e=this.typeOptions.find(r=>r.value===n);e&&(this.selectedType=e,this.currentFilters.type=e.value),this.showTypeDropdown=!1,this.applyFilters()}selectStatus(n){let e=this.statusOptions.find(r=>r.value===n);e&&(this.selectedStatus=e,this.currentFilters.status=e.value),this.showStatusDropdown=!1,this.applyFilters()}selectSort(n){let e=this.sortOptions.find(r=>r.value===n);e&&(this.selectedSort=e,this.currentFilters.sort_by=e.value),this.showSortDropdown=!1,this.applyFilters()}selectSortDir(n){this.selectedSortDir=n,this.currentFilters.sort_direction=n,this.showSortDirDropdown=!1,this.applyFilters()}toggleSortDir(){this.selectedSortDir=this.selectedSortDir==="asc"?"desc":"asc",this.currentFilters.sort_direction=this.selectedSortDir,this.applyFilters()}duplicateSelected(){let n=this.assetList.filter(r=>r.selected);if(n.length===0)return;let e=n[0];this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:e.id}}),this.clearSelection()}generateSerialNumber(){let n=Date.now().toString(),e=Math.random().toString(36).substring(2,8).toUpperCase();return`SN${n.slice(-6)}${e}`}clearSelection(){this.assetList.forEach(n=>n.selected=!1),this.selectAllAssets=!1}showArchiveModal(){this.selectedCount>0&&(this.showArchiveConfirmationModal=!0)}closeArchiveModal(){this.showArchiveConfirmationModal=!1}showDeleteModal(){this.selectedCount>0&&(this.showDeleteConfirmationModal=!0)}closeDeleteModal(){this.showDeleteConfirmationModal=!1}closeRestoreModal(){this.showRestoreConfirmationModal=!1,this.selectedAssetForRestore=null}restoreSelectedAsset(n){if(this.assetList.filter(r=>r.selected).length>1)this.restoreBulkAssets(n);else if(this.selectedAssetForRestore){let r={};n&&n.trim()&&(r.restore_reason=n.trim()),this.assetService.restoreAsset(this.selectedAssetForRestore.id,r).pipe(G(this.destroy$)).subscribe({next:l=>{l.success?(this.loadAssets(),this.loadAssetStatistics(),console.log("Asset restored successfully")):this.error=l.message||"Failed to restore asset",this.closeRestoreModal()},error:l=>{this.error=l.error?.message||"An error occurred while restoring the asset",this.closeRestoreModal()}})}else this.closeRestoreModal()}deleteSelected(n){let e=this.assetList.filter(d=>d.selected);if(e.length===0){this.closeDeleteModal();return}let l={asset_ids:e.map(d=>d.id)};n&&n.trim()&&(l.deletion_reason=n.trim()),this.assetService.bulkDeleteAssets(l).pipe(G(this.destroy$)).subscribe({next:d=>{if(d.success){if(d.failed&&d.failed.length>0){let y=d.failed.length,P=d.deleted?d.deleted.length:0;this.error=`${P} assets deleted successfully, ${y} failed to delete`}else{let y=d.deleted?d.deleted.length:e.length;console.log(`${y} assets deleted successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=d.message||"Failed to delete assets";this.closeDeleteModal()},error:d=>{this.error=d.error?.message||"An error occurred while deleting assets",this.closeDeleteModal()}})}viewAsset(n){this.router.navigate(["/assets/preview",n.id])}archiveSelected(n){let e=this.assetList.filter(d=>d.selected);if(e.length===0){this.closeArchiveModal();return}let l={asset_ids:e.map(d=>d.id)};n&&n.trim()&&(l.archive_reason=n.trim()),this.assetService.bulkArchiveAssets(l).pipe(G(this.destroy$)).subscribe({next:d=>{if(d.success){if(d.failed&&d.failed.length>0){let y=d.failed.length,P=d.archived?d.archived.length:0;this.error=`${P} assets archived successfully, ${y} failed to archive`}else{let y=d.archived?d.archived.length:e.length;console.log(`${y} assets archived successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=d.message||"Failed to archive assets";this.closeArchiveModal()},error:d=>{this.error=d.error?.message||"An error occurred while archiving assets",this.closeArchiveModal()}})}toggleTypeDropdown(){this.showTypeDropdown=!this.showTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showTypeDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown,this.showTypeDropdown=!1,this.showStatusDropdown=!1,this.showSortDirDropdown=!1}toggleArchivedView(){this.showingArchived=!this.showingArchived,this.currentFilters.archived=this.showingArchived,this.currentFilters.page=1,this.clearSelection(),this.loadAssets(),this.showMenu=!1}goToCreateAsset(){this.router.navigate(["assets/create"])}exportToPdf(){if(this.assetList.length>0){let n=this.showingArchived?"Archived Assets Export Report":"Asset Export Report";this.pdfExportService.exportAssetsToPdf(this.assetList,n),this.showMenu=!1}else console.log("No assets to export")}getStatusColor(n){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[n]||"gray"}toggleAssetMenu(n){this.assetList.forEach(r=>{r.id!==n&&(r.showMenu=!1)});let e=this.assetList.find(r=>r.id===n);e&&(e.showMenu=!e.showMenu)}editAsset(n){this.router.navigate(["/assets",n.id,"edit"]),n.showMenu=!1}duplicateAsset(n){this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:n.id}}),n.showMenu=!1}archiveAsset(n){this.assetList.forEach(e=>e.selected=!1),n.selected=!0,this.showArchiveConfirmationModal=!0,n.showMenu=!1}deleteAsset(n){this.assetList.forEach(e=>e.selected=!1),n.selected=!0,this.showDeleteConfirmationModal=!0,n.showMenu=!1}restoreSelected(){this.assetList.filter(e=>e.selected).length!==0&&(this.showRestoreConfirmationModal=!0)}restoreBulkAssets(n){let e=this.assetList.filter(l=>l.selected);if(e.length===0){this.closeRestoreModal();return}let r=e.map(l=>l.id);this.assetService.bulkRestoreAssets(r,n).pipe(G(this.destroy$)).subscribe({next:l=>{if(l.success){if(l.failed&&l.failed.length>0){let d=l.failed.length,y=l.restored?l.restored.length:0;this.error=`${y} assets restored successfully, ${d} failed to restore`}else{let d=l.restored?l.restored.length:e.length;console.log(`${d} assets restored successfully`)}this.loadAssets(),this.loadAssetStatistics(),this.clearSelection()}else this.error=l.message||"Failed to restore assets";this.closeRestoreModal()},error:l=>{this.error=l.error?.message||"An error occurred while restoring assets",this.closeRestoreModal()}})}restoreAsset(n){this.selectedAssetForRestore=n,this.showRestoreConfirmationModal=!0,n.showMenu=!1}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showStatusDropdown=!1,this.showSortDropdown=!1,this.showSortDirDropdown=!1}selectAssetType(n){this.selectedAssetType=n,this.currentFilters.type=n.id,this.showAssetTypeDropdown=!1,this.applyFilters()}toggleAssetStatusDropdown(){this.showAssetStatusDropdown=!this.showAssetStatusDropdown}selectAssetStatus(n){this.selectedAssetStatus=n,this.currentFilters.status=n.id,this.showAssetStatusDropdown=!1,this.applyFilters()}onDocumentClick(n){n.target.closest(".menu-container")||(this.showMenu=!1)}generateQRCodeForAsset(n){let e=`${window.location.origin}/public/asset/${n.id}`;Jn.toDataURL(e,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(r=>{let l=document.createElement("a");l.href=r,l.download=`asset-${n.id}-qr.png`,l.click()}).catch(r=>{console.error("Error generating QR code:",r)})}generateQRCodeForSelectedAssets(){let n=this.assetList.filter(e=>e.selected);if(n.length===0){console.log("No assets selected");return}n.forEach(e=>{this.generateQRCodeForAsset(e)})}copyPublicUrl(n){let e=`${window.location.origin}/public/asset/${n.id}`;navigator.clipboard.writeText(e).then(()=>{console.log("Public URL copied to clipboard")})}static \u0275fac=function(e){return new(e||a)(K(Te),K(Ce),K(Wt))};static \u0275cmp=ae({type:a,selectors:[["app-asset-list"]],hostBindings:function(e,r){e&1&&v("click",function(d){return r.onDocumentClick(d)},!1,it)},decls:132,vars:60,consts:[[1,"asset-list-page","min-h-screen","bg-gray-50","p-6"],[1,"mb-6","flex","flex-col","md:flex-row","md:items-center","md:justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-5","py-2","rounded-lg","shadow-sm","transition-colors","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"relative",3,"click"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-5","gap-4","mb-8"],[1,"rounded-xl","bg-blue-50","border","border-blue-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-base","font-medium","text-gray-700"],[1,"w-10","h-10","bg-blue-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-3xl","font-bold","text-gray-900"],["href","#",1,"text-sm","text-blue-600","font-medium","mt-1"],[1,"rounded-xl","bg-green-50","border","border-green-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-green-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-400"],["cx","12","cy","12","r","8","stroke","currentColor","stroke-width","2","fill","none"],["cx","12","cy","12","r","4","fill","currentColor",1,"text-green-400"],[1,"text-sm","text-green-600","font-medium","mt-1"],[1,"rounded-xl","bg-orange-50","border","border-orange-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-orange-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-1.5a2.5 2.5 0 11-3.536 3.536l-7.5 7.5a2 2 0 102.828 2.828l7.5-7.5a2.5 2.5 0 013.536-3.536z"],[1,"text-sm","text-orange-600","font-medium","mt-1"],[1,"rounded-xl","bg-purple-50","border","border-purple-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-purple-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-sm","text-purple-600","font-medium","mt-1"],[1,"rounded-xl","bg-cyan-50","border","border-cyan-100","p-6","flex","flex-col","justify-between","shadow-sm","transition-all","hover:shadow-md"],[1,"w-10","h-10","bg-cyan-100","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-cyan-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3zm0 0V4m0 8v8m8-8h-8m8 0a8 8 0 11-16 0 8 8 0 0116 0z"],[1,"text-sm","text-cyan-600","font-medium","mt-1"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","mb-6"],[1,"flex-1","flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:items-center","md:space-x-3"],[1,"relative","w-full","md:w-80"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search assets by name, location, or ID...",1,"w-full","pl-10","pr-4","py-2","border-2","border-blue-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","input","ngModel"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[220px]",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-10 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-72 overflow-y-auto min-w-[220px] w-full",4,"ngIf"],[1,"relative","ml-2",3,"click"],["type","button",1,"w-full","px-4","py-2","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all","min-w-[180px]",3,"click"],[4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","transition-transform","ml-2"],["class","absolute z-10 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-72 overflow-y-auto min-w-[180px] w-full",4,"ngIf"],[1,"relative"],[1,"px-4","py-2","bg-gray-100","rounded-lg","text-gray-700","flex","items-center","space-x-2","min-w-[70px]","cursor-pointer",3,"click"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex","items-center","space-x-2","mt-4","md:mt-0"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-lg","border","border-gray-200","hover:bg-blue-50","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["x","4","y","4","width","7","height","7","rx","2"],["x","13","y","4","width","7","height","7","rx","2"],["x","4","y","13","width","7","height","7","rx","2"],["x","13","y","13","width","7","height","7","rx","2"],["x","4","y","6","width","16","height","4","rx","2"],["x","4","y","14","width","16","height","4","rx","2"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center",4,"ngIf"],["class","w-full bg-white rounded-xl border border-gray-200 px-6 py-3 mb-4 flex items-center justify-between",4,"ngIf"],["class","text-center py-20",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-2",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",4,"ngIf"],[3,"closeModal","confirmArchive","isOpen","selectedCount"],[3,"closeModal","confirmDelete","isOpen","selectedCount"],[3,"closeModal","confirmRestore","isOpen","selectedCount","assetName"],[1,"absolute","right-0","mt-2","w-64","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2a4 4 0 014-4h2a4 4 0 014 4v2"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["routerLink","/assets/import",1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-50","text-left","transition-colors","cursor-pointer"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"border-t","border-gray-100","my-2"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-orange-50","text-left","transition-colors","cursor-pointer","text-orange-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","hover:bg-red-50","text-left","transition-colors","cursor-pointer","text-red-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H19a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["alt","icon",1,"w-5","h-5",3,"src"],[1,"absolute","z-10","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-72","overflow-y-auto","min-w-[220px]","w-full"],[1,"px-4","py-2","text-xs","text-gray-400","font-semibold","uppercase","tracking-wider"],["class","flex items-center px-4 py-2 cursor-pointer hover:bg-blue-50",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","items-center","px-4","py-2","cursor-pointer","hover:bg-blue-50",3,"click","ngClass"],["alt","icon",1,"w-5","h-5","mr-2",3,"src"],["class","inline-block w-3 h-3 rounded-full mr-2",3,"background",4,"ngIf"],[1,"inline-block","w-3","h-3","rounded-full","mr-2"],[1,"absolute","z-10","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-72","overflow-y-auto","min-w-[180px]","w-full"],["class","px-4 py-2 cursor-pointer hover:bg-blue-50",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"px-4","py-2","cursor-pointer","hover:bg-blue-50",3,"click","ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 17l-4 4m0 0l-4-4m4 4V3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7l4-4m0 0l4 4m-4-4v18"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center"],["type","button",1,"focus:outline-none","inline-flex","items-center","justify-center","w-6","h-6","rounded-full","border-2","border-blue-400","mr-3","transition-colors",3,"click"],[1,"w-3","h-3","rounded-full","block","bg-white","transition-colors"],[1,"font-semibold","text-gray-900"],[1,"w-full","bg-white","rounded-xl","border","border-gray-200","px-6","py-3","mb-4","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-3","h-3","rounded-full","block","transition-colors"],[1,"font-bold","text-gray-900"],[1,"bg-blue-50","text-blue-600","px-3","py-1","rounded-full","text-sm","flex","items-center","font-medium"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7"],["class","bg-gray-50 text-gray-700 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 border border-gray-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-purple-50","text-purple-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zm12 0h2a1 1 0 001-1V6a1 1 0 00-1-1h-2a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1z"],["class","bg-orange-50 text-orange-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-red-50 text-red-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["class","bg-green-50 text-green-600 font-semibold px-4 py-2 rounded-lg flex items-center space-x-2 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],[1,"bg-transparent","text-gray-700","font-semibold","px-2","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer",3,"click"],[1,"text-xl"],[1,"bg-gray-50","text-gray-700","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","border","border-gray-200","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","8","y","8","width","8","height","8","rx","2","stroke-width","2"],["x","4","y","4","width","8","height","8","rx","2","stroke-width","2"],[1,"bg-orange-50","text-orange-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["x","4","y","4","width","16","height","16","rx","2","stroke-width","2"],["d","M8 12h8","stroke-width","2"],[1,"bg-red-50","text-red-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["d","M8 8l8 8M8 16l8-8","stroke-width","2"],[1,"bg-green-50","text-green-600","font-semibold","px-4","py-2","rounded-lg","flex","items-center","space-x-2","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"text-center","py-20"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","mt-2"],["class","rounded-2xl border border-blue-200 bg-white shadow-sm flex flex-col transition-all hover:shadow-md overflow-hidden",3,"border-blue-400",4,"ngFor","ngForOf"],[1,"rounded-2xl","border","border-blue-200","bg-white","shadow-sm","flex","flex-col","transition-all","hover:shadow-md","overflow-hidden"],[1,"relative","bg-[#e0edff]","h-32","flex","flex-col","items-center","justify-center"],[1,"absolute","left-4","top-4","flex","items-center"],["type","checkbox",1,"asset-card-checkbox",3,"ngModelChange","ngModel"],[1,"absolute","right-4","top-4","flex","items-center","space-x-2"],["class","bg-green-100 text-green-700 text-xs font-semibold px-3 py-1 rounded-full",4,"ngIf"],[3,"class",4,"ngIf"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["cx","12","cy","6","r","1.5"],["cx","12","cy","12","r","1.5"],["cx","12","cy","18","r","1.5"],["class","absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-blue-400"],[1,"flex-1","flex","flex-col","justify-between","p-6","pt-4"],["class","mb-2",4,"ngIf"],[1,"font-semibold","text-lg","text-gray-900","mb-1","cursor-pointer","hover:text-blue-600","transition-colors",3,"click"],[1,"text-sm","text-gray-500","mb-1"],[1,"flex","items-center","text-xs","text-gray-400","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 12.414a4 4 0 10-1.414 1.414l4.243 4.243a1 1 0 001.414-1.414z"],[1,"my-3","border-gray-200"],[1,"flex","items-center","text-sm","text-gray-700","mb-1"],["class","flex items-center text-sm text-gray-700 mb-1",4,"ngIf"],[1,"mt-4"],[1,"flex","justify-between","items-center","mb-1"],[1,"text-xs","text-gray-500"],[1,"text-xs","font-semibold","text-gray-700"],[1,"w-full","h-2","bg-gray-200","rounded-full"],[1,"h-2","rounded-full",3,"ngClass"],[1,"bg-green-100","text-green-700","text-xs","font-semibold","px-3","py-1","rounded-full"],[1,"absolute","right-0","top-full","mt-1","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-1","z-50"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-purple-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-500"],[1,"text-sm","text-purple-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-blue-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"text-sm","text-blue-600"],[1,"border-t","border-gray-100","my-1"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-orange-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-green-50 transition-colors",3,"click",4,"ngIf"],["class","w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-red-50 transition-colors",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"text-sm","text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-orange-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-500"],[1,"text-sm","text-orange-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-green-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-500"],[1,"text-sm","text-green-600"],[1,"w-full","flex","items-center","space-x-3","px-3","py-2","text-left","hover:bg-red-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-red-600"],[1,"mb-2"],[1,"text-blue-600","hover:underline","text-xs",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-1","flex","items-center"],["type","checkbox",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"change","checked","indeterminate"],[1,"col-span-3"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 transition-colors",3,"bg-blue-50",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","transition-colors"],[1,"grid","grid-cols-12","gap-4","items-center"],["type","checkbox",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"font-medium","text-gray-900","hover:text-blue-600","cursor-pointer","transition-colors",3,"click"],[1,"text-sm","text-gray-900"],[1,"flex","items-center","space-x-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-sm","text-gray-600"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all",3,"click"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all"],[1,"p-1","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded","transition-all"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Asset Intelligence Hub"),i(),t(5,"p",3),o(6,"Advanced asset monitoring with AI-powered insights and real-time analytics"),i()(),t(7,"div",4)(8,"button",5),v("click",function(){return r.goToCreateAsset()}),g(),t(9,"svg",6),p(10,"path",7),i(),o(11," Add Asset "),i(),x(),t(12,"div",8),v("click",function(d){return d.stopPropagation()}),t(13,"button",9),v("click",function(){return r.showMenu=!r.showMenu}),g(),t(14,"svg",10),p(15,"circle",11)(16,"circle",12)(17,"circle",13),i()(),b(18,Xi,33,3,"div",14),i()()(),x(),t(19,"div",15)(20,"div",16)(21,"div",17)(22,"span",18),o(23,"Total Assets"),i(),t(24,"span",19),g(),t(25,"svg",20),p(26,"path",21),i()()(),x(),t(27,"div",22),o(28),i(),t(29,"a",23),o(30,"Assets in system"),i()(),t(31,"div",24)(32,"div",17)(33,"span",18),o(34,"Active"),i(),t(35,"span",25),g(),t(36,"svg",26),p(37,"circle",27)(38,"circle",28),i()()(),x(),t(39,"div",22),o(40),i(),t(41,"span",29),o(42,"Operational assets"),i()(),t(43,"div",30)(44,"div",17)(45,"span",18),o(46,"Maintenance"),i(),t(47,"span",31),g(),t(48,"svg",32),p(49,"path",33),i()()(),x(),t(50,"div",22),o(51),i(),t(52,"span",34),o(53,"Under maintenance"),i()(),t(54,"div",35)(55,"div",17)(56,"span",18),o(57,"Total Value"),i(),t(58,"span",36),g(),t(59,"svg",37),p(60,"path",38),i()()(),x(),t(61,"div",22),o(62),fe(63,"currency"),i(),t(64,"span",39),o(65,"Asset portfolio value"),i()(),t(66,"div",40)(67,"div",17)(68,"span",18),o(69,"Asset Health"),i(),t(70,"span",41),g(),t(71,"svg",42),p(72,"path",43),i()()(),x(),t(73,"div",22),o(74),i(),t(75,"span",44),o(76,"Excellent health"),i()()(),t(77,"div",45)(78,"div",46)(79,"div",47),g(),t(80,"svg",48),p(81,"path",49),i(),x(),t(82,"input",50),Q("ngModelChange",function(d){return q(r.searchQuery,d)||(r.searchQuery=d),d}),v("input",function(){return r.onSearch()}),i()(),t(83,"div",8),v("click",function(d){return d.stopPropagation()}),t(84,"button",51),v("click",function(){return r.toggleAssetTypeDropdown()}),t(85,"div",52),b(86,er,2,0,"span",53)(87,nr,4,2,"div",54),g(),t(88,"svg",55),p(89,"path",56),i()()(),b(90,ar,4,1,"div",57),i(),x(),t(91,"div",58),v("click",function(d){return d.stopPropagation()}),t(92,"button",51),v("click",function(){return r.toggleAssetStatusDropdown()}),t(93,"div",52),b(94,or,2,0,"span",53)(95,lr,4,2,"div",54),i()(),b(96,mr,4,1,"div",57),i(),t(97,"div",58),v("click",function(d){return d.stopPropagation()}),t(98,"button",59),v("click",function(){return r.toggleSortDropdown()}),t(99,"div",52),b(100,pr,2,0,"span",53)(101,ur,2,1,"span",60),g(),t(102,"svg",61),p(103,"path",56),i()()(),b(104,gr,4,1,"div",62),i(),x(),t(105,"div",63)(106,"button",64),v("click",function(){return r.toggleSortDir()}),b(107,_r,2,0,"svg",65)(108,hr,2,0,"svg",65),t(109,"span"),o(110),i()()()(),t(111,"div",66)(112,"button",67),v("click",function(){return r.viewType="grid"}),g(),t(113,"svg",68),p(114,"rect",69)(115,"rect",70)(116,"rect",71)(117,"rect",72),i()(),x(),t(118,"button",67),v("click",function(){return r.viewType="list"}),g(),t(119,"svg",68),p(120,"rect",73)(121,"rect",74),i()()()(),b(122,vr,10,0,"div",75)(123,xr,11,1,"div",75)(124,br,5,1,"div",76)(125,Er,23,13,"div",77)(126,kr,10,0,"div",78)(127,Br,2,1,"div",79)(128,zr,19,3,"div",80),x(),t(129,"app-archive-confirmation-modal",81),v("closeModal",function(){return r.closeArchiveModal()})("confirmArchive",function(){return r.archiveSelected()}),i(),t(130,"app-delete-confirmation-modal",82),v("closeModal",function(){return r.closeDeleteModal()})("confirmDelete",function(d){return r.deleteSelected(d)}),i(),t(131,"app-restore-confirmation-modal",83),v("closeModal",function(){return r.closeRestoreModal()})("confirmRestore",function(d){return r.restoreSelectedAsset(d)}),i()()),e&2&&(s(18),m("ngIf",r.showMenu),s(10),C(r.summary.totalAssets),s(12),C(r.summary.activeAssets),s(11),C(r.summary.maintenance),s(11),C(Re(63,55,r.summary.totalValue,"USD","symbol","1.0-0")),s(12),k("",r.summary.assetHealth,"%"),s(8),Y("ngModel",r.searchQuery),s(2),M("border-blue-500",r.showAssetTypeDropdown),s(2),m("ngIf",!r.selectedAssetType),s(),m("ngIf",r.selectedAssetType),s(),M("rotate-180",r.showAssetTypeDropdown),s(2),m("ngIf",r.showAssetTypeDropdown),s(2),M("border-blue-500",r.showAssetStatusDropdown),s(2),m("ngIf",!r.selectedAssetStatus),s(),m("ngIf",r.selectedAssetStatus),s(),m("ngIf",r.showAssetStatusDropdown),s(2),M("border-blue-500",r.showSortDropdown),s(2),m("ngIf",!r.selectedSort),s(),m("ngIf",r.selectedSort),s(),M("rotate-180",r.showSortDropdown),s(2),m("ngIf",r.showSortDropdown),s(2),M("bg-blue-100",r.selectedSortDir==="asc")("text-blue-700",r.selectedSortDir==="asc"),s(),m("ngIf",r.selectedSortDir==="desc"),s(),m("ngIf",r.selectedSortDir==="asc"),s(2),C(r.selectedSortDir==="asc"?"A-Z":"Z-A"),s(2),M("bg-blue-100",r.viewType==="grid")("text-blue-700",r.viewType==="grid"),s(6),M("bg-blue-100",r.viewType==="list")("text-blue-700",r.viewType==="list"),s(4),m("ngIf",r.loading),s(),m("ngIf",r.error&&!r.loading),s(),m("ngIf",r.viewType==="grid"&&r.selectedCount===0&&!r.loading&&!r.error),s(),m("ngIf",r.viewType==="grid"&&r.selectedCount>0&&!r.loading&&!r.error),s(),m("ngIf",!r.loading&&!r.error&&r.assetList.length===0),s(),m("ngIf",r.viewType==="grid"&&!r.loading&&!r.error&&r.assetList.length>0),s(),m("ngIf",r.viewType==="list"&&!r.loading&&!r.error&&r.assetList.length>0),s(),m("isOpen",r.showArchiveConfirmationModal)("selectedCount",r.selectedCount),s(),m("isOpen",r.showDeleteConfirmationModal)("selectedCount",r.selectedCount),s(),m("isOpen",r.showRestoreConfirmationModal)("selectedCount",r.selectedCount>0?r.selectedCount:1)("assetName",(r.selectedAssetForRestore==null?null:r.selectedAssetForRestore.name)||""))},dependencies:[Pt,oe,we,ce,le,$n,de,_e,Un,Vt,Yt,qt,Qt,Dt,Le,Lt],styles:['.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]{width:20px!important;height:20px!important;border-radius:50%!important;border-width:2px;border-color:#3b82f6;appearance:none;background-color:#fff;display:inline-block;vertical-align:middle;position:relative;transition:border-color .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked{background-color:#3b82f6;border-color:#2563eb}.asset-list-page[_ngcontent-%COMP%]   .asset-card-checkbox[_ngcontent-%COMP%]:checked:after{content:"";display:block;width:10px;height:10px;border-radius:50%;background:#fff;position:absolute;top:3px;left:3px}.asset-list-page[_ngcontent-%COMP%]   .asset-card-header[_ngcontent-%COMP%]{background:#e0edff;height:8rem;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;border-top-left-radius:1rem;border-top-right-radius:1rem;overflow:hidden}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #101e3614;overflow:hidden;background:#fff;border:1px solid #bfdbfe;display:flex;flex-direction:column;transition:box-shadow .2s}.asset-list-page[_ngcontent-%COMP%]   .asset-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;border-color:#e5e7eb}']})};var Jt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ue={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(a){return typeof console<"u"&&console.warn(a)},getWeek:function(a){var n=new Date(a.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var e=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var Zt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(a){var n=a%100;if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Xt=Zt;var me=function(a,n){return n===void 0&&(n=2),("000"+a).slice(n*-1)},he=function(a){return a===!0?1:0};function xn(a,n){var e;return function(){var r=this,l=arguments;clearTimeout(e),e=setTimeout(function(){return a.apply(r,l)},n)}}var en=function(a){return a instanceof Array?a:[a]};function pe(a,n,e){if(e===!0)return a.classList.add(n);a.classList.remove(n)}function R(a,n,e){var r=window.document.createElement(a);return n=n||"",e=e||"",r.className=n,e!==void 0&&(r.textContent=e),r}function ht(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function bn(a,n){if(n(a))return a;if(a.parentNode)return bn(a.parentNode,n)}function vt(a,n){var e=R("div","numInputWrapper"),r=R("input","numInput "+a),l=R("span","arrowUp"),d=R("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),n!==void 0)for(var y in n)r.setAttribute(y,n[y]);return e.appendChild(r),e.appendChild(l),e.appendChild(d),e}function ve(a){try{if(typeof a.composedPath=="function"){var n=a.composedPath();return n[0]}return a.target}catch{return a.target}}var wn=function(){},xt=function(a,n,e){return e.months[n?"shorthand":"longhand"][a]},Xn={D:wn,F:function(a,n,e){a.setMonth(e.months.longhand.indexOf(n))},G:function(a,n){a.setHours((a.getHours()>=12?12:0)+parseFloat(n))},H:function(a,n){a.setHours(parseFloat(n))},J:function(a,n){a.setDate(parseFloat(n))},K:function(a,n,e){a.setHours(a.getHours()%12+12*he(new RegExp(e.amPM[1],"i").test(n)))},M:function(a,n,e){a.setMonth(e.months.shorthand.indexOf(n))},S:function(a,n){a.setSeconds(parseFloat(n))},U:function(a,n){return new Date(parseFloat(n)*1e3)},W:function(a,n,e){var r=parseInt(n),l=new Date(a.getFullYear(),0,2+(r-1)*7,0,0,0,0);return l.setDate(l.getDate()-l.getDay()+e.firstDayOfWeek),l},Y:function(a,n){a.setFullYear(parseFloat(n))},Z:function(a,n){return new Date(n)},d:function(a,n){a.setDate(parseFloat(n))},h:function(a,n){a.setHours((a.getHours()>=12?12:0)+parseFloat(n))},i:function(a,n){a.setMinutes(parseFloat(n))},j:function(a,n){a.setDate(parseFloat(n))},l:wn,m:function(a,n){a.setMonth(parseFloat(n)-1)},n:function(a,n){a.setMonth(parseFloat(n)-1)},s:function(a,n){a.setSeconds(parseFloat(n))},u:function(a,n){return new Date(parseFloat(n))},w:wn,y:function(a,n){a.setFullYear(2e3+parseFloat(n))}},Fe={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},st={Z:function(a){return a.toISOString()},D:function(a,n,e){return n.weekdays.shorthand[st.w(a,n,e)]},F:function(a,n,e){return xt(st.n(a,n,e)-1,!1,n)},G:function(a,n,e){return me(st.h(a,n,e))},H:function(a){return me(a.getHours())},J:function(a,n){return n.ordinal!==void 0?a.getDate()+n.ordinal(a.getDate()):a.getDate()},K:function(a,n){return n.amPM[he(a.getHours()>11)]},M:function(a,n){return xt(a.getMonth(),!0,n)},S:function(a){return me(a.getSeconds())},U:function(a){return a.getTime()/1e3},W:function(a,n,e){return e.getWeek(a)},Y:function(a){return me(a.getFullYear(),4)},d:function(a){return me(a.getDate())},h:function(a){return a.getHours()%12?a.getHours()%12:12},i:function(a){return me(a.getMinutes())},j:function(a){return a.getDate()},l:function(a,n){return n.weekdays.longhand[a.getDay()]},m:function(a){return me(a.getMonth()+1)},n:function(a){return a.getMonth()+1},s:function(a){return a.getSeconds()},u:function(a){return a.getTime()},w:function(a){return a.getDay()},y:function(a){return String(a.getFullYear()).substring(2)}};var yn=function(a){var n=a.config,e=n===void 0?Ue:n,r=a.l10n,l=r===void 0?Zt:r,d=a.isMobile,y=d===void 0?!1:d;return function(P,L,J){var j=J||l;return e.formatDate!==void 0&&!y?e.formatDate(P,L,j):L.split("").map(function(B,re,A){return st[B]&&A[re-1]!=="\\"?st[B](P,j,e):B!=="\\"?B:""}).join("")}},tn=function(a){var n=a.config,e=n===void 0?Ue:n,r=a.l10n,l=r===void 0?Zt:r;return function(d,y,P,L){if(!(d!==0&&!d)){var J=L||l,j,B=d;if(d instanceof Date)j=new Date(d.getTime());else if(typeof d!="string"&&d.toFixed!==void 0)j=new Date(d);else if(typeof d=="string"){var re=y||(e||Ue).dateFormat,A=String(d).trim();if(A==="today")j=new Date,P=!0;else if(e&&e.parseDate)j=e.parseDate(d,re);else if(/Z$/.test(A)||/GMT$/.test(A))j=new Date(d);else{for(var Ke=void 0,N=[],De=0,sn=0,Oe="";De<re.length;De++){var We=re[De],Je=We==="\\",ln=re[De-1]==="\\"||Je;if(Fe[We]&&!ln){Oe+=Fe[We];var Ye=new RegExp(Oe).exec(d);Ye&&(Ke=!0)&&N[We!=="Y"?"push":"unshift"]({fn:Xn[We],val:Ye[++sn]})}else Je||(Oe+=".")}j=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),N.forEach(function(Ze){var Xe=Ze.fn,dn=Ze.val;return j=Xe(j,dn,J)||j}),j=Ke?j:void 0}}if(!(j instanceof Date&&!isNaN(j.getTime()))){e.errorHandler(new Error("Invalid date provided: "+B));return}return P===!0&&j.setHours(0,0,0,0),j}}};function xe(a,n,e){return e===void 0&&(e=!0),e!==!1?new Date(a.getTime()).setHours(0,0,0,0)-new Date(n.getTime()).setHours(0,0,0,0):a.getTime()-n.getTime()}var ei=function(a,n,e){return a>Math.min(n,e)&&a<Math.max(n,e)},nn=function(a,n,e){return a*3600+n*60+e},ti=function(a){var n=Math.floor(a/3600),e=(a-n*3600)/60;return[n,e,a-n*3600-e*60]},ni={DAY:864e5};function rn(a){var n=a.defaultHour,e=a.defaultMinute,r=a.defaultSeconds;if(a.minDate!==void 0){var l=a.minDate.getHours(),d=a.minDate.getMinutes(),y=a.minDate.getSeconds();n<l&&(n=l),n===l&&e<d&&(e=d),n===l&&e===d&&r<y&&(r=a.minDate.getSeconds())}if(a.maxDate!==void 0){var P=a.maxDate.getHours(),L=a.maxDate.getMinutes();n=Math.min(n,P),n===P&&(e=Math.min(L,e)),n===P&&e===L&&(r=a.maxDate.getSeconds())}return{hours:n,minutes:e,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(a){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];if(!a)throw TypeError("Cannot convert undefined or null to object");for(var r=function(P){P&&Object.keys(P).forEach(function(L){return a[L]=P[L]})},l=0,d=n;l<d.length;l++){var y=d[l];r(y)}return a});var ue=function(){return ue=Object.assign||function(a){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l])}return a},ue.apply(this,arguments)},ii=function(){for(var a=0,n=0,e=arguments.length;n<e;n++)a+=arguments[n].length;for(var r=Array(a),l=0,n=0;n<e;n++)for(var d=arguments[n],y=0,P=d.length;y<P;y++,l++)r[l]=d[y];return r},Ur=300;function $r(a,n){var e={config:ue(ue({},Ue),ne.defaultConfig),l10n:Xt};e.parseDate=tn({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=N,e._setHoursFromDate=re,e._positionCalendar=St,e.changeMonth=cn,e.changeYear=wt,e.clear=pi,e.close=ui,e.onMouseOver=Ct,e._createElement=R,e.createDay=Ye,e.destroy=fi,e.isEnabled=qe,e.jumpToDate=Oe,e.updateValue=Ve,e.open=hi,e.redraw=In,e.set=wi,e.setDate=yi,e.toggle=ki;function r(){e.utils={getDaysInMonth:function(u,f){return u===void 0&&(u=e.currentMonth),f===void 0&&(f=e.currentYear),u===1&&(f%4===0&&f%100!==0||f%400===0)?29:e.l10n.daysInMonth[u]}}}function l(){e.element=e.input=a,e.isOpen=!1,vi(),Tn(),Si(),Ci(),r(),e.isMobile||ln(),sn(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&re(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ve(!1)),P();var u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&u&&St(),Z("onReady")}function d(){var u;return((u=e.calendarContainer)===null||u===void 0?void 0:u.getRootNode()).activeElement||document.activeElement}function y(u){return u.bind(e)}function P(){var u=e.config;u.weekNumbers===!1&&u.showMonths===1||u.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var f=(e.days.offsetWidth+1)*u.showMonths;e.daysContainer.style.width=f+"px",e.calendarContainer.style.width=f+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function L(u){if(e.selectedDates.length===0){var f=e.config.minDate===void 0||xe(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),w=rn(e.config);f.setHours(w.hours,w.minutes,w.seconds,f.getMilliseconds()),e.selectedDates=[f],e.latestSelectedDateObj=f}u!==void 0&&u.type!=="blur"&&Ti(u);var S=e._input.value;B(),Ve(),e._input.value!==S&&e._debouncedChange()}function J(u,f){return u%12+12*he(f===e.l10n.amPM[1])}function j(u){switch(u%24){case 0:case 12:return 12;default:return u%12}}function B(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var u=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,f=(parseInt(e.minuteElement.value,10)||0)%60,w=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(u=J(u,e.amPM.textContent));var S=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&xe(e.latestSelectedDateObj,e.config.minDate,!0)===0,T=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&xe(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var I=nn(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),O=nn(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),V=nn(u,f,w);if(V>O&&V<I){var H=ti(I);u=H[0],f=H[1],w=H[2]}}else{if(T){var D=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;u=Math.min(u,D.getHours()),u===D.getHours()&&(f=Math.min(f,D.getMinutes())),f===D.getMinutes()&&(w=Math.min(w,D.getSeconds()))}if(S){var F=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;u=Math.max(u,F.getHours()),u===F.getHours()&&f<F.getMinutes()&&(f=F.getMinutes()),f===F.getMinutes()&&(w=Math.max(w,F.getSeconds()))}}A(u,f,w)}}function re(u){var f=u||e.latestSelectedDateObj;f&&f instanceof Date&&A(f.getHours(),f.getMinutes(),f.getSeconds())}function A(u,f,w){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(u%24,f,w||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=me(e.config.time_24hr?u:(12+u)%12+12*he(u%12===0)),e.minuteElement.value=me(f),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[he(u>=12)]),e.secondElement!==void 0&&(e.secondElement.value=me(w)))}function Ke(u){var f=ve(u),w=parseInt(f.value)+(u.delta||0);(w/1e3>1||u.key==="Enter"&&!/[^\d]/.test(w.toString()))&&wt(w)}function N(u,f,w,S){if(f instanceof Array)return f.forEach(function(T){return N(u,T,w,S)});if(u instanceof Array)return u.forEach(function(T){return N(T,f,w,S)});u.addEventListener(f,w,S),e._handlers.push({remove:function(){return u.removeEventListener(f,w,S)}})}function De(){Z("onChange")}function sn(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(w){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+w+"]"),function(S){return N(S,"click",e[w])})}),e.isMobile){Ei();return}var u=xn(_i,50);if(e._debouncedChange=xn(De,Ur),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&N(e.daysContainer,"mouseover",function(w){e.config.mode==="range"&&Ct(ve(w))}),N(e._input,"keydown",kn),e.calendarContainer!==void 0&&N(e.calendarContainer,"keydown",kn),!e.config.inline&&!e.config.static&&N(window,"resize",u),window.ontouchstart!==void 0?N(window.document,"touchstart",mn):N(window.document,"mousedown",mn),N(window.document,"focus",mn,{capture:!0}),e.config.clickOpens===!0&&(N(e._input,"focus",e.open),N(e._input,"click",e.open)),e.daysContainer!==void 0&&(N(e.monthNav,"click",Ai),N(e.monthNav,["keyup","increment"],Ke),N(e.daysContainer,"click",Dn)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var f=function(w){return ve(w).select()};N(e.timeContainer,["increment"],L),N(e.timeContainer,"blur",L,{capture:!0}),N(e.timeContainer,"click",We),N([e.hourElement,e.minuteElement],["focus","click"],f),e.secondElement!==void 0&&N(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&N(e.amPM,"click",function(w){L(w)})}e.config.allowInput&&N(e._input,"blur",gi)}function Oe(u,f){var w=u!==void 0?e.parseDate(u):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),S=e.currentYear,T=e.currentMonth;try{w!==void 0&&(e.currentYear=w.getFullYear(),e.currentMonth=w.getMonth())}catch(I){I.message="Invalid date supplied: "+w,e.config.errorHandler(I)}f&&e.currentYear!==S&&(Z("onYearChange"),et()),f&&(e.currentYear!==S||e.currentMonth!==T)&&Z("onMonthChange"),e.redraw()}function We(u){var f=ve(u);~f.className.indexOf("arrow")&&Je(u,f.classList.contains("arrowUp")?1:-1)}function Je(u,f,w){var S=u&&ve(u),T=w||S&&S.parentNode&&S.parentNode.firstChild,I=un("increment");I.delta=f,T&&T.dispatchEvent(I)}function ln(){var u=window.document.createDocumentFragment();if(e.calendarContainer=R("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(u.appendChild(di()),e.innerContainer=R("div","flatpickr-innerContainer"),e.config.weekNumbers){var f=mi(),w=f.weekWrapper,S=f.weekNumbers;e.innerContainer.appendChild(w),e.weekNumbers=S,e.weekWrapper=w}e.rContainer=R("div","flatpickr-rContainer"),e.rContainer.appendChild(Sn()),e.daysContainer||(e.daysContainer=R("div","flatpickr-days"),e.daysContainer.tabIndex=-1),bt(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),u.appendChild(e.innerContainer)}e.config.enableTime&&u.appendChild(ci()),pe(e.calendarContainer,"rangeMode",e.config.mode==="range"),pe(e.calendarContainer,"animate",e.config.animate===!0),pe(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(u);var T=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!T&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var I=R("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(I,e.element),I.appendChild(e.element),e.altInput&&I.appendChild(e.altInput),I.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function Ye(u,f,w,S){var T=qe(f,!0),I=R("span",u,f.getDate().toString());return I.dateObj=f,I.$i=S,I.setAttribute("aria-label",e.formatDate(f,e.config.ariaDateFormat)),u.indexOf("hidden")===-1&&xe(f,e.now)===0&&(e.todayDateElem=I,I.classList.add("today"),I.setAttribute("aria-current","date")),T?(I.tabIndex=-1,fn(f)&&(I.classList.add("selected"),e.selectedDateElem=I,e.config.mode==="range"&&(pe(I,"startRange",e.selectedDates[0]&&xe(f,e.selectedDates[0],!0)===0),pe(I,"endRange",e.selectedDates[1]&&xe(f,e.selectedDates[1],!0)===0),u==="nextMonthDay"&&I.classList.add("inRange")))):I.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Mi(f)&&!fn(f)&&I.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&u!=="prevMonthDay"&&S%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(f)+"</span>"),Z("onDayCreate",I),I}function Ze(u){u.focus(),e.config.mode==="range"&&Ct(u)}function Xe(u){for(var f=u>0?0:e.config.showMonths-1,w=u>0?e.config.showMonths:-1,S=f;S!=w;S+=u)for(var T=e.daysContainer.children[S],I=u>0?0:T.children.length-1,O=u>0?T.children.length:-1,V=I;V!=O;V+=u){var H=T.children[V];if(H.className.indexOf("hidden")===-1&&qe(H.dateObj))return H}}function dn(u,f){for(var w=u.className.indexOf("Month")===-1?u.dateObj.getMonth():e.currentMonth,S=f>0?e.config.showMonths:-1,T=f>0?1:-1,I=w-e.currentMonth;I!=S;I+=T)for(var O=e.daysContainer.children[I],V=w-e.currentMonth===I?u.$i+f:f<0?O.children.length-1:0,H=O.children.length,D=V;D>=0&&D<H&&D!=(f>0?H:-1);D+=T){var F=O.children[D];if(F.className.indexOf("hidden")===-1&&qe(F.dateObj)&&Math.abs(u.$i-D)>=Math.abs(f))return Ze(F)}e.changeMonth(T),ut(Xe(T),0)}function ut(u,f){var w=d(),S=yt(w||document.body),T=u!==void 0?u:S?w:e.selectedDateElem!==void 0&&yt(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&yt(e.todayDateElem)?e.todayDateElem:Xe(f>0?1:-1);T===void 0?e._input.focus():S?dn(T,f):Ze(T)}function si(u,f){for(var w=(new Date(u,f,1).getDay()-e.l10n.firstDayOfWeek+7)%7,S=e.utils.getDaysInMonth((f-1+12)%12,u),T=e.utils.getDaysInMonth(f,u),I=window.document.createDocumentFragment(),O=e.config.showMonths>1,V=O?"prevMonthDay hidden":"prevMonthDay",H=O?"nextMonthDay hidden":"nextMonthDay",D=S+1-w,F=0;D<=S;D++,F++)I.appendChild(Ye("flatpickr-day "+V,new Date(u,f-1,D),D,F));for(D=1;D<=T;D++,F++)I.appendChild(Ye("flatpickr-day",new Date(u,f,D),D,F));for(var $=T+1;$<=42-w&&(e.config.showMonths===1||F%7!==0);$++,F++)I.appendChild(Ye("flatpickr-day "+H,new Date(u,f+1,$%T),$,F));var Ee=R("div","dayContainer");return Ee.appendChild(I),Ee}function bt(){if(e.daysContainer!==void 0){ht(e.daysContainer),e.weekNumbers&&ht(e.weekNumbers);for(var u=document.createDocumentFragment(),f=0;f<e.config.showMonths;f++){var w=new Date(e.currentYear,e.currentMonth,1);w.setMonth(e.currentMonth+f),u.appendChild(si(w.getFullYear(),w.getMonth()))}e.daysContainer.appendChild(u),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ct()}}function et(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var u=function(S){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&S<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&S>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var f=0;f<12;f++)if(u(f)){var w=R("option","flatpickr-monthDropdown-month");w.value=new Date(e.currentYear,f).getMonth().toString(),w.textContent=xt(f,e.config.shorthandCurrentMonth,e.l10n),w.tabIndex=-1,e.currentMonth===f&&(w.selected=!0),e.monthsDropdownContainer.appendChild(w)}}}function li(){var u=R("div","flatpickr-month"),f=window.document.createDocumentFragment(),w;e.config.showMonths>1||e.config.monthSelectorType==="static"?w=R("span","cur-month"):(e.monthsDropdownContainer=R("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),N(e.monthsDropdownContainer,"change",function(O){var V=ve(O),H=parseInt(V.value,10);e.changeMonth(H-e.currentMonth),Z("onMonthChange")}),et(),w=e.monthsDropdownContainer);var S=vt("cur-year",{tabindex:"-1"}),T=S.getElementsByTagName("input")[0];T.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&T.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(T.setAttribute("max",e.config.maxDate.getFullYear().toString()),T.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var I=R("div","flatpickr-current-month");return I.appendChild(w),I.appendChild(S),f.appendChild(I),u.appendChild(f),{container:u,yearElement:T,monthElement:w}}function Cn(){ht(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var u=e.config.showMonths;u--;){var f=li();e.yearElements.push(f.yearElement),e.monthElements.push(f.monthElement),e.monthNav.appendChild(f.container)}e.monthNav.appendChild(e.nextMonthNav)}function di(){return e.monthNav=R("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=R("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=R("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Cn(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(u){e.__hidePrevMonthArrow!==u&&(pe(e.prevMonthNav,"flatpickr-disabled",u),e.__hidePrevMonthArrow=u)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(u){e.__hideNextMonthArrow!==u&&(pe(e.nextMonthNav,"flatpickr-disabled",u),e.__hideNextMonthArrow=u)}}),e.currentYearElement=e.yearElements[0],kt(),e.monthNav}function ci(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var u=rn(e.config);e.timeContainer=R("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var f=R("span","flatpickr-time-separator",":"),w=vt("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=w.getElementsByTagName("input")[0];var S=vt("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=S.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=me(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?u.hours:j(u.hours)),e.minuteElement.value=me(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():u.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(w),e.timeContainer.appendChild(f),e.timeContainer.appendChild(S),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var T=vt("flatpickr-second");e.secondElement=T.getElementsByTagName("input")[0],e.secondElement.value=me(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():u.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(R("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(T)}return e.config.time_24hr||(e.amPM=R("span","flatpickr-am-pm",e.l10n.amPM[he((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Sn(){e.weekdayContainer?ht(e.weekdayContainer):e.weekdayContainer=R("div","flatpickr-weekdays");for(var u=e.config.showMonths;u--;){var f=R("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(f)}return En(),e.weekdayContainer}function En(){if(e.weekdayContainer){var u=e.l10n.firstDayOfWeek,f=ii(e.l10n.weekdays.shorthand);u>0&&u<f.length&&(f=ii(f.splice(u,f.length),f.splice(0,u)));for(var w=e.config.showMonths;w--;)e.weekdayContainer.children[w].innerHTML=`
      <span class='flatpickr-weekday'>
        `+f.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function mi(){e.calendarContainer.classList.add("hasWeeks");var u=R("div","flatpickr-weekwrapper");u.appendChild(R("span","flatpickr-weekday",e.l10n.weekAbbreviation));var f=R("div","flatpickr-weeks");return u.appendChild(f),{weekWrapper:u,weekNumbers:f}}function cn(u,f){f===void 0&&(f=!0);var w=f?u:u-e.currentMonth;w<0&&e._hidePrevMonthArrow===!0||w>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=w,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Z("onYearChange"),et()),bt(),Z("onMonthChange"),kt())}function pi(u,f){if(u===void 0&&(u=!0),f===void 0&&(f=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,f===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var w=rn(e.config),S=w.hours,T=w.minutes,I=w.seconds;A(S,T,I)}e.redraw(),u&&Z("onChange")}function ui(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),Z("onClose")}function fi(){e.config!==void 0&&Z("onDestroy");for(var u=e._handlers.length;u--;)e._handlers[u].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var f=e.calendarContainer.parentNode;if(f.lastChild&&f.removeChild(f.lastChild),f.parentNode){for(;f.firstChild;)f.parentNode.insertBefore(f.firstChild,f);f.parentNode.removeChild(f)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(w){try{delete e[w]}catch{}})}function ft(u){return e.calendarContainer.contains(u)}function mn(u){if(e.isOpen&&!e.config.inline){var f=ve(u),w=ft(f),S=f===e.input||f===e.altInput||e.element.contains(f)||u.path&&u.path.indexOf&&(~u.path.indexOf(e.input)||~u.path.indexOf(e.altInput)),T=!S&&!w&&!ft(u.relatedTarget),I=!e.config.ignoredFocusElements.some(function(O){return O.contains(f)});T&&I&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&L(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function wt(u){if(!(!u||e.config.minDate&&u<e.config.minDate.getFullYear()||e.config.maxDate&&u>e.config.maxDate.getFullYear())){var f=u,w=e.currentYear!==f;e.currentYear=f||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),w&&(e.redraw(),Z("onYearChange"),et())}}function qe(u,f){var w;f===void 0&&(f=!0);var S=e.parseDate(u,void 0,f);if(e.config.minDate&&S&&xe(S,e.config.minDate,f!==void 0?f:!e.minDateHasTime)<0||e.config.maxDate&&S&&xe(S,e.config.maxDate,f!==void 0?f:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(S===void 0)return!1;for(var T=!!e.config.enable,I=(w=e.config.enable)!==null&&w!==void 0?w:e.config.disable,O=0,V=void 0;O<I.length;O++){if(V=I[O],typeof V=="function"&&V(S))return T;if(V instanceof Date&&S!==void 0&&V.getTime()===S.getTime())return T;if(typeof V=="string"){var H=e.parseDate(V,void 0,!0);return H&&H.getTime()===S.getTime()?T:!T}else if(typeof V=="object"&&S!==void 0&&V.from&&V.to&&S.getTime()>=V.from.getTime()&&S.getTime()<=V.to.getTime())return T}return!T}function yt(u){return e.daysContainer!==void 0?u.className.indexOf("hidden")===-1&&u.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(u):!1}function gi(u){var f=u.target===e._input,w=e._input.value.trimEnd()!==gn();f&&w&&!(u.relatedTarget&&ft(u.relatedTarget))&&e.setDate(e._input.value,!0,u.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function kn(u){var f=ve(u),w=e.config.wrap?a.contains(f):f===e._input,S=e.config.allowInput,T=e.isOpen&&(!S||!w),I=e.config.inline&&w&&!S;if(u.keyCode===13&&w){if(S)return e.setDate(e._input.value,!0,f===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),f.blur();e.open()}else if(ft(f)||T||I){var O=!!e.timeContainer&&e.timeContainer.contains(f);switch(u.keyCode){case 13:O?(u.preventDefault(),L(),pn()):Dn(u);break;case 27:u.preventDefault(),pn();break;case 8:case 46:w&&!e.config.allowInput&&(u.preventDefault(),e.clear());break;case 37:case 39:if(!O&&!w){u.preventDefault();var V=d();if(e.daysContainer!==void 0&&(S===!1||V&&yt(V))){var H=u.keyCode===39?1:-1;u.ctrlKey?(u.stopPropagation(),cn(H),ut(Xe(1),0)):ut(void 0,H)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:u.preventDefault();var D=u.keyCode===40?1:-1;e.daysContainer&&f.$i!==void 0||f===e.input||f===e.altInput?u.ctrlKey?(u.stopPropagation(),wt(e.currentYear-D),ut(Xe(1),0)):O||ut(void 0,D*7):f===e.currentYearElement?wt(e.currentYear-D):e.config.enableTime&&(!O&&e.hourElement&&e.hourElement.focus(),L(u),e._debouncedChange());break;case 9:if(O){var F=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(be){return be}),$=F.indexOf(f);if($!==-1){var Ee=F[$+(u.shiftKey?-1:1)];u.preventDefault(),(Ee||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(f)&&u.shiftKey&&(u.preventDefault(),e._input.focus());break;default:break}}if(e.amPM!==void 0&&f===e.amPM)switch(u.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],B(),Ve();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],B(),Ve();break}(w||ft(f))&&Z("onKeyDown",u)}function Ct(u,f){if(f===void 0&&(f="flatpickr-day"),!(e.selectedDates.length!==1||u&&(!u.classList.contains(f)||u.classList.contains("flatpickr-disabled")))){for(var w=u?u.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),S=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),T=Math.min(w,e.selectedDates[0].getTime()),I=Math.max(w,e.selectedDates[0].getTime()),O=!1,V=0,H=0,D=T;D<I;D+=ni.DAY)qe(new Date(D),!0)||(O=O||D>T&&D<I,D<S&&(!V||D>V)?V=D:D>S&&(!H||D<H)&&(H=D));var F=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+f));F.forEach(function($){var Ee=$.dateObj,be=Ee.getTime(),gt=V>0&&be<V||H>0&&be>H;if(gt){$.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(tt){$.classList.remove(tt)});return}else if(O&&!gt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(tt){$.classList.remove(tt)}),u!==void 0&&(u.classList.add(w<=e.selectedDates[0].getTime()?"startRange":"endRange"),S<w&&be===S?$.classList.add("startRange"):S>w&&be===S&&$.classList.add("endRange"),be>=V&&(H===0||be<=H)&&ei(be,S,w)&&$.classList.add("inRange"))})}}function _i(){e.isOpen&&!e.config.static&&!e.config.inline&&St()}function hi(u,f){if(f===void 0&&(f=e._positionElement),e.isMobile===!0){if(u){u.preventDefault();var w=ve(u);w&&w.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),Z("onOpen");return}else if(e._input.disabled||e.config.inline)return;var S=e.isOpen;e.isOpen=!0,S||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Z("onOpen"),St(f)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(u===void 0||!e.timeContainer.contains(u.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Mn(u){return function(f){var w=e.config["_"+u+"Date"]=e.parseDate(f,e.config.dateFormat),S=e.config["_"+(u==="min"?"max":"min")+"Date"];w!==void 0&&(e[u==="min"?"minDateHasTime":"maxDateHasTime"]=w.getHours()>0||w.getMinutes()>0||w.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(T){return qe(T)}),!e.selectedDates.length&&u==="min"&&re(w),Ve()),e.daysContainer&&(In(),w!==void 0?e.currentYearElement[u]=w.getFullYear().toString():e.currentYearElement.removeAttribute(u),e.currentYearElement.disabled=!!S&&w!==void 0&&S.getFullYear()===w.getFullYear())}}function vi(){var u=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],f=ue(ue({},JSON.parse(JSON.stringify(a.dataset||{}))),n),w={};e.config.parseDate=f.parseDate,e.config.formatDate=f.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(F){e.config._enable=Pn(F)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(F){e.config._disable=Pn(F)}});var S=f.mode==="time";if(!f.dateFormat&&(f.enableTime||S)){var T=ne.defaultConfig.dateFormat||Ue.dateFormat;w.dateFormat=f.noCalendar||S?"H:i"+(f.enableSeconds?":S":""):T+" H:i"+(f.enableSeconds?":S":"")}if(f.altInput&&(f.enableTime||S)&&!f.altFormat){var I=ne.defaultConfig.altFormat||Ue.altFormat;w.altFormat=f.noCalendar||S?"h:i"+(f.enableSeconds?":S K":" K"):I+(" h:i"+(f.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Mn("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Mn("max")});var O=function(F){return function($){e.config[F==="min"?"_minTime":"_maxTime"]=e.parseDate($,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:O("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:O("max")}),f.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,w,f);for(var V=0;V<u.length;V++)e.config[u[V]]=e.config[u[V]]===!0||e.config[u[V]]==="true";Jt.filter(function(F){return e.config[F]!==void 0}).forEach(function(F){e.config[F]=en(e.config[F]||[]).map(y)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var V=0;V<e.config.plugins.length;V++){var H=e.config.plugins[V](e)||{};for(var D in H)Jt.indexOf(D)>-1?e.config[D]=en(H[D]).map(y).concat(e.config[D]):typeof f[D]>"u"&&(e.config[D]=H[D])}f.altInputClass||(e.config.altInputClass=An().className+" "+e.config.altInputClass),Z("onParseConfig")}function An(){return e.config.wrap?a.querySelector("[data-input]"):a}function Tn(){typeof e.config.locale!="object"&&typeof ne.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=ue(ue({},ne.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?ne.l10ns[e.config.locale]:void 0),Fe.D="("+e.l10n.weekdays.shorthand.join("|")+")",Fe.l="("+e.l10n.weekdays.longhand.join("|")+")",Fe.M="("+e.l10n.months.shorthand.join("|")+")",Fe.F="("+e.l10n.months.longhand.join("|")+")",Fe.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var u=ue(ue({},n),JSON.parse(JSON.stringify(a.dataset||{})));u.time_24hr===void 0&&ne.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=yn(e),e.parseDate=tn({config:e.config,l10n:e.l10n})}function St(u){if(typeof e.config.position=="function")return void e.config.position(e,u);if(e.calendarContainer!==void 0){Z("onPreCalendarPosition");var f=u||e._positionElement,w=Array.prototype.reduce.call(e.calendarContainer.children,function(Hi,ji){return Hi+ji.offsetHeight},0),S=e.calendarContainer.offsetWidth,T=e.config.position.split(" "),I=T[0],O=T.length>1?T[1]:null,V=f.getBoundingClientRect(),H=window.innerHeight-V.bottom,D=I==="above"||I!=="below"&&H<w&&V.top>w,F=window.pageYOffset+V.top+(D?-w-2:f.offsetHeight+2);if(pe(e.calendarContainer,"arrowTop",!D),pe(e.calendarContainer,"arrowBottom",D),!e.config.inline){var $=window.pageXOffset+V.left,Ee=!1,be=!1;O==="center"?($-=(S-V.width)/2,Ee=!0):O==="right"&&($-=S-V.width,be=!0),pe(e.calendarContainer,"arrowLeft",!Ee&&!be),pe(e.calendarContainer,"arrowCenter",Ee),pe(e.calendarContainer,"arrowRight",be);var gt=window.document.body.offsetWidth-(window.pageXOffset+V.right),tt=$+S>window.document.body.offsetWidth,Ii=gt+S>window.document.body.offsetWidth;if(pe(e.calendarContainer,"rightMost",tt),!e.config.static)if(e.calendarContainer.style.top=F+"px",!tt)e.calendarContainer.style.left=$+"px",e.calendarContainer.style.right="auto";else if(!Ii)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=gt+"px";else{var _n=xi();if(_n===void 0)return;var Di=window.document.body.offsetWidth,Vi=Math.max(0,Di/2-S/2),Pi=".flatpickr-calendar.centerMost:before",Li=".flatpickr-calendar.centerMost:after",Fi=_n.cssRules.length,Oi="{left:"+V.left+"px;right:auto;}";pe(e.calendarContainer,"rightMost",!1),pe(e.calendarContainer,"centerMost",!0),_n.insertRule(Pi+","+Li+Oi,Fi),e.calendarContainer.style.left=Vi+"px",e.calendarContainer.style.right="auto"}}}}function xi(){for(var u=null,f=0;f<document.styleSheets.length;f++){var w=document.styleSheets[f];if(w.cssRules){try{w.cssRules}catch{continue}u=w;break}}return u??bi()}function bi(){var u=document.createElement("style");return document.head.appendChild(u),u.sheet}function In(){e.config.noCalendar||e.isMobile||(et(),kt(),bt())}function pn(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Dn(u){u.preventDefault(),u.stopPropagation();var f=function(F){return F.classList&&F.classList.contains("flatpickr-day")&&!F.classList.contains("flatpickr-disabled")&&!F.classList.contains("notAllowed")},w=bn(ve(u),f);if(w!==void 0){var S=w,T=e.latestSelectedDateObj=new Date(S.dateObj.getTime()),I=(T.getMonth()<e.currentMonth||T.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=S,e.config.mode==="single")e.selectedDates=[T];else if(e.config.mode==="multiple"){var O=fn(T);O?e.selectedDates.splice(parseInt(O),1):e.selectedDates.push(T)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=T,e.selectedDates.push(T),xe(T,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(F,$){return F.getTime()-$.getTime()}));if(B(),I){var V=e.currentYear!==T.getFullYear();e.currentYear=T.getFullYear(),e.currentMonth=T.getMonth(),V&&(Z("onYearChange"),et()),Z("onMonthChange")}if(kt(),bt(),Ve(),!I&&e.config.mode!=="range"&&e.config.showMonths===1?Ze(S):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var H=e.config.mode==="single"&&!e.config.enableTime,D=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(H||D)&&pn()}De()}}var Et={locale:[Tn,En],showMonths:[Cn,P,Sn],minDate:[Oe],maxDate:[Oe],positionElement:[Ln],clickOpens:[function(){e.config.clickOpens===!0?(N(e._input,"focus",e.open),N(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function wi(u,f){if(u!==null&&typeof u=="object"){Object.assign(e.config,u);for(var w in u)Et[w]!==void 0&&Et[w].forEach(function(S){return S()})}else e.config[u]=f,Et[u]!==void 0?Et[u].forEach(function(S){return S()}):Jt.indexOf(u)>-1&&(e.config[u]=en(f));e.redraw(),Ve(!0)}function Vn(u,f){var w=[];if(u instanceof Array)w=u.map(function(S){return e.parseDate(S,f)});else if(u instanceof Date||typeof u=="number")w=[e.parseDate(u,f)];else if(typeof u=="string")switch(e.config.mode){case"single":case"time":w=[e.parseDate(u,f)];break;case"multiple":w=u.split(e.config.conjunction).map(function(S){return e.parseDate(S,f)});break;case"range":w=u.split(e.l10n.rangeSeparator).map(function(S){return e.parseDate(S,f)});break;default:break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(u)));e.selectedDates=e.config.allowInvalidPreload?w:w.filter(function(S){return S instanceof Date&&qe(S,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(S,T){return S.getTime()-T.getTime()})}function yi(u,f,w){if(f===void 0&&(f=!1),w===void 0&&(w=e.config.dateFormat),u!==0&&!u||u instanceof Array&&u.length===0)return e.clear(f);Vn(u,w),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),Oe(void 0,f),re(),e.selectedDates.length===0&&e.clear(!1),Ve(f),f&&Z("onChange")}function Pn(u){return u.slice().map(function(f){return typeof f=="string"||typeof f=="number"||f instanceof Date?e.parseDate(f,void 0,!0):f&&typeof f=="object"&&f.from&&f.to?{from:e.parseDate(f.from,void 0),to:e.parseDate(f.to,void 0)}:f}).filter(function(f){return f})}function Ci(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var u=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);u&&Vn(u,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function Si(){if(e.input=An(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=R(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Ln()}function Ln(){e._positionElement=e.config.positionElement||e._input}function Ei(){var u=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=R("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=u,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=u==="datetime-local"?"Y-m-d\\TH:i:S":u==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}N(e.mobileInput,"change",function(f){e.setDate(ve(f).value,!1,e.mobileFormatStr),Z("onChange"),Z("onClose")})}function ki(u){if(e.isOpen===!0)return e.close();e.open(u)}function Z(u,f){if(e.config!==void 0){var w=e.config[u];if(w!==void 0&&w.length>0)for(var S=0;w[S]&&S<w.length;S++)w[S](e.selectedDates,e.input.value,e,f);u==="onChange"&&(e.input.dispatchEvent(un("change")),e.input.dispatchEvent(un("input")))}}function un(u){var f=document.createEvent("Event");return f.initEvent(u,!0,!0),f}function fn(u){for(var f=0;f<e.selectedDates.length;f++){var w=e.selectedDates[f];if(w instanceof Date&&xe(w,u)===0)return""+f}return!1}function Mi(u){return e.config.mode!=="range"||e.selectedDates.length<2?!1:xe(u,e.selectedDates[0])>=0&&xe(u,e.selectedDates[1])<=0}function kt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(u,f){var w=new Date(e.currentYear,e.currentMonth,1);w.setMonth(e.currentMonth+f),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[f].textContent=xt(w.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=w.getMonth().toString(),u.value=w.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function gn(u){var f=u||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(w){return e.formatDate(w,f)}).filter(function(w,S,T){return e.config.mode!=="range"||e.config.enableTime||T.indexOf(w)===S}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Ve(u){u===void 0&&(u=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=gn(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=gn(e.config.altFormat)),u!==!1&&Z("onValueUpdate")}function Ai(u){var f=ve(u),w=e.prevMonthNav.contains(f),S=e.nextMonthNav.contains(f);w||S?cn(w?-1:1):e.yearElements.indexOf(f)>=0?f.select():f.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):f.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Ti(u){u.preventDefault();var f=u.type==="keydown",w=ve(u),S=w;e.amPM!==void 0&&w===e.amPM&&(e.amPM.textContent=e.l10n.amPM[he(e.amPM.textContent===e.l10n.amPM[0])]);var T=parseFloat(S.getAttribute("min")),I=parseFloat(S.getAttribute("max")),O=parseFloat(S.getAttribute("step")),V=parseInt(S.value,10),H=u.delta||(f?u.which===38?1:-1:0),D=V+O*H;if(typeof S.value<"u"&&S.value.length===2){var F=S===e.hourElement,$=S===e.minuteElement;D<T?(D=I+D+he(!F)+(he(F)&&he(!e.amPM)),$&&Je(void 0,-1,e.hourElement)):D>I&&(D=S===e.hourElement?D-I-he(!e.amPM):T,$&&Je(void 0,1,e.hourElement)),e.amPM&&F&&(O===1?D+V===23:Math.abs(D-V)>O)&&(e.amPM.textContent=e.l10n.amPM[he(e.amPM.textContent===e.l10n.amPM[0])]),S.value=me(D)}}return l(),e}function lt(a,n){for(var e=Array.prototype.slice.call(a).filter(function(y){return y instanceof HTMLElement}),r=[],l=0;l<e.length;l++){var d=e[l];try{if(d.getAttribute("data-fp-omit")!==null)continue;d._flatpickr!==void 0&&(d._flatpickr.destroy(),d._flatpickr=void 0),d._flatpickr=$r(d,n||{}),r.push(d._flatpickr)}catch(y){console.error(y)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(a){return lt(this,a)},HTMLElement.prototype.flatpickr=function(a){return lt([this],a)});var ne=function(a,n){return typeof a=="string"?lt(window.document.querySelectorAll(a),n):a instanceof Node?lt([a],n):lt(a,n)};ne.defaultConfig={};ne.l10ns={en:ue({},Xt),default:ue({},Xt)};ne.localize=function(a){ne.l10ns.default=ue(ue({},ne.l10ns.default),a)};ne.setDefaults=function(a){ne.defaultConfig=ue(ue({},ne.defaultConfig),a)};ne.parseDate=tn({});ne.formatDate=yn({});ne.compareDates=xe;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(a){return lt(this,a)});Date.prototype.fp_incr=function(a){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof a=="string"?parseInt(a,10):a))};typeof window<"u"&&(window.flatpickr=ne);var $e=ne;var Wr=["fileInput"],Yr=["dateInput"];function qr(a,n){a&1&&(t(0,"div",102)(1,"div",81),g(),t(2,"svg",19),p(3,"path",84),i(),x(),t(4,"div")(5,"p",103),o(6,"Duplicating Asset"),i(),t(7,"p",104),o(8,"Most fields have been pre-filled. Please enter a new serial number and review all information before saving."),i()()()())}function Qr(a,n){if(a&1&&(t(0,"div",105),g(),t(1,"svg",106),p(2,"path",107),i(),o(3),i()),a&2){let e=c();s(3),k(" ",e.nameError," ")}}function Kr(a,n){a&1&&(t(0,"span",80),o(1,"Select parent asset"),i())}function Jr(a,n){if(a&1&&(t(0,"span",108),o(1),i()),a&2){let e=c();s(),ie(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function Zr(a,n){if(a&1){let e=E();t(0,"button",112),v("click",function(){let l=_(e).$implicit,d=c(2);return d.parent_id=l.id,h(d.showParentDropdown=!1)}),t(1,"div",28)(2,"div",114),g(),t(3,"svg",115),p(4,"path",54),i()(),x(),t(5,"div")(6,"div",116),o(7),i(),t(8,"div",117),o(9),i()()()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",r.parent_id===e.id),s(7),C(e.name),s(2),C(e.asset_id)}}function Xr(a,n){if(a&1){let e=E();t(0,"div",109)(1,"div",110)(2,"div",111),o(3,"Select parent asset"),i(),t(4,"button",112),v("click",function(){_(e);let l=c();return l.parent_id=null,h(l.showParentDropdown=!1)}),o(5," -- None -- "),i(),b(6,Zr,10,4,"button",113),i()()}if(a&2){let e=c();s(4),M("bg-blue-50",!e.parent_id),s(2),m("ngForOf",e.possibleParents)}}function ea(a,n){a&1&&(t(0,"span",80),o(1,"Select asset type"),i())}function ta(a,n){if(a&1){let e=E();t(0,"img",121),v("error",function(l){_(e);let d=c(2);return h(d.onAssetTypeIconError(l,d.selectedAssetType))}),i()}if(a&2){let e=c(2);m("src",e.selectedAssetType.icon,X)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function na(a,n){if(a&1&&(g(),t(0,"svg",122),p(1,"path",123),i()),a&2){let e=c(2);W("color",e.selectedAssetType.color)}}function ia(a,n){if(a&1&&(t(0,"div",28)(1,"div",118),b(2,ta,1,2,"img",119)(3,na,2,2,"svg",120),i(),t(4,"span",108),o(5),i()()),a&2){let e=c();s(),W("background-color",e.selectedAssetType.color+"20"),s(),m("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),s(),m("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),s(2),C(e.selectedAssetType.label)}}function ra(a,n){if(a&1){let e=E();t(0,"img",129),v("error",function(l){_(e);let d=c().$implicit,y=c(2);return h(y.onAssetTypeIconError(l,d))}),i()}if(a&2){let e=c().$implicit;m("src",e.icon,X)("alt",e.name||e.label)}}function aa(a,n){a&1&&(g(),t(0,"svg",19),p(1,"path",123),i())}function oa(a,n){if(a&1){let e=E();t(0,"button",112),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.selectAssetType(l))}),t(1,"div",28)(2,"div",125),b(3,ra,1,2,"img",126)(4,aa,2,0,"svg",127),i(),t(5,"div")(6,"div",116),o(7),i(),t(8,"div",128),o(9),i()()()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id)("text-blue-700",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id),s(3),m("ngIf",e.icon&&!e.iconError),s(),m("ngIf",!e.icon||e.iconError),s(3),C(e.label||e.name),s(2),C(e.description)}}function sa(a,n){if(a&1&&(t(0,"div",109)(1,"div",110)(2,"div",111),o(3,"Select asset type"),i(),b(4,oa,10,8,"button",124),i()()),a&2){let e=c();s(4),m("ngForOf",e.assetTypes)}}function la(a,n){if(a&1&&(t(0,"div",105),g(),t(1,"svg",106),p(2,"path",107),i(),o(3),i()),a&2){let e=c();s(3),k(" ",e.assetTypeError," ")}}function da(a,n){a&1&&(t(0,"span",80),o(1,"Select category"),i())}function ca(a,n){if(a&1&&(t(0,"span",108),o(1),i()),a&2){let e=c();s(),C(e.selectedCategory.name)}}function ma(a,n){if(a&1){let e=E();t(0,"img",129),v("error",function(l){_(e);let d=c().$implicit,y=c(2);return h(y.onCategoryIconError(l,d))}),i()}if(a&2){let e=c().$implicit;m("src",e.icon,X)("alt",e.name)}}function pa(a,n){a&1&&(g(),t(0,"svg",115),p(1,"path",54),i())}function ua(a,n){if(a&1&&(t(0,"div",128),o(1),i()),a&2){let e=c().$implicit;s(),C(e.description)}}function fa(a,n){if(a&1){let e=E();t(0,"button",112),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.selectCategory(l))}),t(1,"div",28)(2,"div",114),b(3,ma,1,2,"img",126)(4,pa,2,0,"svg",130),i(),t(5,"div")(6,"div",116),o(7),i(),b(8,ua,2,1,"div",82),i()()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("text-blue-700",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id),s(3),m("ngIf",e.icon),s(),m("ngIf",!e.icon||e.iconError),s(3),C(e.name),s(),m("ngIf",e.description)}}function ga(a,n){if(a&1&&(t(0,"div",109)(1,"div",110)(2,"div",111),o(3,"Select category"),i(),b(4,fa,9,8,"button",124),i()()),a&2){let e=c();s(4),m("ngForOf",e.categories)}}function _a(a,n){if(a&1&&(t(0,"div",105),g(),t(1,"svg",106),p(2,"path",107),i(),o(3),i()),a&2){let e=c();s(3),k(" ",e.categoryError," ")}}function ha(a,n){if(a&1&&(t(0,"div",105),g(),t(1,"svg",106),p(2,"path",107),i(),o(3),i()),a&2){let e=c();s(3),k(" ",e.serialNumberError," ")}}function va(a,n){a&1&&(t(0,"span",80),o(1,"Select location"),i())}function xa(a,n){if(a&1&&(t(0,"div",28)(1,"div",131),g(),t(2,"svg",132),p(3,"path",76)(4,"path",77),i()(),x(),t(5,"span",108),o(6),i()()),a&2){let e=c();s(6),C(e.selectedLocation.name)}}function ba(a,n){if(a&1&&(t(0,"div",128),o(1),i()),a&2){let e=c().$implicit;s(),C(e.type.name)}}function wa(a,n){if(a&1){let e=E();t(0,"button",112),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.selectLocation(l))}),t(1,"div",28)(2,"div",133),g(),t(3,"svg",75),p(4,"path",76)(5,"path",77),i()(),x(),t(6,"div")(7,"div",116),o(8),i(),b(9,ba,2,1,"div",82),i()()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id)("text-blue-700",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id),s(8),C(e.name),s(),m("ngIf",e.type)}}function ya(a,n){if(a&1&&(t(0,"div",109)(1,"div",110)(2,"div",111),o(3,"Select location"),i(),b(4,wa,10,6,"button",124),i()()),a&2){let e=c();s(4),m("ngForOf",e.locations)}}function Ca(a,n){a&1&&(t(0,"span",80),o(1,"Select department"),i())}function Sa(a,n){if(a&1&&(t(0,"div",28)(1,"div",134),g(),t(2,"svg",135),p(3,"path",136),i()(),x(),t(4,"span",108),o(5),i()()),a&2){let e=c();s(5),C(e.selectedDepartment.name)}}function Ea(a,n){if(a&1&&(t(0,"div",128),o(1),i()),a&2){let e=c().$implicit;s(),C(e.description)}}function ka(a,n){if(a&1&&(t(0,"div",139),o(1),i()),a&2){let e=c().$implicit;s(),k("Code: ",e.code,"")}}function Ma(a,n){if(a&1){let e=E();t(0,"button",112),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.selectDepartment(l))}),t(1,"div",28)(2,"div",137),g(),t(3,"svg",53),p(4,"path",136),i()(),x(),t(5,"div")(6,"div",116),o(7),i(),b(8,Ea,2,1,"div",82)(9,ka,2,1,"div",138),i()()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id)("text-blue-700",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id),s(7),C(e.name),s(),m("ngIf",e.description),s(),m("ngIf",e.code)}}function Aa(a,n){if(a&1&&(t(0,"div",109)(1,"div",110)(2,"div",111),o(3,"Select department"),i(),b(4,Ma,10,7,"button",124),i()()),a&2){let e=c();s(4),m("ngForOf",e.departments)}}function Ta(a,n){if(a&1&&(t(0,"div",28),p(1,"div",140),t(2,"span",108),o(3),i()()),a&2){let e=c();s(),W("background-color",e.selectedStatus.hexColor||"#6B7280"),s(2),C(e.selectedStatus.label)}}function Ia(a,n){if(a&1){let e=E();t(0,"button",112),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.selectStatus(l))}),t(1,"div",28)(2,"div"),p(3,"div",140),i(),t(4,"div")(5,"div",116),o(6),i(),t(7,"div",128),o(8),i()()()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value)("text-blue-700",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value),s(2),z("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),s(),W("background-color",e.hexColor||"#6B7280"),s(3),C(e.label),s(2),C(e.description)}}function Da(a,n){if(a&1&&(t(0,"div",141)(1,"div",110)(2,"div",111),o(3,"Select status"),i(),b(4,Ia,9,10,"button",124),i()()),a&2){let e=c();s(4),m("ngForOf",e.statusOptions)}}function Va(a,n){if(a&1){let e=E();t(0,"span"),o(1),t(2,"button",145),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.removeTag(l))}),g(),t(3,"svg",146),p(4,"path",147),i()()()}if(a&2){let e=n.$implicit;z("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),s(),k(" ",e.name," ")}}function Pa(a,n){if(a&1&&(t(0,"div",142)(1,"div",143),b(2,Va,5,3,"span",144),i()()),a&2){let e=c();s(2),m("ngForOf",e.selectedTags)}}function La(a,n){if(a&1&&(t(0,"span",128),o(1),i()),a&2){let e=c();s(),k(" ",e.selectedTags.length," selected ")}}function Fa(a,n){a&1&&(t(0,"div",152),g(),t(1,"svg",122),p(2,"path",153),i()())}function Oa(a,n){if(a&1){let e=E();t(0,"button",112),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.toggleTag(l))}),t(1,"div",34)(2,"div",28)(3,"div"),p(4,"div"),i(),t(5,"span",116),o(6),i()(),b(7,Fa,3,0,"div",151),i()()}if(a&2){let e=n.$implicit,r=c(2);M("bg-blue-50",r.isTagSelected(e)),s(3),z("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),s(),z("w-3 h-3 rounded-full bg-"+e.color+"-500"),s(2),C(e.name),s(),m("ngIf",r.isTagSelected(e))}}function Ha(a,n){if(a&1){let e=E();t(0,"div",109)(1,"div",110)(2,"div",148)(3,"div",67)(4,"input",149),Q("ngModelChange",function(l){_(e);let d=c();return q(d.newTagInput,l)||(d.newTagInput=l),h(l)}),v("keydown",function(l){_(e);let d=c();return h(d.onTagInputKeydown(l))})("click",function(l){return _(e),h(l.stopPropagation())}),i(),t(5,"div",150),o(6," Press Enter "),i()()(),t(7,"div",111),o(8,"Select tags"),i(),b(9,Oa,8,8,"button",113),i()()}if(a&2){let e=c();s(4),Y("ngModel",e.newTagInput),s(5),m("ngForOf",e.availableTags)}}function ja(a,n){if(a&1){let e=E();t(0,"button",173),v("click",function(){_(e);let l=c().index,d=c(2);return h(d.moveImageUp(l))}),g(),t(1,"svg",122),p(2,"path",174),i()()}}function Na(a,n){if(a&1){let e=E();t(0,"button",173),v("click",function(){_(e);let l=c().index,d=c(2);return h(d.moveImageDown(l))}),g(),t(1,"svg",122),p(2,"path",38),i()()}}function Ra(a,n){if(a&1){let e=E();t(0,"div",163)(1,"div",164)(2,"img",165),v("error",function(l){let d=_(e).index,y=c(2);return h(y.onImageError(l,d))})("load",function(l){let d=_(e).index,y=c(2);return h(y.onImageLoad(l,d))}),i(),t(3,"div",166)(4,"div",167),b(5,ja,3,0,"button",168)(6,Na,3,0,"button",168),i()(),t(7,"button",169),v("click",function(){let l=_(e).index,d=c(2);return h(d.removeImage(l))}),g(),t(8,"svg",122),p(9,"path",147),i()(),x(),t(10,"div",170),o(11),i()(),t(12,"div",171)(13,"p",172),o(14),i(),t(15,"p",117),o(16),i()()()}if(a&2){let e,r=n.$implicit,l=n.index,d=c(2);s(2),m("src",r,X)("alt","Asset Image "+(l+1)),s(3),m("ngIf",l>0),s(),m("ngIf",l<d.imagePreviewUrls.length-1),s(5),k(" ",l+1," "),s(3),C(d.images[l].name),s(2),k("",(((e=d.images[l].size)!==null&&e!==void 0?e:0)/1024/1024).toFixed(1)," MB")}}function Ba(a,n){if(a&1){let e=E();t(0,"div",154)(1,"div",155)(2,"h4",156),o(3),i(),t(4,"button",157),v("click",function(){_(e);let l=c();return h(l.removeAllImages())}),o(5," Remove All "),i()(),t(6,"div",158),b(7,Ra,17,7,"div",159),i(),t(8,"div",160)(9,"div",81),g(),t(10,"svg",161),p(11,"path",84),i(),x(),t(12,"p",162)(13,"strong"),o(14,"Gallery Tips:"),i(),o(15," Hover over images to reorder them. The first image will be the primary asset image. "),i()()()()}if(a&2){let e=c();s(3),k("Selected Images (",e.imagePreviewUrls.length,")"),s(4),m("ngForOf",e.imagePreviewUrls)}}function Ga(a,n){if(a&1&&(t(0,"div",175)(1,"div",81),g(),t(2,"svg",176),p(3,"path",107),i(),x(),t(4,"p",177),o(5),i()()()),a&2){let e=c();s(5),C(e.submitError)}}function za(a,n){if(a&1&&(t(0,"div",178)(1,"div",81),g(),t(2,"svg",58),p(3,"path",153),i(),x(),t(4,"p",179),o(5),i()()()),a&2){let e=c();s(5),C(e.submitSuccess)}}function Ua(a,n){a&1&&(t(0,"span",81),g(),t(1,"svg",180),p(2,"path",92),i(),x(),t(3,"span"),o(4,"Create Asset"),i()())}function $a(a,n){a&1&&(t(0,"span",81),g(),t(1,"svg",181),p(2,"circle",182)(3,"path",183),i(),x(),t(4,"span"),o(5,"Creating Asset..."),i()())}var an=class a{constructor(n,e,r){this.assetService=n;this.router=e;this.route=r}dateInputs;fileInput;flatpickrInstances=[];name="";description="";serial_number="";model="";manufacturer="";purchase_date="";purchase_price=null;depreciation=null;location_id=null;department_id=null;warranty="";insurance="";health_score=85;status=null;tags=[];images=[];imagePreviewUrls=[];meta={};isSubmitting=!1;isDragOver=!1;submitError="";submitSuccess="";submitFieldErrors={};locations=[];availableTags=[];departments=[];possibleParents=[];parent_id=null;showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";nameError="";assetTypeError="";categoryError="";serialNumberError="";onFileChange(n){if(n.target.files&&n.target.files.length){let e=Array.from(n.target.files);this.processFiles(e),n.target.value=""}}onDragOver(n){n.preventDefault(),n.stopPropagation(),this.isDragOver=!0}onDragLeave(n){n.preventDefault(),n.stopPropagation(),this.isDragOver=!1}onDrop(n){n.preventDefault(),n.stopPropagation(),this.isDragOver=!1;let e=n.dataTransfer?.files;if(e&&e.length>0){let r=Array.from(e).filter(l=>l.type.startsWith("image/"));r.length>0&&this.processFiles(r)}}processFiles(n){let r=["image/jpeg","image/png","image/gif","image/webp"],l=[],d=[];for(let y of n){if(!r.includes(y.type)){console.warn("Invalid file type:",y.name);continue}if(y.size>10*1024*1024){console.warn("File too large:",y.name);continue}if(this.images.some(J=>J.name===y.name&&J.size===y.size)){console.warn("Duplicate file skipped:",y.name);continue}if(this.images.length+l.length>=10){console.warn("Max image count exceeded:",y.name);break}l.push(y);let L=new FileReader;L.onload=J=>{J.target?.result&&this.imagePreviewUrls.push(J.target.result)},L.onerror=J=>{console.error("Preview failed for:",y.name,J)},L.readAsDataURL(y)}this.images=[...this.images,...l]}onSubmit(){if(this.clearErrors(),!this.validateForm())return;this.isSubmitting=!0,this.submitError="",this.submitSuccess="",this.submitFieldErrors={};let n=this.purchase_date,e=this.warranty;this.purchase_date&&(n=this.convertDateToBackendFormat(this.purchase_date)),this.warranty&&(e=this.convertDateToBackendFormat(this.warranty)),this.convertImagesToBase64().then(r=>{let l={name:this.name,description:this.description,category_id:this.category_id,type:this.selectedAssetType?.id||null,serial_number:this.serial_number,model:this.model,manufacturer:this.manufacturer,purchase_date:n,purchase_price:this.purchase_price,depreciation:this.depreciation,location_id:this.location_id,department_id:this.department_id,parent_id:this.parent_id,warranty:e,insurance:this.insurance,health_score:this.health_score,status:this.status,tags:this.selectedTags.map(d=>d.name),meta:this.meta,images:r};this.assetService.createAsset(l).subscribe({next:d=>{this.isSubmitting=!1,d.success?(this.submitSuccess="Asset created successfully!",setTimeout(()=>{this.router.navigate(["/assets/list"])},2e3)):(this.submitError=d.message||"Failed to create asset.",this.handleFieldErrors(d.errors||{}))},error:d=>{this.isSubmitting=!1,this.submitError=d.error?.message||"Failed to create asset.",this.handleFieldErrors(d.error?.errors||d.errors||{})}})}).catch(r=>{this.isSubmitting=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",r)})}healthScore=85;categories=[];category_id=null;assetTypes=[];assetType=null;assetTypesFromAPI=[];statusOptionsFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];ngOnInit(){this.route.queryParams.subscribe(n=>{n.duplicate&&n.sourceId&&this.loadAssetForDuplication(n.sourceId)}),this.assetService.getAssetCategories().subscribe(n=>{n.success&&n.data?.categories&&(this.categories=n.data.categories)}),this.assetService.getAssetTypes().subscribe(n=>{n.success&&n.data&&(this.assetTypesFromAPI=n.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})))}),this.assetService.getAssetStatuses().subscribe(n=>{n.success&&n.data&&(this.statusOptionsFromAPI=n.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,r)=>e.sort_order-r.sort_order),this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value))}),this.assetService.getLocations().subscribe(n=>{n.success&&n.data&&(this.locations=n.data.locations||n.data)}),this.assetService.getDepartments().subscribe(n=>{n.success&&n.data&&(this.departments=n.data)}),this.assetService.getAssets({per_page:1e3}).subscribe(n=>{n.success&&n.data?.assets&&(this.possibleParents=n.data.assets)}),this.loadAvailableTags()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}ngOnDestroy(){this.flatpickrInstances.forEach(n=>{n&&n.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(n=>{n&&n.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((n,e)=>{if(n?.nativeElement){let r=n.nativeElement,l=r.getAttribute("name"),d={dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,onChange:(P,L)=>{l==="purchase_date"?this.purchase_date=L:l==="warranty"&&(this.warranty=L)}};l==="purchase_date"?d.maxDate="today":l==="warranty"&&(d.minDate="today");let y=$e(r,d);this.flatpickrInstances.push(y)}})},50)}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetForDuplication(n){this.assetService.getAsset(n).subscribe({next:e=>{if(e.success){let r=e.data.asset||e.data;this.populateFormFromSource(r)}},error:e=>{console.error("Error loading source asset for duplication:",e)}})}populateFormFromSource(n){this.name=n.name?`${n.name} (Copy)`:"",this.description=n.description||"",this.model=n.model||"",this.manufacturer=n.manufacturer||"",this.purchase_date=n.purchase_date?this.convertBackendDateToDisplay(n.purchase_date):"",this.purchase_price=n.purchase_price||null,this.depreciation=n.depreciation||null,this.location_id=n.location_id||null,this.department_id=n.department_id||null,this.warranty=n.warranty?this.convertBackendDateToDisplay(n.warranty):"",this.insurance=n.insurance||"",this.health_score=n.health_score||85,this.status=n.status||"Active",setTimeout(()=>{n.type&&(this.selectedAssetType=this.assetTypes.find(e=>e.id==n.type||e.id===parseInt(n.type))||null,this.selectedAssetType&&(this.assetType=this.selectedAssetType.id)),n.category_id&&(this.selectedCategory=this.categories.find(e=>e.id===n.category_id)||null,this.category_id=n.category_id),n.location_id&&(this.selectedLocation=this.locations.find(e=>e.id===n.location_id)||null),n.department_id&&(this.selectedDepartment=this.departments.find(e=>e.id===n.department_id)||null),n.status&&(this.selectedStatus=this.statusOptions.find(e=>e.value===n.status||e.label===n.status||e.id===n.status)||null,this.selectedStatus&&(this.status=this.selectedStatus.value)),!this.selectedStatus&&this.statusOptions.length>0&&(this.selectedStatus=this.statusOptions[0],this.status=this.selectedStatus.value),n.tags&&Array.isArray(n.tags)&&(this.selectedTags=n.tags.map(e=>this.availableTags.find(r=>r.id===e.id)||e)),this.clearErrors()},500),this.serial_number="",n.images&&Array.isArray(n.images)&&n.images.length>0&&this.duplicateImages(n.images)}goBack(){this.router.navigate(["/assets/list"])}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(n){this.selectedAssetType=n,this.assetType=n.id,this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(n){this.selectedCategory=n,this.category_id=n.id,this.showCategoryDropdown=!1,this.clearErrors()}selectLocation(n){this.selectedLocation=n,this.location_id=n.id,this.showLocationDropdown=!1}selectStatus(n){this.selectedStatus=n,this.status=n.value,this.showStatusDropdown=!1}selectDepartment(n){this.selectedDepartment=n,this.department_id=n.id,this.showDepartmentDropdown=!1}toggleTag(n){let e=this.selectedTags.findIndex(r=>r.id===n.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(n)}isTagSelected(n){return this.selectedTags.some(e=>e.id===n.id)}onTagInputKeydown(n){n.key==="Enter"&&(n.preventDefault(),this.createNewTag())}createNewTag(){let n=this.newTagInput.trim();if(n&&!this.selectedTags.some(e=>e.name.toLowerCase()===n.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],r=e[Math.floor(Math.random()*e.length)],l={id:Date.now(),name:n,color:r,isNew:!0};this.selectedTags.push(l),this.newTagInput=""}}removeTag(n){let e=this.selectedTags.findIndex(r=>r.id===n.id);e>-1&&this.selectedTags.splice(e,1)}onDocumentClick(n){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}validateForm(){let n=!0;if(!this.name||this.name.trim().length===0?(this.nameError="Asset name is required",n=!1):this.name.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",n=!1),this.description&&this.description.length>500&&(this.submitError="Description cannot exceed 500 characters",n=!1),this.serial_number&&this.serial_number.trim().length===0?(this.serialNumberError="Serial number cannot be empty if provided",n=!1):this.serial_number&&this.serial_number.length>255&&(this.serialNumberError="Serial number cannot exceed 255 characters",n=!1),this.model&&this.model.length>255&&(this.submitError="Model cannot exceed 255 characters",n=!1),this.manufacturer&&this.manufacturer.length>255&&(this.submitError="Manufacturer cannot exceed 255 characters",n=!1),this.warranty&&this.warranty.length>255&&(this.submitError="Warranty cannot exceed 255 characters",n=!1),this.insurance&&this.insurance.length>255&&(this.submitError="Insurance cannot exceed 255 characters",n=!1),this.purchase_price!==null&&this.purchase_price<=0&&(this.submitError="Purchase price must be at least 0.01",n=!1),this.depreciation!==null&&this.depreciation<0&&(this.submitError="Depreciation cannot be negative",n=!1),this.purchase_date){let e=new Date;new Date(this.purchase_date)>e&&(this.submitError="Purchase date cannot be in the future",n=!1)}return(this.health_score<0||this.health_score>100)&&(this.submitError="Health score must be between 0 and 100",n=!1),n}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}handleFieldErrors(n){n.name&&(this.nameError=n.name[0]),n.type&&(this.assetTypeError=n.type[0]),n.category_id&&(this.categoryError=n.category_id[0]),n.serial_number&&(this.serialNumberError=n.serial_number[0])}isFormValid(){return!!(this.name&&this.name.trim().length>0&&this.name.trim().length<=100)}removeImage(n){this.images.splice(n,1),this.imagePreviewUrls.splice(n,1)}removeAllImages(){this.images=[],this.imagePreviewUrls=[]}moveImage(n,e){if(e>=0&&e<this.images.length){let r=this.images.splice(n,1)[0];this.images.splice(e,0,r);let l=this.imagePreviewUrls.splice(n,1)[0];this.imagePreviewUrls.splice(e,0,l)}}moveImageUp(n){n>0&&this.moveImage(n,n-1)}moveImageDown(n){n<this.images.length-1&&this.moveImage(n,n+1)}getTodayDate(){return new Date().toISOString().split("T")[0]}convertDateToBackendFormat(n){if(!n)return"";try{let e=new Date(n);if(isNaN(e.getTime()))return n;let r=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getDate()).padStart(2,"0");return`${r}-${l}-${d}`}catch(e){return console.error("Date conversion error:",e),n}}convertBackendDateToDisplay(n){if(!n)return"";try{let e=new Date(n);if(isNaN(e.getTime()))return n;let r={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",r).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),n}}getIconFromPath(n){return n&&(n.split("/").pop()||"").replace(".svg","")||"cube"}getColorForType(n){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[n]||"#6b7280"}hexToTailwindColor(n){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[n.toUpperCase()]||"gray"}onImageError(n,e){console.error("Image failed to load at index:",e),console.error("Image src:",n.target.src),console.error("Image file:",this.images[e]),n.target.style.display="none"}onImageLoad(n,e){console.log("Image loaded successfully at index:",e),console.log("Image dimensions:",n.target.naturalWidth,"x",n.target.naturalHeight)}convertImagesToBase64(){return Promise.all(this.images.map(n=>new Promise((e,r)=>{let l=new FileReader;l.onload=()=>{l.result?e(l.result):r(new Error("Failed to read file"))},l.onerror=()=>r(l.error),l.readAsDataURL(n)})))}onCategoryIconError(n,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,n.target.style.display="none"}onAssetTypeIconError(n,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,n.target.style.display="none"}triggerFileInput(){this.fileInput.nativeElement.click()}duplicateImages(n){n.forEach((e,r)=>{if(e.image_url){this.imagePreviewUrls.push(e.image_url);let l=`existing-image-${r+1}.jpg`,d=new File([""],l,{type:"image/jpeg"});this.images.push(d)}})}getSelectedParent(){return this.possibleParents.find(n=>n.id===this.parent_id)}static \u0275fac=function(e){return new(e||a)(K(Ce),K(Te),K(rt))};static \u0275cmp=ae({type:a,selectors:[["app-asset-create"]],viewQuery:function(e,r){if(e&1&&(ke(Wr,5),ke(Yr,5)),e&2){let l;Me(l=Ae())&&(r.fileInput=l.first),Me(l=Ae())&&(r.dateInputs=l)}},hostBindings:function(e,r){e&1&&v("click",function(d){return r.onDocumentClick(d)},!1,it)},decls:280,vars:115,consts:[["assetForm","ngForm"],["nameInput","ngModel"],["dateInput",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-create-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",4,"ngIf"],[3,"ngSubmit"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","name","name","required","",1,"input",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","space-x-3"],["type","text","value","AST-012","readonly","",1,"input","flex-1"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","name","description","maxlength","500",1,"input","resize-none",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","name","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input",3,"ngModelChange","ngModel"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","placeholder","e.g., Dell, HP, Toyota","name","manufacturer","maxlength","255",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., PowerEdge R730","name","model","maxlength","255",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., SN123456789","name","serial_number","maxlength","255",1,"input",3,"ngModelChange","ngModel"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","name","purchase_price","step","0.01","min","0.01",1,"input",2,"padding-left","24px",3,"ngModelChange","ngModel"],["type","text","name","purchase_date","placeholder","Select purchase date","readonly","",1,"input",3,"ngModelChange","ngModel"],["type","number","name","depreciation","placeholder","e.g., 5","min","0","max","50",1,"input",3,"ngModelChange","ngModel"],["type","text","name","warranty","placeholder","Select warranty expiration date","readonly","",1,"input",3,"ngModelChange","ngModel"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-blue-800","font-medium"],[1,"text-blue-700","text-sm"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-sm","text-gray-500"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","name","newTagInput","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mt-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","w-6","h-6","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){if(e&1){let l=E();t(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"button",8),v("click",function(){return _(l),h(r.goBack())}),g(),t(5,"svg",9),p(6,"path",10),i(),x(),t(7,"span",11),o(8,"Back to Assets"),i()()(),t(9,"h1",12),o(10),i(),t(11,"p",13),o(12),i(),b(13,qr,9,0,"div",14),i(),t(14,"form",15,0),v("ngSubmit",function(){return _(l),h(r.onSubmit())}),t(16,"div",16)(17,"div",17)(18,"div",18),g(),t(19,"svg",19),p(20,"path",20),i()(),x(),t(21,"h2",21),o(22,"Basic Information"),i()(),t(23,"div",22)(24,"div")(25,"label",23),o(26," Asset Name "),t(27,"span",24),o(28,"*"),i()(),t(29,"input",25,1),Q("ngModelChange",function(y){return _(l),q(r.name,y)||(r.name=y),h(y)}),i(),b(31,Qr,4,1,"div",26),t(32,"div",27),o(33,"Maximum 100 characters"),i()(),t(34,"div")(35,"label",23),o(36,"Asset ID"),i(),t(37,"div",28),p(38,"input",29),t(39,"span",30),o(40," auto-generated "),i()(),t(41,"p",27),o(42,"Unique identifier automatically assigned"),i()()(),t(43,"div",31)(44,"label",23),o(45,"Parent Asset"),i(),t(46,"div",32),v("click",function(y){return _(l),h(y.stopPropagation())}),t(47,"button",33),v("click",function(){return _(l),h(r.showParentDropdown=!r.showParentDropdown)}),t(48,"div",34),b(49,Kr,2,0,"span",35)(50,Jr,2,2,"span",36),g(),t(51,"svg",37),p(52,"path",38),i()()(),b(53,Xr,7,3,"div",39),i(),x(),t(54,"div",27),o(55,"Optional: Select a parent asset if this asset is a child of another."),i()(),t(56,"div",31)(57,"label",23),o(58,"Description"),i(),t(59,"textarea",40),Q("ngModelChange",function(y){return _(l),q(r.description,y)||(r.description=y),h(y)}),i(),t(60,"div",27),o(61,"Maximum 500 characters"),i()(),t(62,"div")(63,"label",41),o(64,"Health Score"),i(),t(65,"div",42)(66,"div",43)(67,"span",44),o(68,"Current Score"),i(),t(69,"span",45),o(70),i()(),t(71,"div",46),p(72,"div",47)(73,"div",48),t(74,"input",49),Q("ngModelChange",function(y){return _(l),q(r.healthScore,y)||(r.healthScore=y),h(y)}),i(),p(75,"div",50),i(),t(76,"div",51)(77,"span"),o(78,"Poor (0%)"),i(),t(79,"span"),o(80,"Fair (25%)"),i(),t(81,"span"),o(82,"Good (50%)"),i(),t(83,"span"),o(84,"Very Good (75%)"),i(),t(85,"span"),o(86,"Excellent (100%)"),i()()()()(),t(87,"div",16)(88,"div",17)(89,"div",52),g(),t(90,"svg",53),p(91,"path",54),i()(),x(),t(92,"h2",21),o(93,"Asset Classification"),i()(),t(94,"div",55)(95,"div")(96,"label",23),o(97," Asset Type "),t(98,"span",24),o(99,"*"),i()(),t(100,"div",32),v("click",function(y){return _(l),h(y.stopPropagation())}),t(101,"button",33),v("click",function(){return _(l),h(r.toggleAssetTypeDropdown())}),t(102,"div",34),b(103,ea,2,0,"span",35)(104,ia,6,5,"div",56),g(),t(105,"svg",37),p(106,"path",38),i()()(),b(107,sa,5,1,"div",39),i(),b(108,la,4,1,"div",26),i(),x(),t(109,"div")(110,"label",23),o(111," Category "),t(112,"span",24),o(113,"*"),i()(),t(114,"div",32),v("click",function(y){return _(l),h(y.stopPropagation())}),t(115,"button",33),v("click",function(){return _(l),h(r.toggleCategoryDropdown())}),t(116,"div",34),b(117,da,2,0,"span",35)(118,ca,2,1,"span",36),g(),t(119,"svg",37),p(120,"path",38),i()()(),b(121,ga,5,1,"div",39),i(),b(122,_a,4,1,"div",26),i()()(),x(),t(123,"div",16)(124,"div",17)(125,"div",57),g(),t(126,"svg",58),p(127,"path",59),i()(),x(),t(128,"h2",21),o(129,"Technical Details"),i()(),t(130,"div",60)(131,"div")(132,"label",23),o(133,"Manufacturer"),i(),t(134,"input",61),Q("ngModelChange",function(y){return _(l),q(r.manufacturer,y)||(r.manufacturer=y),h(y)}),i(),t(135,"div",27),o(136,"Maximum 255 characters"),i()(),t(137,"div")(138,"label",23),o(139,"Model"),i(),t(140,"input",62),Q("ngModelChange",function(y){return _(l),q(r.model,y)||(r.model=y),h(y)}),i(),t(141,"div",27),o(142,"Maximum 255 characters"),i()(),t(143,"div")(144,"label",23),o(145," Serial Number (Optional) "),i(),t(146,"input",63),Q("ngModelChange",function(y){return _(l),q(r.serial_number,y)||(r.serial_number=y),h(y)}),i(),b(147,ha,4,1,"div",26),t(148,"div",27),o(149,"Optional, max 255 chars, must be unique within your company if provided"),i()()()(),t(150,"div",16)(151,"div",17)(152,"div",64),g(),t(153,"svg",65),p(154,"path",66),i()(),x(),t(155,"h2",21),o(156,"Financial Information"),i()(),t(157,"div",22)(158,"div")(159,"label",23),o(160,"Purchase Value (USD)"),i(),t(161,"div",67)(162,"div",68)(163,"span",69),o(164,"$ "),i()(),t(165,"input",70),Q("ngModelChange",function(y){return _(l),q(r.purchase_price,y)||(r.purchase_price=y),h(y)}),i()(),t(166,"div",27),o(167,"Must be a positive number"),i()(),t(168,"div")(169,"label",23),o(170,"Purchase Date"),i(),t(171,"input",71,2),Q("ngModelChange",function(y){return _(l),q(r.purchase_date,y)||(r.purchase_date=y),h(y)}),i(),t(173,"div",27),o(174,"Cannot be in the future"),i()()(),t(175,"div",22)(176,"div")(177,"label",23),o(178,"Useful Life (Years)"),i(),t(179,"input",72),Q("ngModelChange",function(y){return _(l),q(r.depreciation,y)||(r.depreciation=y),h(y)}),i(),t(180,"div",27),o(181,"Optional, useful life in years"),i()(),t(182,"div")(183,"label",23),o(184,"Warranty Expiration"),i(),t(185,"input",73,2),Q("ngModelChange",function(y){return _(l),q(r.warranty,y)||(r.warranty=y),h(y)}),i(),t(187,"div",27),o(188,"Optional warranty expiration date"),i()()()(),t(189,"div",16)(190,"div",17)(191,"div",74),g(),t(192,"svg",75),p(193,"path",76)(194,"path",77),i()(),x(),t(195,"h2",21),o(196,"Location & Assignment"),i()(),t(197,"div",55)(198,"div")(199,"label",23),o(200,"Location"),i(),t(201,"div",32),v("click",function(y){return _(l),h(y.stopPropagation())}),t(202,"button",33),v("click",function(){return _(l),h(r.toggleLocationDropdown())}),t(203,"div",34),b(204,va,2,0,"span",35)(205,xa,7,1,"div",56),g(),t(206,"svg",37),p(207,"path",38),i()()(),b(208,ya,5,1,"div",39),i()(),x(),t(209,"div")(210,"label",23),o(211,"Department ID"),i(),t(212,"div",32),v("click",function(y){return _(l),h(y.stopPropagation())}),t(213,"button",33),v("click",function(){return _(l),h(r.toggleDepartmentDropdown())}),t(214,"div",34),b(215,Ca,2,0,"span",35)(216,Sa,6,1,"div",56),g(),t(217,"svg",37),p(218,"path",38),i()()(),b(219,Aa,5,1,"div",39),i(),x(),t(220,"div",27),o(221,"Optional department assignment"),i()(),t(222,"div")(223,"label",23),o(224,"Status"),i(),t(225,"div",32),v("click",function(y){return _(l),h(y.stopPropagation())}),t(226,"button",33),v("click",function(){return _(l),h(r.toggleStatusDropdown())}),t(227,"div",34),b(228,Ta,4,3,"div",56),g(),t(229,"svg",37),p(230,"path",38),i()()(),b(231,Da,5,1,"div",78),i(),x(),t(232,"div",27),o(233,"Current operational status of the asset"),i()(),t(234,"div")(235,"label",23),o(236,"Tags"),i(),b(237,Pa,3,1,"div",79),t(238,"div",32),v("click",function(y){return _(l),h(y.stopPropagation())}),t(239,"button",33),v("click",function(){return _(l),h(r.toggleTagsDropdown())}),t(240,"div",34)(241,"span",80),o(242),i(),t(243,"div",81),b(244,La,2,1,"span",82),g(),t(245,"svg",37),p(246,"path",38),i()()()(),b(247,Ha,10,2,"div",39),i(),x(),t(248,"div",27),g(),t(249,"svg",83),p(250,"path",84),i(),o(251," Select existing tags or type to create new ones. Press Enter to add custom tags. "),i()()()(),x(),t(252,"div",16)(253,"div",17)(254,"div",85),g(),t(255,"svg",86),p(256,"path",87),i()(),x(),t(257,"h2",21),o(258,"Asset Image"),i()(),t(259,"div")(260,"label",23),o(261,"Upload Image"),i(),t(262,"div",88),v("click",function(){return _(l),h(r.triggerFileInput())})("dragover",function(y){return _(l),h(r.onDragOver(y))})("dragleave",function(y){return _(l),h(r.onDragLeave(y))})("drop",function(y){return _(l),h(r.onDrop(y))}),t(263,"div",89)(264,"div",90),g(),t(265,"svg",91),p(266,"path",92),i()(),x(),t(267,"p",93),o(268),i(),t(269,"input",94,3),v("change",function(y){return _(l),h(r.onFileChange(y))}),i()()(),b(271,Ba,16,2,"div",95),i()(),b(272,Ga,6,1,"div",96)(273,za,6,1,"div",97),t(274,"div",98)(275,"button",99),v("click",function(){return _(l),h(r.goBack())}),o(276," Cancel "),i(),t(277,"button",100),b(278,Ua,5,0,"span",101)(279,$a,6,0,"span",101),i()()()()()}e&2&&(s(10),k(" ",r.route.snapshot.queryParams.duplicate?"Duplicate Asset":"Create New Asset"," "),s(2),k(" ",r.route.snapshot.queryParams.duplicate?"Creating a copy of an existing asset. Please review and update the information below.":"Add a new asset to your inventory with detailed information and specifications"," "),s(),m("ngIf",r.route.snapshot.queryParams.duplicate),s(16),M("border-red-300",r.nameError),Y("ngModel",r.name),s(2),m("ngIf",r.nameError),s(16),M("border-blue-500",r.showParentDropdown),s(2),m("ngIf",!r.parent_id),s(),m("ngIf",r.parent_id&&r.getSelectedParent()),s(),M("rotate-180",r.showParentDropdown),s(2),m("ngIf",r.showParentDropdown),s(6),Y("ngModel",r.description),s(10),M("text-red-600",r.healthScore<50)("text-green-600",r.healthScore>=50),s(),k("",r.healthScore,"%"),s(3),W("width",r.healthScore,"%"),M("bg-red-500",r.healthScore<50)("bg-green-500",r.healthScore>=50),s(),Y("ngModel",r.healthScore),s(),W("left",r.healthScore,"%"),M("bg-red-500",r.healthScore<50)("bg-green-500",r.healthScore>=50),s(26),M("border-red-300",r.assetTypeError)("border-blue-500",r.showAssetTypeDropdown),s(2),m("ngIf",!r.selectedAssetType),s(),m("ngIf",r.selectedAssetType),s(),M("rotate-180",r.showAssetTypeDropdown),s(2),m("ngIf",r.showAssetTypeDropdown),s(),m("ngIf",r.assetTypeError),s(7),M("border-red-300",r.categoryError)("border-blue-500",r.showCategoryDropdown),s(2),m("ngIf",!r.selectedCategory),s(),m("ngIf",r.selectedCategory),s(),M("rotate-180",r.showCategoryDropdown),s(2),m("ngIf",r.showCategoryDropdown),s(),m("ngIf",r.categoryError),s(12),Y("ngModel",r.manufacturer),s(6),Y("ngModel",r.model),s(6),M("border-red-300",r.serialNumberError),Y("ngModel",r.serial_number),s(),m("ngIf",r.serialNumberError),s(18),Y("ngModel",r.purchase_price),s(6),Y("ngModel",r.purchase_date),s(8),Y("ngModel",r.depreciation),s(6),Y("ngModel",r.warranty),s(17),M("border-blue-500",r.showLocationDropdown),s(2),m("ngIf",!r.selectedLocation),s(),m("ngIf",r.selectedLocation),s(),M("rotate-180",r.showLocationDropdown),s(2),m("ngIf",r.showLocationDropdown),s(5),M("border-blue-500",r.showDepartmentDropdown),s(2),m("ngIf",!r.selectedDepartment),s(),m("ngIf",r.selectedDepartment),s(),M("rotate-180",r.showDepartmentDropdown),s(2),m("ngIf",r.showDepartmentDropdown),s(7),M("border-blue-500",r.showStatusDropdown),s(2),m("ngIf",r.selectedStatus),s(),M("rotate-180",r.showStatusDropdown),s(2),m("ngIf",r.showStatusDropdown),s(6),m("ngIf",r.selectedTags.length>0),s(2),M("border-blue-500",r.showTagsDropdown),s(3),k(" ",r.selectedTags.length===0?"Select tags":"Add more tags"," "),s(2),m("ngIf",r.selectedTags.length>0),s(),M("rotate-180",r.showTagsDropdown),s(2),m("ngIf",r.showTagsDropdown),s(15),M("border-gray-300",!r.isDragOver)("border-blue-500",r.isDragOver)("bg-blue-50",r.isDragOver)("hover:border-blue-400",!r.isDragOver),s(3),M("text-gray-400",!r.isDragOver)("text-blue-500",r.isDragOver),s(2),M("text-gray-500",!r.isDragOver)("text-blue-600",r.isDragOver),s(),k(" ",r.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),s(3),m("ngIf",r.imagePreviewUrls.length>0),s(),m("ngIf",r.submitError),s(),m("ngIf",r.submitSuccess),s(2),m("disabled",r.isSubmitting),s(2),m("disabled",r.isSubmitting||!r.isFormValid()),s(),m("ngIf",!r.isSubmitting),s(),m("ngIf",r.isSubmitting))},dependencies:[ce,Ge,le,Ot,Ht,de,Be,Gt,zt,Bt,Rt,_e,Ft,oe,we],styles:[".asset-create-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 768px){.asset-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.transition-transform[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb;font-family:inherit}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6;font-weight:600}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}[_nghost-%COMP%]     .flatpickr-input{cursor:pointer}[_nghost-%COMP%]     .flatpickr-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.slider-input[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;outline:none;z-index:20}.slider-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;position:relative;z-index:30}.slider-input[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;box-shadow:none}.slider-input[_ngcontent-%COMP%]:focus{outline:none}"]})};var Wa=["dateInput"];function Ya(a,n){a&1&&(t(0,"span",42),o(1,"No location assigned"),i())}function qa(a,n){if(a&1&&(t(0,"span",43),o(1),i()),a&2){let e=c(2);s(),k(" ",e.getLocationNameById(e.transferData.new_location_id)," ")}}function Qa(a,n){if(a&1){let e=E();t(0,"button",48),v("click",function(){let l=_(e).$implicit,d=c(3);return d.transferData.new_location_id=l.id,h(d.showLocationDropdown=!1)}),o(1),i()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",r.transferData.new_location_id===e.id),m("disabled",e.id===(r.asset==null?null:r.asset.location_id)),s(),k(" ",e.name," ")}}function Ka(a,n){if(a&1){let e=E();t(0,"div",44)(1,"div",45)(2,"button",46),v("click",function(){_(e);let l=c(2);return l.transferData.new_location_id=null,h(l.showLocationDropdown=!1)}),o(3," No location assigned "),i(),b(4,Qa,2,4,"button",47),i()()}if(a&2){let e=c(2);s(2),M("bg-blue-50",!e.transferData.new_location_id),s(2),m("ngForOf",e.locations)}}function Ja(a,n){a&1&&(t(0,"span",42),o(1,"Select new department (optional)"),i())}function Za(a,n){if(a&1&&(t(0,"span",43),o(1),i()),a&2){let e=c(2);s(),k(" ",e.getDepartmentNameById(e.transferData.new_department_id)," ")}}function Xa(a,n){if(a&1){let e=E();t(0,"button",46),v("click",function(){let l=_(e).$implicit,d=c(3);return d.transferData.new_department_id=l.id,h(d.showDepartmentDropdown=!1)}),o(1),i()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",r.transferData.new_department_id===e.id),s(),k(" ",e.name," ")}}function eo(a,n){if(a&1){let e=E();t(0,"div",44)(1,"div",45)(2,"button",46),v("click",function(){_(e);let l=c(2);return l.transferData.new_department_id=null,h(l.showDepartmentDropdown=!1)}),o(3," Select new department (optional) "),i(),b(4,Xa,2,3,"button",49),i()()}if(a&2){let e=c(2);s(2),M("bg-blue-50",!e.transferData.new_department_id),s(2),m("ngForOf",e.departments)}}function to(a,n){a&1&&(t(0,"span",42),o(1,"Select reason"),i())}function no(a,n){if(a&1&&(t(0,"span",43),o(1),i()),a&2){let e=c(2);s(),k(" ",e.transferData.transfer_reason," ")}}function io(a,n){if(a&1){let e=E();t(0,"button",46),v("click",function(){let l=_(e).$implicit,d=c(3);return d.transferData.transfer_reason=l,h(d.showReasonDropdown=!1)}),o(1),i()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",r.transferData.transfer_reason===e),s(),k(" ",e," ")}}function ro(a,n){if(a&1){let e=E();t(0,"div",44)(1,"div",45)(2,"button",46),v("click",function(){_(e);let l=c(2);return l.transferData.transfer_reason="",h(l.showReasonDropdown=!1)}),o(3," Select reason "),i(),b(4,io,2,3,"button",49),i()()}if(a&2){let e=c(2);s(2),M("bg-blue-50",!e.transferData.transfer_reason),s(2),m("ngForOf",e.transferReasons)}}function ao(a,n){if(a&1&&(t(0,"div",50)(1,"div",51)(2,"div",52),g(),t(3,"svg",53),p(4,"path",54),i()(),x(),t(5,"div",55)(6,"p",56),o(7),i()()()()),a&2){let e=c(2);s(7),C(e.error)}}function oo(a,n){a&1&&(t(0,"span"),o(1,"Create Transfer"),i())}function so(a,n){a&1&&(t(0,"span",57),g(),t(1,"svg",58),p(2,"circle",59)(3,"path",60),i(),o(4," Creating Transfer... "),i())}function lo(a,n){if(a&1){let e=E();t(0,"div",2),v("click",function(l){_(e);let d=c();return h(d.onModalClick(l))}),t(1,"div",3),p(2,"div",4),t(3,"div",5),v("click",function(l){return _(e),h(l.stopPropagation())}),t(4,"div",6)(5,"h3",7),o(6),i(),t(7,"button",8),v("click",function(){_(e);let l=c();return h(l.onCancel())}),g(),t(8,"svg",9),p(9,"path",10),i()()(),x(),t(10,"div",11)(11,"div")(12,"p",12),o(13,"Current Location"),i(),t(14,"p",13),o(15),i()(),t(16,"div")(17,"p",12),o(18,"Current Department"),i(),t(19,"p",13),o(20),i()()(),t(21,"div",14)(22,"div",15),g(),t(23,"svg",16),p(24,"path",17),i()()(),x(),t(25,"form",18),v("ngSubmit",function(){_(e);let l=c();return h(l.onTransfer())}),t(26,"div",19),v("click",function(l){return _(e),h(l.stopPropagation())}),t(27,"label",20),o(28,"New Location"),i(),t(29,"button",21),v("click",function(){_(e);let l=c();return h(l.showLocationDropdown=!l.showLocationDropdown)}),t(30,"div",22),b(31,Ya,2,0,"span",23)(32,qa,2,1,"span",24),g(),t(33,"svg",25),p(34,"path",26),i()()(),b(35,Ka,5,3,"div",27),i(),x(),t(36,"div",19),v("click",function(l){return _(e),h(l.stopPropagation())}),t(37,"label",20),o(38,"New Department"),i(),t(39,"button",21),v("click",function(){_(e);let l=c();return h(l.showDepartmentDropdown=!l.showDepartmentDropdown)}),t(40,"div",22),b(41,Ja,2,0,"span",23)(42,Za,2,1,"span",24),g(),t(43,"svg",25),p(44,"path",26),i()()(),b(45,eo,5,3,"div",27),i(),x(),t(46,"div",19),v("click",function(l){return _(e),h(l.stopPropagation())}),t(47,"label",20),o(48,"Transfer Reason *"),i(),t(49,"button",21),v("click",function(){_(e);let l=c();return h(l.showReasonDropdown=!l.showReasonDropdown)}),t(50,"div",22),b(51,to,2,0,"span",23)(52,no,2,1,"span",24),g(),t(53,"svg",25),p(54,"path",26),i()()(),b(55,ro,5,3,"div",27),i(),x(),t(56,"div")(57,"label",28),o(58," Transfer Date * "),i(),t(59,"div",29)(60,"input",30,0),Q("ngModelChange",function(l){_(e);let d=c();return q(d.transferData.transfer_date,l)||(d.transferData.transfer_date=l),h(l)}),i(),t(62,"div",31),g(),t(63,"svg",32),p(64,"path",33),i()()()(),x(),t(65,"div")(66,"label",34),o(67," Additional Notes "),i(),t(68,"textarea",35),Q("ngModelChange",function(l){_(e);let d=c();return q(d.transferData.notes,l)||(d.transferData.notes=l),h(l)}),i()(),b(69,ao,8,1,"div",36),t(70,"div",37)(71,"button",38),v("click",function(){_(e);let l=c();return h(l.onCancel())}),o(72," Cancel "),i(),t(73,"button",39),b(74,oo,2,0,"span",40)(75,so,5,0,"span",41),i()()()()()()}if(a&2){let e=c();m("@backdropAnimation",void 0),s(3),m("@modalAnimation",void 0),s(3),k(" Transfer Asset: ",(e.asset==null?null:e.asset.name)||"Unknown Asset"," "),s(),m("disabled",e.loading),s(8),C(e.getCurrentLocationName()),s(5),C(e.getCurrentDepartmentName()),s(9),M("border-blue-500",e.showLocationDropdown),s(2),m("ngIf",!e.transferData.new_location_id),s(),m("ngIf",e.transferData.new_location_id),s(),M("rotate-180",e.showLocationDropdown),s(2),m("ngIf",e.showLocationDropdown),s(4),M("border-blue-500",e.showDepartmentDropdown),s(2),m("ngIf",!e.transferData.new_department_id),s(),m("ngIf",e.transferData.new_department_id),s(),M("rotate-180",e.showDepartmentDropdown),s(2),m("ngIf",e.showDepartmentDropdown),s(4),M("border-blue-500",e.showReasonDropdown),s(2),m("ngIf",!e.transferData.transfer_reason),s(),m("ngIf",e.transferData.transfer_reason),s(),M("rotate-180",e.showReasonDropdown),s(2),m("ngIf",e.showReasonDropdown),s(5),Y("ngModel",e.transferData.transfer_date),m("disabled",e.loading),s(8),Y("ngModel",e.transferData.notes),m("disabled",e.loading),s(),m("ngIf",e.error),s(2),m("disabled",e.loading),s(2),m("disabled",e.loading),s(),m("ngIf",!e.loading),s(),m("ngIf",e.loading)}}var dt=class a{constructor(n){this.assetService=n}isOpen=!1;asset=null;closeModal=new ge;transferComplete=new ge;dateInput;flatpickrInstance;showLocationDropdown=!1;showDepartmentDropdown=!1;showReasonDropdown=!1;loading=!1;error="";transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""};locations=[];departments=[];users=[];transferReasons=["Relocation","Maintenance","Replacement","Department Transfer","User Assignment","Storage","Disposal","Other"];ngOnInit(){console.log("TransferAssetModalComponent initialized"),this.loadDropdownData()}ngOnChanges(){console.log("TransferAssetModalComponent changes:",{isOpen:this.isOpen,asset:this.asset}),this.isOpen&&setTimeout(()=>{this.initializeFlatpickr()},200)}ngAfterViewInit(){}ngOnDestroy(){this.destroyFlatpickr()}destroyFlatpickr(){if(this.flatpickrInstance)try{this.flatpickrInstance.destroy(),this.flatpickrInstance=null}catch(n){console.error("Error destroying flatpickr:",n)}}initializeFlatpickr(){try{this.destroyFlatpickr(),this.dateInput&&this.dateInput.nativeElement?(console.log("Initializing flatpickr on element:",this.dateInput.nativeElement),this.flatpickrInstance=$e(this.dateInput.nativeElement,{dateFormat:"Y-m-d",defaultDate:new Date,allowInput:!1,clickOpens:!0,minDate:new Date,locale:{firstDayOfWeek:1},onChange:(n,e)=>{console.log("Date selected:",e),this.transferData.transfer_date=e},onOpen:()=>{console.log("Flatpickr opened")},onClose:()=>{console.log("Flatpickr closed")}}),console.log("Flatpickr initialized successfully")):console.warn("Date input element not found")}catch(n){console.error("Error initializing flatpickr:",n)}}loadDropdownData(){console.log("Loading dropdown data..."),console.log("Calling locations API with pagination..."),this.assetService.getLocations(1,1e3,"created","desc").subscribe({next:n=>{console.log("Locations API response:",n),console.log("Response type:",typeof n),console.log("Response keys:",Object.keys(n)),n&&n.data&&n.data.locations?(this.locations=n.data.locations,console.log("Using response.data.locations (paginated):",this.locations),console.log("Response pagination:",n.data.pagination)):n&&n.data&&Array.isArray(n.data)?(this.locations=n.data,console.log("Using response.data as array:",this.locations)):Array.isArray(n)?(this.locations=n,console.log("Using response as array:",this.locations)):(this.locations=[],console.warn("Unexpected response format:",n),console.log("Response structure:",n)),console.log("Final locations array:",this.locations),console.log("Locations count:",this.locations.length),this.locations.length===0&&console.warn("No locations found in response")},error:n=>{console.error("Error loading locations:",n),console.error("Error details:",{status:n.status,statusText:n.statusText,message:n.message,url:n.url}),this.locations=[]}}),console.log("Calling departments API with pagination..."),this.assetService.getDepartments(1,1e3,"created","desc").subscribe({next:n=>{console.log("Departments API response:",n),n&&n.data&&n.data.departments?(this.departments=n.data.departments,console.log("Using response.data.departments (paginated):",this.departments),console.log("Response pagination:",n.data.pagination)):n&&n.data&&Array.isArray(n.data)?(this.departments=n.data,console.log("Using response.data as array:",this.departments)):Array.isArray(n)?this.departments=n:(this.departments=[],console.warn("Unexpected departments response format:",n),console.log("Response structure:",n)),console.log("Final departments array:",this.departments),console.log("Departments count:",this.departments.length),this.departments.length===0&&console.warn("No departments found")},error:n=>{console.error("Error loading departments:",n),console.error("Error details:",{status:n.status,statusText:n.statusText,message:n.message,url:n.url}),this.departments=[]}})}reloadLocationData(){console.log("Manually reloading location data..."),this.loadDropdownData()}onTransfer(){this.validateForm()&&(this.loading=!0,this.error="",this.assetService.transferAsset(this.asset.id,this.transferData).subscribe({next:n=>{this.loading=!1,this.transferComplete.emit(n),this.resetForm(),this.closeModal.emit()},error:n=>{this.loading=!1,this.error=n.error?.message||"Transfer failed. Please try again.",console.error("Transfer error:",n)}}))}onCancel(){this.loading||(this.destroyFlatpickr(),this.resetForm(),this.closeModal.emit())}validateForm(){return this.transferData.new_location_id?this.transferData.transfer_reason?this.transferData.transfer_date?this.asset?.location_id===this.transferData.new_location_id?(this.error="Transfer location must be different from current location.",!1):(this.error="",!0):(this.error="Please select a transfer date.",!1):(this.error="Please select a transfer reason.",!1):(this.error="Please select a new location.",!1)}resetForm(){this.transferData={new_location_id:null,new_department_id:null,to_user_id:null,transfer_reason:"",transfer_date:new Date().toISOString().split("T")[0],notes:"",condition_report:""},this.error=""}getCurrentLocationName(){return this.asset?.location?.name||"No location assigned"}getCurrentDepartmentName(){return this.asset?.department?.name||"No department assigned"}getLocationNameById(n){if(!n)return"";let e=this.locations.find(r=>r.id===n);return e?e.name:""}getDepartmentNameById(n){if(!n)return"";let e=this.departments.find(r=>r.id===n);return e?e.name:""}getLocationsCount(){return this.locations.length}getDepartmentsCount(){return this.departments.length}getUsersCount(){return this.users.length}onModalClick(n){n.target===n.currentTarget&&(this.showLocationDropdown=!1,this.showDepartmentDropdown=!1,this.showReasonDropdown=!1)}static \u0275fac=function(e){return new(e||a)(K(Ce))};static \u0275cmp=ae({type:a,selectors:[["app-transfer-asset-modal"]],viewQuery:function(e,r){if(e&1&&ke(Wa,5),e&2){let l;Me(l=Ae())&&(r.dateInput=l.first)}},inputs:{isOpen:"isOpen",asset:"asset"},outputs:{closeModal:"closeModal",transferComplete:"transferComplete"},features:[Nn],decls:1,vars:1,consts:[["dateInput",""],["class","fixed inset-0 z-50 overflow-y-auto",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50","overflow-y-auto",3,"click"],[1,"flex","items-center","justify-center","min-h-screen","px-4","pt-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity","z-0","bg-[#00000085]"],[1,"inline-block","w-full","max-w-2xl","z-1","p-6","my-8","relative","overflow-hidden","text-left","align-middle","transition-all","transform","bg-white","shadow-xl","rounded-2xl",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","justify-center","mb-6"],[1,"w-8","h-8","bg-blue-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 14l-7 7m0 0l-7-7m7 7V3"],[1,"space-y-4",3,"ngSubmit"],[1,"relative",3,"click"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["for","transfer_date",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["type","text","id","transfer_date","name","transfer_date","placeholder","Select date","required","","readonly","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","cursor-pointer",3,"ngModelChange","ngModel","disabled"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-4","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["for","notes",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","notes","name","notes","rows","3","placeholder","Enter any additional notes about this transfer...",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white","resize-none",3,"ngModelChange","ngModel","disabled"],["class","bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-6"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click","disabled"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-gray-400"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","disabled","click",4,"ngFor","ngForOf"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click","disabled"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&b(0,lo,76,36,"div",1),e&2&&m("ngIf",r.isOpen)},dependencies:[se,we,oe,ce,Ge,le,de,Be,Gt,_e,Ft],styles:[".transfer-asset-modal[_ngcontent-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-height:90vh;overflow-y:auto}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.transfer-asset-modal[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled, .transfer-asset-modal[_ngcontent-%COMP%]   .form-textarea[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;cursor:not-allowed}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-image:none!important;-webkit-appearance:none;-moz-appearance:none;appearance:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px 12px;background-color:#fff;color:#374151}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:#9ca3af;background-color:#f9fafb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 10px 25px #00000026;border:1px solid #e5e7eb}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]{border-radius:4px}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day.selected[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6}.transfer-asset-modal[_ngcontent-%COMP%]   .flatpickr-calendar[_ngcontent-%COMP%]   .flatpickr-day[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.transfer-asset-modal[_ngcontent-%COMP%]   .transfer-arrow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.transfer-asset-modal[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.transfer-asset-modal[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.transfer-asset-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100vw - 2rem)}}"],data:{animation:[ye("backdropAnimation",[te(":enter",[U({opacity:0}),ee("150ms ease-out",U({opacity:1}))]),te(":leave",[ee("150ms ease-in",U({opacity:0}))])]),ye("modalAnimation",[te(":enter",[U({opacity:0,transform:"scale(0.7) translateY(-50px)"}),ee("200ms ease-out",U({opacity:1,transform:"scale(1) translateY(0)"}))]),te(":leave",[ee("150ms ease-in",U({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var ai=Hn(Qn());var co=["dateInput"],ri=()=>[0,1,2,3],mo=a=>["/locations",a],po=a=>["/assets/preview",a],uo=()=>["all","category","location","department","manufacturer","parent","children","siblings","similar"];function fo(a,n){if(a&1){let e=E();t(0,"div",28)(1,"button",29),v("click",function(){_(e);let l=c();return l.transferAsset(),h(l.showActionsDropdown=!1)}),g(),t(2,"svg",30),p(3,"path",31),i(),x(),t(4,"span",32),o(5,"Transfer Asset"),i()(),t(6,"button",29),v("click",function(){_(e);let l=c();return l.duplicateAsset(),h(l.showActionsDropdown=!1)}),g(),t(7,"svg",30),p(8,"path",33),i(),x(),t(9,"span",32),o(10,"Duplicate"),i()(),p(11,"div",34),t(12,"button",29),v("click",function(){_(e);let l=c();return l.printAsset(),h(l.showActionsDropdown=!1)}),g(),t(13,"svg",30),p(14,"path",35),i(),x(),t(15,"span",32),o(16,"Print"),i()(),t(17,"button",29),v("click",function(){_(e);let l=c();return l.exportAsset(),h(l.showActionsDropdown=!1)}),g(),t(18,"svg",30),p(19,"path",36),i(),x(),t(20,"span",32),o(21,"Export"),i()(),t(22,"button",29),v("click",function(){_(e);let l=c();return l.sharePublicUrl(),h(l.showActionsDropdown=!1)}),g(),t(23,"svg",30),p(24,"path",37),i(),x(),t(25,"span",32),o(26,"Share Public URL"),i()()()}}function go(a,n){a&1&&(t(0,"div",38)(1,"div",39)(2,"div",40),g(),t(3,"svg",41),p(4,"circle",42)(5,"path",43),i()(),x(),t(6,"h3",44),o(7,"Loading Asset"),i(),t(8,"p",45),o(9,"Please wait while we fetch the asset details..."),i()()())}function _o(a,n){if(a&1){let e=E();t(0,"div",38)(1,"div",39)(2,"div",46),g(),t(3,"svg",47),p(4,"path",48),i()(),x(),t(5,"h3",44),o(6,"Error Loading Asset"),i(),t(7,"p",49),o(8),i(),t(9,"button",50),v("click",function(){_(e);let l=c();return h(l.goBack())}),o(10," Back to Assets "),i()()()}if(a&2){let e=c();s(8),C(e.error)}}function ho(a,n){if(a&1){let e=E();t(0,"div",7)(1,"span",45),o(2,"Serial:"),i(),t(3,"button",61),v("click",function(){_(e);let l=c(2);return h(l.copySerialNumber())}),t(4,"span"),o(5),i(),g(),t(6,"svg",62),p(7,"path",33),i()()()}if(a&2){let e=c(2);s(5),C(e.asset.serial_number)}}function vo(a,n){if(a&1){let e=E();t(0,"button",210),v("click",function(){_(e);let l=c(3);return h(l.previousImage())}),g(),t(1,"svg",18),p(2,"path",211),i()()}}function xo(a,n){if(a&1){let e=E();t(0,"button",212),v("click",function(){_(e);let l=c(3);return h(l.nextImage())}),g(),t(1,"svg",18),p(2,"path",10),i()()}}function bo(a,n){if(a&1){let e=E();t(0,"div",215),v("click",function(){let l=_(e).index,d=c(4);return h(d.selectImage(l))}),t(1,"img",216),v("error",function(l){_(e);let d=c(4);return h(d.onImageError(l))}),i()()}if(a&2){let e=n.$implicit,r=n.index,l=c(4);M("border-blue-500",r===l.currentImageIndex)("border-gray-200",r!==l.currentImageIndex),s(),m("src",e.image_url,X)("alt","Asset image "+(r+1))}}function wo(a,n){if(a&1&&(t(0,"div",213),b(1,bo,2,6,"div",214),i()),a&2){let e=c(3);s(),m("ngForOf",e.asset.images)}}function yo(a,n){if(a&1){let e=E();t(0,"div")(1,"div",203)(2,"div",204)(3,"img",205),v("click",function(){_(e);let l=c(2);return h(l.viewFullImage(l.selectedImageUrl||l.asset.images[0].image_url))})("error",function(l){_(e);let d=c(2);return h(d.onImageError(l))}),i(),b(4,vo,3,0,"button",206)(5,xo,3,0,"button",207),t(6,"div",208),o(7),i()()(),b(8,wo,2,1,"div",209),i()}if(a&2){let e=c(2);s(3),m("src",e.selectedImageUrl||e.asset.images[0].image_url,X)("alt",e.asset.name),s(),m("ngIf",e.asset.images.length>1),s(),m("ngIf",e.asset.images.length>1),s(2),ie(" ",e.currentImageIndex+1," / ",e.asset.images.length," "),s(),m("ngIf",e.asset.images.length>1)}}function Co(a,n){a&1&&(t(0,"div",217),g(),t(1,"svg",218),p(2,"path",69),i(),x(),t(3,"h3",44),o(4,"No Images Available"),i(),t(5,"p",219),o(6,"No images have been uploaded for this asset."),i()())}function So(a,n){if(a&1){let e=E();t(0,"button",220),v("click",function(){_(e);let l=c(2);return h(l.descriptionExpanded=!l.descriptionExpanded)}),o(1),i()}if(a&2){let e=c(2);s(),k(" ",e.descriptionExpanded?"Show Less":"Show More"," ")}}function Eo(a,n){if(a&1){let e=E();t(0,"img",221),v("error",function(l){_(e);let d=c(2);return h(d.onCategoryIconError(l,d.asset.category))}),i()}if(a&2){let e=c(2);m("src",e.asset.category.icon,X)("alt",e.asset.category.name)}}function ko(a,n){a&1&&(g(),t(0,"svg",189),p(1,"path",222),i())}function Mo(a,n){if(a&1&&(t(0,"a",223),o(1),i()),a&2){let e=c(2);m("routerLink",je(2,mo,e.asset.location.id)),s(),k(" ",e.asset.location.name," ")}}function Ao(a,n){if(a&1&&(t(0,"span",90),o(1),i()),a&2){let e=c(2);s(),C((e.asset==null||e.asset.location==null?null:e.asset.location.name)||"No location assigned")}}function To(a,n){if(a&1&&(t(0,"div")(1,"h4",75),o(2,"Parent Asset"),i(),t(3,"a",223),o(4),i()()),a&2){let e=c(2);s(3),m("routerLink",je(3,po,e.asset.parent.id)),s(),ie(" ",e.asset.parent.name," (",e.asset.parent.asset_id,") ")}}function Io(a,n){if(a&1&&p(0,"img",224),a&2){let e=c(2);m("src",e.qrCodeDataUrl,X)}}function Do(a,n){if(a&1&&p(0,"img",224),a&2){let e=c(2);m("src",e.asset.qr_code_url,X)}}function Vo(a,n){a&1&&(t(0,"div",225),p(1,"div",226),i())}function Po(a,n){if(a&1&&(t(0,"div",39),g(),t(1,"svg",227),p(2,"path",228),i(),x(),t(3,"p",229),o(4),i()()),a&2){let e=c(2);s(4),C(e.asset.asset_id||e.asset.id)}}function Lo(a,n){a&1&&(t(0,"div",230),g(),t(1,"svg",231),p(2,"path",48),i(),x(),t(3,"p",232),o(4,"No Asset ID"),i()())}function Fo(a,n){if(a&1){let e=E();t(0,"button",233),v("click",function(){_(e);let l=c(2);return h(l.downloadQRCode())}),o(1," Download "),i()}}function Oo(a,n){if(a&1){let e=E();t(0,"button",234),v("click",function(){_(e);let l=c(2);return h(l.copyPublicUrl())}),o(1," Copy URL "),i()}}function Ho(a,n){if(a&1&&p(0,"img",235),a&2){let e=c(2);m("src",e.asset.barcode_url,X)}}function jo(a,n){if(a&1&&p(0,"img",235),a&2){let e=c(2);m("src",e.barcodeDataUrl,X)}}function No(a,n){a&1&&(t(0,"div",236),p(1,"div",226),i())}function Ro(a,n){if(a&1&&(t(0,"div",237),g(),t(1,"svg",238),p(2,"path",73),i(),x(),t(3,"p",229),o(4),i()()),a&2){let e=c(2);s(4),C(e.asset.asset_id)}}function Bo(a,n){a&1&&(t(0,"div",239),g(),t(1,"svg",231),p(2,"path",48),i(),x(),t(3,"p",232),o(4,"No Asset ID"),i()())}function Go(a,n){if(a&1){let e=E();t(0,"button",233),v("click",function(){_(e);let l=c(2);return h(l.downloadBarcode())}),o(1," Download "),i()}}function zo(a,n){if(a&1){let e=E();t(0,"button",234),v("click",function(){_(e);let l=c(2);return h(l.copyAssetId())}),o(1," Copy ID "),i()}}function Uo(a,n){if(a&1&&(t(0,"p",240),o(1),i()),a&2){let e=c(2);s(),C(e.asset.asset_id)}}function $o(a,n){if(a&1){let e=E();t(0,"div")(1,"h4",113),o(2,"Serial Number"),i(),t(3,"div",7)(4,"span",241),o(5),i(),t(6,"button",242),v("click",function(){_(e);let l=c(2);return h(l.copySerialNumber())}),g(),t(7,"svg",14),p(8,"path",33),i()()()()}if(a&2){let e=c(2);s(5),C(e.asset.serial_number)}}function Wo(a,n){if(a&1&&(t(0,"div",246)(1,"span",148),o(2),i(),t(3,"span",247),o(4),i()()),a&2){let e=n.$implicit;s(2),k("",e.key,":"),s(2),C(e.value)}}function Yo(a,n){if(a&1&&(t(0,"div",243)(1,"h4",197),o(2,"Additional Specifications"),i(),t(3,"div",244),b(4,Wo,5,2,"div",245),fe(5,"keyvalue"),i()()),a&2){let e=c(2);s(4),m("ngForOf",Bn(5,1,e.asset.specifications))}}function qo(a,n){a&1&&p(0,"div",248)}function Qo(a,n){if(a&1&&(t(0,"div",253)(1,"div",7),g(),t(2,"svg",14),p(3,"path",254),i(),x(),t(4,"span"),o(5),i()()()),a&2){let e=n.$implicit;z(e.class),s(5),C(e.message)}}function Ko(a,n){if(a&1&&(t(0,"div",198),b(1,Qo,6,3,"div",252),i()),a&2){let e=c(3);s(),m("ngForOf",e.getFinancialAlerts())}}function Jo(a,n){if(a&1&&(t(0,"div",253)(1,"div",7),g(),t(2,"svg",14),p(3,"path",254),i(),x(),t(4,"div")(5,"div",255),o(6),i(),t(7,"div",256),o(8),i()()()()),a&2){let e=n.$implicit;z(e.class),s(6),C(e.title),s(2),C(e.message)}}function Zo(a,n){if(a&1&&(t(0,"div",198),b(1,Jo,9,4,"div",252),i()),a&2){let e=c(3);s(),m("ngForOf",e.getPredictiveAlerts())}}function Xo(a,n){if(a&1&&(t(0,"div",249)(1,"h4",250),o(2,"Alerts & Notifications"),i(),b(3,Ko,2,1,"div",251)(4,Zo,2,1,"div",251),i()),a&2){let e=c(2);s(3),m("ngIf",e.getFinancialAlerts().length>0),s(),m("ngIf",e.getPredictiveAlerts().length>0)}}function es(a,n){a&1&&p(0,"div",248)}function ts(a,n){if(a&1&&(t(0,"span",257),o(1),i()),a&2){let e=n.$implicit,r=c(2);s(),k(" ",r.formatDate(e.toISOString())," ")}}function ns(a,n){a&1&&(t(0,"div",258)(1,"div",39)(2,"div",259),g(),t(3,"svg",260),p(4,"circle",42)(5,"path",43),i()(),x(),t(6,"p",45),o(7,"Loading activities..."),i()()())}function is(a,n){if(a&1){let e=E();t(0,"div",261)(1,"div",262),o(2),i(),t(3,"button",176),v("click",function(){_(e);let l=c(2);return h(l.loadActivityHistory())}),o(4," Try Again "),i()()}if(a&2){let e=c(2);s(2),C(e.activityError)}}function rs(a,n){if(a&1&&(t(0,"div",272),o(1),i()),a&2){let e=c().$implicit,r=c(3);s(),k(" ",r.formatActivityBeforeAfter(e.before,e.after)," ")}}function as(a,n){if(a&1&&(t(0,"div",123)(1,"strong"),o(2,"By:"),i(),o(3),i()),a&2){let e=c().$implicit,r=c(3);s(3),k(" ",r.getUserDisplayName(e.user)," ")}}function os(a,n){if(a&1&&(t(0,"div",264)(1,"div",265),g(),t(2,"svg",14),p(3,"path",56),i()(),x(),t(4,"div",266)(5,"div",267)(6,"h4",268),o(7),i(),t(8,"span",269),o(9),i()(),t(10,"p",121),o(11),i(),b(12,rs,2,1,"div",270)(13,as,4,1,"div",271),i()()),a&2){let e=n.$implicit,r=c(3);s(),m("ngClass",r.getActivityColor(e.action)),s(2),Pe("d",r.getActivityIcon(e.action)),s(4),C(e.action),s(2),C(e.time_ago),s(2),C(e.comment||"No comment"),s(),m("ngIf",r.formatActivityBeforeAfter(e.before,e.after)),s(),m("ngIf",e.user)}}function ss(a,n){a&1&&(t(0,"div",261),g(),t(1,"svg",273),p(2,"path",92),i(),x(),t(3,"h3",44),o(4,"No Recent Activity"),i(),t(5,"p",219),o(6,"No activity has been recorded for this asset yet."),i()())}function ls(a,n){if(a&1&&(t(0,"div",112),b(1,os,14,7,"div",263)(2,ss,7,0,"div",173),i()),a&2){let e=c(2);s(),m("ngForOf",e.activities),s(),m("ngIf",e.activities.length===0)}}function ds(a,n){if(a&1){let e=E();t(0,"button",275),v("click",function(){let l=_(e).$implicit,d=c(3);return d.onRelatedFilterChange(l),h(d.showRelatedFilterDropdown=!1)}),t(1,"span",276),o(2),i()()}if(a&2){let e=n.$implicit,r=c(3);M("text-blue-600",r.selectedRelatedFilter===e)("bg-blue-50",r.selectedRelatedFilter===e),s(2),C(r.getRelatedFilterDisplayName(e))}}function cs(a,n){a&1&&(t(0,"div",28),b(1,ds,3,5,"button",274),i()),a&2&&(s(),m("ngForOf",He(1,uo)))}function ms(a,n){a&1&&(t(0,"div",258)(1,"div",39)(2,"div",259),g(),t(3,"svg",260),p(4,"circle",42)(5,"path",43),i()(),x(),t(6,"p",45),o(7,"Loading related assets..."),i()()())}function ps(a,n){if(a&1){let e=E();t(0,"div",261)(1,"div",262),o(2),i(),t(3,"button",176),v("click",function(){_(e);let l=c(2);return h(l.loadRelatedAssets())}),o(4," Try Again "),i()()}if(a&2){let e=c(2);s(2),C(e.relatedAssetsError)}}function us(a,n){if(a&1){let e=E();t(0,"img",289),v("error",function(l){_(e);let d=c(4);return h(d.onImageError(l))}),i()}if(a&2){let e=c().$implicit;m("src",e.images[0].image_url,X)("alt",e.name)}}function fs(a,n){a&1&&(g(),t(0,"svg",290),p(1,"path",291),i())}function gs(a,n){if(a&1&&(t(0,"span",269),o(1),i()),a&2){let e=c().$implicit;s(),k(" Health: ",e.health_score,"% ")}}function _s(a,n){if(a&1){let e=E();t(0,"div",279),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.navigateToRelatedAsset(l.id))}),t(1,"div",280),b(2,us,1,2,"img",281)(3,fs,2,0,"svg",282),i(),t(4,"div",283)(5,"div",267)(6,"h4",284),o(7),i(),t(8,"span",269),o(9),i()(),t(10,"div",285)(11,"span",141),o(12),i(),t(13,"span",286),o(14,"\u2022"),i(),t(15,"span",141),o(16),i()(),t(17,"div",7)(18,"span",287),o(19),i(),b(20,gs,2,1,"span",202),i()(),g(),t(21,"svg",288),p(22,"path",10),i()()}if(a&2){let e=n.$implicit,r=c(3);s(2),m("ngIf",e.images&&e.images.length>0),s(),m("ngIf",!e.images||e.images.length===0),s(4),C(e.name),s(2),C(e.asset_id),s(3),C((e.category==null?null:e.category.name)||"General"),s(4),C((e.asset_type==null?null:e.asset_type.name)||e.type),s(2),m("ngClass",r.getRelatedAssetStatusColor(e.asset_status||e.status)),s(),k(" ",(e.asset_status==null?null:e.asset_status.name)||e.status," "),s(),m("ngIf",e.health_score)}}function hs(a,n){a&1&&(t(0,"div",261),g(),t(1,"svg",273),p(2,"path",291),i(),x(),t(3,"h3",44),o(4,"No Related Assets"),i(),t(5,"p",219),o(6,"No related assets found for this item."),i()())}function vs(a,n){if(a&1&&(t(0,"div",277),b(1,_s,23,9,"div",278)(2,hs,7,0,"div",173),i()),a&2){let e=c(2);s(),m("ngForOf",e.relatedAssets),s(),m("ngIf",e.relatedAssets.length===0)}}function xs(a,n){a&1&&(t(0,"div",292)(1,"div",293),g(),t(2,"svg",294),p(3,"circle",42)(4,"path",43),i()(),x(),t(5,"p",123),o(6,"Loading..."),i()())}function bs(a,n){if(a&1&&(t(0,"div",306),o(1),i()),a&2){let e=c().$implicit;s(),k(" ",e.notes," ")}}function ws(a,n){if(a&1){let e=E();t(0,"div",296)(1,"div",297)(2,"h4",298),o(3),i(),t(4,"div",299)(5,"span"),o(6),i(),t(7,"button",300),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.editMaintenanceSchedule(l))}),g(),t(8,"svg",62),p(9,"path",15),i()(),x(),t(10,"button",301),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.deleteMaintenanceSchedule(l))}),g(),t(11,"svg",62),p(12,"path",302),i()()()(),x(),t(13,"div",303)(14,"div")(15,"span",219),o(16,"Next Due:"),i(),t(17,"span",304),o(18),i()(),t(19,"div")(20,"span",219),o(21,"Frequency:"),i(),t(22,"span",304),o(23),i()()(),b(24,bs,2,1,"div",305),i()}if(a&2){let e=n.$implicit,r=c(3);s(3),C(e.schedule_type),s(2),z("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+r.getScheduleStatusColor(e.status)+"-100 text-"+r.getScheduleStatusColor(e.status)+"-800"),s(),k(" ",e.status," "),s(12),C(r.formatDate(e.next_due)),s(5),C(e.frequency||"Not specified"),s(),m("ngIf",e.notes)}}function ys(a,n){if(a&1&&(t(0,"div",277),b(1,ws,25,7,"div",295),i()),a&2){let e=c(2);s(),m("ngForOf",e.maintenanceSchedules)}}function Cs(a,n){if(a&1){let e=E();t(0,"div",292),g(),t(1,"svg",307),p(2,"path",91),i(),x(),t(3,"h3",308),o(4,"No Maintenance Schedules"),i(),t(5,"p",309),o(6,"Create maintenance schedules to track asset upkeep."),i(),t(7,"button",310),v("click",function(){_(e);let l=c(2);return h(l.addMaintenanceSchedule())}),o(8," Add First Schedule "),i()()}}function Ss(a,n){if(a&1&&(t(0,"span",269),o(1),fe(2,"date"),i()),a&2){let e=c(2);s(),k(" (Expires: ",Ne(2,1,e.asset.warranty,"MMM d, y"),") ")}}function Es(a,n){if(a&1){let e=E();t(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",5)(4,"div",54),g(),t(5,"svg",55),p(6,"path",56),i()(),x(),t(7,"div")(8,"h1",57),o(9),i(),t(10,"div",5)(11,"span"),o(12),i(),t(13,"span",58),o(14),i(),t(15,"span",58),o(16,"\u2022"),i(),t(17,"span",58),o(18),i()()()(),t(19,"div",59)(20,"div",60)(21,"span",45),o(22,"Asset ID:"),i(),t(23,"button",61),v("click",function(){_(e);let l=c();return h(l.copyAssetId())}),t(24,"span"),o(25),i(),g(),t(26,"svg",62),p(27,"path",33),i()()(),b(28,ho,8,1,"div",63),i()()(),x(),t(29,"div",64)(30,"div",65)(31,"div",66)(32,"div",67),g(),t(33,"svg",68),p(34,"path",69),i(),x(),t(35,"h2",70),o(36,"Asset Images"),i()(),b(37,yo,9,7,"div",71)(38,Co,7,0,"ng-template",null,0,Gn),i(),t(40,"div",66)(41,"div",72),g(),t(42,"svg",68),p(43,"path",73),i(),x(),t(44,"h2",70),o(45,"Basic Information"),i()(),t(46,"div",64)(47,"div",74)(48,"div")(49,"h4",75),o(50,"Asset Name"),i(),t(51,"p",70),o(52),i()(),t(53,"div")(54,"h4",75),o(55,"Description"),i(),t(56,"div",76)(57,"p",77),o(58),i(),b(59,So,2,1,"button",78),i()(),t(60,"div")(61,"h4",75),o(62,"Category"),i(),t(63,"div",12)(64,"div",79),b(65,Eo,1,2,"img",80)(66,ko,2,0,"svg",81),i(),t(67,"span",11),o(68),i()()(),t(69,"div")(70,"h4",75),o(71,"Status"),i(),t(72,"span",82),o(73),i()()(),t(74,"div",74)(75,"div")(76,"h4",75),o(77,"Asset ID"),i(),t(78,"div",7)(79,"span",83),o(80),i(),t(81,"button",84),v("click",function(){_(e);let l=c();return h(l.copyAssetId())}),g(),t(82,"svg",14),p(83,"path",33),i()()()(),x(),t(84,"div")(85,"h4",75),o(86,"Location"),i(),t(87,"div",7),g(),t(88,"svg",85),p(89,"path",86)(90,"path",87),i(),b(91,Mo,2,4,"a",88)(92,Ao,2,1,"span",89),i()(),x(),t(93,"div")(94,"h4",75),o(95,"Department"),i(),t(96,"span",90),o(97),i()(),t(98,"div")(99,"h4",75),o(100,"Created"),i(),t(101,"div",7),g(),t(102,"svg",85),p(103,"path",91),i(),x(),t(104,"span",90),o(105),fe(106,"date"),i()()(),t(107,"div")(108,"h4",75),o(109,"Last Modified"),i(),t(110,"div",7),g(),t(111,"svg",85),p(112,"path",92),i(),x(),t(113,"span",90),o(114),fe(115,"date"),i()()(),b(116,To,5,5,"div",93),i(),t(117,"div",74)(118,"div")(119,"h4",75),o(120,"QR Code"),i(),t(121,"div",94)(122,"div",95),b(123,Io,1,1,"img",96)(124,Do,1,1,"img",96)(125,Vo,2,0,"div",97)(126,Po,5,1,"div",98)(127,Lo,5,0,"div",99),i(),t(128,"div",100),b(129,Fo,2,0,"button",101)(130,Oo,2,0,"button",102),i(),t(131,"div",103)(132,"p"),o(133,"Scan to access public page"),i()()()(),t(134,"div")(135,"h4",75),o(136,"Barcode"),i(),t(137,"div",94)(138,"div",104),b(139,Ho,1,1,"img",105)(140,jo,1,1,"img",105)(141,No,2,0,"div",106)(142,Ro,5,1,"div",107)(143,Bo,5,0,"div",108),i(),t(144,"div",100),b(145,Go,2,0,"button",101)(146,zo,2,0,"button",102),i(),t(147,"div",103)(148,"p"),o(149,"Scan for asset identification"),i(),b(150,Uo,2,1,"p",109),i()()()()()(),t(151,"div",66)(152,"div",67),g(),t(153,"svg",68),p(154,"path",110),i(),x(),t(155,"h2",70),o(156,"Technical Specifications"),i()(),t(157,"div",111)(158,"div",112)(159,"div")(160,"h4",113),o(161,"Manufacturer"),i(),t(162,"span",90),o(163),i()(),t(164,"div")(165,"h4",113),o(166,"Model"),i(),t(167,"span",90),o(168),i()(),b(169,$o,9,1,"div",93),t(170,"div")(171,"h4",113),o(172,"Brand"),i(),t(173,"span",90),o(174),i()()(),t(175,"div",112)(176,"div")(177,"h4",113),o(178,"Dimensions"),i(),t(179,"span",90),o(180),i()(),t(181,"div")(182,"h4",113),o(183,"Weight"),i(),t(184,"span",90),o(185),i()(),t(186,"div")(187,"h4",113),o(188,"Power Requirements"),i(),t(189,"span",90),o(190),i()(),t(191,"div")(192,"h4",113),o(193,"Operating Conditions"),i(),t(194,"span",90),o(195),i()()()(),b(196,Yo,6,3,"div",114),i(),t(197,"div",66)(198,"div",67)(199,"div",79),g(),t(200,"svg",115),p(201,"path",116),i()(),x(),t(202,"h2",70),o(203,"Health & Performance Dashboard"),i(),t(204,"button",117),v("click",function(){_(e);let l=c();return h(l.refreshHealthMetrics())}),g(),t(205,"svg",14),p(206,"path",118),i(),x(),t(207,"span"),o(208,"Refresh"),i()()(),t(209,"div",119)(210,"div",120)(211,"div",121),o(212,"Health Score"),i(),t(213,"div",122),o(214),i(),t(215,"div",123),o(216),i()(),t(217,"div",124)(218,"div",121),o(219,"Utilization Rate"),i(),t(220,"div",125),o(221),i(),t(222,"div",123),o(223,"Current Usage"),i()(),t(224,"div",126)(225,"div",121),o(226,"Uptime"),i(),t(227,"div",127),o(228),i(),t(229,"div",123),o(230,"System Availability"),i()(),t(231,"div",128)(232,"div",121),o(233,"Cost Efficiency"),i(),t(234,"div",129),o(235),i(),t(236,"div",123),o(237,"Performance Ratio"),i()()(),t(238,"div",112)(239,"div",39)(240,"h3",130),o(241,"Performance Overview"),i()(),t(242,"div",131)(243,"div",132)(244,"div",133)(245,"span"),o(246,"100%"),i(),t(247,"span"),o(248,"75%"),i(),t(249,"span"),o(250,"50%"),i(),t(251,"span"),o(252,"25%"),i(),t(253,"span"),o(254,"0%"),i()(),t(255,"div",134)(256,"div",135),b(257,qo,1,0,"div",136),i(),t(258,"div",137)(259,"div",138)(260,"div",139),p(261,"div",140),i(),t(262,"span",141),o(263,"Health"),i()(),t(264,"div",138)(265,"div",139),p(266,"div",142),i(),t(267,"span",141),o(268,"Usage"),i()(),t(269,"div",138)(270,"div",139),p(271,"div",143),i(),t(272,"span",141),o(273,"Uptime"),i()(),t(274,"div",138)(275,"div",139),p(276,"div",144),i(),t(277,"span",141),o(278,"Efficiency"),i()()()()()(),t(279,"div",145),o(280," Performance metrics comparison "),i(),t(281,"div",146)(282,"div",147)(283,"div",148),o(284,"Asset Age"),i(),t(285,"div",70),o(286),i()(),t(287,"div",147)(288,"div",148),o(289,"Maintenance Frequency"),i(),t(290,"div",70),o(291),i()(),t(292,"div",147)(293,"div",148),o(294,"Warranty Status"),i(),t(295,"div",70),o(296),i()()(),t(297,"div",149)(298,"div",150)(299,"div",148),o(300,"Current Value"),i(),t(301,"div",151),o(302),i()(),t(303,"div",152)(304,"div",148),o(305,"Depreciation"),i(),t(306,"div",153),o(307),i()(),t(308,"div",154)(309,"div",148),o(310,"ROI"),i(),t(311,"div",155),o(312),i()(),t(313,"div",156)(314,"div",148),o(315,"TCO"),i(),t(316,"div",157),o(317),i()()(),t(318,"div",146)(319,"div",147)(320,"div",148),o(321,"Performance Trend"),i(),t(322,"div",158),g(),t(323,"svg",14),p(324,"path",56),i(),x(),t(325,"span",159),o(326),i()()(),t(327,"div",147)(328,"div",148),o(329,"Cost Efficiency"),i(),t(330,"div",158),g(),t(331,"svg",14),p(332,"path",56),i(),x(),t(333,"span",159),o(334),i()()(),t(335,"div",147)(336,"div",148),o(337,"Maintenance Needs"),i(),t(338,"div",158),g(),t(339,"svg",14),p(340,"path",56),i(),x(),t(341,"span",159),o(342),i()()()(),b(343,Xo,5,2,"div",160),i()(),t(344,"div",66)(345,"div",67)(346,"div",161),g(),t(347,"svg",162),p(348,"path",163),i()(),x(),t(349,"h2",70),o(350,"Asset Depreciation"),i()(),t(351,"div",164)(352,"div",120)(353,"div",121),o(354,"Original Value"),i(),t(355,"div",122),o(356),i()(),t(357,"div",126)(358,"div",121),o(359,"Current Value"),i(),t(360,"div",127),o(361),i()()(),t(362,"div",112)(363,"div",39)(364,"h3",130),o(365,"Depreciation Timeline (straight-line method)"),i()(),t(366,"div",131)(367,"div",132)(368,"div",133)(369,"span"),o(370),i(),t(371,"span"),o(372),i(),t(373,"span"),o(374),i(),t(375,"span"),o(376),i(),t(377,"span"),o(378,"$0"),i()(),t(379,"div",134)(380,"div",135),b(381,es,1,0,"div",136),i(),g(),t(382,"svg",165)(383,"defs")(384,"pattern",166),p(385,"path",167),i()(),p(386,"path",168)(387,"circle",169),i(),x(),t(388,"div",170),b(389,ts,2,1,"span",171),i()()()(),t(390,"div",145),o(391," Red dot indicates current period value "),i(),t(392,"div",146)(393,"div",147)(394,"div",148),o(395,"Annual Depreciation"),i(),t(396,"div",70),o(397),i()(),t(398,"div",147)(399,"div",148),o(400,"Depreciation Rate"),i(),t(401,"div",70),o(402),i()(),t(403,"div",147)(404,"div",148),o(405,"Years Remaining"),i(),t(406,"div",70),o(407),i()()()()()(),t(408,"div",74)(409,"div",66)(410,"div",67),g(),t(411,"svg",68),p(412,"path",92),i(),x(),t(413,"h2",70),o(414,"Recent Activity"),i()(),b(415,ns,8,0,"div",172)(416,is,5,1,"div",173)(417,ls,3,2,"div",174),t(418,"div",175)(419,"button",176),v("click",function(){_(e);let l=c();return h(l.showFullActivityHistory())}),o(420," View Full Activity History "),i()()(),t(421,"div",66)(422,"div",177)(423,"div",7),g(),t(424,"svg",68),p(425,"path",178),i(),x(),t(426,"h2",70),o(427,"Related Assets"),i()(),t(428,"div",76)(429,"button",179),v("click",function(){_(e);let l=c();return h(l.showRelatedFilterDropdown=!l.showRelatedFilterDropdown)}),t(430,"span"),o(431),i(),g(),t(432,"svg",14),p(433,"path",180),i()(),b(434,cs,2,2,"div",22),i()(),b(435,ms,8,0,"div",172)(436,ps,5,1,"div",173)(437,vs,3,2,"div",181),i(),x(),t(438,"div",66)(439,"div",177)(440,"div",7),g(),t(441,"svg",68),p(442,"path",91),i(),x(),t(443,"h2",70),o(444,"Maintenance Schedule"),i()(),t(445,"button",182),v("click",function(){_(e);let l=c();return h(l.addMaintenanceSchedule())}),g(),t(446,"svg",14),p(447,"path",183),i(),x(),t(448,"span"),o(449,"Add"),i()()(),t(450,"div",184)(451,"div",124)(452,"div",7),g(),t(453,"svg",185),p(454,"path",186),i(),x(),t(455,"div")(456,"div",187),o(457,"Last Maintenance"),i(),t(458,"div",188),o(459),i()()()(),t(460,"div",126)(461,"div",7),g(),t(462,"svg",189),p(463,"path",92),i(),x(),t(464,"div")(465,"div",190),o(466,"Next Due"),i(),t(467,"div",191),o(468),i()()()(),t(469,"div",128)(470,"div",7),g(),t(471,"svg",192),p(472,"path",118),i(),x(),t(473,"div")(474,"div",193),o(475,"Frequency"),i(),t(476,"div",194),o(477),i()()()()(),b(478,xs,7,0,"div",195)(479,ys,2,1,"div",181)(480,Cs,9,0,"div",195),i(),t(481,"div",66)(482,"div",67),g(),t(483,"svg",68),p(484,"path",196),i(),x(),t(485,"h2",70),o(486,"Financial Information"),i()(),t(487,"div",112)(488,"div",120)(489,"h4",197),o(490,"Purchase Details"),i(),t(491,"div",198)(492,"div")(493,"span",141),o(494,"Purchase Price"),i(),t(495,"div",70),o(496),fe(497,"currency"),i()(),t(498,"div")(499,"span",141),o(500,"Purchase Date"),i(),t(501,"div",199),o(502),fe(503,"date"),i()()()(),t(504,"div",126)(505,"h4",197),o(506,"Current Value"),i(),t(507,"div",198)(508,"div")(509,"span",141),o(510,"Book Value"),i(),t(511,"div",70),o(512),fe(513,"currency"),i()(),t(514,"div")(515,"span",141),o(516,"Market Value"),i(),t(517,"div",199),o(518),fe(519,"currency"),i()()()(),t(520,"div",200)(521,"h4",197),o(522,"Depreciation"),i(),t(523,"div",198)(524,"div")(525,"span",141),o(526,"Method"),i(),t(527,"div",199),o(528),i()(),t(529,"div")(530,"span",141),o(531,"Useful Life"),i(),t(532,"div",199),o(533),i()(),t(534,"div")(535,"span",141),o(536,"Annual Rate"),i(),t(537,"div",199),o(538),i()()()(),t(539,"div",124)(540,"h4",197),o(541,"Performance"),i(),t(542,"div",198)(543,"div")(544,"span",141),o(545,"Total Cost of Ownership"),i(),t(546,"div",70),o(547),fe(548,"currency"),i()(),t(549,"div")(550,"span",141),o(551,"ROI"),i(),t(552,"div",199),o(553),i()()()(),t(554,"div",128)(555,"h4",197),o(556,"Warranty & Insurance"),i(),t(557,"div",198)(558,"div")(559,"span",141),o(560,"Warranty Status"),i(),t(561,"div",201)(562,"span"),o(563),i(),b(564,Ss,3,4,"span",202),i()(),t(565,"div")(566,"span",141),o(567,"Insurance Value"),i(),t(568,"div",199),o(569),i()()()()()()()()()}if(a&2){let e=Tt(39),r=c();s(6),Pe("d",r.getAssetTypeIcon()),s(3),C(r.asset.name),s(2),z("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+r.getStatusColor(r.asset.status)+"-100 text-"+r.getStatusColor(r.asset.status)+"-800"),s(),k(" ",r.asset.status," "),s(2),C(r.getAssetTypeName(r.asset.type)),s(4),C((r.asset.category==null?null:r.asset.category.name)||"General"),s(7),C(r.asset.asset_id||r.asset.id),s(3),m("ngIf",r.asset.serial_number),s(9),m("ngIf",r.asset.images&&r.asset.images.length>0)("ngIfElse",e),s(15),C((r.asset==null?null:r.asset.name)||"Unnamed Asset"),s(5),M("line-clamp-3",!r.descriptionExpanded),s(),k(" ",(r.asset==null?null:r.asset.description)||"No description available"," "),s(),m("ngIf",(r.asset==null?null:r.asset.description)&&r.asset.description.length>150),s(6),m("ngIf",(r.asset==null||r.asset.category==null?null:r.asset.category.icon)&&!r.asset.category.iconError),s(),m("ngIf",!(!(r.asset==null||r.asset.category==null)&&r.asset.category.icon)||r.asset.category.iconError),s(2),C((r.asset==null||r.asset.category==null?null:r.asset.category.name)||"Uncategorized"),s(4),m("ngClass",r.getStatusColor(r.asset==null?null:r.asset.status)),s(),k(" ",(r.asset==null?null:r.asset.status)||"Unknown"," "),s(7),C((r.asset==null?null:r.asset.asset_id)||"N/A"),s(11),m("ngIf",r.asset==null||r.asset.location==null?null:r.asset.location.id),s(),m("ngIf",!(!(r.asset==null||r.asset.location==null)&&r.asset.location.id)),s(5),C((r.asset==null||r.asset.department==null?null:r.asset.department.name)||"Not assigned"),s(8),C(Ne(106,144,r.asset==null?null:r.asset.created_at,"MMM d, y")),s(9),C(Ne(115,147,r.asset==null?null:r.asset.updated_at,"MMM d, y")),s(2),m("ngIf",r.asset==null?null:r.asset.parent),s(7),m("ngIf",r.qrCodeDataUrl),s(),m("ngIf",!r.qrCodeDataUrl&&(r.asset==null?null:r.asset.qr_code_url)),s(),m("ngIf",r.qrCodeLoading),s(),m("ngIf",!r.qrCodeDataUrl&&!(r.asset!=null&&r.asset.qr_code_url)&&!r.qrCodeLoading&&(r.asset==null?null:r.asset.id)),s(),m("ngIf",!r.qrCodeDataUrl&&!(r.asset!=null&&r.asset.qr_code_url)&&!r.qrCodeLoading&&!(r.asset!=null&&r.asset.id)),s(2),m("ngIf",r.asset==null?null:r.asset.id),s(),m("ngIf",r.asset==null?null:r.asset.id),s(9),m("ngIf",r.asset==null?null:r.asset.barcode_url),s(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&r.barcodeDataUrl),s(),m("ngIf",r.barcodeLoading),s(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&!r.barcodeDataUrl&&!r.barcodeLoading&&(r.asset==null?null:r.asset.asset_id)),s(),m("ngIf",!(r.asset!=null&&r.asset.barcode_url)&&!r.barcodeDataUrl&&!r.barcodeLoading&&!(r.asset!=null&&r.asset.asset_id)),s(2),m("ngIf",r.asset==null?null:r.asset.asset_id),s(),m("ngIf",r.asset==null?null:r.asset.asset_id),s(4),m("ngIf",r.asset==null?null:r.asset.asset_id),s(13),C(r.asset.manufacturer||"Not specified"),s(5),C(r.asset.model||"Not specified"),s(),m("ngIf",r.asset.serial_number),s(5),C(r.asset.brand||"Not specified"),s(6),C(r.asset.dimensions||"Not specified"),s(5),C(r.asset.weight||"Not specified"),s(5),C(r.asset.power_requirements||"Not specified"),s(5),C(r.asset.operating_conditions||"Standard conditions"),s(),m("ngIf",r.asset.specifications),s(18),k("",(r.asset==null?null:r.asset.health_score)||0,"%"),s(2),C(r.getHealthStatusText(r.asset==null?null:r.asset.health_score)),s(5),k("",r.getUtilizationRate(),"%"),s(7),k("",r.getUptimePercentage(),"%"),s(7),k("",r.getCostEfficiency(),"%"),s(22),m("ngForOf",He(173,ri)),s(3),W("height",(r.asset==null?null:r.asset.health_score)||0,"%"),s(),W("height",(r.asset==null?null:r.asset.health_score)||0,"%"),s(4),W("height",r.getUtilizationRate(),"%"),s(),W("height",r.getUtilizationRate(),"%"),s(4),W("height",r.getUptimePercentage(),"%"),s(),W("height",r.getUptimePercentage(),"%"),s(4),W("height",r.getCostEfficiency(),"%"),s(),W("height",r.getCostEfficiency(),"%"),s(10),C(r.getAssetAge()),s(5),C(r.getMaintenanceFrequency()),s(4),z(r.getWarrantyStatusClass(r.asset==null?null:r.asset.warranty)),s(),C(r.getWarrantyStatus(r.asset==null?null:r.asset.warranty)),s(6),k("$",r.formatCurrency(r.calculateCurrentValue()),""),s(5),k("$",r.formatCurrency(r.calculateDepreciation()),""),s(4),z(r.getROIColor(r.calculateROI())),s(),k("",r.calculateROI(),"%"),s(5),k("$",r.formatCurrency(r.calculateTotalCostOfOwnership()),""),s(5),z(r.getTrendColor(r.getPerformanceTrend())),s(2),Pe("d",r.getTrendIcon(r.getPerformanceTrend())),s(2),C(r.getPerformanceTrend()),s(4),z(r.getTrendColor(r.getCostEfficiencyTrend())),s(2),Pe("d",r.getTrendIcon(r.getCostEfficiencyTrend())),s(2),C(r.getCostEfficiencyTrend()),s(4),z(r.getTrendColor(r.getMaintenanceTrend())),s(2),Pe("d",r.getTrendIcon(r.getMaintenanceTrend())),s(2),C(r.getMaintenanceTrend()),s(),m("ngIf",r.getFinancialAlerts().length>0||r.getPredictiveAlerts().length>0),s(13),k("$",r.formatCurrency((r.asset==null?null:r.asset.purchase_price)||0),""),s(5),k("$",r.formatCurrency(r.calculateCurrentValue()),""),s(9),k("$",r.formatCurrency(r.getMaxDepreciationValue()),""),s(2),k("$",r.formatCurrency(r.getMaxDepreciationValue()*.75),""),s(2),k("$",r.formatCurrency(r.getMaxDepreciationValue()*.5),""),s(2),k("$",r.formatCurrency(r.getMaxDepreciationValue()*.25),""),s(5),m("ngForOf",He(174,ri)),s(5),Pe("d",r.getDepreciationPath()),s(),Pe("cx",r.getCurrentPeriodX())("cy",r.getCurrentPeriodY()),s(2),m("ngForOf",r.getDepreciationDates()),s(8),k("$",r.formatCurrency(r.calculateAnnualDepreciation()),""),s(5),k("",r.calculateDepreciationRate(),"%"),s(5),C(r.calculateRemainingYears()),s(8),m("ngIf",r.activityLoading),s(),m("ngIf",r.activityError&&!r.activityLoading),s(),m("ngIf",!r.activityLoading&&!r.activityError),s(14),C(r.getRelatedFilterDisplayName(r.selectedRelatedFilter)),s(3),m("ngIf",r.showRelatedFilterDropdown),s(),m("ngIf",r.relatedAssetsLoading),s(),m("ngIf",r.relatedAssetsError&&!r.relatedAssetsLoading),s(),m("ngIf",!r.relatedAssetsLoading&&!r.relatedAssetsError),s(22),C(r.mockMaintenanceData.lastMaintenance||"Not recorded"),s(9),C(r.mockMaintenanceData.nextMaintenance||"Not scheduled"),s(9),C(r.mockMaintenanceData.interval),s(),m("ngIf",r.maintenanceLoading),s(),m("ngIf",!r.maintenanceLoading&&r.maintenanceSchedules.length>0),s(),m("ngIf",!r.maintenanceLoading&&r.maintenanceSchedules.length===0),s(16),k(" ",Re(497,150,r.mockFinancialData.purchaseCost,"USD","symbol","1.2-2")," "),s(6),C(Ne(503,155,r.asset.purchase_date,"MMM d, y")),s(10),k(" ",Re(513,158,r.mockFinancialData.currentValue,"USD","symbol","1.2-2")," "),s(6),C(Re(519,163,r.mockFinancialData.currentValue*.95,"USD","symbol","1.2-2")),s(10),C(r.mockFinancialData.depreciationMethod),s(5),k("",r.mockFinancialData.usefulLife," years"),s(5),k("",r.calculateDepreciationRate(),"%"),s(9),k(" ",Re(548,168,r.calculateTotalCostOfOwnership(),"USD","symbol","1.2-2")," "),s(5),M("text-green-600",r.calculateROI()>0)("text-red-600",r.calculateROI()<0),s(),k(" ",r.calculateROI(),"% "),s(9),z(r.getWarrantyStatusClass(r.asset.warranty)),s(),k(" ",r.getWarrantyStatus(r.asset.warranty)," "),s(),m("ngIf",r.asset.warranty),s(5),C(r.asset.insurance_value||"Not specified")}}function ks(a,n){if(a&1){let e=E();t(0,"div",311)(1,"div",312)(2,"div",177)(3,"h3",70),o(4,"Add Maintenance Schedule"),i(),t(5,"button",313),v("click",function(){_(e);let l=c();return h(l.closeMaintenanceModals())}),g(),t(6,"svg",314),p(7,"path",315),i()()(),x(),t(8,"form",316),v("ngSubmit",function(){_(e);let l=c();return h(l.saveMaintenanceSchedule())}),t(9,"div",112)(10,"div")(11,"label",317),o(12,"Schedule Type"),i(),t(13,"select",318)(14,"option",319),o(15,"Select type"),i(),t(16,"option",320),o(17,"Preventive Maintenance"),i(),t(18,"option",321),o(19,"Inspection"),i(),t(20,"option",322),o(21,"Calibration"),i(),t(22,"option",323),o(23,"Cleaning"),i()()(),t(24,"div")(25,"label",317),o(26,"Next Due Date"),i(),p(27,"input",324,1),i(),t(29,"div")(30,"label",317),o(31,"Last Done Date"),i(),p(32,"input",325,1),i(),t(34,"div")(35,"label",317),o(36,"Frequency"),i(),t(37,"select",326)(38,"option",319),o(39,"Select frequency"),i(),t(40,"option",327),o(41,"Weekly"),i(),t(42,"option",328),o(43,"Monthly"),i(),t(44,"option",329),o(45,"Quarterly"),i(),t(46,"option",330),o(47,"Semi-Annual"),i(),t(48,"option",331),o(49,"Annual"),i()()(),t(50,"div")(51,"label",317),o(52,"Notes"),i(),p(53,"textarea",332),i()(),t(54,"div",333)(55,"button",334),v("click",function(){_(e);let l=c();return h(l.closeMaintenanceModals())}),o(56," Cancel "),i(),t(57,"button",335),o(58," Save Schedule "),i()()()()()}if(a&2){let e=c();s(8),m("formGroup",e.maintenanceForm),s(49),m("disabled",e.maintenanceForm.invalid)}}function Ms(a,n){if(a&1){let e=E();t(0,"div",311)(1,"div",312)(2,"div",177)(3,"h3",70),o(4,"Edit Maintenance Schedule"),i(),t(5,"button",313),v("click",function(){_(e);let l=c();return h(l.closeMaintenanceModals())}),g(),t(6,"svg",314),p(7,"path",315),i()()(),x(),t(8,"form",316),v("ngSubmit",function(){_(e);let l=c();return h(l.saveMaintenanceSchedule())}),t(9,"div",112)(10,"div")(11,"label",317),o(12,"Schedule Type"),i(),t(13,"select",318)(14,"option",319),o(15,"Select type"),i(),t(16,"option",320),o(17,"Preventive Maintenance"),i(),t(18,"option",321),o(19,"Inspection"),i(),t(20,"option",322),o(21,"Calibration"),i(),t(22,"option",323),o(23,"Cleaning"),i()()(),t(24,"div")(25,"label",317),o(26,"Next Due Date"),i(),p(27,"input",324,1),i(),t(29,"div")(30,"label",317),o(31,"Last Done Date"),i(),p(32,"input",325,1),i(),t(34,"div")(35,"label",317),o(36,"Frequency"),i(),t(37,"select",326)(38,"option",319),o(39,"Select frequency"),i(),t(40,"option",327),o(41,"Weekly"),i(),t(42,"option",328),o(43,"Monthly"),i(),t(44,"option",329),o(45,"Quarterly"),i(),t(46,"option",330),o(47,"Semi-Annual"),i(),t(48,"option",331),o(49,"Annual"),i()()(),t(50,"div")(51,"label",317),o(52,"Status"),i(),t(53,"select",336)(54,"option",337),o(55,"Scheduled"),i(),t(56,"option",338),o(57,"In Progress"),i(),t(58,"option",339),o(59,"Completed"),i(),t(60,"option",340),o(61,"Overdue"),i()()(),t(62,"div")(63,"label",317),o(64,"Notes"),i(),p(65,"textarea",332),i()(),t(66,"div",333)(67,"button",334),v("click",function(){_(e);let l=c();return h(l.closeMaintenanceModals())}),o(68," Cancel "),i(),t(69,"button",335),o(70," Update Schedule "),i()()()()()}if(a&2){let e=c();s(8),m("formGroup",e.maintenanceForm),s(61),m("disabled",e.maintenanceForm.invalid)}}function As(a,n){a&1&&(t(0,"div",369)(1,"div",39)(2,"div",370),g(),t(3,"svg",371),p(4,"circle",42)(5,"path",43),i()(),x(),t(6,"p",58),o(7,"Loading activity history..."),i()()())}function Ts(a,n){if(a&1){let e=E();t(0,"div",372)(1,"div",373),o(2),i(),t(3,"button",50),v("click",function(){_(e);let l=c(2);return h(l.loadFullActivityHistory())}),o(4," Try Again "),i()()}if(a&2){let e=c(2);s(2),C(e.activityHistoryError)}}function Is(a,n){if(a&1&&(t(0,"div",383)(1,"div",384),o(2,"Changes:"),i(),t(3,"div",219),o(4),i()()),a&2){let e=c().$implicit,r=c(3);s(4),k(" ",r.formatActivityBeforeAfter(e.before,e.after)," ")}}function Ds(a,n){if(a&1&&(t(0,"div",385)(1,"strong"),o(2,"By:"),i(),o(3),i()),a&2){let e=c().$implicit,r=c(3);s(3),k(" ",r.getUserDisplayName(e.user)," ")}}function Vs(a,n){if(a&1&&(t(0,"div",376)(1,"div",377),g(),t(2,"svg",18),p(3,"path",56),i()(),x(),t(4,"div",266)(5,"div",297)(6,"h4",378),o(7),i(),t(8,"span",379),o(9),i()(),t(10,"p",380),o(11),i(),b(12,Is,5,1,"div",381)(13,Ds,4,1,"div",382),i()()),a&2){let e=n.$implicit,r=c(3);s(),m("ngClass",r.getActivityColor(e.action)),s(2),Pe("d",r.getActivityIcon(e.action)),s(4),C(e.action),s(2),C(e.time_ago),s(2),C(e.comment||"No comment"),s(),m("ngIf",r.formatActivityBeforeAfter(e.before,e.after)),s(),m("ngIf",e.user)}}function Ps(a,n){a&1&&(t(0,"div",372),g(),t(1,"svg",218),p(2,"path",92),i(),x(),t(3,"h3",44),o(4,"No Activity Found"),i(),t(5,"p",219),o(6,"No activity matches your current filters."),i()())}function Ls(a,n){if(a&1&&(t(0,"div",374),b(1,Vs,14,7,"div",375)(2,Ps,7,0,"div",364),i()),a&2){let e=c(2);s(),m("ngForOf",e.fullActivityHistory),s(),m("ngIf",e.fullActivityHistory.length===0)}}function Fs(a,n){if(a&1){let e=E();t(0,"button",389),v("click",function(){_(e);let l=c(3);return h(l.onActivityHistoryPageChange(l.activityHistoryPagination.current_page-1))}),o(1," Previous "),i()}}function Os(a,n){if(a&1){let e=E();t(0,"button",389),v("click",function(){_(e);let l=c(3);return h(l.onActivityHistoryPageChange(l.activityHistoryPagination.current_page+1))}),o(1," Next "),i()}}function Hs(a,n){if(a&1&&(t(0,"div",386)(1,"div",148),o(2),i(),t(3,"div",387),b(4,Fs,2,0,"button",388)(5,Os,2,0,"button",388),i()()),a&2){let e=c(2);s(2),Rn(" Showing ",e.activityHistoryPagination.from||0," to ",e.activityHistoryPagination.to||0," of ",e.activityHistoryPagination.total||0," activities "),s(2),m("ngIf",e.activityHistoryPagination.prev_page_url),s(),m("ngIf",e.activityHistoryPagination.next_page_url)}}function js(a,n){if(a&1){let e=E();t(0,"div",341)(1,"div",342)(2,"div",343)(3,"div",12),g(),t(4,"svg",344),p(5,"path",92),i(),x(),t(6,"h3",345),o(7,"Full Activity History"),i()(),t(8,"button",313),v("click",function(){_(e);let l=c();return h(l.closeActivityHistoryModal())}),g(),t(9,"svg",314),p(10,"path",315),i()()(),x(),t(11,"div",346)(12,"div",347)(13,"div",348)(14,"div",266)(15,"input",349),v("input",function(l){_(e);let d=c();return h(d.onActivityHistorySearch(l.target.value))}),i()(),t(16,"button",350),v("click",function(){_(e);let l=c();return h(l.clearActivityHistoryFilters())}),o(17," Clear Filters "),i()(),t(18,"div",351)(19,"div")(20,"label",352),o(21,"Action Type"),i(),t(22,"select",353),v("change",function(l){_(e);let d=c();return h(d.onActivityHistoryFilter("action",l.target.value))}),t(23,"option",319),o(24,"All Actions"),i(),t(25,"option",354),o(26,"Created"),i(),t(27,"option",355),o(28,"Updated"),i(),t(29,"option",356),o(30,"Deleted"),i(),t(31,"option",357),o(32,"Transferred"),i(),t(33,"option",358),o(34,"Maintenance"),i(),t(35,"option",359),o(36,"Imported"),i()()(),t(37,"div")(38,"label",352),o(39,"Date From"),i(),t(40,"input",360),v("change",function(l){_(e);let d=c();return h(d.onActivityHistoryFilter("date_from",l.target.value))}),i()(),t(41,"div")(42,"label",352),o(43,"Date To"),i(),t(44,"input",360),v("change",function(l){_(e);let d=c();return h(d.onActivityHistoryFilter("date_to",l.target.value))}),i()(),t(45,"div")(46,"label",352),o(47,"Sort By"),i(),t(48,"select",353),v("change",function(l){_(e);let d=c();return h(d.onActivityHistorySort("created_at",l.target.value))}),t(49,"option",361),o(50,"Newest First"),i(),t(51,"option",362),o(52,"Oldest First"),i()()()()(),b(53,As,8,0,"div",363)(54,Ts,5,1,"div",364)(55,Ls,3,2,"div",365)(56,Hs,6,5,"div",366),i(),t(57,"div",367)(58,"div",148),o(59),i(),t(60,"button",368),v("click",function(){_(e);let l=c();return h(l.closeActivityHistoryModal())}),o(61," Close "),i()()()()}if(a&2){let e=c();s(53),m("ngIf",e.activityHistoryLoading),s(),m("ngIf",e.activityHistoryError&&!e.activityHistoryLoading),s(),m("ngIf",!e.activityHistoryLoading&&!e.activityHistoryError),s(),m("ngIf",e.activityHistoryPagination&&e.fullActivityHistory.length>0),s(3),k(" Total Activities: ",(e.activityHistoryPagination==null?null:e.activityHistoryPagination.total)||e.fullActivityHistory.length," ")}}var ct=class a{constructor(n,e,r,l,d,y){this.route=n;this.router=e;this.assetService=r;this.angularLocation=l;this.pdfExportService=d;this.fb=y;this.maintenanceForm=this.fb.group({schedule_type:["",Se.required],next_due:[""],last_done:[""],frequency:[""],notes:[""],status:["Scheduled"]}),this.activities=[],this.fullActivityHistory=[]}destroy$=new nt;dateInputs;asset=null;loading=!0;error="";currentImageIndex=0;selectedImageUrl=null;descriptionExpanded=!1;showActionsDropdown=!1;showTransferModal=!1;showActivityHistoryModal=!1;maintenanceSchedules=[];maintenanceLoading=!1;showAddMaintenanceModal=!1;showEditMaintenanceModal=!1;selectedSchedule=null;maintenanceForm;flatpickrInstances=[];healthMetrics={lastUpdated:new Date,performanceTrend:[{month:"Jan",value:82},{month:"Feb",value:84},{month:"Mar",value:88},{month:"Apr",value:85}]};mockFinancialData={purchaseCost:0,currentValue:0,depreciationMethod:"Straight Line",usefulLife:10,originalValue:0};mockMaintenanceData={status:"Current",lastMaintenance:null,nextMaintenance:null,interval:"Every 6 months"};activities=[];fullActivityHistory=[];activityLoading=!1;activityHistoryLoading=!1;activityError="";activityHistoryError="";activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""};activityHistoryPagination=null;qrCodeDataUrl=null;qrCodeLoading=!1;barcodeDataUrl=null;barcodeLoading=!1;relatedAssets=[];relatedAssetsLoading=!1;relatedAssetsError="";selectedRelatedFilter="all";showRelatedFilterDropdown=!1;relatedAssetsParams={type:"all",limit:10};ngOnInit(){this.route.params.pipe(G(this.destroy$)).subscribe(n=>{let e=n.id;e&&this.loadAsset(e)})}ngAfterViewInit(){this.initializeDatePickers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(n=>{n&&n.destroy()})}loadAsset(n){this.loading=!0,this.error="",this.assetService.getAsset(n).pipe(G(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.updateMockData(),this.loadMaintenanceSchedules(),this.loadActivityHistory(),this.generateQRCode(),!this.asset.barcode_url&&this.asset.asset_id&&this.generateBarcode(),this.loadRelatedAssets()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}loadMaintenanceSchedules(){this.asset&&(this.maintenanceLoading=!0,this.assetService.listMaintenanceSchedules(this.asset.id).pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&(this.maintenanceSchedules=n.data||[]),this.maintenanceLoading=!1},error:n=>{console.error("Error loading maintenance schedules:",n),this.maintenanceLoading=!1}}))}updateMockData(){this.asset&&(this.mockFinancialData={purchaseCost:this.asset.purchase_price||0,currentValue:this.asset.current_value||this.asset.purchase_price||0,depreciationMethod:"Straight Line",usefulLife:this.asset.depreciation||10,originalValue:this.asset.purchase_price||0},this.healthMetrics.lastUpdated=new Date,this.mockMaintenanceData={status:this.asset.status||"Active",lastMaintenance:this.asset.last_maintenance_date||null,nextMaintenance:this.asset.next_maintenance_date||null,interval:this.asset.maintenance_interval||"Every 6 months"},this.asset.images&&this.asset.images.length>0&&(this.selectedImageUrl=this.asset.images[0].image_url,this.currentImageIndex=0))}goBack(){this.angularLocation.back()}editAsset(){this.asset&&this.router.navigate(["/assets",this.asset.id,"edit"])}exportAsset(){this.asset&&this.pdfExportService.exportSingleAssetToPdf(this.asset)}printAsset(){window.print()}getStatusColor(n){return{Active:"green",Maintenance:"orange",Inactive:"gray",Retired:"red"}[n]||"gray"}getAssetTypeIcon(){if(!this.asset?.type)return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";let n={fixed:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4","semi-fixed":"M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4a2 2 0 001-1.73z",mobile:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",fleet:"M3 13l2-5a2 2 0 012-2h10a2 2 0 012 2l2 5M5 13v6a2 2 0 002 2h10a2 2 0 002-2v-6M5 13h14"};return n[this.asset.type]||n.fixed}generateSmartDescription(){console.log("Generate smart description")}analyzeAssetImage(){console.log("Analyze asset image")}addMaintenanceSchedule(){this.showAddMaintenanceModal=!0,this.maintenanceForm.reset({schedule_type:"",next_due:"",last_done:"",frequency:"",notes:"",status:"Scheduled"}),setTimeout(()=>{this.initializeDatePickers()},100)}editMaintenanceSchedule(n){this.selectedSchedule=n,this.showEditMaintenanceModal=!0,this.maintenanceForm.patchValue({schedule_type:n.schedule_type,next_due:n.next_due,last_done:n.last_done,frequency:n.frequency,notes:n.notes,status:n.status}),setTimeout(()=>{this.initializeDatePickers()},100)}deleteMaintenanceSchedule(n){confirm("Are you sure you want to delete this maintenance schedule?")&&this.assetService.deleteMaintenanceSchedule(this.asset.id,n.id).pipe(G(this.destroy$)).subscribe({next:e=>{e.success&&this.loadMaintenanceSchedules()},error:e=>{console.error("Error deleting maintenance schedule:",e)}})}saveMaintenanceSchedule(){if(this.maintenanceForm.valid&&this.asset){let n=this.maintenanceForm.value;this.selectedSchedule?this.assetService.updateMaintenanceSchedule(this.asset.id,this.selectedSchedule.id,n).pipe(G(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{console.error("Error updating maintenance schedule:",e)}}):this.assetService.addMaintenanceSchedule(this.asset.id,n).pipe(G(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadMaintenanceSchedules(),this.closeMaintenanceModals())},error:e=>{console.error("Error adding maintenance schedule:",e)}})}}closeMaintenanceModals(){this.showAddMaintenanceModal=!1,this.showEditMaintenanceModal=!1,this.selectedSchedule=null,this.maintenanceForm.reset(),this.flatpickrInstances.forEach(n=>{n&&n.destroy()}),this.flatpickrInstances=[]}initializeDatePickers(){this.flatpickrInstances.forEach(n=>{n&&n.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((n,e)=>{if(n?.nativeElement){let r=$e(n.nativeElement,{dateFormat:"Y-m-d",allowInput:!0,clickOpens:!0,onChange:(l,d)=>{let y=n.nativeElement.getAttribute("formControlName");y&&this.maintenanceForm.get(y)&&this.maintenanceForm.get(y).setValue(d)}});this.flatpickrInstances.push(r)}})},50)}getScheduleStatusColor(n){return{Scheduled:"blue",Overdue:"red",Completed:"green","In Progress":"yellow"}[n]||"gray"}formatDate(n){return n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set"}getAssetTypeName(n){return n?{1:"Fixed Asset",2:"Semi-Fixed Asset",3:"Mobile Asset",4:"Fleet Asset",5:"IT Equipment"}[n.toString()]||`Type ${n}`:"Standard Asset"}navigateToPrevious(){console.log("Navigate to previous asset")}navigateToNext(){console.log("Navigate to next asset")}loadRelatedAssets(){this.asset?.id&&(this.relatedAssetsLoading=!0,this.relatedAssetsError="",this.assetService.getRelatedAssets(this.asset.id,this.relatedAssetsParams).pipe(G(this.destroy$)).subscribe({next:n=>{n.success?this.relatedAssets=n.data.related_assets||[]:this.relatedAssetsError=n.message||"Failed to load related assets",this.relatedAssetsLoading=!1},error:n=>{this.relatedAssetsError=n.error?.message||"An error occurred while loading related assets",this.relatedAssetsLoading=!1}}))}onRelatedFilterChange(n){this.selectedRelatedFilter=n,this.relatedAssetsParams.type=n,this.loadRelatedAssets()}getRelatedFilterDisplayName(n){return{all:"All Related",category:"Same Category",location:"Same Location",department:"Same Department",manufacturer:"Same Manufacturer",parent:"Same Parent",children:"Child Assets",siblings:"Sibling Assets",similar:"Similar Assets"}[n]||n}getRelatedAssetStatusColor(n){if(n?.color)return`bg-${this.getColorFromHex(n.color)}-100 text-${this.getColorFromHex(n.color)}-700`;let e=n?.name||n;return{Active:"bg-green-100 text-green-700",Inactive:"bg-gray-100 text-gray-700",Maintenance:"bg-orange-100 text-orange-700",Retired:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"}getColorFromHex(n){return{"#10B981":"green","#EF4444":"red","#F59E0B":"yellow","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange","#6B7280":"gray"}[n]||"gray"}navigateToRelatedAsset(n){this.router.navigate(["/assets",n])}loadActivityHistory(){if(!this.asset?.id)return;this.activityLoading=!0,this.activityError="";let n={page:1,per_page:5,sort_by:"created_at",sort_dir:"desc"};this.assetService.getActivityHistory(this.asset.id,n).pipe(G(this.destroy$)).subscribe({next:e=>{e.success?this.activities=e.data.data||[]:this.activityError=e.message||"Failed to load activity history",this.activityLoading=!1},error:e=>{this.activityError=e.error?.message||"An error occurred while loading activity history",this.activityLoading=!1}})}loadPerformanceMetrics(){console.log("Load performance metrics")}refreshHealthMetrics(){this.loadPerformanceMetrics(),console.log("Refreshing health metrics")}getHealthScoreColor(n){return n?n>=80?"text-green-600":n>=60?"text-yellow-600":n>=40?"text-orange-600":"text-red-600":"text-gray-400"}getHealthStatusColor(n){return n?n>=80?"text-green-600":n>=60?"text-yellow-600":n>=40?"text-orange-600":"text-red-600":"text-gray-600"}getHealthStatusText(n){return n?n>=80?"Excellent":n>=60?"Good":n>=40?"Fair":"Poor":"Unknown"}getAssetAge(){if(!this.asset?.purchase_date)return"Unknown";let n=new Date(this.asset.purchase_date),r=Math.abs(new Date().getTime()-n.getTime()),l=Math.ceil(r/(1e3*60*60*24));if(l<365)return`${Math.floor(l/30)} months`;{let d=Math.floor(l/365);return`${d} year${d>1?"s":""}`}}getUtilizationRate(){let n=this.asset?.health_score||0;return n>=80?95:n>=60?85:n>=40?70:50}getUptimePercentage(){let n=this.asset?.health_score||0;return n>=80?99.5:n>=60?98:n>=40?95:90}getMaintenanceFrequency(){let n=this.asset?.health_score||0;return n>=80?"Low":n>=60?"Medium":n>=40?"High":"Very High"}getMaintenanceFrequencyPercentage(){let n=this.asset?.health_score||0;return n>=80?20:n>=60?40:n>=40?60:80}getCostEfficiency(){let n=parseFloat(this.asset?.purchase_price)||0,e=this.calculateCurrentValue();if(n===0)return 85;let r=e/n*100;return Math.min(Math.max(r,0),100)}formatCurrency(n){return n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})}calculateCurrentValue(){let n=parseFloat(this.asset?.purchase_price)||0,e=this.calculateDepreciation();return Math.max(n-e,0)}getROIColor(n){return n>=0?"text-green-600":"text-red-600"}getPerformanceTrend(){let n=this.asset?.health_score||0;return n>=80?"Improving":n>=60?"Stable":n>=40?"Declining":"Critical"}getCostEfficiencyTrend(){let n=this.getCostEfficiency();return n>=80?"Optimal":n>=60?"Good":n>=40?"Fair":"Poor"}getMaintenanceTrend(){let n=this.asset?.health_score||0;return n>=80?"Low":n>=60?"Stable":n>=40?"Increasing":"High"}getTrendColor(n){switch(n.toLowerCase()){case"improving":case"optimal":case"low":return"text-green-600";case"stable":case"good":return"text-blue-600";case"declining":case"fair":case"increasing":return"text-yellow-600";case"critical":case"poor":case"high":return"text-red-600";default:return"text-gray-600"}}getTrendIcon(n){switch(n.toLowerCase()){case"improving":case"optimal":return"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6";case"declining":case"critical":return"M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6";case"stable":case"good":case"fair":case"low":case"increasing":case"high":default:return"M20 12H4"}}getFinancialAlerts(){let n=[],e=this.asset?.health_score||0,r=this.calculateCurrentValue(),l=parseFloat(this.asset?.purchase_price)||0;return e<40&&n.push({message:"Asset health is critical - consider replacement",class:"bg-red-50 text-red-700"}),r<l*.3&&n.push({message:"Asset value has depreciated significantly",class:"bg-orange-50 text-orange-700"}),(this.asset?.warranty==="None"||!this.asset?.warranty)&&n.push({message:"No warranty coverage - maintenance costs may increase",class:"bg-yellow-50 text-yellow-700"}),n}getPredictiveAlerts(){let n=[],e=this.asset?.health_score||0,r=this.getAssetAge();return e<60&&n.push({title:"Maintenance Alert",message:"Schedule preventive maintenance within 30 days",class:"bg-orange-50 text-orange-700"}),e<40&&n.push({title:"Critical Alert",message:"Asset requires immediate attention",class:"bg-red-50 text-red-700"}),r.includes("year")&&parseInt(r)>5&&n.push({title:"Age Alert",message:"Asset is aging - consider replacement planning",class:"bg-blue-50 text-blue-700"}),n}uploadDocument(){console.log("Upload document")}downloadDocument(n){console.log("Download document:",n)}compareWithSimilar(){console.log("Compare with similar assets")}scrollToSection(n){let e=document.getElementById(n);e&&e.scrollIntoView({behavior:"smooth"})}exportFinancialData(){console.log("Export financial data")}exportMaintenanceHistory(){console.log("Export maintenance history")}generateMaintenanceRecommendations(){console.log("Generate maintenance recommendations")}addMaintenanceCost(){console.log("Add maintenance cost")}viewCostHistory(){console.log("View cost history")}getWarrantyStatus(n){if(!n)return"No warranty";let e=new Date,r=new Date(n);if(r<e)return"Expired";{let l=Math.ceil((r.getTime()-e.getTime())/864e5);return l<=30?`Expires in ${l} days`:"Active"}}getWarrantyStatusClass(n){let e=this.getWarrantyStatus(n);return e==="Expired"?"text-red-600 font-medium":e.includes("Expires in")?"text-orange-600 font-medium":e==="Active"?"text-green-600 font-medium":"text-gray-500"}selectImage(n){this.asset.images&&n>=0&&n<this.asset.images.length&&(this.currentImageIndex=n,this.selectedImageUrl=this.asset.images[n].image_url)}previousImage(){if(this.asset.images&&this.asset.images.length>1){let n=this.currentImageIndex>0?this.currentImageIndex-1:this.asset.images.length-1;this.selectImage(n)}}nextImage(){if(this.asset.images&&this.asset.images.length>1){let n=this.currentImageIndex<this.asset.images.length-1?this.currentImageIndex+1:0;this.selectImage(n)}}copyAssetId(){let n=this.asset?.asset_id||this.asset?.id;n&&navigator.clipboard.writeText(n.toString()).then(()=>{console.log("Asset ID copied to clipboard")}).catch(e=>{console.error("Failed to copy asset ID:",e)})}copySerialNumber(){this.asset?.serial_number&&navigator.clipboard.writeText(this.asset.serial_number).then(()=>{console.log("Serial number copied to clipboard")}).catch(n=>{console.error("Failed to copy serial number:",n)})}calculateDepreciation(){if(!this.asset?.purchase_price)return 0;let n=this.asset.current_value||this.asset.purchase_price;return this.asset.purchase_price-n}calculateDepreciationRate(){let n=this.asset?.depreciation||10;return Math.round(1/n*100)}getMaxDepreciationValue(){return this.asset?.purchase_price||1e4}getDepreciationPath(){let n=this.getMaxDepreciationValue(),e=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,r=new Date,l=10,d=new Date(e.getTime()+l*365.25*24*60*60*1e3),y=[],P=(d.getTime()-e.getTime())/(1e3*60*60*24);for(let L=0;L<=12;L++){let J=P*L/12,B=(new Date(e.getTime()+J*24*60*60*1e3).getTime()-e.getTime())/(1e3*60*60*24*365.25),re=n/l,A=Math.min(re*B,n),Ke=Math.max(0,n-A),N=L/12*100,De=100-Ke/n*100;y.push(`${N},${De}`)}return`M ${y.join(" L ")}`}getCurrentPeriodX(){if(!this.asset?.purchase_date)return 0;let n=new Date(this.asset.purchase_date),e=new Date,r=10,d=(new Date(n.getTime()+r*365.25*24*60*60*1e3).getTime()-n.getTime())/(1e3*60*60*24),y=(e.getTime()-n.getTime())/(1e3*60*60*24);return Math.min(100,Math.max(0,y/d*100))}getCurrentPeriodY(){let n=this.calculateCurrentValue(),e=this.getMaxDepreciationValue();return 100-n/e*100}getDepreciationDates(){let n=this.asset?.purchase_date?new Date(this.asset.purchase_date):new Date,e=10,r=new Date(n.getTime()+e*365.25*24*60*60*1e3),l=[];for(let d=0;d<=12;d++){let y=(r.getTime()-n.getTime())/864e5*d/12;l.push(new Date(n.getTime()+y*24*60*60*1e3))}return l}calculateAnnualDepreciation(){return this.getMaxDepreciationValue()/10}calculateRemainingYears(){if(!this.asset?.purchase_date)return 10;let n=new Date(this.asset.purchase_date),e=new Date,r=10,l=(e.getTime()-n.getTime())/(1e3*60*60*24*365.25);return Math.max(0,r-l)}calculateTotalCostOfOwnership(){let n=this.asset?.purchase_price||0,e=this.asset?.total_maintenance_cost||0,r=this.asset?.operating_cost||0;return n+e+r}calculateROI(){let n=this.calculateTotalCostOfOwnership(),e=this.asset?.current_value||this.asset?.purchase_price||0;return n===0?0:Math.round((e-n)/n*100)}createWorkOrder(){console.log("Create work order for asset:",this.asset?.id)}transferAsset(){this.showTransferModal=!0}onTransferComplete(n){console.log("Transfer completed:",n),this.asset?.id&&this.loadAsset(this.asset.id.toString())}onTransferModalClose(){this.showTransferModal=!1}duplicateAsset(){this.asset&&this.router.navigate(["/assets/create"],{queryParams:{duplicate:!0,sourceId:this.asset.id}})}onImageError(n){console.warn("Asset image failed to load:",n.target.src),n.target.onerror=null,n.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onCategoryIconError(n,e){e&&(e.iconError=!0)}downloadQRCode(){if(this.qrCodeDataUrl){let n=document.createElement("a");n.href=this.qrCodeDataUrl,n.download=`asset-${this.asset.id}-qr.png`,n.click()}else if(this.asset?.qr_code_url){let n=document.createElement("a");n.href=this.asset.qr_code_url,n.download=`asset-${this.asset.id}-qr.png`,n.click()}else this.generateQRCode()}downloadBarcode(){if(this.asset?.barcode_url){let n=document.createElement("a");n.href=this.asset.barcode_url,n.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,n.click()}else if(this.barcodeDataUrl){let n=document.createElement("a");n.href=this.barcodeDataUrl,n.download=`asset-${this.asset.asset_id||this.asset.id}-barcode.png`,n.click()}else this.generateBarcode()}generateQRCode(){if(!this.asset)return;this.qrCodeLoading=!0;let n=`${window.location.origin}/public/asset/${this.asset.id}`;ai.toDataURL(n,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(e=>{this.qrCodeDataUrl=e,this.qrCodeLoading=!1}).catch(e=>{console.error("Error generating QR code:",e),this.qrCodeLoading=!1})}generateBarcode(){if(!this.asset?.asset_id)return;this.barcodeLoading=!0;let n=this.asset.asset_id,e=`https://quickchart.io/barcode?c=${encodeURIComponent(n)}&chs=300x100&chld=L%7C0&choe=UTF-8`;fetch(e).then(r=>r.blob()).then(r=>{let l=new FileReader;l.onloadend=()=>{this.barcodeDataUrl=l.result,this.barcodeLoading=!1},l.readAsDataURL(r)}).catch(r=>{console.error("Error generating barcode:",r),this.barcodeLoading=!1})}copyQRCodeUrl(){this.asset?.qr_code_url&&navigator.clipboard.writeText(this.asset.qr_code_url).then(()=>{console.log("QR code URL copied to clipboard")})}copyPublicUrl(){let n=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(n).then(()=>{console.log("Public URL copied to clipboard")})}get windowLocation(){return window.location.origin}showFullActivityHistory(){this.loadFullActivityHistory(),this.showActivityHistoryModal=!0}closeActivityHistoryModal(){this.showActivityHistoryModal=!1,this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.activityHistoryPagination=null}onActivityHistoryPageChange(n){this.activityHistoryParams.page=n,this.loadFullActivityHistory()}onActivityHistorySearch(n){this.activityHistoryParams.search=n,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistoryFilter(n,e){this.activityHistoryParams[n]=e,this.activityHistoryParams.page=1,this.loadFullActivityHistory()}onActivityHistorySort(n,e){this.activityHistoryParams.sort_by=n,this.activityHistoryParams.sort_dir=e,this.loadFullActivityHistory()}clearActivityHistoryFilters(){this.activityHistoryParams={page:1,per_page:15,sort_by:"created_at",sort_dir:"desc",search:"",action:"",user_id:"",date_from:"",date_to:""},this.loadFullActivityHistory()}loadFullActivityHistory(){this.asset?.id&&(this.activityHistoryLoading=!0,this.activityHistoryError="",this.assetService.getActivityHistory(this.asset.id,this.activityHistoryParams).pipe(G(this.destroy$)).subscribe({next:n=>{n.success?(this.fullActivityHistory=n.data.data||[],this.activityHistoryPagination=n.data):this.activityHistoryError=n.message||"Failed to load full activity history",this.activityHistoryLoading=!1},error:n=>{this.activityHistoryError=n.error?.message||"An error occurred while loading full activity history",this.activityHistoryLoading=!1}}))}viewFullImage(n){window.open(n,"_blank")}formatActivityBeforeAfter(n,e){if(!n&&!e)return"";let r=[];if(n&&e){let l=Object.keys(n),d=Object.keys(e);for(let y of d)if(n[y]!==e[y]){let P=this.getFieldDisplayName(y);P&&r.push(`${P}: ${this.formatFieldValue(n[y])} \u2192 ${this.formatFieldValue(e[y])}`)}}else if(e){let l=["name","type","status","location_id","department_id","purchase_price"];for(let d of l)if(e[d]!==void 0&&e[d]!==null){let y=this.getFieldDisplayName(d);y&&r.push(`${y}: ${this.formatFieldValue(e[d])}`)}}else if(n){let l=["name","type","status"];for(let d of l)if(n[d]!==void 0&&n[d]!==null){let y=this.getFieldDisplayName(d);y&&r.push(`${y}: ${this.formatFieldValue(n[d])} (deleted)`)}}return r.length>0?r.join(", "):""}getFieldDisplayName(n){return{name:"Asset Name",type:"Type",model:"Model",status:"Status",description:"Description",location_id:"Location",department_id:"Department",purchase_price:"Purchase Price",purchase_date:"Purchase Date",serial_number:"Serial Number",asset_id:"Asset ID",warranty:"Warranty",insurance:"Insurance",depreciation:"Depreciation",health_score:"Health Score",manufacturer:"Manufacturer",category_id:"Category"}[n]||n.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase())}formatFieldValue(n){return n==null?"N/A":typeof n=="boolean"?n?"Yes":"No":typeof n=="number"?n.toString().includes(".")?`$${n.toFixed(2)}`:n.toString():typeof n=="string"?n.match(/^\d{4}-\d{2}-\d{2}/)?new Date(n).toLocaleDateString():n:JSON.stringify(n)}getUserDisplayName(n){return n?n.name?n.name:n.email?n.email.split("@")[0]:"Unknown User":"System"}getActivityIcon(n){return{created:"M12 6v6m0 0v6m0-6h6m-6 0H6",updated:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",deleted:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",transferred:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",maintenance:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",imported:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"}[n]||"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}getActivityColor(n){return{created:"bg-green-100 text-green-600",updated:"bg-blue-100 text-blue-600",deleted:"bg-red-100 text-red-600",transferred:"bg-purple-100 text-purple-600",maintenance:"bg-orange-100 text-orange-600",imported:"bg-indigo-100 text-indigo-600"}[n]||"bg-gray-100 text-gray-600"}sharePublicUrl(){if(this.asset?.id){let n=`${window.location.origin}/public/asset/${this.asset.id}`;navigator.clipboard.writeText(n).then(()=>{console.log("Public URL copied to clipboard:",n),alert("Public URL copied to clipboard!")}).catch(e=>{console.error("Failed to copy URL:",e),alert("Failed to copy URL to clipboard")})}}static \u0275fac=function(e){return new(e||a)(K(rt),K(Te),K(Ce),K(It),K(Wt),K(Ut))};static \u0275cmp=ae({type:a,selectors:[["app-asset-view"]],viewQuery:function(e,r){if(e&1&&ke(co,5),e&2){let l;Me(l=Ae())&&(r.dateInputs=l)}},decls:34,vars:10,consts:[["noImages",""],["dateInput",""],[1,"min-h-screen","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],["aria-label","Breadcrumb",1,"flex"],[1,"flex","items-center","space-x-2"],["routerLink","/assets/list",1,"text-gray-500","hover:text-gray-700","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mx-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-gray-900","font-medium"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"relative",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","text-gray-600","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["cx","12","cy","5","r","2"],["cx","12","cy","12","r","2"],["cx","12","cy","19","r","2"],["class","absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",4,"ngIf"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",4,"ngIf"],["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[3,"closeModal","transferComplete","isOpen","asset"],[1,"absolute","right-0","mt-2","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","py-2","z-50"],[1,"w-full","flex","items-center","space-x-3","px-4","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"border-t","border-gray-100","my-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"px-6","py-6"],[1,"bg-white","rounded-lg","p-6","mb-6","shadow-sm","border","border-gray-200"],[1,"flex","items-start","justify-between","mb-4"],[1,"w-16","h-16","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-500"],[1,"text-right"],[1,"flex","items-center","space-x-2","mb-2"],[1,"flex","items-center","space-x-1","px-2","py-1","text-sm","font-mono","bg-gray-100","rounded","hover:bg-gray-200","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["class","flex items-center space-x-2",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","p-6","shadow-sm","border","border-gray-200"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-lg","font-semibold","text-gray-900"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-2","mb-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"space-y-6"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],[1,"text-gray-600","leading-relaxed"],["class","text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",3,"click",4,"ngIf"],[1,"w-8","h-8","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-gray-900","font-mono","text-lg"],["title","Copy Asset ID",1,"p-1","text-gray-400","hover:text-gray-600","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","text-blue-600 hover:underline cursor-pointer",3,"routerLink",4,"ngIf"],["class","text-gray-900",4,"ngIf"],[1,"text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","flex","flex-col","items-center"],[1,"w-32","h-32","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","QR Code","class","w-full h-full object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],["class","text-center",4,"ngIf"],["class","text-center text-gray-400",4,"ngIf"],[1,"mt-3","flex","space-x-2"],["class","text-sm text-blue-600 hover:text-blue-700 font-medium",3,"click",4,"ngIf"],["class","text-sm text-green-600 hover:text-green-700 font-medium",3,"click",4,"ngIf"],[1,"mt-2","text-xs","text-gray-500","text-center"],[1,"w-full","bg-white","rounded-lg","p-2","shadow-sm","border","border-gray-200","flex","items-center","justify-center"],["alt","Barcode","class","w-full h-20 object-contain",3,"src",4,"ngIf"],["class","flex items-center justify-center py-4",4,"ngIf"],["class","text-center py-4",4,"ngIf"],["class","text-center text-gray-400 py-4",4,"ngIf"],["class","mt-1 font-mono",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","mb-1"],["class","mt-6 pt-6 border-t border-gray-200",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"ml-auto","flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-green-50","rounded-lg","p-4"],[1,"text-2xl","font-bold","text-green-600"],[1,"bg-blue-50","rounded-lg","p-4"],[1,"text-2xl","font-bold","text-blue-600"],[1,"bg-purple-50","rounded-lg","p-4"],[1,"text-2xl","font-bold","text-purple-600"],[1,"text-sm","font-medium","text-gray-700"],[1,"relative","h-64","bg-white","border","border-gray-200","rounded-lg","p-4"],[1,"w-full","h-full","flex","items-end","justify-between","relative"],[1,"absolute","left-0","top-0","bottom-0","flex","flex-col","justify-between","text-xs","text-gray-500","pr-2"],[1,"flex-1","ml-8","relative"],[1,"absolute","inset-0","grid","grid-rows-4"],["class","border-b border-gray-100",4,"ngFor","ngForOf"],[1,"absolute","inset-0","flex","items-end","justify-around","px-4"],[1,"flex","flex-col","items-center","space-y-2"],[1,"w-8","bg-gray-200","rounded-t"],[1,"w-full","bg-gray-600","rounded-t"],[1,"text-xs","text-gray-600"],[1,"w-full","bg-green-600","rounded-t"],[1,"w-full","bg-blue-600","rounded-t"],[1,"w-full","bg-purple-600","rounded-t"],[1,"text-center","text-xs","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mt-4"],[1,"text-center","p-3","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mt-4"],[1,"text-center","p-3","bg-green-50","rounded-lg"],[1,"text-lg","font-semibold","text-green-600"],[1,"text-center","p-3","bg-orange-50","rounded-lg"],[1,"text-lg","font-semibold","text-orange-600"],[1,"text-center","p-3","bg-blue-50","rounded-lg"],[1,"text-lg","font-semibold"],[1,"text-center","p-3","bg-purple-50","rounded-lg"],[1,"text-lg","font-semibold","text-purple-600"],[1,"flex","items-center","justify-center","space-x-1","mt-1"],[1,"text-sm","font-medium"],["class","mt-4 space-y-3",4,"ngIf"],[1,"w-8","h-8","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-6"],["viewBox","0 0 100 100","preserveAspectRatio","none",1,"absolute","inset-0","w-full","h-full"],["id","dashed","patternUnits","userSpaceOnUse","width","4","height","4"],["d","M 0,4 l 4,-4 M -1,-1 l 2,2 M 3,5 l 2,-2","stroke","currentColor","stroke-width","1","fill","none"],["stroke","#3B82F6","stroke-width","2","fill","none","stroke-dasharray","4,4",1,"drop-shadow-sm"],["r","4","fill","#EF4444","stroke","white","stroke-width","2",1,"drop-shadow-md"],[1,"absolute","-bottom-6","left-0","right-0","flex","justify-between","text-xs","text-gray-500"],["class","transform -rotate-45 origin-left",4,"ngFor","ngForOf"],["class","flex items-center justify-center py-8",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-center","mt-6"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium",3,"click"],[1,"flex","items-center","justify-between","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"flex","items-center","space-x-2","px-3","py-1","text-sm","text-gray-600","hover:text-gray-800","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","space-y-3",4,"ngIf"],[1,"flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"grid","grid-cols-1","gap-4","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-green-600"],[1,"font-semibold","text-green-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],[1,"text-sm","text-blue-600"],[1,"font-semibold","text-blue-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],[1,"text-sm","text-purple-600"],[1,"font-semibold","text-purple-800"],["class","text-center py-6",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","font-medium","text-gray-700","mb-3"],[1,"space-y-2"],[1,"text-sm","text-gray-900"],[1,"bg-orange-50","rounded-lg","p-4"],[1,"flex","items-center","space-x-2","mt-1"],["class","text-xs text-gray-500",4,"ngIf"],[1,"mb-4"],[1,"relative","bg-gray-100","rounded-lg","overflow-hidden",2,"height","400px"],[1,"w-full","h-full","object-contain","bg-white","cursor-pointer",3,"click","error","src","alt"],["class","absolute left-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"click",4,"ngIf"],["class","absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",3,"click",4,"ngIf"],[1,"absolute","bottom-4","right-4","bg-black","bg-opacity-50","text-white","px-3","py-1","rounded-full","text-sm"],["class","grid grid-cols-6 gap-2",4,"ngIf"],[1,"absolute","left-2","top-1/2","transform","-translate-y-1/2","w-10","h-10","bg-black","bg-opacity-50","text-white","rounded-full","flex","items-center","justify-center","hover:bg-opacity-70","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","w-10","h-10","bg-black","bg-opacity-50","text-white","rounded-full","flex","items-center","justify-center","hover:bg-opacity-70","transition-all",3,"click"],[1,"grid","grid-cols-6","gap-2"],["class","relative aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer border-2 transition-all",3,"border-blue-500","border-gray-200","click",4,"ngFor","ngForOf"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","cursor-pointer","border-2","transition-all",3,"click"],[1,"w-full","h-full","object-cover",3,"error","src","alt"],[1,"text-center","py-12","bg-gray-50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto","mb-4"],[1,"text-gray-600"],[1,"text-blue-600","hover:text-blue-700","text-sm","font-medium","mt-2",3,"click"],[1,"w-5","h-5",3,"error","src","alt"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"text-blue-600","hover:underline","cursor-pointer",3,"routerLink"],["alt","QR Code",1,"w-full","h-full","object-contain",3,"src"],[1,"flex","items-center","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],["fill","currentColor","viewBox","0 0 24 24",1,"w-24","h-24","text-gray-400"],["d","M3 3h6v6H3V3zm2 2v2h2V5H5zm8-2h6v6h-6V3zm2 2v2h2V5h-2zM3 11h6v6H3v-6zm2 2v2h2v-2H5zm8 2h6v6h-6v-6zm2 2v2h2v-2h-2z"],[1,"text-xs","text-gray-500","mt-2","font-mono"],[1,"text-center","text-gray-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto"],[1,"text-xs","mt-2"],[1,"text-sm","text-blue-600","hover:text-blue-700","font-medium",3,"click"],[1,"text-sm","text-green-600","hover:text-green-700","font-medium",3,"click"],["alt","Barcode",1,"w-full","h-20","object-contain",3,"src"],[1,"flex","items-center","justify-center","py-4"],[1,"text-center","py-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","text-gray-400","mx-auto"],[1,"text-center","text-gray-400","py-4"],[1,"mt-1","font-mono"],[1,"text-gray-900","font-mono"],[1,"p-1","text-gray-400","hover:text-gray-600","transition-colors",3,"click"],[1,"mt-6","pt-6","border-t","border-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"text-sm","text-gray-900","font-medium"],[1,"border-b","border-gray-100"],[1,"mt-4","space-y-3"],[1,"text-sm","font-medium","text-gray-700","text-center"],["class","space-y-2",4,"ngIf"],["class","p-3 rounded-lg text-sm",3,"class",4,"ngFor","ngForOf"],[1,"p-3","rounded-lg","text-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-medium"],[1,"text-xs","opacity-90"],[1,"transform","-rotate-45","origin-left"],[1,"flex","items-center","justify-center","py-8"],[1,"inline-flex","items-center","justify-center","w-8","h-8","bg-blue-100","rounded-full","mb-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4","text-blue-600"],[1,"text-center","py-8"],[1,"text-red-600","text-sm","mb-2"],["class","flex items-start space-x-3",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-3"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"flex-1"],[1,"flex","items-center","justify-between","mb-1"],[1,"font-medium","text-gray-900","capitalize"],[1,"text-xs","text-gray-500"],["class","text-xs text-gray-500 bg-gray-50 p-2 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","bg-gray-50","p-2","rounded","border"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mx-auto","mb-4"],["class","w-full flex items-center px-4 py-2 text-left hover:bg-gray-50 transition-colors",3,"text-blue-600","bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-full","flex","items-center","px-4","py-2","text-left","hover:bg-gray-50","transition-colors",3,"click"],[1,"text-sm"],[1,"space-y-3"],["class","flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-lg","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["class","w-full h-full object-cover rounded-lg",3,"src","alt","error",4,"ngIf"],["class","w-6 h-6 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"font-medium","text-gray-900","truncate"],[1,"flex","items-center","space-x-2","mb-1"],[1,"text-gray-400"],[1,"text-xs","px-2","py-1","rounded-full","font-medium",3,"ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","flex-shrink-0"],[1,"w-full","h-full","object-cover","rounded-lg",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-center","py-6"],[1,"inline-flex","items-center","justify-center","w-6","h-6","bg-blue-100","rounded-full"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-3","h-3","text-blue-600"],["class","border border-gray-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-3"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-gray-900","text-sm"],[1,"flex","items-center","space-x-1"],[1,"p-1","text-gray-400","hover:text-blue-600","transition-colors",3,"click"],[1,"p-1","text-gray-400","hover:text-red-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"space-y-1","text-xs"],[1,"ml-1","text-gray-900"],["class","mt-2 text-xs text-gray-600",4,"ngIf"],[1,"mt-2","text-xs","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400","mx-auto","mb-2"],[1,"text-sm","font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-600","mb-3"],[1,"px-3","py-1","bg-blue-600","text-white","rounded","text-xs","hover:bg-blue-700","transition-colors",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-lg","max-w-md","w-full","p-6"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["formControlName","schedule_type",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value",""],["value","Preventive"],["value","Inspection"],["value","Calibration"],["value","Cleaning"],["type","text","formControlName","next_due","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","text","formControlName","last_done","placeholder","Select date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","frequency",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Weekly"],["value","Monthly"],["value","Quarterly"],["value","Semi-Annual"],["value","Annual"],["formControlName","notes","rows","3","placeholder","Additional notes...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"flex","items-center","justify-end","space-x-3","mt-6"],["type","button",1,"px-4","py-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","disabled:opacity-50","transition-colors",3,"disabled"],["formControlName","status",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","Scheduled"],["value","In Progress"],["value","Completed"],["value","Overdue"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-lg","max-w-4xl","w-full","max-h-[90vh]","flex","flex-col"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex-1","overflow-auto","p-6"],[1,"mb-6","space-y-4"],[1,"flex","space-x-4"],["type","text","placeholder","Search activities...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"input"],[1,"px-4","py-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","created"],["value","updated"],["value","deleted"],["value","transferred"],["value","maintenance"],["value","imported"],["type","date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value","desc"],["value","asc"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","space-y-4 max-h-[60vh] overflow-y-auto",4,"ngIf"],["class","mt-6 flex items-center justify-between",4,"ngIf"],[1,"flex","items-center","justify-between","p-6","border-t","border-gray-200","bg-gray-50"],[1,"px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","items-center","justify-center","py-12"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-6","h-6","text-blue-600"],[1,"text-center","py-12"],[1,"text-red-600","mb-4"],[1,"space-y-4","max-h-[60vh]","overflow-y-auto"],["class","flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-start","space-x-4","p-4","bg-gray-50","rounded-lg"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"font-semibold","text-gray-900","capitalize"],[1,"text-xs","text-gray-500","bg-white","px-2","py-1","rounded-full"],[1,"text-sm","text-gray-600","mb-2"],["class","text-xs text-gray-500 bg-white p-3 rounded border",4,"ngIf"],["class","text-xs text-gray-500 mt-2",4,"ngIf"],[1,"text-xs","text-gray-500","bg-white","p-3","rounded","border"],[1,"font-medium","mb-1"],[1,"text-xs","text-gray-500","mt-2"],[1,"mt-6","flex","items-center","justify-between"],[1,"flex","space-x-2"],["class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],[1,"px-3","py-1","text-sm","border","border-gray-300","rounded","hover:bg-gray-50","transition-colors",3,"click"]],template:function(e,r){e&1&&(t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"nav",6)(5,"ol",7)(6,"li")(7,"a",8),o(8,"Assets"),i()(),t(9,"li"),g(),t(10,"svg",9),p(11,"path",10),i()(),x(),t(12,"li",11),o(13),i()()()(),t(14,"div",12)(15,"button",13),v("click",function(){return r.editAsset()}),g(),t(16,"svg",14),p(17,"path",15),i(),x(),t(18,"span"),o(19,"Edit Asset"),i()(),t(20,"div",16),v("click",function(d){return d.stopPropagation()}),t(21,"button",17),v("click",function(){return r.showActionsDropdown=!r.showActionsDropdown}),g(),t(22,"svg",18),p(23,"circle",19)(24,"circle",20)(25,"circle",21),i()(),b(26,fo,27,0,"div",22),i()()()(),b(27,go,10,0,"div",23)(28,_o,11,1,"div",23)(29,Es,570,175,"div",24)(30,ks,59,2,"div",25)(31,Ms,71,2,"div",25)(32,js,62,5,"div",26),x(),t(33,"app-transfer-asset-modal",27),v("closeModal",function(){return r.onTransferModalClose()})("transferComplete",function(d){return r.onTransferComplete(d)}),i()()),e&2&&(s(13),C((r.asset==null?null:r.asset.name)||"Asset Details"),s(13),m("ngIf",r.showActionsDropdown),s(),m("ngIf",r.loading),s(),m("ngIf",r.error&&!r.loading),s(),m("ngIf",r.asset&&!r.loading),s(),m("ngIf",r.showAddMaintenanceModal),s(),m("ngIf",r.showEditMaintenanceModal),s(),m("ngIf",r.showActivityHistoryModal),s(),m("isOpen",r.showTransferModal)("asset",r.asset))},dependencies:[se,Dt,we,oe,Pt,Vt,zn,Le,Lt,$t,Ge,Yn,qn,le,Wn,de,Be,jt,Nt,dt],styles:[".asset-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.asset-image-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:.5rem;min-height:16rem;display:flex;align-items:center;justify-content:center}.info-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.health-score-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669);transition:width .3s ease-in-out}.chart-placeholder[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:.5rem}.chart-placeholder[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.ai-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.ai-button[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.ai-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.action-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;border-radius:.5rem;padding:.5rem 1rem;margin:-.5rem -1rem}.status-badge[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px}.section-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.section-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:1rem}.empty-state[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.lg\\:col-span-2[_ngcontent-%COMP%]{grid-column:span 1}.asset-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media print{.action-buttons[_ngcontent-%COMP%], .back-button[_ngcontent-%COMP%]{display:none}.asset-image-container[_ngcontent-%COMP%]{border:1px solid #000;background:#fff}}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.asset-view[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.asset-view[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}.value-display[_ngcontent-%COMP%]{font-variant-numeric:tabular-nums}.section-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:.75rem;margin-bottom:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ai-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#faf5ff,#f3e8ff);border:1px solid #e9d5ff}.financial-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1px solid #bbf7d0}.technical-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:1px solid #bfdbfe}"]})};var Ns=["fileInput"],Rs=["dateInput"],Bs=()=>({standalone:!0});function Gs(a,n){a&1&&(t(0,"div",14)(1,"div",15)(2,"div",16),g(),t(3,"svg",17),p(4,"circle",18)(5,"path",19),i()(),x(),t(6,"h3",20),o(7,"Loading Asset"),i(),t(8,"p",21),o(9,"Please wait while we fetch the asset details..."),i()()())}function zs(a,n){if(a&1){let e=E();t(0,"div",14)(1,"div",15)(2,"div",22),g(),t(3,"svg",23),p(4,"path",24),i()(),x(),t(5,"h3",20),o(6,"Error Loading Asset"),i(),t(7,"p",25),o(8),i(),t(9,"button",26),v("click",function(){_(e);let l=c();return h(l.goBack())}),o(10," Back to Assets "),i()()()}if(a&2){let e=c();s(8),C(e.error)}}function Us(a,n){if(a&1&&(t(0,"div",114),g(),t(1,"svg",115),p(2,"path",24),i(),o(3),i()),a&2){let e=c(2);s(3),k(" ",e.nameError," ")}}function $s(a,n){a&1&&(t(0,"span",92),o(1,"Select parent asset"),i())}function Ws(a,n){if(a&1&&(t(0,"span",116),o(1),i()),a&2){let e=c(2);s(),ie(" ",e.getSelectedParent().name," (",e.getSelectedParent().asset_id,") ")}}function Ys(a,n){if(a&1){let e=E();t(0,"button",120),v("click",function(){let l,d=_(e).$implicit,y=c(3);return(l=y.assetForm.get("parent_id"))==null||l.setValue(d.id),h(y.showParentDropdown=!1)}),t(1,"div",40)(2,"div",122),g(),t(3,"svg",123),p(4,"path",66),i()(),x(),t(5,"div")(6,"div",124),o(7),i(),t(8,"div",125),o(9),i()()()()}if(a&2){let e,r=n.$implicit,l=c(3);M("bg-blue-50",((e=l.assetForm.get("parent_id"))==null?null:e.value)===r.id),s(7),C(r.name),s(2),C(r.asset_id)}}function qs(a,n){if(a&1){let e=E();t(0,"div",117)(1,"div",118)(2,"div",119),o(3,"Select parent asset"),i(),t(4,"button",120),v("click",function(){let l;_(e);let d=c(2);return(l=d.assetForm.get("parent_id"))==null||l.setValue(null),h(d.showParentDropdown=!1)}),o(5," -- None -- "),i(),b(6,Ys,10,4,"button",121),i()()}if(a&2){let e,r=c(2);s(4),M("bg-blue-50",!((e=r.assetForm.get("parent_id"))!=null&&e.value)),s(2),m("ngForOf",r.possibleParents)}}function Qs(a,n){a&1&&(t(0,"span",92),o(1,"Select asset type"),i())}function Ks(a,n){if(a&1){let e=E();t(0,"img",129),v("error",function(l){_(e);let d=c(3);return h(d.onAssetTypeIconError(l,d.selectedAssetType))}),i()}if(a&2){let e=c(3);m("src",e.selectedAssetType.icon,X)("alt",e.selectedAssetType.name||e.selectedAssetType.label)}}function Js(a,n){if(a&1&&(g(),t(0,"svg",130),p(1,"path",131),i()),a&2){let e=c(3);W("color",e.selectedAssetType.color)}}function Zs(a,n){if(a&1&&(t(0,"div",40)(1,"div",126),b(2,Ks,1,2,"img",127)(3,Js,2,2,"svg",128),i(),t(4,"span",116),o(5),i()()),a&2){let e=c(2);s(),W("background-color",e.selectedAssetType.color+"20"),s(),m("ngIf",e.selectedAssetType.icon&&!e.selectedAssetType.iconError),s(),m("ngIf",!e.selectedAssetType.icon||e.selectedAssetType.iconError),s(2),C(e.selectedAssetType.label)}}function Xs(a,n){if(a&1){let e=E();t(0,"img",136),v("error",function(l){_(e);let d=c().$implicit,y=c(3);return h(y.onAssetTypeIconError(l,d))}),i()}if(a&2){let e=c().$implicit;m("src",e.icon,X)("alt",e.name||e.label)}}function el(a,n){a&1&&(g(),t(0,"svg",31),p(1,"path",131),i())}function tl(a,n){if(a&1){let e=E();t(0,"button",120),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.selectAssetType(l))}),t(1,"div",40)(2,"div",133),b(3,Xs,1,2,"img",134)(4,el,2,0,"svg",135),i(),t(5,"div")(6,"div",124),o(7),i(),t(8,"div",21),o(9),i()()()()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id)("text-blue-700",(r.selectedAssetType==null?null:r.selectedAssetType.id)===e.id),s(3),m("ngIf",e.icon&&!e.iconError),s(),m("ngIf",!e.icon||e.iconError),s(3),C(e.label||e.name),s(2),C(e.description)}}function nl(a,n){if(a&1&&(t(0,"div",117)(1,"div",118)(2,"div",119),o(3,"Select asset type"),i(),b(4,tl,10,8,"button",132),i()()),a&2){let e=c(2);s(4),m("ngForOf",e.assetTypes)}}function il(a,n){if(a&1&&(t(0,"div",114),g(),t(1,"svg",115),p(2,"path",24),i(),o(3),i()),a&2){let e=c(2);s(3),k(" ",e.assetTypeError," ")}}function rl(a,n){a&1&&(t(0,"span",92),o(1,"Select category"),i())}function al(a,n){if(a&1&&(t(0,"span",116),o(1),i()),a&2){let e=c(2);s(),C(e.selectedCategory.name)}}function ol(a,n){if(a&1){let e=E();t(0,"img",136),v("error",function(l){_(e);let d=c().$implicit,y=c(3);return h(y.onCategoryIconError(l,d))}),i()}if(a&2){let e=c().$implicit;m("src",e.icon,X)("alt",e.name)}}function sl(a,n){a&1&&(g(),t(0,"svg",123),p(1,"path",66),i())}function ll(a,n){if(a&1&&(t(0,"div",21),o(1),i()),a&2){let e=c().$implicit;s(),C(e.description)}}function dl(a,n){if(a&1){let e=E();t(0,"button",120),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.selectCategory(l))}),t(1,"div",40)(2,"div",122),b(3,ol,1,2,"img",134)(4,sl,2,0,"svg",137),i(),t(5,"div")(6,"div",124),o(7),i(),b(8,ll,2,1,"div",94),i()()()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("text-blue-700",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id),s(3),m("ngIf",e.icon),s(),m("ngIf",!e.icon||e.iconError),s(3),C(e.name),s(),m("ngIf",e.description)}}function cl(a,n){if(a&1&&(t(0,"div",117)(1,"div",118)(2,"div",119),o(3,"Select category"),i(),b(4,dl,9,8,"button",132),i()()),a&2){let e=c(2);s(4),m("ngForOf",e.categories)}}function ml(a,n){if(a&1&&(t(0,"div",114),g(),t(1,"svg",115),p(2,"path",24),i(),o(3),i()),a&2){let e=c(2);s(3),k(" ",e.categoryError," ")}}function pl(a,n){if(a&1&&(t(0,"div",114),g(),t(1,"svg",115),p(2,"path",24),i(),o(3),i()),a&2){let e=c(2);s(3),k(" ",e.serialNumberError," ")}}function ul(a,n){a&1&&(t(0,"span",92),o(1,"Select location"),i())}function fl(a,n){if(a&1&&(t(0,"div",40)(1,"div",138),g(),t(2,"svg",139),p(3,"path",88)(4,"path",89),i()(),x(),t(5,"span",116),o(6),i()()),a&2){let e=c(2);s(6),C(e.selectedLocation.name)}}function gl(a,n){if(a&1&&(t(0,"div",21),o(1),i()),a&2){let e=c().$implicit;s(),C(e.type.name)}}function _l(a,n){if(a&1){let e=E();t(0,"button",120),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.selectLocation(l))}),t(1,"div",40)(2,"div",140),g(),t(3,"svg",87),p(4,"path",88)(5,"path",89),i()(),x(),t(6,"div")(7,"div",124),o(8),i(),b(9,gl,2,1,"div",94),i()()()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id)("text-blue-700",(r.selectedLocation==null?null:r.selectedLocation.id)===e.id),s(8),C(e.name),s(),m("ngIf",e.type)}}function hl(a,n){if(a&1&&(t(0,"div",117)(1,"div",118)(2,"div",119),o(3,"Select location"),i(),b(4,_l,10,6,"button",132),i()()),a&2){let e=c(2);s(4),m("ngForOf",e.locations)}}function vl(a,n){a&1&&(t(0,"span",92),o(1,"Select department"),i())}function xl(a,n){if(a&1&&(t(0,"div",40)(1,"div",141),g(),t(2,"svg",142),p(3,"path",143),i()(),x(),t(4,"span",116),o(5),i()()),a&2){let e=c(2);s(5),C(e.selectedDepartment.name)}}function bl(a,n){if(a&1&&(t(0,"div",21),o(1),i()),a&2){let e=c().$implicit;s(),C(e.description)}}function wl(a,n){if(a&1&&(t(0,"div",146),o(1),i()),a&2){let e=c().$implicit;s(),k("Code: ",e.code,"")}}function yl(a,n){if(a&1){let e=E();t(0,"button",120),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.selectDepartment(l))}),t(1,"div",40)(2,"div",144),g(),t(3,"svg",65),p(4,"path",143),i()(),x(),t(5,"div")(6,"div",124),o(7),i(),b(8,bl,2,1,"div",94)(9,wl,2,1,"div",145),i()()()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id)("text-blue-700",(r.selectedDepartment==null?null:r.selectedDepartment.id)===e.id),s(7),C(e.name),s(),m("ngIf",e.description),s(),m("ngIf",e.code)}}function Cl(a,n){if(a&1&&(t(0,"div",117)(1,"div",118)(2,"div",119),o(3,"Select department"),i(),b(4,yl,10,7,"button",132),i()()),a&2){let e=c(2);s(4),m("ngForOf",e.departments)}}function Sl(a,n){if(a&1&&(t(0,"div",40),p(1,"div",147),t(2,"span",116),o(3),i()()),a&2){let e=c(2);s(),W("background-color",e.selectedStatus.hexColor||"#6B7280"),s(2),C(e.selectedStatus.label)}}function El(a,n){if(a&1){let e=E();t(0,"button",120),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.selectStatus(l))}),t(1,"div",40)(2,"div"),p(3,"div",147),i(),t(4,"div")(5,"div",124),o(6),i(),t(7,"div",21),o(8),i()()()()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value)("text-blue-700",(r.selectedStatus==null?null:r.selectedStatus.value)===e.value),s(2),z("w-6 h-6 bg-"+e.color+"-100 rounded-lg flex items-center justify-center"),s(),W("background-color",e.hexColor||"#6B7280"),s(3),C(e.label),s(2),C(e.description)}}function kl(a,n){if(a&1&&(t(0,"div",148)(1,"div",118)(2,"div",119),o(3,"Select status"),i(),b(4,El,9,10,"button",132),i()()),a&2){let e=c(2);s(4),m("ngForOf",e.statusOptions)}}function Ml(a,n){if(a&1){let e=E();t(0,"span"),o(1),t(2,"button",152),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.removeTag(l))}),g(),t(3,"svg",153),p(4,"path",154),i()()()}if(a&2){let e=n.$implicit;z("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-"+e.color+"-100 text-"+e.color+"-800"),s(),k(" ",e.name," ")}}function Al(a,n){if(a&1&&(t(0,"div",149)(1,"div",150),b(2,Ml,5,3,"span",151),i()()),a&2){let e=c(2);s(2),m("ngForOf",e.selectedTags)}}function Tl(a,n){if(a&1&&(t(0,"span",21),o(1),i()),a&2){let e=c(2);s(),k(" ",e.selectedTags.length," selected ")}}function Il(a,n){a&1&&(t(0,"div",159),g(),t(1,"svg",130),p(2,"path",160),i()())}function Dl(a,n){if(a&1){let e=E();t(0,"button",120),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.toggleTag(l))}),t(1,"div",46)(2,"div",40)(3,"div"),p(4,"div"),i(),t(5,"span",124),o(6),i()(),b(7,Il,3,0,"div",158),i()()}if(a&2){let e=n.$implicit,r=c(3);M("bg-blue-50",r.isTagSelected(e)),s(3),z("w-6 h-6 bg-"+e.color+"-100 rounded-full flex items-center justify-center"),s(),z("w-3 h-3 rounded-full bg-"+e.color+"-500"),s(2),C(e.name),s(),m("ngIf",r.isTagSelected(e))}}function Vl(a,n){if(a&1){let e=E();t(0,"div",117)(1,"div",118)(2,"div",155)(3,"div",79)(4,"input",156),Q("ngModelChange",function(l){_(e);let d=c(2);return q(d.newTagInput,l)||(d.newTagInput=l),h(l)}),v("keydown",function(l){_(e);let d=c(2);return h(d.onTagInputKeydown(l))})("click",function(l){return _(e),h(l.stopPropagation())}),i(),t(5,"div",157),o(6," Press Enter "),i()()(),t(7,"div",119),o(8,"Select tags"),i(),b(9,Dl,8,8,"button",121),i()()}if(a&2){let e=c(2);s(4),Y("ngModel",e.newTagInput),m("ngModelOptions",He(3,Bs)),s(5),m("ngForOf",e.availableTags)}}function Pl(a,n){if(a&1){let e=E();t(0,"div",170)(1,"div",171)(2,"img",172),v("error",function(l){let d=_(e).index,y=c(3);return h(y.onImageError(l,d))}),i(),t(3,"div",173)(4,"div",174)(5,"button",175),v("click",function(){let l=_(e).$implicit,d=c(3);return h(d.viewFullImage(l.image_url))}),g(),t(6,"svg",130),p(7,"path",176)(8,"path",177),i()()()(),x(),t(9,"button",178),v("click",function(){let l=_(e).index,d=c(3);return h(d.removeExistingImage(l))}),g(),t(10,"svg",130),p(11,"path",154),i()(),x(),t(12,"div",179),o(13," Existing "),i()(),t(14,"div",180)(15,"p",181),o(16),i(),t(17,"p",125),o(18,"Existing Image"),i()()()}if(a&2){let e=n.$implicit,r=n.index;s(2),m("src",e.image_url,X)("alt","Existing Asset Image "+(r+1)),s(14),C(e.image_path.split("/").pop())}}function Ll(a,n){if(a&1){let e=E();t(0,"button",175),v("click",function(){_(e);let l=c().index,d=c(3);return h(d.moveImageUp(l))}),g(),t(1,"svg",130),p(2,"path",186),i()()}}function Fl(a,n){if(a&1){let e=E();t(0,"button",175),v("click",function(){_(e);let l=c().index,d=c(3);return h(d.moveImageDown(l))}),g(),t(1,"svg",130),p(2,"path",50),i()()}}function Ol(a,n){if(a&1){let e=E();t(0,"div",170)(1,"div",171)(2,"img",182),v("error",function(l){let d=_(e).index,y=c(3);return h(y.onImageError(l,y.existingImages.length+d))})("load",function(l){let d=_(e).index,y=c(3);return h(y.onImageLoad(l,y.existingImages.length+d))}),i(),t(3,"div",183)(4,"div",174),b(5,Ll,3,0,"button",184)(6,Fl,3,0,"button",184),i()(),t(7,"button",178),v("click",function(){let l=_(e).index,d=c(3);return h(d.removeImage(l))}),g(),t(8,"svg",130),p(9,"path",154),i()(),x(),t(10,"div",185),o(11," New "),i()(),t(12,"div",180)(13,"p",181),o(14),i(),t(15,"p",125),o(16),i()()()}if(a&2){let e,r=n.$implicit,l=n.index,d=c(3);s(2),m("src",r,X)("alt","Asset Image "+(l+1)),s(3),m("ngIf",l>0),s(),m("ngIf",l<d.imagePreviewUrls.length-1),s(8),C(d.images[l]==null?null:d.images[l].name),s(2),k("",(((e=d.images[l]==null?null:d.images[l].size)!==null&&e!==void 0?e:0)/1024/1024).toFixed(1)," MB")}}function Hl(a,n){if(a&1){let e=E();t(0,"div",161)(1,"div",162)(2,"h4",163),o(3),i(),t(4,"button",164),v("click",function(){_(e);let l=c(2);return l.removeAllImages(),h(l.removeAllExistingImages())}),o(5," Remove All "),i()(),t(6,"div",165),b(7,Pl,19,3,"div",166)(8,Ol,17,6,"div",166),i(),t(9,"div",167)(10,"div",93),g(),t(11,"svg",168),p(12,"path",96),i(),x(),t(13,"p",169)(14,"strong"),o(15,"Gallery Tips:"),i(),o(16," Existing images are preserved. New images can be reordered. Green badges indicate existing images, blue badges indicate new uploads. "),i()()()()}if(a&2){let e=c(2);s(3),k("Asset Images (",e.existingImages.length+e.imagePreviewUrls.length,")"),s(4),m("ngForOf",e.existingImages),s(),m("ngForOf",e.imagePreviewUrls)}}function jl(a,n){if(a&1&&(t(0,"div",187)(1,"div",93),g(),t(2,"svg",188),p(3,"path",24),i(),x(),t(4,"p",189),o(5),i()()()),a&2){let e=c(2);s(5),C(e.submitError)}}function Nl(a,n){if(a&1&&(t(0,"div",190)(1,"div",93),g(),t(2,"svg",70),p(3,"path",160),i(),x(),t(4,"p",191),o(5),i()()()),a&2){let e=c(2);s(5),C(e.submitSuccess)}}function Rl(a,n){a&1&&(t(0,"span",93),g(),t(1,"svg",192),p(2,"path",160),i(),x(),t(3,"span"),o(4,"Update Asset"),i()())}function Bl(a,n){a&1&&(t(0,"span",93),g(),t(1,"svg",193),p(2,"circle",18)(3,"path",19),i(),x(),t(4,"span"),o(5,"Updating Asset..."),i()())}function Gl(a,n){if(a&1){let e=E();t(0,"div")(1,"form",27),v("ngSubmit",function(){_(e);let l=c();return h(l.onSubmit())}),t(2,"div",28)(3,"div",29)(4,"div",30),g(),t(5,"svg",31),p(6,"path",32),i()(),x(),t(7,"h2",33),o(8,"Basic Information"),i()(),t(9,"div",34)(10,"div")(11,"label",35),o(12," Asset Name "),t(13,"span",36),o(14,"*"),i()(),p(15,"input",37),b(16,Us,4,1,"div",38),t(17,"div",39),o(18,"Maximum 100 characters"),i()(),t(19,"div")(20,"label",35),o(21,"Asset ID"),i(),t(22,"div",40),p(23,"input",41),t(24,"span",42),o(25," auto-generated "),i()(),t(26,"p",39),o(27,"Unique identifier automatically assigned"),i()()(),t(28,"div",43)(29,"label",35),o(30,"Parent Asset"),i(),t(31,"div",44),v("click",function(l){return _(e),h(l.stopPropagation())}),t(32,"button",45),v("click",function(){_(e);let l=c();return h(l.showParentDropdown=!l.showParentDropdown)}),t(33,"div",46),b(34,$s,2,0,"span",47)(35,Ws,2,2,"span",48),g(),t(36,"svg",49),p(37,"path",50),i()()(),b(38,qs,7,3,"div",51),i(),x(),t(39,"div",39),o(40,"Optional: Select a parent asset if this asset is a child of another."),i()(),t(41,"div",43)(42,"label",35),o(43,"Description"),i(),p(44,"textarea",52),t(45,"div",39),o(46,"Maximum 500 characters"),i()(),t(47,"div")(48,"label",53),o(49,"Health Score"),i(),t(50,"div",54)(51,"div",55)(52,"span",56),o(53,"Current Score"),i(),t(54,"span",57),o(55),i()(),t(56,"div",58),p(57,"div",59)(58,"div",60)(59,"input",61)(60,"div",62),i(),t(61,"div",63)(62,"span"),o(63,"Poor (0%)"),i(),t(64,"span"),o(65,"Fair (25%)"),i(),t(66,"span"),o(67,"Good (50%)"),i(),t(68,"span"),o(69,"Very Good (75%)"),i(),t(70,"span"),o(71,"Excellent (100%)"),i()()()()(),t(72,"div",28)(73,"div",29)(74,"div",64),g(),t(75,"svg",65),p(76,"path",66),i()(),x(),t(77,"h2",33),o(78,"Asset Classification"),i()(),t(79,"div",67)(80,"div")(81,"label",35),o(82," Asset Type "),t(83,"span",36),o(84,"*"),i()(),t(85,"div",44),v("click",function(l){return _(e),h(l.stopPropagation())}),t(86,"button",45),v("click",function(){_(e);let l=c();return h(l.toggleAssetTypeDropdown())}),t(87,"div",46),b(88,Qs,2,0,"span",47)(89,Zs,6,5,"div",68),g(),t(90,"svg",49),p(91,"path",50),i()()(),b(92,nl,5,1,"div",51),i(),b(93,il,4,1,"div",38),i(),x(),t(94,"div")(95,"label",35),o(96," Category "),t(97,"span",36),o(98,"*"),i()(),t(99,"div",44),v("click",function(l){return _(e),h(l.stopPropagation())}),t(100,"button",45),v("click",function(){_(e);let l=c();return h(l.toggleCategoryDropdown())}),t(101,"div",46),b(102,rl,2,0,"span",47)(103,al,2,1,"span",48),g(),t(104,"svg",49),p(105,"path",50),i()()(),b(106,cl,5,1,"div",51),i(),b(107,ml,4,1,"div",38),i()()(),x(),t(108,"div",28)(109,"div",29)(110,"div",69),g(),t(111,"svg",70),p(112,"path",71),i()(),x(),t(113,"h2",33),o(114,"Technical Details"),i()(),t(115,"div",72)(116,"div")(117,"label",35),o(118,"Manufacturer"),i(),p(119,"input",73),t(120,"div",39),o(121,"Maximum 255 characters"),i()(),t(122,"div")(123,"label",35),o(124,"Model"),i(),p(125,"input",74),t(126,"div",39),o(127,"Maximum 255 characters"),i()(),t(128,"div")(129,"label",35),o(130," Serial Number (Optional) "),i(),p(131,"input",75),b(132,pl,4,1,"div",38),t(133,"div",39),o(134,"Optional, max 255 chars, must be unique within your company if provided"),i()()()(),t(135,"div",28)(136,"div",29)(137,"div",76),g(),t(138,"svg",77),p(139,"path",78),i()(),x(),t(140,"h2",33),o(141,"Financial Information"),i()(),t(142,"div",34)(143,"div")(144,"label",35),o(145,"Purchase Value (USD)"),i(),t(146,"div",79)(147,"div",80)(148,"span",81),o(149,"$ "),i()(),p(150,"input",82),i(),t(151,"div",39),o(152,"Must be a positive number"),i()(),t(153,"div")(154,"label",35),o(155,"Purchase Date"),i(),p(156,"input",83,0),t(158,"div",39),o(159,"Cannot be in the future"),i()()(),t(160,"div",34)(161,"div")(162,"label",35),o(163,"Useful Life (Years)"),i(),p(164,"input",84),t(165,"div",39),o(166,"Optional, useful life in years"),i()(),t(167,"div")(168,"label",35),o(169,"Warranty Expiration"),i(),p(170,"input",85,0),t(172,"div",39),o(173,"Optional warranty expiration date"),i()()()(),t(174,"div",28)(175,"div",29)(176,"div",86),g(),t(177,"svg",87),p(178,"path",88)(179,"path",89),i()(),x(),t(180,"h2",33),o(181,"Location & Assignment"),i()(),t(182,"div",67)(183,"div")(184,"label",35),o(185,"Location"),i(),t(186,"div",44),v("click",function(l){return _(e),h(l.stopPropagation())}),t(187,"button",45),v("click",function(){_(e);let l=c();return h(l.toggleLocationDropdown())}),t(188,"div",46),b(189,ul,2,0,"span",47)(190,fl,7,1,"div",68),g(),t(191,"svg",49),p(192,"path",50),i()()(),b(193,hl,5,1,"div",51),i()(),x(),t(194,"div")(195,"label",35),o(196,"Department ID"),i(),t(197,"div",44),v("click",function(l){return _(e),h(l.stopPropagation())}),t(198,"button",45),v("click",function(){_(e);let l=c();return h(l.toggleDepartmentDropdown())}),t(199,"div",46),b(200,vl,2,0,"span",47)(201,xl,6,1,"div",68),g(),t(202,"svg",49),p(203,"path",50),i()()(),b(204,Cl,5,1,"div",51),i(),x(),t(205,"div",39),o(206,"Optional department assignment"),i()(),t(207,"div")(208,"label",35),o(209,"Status"),i(),t(210,"div",44),v("click",function(l){return _(e),h(l.stopPropagation())}),t(211,"button",45),v("click",function(){_(e);let l=c();return h(l.toggleStatusDropdown())}),t(212,"div",46),b(213,Sl,4,3,"div",68),g(),t(214,"svg",49),p(215,"path",50),i()()(),b(216,kl,5,1,"div",90),i(),x(),t(217,"div",39),o(218,"Current operational status of the asset"),i()(),t(219,"div")(220,"label",35),o(221,"Tags"),i(),b(222,Al,3,1,"div",91),t(223,"div",44),v("click",function(l){return _(e),h(l.stopPropagation())}),t(224,"button",45),v("click",function(){_(e);let l=c();return h(l.toggleTagsDropdown())}),t(225,"div",46)(226,"span",92),o(227),i(),t(228,"div",93),b(229,Tl,2,1,"span",94),g(),t(230,"svg",49),p(231,"path",50),i()()()(),b(232,Vl,10,4,"div",51),i(),x(),t(233,"div",39),g(),t(234,"svg",95),p(235,"path",96),i(),o(236," Select existing tags or type to create new ones. Press Enter to add custom tags. "),i()()()(),x(),t(237,"div",28)(238,"div",29)(239,"div",97),g(),t(240,"svg",98),p(241,"path",99),i()(),x(),t(242,"h2",33),o(243,"Asset Image"),i()(),t(244,"div")(245,"label",35),o(246,"Upload Image"),i(),t(247,"div",100),v("click",function(){_(e);let l=c();return h(l.triggerFileInput())})("dragover",function(l){_(e);let d=c();return h(d.onDragOver(l))})("dragleave",function(l){_(e);let d=c();return h(d.onDragLeave(l))})("drop",function(l){_(e);let d=c();return h(d.onDrop(l))}),t(248,"div",101)(249,"div",102),g(),t(250,"svg",103),p(251,"path",104),i()(),x(),t(252,"p",105),o(253),i(),t(254,"input",106,1),v("change",function(l){_(e);let d=c();return h(d.onFileChange(l))}),i()()(),b(256,Hl,17,3,"div",107),i()(),b(257,jl,6,1,"div",108)(258,Nl,6,1,"div",109),t(259,"div",110)(260,"button",111),v("click",function(){_(e);let l=c();return h(l.goBack())}),o(261," Cancel "),i(),t(262,"button",112),b(263,Rl,5,0,"span",113)(264,Bl,6,0,"span",113),i()()()()}if(a&2){let e,r,l,d,y,P,L,J,j,B,re,A=c();s(),m("formGroup",A.assetForm),s(14),M("border-red-300",A.nameError),s(),m("ngIf",A.nameError),s(7),m("value",(A.asset==null?null:A.asset.asset_id)||(A.asset==null?null:A.asset.id)),s(9),M("border-blue-500",A.showParentDropdown),s(2),m("ngIf",!((e=A.assetForm.get("parent_id"))!=null&&e.value)),s(),m("ngIf",((r=A.assetForm.get("parent_id"))==null?null:r.value)&&A.getSelectedParent()),s(),M("rotate-180",A.showParentDropdown),s(2),m("ngIf",A.showParentDropdown),s(16),M("text-red-600",(((l=A.assetForm.get("health_score"))==null?null:l.value)||85)<50)("text-green-600",(((d=A.assetForm.get("health_score"))==null?null:d.value)||85)>=50),s(),k("",((y=A.assetForm.get("health_score"))==null?null:y.value)||85,"%"),s(3),W("width",((P=A.assetForm.get("health_score"))==null?null:P.value)||85,"%"),M("bg-red-500",(((L=A.assetForm.get("health_score"))==null?null:L.value)||85)<50)("bg-green-500",(((J=A.assetForm.get("health_score"))==null?null:J.value)||85)>=50),s(2),W("left",((j=A.assetForm.get("health_score"))==null?null:j.value)||85,"%"),M("bg-red-500",(((B=A.assetForm.get("health_score"))==null?null:B.value)||85)<50)("bg-green-500",(((re=A.assetForm.get("health_score"))==null?null:re.value)||85)>=50),s(26),M("border-red-300",A.assetTypeError)("border-blue-500",A.showAssetTypeDropdown),s(2),m("ngIf",!A.selectedAssetType),s(),m("ngIf",A.selectedAssetType),s(),M("rotate-180",A.showAssetTypeDropdown),s(2),m("ngIf",A.showAssetTypeDropdown),s(),m("ngIf",A.assetTypeError),s(7),M("border-red-300",A.categoryError)("border-blue-500",A.showCategoryDropdown),s(2),m("ngIf",!A.selectedCategory),s(),m("ngIf",A.selectedCategory),s(),M("rotate-180",A.showCategoryDropdown),s(2),m("ngIf",A.showCategoryDropdown),s(),m("ngIf",A.categoryError),s(24),M("border-red-300",A.serialNumberError),s(),m("ngIf",A.serialNumberError),s(55),M("border-blue-500",A.showLocationDropdown),s(2),m("ngIf",!A.selectedLocation),s(),m("ngIf",A.selectedLocation),s(),M("rotate-180",A.showLocationDropdown),s(2),m("ngIf",A.showLocationDropdown),s(5),M("border-blue-500",A.showDepartmentDropdown),s(2),m("ngIf",!A.selectedDepartment),s(),m("ngIf",A.selectedDepartment),s(),M("rotate-180",A.showDepartmentDropdown),s(2),m("ngIf",A.showDepartmentDropdown),s(7),M("border-blue-500",A.showStatusDropdown),s(2),m("ngIf",A.selectedStatus),s(),M("rotate-180",A.showStatusDropdown),s(2),m("ngIf",A.showStatusDropdown),s(6),m("ngIf",A.selectedTags.length>0),s(2),M("border-blue-500",A.showTagsDropdown),s(3),k(" ",A.selectedTags.length===0?"Select tags":"Add more tags"," "),s(2),m("ngIf",A.selectedTags.length>0),s(),M("rotate-180",A.showTagsDropdown),s(2),m("ngIf",A.showTagsDropdown),s(15),M("border-gray-300",!A.isDragOver)("border-blue-500",A.isDragOver)("bg-blue-50",A.isDragOver)("hover:border-blue-400",!A.isDragOver),s(3),M("text-gray-400",!A.isDragOver)("text-blue-500",A.isDragOver),s(2),M("text-gray-500",!A.isDragOver)("text-blue-600",A.isDragOver),s(),k(" ",A.isDragOver?"Release to upload images":"PNG, JPG, GIF up to 10MB - click to browse or drag and drop files here"," "),s(3),m("ngIf",A.existingImages.length>0||A.imagePreviewUrls.length>0),s(),m("ngIf",A.submitError),s(),m("ngIf",A.submitSuccess),s(2),m("disabled",A.saving),s(2),m("disabled",A.saving||!A.isFormValid()),s(),m("ngIf",!A.saving),s(),m("ngIf",A.saving)}}var mt=class a{constructor(n,e,r,l,d){this.fb=n;this.route=e;this.router=r;this.assetService=l;this.angularLocation=d;this.assetForm=this.fb.group({name:["",[Se.required,Se.minLength(2)]],description:[""],serial_number:["",[Se.required,Se.minLength(3)]],model:[""],manufacturer:[""],purchase_date:[""],purchase_price:[null],depreciation:[null],location_id:[null],department_id:[null],parent_id:[null],warranty:[""],insurance:[""],health_score:[85,[Se.min(0),Se.max(100)]],status:[null],type:[null,Se.required],category_id:[null,Se.required],tags:[[]]})}destroy$=new nt;dateInputs;fileInput;flatpickrInstances=[];asset=null;assetForm;loading=!0;saving=!1;error="";successMessage="";categories=[];locations=[];departments=[];availableTags=[];statusOptionsFromAPI=[];showAssetTypeDropdown=!1;showCategoryDropdown=!1;showLocationDropdown=!1;showStatusDropdown=!1;showTagsDropdown=!1;showDepartmentDropdown=!1;showParentDropdown=!1;selectedAssetType=null;selectedCategory=null;selectedLocation=null;selectedStatus=null;selectedDepartment=null;selectedTags=[];newTagInput="";assetTypes=[];assetTypesFromAPI=[];statusOptions=[{value:1,label:"Active",color:"green",description:"Asset is operational and in use",sort_order:1},{value:2,label:"Maintenance",color:"orange",description:"Asset is under maintenance or repair",sort_order:2},{value:3,label:"Inactive",color:"gray",description:"Asset is not currently in use",sort_order:3},{value:4,label:"Retired",color:"red",description:"Asset is retired and no longer in service",sort_order:4}];previewImage=null;selectedFile=null;images=[];imagePreviewUrls=[];existingImages=[];removedImageIds=[];isDragOver=!1;nameError="";assetTypeError="";categoryError="";serialNumberError="";submitError="";submitSuccess="";possibleParents=[];ngOnInit(){this.route.params.pipe(G(this.destroy$)).subscribe(n=>{let e=n.id;e&&(this.loadAsset(e),this.assetService.getPossibleParents(e).subscribe(r=>{r.success&&r.data?.possible_parents&&(this.possibleParents=r.data.possible_parents)}))}),this.loadAssetTypes(),this.loadCategories(),this.loadLocations(),this.loadDepartments(),this.loadAvailableTags(),this.loadAssetStatuses()}ngAfterViewInit(){setTimeout(()=>{this.initializeFlatpickr()},100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.flatpickrInstances.forEach(n=>{n&&n.destroy()})}initializeFlatpickr(){this.flatpickrInstances.forEach(n=>{n&&n.destroy()}),this.flatpickrInstances=[],setTimeout(()=>{this.dateInputs&&this.dateInputs.forEach((n,e)=>{if(n?.nativeElement){let r=n.nativeElement,l=r.getAttribute("formControlName"),d={dateFormat:"d M, Y",allowInput:!0,clickOpens:!0,defaultDate:null,onChange:(P,L)=>{l==="purchase_date"?this.assetForm.get("purchase_date")?.setValue(L):l==="warranty"&&this.assetForm.get("warranty")?.setValue(L)}};if(l==="purchase_date"){d.maxDate="today";let P=this.assetForm.get("purchase_date")?.value;P&&(d.defaultDate=this.convertDisplayDateToDate(P))}else if(l==="warranty"){d.minDate="today";let P=this.assetForm.get("warranty")?.value;P&&(d.defaultDate=this.convertDisplayDateToDate(P))}let y=$e(r,d);this.flatpickrInstances.push(y)}})},50)}loadAsset(n){this.loading=!0,this.error="",this.assetService.getAsset(n).pipe(G(this.destroy$)).subscribe({next:e=>{e.success?(this.asset=e.data.asset||e.data,this.populateForm()):this.error=e.message||"Failed to load asset",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the asset",this.loading=!1}})}populateForm(){if(this.asset){let n=this.asset.purchase_date?this.convertBackendDateToDisplay(this.asset.purchase_date):"",e=this.asset.warranty?this.convertBackendDateToDisplay(this.asset.warranty):"";this.assetForm.patchValue({name:this.asset.name||"",description:this.asset.description||"",serial_number:this.asset.serial_number||"",model:this.asset.model||"",manufacturer:this.asset.manufacturer||"",purchase_date:n,purchase_price:this.asset.purchase_price||null,depreciation:this.asset.depreciation||null,location_id:this.asset.location_id||null,department_id:this.asset.department_id||null,warranty:e,insurance:this.asset.insurance||"",health_score:this.asset.health_score||85,status:this.asset.status||null,type:this.asset.type||"",category_id:this.asset.category_id||null,tags:this.asset.tags||[],parent_id:this.asset.parent_id||null}),this.asset.images&&Array.isArray(this.asset.images)&&(this.existingImages=this.asset.images),setTimeout(()=>{this.selectedAssetType=this.assetTypes.find(r=>r.id==this.asset.type)||null,this.selectedCategory=this.categories.find(r=>r.id===this.asset.category_id)||null,this.selectedLocation=this.locations.find(r=>r.id===this.asset.location_id)||null,this.selectedDepartment=this.departments.find(r=>r.id===this.asset.department_id)||null,this.selectedStatus=this.statusOptions.find(r=>r.value===this.asset.status||r.label===this.asset.status||r.id===this.asset.status)||null,this.selectedStatus&&this.assetForm.patchValue({status:this.selectedStatus.value}),this.asset.tags&&Array.isArray(this.asset.tags)&&(this.selectedTags=this.asset.tags.map(r=>this.availableTags.find(l=>l.id===r.id)||r)),this.assetForm.markAllAsTouched(),this.assetForm.updateValueAndValidity(),setTimeout(()=>{this.initializeFlatpickr()},100)},100)}}loadAssetTypes(){this.assetService.getAssetTypes().pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&n.data&&(this.assetTypesFromAPI=n.data,this.assetTypes=this.assetTypesFromAPI.map(e=>({id:e.id,name:e.name,label:e.name,value:e.name,icon:e.icon,color:this.getColorForType(e.name),description:`${e.name} asset type`,iconError:!1})),this.asset&&this.populateForm())},error:n=>{console.error("Error loading asset types:",n)}})}loadCategories(){this.assetService.getAssetCategories().pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&n.data?.categories&&(this.categories=n.data.categories,this.asset&&this.populateForm())},error:n=>{console.error("Error loading categories:",n)}})}loadLocations(){this.assetService.getLocations().pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&n.data&&(this.locations=n.data.locations||n.data,this.asset&&this.populateForm())},error:n=>{console.error("Error loading locations:",n)}})}loadDepartments(){this.assetService.getDepartments().pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&n.data&&(this.departments=n.data,this.asset&&this.populateForm())},error:n=>{console.error("Error loading departments:",n)}})}loadAvailableTags(){this.availableTags=[{id:1,name:"Critical",color:"red"},{id:2,name:"High Priority",color:"orange"},{id:3,name:"Equipment",color:"blue"},{id:4,name:"IT Hardware",color:"purple"},{id:5,name:"Furniture",color:"green"},{id:6,name:"Vehicle",color:"yellow"},{id:7,name:"Safety Equipment",color:"red"},{id:8,name:"Office Supplies",color:"gray"}]}loadAssetStatuses(){this.assetService.getAssetStatuses().pipe(G(this.destroy$)).subscribe({next:n=>{n.success&&n.data&&(this.statusOptionsFromAPI=n.data,this.statusOptions=this.statusOptionsFromAPI.map(e=>({id:e.id,value:e.id,label:e.name,color:this.hexToTailwindColor(e.color),description:e.description||`Asset is ${e.name.toLowerCase()}`,hexColor:e.color,sort_order:e.sort_order})),this.statusOptions.sort((e,r)=>e.sort_order-r.sort_order),this.asset&&this.populateForm())},error:n=>{console.error("Error loading asset statuses:",n)}})}hexToTailwindColor(n){return{"#10B981":"green","#F59E0B":"orange","#9CA3AF":"gray","#EF4444":"red","#6B7280":"gray","#22C55E":"green","#3B82F6":"blue","#8B5CF6":"purple","#F97316":"orange"}[n.toUpperCase()]||"gray"}getColorForType(n){return{"Fixed Asset":"#2563eb","Semi-Fixed Asset":"#22c55e","Mobile Asset":"#f59e42","Fleet Asset":"#a855f7","IT Equipment":"#3b82f6",Furniture:"#10b981",Vehicle:"#f59e0b",Machinery:"#ef4444",Electronics:"#8b5cf6",Tools:"#f97316"}[n]||"#6b7280"}onAssetTypeIconError(n,e){console.warn("Asset type icon failed to load:",e.name,e.icon),e.iconError=!0,n.target.style.display="none"}toggleAssetTypeDropdown(){this.showAssetTypeDropdown=!this.showAssetTypeDropdown,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown,this.showAssetTypeDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleLocationDropdown(){this.showLocationDropdown=!this.showLocationDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleStatusDropdown(){this.showStatusDropdown=!this.showStatusDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}toggleTagsDropdown(){this.showTagsDropdown=!this.showTagsDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showDepartmentDropdown=!1}toggleDepartmentDropdown(){this.showDepartmentDropdown=!this.showDepartmentDropdown,this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1}selectAssetType(n){this.selectedAssetType=n,this.assetForm.patchValue({type:n.id}),this.showAssetTypeDropdown=!1,this.clearErrors()}selectCategory(n){this.selectedCategory=n,this.assetForm.patchValue({category_id:n.id}),this.showCategoryDropdown=!1,this.clearErrors()}selectLocation(n){this.selectedLocation=n,this.assetForm.patchValue({location_id:n.id}),this.showLocationDropdown=!1}selectStatus(n){this.selectedStatus=n,this.assetForm.patchValue({status:n.value}),this.showStatusDropdown=!1}selectDepartment(n){this.selectedDepartment=n,this.assetForm.patchValue({department_id:n.id}),this.showDepartmentDropdown=!1}toggleTag(n){let e=this.selectedTags.findIndex(r=>r.id===n.id);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(n)}isTagSelected(n){return this.selectedTags.some(e=>e.id===n.id)}onTagInputKeydown(n){n.key==="Enter"&&(n.preventDefault(),this.createNewTag())}createNewTag(){let n=this.newTagInput.trim();if(n&&!this.selectedTags.some(e=>e.name.toLowerCase()===n.toLowerCase())){let e=["red","blue","green","yellow","purple","pink","indigo","gray"],r=e[Math.floor(Math.random()*e.length)],l={id:Date.now(),name:n,color:r,isNew:!0};this.selectedTags.push(l),this.newTagInput=""}}removeTag(n){let e=this.selectedTags.findIndex(r=>r.id===n.id);e>-1&&this.selectedTags.splice(e,1)}onFileChange(n){if(n.target.files&&n.target.files.length){let e=Array.from(n.target.files);this.processFiles(e),n.target.value=""}}onDragOver(n){n.preventDefault(),n.stopPropagation(),this.isDragOver=!0}onDragLeave(n){n.preventDefault(),n.stopPropagation(),this.isDragOver=!1}onDrop(n){n.preventDefault(),n.stopPropagation(),this.isDragOver=!1;let e=n.dataTransfer?.files;if(e&&e.length>0){let r=Array.from(e).filter(l=>l.type.startsWith("image/"));r.length>0&&this.processFiles(r)}}processFiles(n){let r=["image/jpeg","image/png","image/gif","image/webp"],l=[];for(let d of n){if(!r.includes(d.type)){console.warn("Invalid file type:",d.name);continue}if(d.size>10*1024*1024){console.warn("File too large:",d.name);continue}if(this.images.some(L=>L.name===d.name&&L.size===d.size)){console.warn("Duplicate file skipped:",d.name);continue}if(this.images.length+l.length>=10){console.warn("Max image count exceeded:",d.name);break}l.push(d);let P=new FileReader;P.onload=L=>{L.target?.result&&this.imagePreviewUrls.push(L.target.result)},P.onerror=L=>{console.error("Preview failed for:",d.name,L)},P.readAsDataURL(d)}this.images=[...this.images,...l]}removeImage(n){this.images.splice(n,1),this.imagePreviewUrls.splice(n,1)}removeAllImages(){this.images=[],this.imagePreviewUrls=[]}removeExistingImage(n){let e=this.existingImages[n];e&&e.id&&this.removedImageIds.push(e.id),this.existingImages.splice(n,1)}removeAllExistingImages(){this.existingImages.forEach(n=>{n&&n.id&&this.removedImageIds.push(n.id)}),this.existingImages=[]}moveImage(n,e){if(e>=0&&e<this.images.length){let r=this.images.splice(n,1)[0];this.images.splice(e,0,r);let l=this.imagePreviewUrls.splice(n,1)[0];this.imagePreviewUrls.splice(e,0,l)}}moveImageUp(n){n>0&&this.moveImage(n,n-1)}moveImageDown(n){n<this.images.length-1&&this.moveImage(n,n+1)}triggerFileInput(){this.fileInput.nativeElement.click()}onImageError(n,e){console.warn("Image failed to load at index:",e),n.target.onerror=null,n.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMiA5VjEzTTEyIDE3SDE2TTE2IDlIMTJNMTIgOUw4IDEzTDEyIDE3IiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="}onImageLoad(n,e){console.log("Image loaded successfully at index:",e)}viewFullImage(n){window.open(n,"_blank")}convertImagesToBase64(){return Promise.all(this.images.map(n=>new Promise((e,r)=>{let l=new FileReader;l.onload=()=>{l.result?e(l.result):r(new Error("Failed to read file"))},l.onerror=()=>r(l.error),l.readAsDataURL(n)})))}onCategoryIconError(n,e){console.warn("Category icon failed to load:",e.name,e.icon),e.iconError=!0,n.target.style.display="none"}validateForm(){let n=!0;this.clearErrors(),!this.assetForm.get("name")?.value||this.assetForm.get("name")?.value.trim().length===0?(this.nameError="Asset name is required",n=!1):this.assetForm.get("name")?.value.trim().length>100&&(this.nameError="Asset name cannot exceed 100 characters",n=!1),this.selectedAssetType||(this.assetTypeError="Asset type is required",n=!1),this.selectedCategory||(this.categoryError="Category is required",n=!1);let e=this.assetForm.get("serial_number")?.value;return e&&e.trim().length===0?(this.serialNumberError="Serial number cannot be empty if provided",n=!1):e&&e.length>255&&(this.serialNumberError="Serial number cannot exceed 255 characters",n=!1),n}clearErrors(){this.nameError="",this.assetTypeError="",this.categoryError="",this.serialNumberError="",this.submitError="",this.submitSuccess=""}onSubmit(){!this.validateForm()||this.saving||!this.asset||this.assetForm.valid&&!this.saving&&this.asset&&(this.saving=!0,this.error="",this.successMessage="",this.submitError="",this.submitSuccess="",this.convertImagesToBase64().then(n=>{let e=this.assetForm.value;e.tags=this.selectedTags.map(r=>r.name),e.purchase_date&&(e.purchase_date=this.convertDateToBackendFormat(e.purchase_date)),e.warranty&&(e.warranty=this.convertDateToBackendFormat(e.warranty)),e.images=n,e.existing_images=this.existingImages.map(r=>r.id||r.image_url),this.removedImageIds.length>0&&(e.remove_image_ids=this.removedImageIds),this.assetService.updateAsset(this.asset.id,e).pipe(G(this.destroy$)).subscribe({next:r=>{r.success?(this.submitSuccess="Asset updated successfully!",setTimeout(()=>{this.router.navigate(["/assets/preview",this.asset.id])},2e3)):this.submitError=r.message||"Failed to update asset",this.saving=!1},error:r=>{this.submitError=r.error?.message||"An error occurred while updating the asset",this.saving=!1}})}).catch(n=>{this.saving=!1,this.submitError="Failed to process images. Please try again.",console.error("Image conversion error:",n)}))}goBack(){this.angularLocation.back()}onDocumentClick(n){this.showAssetTypeDropdown=!1,this.showCategoryDropdown=!1,this.showLocationDropdown=!1,this.showStatusDropdown=!1,this.showTagsDropdown=!1,this.showDepartmentDropdown=!1}isFormValid(){return this.assetForm.valid&&this.selectedAssetType!==null&&this.selectedCategory!==null&&!this.nameError&&!this.assetTypeError&&!this.categoryError&&!this.serialNumberError}getSelectedParent(){return this.possibleParents.find(n=>n.id===this.assetForm.get("parent_id")?.value)}convertDateToBackendFormat(n){if(!n)return"";try{let e=new Date(n);if(isNaN(e.getTime()))return n;let r=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getDate()).padStart(2,"0");return`${r}-${l}-${d}`}catch(e){return console.error("Date conversion error:",e),n}}convertBackendDateToDisplay(n){if(!n)return"";try{let e=new Date(n);if(isNaN(e.getTime()))return n;let r={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-GB",r).replace(/,/g,",")}catch(e){return console.error("Date conversion error:",e),n}}convertDisplayDateToDate(n){if(!n)return null;try{let e=new Date(n);return isNaN(e.getTime())?null:e}catch(e){return console.error("Date conversion error:",e),null}}static \u0275fac=function(e){return new(e||a)(K(Ut),K(rt),K(Te),K(Ce),K(It))};static \u0275cmp=ae({type:a,selectors:[["app-asset-edit"]],viewQuery:function(e,r){if(e&1&&(ke(Ns,5),ke(Rs,5)),e&2){let l;Me(l=Ae())&&(r.fileInput=l.first),Me(l=Ae())&&(r.dateInputs=l)}},hostBindings:function(e,r){e&1&&v("click",function(d){return r.onDocumentClick(d)},!1,it)},decls:16,vars:3,consts:[["dateInput",""],["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"asset-edit-page"],[1,"mb-8"],[1,"flex","items-center","space-x-4","mb-4"],["type","button",1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","flex items-center justify-center py-20",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[3,"ngSubmit","formGroup"],[1,"section-card"],[1,"flex","items-center","space-x-3","mb-6"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"section-title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","placeholder","e.g., Main Server Room AC Unit","formControlName","name",1,"input"],["class","text-red-600 text-sm mt-1",4,"ngIf"],[1,"text-xs","text-gray-500","mt-1"],[1,"flex","items-center","space-x-3"],["type","text","readonly","",1,"input","flex-1",3,"value"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],[1,"relative",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],[1,"flex","items-center","justify-between"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["rows","3","placeholder","Brief description of the asset and its purpose...","formControlName","description","maxlength","500",1,"input","resize-none"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"relative","w-full","h-6","mb-3"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-2","bg-gray-200","rounded-lg"],[1,"absolute","top-1/2","transform","-translate-y-1/2","h-2","rounded-lg","transition-all","duration-300"],["type","range","min","0","max","100","formControlName","health_score",1,"absolute","top-1/2","transform","-translate-y-1/2","w-full","h-6","bg-transparent","appearance-none","cursor-pointer","slider-input"],[1,"absolute","top-1/2","transform","-translate-y-1/2","w-4","h-4","rounded-full","border-2","border-white","shadow-md","pointer-events-none","transition-all","duration-300",2,"margin-left","-8px"],[1,"flex","justify-between","text-xs","text-gray-500","mt-2"],[1,"w-10","h-10","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","flex items-center space-x-3",4,"ngIf"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","placeholder","e.g., Dell, HP, Toyota","formControlName","manufacturer","maxlength","255",1,"input"],["type","text","placeholder","e.g., PowerEdge R730","formControlName","model","maxlength","255",1,"input"],["type","text","placeholder","e.g., SN123456789","formControlName","serial_number","maxlength","255",1,"input"],[1,"w-10","h-10","bg-yellow-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"text-gray-500","sm:text-sm"],["type","number","placeholder","5,000.00","formControlName","purchase_price","step","0.01","min","0.01",1,"input",2,"padding-left","24px"],["type","text","formControlName","purchase_date","placeholder","Select purchase date","readonly","",1,"input"],["type","number","formControlName","depreciation","placeholder","e.g., 5","min","0","max","50",1,"input"],["type","text","formControlName","warranty","placeholder","Select warranty expiration date","readonly","",1,"input"],[1,"w-10","h-10","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-gray-400"],[1,"flex","items-center","space-x-2"],["class","text-sm text-gray-500",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-pink-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-pink-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","flex","justify-center","px-6","pt-8","pb-8","border-2","border-dashed","rounded-lg","transition-all","duration-200",3,"click","dragover","dragleave","drop"],[1,"space-y-1","text-center"],[1,"w-16","h-16","bg-gray-100","rounded-lg","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","transition-colors"],["id","file-upload","name","file-upload","type","file","accept","image/*","multiple","",1,"sr-only",3,"change"],["class","mt-6",4,"ngIf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],["class","mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-lg","text-gray-700","font-medium","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"px-8","py-3","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm",3,"disabled"],["class","flex items-center space-x-2",4,"ngIf"],[1,"text-red-600","text-sm","mt-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","bg-gray-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"w-6","h-6","rounded","flex","items-center","justify-center"],["class","w-4 h-4",3,"src","alt","error",4,"ngIf"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"color",4,"ngIf"],[1,"w-4","h-4",3,"error","src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center","bg-blue-100"],["class","w-5 h-5",3,"src","alt","error",4,"ngIf"],["class","w-5 h-5 text-blue-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-5","h-5",3,"error","src","alt"],["class","w-5 h-5 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"w-6","h-6","bg-indigo-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-indigo-600"],[1,"w-8","h-8","bg-indigo-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6","bg-purple-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"w-8","h-8","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["class","text-xs text-gray-400",4,"ngIf"],[1,"text-xs","text-gray-400"],[1,"w-3","h-3","rounded-full"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],[3,"class",4,"ngFor","ngForOf"],["type","button",1,"ml-2","inline-flex","items-center","justify-center","w-4","h-4","rounded-full","hover:bg-black","hover:bg-opacity-20","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-3","py-2","border-b","border-gray-100"],["type","text","placeholder","Type to create new tag...",1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keydown","click","ngModel","ngModelOptions"],[1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400"],["class","text-blue-600",4,"ngIf"],[1,"text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mt-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-sm","font-medium","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-700","text-sm","font-medium","transition-colors",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],["class","relative group",4,"ngFor","ngForOf"],[1,"mt-4","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],[1,"text-blue-800","text-sm"],[1,"relative","group"],[1,"relative","aspect-square","bg-gray-100","rounded-lg","overflow-hidden","border","border-gray-200","hover:border-blue-300","transition-colors"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","src","alt"],[1,"absolute","inset-0","bg-black","opacity-0","group-hover:opacity-50","transition-all","duration-200","flex","items-center","justify-center"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","duration-200","flex","items-center","space-x-2"],["type","button",1,"w-8","h-8","bg-white","bg-opacity-90","text-gray-700","rounded-full","flex","items-center","justify-center","hover:bg-opacity-100","transition-all","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["type","button",1,"absolute","top-2","right-2","w-6","h-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-sm",3,"click"],[1,"absolute","top-2","left-2","px-2","py-1","bg-green-600","text-white","rounded","text-xs","font-medium"],[1,"mt-2","text-center"],[1,"text-xs","text-gray-600","truncate"],["loading","lazy",1,"w-full","h-full","object-cover","bg-white",3,"error","load","src","alt"],[1,"absolute","inset-0","bg-black","opacity-50","group-hover:bg-opacity-20","transition-all","duration-200","flex","items-center","justify-center"],["type","button","class","w-8 h-8 bg-white bg-opacity-90 text-gray-700 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all shadow-sm",3,"click",4,"ngIf"],[1,"absolute","top-2","left-2","px-2","py-1","bg-blue-600","text-white","rounded","text-xs","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],[1,"text-red-800","font-medium"],[1,"mb-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"text-green-800","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"]],template:function(e,r){e&1&&(t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"button",6),v("click",function(){return r.goBack()}),g(),t(5,"svg",7),p(6,"path",8),i(),x(),t(7,"span",9),o(8,"Back to Assets"),i()()(),t(9,"h1",10),o(10,"Edit Asset"),i(),t(11,"p",11),o(12," Update asset information and specifications "),i()(),b(13,Gs,10,0,"div",12)(14,zs,11,1,"div",12)(15,Gl,265,104,"div",13),i()()),e&2&&(s(13),m("ngIf",r.loading),s(),m("ngIf",r.error&&!r.loading),s(),m("ngIf",!r.loading&&!r.error))},dependencies:[se,we,oe,$t,Ge,le,Ot,Ht,de,Be,zt,Bt,Rt,jt,Nt,ce,_e,Le],styles:[".asset-edit-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e5e7eb;padding:2rem;margin-bottom:1.5rem;transition:all .2s ease-in-out}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#1f2937}.input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem .875rem;font-size:1rem;background:#fff;transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:#fff}.input.border-red-300[_ngcontent-%COMP%]{border-color:#fca5a5;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 768px){.asset-create-page[_ngcontent-%COMP%]{padding:1rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:hover{border-color:#9ca3af}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-button[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#eff6ff}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.transition-transform[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}[_nghost-%COMP%]     .flatpickr-calendar{border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border:1px solid #e5e7eb;font-family:inherit}[_nghost-%COMP%]     .flatpickr-day{border-radius:.375rem}[_nghost-%COMP%]     .flatpickr-day:hover{background-color:#eff6ff;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.selected{background-color:#3b82f6;border-color:#3b82f6}[_nghost-%COMP%]     .flatpickr-day.today{border-color:#3b82f6;color:#3b82f6;font-weight:600}[_nghost-%COMP%]     .flatpickr-months{background-color:#f8fafc;border-radius:.5rem .5rem 0 0}[_nghost-%COMP%]     .flatpickr-current-month{color:#1f2937;font-weight:600}[_nghost-%COMP%]     .flatpickr-weekday{color:#6b7280;font-weight:500}[_nghost-%COMP%]     .flatpickr-input{cursor:pointer}[_nghost-%COMP%]     .flatpickr-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.slider-input[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;outline:none;z-index:20}.slider-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;position:relative;z-index:30}.slider-input[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:transparent;border:2px solid transparent;cursor:pointer;box-shadow:none}.slider-input[_ngcontent-%COMP%]:focus{outline:none}"]})};var zl=()=>[1,2,3,4];function Ul(a,n){if(a&1){let e=E();t(0,"div",16)(1,"div",3)(2,"div",17),g(),t(3,"svg",18),p(4,"path",19),i(),x(),t(5,"span",20),o(6),i()(),t(7,"button",21),v("click",function(){_(e);let l=c();return h(l.clearError())}),g(),t(8,"svg",22),p(9,"path",23),i()()()()}if(a&2){let e=c();s(6),C(e.errorMessage)}}function $l(a,n){a&1&&(t(0,"span"),g(),t(1,"svg",22),p(2,"path",28),i()())}function Wl(a,n){if(a&1&&(t(0,"span"),o(1),i()),a&2){let e=c().$implicit;s(),C(e)}}function Yl(a,n){if(a&1&&p(0,"div",29),a&2){let e=c().$implicit,r=c();z(r.currentStep>e?"bg-green-500":"bg-gray-200")}}function ql(a,n){if(a&1&&(t(0,"div",17)(1,"div",24)(2,"div",25),b(3,$l,3,0,"span",15)(4,Wl,2,1,"span",15),i(),t(5,"span",26),o(6),i()(),b(7,Yl,1,2,"div",27),i()),a&2){let e=n.$implicit,r=n.index,l=c();s(2),z(l.currentStep>e?"bg-green-500 text-white":l.currentStep===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"),s(),m("ngIf",l.currentStep>e),s(),m("ngIf",l.currentStep<=e),s(),z(l.currentStep>=e?"text-blue-600":"text-gray-500"),s(),k(" ",e===1?"Upload":e===2?"Preview":e===3?"Map Fields":"Import"," "),s(),m("ngIf",r<3)}}function Ql(a,n){if(a&1){let e=E();t(0,"div",30)(1,"div",2)(2,"div",31),g(),t(3,"svg",32),p(4,"path",33),i()(),x(),t(5,"h2",34),o(6,"Upload Asset File"),i(),t(7,"p",35),o(8,"Upload a CSV file with your asset data to get started"),i()(),t(9,"div",36)(10,"div",30),g(),t(11,"svg",37),p(12,"path",33),i(),x(),t(13,"p",38),o(14,"Choose CSV File"),i(),t(15,"p",39),o(16,"or drag and drop your file here"),i(),t(17,"button",40),v("click",function(){_(e);let l=Tt(20);return h(l.click())}),o(18," Browse Files "),i(),t(19,"input",41,0),v("change",function(l){_(e);let d=c();return h(d.parseFile(l))}),i()()(),t(21,"div",42)(22,"h3",43),g(),t(23,"svg",44),p(24,"path",45),i(),o(25," Import Requirements "),i(),x(),t(26,"div",46)(27,"div")(28,"h4",47),o(29,"File Format"),i(),t(30,"ul",48)(31,"li",17),g(),t(32,"svg",49),p(33,"path",28),i(),o(34," CSV format only (.csv) "),i(),x(),t(35,"li",17),g(),t(36,"svg",49),p(37,"path",28),i(),o(38," First row must be headers "),i(),x(),t(39,"li",17),g(),t(40,"svg",49),p(41,"path",28),i(),o(42," Use commas to separate values "),i()()(),x(),t(43,"div")(44,"h4",47),o(45,"Required Fields"),i(),t(46,"ul",48)(47,"li",17),g(),t(48,"svg",49),p(49,"path",28),i(),o(50," Asset Name (required) "),i(),x(),t(51,"li",17),g(),t(52,"svg",49),p(53,"path",28),i(),o(54," All other fields are optional "),i(),x(),t(55,"li",17),g(),t(56,"svg",49),p(57,"path",28),i(),o(58," Location must exist in system "),i()()()()(),x(),t(59,"a",50),g(),t(60,"svg",7),p(61,"path",51),i(),o(62," Download Sample Template "),i()()}}function Kl(a,n){if(a&1){let e=E();t(0,"div",30)(1,"div",2)(2,"div",52),g(),t(3,"svg",53),p(4,"path",54),i()(),x(),t(5,"h2",34),o(6,"File Uploaded Successfully"),i(),t(7,"p",35),o(8,"Review your file details before proceeding"),i()(),t(9,"div",55)(10,"div",56)(11,"div",30)(12,"div",57),o(13),i(),t(14,"div",58),o(15,"File Name"),i()(),t(16,"div",30)(17,"div",57),o(18),i(),t(19,"div",58),o(20,"File Size"),i()(),t(21,"div",30)(22,"div",57),o(23),i(),t(24,"div",58),o(25,"Data Rows"),i()(),t(26,"div",30)(27,"div",57),o(28),i(),t(29,"div",58),o(30,"Columns"),i()()()(),t(31,"div",59)(32,"button",60),v("click",function(){_(e);let l=c();return h(l.back())}),o(33," Back "),i(),t(34,"button",61),v("click",function(){_(e);let l=c();return h(l.makeMapped())}),o(35," Continue to Mapping "),g(),t(36,"svg",62),p(37,"path",63),i()()()()}if(a&2){let e=c();s(13),C((e.uploadedData==null?null:e.uploadedData.name)||"N/A"),s(5),k("",e.getFileSizeInKB(e.uploadedData==null?null:e.uploadedData.size)," KB"),s(5),C((e.parsedData==null||e.parsedData.rows==null?null:e.parsedData.rows.length)||0),s(5),C((e.parsedData==null||e.parsedData.headers==null?null:e.parsedData.headers.length)||0)}}function Jl(a,n){if(a&1&&(t(0,"div",75)(1,"div",3)(2,"span",76),o(3),i(),t(4,"span",77),o(5),i()()()),a&2){let e=c(2);s(3),k("Detected ",e.parsedData.headers.length," columns in your file"),s(2),k("",e.importFields.length," available for mapping")}}function Zl(a,n){a&1&&(t(0,"span",92),o(1,"*"),i())}function Xl(a,n){a&1&&(t(0,"span",93),o(1,"(Required)"),i())}function e0(a,n){a&1&&(t(0,"span",94),o(1,"Not Mapped"),i())}function t0(a,n){if(a&1&&(t(0,"span",95),o(1),i()),a&2){let e=c().$implicit,r=c(2);s(),k(" ",r.getSelectedFieldName(e)," ")}}function n0(a,n){if(a&1){let e=E();t(0,"button",99),v("click",function(){let l=_(e).$implicit,d=c(2).$implicit;return d.map=l.map,h(d.showDropdown=!1)}),t(1,"div",82)(2,"div",101),g(),t(3,"svg",102),p(4,"path",103),i()(),x(),t(5,"div")(6,"div",79),o(7),i(),t(8,"div",58),o(9),i()()()()}if(a&2){let e=n.$implicit,r=c(2).$implicit;M("bg-blue-50",r.map===e.map)("text-blue-700",r.map===e.map),s(7),C(e.field),s(2),k("Column ",e.map,"")}}function i0(a,n){if(a&1){let e=E();t(0,"div",96)(1,"div",97)(2,"div",98),o(3,"Select field to map"),i(),t(4,"button",99),v("click",function(){_(e);let l=c().$implicit;return l.map="-1",h(l.showDropdown=!1)}),o(5," -- Not Mapped -- "),i(),b(6,n0,10,6,"button",100),i()()}if(a&2){let e=c().$implicit,r=c(2);s(4),M("bg-blue-50",e.map==="-1"),s(2),m("ngForOf",r.importFields)("ngForTrackBy",r.trackByImportField)}}function r0(a,n){a&1&&(t(0,"div",104),g(),t(1,"svg",105),p(2,"path",28),i()())}function a0(a,n){a&1&&(t(0,"div",106),g(),t(1,"svg",107),p(2,"path",23),i()())}function o0(a,n){if(a&1){let e=E();t(0,"div",78)(1,"div",3)(2,"div",17)(3,"span",79),o(4),i(),b(5,Zl,2,0,"span",80)(6,Xl,2,0,"span",81),i(),t(7,"div",82)(8,"div",83),v("click",function(l){return _(e),h(l.stopPropagation())}),t(9,"button",84),v("click",function(){let l=_(e).$implicit,d=c(2);return h(d.toggleFieldDropdown(l))}),t(10,"div",3),b(11,e0,2,0,"span",85)(12,t0,2,1,"span",86),g(),t(13,"svg",87),p(14,"path",88),i()()(),b(15,i0,7,4,"div",89),i(),b(16,r0,3,0,"div",90)(17,a0,3,0,"div",91),i()()()}if(a&2){let e=n.$implicit;s(4),C(e.title),s(),m("ngIf",e.required),s(),m("ngIf",e.required),s(3),M("border-blue-500",e.showDropdown),s(2),m("ngIf",e.map==="-1"),s(),m("ngIf",e.map!=="-1"),s(),M("rotate-180",e.showDropdown),s(2),m("ngIf",e.showDropdown),s(),m("ngIf",e.map!=="-1"),s(),m("ngIf",e.map==="-1")}}function s0(a,n){a&1&&(g(),t(0,"svg",108),p(1,"circle",109)(2,"path",110),i())}function l0(a,n){if(a&1){let e=E();t(0,"div")(1,"div",64)(2,"div",31),g(),t(3,"svg",32),p(4,"path",65),i()(),x(),t(5,"h2",34),o(6,"Map Your Fields"),i(),t(7,"p",35),o(8,"Match your CSV columns to the system fields"),i()(),b(9,Jl,6,2,"div",66),t(10,"div",67)(11,"div",68)(12,"h3",69),o(13,"Field Mapping"),i(),t(14,"p",70),o(15,"Select which column from your file maps to each system field"),i()(),t(16,"div",71),b(17,o0,18,12,"div",72),i()(),t(18,"div",59)(19,"button",60),v("click",function(){_(e);let l=c();return h(l.previousStep())}),o(20," Back "),i(),t(21,"button",73),v("click",function(){_(e);let l=c();return h(l.import())}),b(22,s0,3,0,"svg",74),o(23),i()()()}if(a&2){let e=c();s(9),m("ngIf",(e.parsedData==null||e.parsedData.headers==null?null:e.parsedData.headers.length)>0),s(8),m("ngForOf",e.assetFields)("ngForTrackBy",e.trackByField),s(4),m("disabled",e.importLoading),s(),m("ngIf",e.importLoading),s(),k(" ",e.importLoading?"Importing...":"Import Assets"," ")}}function d0(a,n){if(a&1&&(t(0,"div",127)(1,"div",128),o(2),i(),t(3,"div",117),o(4),i()()),a&2){let e=n.$implicit;s(2),C(e.name),s(2),k("ID: ",e.asset_id,"")}}function c0(a,n){if(a&1&&(t(0,"div",122)(1,"div",123)(2,"h3",124),g(),t(3,"svg",44),p(4,"path",28),i(),o(5),i(),x(),t(6,"div",125),b(7,d0,5,2,"div",126),i()()()),a&2){let e=c(3);s(5),k(" Successfully Imported (",e.importResults.imported.length,") "),s(2),m("ngForOf",e.importResults.imported)}}function m0(a,n){if(a&1&&(t(0,"div",133)(1,"div",134)(2,"div",135),o(3),i(),t(4,"span",136),o(5),i()(),t(6,"div",137),o(7),i()()),a&2){let e=n.$implicit;s(3),C(e.name),s(2),k("Row ",e.index,""),s(2),k(" ",e.error," ")}}function p0(a,n){if(a&1&&(t(0,"div",122)(1,"div",129)(2,"h3",130),g(),t(3,"svg",44),p(4,"path",19),i(),o(5),i(),x(),t(6,"div",131),b(7,m0,8,3,"div",132),i()()()),a&2){let e=c(3);s(5),k(" Failed Imports (",e.importResults.failed.length,") "),s(2),m("ngForOf",e.importResults.failed)}}function u0(a,n){if(a&1&&(t(0,"div",2)(1,"div",113)(2,"div",114)(3,"div",57),o(4),i(),t(5,"div",58),o(6,"Total Processed"),i()(),t(7,"div",115)(8,"div",116),o(9),i(),t(10,"div",117),o(11,"Successfully Imported"),i()(),t(12,"div",118)(13,"div",119),o(14),i(),t(15,"div",120),o(16,"Failed"),i()()(),b(17,c0,8,2,"div",121)(18,p0,8,2,"div",121),i()),a&2){let e=c(2);s(4),C(e.importResults.total_processed),s(5),C(e.importResults.imported_count),s(5),C(e.importResults.failed_count),s(3),m("ngIf",e.importResults.imported&&e.importResults.imported.length>0),s(),m("ngIf",e.importResults.failed&&e.importResults.failed.length>0)}}function f0(a,n){if(a&1){let e=E();t(0,"div",30)(1,"div",2)(2,"div",52),g(),t(3,"svg",53),p(4,"path",54),i()(),x(),t(5,"h2",34),o(6,"Import Results"),i(),t(7,"p",35),o(8,"Import process completed. Review the results below."),i()(),b(9,u0,19,5,"div",111),t(10,"div",59)(11,"button",60),v("click",function(){_(e);let l=c();return h(l.reset())}),o(12," Import More Assets "),i(),t(13,"button",112),v("click",function(){_(e);let l=c();return h(l.closeModal())}),o(14," View Assets "),i()()()}if(a&2){let e=c();s(9),m("ngIf",e.importResults)}}var pt=class a{constructor(n,e){this.assetService=n;this.router=e}importComplete=new ge;currentStep=1;totalSteps=4;uploadedData=null;parsedData=null;uploaded=!1;importFields=[];initMapFields=!1;importLoading=!1;isImportComplete=!1;importedCount=0;importResults=null;showResults=!1;errorMessage="";showError=!1;assetFields=[{name:"name",title:"Asset Name",map:"-1",required:!0,showDropdown:!1},{name:"description",title:"Description",map:"-1",required:!1,showDropdown:!1},{name:"category",title:"Category",map:"-1",required:!1,showDropdown:!1},{name:"type",title:"Asset Type",map:"-1",required:!1,showDropdown:!1},{name:"serial_number",title:"Serial Number",map:"-1",required:!1,showDropdown:!1},{name:"model",title:"Model",map:"-1",required:!1,showDropdown:!1},{name:"manufacturer",title:"Manufacturer",map:"-1",required:!1,showDropdown:!1},{name:"purchase_date",title:"Purchase Date",map:"-1",required:!1,showDropdown:!1},{name:"purchase_price",title:"Purchase Price",map:"-1",required:!1,showDropdown:!1},{name:"depreciation",title:"Depreciation",map:"-1",required:!1,showDropdown:!1},{name:"location",title:"Location",map:"-1",required:!1,showDropdown:!1},{name:"department",title:"Department",map:"-1",required:!1,showDropdown:!1},{name:"warranty",title:"Warranty",map:"-1",required:!1,showDropdown:!1},{name:"insurance",title:"Insurance",map:"-1",required:!1,showDropdown:!1},{name:"health_score",title:"Health Score",map:"-1",required:!1,showDropdown:!1},{name:"status",title:"Status",map:"-1",required:!1,showDropdown:!1}];parseFile(n){let e=n.target.files[0];if(this.uploadedData=e,this.clearError(),!e){this.errorMessage="No file selected",this.showError=!0;return}let r=e.name.split(".").pop()?.toLowerCase();if(!r||!["csv"].includes(r)){this.errorMessage="Please upload a valid CSV file. Excel files (.xls, .xlsx) are not supported in this version.",this.showError=!0;return}let l=new FileReader;l.readAsText(e),l.onload=()=>{try{let d=l.result;if(d.length>1e3&&d.includes("\0")){this.errorMessage="Invalid file format. Please ensure you are uploading a valid CSV file.",this.showError=!0;return}let y=d.split(/\r?\n/).filter(B=>B.trim()!=="");if(y.length<2){this.errorMessage="File must contain at least a header row and one data row.",this.showError=!0;return}let P=y[0],L=this.parseCSVLine(P);if(L.length===0){this.errorMessage="No valid headers found in the CSV file.",this.showError=!0;return}let j=y.slice(1).map(B=>this.parseCSVLine(B)).filter(B=>B.length>0&&B.some(re=>re.trim()!==""));this.parsedData={headers:L,rows:j},this.uploaded=!0,this.nextStep()}catch(d){console.error("Error parsing file:",d),this.errorMessage="Error parsing the file. Please ensure it is a valid CSV file.",this.showError=!0}},l.onerror=()=>{this.errorMessage="Error reading the file. Please try again.",this.showError=!0}}parseCSVLine(n){let e=[],r="",l=!1;for(let d=0;d<n.length;d++){let y=n[d];y==='"'?l&&n[d+1]==='"'?(r+='"',d++):l=!l:y===","&&!l?(e.push(r.trim()),r=""):r+=y}return e.push(r.trim()),e}normalize(n){return n.toLowerCase().replace(/[^a-z0-9]/gi,"").trim()}getFileSizeInKB(n=0){return Math.round(n/1024)}nextStep(){this.currentStep<this.totalSteps&&(this.clearError(),this.currentStep++)}previousStep(){this.currentStep>1&&(this.clearError(),this.currentStep--)}back(){this.clearError(),this.uploaded=!1,this.parsedData=null,this.uploadedData=null,this.currentStep=1}makeMapped(){this.clearError(),this.importFields=[];let n=this.parsedData.headers;if(this.initMapFields=!0,this.assetFields.forEach(e=>{e.map="-1",e.showDropdown=!1}),this.assetFields.forEach((e,r)=>{n.forEach((l,d)=>{this.normalize(e.title)===this.normalize(l)&&(this.assetFields[r].map=d.toString())})}),n.forEach((e,r)=>{let l=e.trim();l&&l.length>0&&this.importFields.push({field:l,map:r.toString()})}),this.importFields.length===0){this.errorMessage="No valid fields found in the uploaded file. Please check your CSV format.",this.showError=!0;return}this.nextStep()}formatErrorMessage(n){if(n.error&&n.error.data&&n.error.data.errors){let e=n.error.data.errors;return`Validation errors:
${Object.keys(e).map(l=>`${l}: ${e[l].join(", ")}`).join(`
`)}`}else return n.error&&n.error.message?n.error.message:n.error&&n.error.error?n.error.error:n.message?n.message:"Import failed. Please check your data and try again."}import(){this.clearError(),this.importLoading=!0;let n=[],r=this.assetFields.filter(d=>d.required).filter(d=>d.map==="-1");if(r.length>0){this.importLoading=!1,this.errorMessage=`Please map the following required fields: ${r.map(d=>d.title).join(", ")}`,this.showError=!0;return}let l=["Active","Inactive","Maintenance","Retired","active","inactive","maintenance","retired"];if(this.parsedData.rows.forEach((d,y)=>{if(!d||d.length===0||d.every(j=>!j||j.trim()===""))return;let P={},L=!0,J="";if(this.assetFields.forEach(j=>{if(j.map!=="-1"&&d[parseInt(j.map)]!==void 0){let B=d[parseInt(j.map)].trim();j.required&&(!B||B==="")&&(L=!1),j.name==="status"&&B&&(l.includes(B)||(J=`Invalid status value "${B}" in row ${y+1}. Valid values are: ${l.join(", ")}`)),P[j.name]=B}}),J){this.importLoading=!1,this.errorMessage=J,this.showError=!0;return}L&&P.name&&n.push(P)}),n.length===0){this.importLoading=!1,this.errorMessage="No valid assets found to import. Please check your data and field mappings.",this.showError=!0;return}console.log("Importing assets:",n),jn(300).subscribe({complete:()=>{this.assetService.bulkImportAssets({assets:n}).subscribe({next:d=>{console.log("Import response:",d),d.success?(this.importResults=d.data,this.importedCount=d.data.imported_count||0,this.isImportComplete=!0,this.showResults=!0,this.nextStep()):(this.errorMessage=d.message||"Import failed",this.showError=!0),this.importLoading=!1},error:d=>{console.error("Import error:",d),this.errorMessage=this.formatErrorMessage(d),this.showError=!0,this.importLoading=!1}})}})}clearError(){this.errorMessage="",this.showError=!1}reset(){this.currentStep=1,this.uploaded=!1,this.initMapFields=!1,this.importLoading=!1,this.isImportComplete=!1,this.importedCount=0,this.parsedData=null,this.uploadedData=null,this.importFields=[],this.assetFields.forEach(n=>{n.map="-1",n.showDropdown=!1}),this.importResults=null,this.showResults=!1,this.clearError()}closeModal(){this.importComplete.emit(),this.reset(),this.router.navigate(["/assets/list"])}trackByField(n,e){return e.name}trackByImportField(n,e){return e.map}toggleFieldDropdown(n){this.assetFields.forEach(e=>{e!==n&&(e.showDropdown=!1)}),n.showDropdown=!n.showDropdown}getSelectedFieldName(n){if(n.map==="-1")return"Not Mapped";let e=this.importFields.find(r=>r.map===n.map);return e?e.field:"Unknown Field"}closeAllDropdowns(){this.assetFields.forEach(n=>{n.showDropdown=!1})}static \u0275fac=function(e){return new(e||a)(K(Ce),K(Te))};static \u0275cmp=ae({type:a,selectors:[["app-smart-import"]],outputs:{importComplete:"importComplete"},decls:22,vars:7,consts:[["fileInput",""],[1,"min-h-screen","bg-gray-50","p-6",3,"click"],[1,"mb-8"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900","mb-1"],[1,"text-gray-600","text-base"],["routerLink","/assets/list",1,"bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","px-4","py-2","rounded-lg","transition-colors","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["class","mb-6 bg-red-50 border border-red-200 rounded-xl p-4",4,"ngIf"],[1,"max-w-4xl","mx-auto"],[1,"flex","items-center","justify-center","space-x-4"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-8"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"mb-6","bg-red-50","border","border-red-200","rounded-xl","p-4"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-700","font-medium"],[1,"text-red-500","hover:text-red-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","flex-col","items-center"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","text-sm","font-semibold","transition-all","duration-300"],[1,"mt-2","text-xs","font-medium"],["class","w-16 h-0.5 mx-4 transition-all duration-300",3,"class",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"w-16","h-0.5","mx-4","transition-all","duration-300"],[1,"text-center"],[1,"w-20","h-20","bg-blue-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"border-2","border-dashed","border-blue-300","rounded-xl","p-8","mb-6","hover:border-blue-400","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-blue-400","mx-auto","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],["type","file","accept",".csv,.CSV",1,"hidden",3,"change"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-6","mb-6"],[1,"text-lg","font-semibold","text-blue-900","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","text-sm"],[1,"font-medium","text-blue-900","mb-2"],[1,"space-y-1","text-blue-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","text-blue-600"],["href","/assets/templates/asset-import-template.csv","download","asset-import-template.csv",1,"inline-flex","items-center","text-blue-600","hover:text-blue-700","font-medium","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"w-20","h-20","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-gray-50","border","border-gray-200","rounded-xl","p-6","mb-8"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","justify-center","space-x-4"],[1,"bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"mb-8","text-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["class","bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",4,"ngIf"],[1,"bg-white","border","border-gray-200","rounded-xl","overflow-hidden","mb-8"],[1,"bg-gray-50","px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors","flex","items-center",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-4 w-4 text-white","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-4","mb-6"],[1,"text-sm","font-medium","text-blue-900"],[1,"text-xs","text-blue-600","bg-blue-100","px-2","py-1","rounded-full"],[1,"px-6","py-4"],[1,"font-medium","text-gray-900"],["class","ml-2 text-red-500 text-sm font-medium",4,"ngIf"],["class","ml-1 text-xs text-gray-500",4,"ngIf"],[1,"flex","items-center","space-x-3"],[1,"relative","min-w-[200px]",3,"click"],["type","button",1,"w-full","px-4","py-3","text-left","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white","transition-all",3,"click"],["class","text-gray-400",4,"ngIf"],["class","text-gray-900",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",4,"ngIf"],["class","w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",4,"ngIf"],["class","w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",4,"ngIf"],[1,"ml-2","text-red-500","text-sm","font-medium"],[1,"ml-1","text-xs","text-gray-500"],[1,"text-gray-400"],[1,"text-gray-900"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-auto"],[1,"py-1"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","bg-gray-50"],["type","button",1,"w-full","px-3","py-3","text-left","hover:bg-blue-50","focus:bg-blue-50","focus:outline-none","transition-colors",3,"click"],["type","button","class","w-full px-3 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-8","h-8","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"w-6","h-6","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],[1,"w-6","h-6","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["class","mb-8",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-3","rounded-lg","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"bg-gray-50","border","border-gray-200","rounded-xl","p-6","text-center"],[1,"bg-green-50","border","border-green-200","rounded-xl","p-6","text-center"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-sm","text-green-600"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-6","text-center"],[1,"text-2xl","font-bold","text-red-600"],[1,"text-sm","text-red-600"],["class","mb-6",4,"ngIf"],[1,"mb-6"],[1,"bg-green-50","border","border-green-200","rounded-xl","p-6"],[1,"text-lg","font-semibold","text-green-900","mb-4","flex","items-center"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],["class","bg-white border border-green-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"bg-white","border","border-green-200","rounded-lg","p-3"],[1,"font-medium","text-green-900"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-6"],[1,"text-lg","font-semibold","text-red-900","mb-4","flex","items-center"],[1,"space-y-3"],["class","bg-white border border-red-200 rounded-lg p-4",4,"ngFor","ngForOf"],[1,"bg-white","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-red-900"],[1,"text-xs","bg-red-100","text-red-600","px-2","py-1","rounded-full"],[1,"text-sm","text-red-700","bg-red-50","border-l-4","border-red-400","pl-3","py-2"]],template:function(e,r){e&1&&(t(0,"div",1),v("click",function(){return r.closeAllDropdowns()}),t(1,"div",2)(2,"div",3)(3,"div")(4,"h1",4),o(5,"Smart Asset Import"),i(),t(6,"p",5),o(7,"Import multiple assets efficiently with our guided wizard"),i()(),t(8,"button",6),g(),t(9,"svg",7),p(10,"path",8),i(),o(11," Back to Assets "),i()()(),b(12,Ul,10,1,"div",9),x(),t(13,"div",10)(14,"div",2)(15,"div",11),b(16,ql,8,8,"div",12),i()(),t(17,"div",13),b(18,Ql,63,0,"div",14)(19,Kl,38,4,"div",14)(20,l0,24,6,"div",15)(21,f0,15,1,"div",14),i()()()),e&2&&(s(12),m("ngIf",r.showError),s(4),m("ngForOf",He(6,zl)),s(2),m("ngIf",r.currentStep===1),s(),m("ngIf",r.currentStep===2),s(),m("ngIf",r.currentStep===3),s(),m("ngIf",r.currentStep===4))},dependencies:[se,we,oe,ce],encapsulation:2})};var g0=[{path:"list",component:ot},{path:"create",component:an},{path:"import",component:pt},{path:"preview/:id",component:ct},{path:":id/edit",component:mt}],on=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=At({type:a});static \u0275inj=Mt({imports:[Le.forChild(g0),Le]})};var oi=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=At({type:a});static \u0275inj=Mt({imports:[se,on,ot,ct,mt,dt,pt,Kn]})};export{oi as AssetsModule};
