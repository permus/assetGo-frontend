import{a as s}from"./chunk-VUTA7ABU.js";import{C as a,D as f}from"./chunk-42X3OFWX.js";import{Bb as g,Ja as b,Pa as m,V as p,_ as l,_a as d,qa as u,va as h}from"./chunk-MPDVOBHD.js";import{a as n,b as c}from"./chunk-EQDQRRRY.js";var y=class o{constructor(e){this.http=e}apiUrl=`${s.apiUrl}/locations`;getAuthHeaders(){let e=localStorage.getItem("token");return{headers:n({"Content-Type":"application/json"},e?{Authorization:`Bearer ${e}`}:{})}}getLocations(e={}){let t=new a;return Object.keys(e).forEach(r=>{let i=e[r];i!=null&&i!==""&&(t=t.set(r,i.toString()))}),this.http.get(this.apiUrl,n({params:t},this.getAuthHeaders()))}getLocation(e){return this.http.get(`${this.apiUrl}/${e}`,this.getAuthHeaders())}createLocation(e){return this.http.post(this.apiUrl,e,this.getAuthHeaders())}updateLocation(e,t){return this.http.put(`${this.apiUrl}/${e}`,t,this.getAuthHeaders())}deleteLocation(e){return this.http.delete(`${this.apiUrl}/${e}`,this.getAuthHeaders())}bulkCreateLocations(e){return this.http.post(`${this.apiUrl}/bulk`,{locations:e},this.getAuthHeaders())}moveLocations(e,t){return this.http.post(`${this.apiUrl}/move`,{location_ids:e,new_parent_id:t},this.getAuthHeaders())}getQRCode(e,t="download",r="png"){let i=new a().set("action",t).set("format",r);return this.http.get(`${this.apiUrl}/${e}/qr`,n({params:i,responseType:"blob"},this.getAuthHeaders()))}getLocationTypes(e){let t=new a;return e!==void 0&&(t=t.set("hierarchy_level",e.toString())),this.http.get(`${s.apiUrl}/location-types`,n({params:t},this.getAuthHeaders()))}getHierarchy(){return this.http.get(`${s.apiUrl}/locations-hierarchy`,this.getAuthHeaders())}getPossibleParents(e,t){let r=new a().set("type_id",e.toString());t&&(r=r.set("location_id",t.toString()));let i=t?`${s.apiUrl}/locations/possible-parents/${t}`:`${s.apiUrl}/locations/possible-parents`;return this.http.get(i,n({params:r},this.getAuthHeaders()))}exportQRCodes(){return this.http.get(`${s.apiUrl}/locations/export-qr`,c(n({},this.getAuthHeaders()),{responseType:"blob"}))}static \u0275fac=function(t){return new(t||o)(l(f))};static \u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"})};var _=class o{constructor(e){this.elementRef=e}clickOutside=new u;onClick(e){this.elementRef.nativeElement.contains(e)||this.clickOutside.emit()}static \u0275fac=function(t){return new(t||o)(m(h))};static \u0275dir=d({type:o,selectors:[["","clickOutside",""]],hostBindings:function(t,r){t&1&&g("click",function(L){return r.onClick(L.target)},!1,b)},outputs:{clickOutside:"clickOutside"}})};export{y as a,_ as b};
