import{c as $,d as I,f as M,g as P}from"./chunk-C5P3YSZX.js";import{a as ne,b as Y,c as oe,d as re,e as Ft,f as ae,g as Nt,h as se,i as jt,j as zt,k as le,l as Oe,m as He,n as Ae,o as Bt,p as Gt,q as $t,r as ce,s as Fe,t as X}from"./chunk-7KY4LBZJ.js";import{a as _e}from"./chunk-GTJMVMJN.js";import{$ as pe,A as Ie,Aa as Vt,B as v,Ba as Ce,C as x,D as u,E as g,Ea as Z,Fa as z,G as Pe,Ga as A,H as G,Ha as Ot,I as we,J as Re,K as it,Ka as ke,L as Tt,La as Ht,O as Q,Oa as At,P as It,Q as c,Qa as Ve,R as Se,T,U as O,Ua as he,V as te,Y as b,_ as Pt,a as j,aa as p,b as Te,ba as V,ca as D,d as me,da as i,e as Je,ea as a,f as E,fa as h,ga as nt,h as et,ha as ot,ia as C,ja as f,ka as m,l as Ct,la as Rt,m as kt,ma as l,n as Mt,na as y,o as Et,oa as k,p as tt,pa as ie,q as H,qa as rt,ra as at,sa as st,u as K,ua as lt,v as ee,x as Lt,y as R,z as Dt}from"./chunk-SISXQAZ6.js";var F=class o{constructor(t){this.http=t}apiUrl=`${_e.apiUrl}/locations`;getAuthHeaders(){let t=localStorage.getItem("token");return{headers:j({"Content-Type":"application/json"},t?{Authorization:`Bearer ${t}`}:{})}}getLocations(t={}){let e=new ke;return Object.keys(t).forEach(n=>{let r=t[n];r!=null&&r!==""&&(e=e.set(n,r.toString()))}),this.http.get(this.apiUrl,j({params:e},this.getAuthHeaders()))}getLocation(t){return this.http.get(`${this.apiUrl}/${t}`,this.getAuthHeaders())}createLocation(t){return this.http.post(this.apiUrl,t,this.getAuthHeaders())}updateLocation(t,e){return this.http.put(`${this.apiUrl}/${t}`,e,this.getAuthHeaders())}deleteLocation(t){return this.http.delete(`${this.apiUrl}/${t}`,this.getAuthHeaders())}bulkCreateLocations(t){return this.http.post(`${this.apiUrl}/bulk`,{locations:t},this.getAuthHeaders())}moveLocations(t,e){return this.http.post(`${this.apiUrl}/move`,{location_ids:t,new_parent_id:e},this.getAuthHeaders())}getQRCode(t,e="download",n="png"){let r=new ke().set("action",e).set("format",n);return this.http.get(`${this.apiUrl}/${t}/qr`,j({params:r,responseType:"blob"},this.getAuthHeaders()))}getLocationTypes(t){let e=new ke;return t!==void 0&&(e=e.set("hierarchy_level",t.toString())),this.http.get(`${_e.apiUrl}/location-types`,j({params:e},this.getAuthHeaders()))}getHierarchy(){return this.http.get(`${_e.apiUrl}/locations-hierarchy`,this.getAuthHeaders())}getPossibleParents(t,e){let n=new ke().set("type_id",t.toString());e&&(n=n.set("location_id",e.toString()));let r=e?`${_e.apiUrl}/locations/possible-parents/${e}`:`${_e.apiUrl}/locations/possible-parents`;return this.http.get(r,j({params:n},this.getAuthHeaders()))}static \u0275fac=function(e){return new(e||o)(Lt(Ht))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};function yi(o,t){o&1&&(i(0,"div",48)(1,"p",49),l(2,"Location Hierarchy:"),a(),i(3,"div",50)(4,"div")(5,"strong"),l(6,"Level 0:"),a(),l(7," Communities, Campuses, Buildings"),a(),i(8,"div")(9,"strong"),l(10,"Level 1:"),a(),l(11," Buildings, Floors"),a(),i(12,"div")(13,"strong"),l(14,"Level 2+:"),a(),l(15," Rooms, Areas, Amenities"),a()(),i(16,"p",51),l(17,"Available types: 16 options including Community, Campus, and Buildings"),a()())}function wi(o,t){if(o&1&&(i(0,"div",52)(1,"div",4)(2,"div",53),h(3,"img",54),a(),i(4,"div",55)(5,"p",56),l(6,"Parent Location:"),a(),i(7,"p",57),l(8),a(),i(9,"p",58),l(10),a()()()()),o&2){let e=m(2);c(3),p("src",e.parentLocation.type.icon,Q)("alt",e.parentLocation.type.name),c(5),ie("",e.parentLocation.name," (",e.parentLocation.type.name,")"),c(2),k("Creating Level ",e.parentLocation.hierarchy_level+1," location")}}function Si(o,t){if(o&1){let e=C();i(0,"div",59),f("click",function(){let r=v(e).$implicit,s=m(2);return x(s.selectLocationType(r))}),i(1,"div",60)(2,"div",61),h(3,"img",62),a(),i(4,"div",63),l(5),a(),i(6,"div",64),l(7),a()()()}if(o&2){let e=t.$implicit,n=m(2);D(n.selectedTypeId===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),c(3),p("src",e.icon,Q)("alt",e.name),c(2),y(e.name),c(2),y(n.getTypeDescription(e))}}function Ci(o,t){if(o&1){let e=C();i(0,"div",60)(1,"button",65),f("click",function(){v(e);let r=m(2);return x(r.toggleShowAllTypes())}),u(),i(2,"svg",66),h(3,"path",67),a(),g(),i(4,"span"),l(5),a()()()}if(o&2){let e=m(2);c(5),y(e.showAllTypes?"Show Less":e.locationTypes.length-6+" More Types")}}function ki(o,t){if(o&1&&(i(0,"div",68)(1,"p",69),l(2),a()()),o&2){let e=m(2);c(2),y(e.errorMessage)}}function Mi(o,t){o&1&&(i(0,"span"),l(1,"Create Location"),a())}function Ei(o,t){o&1&&(i(0,"span",70),u(),i(1,"svg",71),h(2,"circle",72)(3,"path",73),a(),g(),i(4,"span"),l(5,"Creating..."),a()())}function Li(o,t){if(o&1){let e=C();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),u(),i(5,"svg",6),h(6,"path",7)(7,"path",8),a()(),g(),i(8,"h2",9),l(9,"Add New Location"),a()(),i(10,"button",10),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),u(),i(11,"svg",11),h(12,"path",12),a()()(),g(),i(13,"div",13)(14,"div",14)(15,"div",15),u(),i(16,"svg",16),h(17,"path",17),a()(),g(),i(18,"h3",18),l(19),a(),i(20,"p",19),l(21),a(),b(22,yi,18,0,"div",20)(23,wi,11,5,"div",21),a(),i(24,"form",22),f("ngSubmit",function(){v(e);let r=m();return x(r.onSubmit())}),i(25,"div",23)(26,"div",24),u(),i(27,"svg",25),h(28,"path",26),a(),g(),i(29,"h4",27),l(30,"Basic Information"),a()(),i(31,"div",28)(32,"label",29),l(33," Location Name "),i(34,"span",30),l(35,"*"),a()(),h(36,"input",31),a(),i(37,"div",28)(38,"label",32),l(39,"Description"),a(),h(40,"textarea",33),a(),i(41,"div",28)(42,"label",34),l(43,"Address"),a(),i(44,"div",35),u(),i(45,"svg",36),h(46,"path",7)(47,"path",8),a(),g(),h(48,"input",37),a()()(),i(49,"div",23)(50,"div",24),u(),i(51,"svg",25),h(52,"path",38),a(),g(),i(53,"h4",27),l(54,"Location Type"),a()(),i(55,"div",39),b(56,Si,8,6,"div",40),a(),b(57,Ci,6,1,"div",41),a(),b(58,ki,3,1,"div",42),i(59,"div",43)(60,"button",44),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),l(61," Use Template "),a(),i(62,"button",45),b(63,Mi,2,0,"span",46)(64,Ei,6,0,"span",47),a()()()()()()}if(o&2){let e,n=m();p("@backdropAnimation",void 0),c(),p("@modalAnimation",void 0),c(18),k(" ",n.parentLocation?"Add New Sub-location":"Add New Facility"," "),c(2),k(" ",n.parentLocation?"Create a new sub-location under "+n.parentLocation.name:"Create a new top-level facility or community"," "),c(),p("ngIf",!n.parentLocation),c(),p("ngIf",n.parentLocation),c(),p("formGroup",n.locationForm),c(12),V("border-red-300",((e=n.locationForm.get("name"))==null?null:e.invalid)&&((e=n.locationForm.get("name"))==null?null:e.touched)),c(20),p("ngForOf",n.getDisplayedTypes()),c(),p("ngIf",n.locationTypes.length>6),c(),p("ngIf",n.errorMessage),c(4),p("disabled",n.locationForm.invalid||n.isLoading),c(),p("ngIf",!n.isLoading),c(),p("ngIf",n.isLoading)}}var fe=class o{constructor(t,e){this.fb=t;this.locationService=e;this.locationForm=this.fb.group({name:["",[Y.required,Y.minLength(2)]],description:[""],address:[""],location_type_id:[null,Y.required]})}isOpen=!1;parentLocation=null;closeModal=new G;locationCreated=new G;locationForm;locationTypes=[];selectedTypeId=null;isLoading=!1;errorMessage="";showAllTypes=!1;ngOnInit(){this.loadLocationTypes()}loadLocationTypes(){let t=this.parentLocation?this.parentLocation.hierarchy_level+1:0;this.locationService.getLocationTypes(t).subscribe({next:e=>{e.success&&(this.locationTypes=e.data.types)},error:e=>{console.error("Error loading location types:",e)}})}getDisplayedTypes(){return this.showAllTypes?this.locationTypes:this.locationTypes.slice(0,6)}selectLocationType(t){this.selectedTypeId=t.id,this.locationForm.patchValue({location_type_id:t.id})}getTypeDescription(t){return t.description||`${t.category}`}getTypeIcon(t){return`assets/icons/${t.icon}.svg`}onSubmit(){if(this.locationForm.valid&&!this.isLoading){this.isLoading=!0,this.errorMessage="";let t=Te(j({},this.locationForm.value),{parent_id:this.parentLocation?this.parentLocation.id:null});this.locationService.createLocation(t).subscribe({next:e=>{e.success?(this.locationCreated.emit(e.data.location),this.closeModalHandler()):this.errorMessage=e.message||"Failed to create location",this.isLoading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while creating the location",this.isLoading=!1}})}}closeModalHandler(){this.isOpen=!1,this.closeModal.emit(),this.resetForm()}resetForm(){this.locationForm.reset(),this.selectedTypeId=null,this.errorMessage="",this.showAllTypes=!1}toggleShowAllTypes(){this.showAllTypes=!this.showAllTypes}static \u0275fac=function(e){return new(e||o)(T(ce),T(F))};static \u0275cmp=O({type:o,selectors:[["app-add-location-modal"]],inputs:{isOpen:"isOpen",parentLocation:"parentLocation"},outputs:{closeModal:"closeModal",locationCreated:"locationCreated"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"text-center","mb-8"],[1,"w-16","h-16","bg-blue-50","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","text-sm"],["class","mt-4 p-4 bg-blue-50 rounded-lg",4,"ngIf"],["class","mt-4 p-4 bg-green-50 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","name","type","text","formControlName","name","placeholder","Enter location name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Brief description of this location",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],["for","address",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["id","address","type","text","formControlName","address","placeholder","Enter the address",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],["class","border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-sm",3,"class","click",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mt-4","p-4","bg-blue-50","rounded-lg"],[1,"text-sm","font-medium","text-blue-900","mb-2"],[1,"text-xs","text-blue-700","space-y-1"],[1,"text-xs","text-blue-600","mt-2"],[1,"mt-4","p-4","bg-green-50","rounded-lg"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6",3,"src","alt"],[1,"text-left"],[1,"text-sm","font-medium","text-green-900"],[1,"text-sm","text-green-700"],[1,"text-xs","text-green-600"],[1,"border-2","rounded-lg","p-4","cursor-pointer","transition-all","hover:shadow-sm",3,"click"],[1,"text-center"],[1,"mb-2","flex","justify-center"],[1,"w-8","h-8","text-gray-600",3,"src","alt"],[1,"font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-500"],["type","button",1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-sm","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&b(0,Li,65,15,"div",0),e&2&&p("ngIf",n.isOpen)},dependencies:[A,Z,z,X,ae,ne,oe,re,se,le],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-type-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.location-type-card.selected[_ngcontent-%COMP%]{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f633}.type-icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.hierarchy-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-type-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[$("backdropAnimation",[P(":enter",[M({opacity:0}),I("150ms ease-out",M({opacity:1}))]),P(":leave",[I("150ms ease-in",M({opacity:0}))])]),$("modalAnimation",[P(":enter",[M({opacity:0,transform:"scale(0.7) translateY(-50px)"}),I("200ms ease-out",M({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[I("150ms ease-in",M({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Di(o,t){if(o&1&&(i(0,"div",42)(1,"p",43),l(2),a()()),o&2){let e=m(2);c(2),y(e.errorMessage)}}function Ti(o,t){if(o&1&&(i(0,"div",44)(1,"div",4)(2,"div",5),h(3,"img",45),a(),i(4,"div")(5,"div",46),l(6),a(),i(7,"div",47),l(8,"Current location type"),a()()()()),o&2){let e=m(2);c(3),p("src",e.location.type.icon,Q)("alt",e.location.type.name),c(3),y(e.location.type.name)}}function Ii(o,t){if(o&1){let e=C();i(0,"div",48),f("click",function(){let r=v(e).$implicit,s=m(2);return x(s.selectLocationType(r))}),i(1,"div",49)(2,"div",50),h(3,"img",51),a(),i(4,"div",52),l(5),a(),i(6,"div",53),l(7),a()()()}if(o&2){let e=t.$implicit,n=m(2);D(n.selectedTypeId===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),c(3),p("src",e.icon,Q)("alt",e.name),c(2),y(e.name),c(2),y(n.getTypeDescription(e))}}function Pi(o,t){if(o&1){let e=C();i(0,"div",49)(1,"button",54),f("click",function(){v(e);let r=m(2);return x(r.toggleShowAllTypes())}),u(),i(2,"svg",55),h(3,"path",56),a(),g(),i(4,"span"),l(5),a()()()}if(o&2){let e=m(2);c(5),y(e.showAllTypes?"Show Less":e.locationTypes.length-6+" More Types")}}function Ri(o,t){o&1&&(i(0,"span"),l(1,"Update Location"),a())}function Vi(o,t){o&1&&(i(0,"span",57),u(),i(1,"svg",58),h(2,"circle",59)(3,"path",60),a(),g(),i(4,"span"),l(5,"Updating..."),a()())}function Oi(o,t){if(o&1){let e=C();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),u(),i(5,"svg",6),h(6,"path",7),a()(),g(),i(7,"h2",8),l(8,"Edit Location"),a()(),i(9,"button",9),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),u(),i(10,"svg",10),h(11,"path",11),a()()(),g(),i(12,"div",12),b(13,Di,3,1,"div",13),i(14,"form",14),f("ngSubmit",function(){v(e);let r=m();return x(r.onSubmit())}),i(15,"div",15)(16,"div",16),u(),i(17,"svg",17),h(18,"path",18),a(),g(),i(19,"h4",19),l(20,"Basic Information"),a()(),i(21,"div",20)(22,"label",21),l(23," Location Name "),i(24,"span",22),l(25,"*"),a()(),h(26,"input",23),a(),i(27,"div",20)(28,"label",24),l(29,"Description"),a(),h(30,"textarea",25),a(),i(31,"div",20)(32,"label",26),l(33,"Address"),a(),i(34,"div",27),u(),i(35,"svg",28),h(36,"path",29)(37,"path",30),a(),g(),h(38,"input",31),a()()(),i(39,"div",15)(40,"div",16),u(),i(41,"svg",17),h(42,"path",32),a(),g(),i(43,"h4",19),l(44,"Location Type"),a()(),b(45,Ti,9,3,"div",33),i(46,"div",34),b(47,Ii,8,6,"div",35),a(),b(48,Pi,6,1,"div",36),a(),i(49,"div",37)(50,"button",38),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),l(51," Cancel "),a(),i(52,"button",39),b(53,Ri,2,0,"span",40)(54,Vi,6,0,"span",41),a()()()()()()}if(o&2){let e,n=m();p("@backdropAnimation",void 0),c(),p("@modalAnimation",void 0),c(12),p("ngIf",n.errorMessage),c(),p("formGroup",n.editForm),c(12),V("border-red-300",((e=n.editForm.get("name"))==null?null:e.invalid)&&((e=n.editForm.get("name"))==null?null:e.touched)),c(19),p("ngIf",n.location),c(2),p("ngForOf",n.getDisplayedTypes()),c(),p("ngIf",n.locationTypes.length>6),c(4),p("disabled",n.editForm.invalid||n.loading),c(),p("ngIf",!n.loading),c(),p("ngIf",n.loading)}}var Ne=class o{constructor(t,e){this.fb=t;this.locationService=e;this.editForm=this.fb.group({name:["",[Y.required,Y.minLength(2)]],description:[""],address:[""],location_type_id:[null,Y.required]})}isOpen=!1;location=null;closeModal=new G;locationUpdated=new G;editForm;locationTypes=[];selectedTypeId=null;loading=!1;errorMessage="";showAllTypes=!1;ngOnInit(){this.loadLocationTypes()}ngOnChanges(t){t.location&&this.location&&this.populateForm()}loadLocationTypes(){let t=this.location?.hierarchy_level;this.locationService.getLocationTypes(t).subscribe({next:e=>{e.success&&(this.locationTypes=e.data.types)},error:e=>{console.error("Error loading location types:",e)}})}populateForm(){this.location&&(this.editForm.patchValue({name:this.location.name,description:this.location.description||"",address:this.location.address||"",location_type_id:this.location.location_type_id}),this.selectedTypeId=this.location.location_type_id)}getDisplayedTypes(){return this.showAllTypes?this.locationTypes:this.locationTypes.slice(0,6)}selectLocationType(t){this.selectedTypeId=t.id,this.editForm.patchValue({location_type_id:t.id})}getTypeDescription(t){return t.description||`${t.category}`}getTypeIcon(t){return`assets/icons/${t.icon}.svg`}onSubmit(){if(this.editForm.valid&&!this.loading&&this.location){this.loading=!0,this.errorMessage="";let t=j({},this.editForm.value);this.locationService.updateLocation(this.location.id,t).subscribe({next:e=>{e.success?(this.locationUpdated.emit(e.data.location),this.closeModalHandler()):this.errorMessage=e.message||"Failed to update location",this.loading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while updating the location",this.loading=!1}})}}closeModalHandler(){this.isOpen=!1,this.closeModal.emit(),this.resetForm()}resetForm(){this.editForm.reset(),this.selectedTypeId=null,this.errorMessage="",this.showAllTypes=!1}toggleShowAllTypes(){this.showAllTypes=!this.showAllTypes}static \u0275fac=function(e){return new(e||o)(T(ce),T(F))};static \u0275cmp=O({type:o,selectors:[["app-edit-location-modal"]],inputs:{isOpen:"isOpen",location:"location"},outputs:{closeModal:"closeModal",locationUpdated:"locationUpdated"},features:[Ie],decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","name","type","text","formControlName","name","placeholder","Enter location name","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Brief description of this location",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],["for","address",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["id","address","type","text","formControlName","address","placeholder","Enter the address",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["class","mb-4 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],["class","border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-sm",3,"class","click",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"mb-4","p-4","bg-gray-50","rounded-lg"],[1,"w-6","h-6",3,"src","alt"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"border-2","rounded-lg","p-4","cursor-pointer","transition-all","hover:shadow-sm",3,"click"],[1,"text-center"],[1,"mb-2","flex","justify-center"],[1,"w-8","h-8","text-gray-600",3,"src","alt"],[1,"font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-500"],["type","button",1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-sm","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&b(0,Oi,55,12,"div",0),e&2&&p("ngIf",n.isOpen)},dependencies:[A,Z,z,X,ae,ne,oe,re,$t,se,le],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-type-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.location-type-card.selected[_ngcontent-%COMP%]{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f633}.type-icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.current-type-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-type-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[$("backdropAnimation",[P(":enter",[M({opacity:0}),I("150ms ease-out",M({opacity:1}))]),P(":leave",[I("150ms ease-in",M({opacity:0}))])]),$("modalAnimation",[P(":enter",[M({opacity:0,transform:"scale(0.7) translateY(-50px)"}),I("200ms ease-out",M({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[I("150ms ease-in",M({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Hi(o,t){if(o&1&&(i(0,"div",34),l(1),a()),o&2){let e=m(3);c(),k(" \u26A0\uFE0F This location has ",e.location.children==null?null:e.location.children.length," child location(s) ")}}function Ai(o,t){if(o&1&&(i(0,"div",27)(1,"div",4)(2,"div",28),h(3,"img",29),a(),i(4,"div",30)(5,"div",31),l(6),a(),i(7,"div",32),l(8),a(),b(9,Hi,2,1,"div",33),a()()()),o&2){let e=m(2);c(3),p("src",e.location.type.icon,Q)("alt",e.location.type.name),c(3),y(e.location.name),c(2),y(e.location.type.name),c(),p("ngIf",e.location.children==null?null:e.location.children.length)}}function Fi(o,t){if(o&1&&(i(0,"div",35)(1,"p",36),l(2),a()()),o&2){let e=m(2);c(2),y(e.errorMessage)}}function Ni(o,t){o&1&&(i(0,"span"),l(1,"Delete Location"),a())}function ji(o,t){o&1&&(i(0,"span",37),u(),i(1,"svg",38),h(2,"circle",39)(3,"path",40),a(),g(),i(4,"span"),l(5,"Deleting..."),a()())}function zi(o,t){if(o&1){let e=C();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),u(),i(5,"svg",6),h(6,"path",7),a()(),g(),i(7,"h2",8),l(8,"Delete Location"),a()(),i(9,"button",9),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),u(),i(10,"svg",10),h(11,"path",11),a()()(),g(),i(12,"div",12)(13,"div",13)(14,"div",14),u(),i(15,"svg",15),h(16,"path",16),a()()(),g(),i(17,"div",17)(18,"h3",18),l(19,"Are you sure?"),a(),i(20,"p",19),l(21," You are about to delete the location "),i(22,"strong"),l(23),a(),l(24,". This action cannot be undone. "),a(),b(25,Ai,10,5,"div",20),a(),b(26,Fi,3,1,"div",21),i(27,"div",22)(28,"button",23),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),l(29," Cancel "),a(),i(30,"button",24),f("click",function(){v(e);let r=m();return x(r.confirmDelete())}),b(31,Ni,2,0,"span",25)(32,ji,6,0,"span",26),a()()()()()}if(o&2){let e=m();p("@backdropAnimation",void 0),c(),p("@modalAnimation",void 0),c(22),k('"',e.location==null?null:e.location.name,'"'),c(2),p("ngIf",e.location),c(),p("ngIf",e.errorMessage),c(2),p("disabled",e.loading),c(2),p("disabled",e.loading),c(),p("ngIf",!e.loading),c(),p("ngIf",e.loading)}}var je=class o{constructor(t){this.locationService=t}isOpen=!1;location=null;closeModal=new G;locationDeleted=new G;loading=!1;errorMessage="";confirmDelete(){!this.location||this.loading||(this.loading=!0,this.errorMessage="",this.locationService.deleteLocation(this.location.id).subscribe({next:t=>{t.success?(this.locationDeleted.emit(this.location),this.closeModalHandler()):this.errorMessage=t.message||"Failed to delete location",this.loading=!1},error:t=>{this.errorMessage=t.error?.message||"An error occurred while deleting the location",this.loading=!1}}))}closeModalHandler(){this.loading||(this.isOpen=!1,this.closeModal.emit(),this.resetModal())}resetModal(){this.errorMessage="",this.loading=!1}static \u0275fac=function(e){return new(e||o)(T(F))};static \u0275cmp=O({type:o,selectors:[["app-delete-confirmation-modal"]],inputs:{isOpen:"isOpen",location:"location"},outputs:{closeModal:"closeModal",locationDeleted:"locationDeleted"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-red-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["class","bg-gray-50 rounded-lg p-4 mb-4",4,"ngIf"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-red-600","text-white","font-medium","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","mb-4"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6",3,"src","alt"],[1,"text-left"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],["class","text-xs text-red-600 mt-1",4,"ngIf"],[1,"text-xs","text-red-600","mt-1"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&b(0,zi,33,9,"div",0),e&2&&p("ngIf",n.isOpen)},dependencies:[A,z],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[$("backdropAnimation",[P(":enter",[M({opacity:0}),I("150ms ease-out",M({opacity:1}))]),P(":leave",[I("150ms ease-in",M({opacity:0}))])]),$("modalAnimation",[P(":enter",[M({opacity:0,transform:"scale(0.7) translateY(-50px)"}),I("200ms ease-out",M({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[I("150ms ease-in",M({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Bi(o,t){if(o&1&&(i(0,"div",26)(1,"div",27),u(),i(2,"svg",28),h(3,"path",29),a(),g(),i(4,"span",30),l(5),a()()()),o&2){let e=m(2);c(5),k("Successfully created ",e.successCount," locations!")}}function Gi(o,t){if(o&1&&(i(0,"div",31)(1,"p",32),l(2),a()()),o&2){let e=m(2);c(2),y(e.errorMessage)}}function $i(o,t){if(o&1&&(i(0,"option",54),l(1),a()),o&2){let e=t.$implicit;p("value",e.id),c(),y(e.name)}}function Ui(o,t){if(o&1){let e=C();i(0,"div",33)(1,"div",34)(2,"h3",35),l(3),a(),i(4,"div",27)(5,"button",36),f("click",function(){let r=v(e).index,s=m(2);return x(s.duplicateLocationRow(r))}),u(),i(6,"svg",7),h(7,"path",37),a()(),g(),i(8,"button",38),f("click",function(){let r=v(e).index,s=m(2);return x(s.removeLocationRow(r))}),u(),i(9,"svg",7),h(10,"path",39),a()()()(),g(),i(11,"div",40)(12,"div")(13,"label",41),l(14," Name "),i(15,"span",42),l(16,"*"),a()(),h(17,"input",43),a(),i(18,"div")(19,"label",41),l(20,"Type"),a(),i(21,"div",44)(22,"select",45)(23,"option",46),l(24,"Select type"),a(),b(25,$i,2,2,"option",47),a(),i(26,"div",48),u(),i(27,"svg",49),h(28,"path",50),a()()()()(),g(),i(29,"div",51)(30,"label",41),l(31,"Address"),a(),h(32,"input",52),a(),i(33,"div",51)(34,"label",41),l(35,"Description"),a(),h(36,"textarea",53),a()()}if(o&2){let e,n,r=t.$implicit,s=t.index,d=m(2);p("formGroupName",s),c(3),k("Location ",s+1,""),c(5),p("disabled",d.locationsArray.length<=1),c(9),V("border-red-300",((e=r.get("name"))==null?null:e.invalid)&&((e=r.get("name"))==null?null:e.touched)),c(5),V("border-red-300",((n=r.get("location_type_id"))==null?null:n.invalid)&&((n=r.get("location_type_id"))==null?null:n.touched)),c(3),p("ngForOf",d.locationTypes)}}function Wi(o,t){if(o&1&&(i(0,"span"),l(1),a()),o&2){let e=m(2);c(),k("Create ",e.getValidLocationsCount()," Locations")}}function Zi(o,t){o&1&&(i(0,"span",27),u(),i(1,"svg",55),h(2,"circle",56)(3,"path",57),a(),g(),i(4,"span"),l(5,"Creating..."),a()())}function Yi(o,t){if(o&1){let e=C();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),l(5,"Create up to 5 locations at once (3/5)"),a()(),i(6,"div",5)(7,"button",6),f("click",function(){v(e);let r=m();return x(r.addLocationRow())}),u(),i(8,"svg",7),h(9,"path",8),a(),g(),i(10,"span"),l(11,"Add Location"),a()(),i(12,"button",9),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),u(),i(13,"svg",10),h(14,"path",11),a()()()(),g(),i(15,"div",12),b(16,Bi,6,1,"div",13)(17,Gi,3,1,"div",14),i(18,"div",15)(19,"form",16),f("ngSubmit",function(){v(e);let r=m();return x(r.onSubmit())}),i(20,"div",17),b(21,Ui,37,8,"div",18),a()()(),i(22,"div",19)(23,"div",20)(24,"span",21),l(25),a(),l(26," of "),i(27,"span",21),l(28),a(),l(29," locations ready "),a(),i(30,"div",5)(31,"button",22),f("click",function(){v(e);let r=m();return x(r.closeModalHandler())}),l(32," Cancel "),a(),i(33,"button",23),f("click",function(){v(e);let r=m();return x(r.onSubmit())}),b(34,Wi,2,1,"span",24)(35,Zi,6,0,"span",25),a()()()()()()}if(o&2){let e=m();p("@backdropAnimation",void 0),c(),p("@modalAnimation",void 0),c(15),p("ngIf",e.successCount>0),c(),p("ngIf",e.errorMessage),c(2),p("formGroup",e.bulkForm),c(2),p("ngForOf",e.locationsArray.controls),c(4),y(e.getValidLocationsCount()),c(3),y(e.getTotalLocationsCount()),c(3),p("disabled",e.isLoading),c(2),p("disabled",e.bulkForm.invalid||e.isLoading||e.getValidLocationsCount()===0),c(),p("ngIf",!e.isLoading),c(),p("ngIf",e.isLoading)}}var ze=class o{constructor(t,e){this.fb=t;this.locationService=e;this.bulkForm=this.fb.group({locations:this.fb.array([])})}isOpen=!1;closeModal=new G;locationsCreated=new G;bulkForm;locationTypes=[];isLoading=!1;errorMessage="";successCount=0;ngOnInit(){this.loadLocationTypes(),this.addLocationRow(),this.addLocationRow(),this.addLocationRow()}get locationsArray(){return this.bulkForm.get("locations")}loadLocationTypes(){this.locationService.getLocationTypes(0).subscribe({next:t=>{t.success&&(this.locationTypes=t.data.types)},error:t=>{console.error("Error loading location types:",t)}})}createLocationFormGroup(){return this.fb.group({name:["",[Y.required,Y.minLength(2)]],description:[""],address:[""],location_type_id:[null,Y.required]})}addLocationRow(){this.locationsArray.length>=5||this.locationsArray.push(this.createLocationFormGroup())}duplicateLocationRow(t){if(this.locationsArray.length>=5)return;let e=this.locationsArray.at(t);if(e){let n=this.createLocationFormGroup();n.patchValue(e.value),this.locationsArray.push(n)}}removeLocationRow(t){this.locationsArray.length>1&&this.locationsArray.removeAt(t)}getLocationTypeName(t){let e=this.locationTypes.find(n=>n.id===t);return e?e.name:"Unknown"}onSubmit(){if(this.bulkForm.valid&&!this.isLoading){this.isLoading=!0,this.errorMessage="",this.successCount=0;let t=this.locationsArray.value.map(e=>Te(j({},e),{parent_id:null}));this.locationService.bulkCreateLocations(t).subscribe({next:e=>{e.success?(this.successCount=t.length,this.locationsCreated.emit(e.data.location?[e.data.location]:[]),setTimeout(()=>{this.closeModalHandler()},2e3)):this.errorMessage=e.message||"Failed to create locations",this.isLoading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while creating locations",this.isLoading=!1}})}}closeModalHandler(){this.isOpen=!1,this.closeModal.emit(),this.resetForm()}resetForm(){for(;this.locationsArray.length>0;)this.locationsArray.removeAt(0);this.addLocationRow(),this.addLocationRow(),this.addLocationRow(),this.errorMessage="",this.successCount=0}getValidLocationsCount(){return this.locationsArray.controls.filter(t=>t.valid).length}getTotalLocationsCount(){return this.locationsArray.length}static \u0275fac=function(e){return new(e||o)(T(ce),T(F))};static \u0275cmp=O({type:o,selectors:[["app-bulk-create-modal"]],inputs:{isOpen:"isOpen"},outputs:{closeModal:"closeModal",locationsCreated:"locationsCreated"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-4xl","w-full","max-h-[90vh]","overflow-hidden"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex","items-center","space-x-3"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","flex-col","h-full","max-h-[calc(90vh-140px)]"],["class","p-4 bg-green-50 border-b border-green-200",4,"ngIf"],["class","p-4 bg-red-50 border-b border-red-200",4,"ngIf"],[1,"flex-1","overflow-auto","p-6"],[3,"ngSubmit","formGroup"],["formArrayName","locations",1,"space-y-6"],["class","bg-white border border-gray-200 rounded-lg p-6 relative",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-6","border-t","border-gray-200","bg-gray-50"],[1,"text-sm","text-gray-600"],[1,"font-medium"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"p-4","bg-green-50","border-b","border-green-200"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-green-800","font-medium"],[1,"p-4","bg-red-50","border-b","border-red-200"],[1,"text-red-600","text-sm"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6","relative",3,"formGroupName"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],["type","button",1,"p-2","text-gray-400","hover:text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],["type","button",1,"p-2","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","formControlName","name","placeholder","Enter location name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],[1,"relative"],["formControlName","location_type_id",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","appearance-none","bg-white"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mt-6"],["type","text","formControlName","address","placeholder","Enter location address",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["formControlName","description","rows","3","placeholder","Enter location description",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],[3,"value"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&b(0,Yi,36,12,"div",0),e&2&&p("ngIf",n.isOpen)},dependencies:[A,Z,z,X,ae,He,Ae,ne,Oe,oe,re,se,le,jt,zt],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;border-color:#e5e7eb}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:1rem;margin-bottom:1.5rem}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}select[_ngcontent-%COMP%]{background-image:none}select[_ngcontent-%COMP%]:focus{outline:none}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ef4444!important}.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#10b981}.success-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.location-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;box-shadow:0 1px 3px #0000001a}.location-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.location-card[_ngcontent-%COMP%]{padding:1rem}}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}[_ngcontent-%COMP%]::placeholder{color:#9ca3af;opacity:1}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px)}button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}"],data:{animation:[$("backdropAnimation",[P(":enter",[M({opacity:0}),I("150ms ease-out",M({opacity:1}))]),P(":leave",[I("150ms ease-in",M({opacity:0}))])]),$("modalAnimation",[P(":enter",[M({opacity:0,transform:"scale(0.7) translateY(-50px)"}),I("200ms ease-out",M({opacity:1,transform:"scale(1) translateY(0)"}))]),P(":leave",[I("150ms ease-in",M({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};var dt;function qi(){if(dt==null){let o=typeof document<"u"?document.head:null;dt=!!(o&&(o.createShadowRoot||o.attachShadow))}return dt}function Be(o){if(qi()){let t=o.getRootNode?o.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Me(o){return o.composedPath?o.composedPath()[0]:o.target}function Ut(o){return o.buttons===0||o.detail===0}function Wt(o){let t=o.touches&&o.touches[0]||o.changedTouches&&o.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}function ge(o){return o instanceof Re?o.nativeElement:o}function de(o,t,e,n,r){let s=parseInt(lt.major),d=parseInt(lt.minor);return s>19||s===19&&d>0||s===0&&d===0?o.listen(t,e,n,r):(t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)})}var Ge=new WeakMap,Zt=(()=>{class o{_appRef;_injector=R(Pe);_environmentInjector=R(Dt);load(e){let n=this._appRef=this._appRef||this._injector.get(Pt),r=Ge.get(n);r||(r={loaders:new Set,refs:[]},Ge.set(n,r),n.onDestroy(()=>{Ge.get(n)?.refs.forEach(s=>s.destroy()),Ge.delete(n)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(Vt(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(n){return new(n||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var mt;try{mt=typeof Intl<"u"&&Intl.v8BreakIterator}catch{mt=!1}var Yt=(()=>{class o{_platformId=R(Tt);isBrowser=this._platformId?Ot(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||mt)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var sn=20,qt=(()=>{class o{_platform=R(Yt);_listeners;_viewportSize;_change=new E;_document=R(Ce,{optional:!0});constructor(){let e=R(we),n=R(Se).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=s=>this._change.next(s);this._listeners=[n.listen("window","resize",r),n.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),d=-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,_=-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:d,left:_}}change(e=sn){return e>0?this._change.pipe(Mt(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Kt=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=te({type:o});static \u0275inj=ee({})}return o})();function di(o){let t=o.cloneNode(!0),e=t.querySelectorAll("[id]"),n=o.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return n==="canvas"?Jt(o,t):(n==="input"||n==="select"||n==="textarea")&&Xt(o,t),Qt("canvas",o,t,Jt),Qt("input, textarea, select",o,t,Xt),t}function Qt(o,t,e,n){let r=t.querySelectorAll(o);if(r.length){let s=e.querySelectorAll(o);for(let d=0;d<r.length;d++)n(r[d],s[d])}}var ln=0;function Xt(o,t){t.type!=="file"&&(t.value=o.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${ln++}`)}function Jt(o,t){let e=t.getContext("2d");if(e)try{e.drawImage(o,0,0)}catch{}}function xt(o){let t=o.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function ut(o,t,e){let{top:n,bottom:r,left:s,right:d}=o;return e>=n&&e<=r&&t>=s&&t<=d}function De(o,t,e){o.top+=t,o.bottom=o.top+o.height,o.left+=e,o.right=o.left+o.width}function ei(o,t,e,n){let{top:r,right:s,bottom:d,left:_,width:w,height:S}=o,L=w*t,B=S*t;return n>r-B&&n<d+B&&e>_-L&&e<s+L}var $e=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:xt(e)})})}handleScroll(t){let e=Me(t),n=this.positions.get(e);if(!n)return null;let r=n.scrollPosition,s,d;if(e===this._document){let S=this.getViewportScrollPosition();s=S.top,d=S.left}else s=e.scrollTop,d=e.scrollLeft;let _=r.top-s,w=r.left-d;return this.positions.forEach((S,L)=>{S.clientRect&&e!==L&&e.contains(L)&&De(S.clientRect,_,w)}),r.top=s,r.left=d,{top:_,left:w}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function mi(o,t){let e=o.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let n=t.createElement("div");return e.forEach(r=>n.appendChild(r)),n}function bt(o,t,e){for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];r?o.setProperty(n,r,e?.has(n)?"important":""):o.removeProperty(n)}return o}function be(o,t){let e=t?"":"none";bt(o.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function ti(o,t,e){bt(o.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Ue(o,t){return t&&t!="none"?o+" "+t:o}function ii(o,t){o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,o.style.transform=We(t.left,t.top)}function We(o,t){return`translate3d(${Math.round(o)}px, ${Math.round(t)}px, 0)`}function ni(o){let t=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*t}function cn(o){let t=getComputedStyle(o),e=pt(t,"transition-property"),n=e.find(_=>_==="transform"||_==="all");if(!n)return 0;let r=e.indexOf(n),s=pt(t,"transition-duration"),d=pt(t,"transition-delay");return ni(s[r])+ni(d[r])}function pt(o,t){return o.getPropertyValue(t).split(",").map(n=>n.trim())}var dn=new Set(["position"]),gt=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,n,r,s,d,_,w,S,L){this._document=t,this._rootElement=e,this._direction=n,this._initialDomRect=r,this._previewTemplate=s,this._previewClass=d,this._pickupPositionOnPage=_,this._initialTransform=w,this._zIndex=S,this._renderer=L}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),oi(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return cn(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,n=t?t.template:null,r;if(n&&t){let s=t.matchSize?this._initialDomRect:null,d=t.viewContainer.createEmbeddedView(n,t.context);d.detectChanges(),r=mi(d,this._document),this._previewEmbeddedView=d,t.matchSize?ii(r,s):r.style.transform=We(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=di(this._rootElement),ii(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return bt(r.style,{"pointer-events":"none",margin:oi(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},dn),be(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}};function oi(o){return"showPopover"in o}var mn={passive:!0},ri={passive:!1},pn={passive:!1,capture:!0},hn=800,ai=new Set(["position"]),_t=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=it(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new E;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=me.EMPTY;_pointerUpSubscription=me.EMPTY;_scrollSubscription=me.EMPTY;_resizeSubscription=me.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>be(e,t)))}_disabled=!1;beforeStarted=new E;started=new E;released=new E;ended=new E;entered=new E;exited=new E;dropped=new E;moved=this._moveEvents;data;constrainPosition;constructor(t,e,n,r,s,d,_){this._config=e,this._document=n,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=d,this._renderer=_,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new $e(n),d.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(n=>ge(n)),this._handles.forEach(n=>be(n,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=ge(t);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[de(this._renderer,e,"mousedown",this._pointerDown,ri),de(this._renderer,e,"touchstart",this._pointerDown,mn),de(this._renderer,e,"dragstart",this._nativeDragStart,ri)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?ge(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),be(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),be(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let r=Math.abs(e.x-this._pickupPositionOnPage.x),s=Math.abs(e.y-this._pickupPositionOnPage.y);if(r+s>=this._config.dragStartThreshold){let _=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),w=this._dropContainer;if(!_){this._endDragSequence(t);return}(!w||!w.isDragging()&&!w.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let n=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,e);else{let r=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=n.x-r.x+this._passiveTransform.x,s.y=n.y-r.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:t,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Ee(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),n=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=de(this._renderer,e,"selectstart",un,pn)}),n){let r=this._rootElement,s=r.parentNode,d=this._placeholder=this._createPlaceholderElement(),_=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(_,r),this._initialTransform=r.style.transform||"",this._preview=new gt(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,e)),ti(r,!1,ai),this._document.body.appendChild(s.replaceChild(d,r)),this.started.next({source:this,event:t}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let n=this.isDragging(),r=Ee(e),s=!r&&e.button!==0,d=this._rootElement,_=Me(e),w=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+hn>Date.now(),S=r?Wt(e):Ut(e);if(_&&_.draggable&&e.type==="mousedown"&&e.preventDefault(),n||s||w||S)return;if(this._handles.length){let J=d.style;this._rootElementTapHighlight=J.webkitTapHighlightColor||"",J.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(J=>this._updateOnScroll(J)),this._boundaryElement&&(this._boundaryRect=xt(this._boundaryElement));let L=this._previewTemplate;this._pickupPositionInElement=L&&L.template&&!L.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let B=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:B.x,y:B.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){ti(this._rootElement,!0,ai),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,n=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),d=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:d,distance:s,dropPoint:r,event:t}),e.drop(this,n,this._initialIndex,this._initialContainer,d,s,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:n,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{let r=_=>{(!_||this._preview&&Me(_)===this._preview.element&&_.propertyName==="transform")&&(d(),n(),clearTimeout(s))},s=setTimeout(r,e*1.5),d=this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,n;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),n=mi(this._placeholderRef,this._document)):n=di(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,e,n){let r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,d=Ee(n)?n.targetTouches[0]:n,_=this._getViewportScrollPosition(),w=d.pageX-s.left-_.left,S=d.pageY-s.top-_.top;return{x:s.left-t.left+w,y:s.top-t.top+S}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),n=Ee(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=n.pageX-e.left,s=n.pageY-e.top;if(this._ownerSVGElement){let d=this._ownerSVGElement.getScreenCTM();if(d){let _=this._ownerSVGElement.createSVGPoint();return _.x=r,_.y=s,_.matrixTransform(d.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:n,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:d}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,_=this._boundaryRect,{width:w,height:S}=this._getPreviewRect(),L=_.top+d,B=_.bottom-(S-d),J=_.left+s,Qe=_.right-(w-s);n=si(n,J,Qe),r=si(r,L,B)}return{x:n,y:r}}_updatePointerDirectionDelta(t){let{x:e,y:n}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,d=Math.abs(e-s.x),_=Math.abs(n-s.y);return d>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),_>this._config.pointerDirectionChangeThreshold&&(r.y=n>s.y?1:-1,s.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,be(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let n=1/this.scale,r=We(t*n,e*n),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=Ue(r,this._initialTransform)}_applyPreviewTransform(t,e){let n=this._previewTemplate?.template?void 0:this._initialTransform,r=We(t,e);this._preview.setTransform(Ue(r,n))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let n=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||n.width===0&&n.height===0)return;let s=r.left-n.left,d=n.right-r.right,_=r.top-n.top,w=n.bottom-r.bottom;r.width>n.width?(s>0&&(t+=s),d>0&&(t-=d)):t=0,r.height>n.height?(_>0&&(e+=_),w>0&&(e-=w)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:Ee(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let n=Me(t);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&De(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Be(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let n=this._previewContainer||"global";if(n==="parent")return t;if(n==="global"){let r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return ge(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function si(o,t,e){return Math.max(t,Math.min(e,o))}function Ee(o){return o.type[0]==="t"}function un(o){o.preventDefault()}function pi(o,t,e){let n=li(t,o.length-1),r=li(e,o.length-1);if(n===r)return;let s=o[n],d=r<n?-1:1;for(let _=n;_!==r;_+=d)o[_]=o[_+d];o[r]=s}function li(o,t){return Math.max(0,Math.min(t,o))}var Ze=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,n,r){let s=this._itemPositions,d=this._getItemIndexFromPointerPosition(t,e,n,r);if(d===-1&&s.length>0)return null;let _=this.orientation==="horizontal",w=s.findIndex(W=>W.drag===t),S=s[d],L=s[w].clientRect,B=S.clientRect,J=w>d?1:-1,Qe=this._getItemOffsetPx(L,B,J),vi=this._getSiblingOffsetPx(w,s,J),xi=s.slice();return pi(s,w,d),s.forEach((W,bi)=>{if(xi[bi]===W)return;let yt=W.drag===t,Xe=yt?Qe:vi,wt=yt?t.getPlaceholderElement():W.drag.getRootElement();W.offset+=Xe;let St=Math.round(W.offset*(1/W.drag.scale));_?(wt.style.transform=Ue(`translate3d(${St}px, 0, 0)`,W.initialTransform),De(W.clientRect,0,Xe)):(wt.style.transform=Ue(`translate3d(0, ${St}px, 0)`,W.initialTransform),De(W.clientRect,Xe,0))}),this._previousSwap.overlaps=ut(B,e,n),this._previousSwap.drag=S.drag,this._previousSwap.delta=_?r.x:r.y,{previousIndex:w,currentIndex:d}}enter(t,e,n,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,n):r,d=this._activeDraggables,_=d.indexOf(t),w=t.getPlaceholderElement(),S=d[s];if(S===t&&(S=d[s+1]),!S&&(s==null||s===-1||s<d.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(S=d[0]),_>-1&&d.splice(_,1),S&&!this._dragDropRegistry.isDragging(S)){let L=S.getRootElement();L.parentElement.insertBefore(w,L),d.splice(s,0,t)}else this._element.appendChild(w),d.push(t);w.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let n=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:n})=>{De(n,t,e)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:xt(n)}}).sort((e,n)=>t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_getItemOffsetPx(t,e,n){let r=this.orientation==="horizontal",s=r?e.left-t.left:e.top-t.top;return n===-1&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,n){let r=this.orientation==="horizontal",s=e[t].clientRect,d=e[t+n*-1],_=s[r?"width":"height"]*n;if(d){let w=r?"left":"top",S=r?"right":"bottom";n===-1?_-=d.clientRect[w]-s[S]:_+=s[w]-d.clientRect[S]}return _}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let n=this._itemPositions,r=this.orientation==="horizontal";if(n[0].drag!==this._activeDraggables[0]){let d=n[n.length-1].clientRect;return r?t>=d.right:e>=d.bottom}else{let d=n[0].clientRect;return r?t<=d.left:e<=d.top}}_getItemIndexFromPointerPosition(t,e,n,r){let s=this.orientation==="horizontal",d=this._itemPositions.findIndex(({drag:_,clientRect:w})=>{if(_===t)return!1;if(r){let S=s?r.x:r.y;if(_===this._previousSwap.drag&&this._previousSwap.overlaps&&S===this._previousSwap.delta)return!1}return s?e>=Math.floor(w.left)&&e<Math.floor(w.right):n>=Math.floor(w.top)&&n<Math.floor(w.bottom)});return d===-1||!this._sortPredicate(d,t)?-1:d}},ft=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let n=0;n<e.length;n++){let r=e[n];this._relatedNodes.push([r,r.nextSibling])}this.withItems(t)}sort(t,e,n,r){let s=this._getItemIndexFromPointerPosition(t,e,n),d=this._previousSwap;if(s===-1||this._activeItems[s]===t)return null;let _=this._activeItems[s];if(d.drag===_&&d.overlaps&&d.deltaX===r.x&&d.deltaY===r.y)return null;let w=this.getItemIndex(t),S=t.getPlaceholderElement(),L=_.getRootElement();s>w?L.after(S):L.before(S),pi(this._activeItems,w,s);let B=this._getRootNode().elementFromPoint(e,n);return d.deltaX=r.x,d.deltaY=r.y,d.drag=_,d.overlaps=L===B||L.contains(B),{previousIndex:w,currentIndex:s}}enter(t,e,n,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,n):r;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,n));let d=this._activeItems[s],_=this._activeItems.indexOf(t);_>-1&&this._activeItems.splice(_,1),d&&!this._dragDropRegistry.isDragging(d)?(this._activeItems.splice(s,0,t),d.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let n=this._relatedNodes.length-1;n>-1;n--){let[r,s]=this._relatedNodes[n];r.parentNode===t&&r.nextSibling!==s&&(s===null?t.appendChild(r):s.parentNode===t&&t.insertBefore(r,s))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,n){let r=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(n)),s=r?this._activeItems.findIndex(d=>{let _=d.getRootElement();return r===_||_.contains(r)}):-1;return s===-1||!this._sortPredicate(s,t)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=Be(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,n){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,s=-1;for(let d=0;d<this._activeItems.length;d++){let _=this._activeItems[d];if(_!==t){let{x:w,y:S}=_.getRootElement().getBoundingClientRect(),L=Math.hypot(e-w,n-S);L<r&&(r=L,s=d)}}return s}},ci=.05,hi=.05,q=function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o}(q||{}),N=function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o}(N||{}),vt=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new E;entered=new E;exited=new E;dropped=new E;sorted=new E;receivingStarted=new E;receivingStopped=new E;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=me.EMPTY;_verticalScrollDirection=q.NONE;_horizontalScrollDirection=N.NONE;_scrollNode;_stopScrollTimers=new E;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,n,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s;let d=this.element=ge(t);this._document=n,this.withOrientation("vertical").withElementContainer(d),e.registerDropContainer(this),this._parentPositions=new $e(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,n,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,n,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,n,r,s,d,_,w={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:s,distance:d,dropPoint:_,event:w})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>t.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof Ze&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new ft(this._document,this._dragDropRegistry);else{let e=new Ze(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,n)=>this.sortPredicate(e,n,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=ge(this.element),n=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(t);return n>-1&&this._scrollableElements.splice(n,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,n,r){if(this.sortingDisabled||!this._domRect||!ei(this._domRect,ci,e,n))return;let s=this._sortStrategy.sort(t,e,n,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let n,r=q.NONE,s=N.NONE;if(this._parentPositions.positions.forEach((d,_)=>{_===this._document||!d.clientRect||n||ei(d.clientRect,ci,t,e)&&([r,s]=gn(_,d.clientRect,this._direction,t,e),(r||s)&&(n=_))}),!r&&!s){let{width:d,height:_}=this._viewportRuler.getViewportSize(),w={width:d,height:_,top:0,right:d,bottom:_,left:0};r=ui(w,e),s=gi(w,t),n=window}n&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=n,(r||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Ct(0,et).pipe(H(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===q.UP?t.scrollBy(0,-e):this._verticalScrollDirection===q.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===N.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===N.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&ut(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,n){return this._siblings.find(r=>r._canReceive(t,e,n))}_canReceive(t,e,n){if(!this._domRect||!ut(this._domRect,e,n)||!this.enterPredicate(t,this))return!1;let r=this._getShadowRoot().elementFromPoint(e,n);return r?r===this._container||this._container.contains(r):!1}_startReceiving(t,e){let n=this._activeSiblings;!n.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=Be(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function ui(o,t){let{top:e,bottom:n,height:r}=o,s=r*hi;return t>=e-s&&t<=e+s?q.UP:t>=n-s&&t<=n+s?q.DOWN:q.NONE}function gi(o,t){let{left:e,right:n,width:r}=o,s=r*hi;return t>=e-s&&t<=e+s?N.LEFT:t>=n-s&&t<=n+s?N.RIGHT:N.NONE}function gn(o,t,e,n,r){let s=ui(t,r),d=gi(t,n),_=q.NONE,w=N.NONE;if(s){let S=o.scrollTop;s===q.UP?S>0&&(_=q.UP):o.scrollHeight-S>o.clientHeight&&(_=q.DOWN)}if(d){let S=o.scrollLeft;e==="rtl"?d===N.RIGHT?S<0&&(w=N.RIGHT):o.scrollWidth+S>o.clientWidth&&(w=N.LEFT):d===N.LEFT?S>0&&(w=N.LEFT):o.scrollWidth-S>o.clientWidth&&(w=N.RIGHT)}return[_,w]}var Le={capture:!0},ht={passive:!1,capture:!0},_n=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=O({type:o,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(n,r){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return o})(),fn=(()=>{class o{_ngZone=R(we);_document=R(Ce);_styleLoader=R(Zt);_renderer=R(Se).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=it([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new E;pointerUp=new E;scroll=new E;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=de(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,ht)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,n){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(_n),this._activeDragInstances.update(r=>[...r,e]),this._activeDragInstances().length===1)){let r=n.type.startsWith("touch"),s=_=>this.pointerUp.next(_),d=[["scroll",_=>this.scroll.next(_),Le],["selectstart",this._preventDefaultWhileDragging,ht]];r?d.push(["touchend",s,Le],["touchcancel",s,Le]):d.push(["mouseup",s,Le]),r||d.push(["mousemove",_=>this.pointerMove.next(_),ht]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=d.map(([_,w,S])=>de(this._renderer,this._document,_,w,S))})}}stopDragging(e){this._activeDragInstances.update(n=>{let r=n.indexOf(e);return r>-1?(n.splice(r,1),[...n]):n}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let n=[this.scroll];return e&&e!==this._document&&n.push(new Je(r=>this._ngZone.runOutsideAngular(()=>{let s=de(this._renderer,e,"scroll",d=>{this._activeDragInstances().length&&r.next(d)},Le);return()=>{s()}}))),kt(...n)}registerDirectiveNode(e,n){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,n)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(n){return new(n||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),vn={dragStartThreshold:5,pointerDirectionChangeThreshold:5},xn=(()=>{class o{_document=R(Ce);_ngZone=R(we);_viewportRuler=R(qt);_dragDropRegistry=R(fn);_renderer=R(Se).createRenderer(null,null);constructor(){}createDrag(e,n=vn){return new _t(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new vt(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(n){return new(n||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var _i=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=te({type:o});static \u0275inj=ee({providers:[xn],imports:[Kt]})}return o})();function bn(o,t){if(o&1){let e=C();i(0,"button",11),f("click",function(){v(e);let r=m();return x(r.moveSelectedToRoot())}),l(1),a()}if(o&2){let e=m();c(),k(" Move to Root (",e.selectedNodes.size,") ")}}function yn(o,t){if(o&1){let e=C();i(0,"button",12),f("click",function(){v(e);let r=m();return x(r.deleteSelected())}),l(1),a()}if(o&2){let e=m();c(),k(" Delete Selected (",e.selectedNodes.size,") ")}}function wn(o,t){o&1&&(i(0,"div",13)(1,"div",14)(2,"div",15),u(),i(3,"svg",16),h(4,"circle",17)(5,"path",18),a()(),g(),i(6,"h3",19),l(7,"Loading Hierarchy"),a(),i(8,"p",20),l(9,"Please wait while we fetch the location hierarchy..."),a()()())}function Sn(o,t){if(o&1){let e=C();i(0,"div",21)(1,"div",22),u(),i(2,"svg",23),h(3,"path",24),a()(),g(),i(4,"h3",19),l(5,"Error Loading Hierarchy"),a(),i(6,"p",25),l(7),a(),i(8,"button",26),f("click",function(){v(e);let r=m();return x(r.loadHierarchy())}),l(9," Retry "),a()()}if(o&2){let e=m();c(7),y(e.error)}}function Cn(o,t){if(o&1&&(i(0,"span",50),l(1),a()),o&2){let e=m().$implicit;c(),ie(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function kn(o,t){if(o&1&&(i(0,"span",50),l(1),a()),o&2){let e=m().$implicit;c(),ie(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function Mn(o,t){if(o&1){let e=C();i(0,"div",60),f("click",function(r){let s=v(e).$implicit,d=m(6);return x(d.toggleNodeSelection(s,r))})("dragover",function(r){v(e);let s=m(6);return x(s.onDragOver(r))})("drop",function(r){let s=v(e).$implicit,d=m(6);return x(d.onDropOnNode(r,s))}),i(1,"div",36)(2,"div",4)(3,"div",37),f("dragstart",function(r){let s=v(e).$implicit,d=m(6);return x(d.onDragStart(r,s))})("dragend",function(r){v(e);let s=m(6);return x(s.onDragEnd(r))}),u(),i(4,"svg",38),h(5,"path",39),a()(),g(),i(6,"div"),u(),i(7,"svg",40),h(8,"path",41),a()(),g(),i(9,"div",42)(10,"div",4)(11,"span",55),l(12),a(),i(13,"span",61),l(14),a()(),i(15,"div",45),l(16),a()()(),i(17,"span",62),l(18),a()()()}if(o&2){let e=t.$implicit,n=m(6);V("ring-2",e.selected)("ring-blue-500",e.selected)("bg-blue-50",e.selected),c(6),D("w-6 h-6 bg-"+n.getNodeIconColor(e)+"-100 rounded flex items-center justify-center"),c(),D("w-3 h-3 text-"+n.getNodeIconColor(e)+"-600"),c(),pe("d",n.getNodeIcon(e)),c(4),y(e.name),c(2),k(" ",(e.type==null?null:e.type.name)||"Floor"," "),c(2),k("",e.asset_count," assets"),c(2),k(" ",n.getLevelText(e)," ")}}function En(o,t){if(o&1&&(i(0,"div",58),b(1,Mn,19,15,"div",59),a()),o&2){let e=m().$implicit;c(),p("ngForOf",e.children)}}function Ln(o,t){if(o&1){let e=C();i(0,"div",53),f("click",function(r){let s=v(e).$implicit,d=m(4);return x(d.toggleNodeSelection(s,r))})("dragover",function(r){v(e);let s=m(4);return x(s.onDragOver(r))})("drop",function(r){let s=v(e).$implicit,d=m(4);return x(d.onDropOnNode(r,s))}),i(1,"div",36)(2,"div",4)(3,"div",54),f("dragstart",function(r){let s=v(e).$implicit,d=m(4);return x(d.onDragStart(r,s))})("dragend",function(r){v(e);let s=m(4);return x(s.onDragEnd(r))}),u(),i(4,"svg",38),h(5,"path",39),a()(),g(),i(6,"div"),u(),i(7,"svg",40),h(8,"path",41),a()(),g(),i(9,"div",42)(10,"div",4)(11,"span",55),l(12),a(),i(13,"span",56),l(14),a()(),i(15,"div",45),l(16),b(17,kn,2,2,"span",46),a()()(),i(18,"span",48),l(19),a()(),b(20,En,2,1,"div",57),a()}if(o&2){let e=t.$implicit,n=m(4);V("ring-2",e.selected)("ring-blue-500",e.selected)("bg-blue-50",e.selected),c(6),D("w-8 h-8 bg-"+n.getNodeIconColor(e)+"-100 rounded flex items-center justify-center"),c(),D("w-4 h-4 text-"+n.getNodeIconColor(e)+"-600"),c(),pe("d",n.getNodeIcon(e)),c(4),y(e.name),c(2),k(" ",(e.type==null?null:e.type.name)||"Residential Building"," "),c(2),k(" ",e.asset_count," assets "),c(),p("ngIf",e.children.length>0),c(2),k(" ",n.getLevelText(e)," "),c(),p("ngIf",e.children.length>0)}}function Dn(o,t){if(o&1&&(i(0,"div",51),b(1,Ln,21,17,"div",52),a()),o&2){let e=m().$implicit;c(),p("ngForOf",e.children)}}function Tn(o,t){if(o&1){let e=C();i(0,"div",34)(1,"div",35),f("click",function(r){let s=v(e).$implicit,d=m(2);return x(d.toggleNodeSelection(s,r))})("dragover",function(r){v(e);let s=m(2);return x(s.onDragOver(r))})("drop",function(r){let s=v(e).$implicit,d=m(2);return x(d.onDropOnNode(r,s))}),i(2,"div",36)(3,"div",4)(4,"div",37),f("dragstart",function(r){let s=v(e).$implicit,d=m(2);return x(d.onDragStart(r,s))})("dragend",function(r){v(e);let s=m(2);return x(s.onDragEnd(r))}),u(),i(5,"svg",38),h(6,"path",39),a()(),g(),i(7,"div"),u(),i(8,"svg",40),h(9,"path",41),a()(),g(),i(10,"div",42)(11,"div",4)(12,"span",43),l(13),a(),i(14,"span",44),l(15),a()(),i(16,"div",45),l(17),b(18,Cn,2,2,"span",46),a()()(),i(19,"div",47)(20,"span",48),l(21),a()()(),b(22,Dn,2,1,"div",49),a()()}if(o&2){let e=t.$implicit,n=m(2);c(),V("ring-2",e.selected)("ring-blue-500",e.selected)("bg-blue-50",e.selected),c(6),D("w-10 h-10 bg-"+n.getNodeIconColor(e)+"-100 rounded-lg flex items-center justify-center"),c(),D("w-5 h-5 text-"+n.getNodeIconColor(e)+"-600"),c(),pe("d",n.getNodeIcon(e)),c(4),y(e.name),c(2),k(" ",(e.type==null?null:e.type.name)||"Community"," "),c(2),k(" ",e.asset_count," assets "),c(),p("ngIf",e.children.length>0),c(3),k(" ",n.getLevelText(e)," "),c(),p("ngIf",e.children.length>0)}}function In(o,t){o&1&&(i(0,"div",21)(1,"div",63),u(),i(2,"svg",64),h(3,"path",65),a()(),g(),i(4,"h3",19),l(5,"No hierarchy data"),a(),i(6,"p",20),l(7,"Create some locations to manage the hierarchy."),a()())}function Pn(o,t){if(o&1){let e=C();i(0,"div",27)(1,"div",28),f("dragover",function(r){v(e);let s=m();return x(s.onDragOver(r))})("drop",function(r){v(e);let s=m();return x(s.onDropToRoot(r))}),i(2,"div",29),u(),i(3,"svg",30),h(4,"path",31),a(),g(),i(5,"span",32),l(6,"Root Level - Drop here to make location top-level"),a()()(),i(7,"div",27),b(8,Tn,23,17,"div",33),a(),b(9,In,8,0,"div",9),a()}if(o&2){let e=m();c(),V("border-blue-500",e.dropZoneActive)("bg-blue-50",e.dropZoneActive),c(7),p("ngForOf",e.hierarchyData),c(),p("ngIf",e.hierarchyData.length===0)}}var Ye=class o{constructor(t){this.locationService=t}destroy$=new E;hierarchyData=[];selectedNodes=new Set;loading=!1;error="";draggedNode=null;dropZoneActive=!1;ngOnInit(){this.loadHierarchy()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadHierarchy(){this.loading=!0,this.error="",this.locationService.getHierarchy().pipe(H(this.destroy$)).subscribe({next:t=>{t.success?this.hierarchyData=this.transformHierarchyData(t.data.hierarchy):this.error="Failed to load hierarchy data",this.loading=!1},error:t=>{this.error=t.error?.message||"An error occurred while loading hierarchy",this.loading=!1}})}transformHierarchyData(t){return t.map(e=>({id:e.id,name:e.name,type:e.type,hierarchy_level:e.hierarchy_level||0,asset_count:e.asset_count||0,children:e.children?this.transformHierarchyData(e.children):[],parent_id:e.parent_id,selected:!1,expanded:!0}))}toggleNodeSelection(t,e){e.stopPropagation(),e.ctrlKey||e.metaKey?this.selectedNodes.has(t.id)?(this.selectedNodes.delete(t.id),t.selected=!1):(this.selectedNodes.add(t.id),t.selected=!0):(this.clearSelection(),this.selectedNodes.add(t.id),t.selected=!0)}clearSelection(){this.selectedNodes.clear(),this.updateSelectionState(this.hierarchyData,!1)}updateSelectionState(t,e){t.forEach(n=>{n.selected=e,n.children.length>0&&this.updateSelectionState(n.children,e)})}onDragStart(t,e){this.draggedNode=e,this.dropZoneActive=!0,t.dataTransfer.effectAllowed="move"}onDragEnd(t){this.draggedNode=null,this.dropZoneActive=!1}onDragOver(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}onDropToRoot(t){t.preventDefault(),this.draggedNode&&this.moveToRoot(this.draggedNode),this.dropZoneActive=!1,this.draggedNode=null}onDropOnNode(t,e){t.preventDefault(),t.stopPropagation(),this.draggedNode&&this.draggedNode.id!==e.id&&this.moveToParent(this.draggedNode,e),this.dropZoneActive=!1,this.draggedNode=null}moveToRoot(t){this.removeNodeFromHierarchy(t),t.hierarchy_level=0,t.parent_id=void 0,this.hierarchyData.push(t),this.updateLocationHierarchy(t.id,null)}moveToParent(t,e){this.removeNodeFromHierarchy(t),t.hierarchy_level=e.hierarchy_level+1,t.parent_id=e.id,e.children.push(t),e.expanded=!0,this.updateLocationHierarchy(t.id,e.id)}removeNodeFromHierarchy(t){let e=this.hierarchyData.findIndex(n=>n.id===t.id);if(e!==-1){this.hierarchyData.splice(e,1);return}this.removeFromChildren(this.hierarchyData,t)}removeFromChildren(t,e){for(let n of t){let r=n.children.findIndex(s=>s.id===e.id);if(r!==-1)return n.children.splice(r,1),!0;if(this.removeFromChildren(n.children,e))return!0}return!1}updateLocationHierarchy(t,e){this.locationService.moveLocations([t],e).pipe(H(this.destroy$)).subscribe({next:n=>{n.success?console.log("Location moved successfully"):(console.error("Failed to move location:",n.message),this.loadHierarchy())},error:n=>{console.error("Error moving location:",n),this.loadHierarchy()}})}moveSelectedToRoot(){if(this.selectedNodes.size===0)return;let t=Array.from(this.selectedNodes);this.locationService.moveLocations(t,null).pipe(H(this.destroy$)).subscribe({next:e=>{e.success&&(this.loadHierarchy(),this.clearSelection())},error:e=>{console.error("Error moving locations:",e)}})}deleteSelected(){this.selectedNodes.size!==0&&console.log("Delete selected locations:",Array.from(this.selectedNodes))}getNodeIcon(t){return t.hierarchy_level===0||t.hierarchy_level===1?"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4":"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}getNodeIconColor(t){return t.hierarchy_level===0||t.hierarchy_level===1?"blue":"green"}getLevelBadge(t){return t.hierarchy_level===0?"L0":"LP"}getLevelText(t){return t.hierarchy_level===0?"Level 0":"Parent"}getChildrenCount(t){return t.children.length}static \u0275fac=function(e){return new(e||o)(T(F))};static \u0275cmp=O({type:o,selectors:[["app-hierarchy-management"]],decls:15,vars:5,consts:[[1,"hierarchy-management"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],["class","px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-sm font-medium",3,"click",4,"ngIf"],["class","px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",3,"click",4,"ngIf"],[1,"px-4","py-2","text-gray-600","hover:bg-gray-100","rounded-lg","transition-colors","text-sm","font-medium",3,"click"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors","text-sm","font-medium",3,"click"],[1,"px-4","py-2","text-red-600","hover:bg-red-50","rounded-lg","transition-colors","text-sm","font-medium",3,"click"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"space-y-4"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-8","text-center","transition-all",3,"dragover","drop"],[1,"flex","items-center","justify-center","space-x-2","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"font-medium"],["class","hierarchy-card",4,"ngFor","ngForOf"],[1,"hierarchy-card"],[1,"bg-white","border","border-gray-200","rounded-lg","p-4","transition-all","hover:shadow-sm",3,"click","dragover","drop"],[1,"flex","items-center","justify-between"],["draggable","true",1,"drag-handle","cursor-move","p-1","hover:bg-gray-100","rounded",3,"dragstart","dragend"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 8h16M4 16h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-gray-100","text-gray-700"],[1,"text-sm","text-gray-500","mt-1"],["class","ml-4",4,"ngIf"],[1,"flex","items-center","space-x-2"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-blue-100","text-blue-800"],["class","mt-4 ml-7 space-y-3",4,"ngIf"],[1,"ml-4"],[1,"mt-4","ml-7","space-y-3"],["class","bg-gray-50 rounded-lg p-3 transition-all hover:bg-gray-100",3,"ring-2","ring-blue-500","bg-blue-50","click","dragover","drop",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-3","transition-all","hover:bg-gray-100",3,"click","dragover","drop"],["draggable","true",1,"drag-handle","cursor-move","p-1","hover:bg-gray-200","rounded",3,"dragstart","dragend"],[1,"font-medium","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-blue-100","text-blue-700"],["class","mt-3 ml-7 space-y-2",4,"ngIf"],[1,"mt-3","ml-7","space-y-2"],["class","bg-white rounded border border-gray-100 p-3 transition-all hover:shadow-sm",3,"ring-2","ring-blue-500","bg-blue-50","click","dragover","drop",4,"ngFor","ngForOf"],[1,"bg-white","rounded","border","border-gray-100","p-3","transition-all","hover:shadow-sm",3,"click","dragover","drop"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-green-100","text-green-700"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-green-100","text-green-800"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),l(4,"Hierarchy Management"),a(),i(5,"p",3),l(6," Drag and drop locations to reorganize your hierarchy. Hold Ctrl/Cmd and click to select multiple locations for bulk operations. "),a()(),i(7,"div",4),b(8,bn,2,1,"button",5)(9,yn,2,1,"button",6),i(10,"button",7),f("click",function(){return n.clearSelection()}),l(11," Clear Selection "),a()()(),b(12,wn,10,0,"div",8)(13,Sn,10,1,"div",9)(14,Pn,10,6,"div",10),a()),e&2&&(c(8),p("ngIf",n.selectedNodes.size>0),c(),p("ngIf",n.selectedNodes.size>0),c(3),p("ngIf",n.loading),c(),p("ngIf",n.error&&!n.loading),c(),p("ngIf",!n.loading&&!n.error))},dependencies:[A,Z,z,_i],styles:['.hierarchy-management[_ngcontent-%COMP%]   .hierarchy-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .hierarchy-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{opacity:.6;transition:all .2s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:hover{opacity:1;background-color:#f3f4f6}.hierarchy-management[_ngcontent-%COMP%]   .dragging[_ngcontent-%COMP%]{opacity:.5;transform:rotate(2deg)}.hierarchy-management[_ngcontent-%COMP%]   .drop-zone-active[_ngcontent-%COMP%]{border-color:#3b82f6!important;background-color:#eff6ff!important}.hierarchy-management[_ngcontent-%COMP%]   .drop-zone-active[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border:2px dashed #3b82f6;border-radius:.5rem;pointer-events:none}.hierarchy-management[_ngcontent-%COMP%]   .drop-target[_ngcontent-%COMP%]{background-color:#eff6ff;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f633}.hierarchy-management[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#eff6ff!important;border-color:#3b82f6!important;box-shadow:0 0 0 2px #3b82f633}.hierarchy-management[_ngcontent-%COMP%]   .level-0[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.hierarchy-management[_ngcontent-%COMP%]   .level-1[_ngcontent-%COMP%]{border-left:4px solid #10b981;margin-left:1rem}.hierarchy-management[_ngcontent-%COMP%]   .level-2[_ngcontent-%COMP%]{border-left:4px solid #f59e0b;margin-left:2rem}.hierarchy-management[_ngcontent-%COMP%]   .node-card[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .node-card[_ngcontent-%COMP%]:hover{background-color:#f8fafc;border-color:#e2e8f0;box-shadow:0 1px 3px #0000001a}.hierarchy-management[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px}.hierarchy-management[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.hierarchy-management[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.hierarchy-management[_ngcontent-%COMP%]   .multi-select-info[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background:#1f2937;color:#fff;padding:.75rem 1rem;border-radius:.5rem;font-size:.875rem;z-index:50;box-shadow:0 10px 15px -3px #0000001a}.hierarchy-management[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.hierarchy-management[_ngcontent-%COMP%]   .hierarchy-card[_ngcontent-%COMP%]{margin:.5rem}.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{display:none}.hierarchy-management[_ngcontent-%COMP%]   .level-1[_ngcontent-%COMP%]{margin-left:.5rem}.hierarchy-management[_ngcontent-%COMP%]   .level-2[_ngcontent-%COMP%]{margin-left:1rem}}@media print{.hierarchy-management[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%], .hierarchy-management[_ngcontent-%COMP%]   .multi-select-info[_ngcontent-%COMP%]{display:none}}.hierarchy-management[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.hierarchy-management[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;background:#fff;border:1px solid #e5e7eb}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.4;background:#f3f4f6;border:2px dashed #d1d5db}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}']})};function Vn(o,t){if(o&1&&(i(0,"option",51),l(1),a()),o&2){let e=t.$implicit;p("value",e.id),c(),y(e.name)}}function On(o,t){if(o&1&&(i(0,"option",51),l(1),a()),o&2){let e=t.$implicit;p("value",e.value),c(),y(e.label)}}function Hn(o,t){if(o&1){let e=C();i(0,"div",35)(1,"form",36),f("ngSubmit",function(){v(e);let r=m(2);return x(r.applyFilters())}),i(2,"div",37)(3,"div")(4,"label",38),l(5,"Location Type"),a(),i(6,"select",39)(7,"option",40),l(8,"All Types"),a(),b(9,Vn,2,2,"option",41),a()(),i(10,"div")(11,"label",38),l(12,"Hierarchy Level"),a(),i(13,"select",42),b(14,On,2,2,"option",41),a()(),i(15,"div")(16,"label",38),l(17,"Asset Count"),a(),i(18,"select",43)(19,"option",40),l(20,"Any Count"),a(),i(21,"option",44),l(22,"No Assets"),a(),i(23,"option",45),l(24,"1-10 Assets"),a(),i(25,"option",46),l(26,"11-50 Assets"),a(),i(27,"option",47),l(28,"51+ Assets"),a()()()(),i(29,"div",48)(30,"button",49),f("click",function(){v(e);let r=m(2);return x(r.clearFilters())}),l(31," Clear Filters "),a(),i(32,"button",50),l(33," Apply Filters "),a()()()()}if(o&2){let e=m(2);c(),p("formGroup",e.filtersForm),c(8),p("ngForOf",e.locationTypes),c(5),p("ngForOf",e.hierarchyLevels)}}function An(o,t){if(o&1){let e=C();i(0,"div",24)(1,"div",2)(2,"form",25)(3,"div",26),u(),i(4,"svg",27),h(5,"path",28),a(),g(),h(6,"input",29),a()(),i(7,"button",30),f("click",function(){v(e);let r=m();return x(r.toggleFilters())}),u(),i(8,"svg",7),h(9,"path",31),a(),g(),i(10,"span"),l(11,"Filters"),a(),u(),i(12,"svg",32),h(13,"path",33),a(),b(14,Hn,34,3,"div",34),a()()()}if(o&2){let e=m();c(2),p("formGroup",e.searchForm),c(10),V("rotate-180",e.showFilters),c(2),p("ngIf",e.showFilters)}}function Fn(o,t){if(o&1){let e=C();i(0,"div",52)(1,"div",53),l(2),a(),i(3,"div",54)(4,"button",55),f("click",function(){v(e);let r=m();return x(r.currentListView="grid")}),u(),i(5,"svg",7),h(6,"path",56),a()(),g(),i(7,"button",55),f("click",function(){v(e);let r=m();return x(r.currentListView="list")}),u(),i(8,"svg",7),h(9,"path",57),a()()()()}if(o&2){let e=m();c(2),k(" Showing ",e.locations.length," locations "),c(2),D(e.currentListView==="grid"?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-300"),c(3),D(e.currentListView==="list"?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-300")}}function Nn(o,t){o&1&&(i(0,"div",62)(1,"div",63)(2,"div",64),u(),i(3,"svg",65),h(4,"circle",66)(5,"path",67),a()(),g(),i(6,"h3",68),l(7,"Loading Locations"),a(),i(8,"p",69),l(9,"Please wait while we fetch your locations..."),a()()())}function jn(o,t){if(o&1&&(i(0,"span"),l(1),a()),o&2){let e=m().$implicit;c(),k(" (",e.children==null?null:e.children.length,")")}}function zn(o,t){if(o&1){let e=C();i(0,"div",72)(1,"div",73)(2,"div",74)(3,"div",75),h(4,"img",76),a(),i(5,"div")(6,"h3",77),l(7),a(),i(8,"div",78)(9,"span",79),l(10),a(),i(11,"span",53),l(12),a()()()()(),i(13,"div",80)(14,"div",81),u(),i(15,"svg",82),h(16,"path",83)(17,"path",84),a(),g(),i(18,"span"),l(19),a()(),i(20,"div",53),l(21),a()(),i(22,"div",85),u(),i(23,"svg",7),h(24,"path",86),a(),g(),i(25,"span",87),l(26),a()(),i(27,"div",88)(28,"button",89),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.viewLocation(r))}),u(),i(29,"svg",7),h(30,"path",90),a(),g(),i(31,"span"),l(32,"View Details"),b(33,jn,2,1,"span",17),a()(),i(34,"div",54)(35,"button",91),u(),i(36,"svg",7),h(37,"path",92),a()(),g(),i(38,"button",93),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.editLocation(r))}),u(),i(39,"svg",7),h(40,"path",94),a()(),g(),i(41,"button",95),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.deleteLocation(r))}),u(),i(42,"svg",7),h(43,"path",96),a()()()()()}if(o&2){let e=t.$implicit,n=m(3);c(4),p("src",e.type.icon,Q)("alt",e.type.name),c(3),y(e.name),c(3),k(" ",n.getHierarchyLevelBadge(e.hierarchy_level)," "),c(2),y(e.type.name),c(7),y(e.address||e.name),c(2),k(" ",e.description||e.name," "),c(5),y((e.children==null?null:e.children.length)||0),c(7),p("ngIf",e.children==null?null:e.children.length),c(5),p("disabled",n.loading),c(3),p("disabled",n.loading)}}function Bn(o,t){if(o&1&&(i(0,"div",70),b(1,zn,44,11,"div",71),a()),o&2){let e=m(2);c(),p("ngForOf",e.locations)}}function Gn(o,t){if(o&1&&(i(0,"div",69),l(1),a()),o&2){let e=m().$implicit;c(),y(e.description)}}function $n(o,t){if(o&1){let e=C();i(0,"div",105)(1,"div",106)(2,"div",100)(3,"div",5)(4,"div",107),h(5,"img",108),a(),i(6,"div")(7,"div",109),l(8),a(),b(9,Gn,2,1,"div",110),a()()(),i(10,"div",101)(11,"span",53),l(12),a()(),i(13,"div",101)(14,"span",53),l(15),a()(),i(16,"div",102)(17,"span"),l(18),a()(),i(19,"div",102)(20,"div",111),u(),i(21,"svg",112),h(22,"path",113),a(),g(),i(23,"span",53),l(24),a()()(),i(25,"div",102)(26,"div",111),u(),i(27,"svg",112),h(28,"path",86),a(),g(),i(29,"span",53),l(30),a()()(),i(31,"div",101)(32,"div",54)(33,"button",114),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.viewLocation(r))}),u(),i(34,"svg",7),h(35,"path",90),a()(),g(),i(36,"button",115),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.editLocation(r))}),u(),i(37,"svg",7),h(38,"path",94),a()(),g(),i(39,"button",116),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.deleteLocation(r))}),u(),i(40,"svg",7),h(41,"path",96),a()()()()()()}if(o&2){let e=t.$implicit,n=m(3);c(5),p("src",e.type.icon,Q)("alt",e.type.name),c(3),y(e.name),c(),p("ngIf",e.description),c(3),y(e.type.name),c(3),k(" ",(e.parent==null?null:e.parent.name)||"Root Level"," "),c(2),D("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+n.getHierarchyLevelColor(e.hierarchy_level)+"-100 text-"+n.getHierarchyLevelColor(e.hierarchy_level)+"-800"),c(),k(" ",n.getHierarchyLevelBadge(e.hierarchy_level)," "),c(6),y((e.asset_summary==null?null:e.asset_summary.asset_count)||0),c(6),y((e.children==null?null:e.children.length)||0),c(6),p("disabled",n.loading),c(3),p("disabled",n.loading)}}function Un(o,t){if(o&1&&(i(0,"div",97)(1,"div",98)(2,"div",99)(3,"div",100),l(4,"Location"),a(),i(5,"div",101),l(6,"Type"),a(),i(7,"div",101),l(8,"Parent"),a(),i(9,"div",102),l(10,"Level"),a(),i(11,"div",102),l(12,"Assets"),a(),i(13,"div",102),l(14,"Children"),a(),i(15,"div",101),l(16,"Actions"),a()()(),i(17,"div",103),b(18,$n,42,13,"div",104),a()()),o&2){let e=m(2);c(18),p("ngForOf",e.locations)}}function Wn(o,t){if(o&1){let e=C();i(0,"div",117),u(),i(1,"svg",118),h(2,"path",83)(3,"path",84),a(),g(),i(4,"h3",119),l(5,"No locations found"),a(),i(6,"p",120),l(7,"Get started by creating your first location."),a(),i(8,"div",121)(9,"button",122),f("click",function(){v(e);let r=m(2);return x(r.addLocation())}),u(),i(10,"svg",123),h(11,"path",10),a(),l(12," Add Location "),a()()()}}function Zn(o,t){if(o&1&&(i(0,"div"),b(1,Nn,10,0,"div",58)(2,Bn,2,1,"div",59)(3,Un,19,1,"div",60)(4,Wn,13,0,"div",61),a()),o&2){let e=m();c(),p("ngIf",e.loading),c(),p("ngIf",!e.loading&&e.currentListView==="grid"),c(),p("ngIf",!e.loading&&e.currentListView==="list"),c(),p("ngIf",!e.loading&&e.locations.length===0)}}function Yn(o,t){o&1&&(i(0,"div",62)(1,"div",63)(2,"div",64),u(),i(3,"svg",65),h(4,"circle",66)(5,"path",67),a()(),g(),i(6,"h3",68),l(7,"Loading Hierarchy"),a(),i(8,"p",69),l(9,"Please wait while we fetch the location hierarchy..."),a()()())}function qn(o,t){if(o&1){let e=C();i(0,"button",142),f("click",function(){v(e);let r=m().$implicit,s=m(3);return x(s.toggleNode(r.id))}),u(),i(1,"svg",143),h(2,"path",90),a()()}if(o&2){let e=m().$implicit,n=m(3);c(),V("rotate-90",n.isNodeExpanded(e.id))}}function Kn(o,t){o&1&&(i(0,"div",144),h(1,"div",145),a())}function Qn(o,t){if(o&1&&(i(0,"span",146),l(1),a()),o&2){let e=m().$implicit;c(),ie(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function Xn(o,t){if(o&1){let e=C();i(0,"button",142),f("click",function(){v(e);let r=m().$implicit,s=m(5);return x(s.toggleNode(r.id))}),u(),i(1,"svg",143),h(2,"path",90),a()()}if(o&2){let e=m().$implicit,n=m(5);c(),V("rotate-90",n.isNodeExpanded(e.id))}}function Jn(o,t){o&1&&(i(0,"div",144),h(1,"div",145),a())}function eo(o,t){if(o&1&&(i(0,"span",146),l(1),a()),o&2){let e=m().$implicit;c(),ie(" ",e.children.length," sub-location",e.children.length!==1?"s":""," ")}}function to(o,t){if(o&1&&(i(0,"div",157)(1,"div",144),h(2,"div",145),a(),i(3,"div",158),u(),i(4,"svg",159),h(5,"path",160),a()(),g(),i(6,"div",136)(7,"div",5)(8,"span",152),l(9),a(),i(10,"span",161),l(11),a()(),i(12,"div",139),l(13),a()()()),o&2){let e=t.$implicit;c(9),y(e.name),c(2),k(" ",(e.type==null?null:e.type.name)||"Floor"," "),c(2),k("",e.asset_count||0," assets")}}function io(o,t){if(o&1&&(i(0,"div",155),b(1,to,14,3,"div",156),a()),o&2){let e=m().$implicit;c(),p("ngForOf",e.children)}}function no(o,t){if(o&1&&(nt(0),i(1,"div",148)(2,"div",5),b(3,Xn,3,2,"button",130)(4,Jn,2,0,"div",131),i(5,"div",149),u(),i(6,"svg",150),h(7,"path",151),a()(),g(),i(8,"div",136)(9,"div",5)(10,"span",152),l(11),a(),i(12,"span",153),l(13),a()(),i(14,"div",139),l(15),b(16,eo,2,2,"span",140),a()()()(),b(17,io,2,1,"div",154),ot()),o&2){let e=t.$implicit,n=m(5);c(3),p("ngIf",e.children&&e.children.length>0),c(),p("ngIf",!e.children||e.children.length===0),c(7),y(e.name),c(2),k(" ",(e.type==null?null:e.type.name)||"Residential Building"," "),c(2),k(" ",e.asset_count||0," assets "),c(),p("ngIf",e.children&&e.children.length>0),c(),p("ngIf",n.isNodeExpanded(e.id)&&e.children&&e.children.length>0)}}function oo(o,t){if(o&1&&(i(0,"div",147),b(1,no,18,7,"ng-container",128),a()),o&2){let e=m().$implicit;c(),p("ngForOf",e.children)}}function ro(o,t){if(o&1&&(nt(0),i(1,"div",129)(2,"div",88)(3,"div",5),b(4,qn,3,2,"button",130)(5,Kn,2,0,"div",131),i(6,"div",132),u(),i(7,"svg",133),h(8,"path",134)(9,"path",135),a()(),g(),i(10,"div",136)(11,"div",5)(12,"span",137),l(13),a(),i(14,"span",138),l(15),a()(),i(16,"div",139),l(17),b(18,Qn,2,2,"span",140),a()()()(),b(19,oo,2,1,"div",141),a(),ot()),o&2){let e=t.$implicit,n=m(3);c(4),p("ngIf",e.children&&e.children.length>0),c(),p("ngIf",!e.children||e.children.length===0),c(8),y(e.name),c(2),k(" ",(e.type==null?null:e.type.name)||"Community"," "),c(2),k(" ",e.asset_count||0," assets "),c(),p("ngIf",e.children&&e.children.length>0),c(),p("ngIf",n.isNodeExpanded(e.id)&&e.children&&e.children.length>0)}}function ao(o,t){o&1&&(i(0,"div",117),u(),i(1,"svg",118),h(2,"path",86),a(),g(),i(3,"h3",119),l(4,"No hierarchy data"),a(),i(5,"p",120),l(6,"Create some locations to see the hierarchy tree."),a()())}function so(o,t){if(o&1&&(i(0,"div",127),b(1,ro,20,7,"ng-container",128)(2,ao,7,0,"div",61),a()),o&2){let e=m(2);c(),p("ngForOf",e.hierarchyData),c(),p("ngIf",e.hierarchyData.length===0)}}function lo(o,t){if(o&1){let e=C();i(0,"div")(1,"div",52)(2,"h2",124),l(3,"Location Hierarchy"),a(),i(4,"div",5)(5,"button",125),f("click",function(){v(e);let r=m();return x(r.expandAll())}),l(6," Expand All "),a(),i(7,"button",125),f("click",function(){v(e);let r=m();return x(r.collapseAll())}),l(8," Collapse All "),a()()(),b(9,Yn,10,0,"div",58)(10,so,3,2,"div",126),a()}if(o&2){let e=m();c(9),p("ngIf",e.hierarchyLoading),c(),p("ngIf",!e.hierarchyLoading)}}function co(o,t){o&1&&(i(0,"div",162),h(1,"app-hierarchy-management"),a())}function mo(o,t){o&1&&(i(0,"div")(1,"div",52)(2,"h2",124),l(3,"Location Analytics"),a(),i(4,"div",5)(5,"button",163),l(6," Export Report "),a()()(),i(7,"div",117)(8,"div",164),u(),i(9,"svg",165),h(10,"path",166),a()(),g(),i(11,"h3",68),l(12,"Analytics Coming Soon"),a(),i(13,"p",69),l(14,"Detailed analytics and insights about your locations will be available here."),a()()())}function po(o,t){if(o&1){let e=C();i(0,"button",187),f("click",function(){v(e);let r=m(3);return x(r.goToPage(1))}),l(1," 1 "),a()}}function ho(o,t){o&1&&(i(0,"span",188),u(),i(1,"svg",189),h(2,"circle",190)(3,"circle",191)(4,"circle",192),a()())}function uo(o,t){if(o&1){let e=C();i(0,"button",193),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.goToPage(r))}),l(1),a()}if(o&2){let e=t.$implicit,n=m(3);D(n.pagination.current_page===e?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-gray-500 border-gray-300 hover:bg-gray-50"),p("title","Page "+e),c(),k(" ",e," ")}}function go(o,t){o&1&&(i(0,"span",188),u(),i(1,"svg",189),h(2,"circle",190)(3,"circle",191)(4,"circle",192),a()())}function _o(o,t){if(o&1){let e=C();i(0,"button",187),f("click",function(){v(e);let r=m(3);return x(r.goToPage(r.pagination.last_page))}),l(1),a()}if(o&2){let e=m(3);c(),k(" ",e.pagination.last_page," ")}}function fo(o,t){if(o&1){let e=C();i(0,"div",179)(1,"nav",180)(2,"button",181),f("click",function(){v(e);let r=m(2);return x(r.goToPage(r.pagination.current_page-1))}),u(),i(3,"svg",82),h(4,"path",182),a(),g(),i(5,"span"),l(6,"Previous"),a()(),i(7,"div",111),b(8,po,2,0,"button",183)(9,ho,5,0,"span",184)(10,uo,2,4,"button",185)(11,go,5,0,"span",184)(12,_o,2,1,"button",183),a(),i(13,"button",186),f("click",function(){v(e);let r=m(2);return x(r.goToPage(r.pagination.current_page+1))}),i(14,"span"),l(15,"Next"),a(),u(),i(16,"svg",7),h(17,"path",90),a()()()()}if(o&2){let e=m(2);c(2),p("disabled",e.pagination.current_page===1),c(6),p("ngIf",e.getVisiblePages()[0]>1),c(),p("ngIf",e.getVisiblePages()[0]>2),c(),p("ngForOf",e.getVisiblePages()),c(),p("ngIf",e.getVisiblePages()[e.getVisiblePages().length-1]<e.pagination.last_page-1),c(),p("ngIf",e.getVisiblePages()[e.getVisiblePages().length-1]<e.pagination.last_page),c(),p("disabled",e.pagination.current_page===e.pagination.last_page)}}function vo(o,t){if(o&1){let e=C();i(0,"div",194)(1,"div",170)(2,"span"),l(3,"Go to page:"),a(),i(4,"input",195),st("ngModelChange",function(r){v(e);let s=m(2);return at(s.jumpToPage,r)||(s.jumpToPage=r),x(r)}),f("keyup.enter",function(){v(e);let r=m(2);return x(r.goToPage(r.jumpToPage))}),a(),i(5,"button",196),f("click",function(){v(e);let r=m(2);return x(r.goToPage(r.jumpToPage))}),l(6," Go "),a()()()}if(o&2){let e=m(2);c(4),Rt("placeholder",e.pagination.current_page),p("min",1)("max",e.pagination.last_page),rt("ngModel",e.jumpToPage),c(),p("disabled",!e.jumpToPage||e.jumpToPage<1||e.jumpToPage>e.pagination.last_page)}}function xo(o,t){if(o&1){let e=C();i(0,"div",167)(1,"div",2)(2,"div",168),l(3," Showing "),i(4,"span",169),l(5),a(),l(6," to "),i(7,"span",169),l(8),a(),l(9," of "),i(10,"span",169),l(11),a(),l(12," results "),a(),i(13,"div",170)(14,"span"),l(15,"Show"),a(),i(16,"select",171),st("ngModelChange",function(r){v(e);let s=m();return at(s.pagination.per_page,r)||(s.pagination.per_page=r),x(r)}),f("change",function(r){v(e);let s=m();return x(s.changePerPage(r))}),i(17,"option",172),l(18,"10"),a(),i(19,"option",173),l(20,"15"),a(),i(21,"option",174),l(22,"25"),a(),i(23,"option",175),l(24,"50"),a(),i(25,"option",176),l(26,"100"),a()(),i(27,"span"),l(28,"per page"),a()()(),b(29,fo,18,7,"div",177)(30,vo,7,5,"div",178),a()}if(o&2){let e=m();c(5),y(e.pagination.from),c(3),y(e.pagination.to),c(3),y(e.pagination.total),c(5),rt("ngModel",e.pagination.per_page),c(13),p("ngIf",e.pagination.last_page>1),c(),p("ngIf",e.pagination.last_page>10)}}var ye=class o{constructor(t,e,n){this.fb=t;this.locationService=e;this.router=n;this.searchForm=this.fb.group({search:[""]}),this.filtersForm=this.fb.group({type_id:[""],parent_id:[""],hierarchy_level:[""],asset_count:[""],sort_by:["created"],sort_direction:["desc"]})}destroy$=new E;locations=[];locationTypes=[];hierarchyData=[];loading=!1;hierarchyLoading=!1;showFilters=!1;currentView="grid";currentListView="grid";expandedNodes=new Set;showAddLocationModal=!1;showEditLocationModal=!1;showDeleteConfirmationModal=!1;showBulkCreateModal=!1;selectedLocation=null;pagination={current_page:1,last_page:1,per_page:15,total:0,from:0,to:0};searchForm;filtersForm;jumpToPage;sortOptions=[{value:"created",label:"Created"},{value:"name",label:"Name"},{value:"type",label:"Type"},{value:"updated",label:"Updated"}];hierarchyLevels=[{value:"",label:"All Levels"},{value:"0",label:"Level 0 (Root)"},{value:"1",label:"Level 1"},{value:"2",label:"Level 2"},{value:"3",label:"Level 3"}];assetCountOptions=[{value:"",label:"Any Count"},{value:"0",label:"No Assets"},{value:"1-10",label:"1-10 Assets"},{value:"11-50",label:"11-50 Assets"},{value:"50+",label:"50+ Assets"}];ngOnInit(){this.initializeSearchSubscription(),this.loadLocationTypes(),this.loadLocations(),this.loadHierarchy()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeSearchSubscription(){this.searchForm.get("search")?.valueChanges.pipe(Et(300),tt(),H(this.destroy$)).subscribe(()=>{this.loadLocations()})}loadLocationTypes(){this.locationService.getLocationTypes().pipe(H(this.destroy$)).subscribe({next:t=>{t.success&&(this.locationTypes=t.data.types)},error:t=>{console.error("Error loading location types:",t)}})}loadLocations(t=1){this.loading=!0;let e=this.searchForm.get("search")?.value,n=this.filtersForm.value,r=j({search:e,page:t,per_page:this.pagination.per_page},n);Object.keys(r).forEach(s=>{(r[s]===""||r[s]===null)&&delete r[s]}),this.locationService.getLocations(r).pipe(H(this.destroy$)).subscribe({next:s=>{s.success&&(this.locations=s.data.locations,this.pagination=s.data.pagination),this.loading=!1},error:s=>{console.error("Error loading locations:",s),this.loading=!1}})}loadHierarchy(){this.hierarchyLoading=!0,this.locationService.getHierarchy().pipe(H(this.destroy$)).subscribe({next:t=>{t.success&&(this.hierarchyData=t.data.hierarchy),this.hierarchyLoading=!1},error:t=>{console.error("Error loading hierarchy:",t),this.hierarchyLoading=!1}})}setView(t){this.currentView=t,t==="tree"&&this.hierarchyData.length===0&&this.loadHierarchy()}setListView(t){this.currentListView=t}toggleFilters(){this.showFilters=!this.showFilters}applyFilters(){this.loadLocations(1),this.showFilters=!1}clearFilters(){this.filtersForm.reset({type_id:"",parent_id:"",hierarchy_level:"",asset_count:"",sort_by:"created",sort_direction:"desc"}),this.loadLocations(1)}goToPage(t){t>=1&&t<=this.pagination.last_page&&this.loadLocations(t)}getVisiblePages(){let t=this.pagination.current_page,e=this.pagination.last_page,n=[],r=Math.max(1,t-2),s=Math.min(e,t+2);for(let d=r;d<=s;d++)n.push(d);return n}changePerPage(t){this.pagination.per_page=parseInt(t.target.value),this.loadLocations(1)}getLocationTypeIcon(t){return{"Residential Building":"\u{1F3E0}","Office Building":"\u{1F3E2}",Factory:"\u{1F3ED}",Warehouse:"\u{1F3EA}",Garden:"\u{1F333}",Apartment:"\u{1F3E0}",Room:"\u{1F6AA}",Floor:"\u{1F4CB}"}[t.name]||"\u{1F4CD}"}getHierarchyLevelBadge(t){return`L${t}`}getHierarchyLevelColor(t){return["blue","green","yellow","purple"][t]||"gray"}editLocation(t){this.selectedLocation=t,this.showEditLocationModal=!0}deleteLocation(t){this.selectedLocation=t,this.showDeleteConfirmationModal=!0}viewLocation(t){this.router.navigate(["/locations",t.id])}addLocation(){this.showAddLocationModal=!0}closeAddLocationModal(){this.showAddLocationModal=!1}closeEditLocationModal(){this.showEditLocationModal=!1,this.selectedLocation=null}closeDeleteConfirmationModal(){this.showDeleteConfirmationModal=!1,this.selectedLocation=null}openBulkCreateModal(){this.showBulkCreateModal=!0}closeBulkCreateModal(){this.showBulkCreateModal=!1}onLocationCreated(t){this.loadLocations(this.pagination.current_page),this.showAddLocationModal=!1}onLocationUpdated(t){let e=this.locations.findIndex(n=>n.id===t.id);e!==-1&&(this.locations[e]=t),this.showEditLocationModal=!1,this.selectedLocation=null}onLocationDeleted(t){this.locations=this.locations.filter(e=>e.id!==t.id),this.pagination.total=Math.max(0,this.pagination.total-1),this.pagination.to=Math.max(0,this.pagination.to-1),this.locations.length===0&&this.pagination.current_page>1&&this.loadLocations(this.pagination.current_page-1),this.showDeleteConfirmationModal=!1,this.selectedLocation=null}onLocationsCreated(t){this.loadLocations(this.pagination.current_page),this.loadHierarchy(),this.showBulkCreateModal=!1}toggleNode(t){this.expandedNodes.has(t)?this.expandedNodes.delete(t):this.expandedNodes.add(t)}isNodeExpanded(t){return this.expandedNodes.has(t)}expandAll(){this.hierarchyData.forEach(t=>{this.addAllNodeIds(t,this.expandedNodes)})}collapseAll(){this.expandedNodes.clear()}addAllNodeIds(t,e){e.add(t.id),t.children&&t.children.length>0&&t.children.forEach(n=>{this.addAllNodeIds(n,e)})}getLocationTypeColor(t){return{Community:"gray","Residential Building":"blue",Floor:"green",Garden:"orange","Office Building":"blue"}[t]||"gray"}exportQR(){console.log("Export QR")}onDocumentClick(t){let e=t.target,n=e.closest(".filter-button"),r=e.closest(".filter-dropdown"),s=e.closest("select"),d=e.tagName==="OPTION";!n&&!r&&!s&&!d&&this.showFilters&&(this.showFilters=!1)}static \u0275fac=function(e){return new(e||o)(T(ce),T(F),T(Ve))};static \u0275cmp=O({type:o,selectors:[["app-locations"]],hostBindings:function(e,n){e&1&&f("click",function(s){return n.onDocumentClick(s)},!1,It)},decls:45,vars:21,consts:[[1,"bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-6","py-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"flex","items-center","space-x-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","font-medium","hover:bg-blue-700","transition-colors",3,"click"],[1,"flex","items-center","space-x-1","bg-gray-100","rounded-lg","p-1"],[1,"flex-1","px-4","py-2","rounded-md","text-sm","font-medium","transition-all",3,"click"],["class","bg-white border-b border-gray-200 px-6 py-4",4,"ngIf"],[1,"px-6","py-6"],["class","flex items-center justify-between mb-6",4,"ngIf"],[4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200 p-6",4,"ngIf"],["class","mt-8 pt-6 border-t border-gray-200",4,"ngIf"],[3,"closeModal","locationCreated","isOpen"],[3,"closeModal","locationUpdated","isOpen","location"],[3,"closeModal","locationDeleted","isOpen","location"],[3,"closeModal","locationsCreated","isOpen"],[1,"bg-white","border-b","border-gray-200","px-6","py-4"],[1,"flex-1","max-w-md",3,"formGroup"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","formControlName","search","placeholder","Search locations...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"filter-button","relative","flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","filter-dropdown absolute text-start top-full right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 py-4 z-50",4,"ngIf"],[1,"filter-dropdown","absolute","text-start","top-full","right-0","mt-2","w-80","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-4","z-50"],[1,"p-4",3,"ngSubmit","formGroup"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["formControlName","type_id",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","hierarchy_level",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","asset_count",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value","0"],["value","1-10"],["value","11-50"],["value","51+"],[1,"flex","items-center","justify-between","pt-4","border-t","border-gray-100","mt-4"],["type","button",1,"px-4","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","cursor-pointer",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","cursor-pointer"],[3,"value"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","space-x-2"],[1,"px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 10h16M4 14h16M4 18h16"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","mb-6"],["class","relative bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-blue-300 hover:-translate-y-1 transition-all duration-300 cursor-pointer group",4,"ngFor","ngForOf"],[1,"relative","bg-white","rounded-xl","p-6","shadow-sm","border","border-gray-200","hover:shadow-lg","hover:border-blue-300","hover:-translate-y-1","transition-all","duration-300","cursor-pointer","group"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-start","space-x-3"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center","group-hover:bg-orange-200","transition-colors","duration-300"],[1,"w-7","h-7",3,"src","alt"],[1,"text-2xl","font-bold","text-gray-900","group-hover:text-blue-700","transition-colors","duration-300"],[1,"flex","items-center","space-x-2","mt-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"space-y-2","mb-6"],[1,"flex","items-center","text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"absolute","top-4","right-4","flex","items-center","space-x-1","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-sm","font-medium"],[1,"flex","items-center","justify-between"],[1,"bg-blue-600","text-white","px-6","py-2","rounded-lg","text-sm","font-medium","hover:bg-blue-700","transition-all","duration-300","flex","items-center","space-x-2","hover:shadow-lg","transform","hover:scale-105",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"p-2","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"p-2","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-2","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-3"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 hover:shadow-sm transition-all duration-200 cursor-pointer group",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","hover:shadow-sm","transition-all","duration-200","cursor-pointer","group"],[1,"grid","grid-cols-12","gap-4","items-center"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","transition-colors","duration-200"],[1,"w-6","h-6",3,"src","alt"],[1,"font-medium","text-gray-900","group-hover:text-blue-700","transition-colors","duration-200"],["class","text-sm text-gray-500",4,"ngIf"],[1,"flex","items-center","space-x-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all","duration-200","hover:scale-110","cursor-pointer",3,"click"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all","duration-200","hover:scale-110","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],[1,"p-1","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded","transition-all","duration-200","hover:scale-110","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],[1,"text-2xl","font-bold","text-gray-900"],[1,"px-4","py-2","text-sm","font-medium","text-gray-600","hover:text-gray-800","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["class","space-y-1",4,"ngIf"],[1,"space-y-1"],[4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","border","border-gray-200","p-4"],["class","w-4 h-4 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors cursor-pointer",3,"click",4,"ngIf"],["class","w-4 h-4 flex items-center justify-center",4,"ngIf"],[1,"w-8","h-8","bg-blue-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 21l4-4 4 4"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-gray-100","text-gray-700"],[1,"text-sm","text-gray-500","mt-1"],["class","ml-4",4,"ngIf"],["class","mt-4 ml-7 space-y-3",4,"ngIf"],[1,"w-4","h-4","flex","items-center","justify-center","text-gray-400","hover:text-gray-600","transition-colors","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","transition-transform"],[1,"w-4","h-4","flex","items-center","justify-center"],[1,"w-1","h-1","bg-gray-300","rounded-full"],[1,"ml-4"],[1,"mt-4","ml-7","space-y-3"],[1,"flex","items-center","justify-between","py-2","px-3","bg-gray-50","rounded-lg"],[1,"w-6","h-6","bg-blue-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"font-medium","text-gray-900"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-blue-100","text-blue-700"],["class","ml-7 space-y-2",4,"ngIf"],[1,"ml-7","space-y-2"],["class","flex items-center space-x-3 py-2 px-3 bg-white rounded border border-gray-100",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3","py-2","px-3","bg-white","rounded","border","border-gray-100"],[1,"w-6","h-6","bg-green-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-green-100","text-green-700"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","p-6"],[1,"px-4","py-2","text-gray-600","hover:text-gray-800","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"flex","items-center","space-x-2","text-sm","text-gray-600"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white",3,"ngModelChange","change","ngModel"],["value","10"],["value","15"],["value","25"],["value","50"],["value","100"],["class","flex items-center justify-center",4,"ngIf"],["class","flex items-center justify-center mt-4",4,"ngIf"],[1,"flex","items-center","justify-center"],["aria-label","Pagination",1,"flex","items-center","space-x-1"],["title","Previous page",1,"flex","items-center","justify-center","px-4","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["class","flex items-center justify-center w-10 h-10 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],["class","flex items-center justify-center w-10 h-10 text-gray-400",4,"ngIf"],["class","flex items-center justify-center w-10 h-10 text-sm font-medium border rounded-lg transition-colors",3,"class","title","click",4,"ngFor","ngForOf"],["title","Next page",1,"flex","items-center","justify-center","px-4","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","text-gray-400"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["cx","3","cy","10","r","1.5"],["cx","10","cy","10","r","1.5"],["cx","17","cy","10","r","1.5"],[1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","border","rounded-lg","transition-colors",3,"click","title"],[1,"flex","items-center","justify-center","mt-4"],["type","number",1,"w-16","px-2","py-1","border","border-gray-300","rounded","text-center","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keyup.enter","min","max","ngModel","placeholder"],[1,"px-3","py-1","bg-blue-600","text-white","rounded","text-sm","hover:bg-blue-700","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),l(5,"Facilities & Locations"),a(),i(6,"p",4),l(7,"Organize and monitor your facilities with hierarchical location management"),a()(),i(8,"div",5)(9,"button",6),u(),i(10,"svg",7),h(11,"path",8),a(),g(),i(12,"span"),l(13,"Export QR"),a()(),i(14,"button",9),f("click",function(){return n.openBulkCreateModal()}),u(),i(15,"svg",7),h(16,"path",10),a(),g(),i(17,"span"),l(18,"Bulk"),a()(),i(19,"button",11),f("click",function(){return n.addLocation()}),u(),i(20,"svg",7),h(21,"path",10),a(),g(),i(22,"span"),l(23,"Add Location"),a()()()(),i(24,"div",12)(25,"button",13),f("click",function(){return n.setView("grid")}),l(26," Grid "),a(),i(27,"button",13),f("click",function(){return n.setView("tree")}),l(28," Tree "),a(),i(29,"button",13),f("click",function(){return n.setView("analytics")}),l(30," Analytics "),a(),i(31,"button",13),f("click",function(){return n.setView("mgmt")}),l(32," Mgmt "),a()()(),b(33,An,15,4,"div",14),i(34,"div",15),b(35,Fn,10,5,"div",16)(36,Zn,5,4,"div",17)(37,lo,11,2,"div",17)(38,co,2,0,"div",18)(39,mo,15,0,"div",17)(40,xo,31,6,"div",19),a(),i(41,"app-add-location-modal",20),f("closeModal",function(){return n.closeAddLocationModal()})("locationCreated",function(s){return n.onLocationCreated(s)}),a(),i(42,"app-edit-location-modal",21),f("closeModal",function(){return n.closeEditLocationModal()})("locationUpdated",function(s){return n.onLocationUpdated(s)}),a(),i(43,"app-delete-confirmation-modal",22),f("closeModal",function(){return n.closeDeleteConfirmationModal()})("locationDeleted",function(s){return n.onLocationDeleted(s)}),a(),i(44,"app-bulk-create-modal",23),f("closeModal",function(){return n.closeBulkCreateModal()})("locationsCreated",function(s){return n.onLocationsCreated(s)}),a()()),e&2&&(c(25),D(n.currentView==="grid"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),c(2),D(n.currentView==="tree"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),c(2),D(n.currentView==="analytics"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),c(2),D(n.currentView==="mgmt"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),c(2),p("ngIf",n.currentView==="grid"),c(2),p("ngIf",n.currentView==="grid"),c(),p("ngIf",n.currentView==="grid"),c(),p("ngIf",n.currentView==="tree"),c(),p("ngIf",n.currentView==="mgmt"),c(),p("ngIf",n.currentView==="analytics"),c(),p("ngIf",n.currentView==="grid"&&!n.loading&&n.locations.length>0),c(),p("isOpen",n.showAddLocationModal),c(),p("isOpen",n.showEditLocationModal)("location",n.selectedLocation),c(),p("isOpen",n.showDeleteConfirmationModal)("location",n.selectedLocation),c(),p("isOpen",n.showBulkCreateModal))},dependencies:[A,Z,z,X,ae,He,Ae,ne,Nt,Oe,oe,re,Gt,Bt,se,le,Fe,Ft,he,fe,Ne,je,ze,Ye],styles:[".location-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.hierarchy-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;padding:.25rem .5rem;border-radius:9999px}.location-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;border-radius:.5rem;font-size:1.25rem}.filter-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:1px solid #e2e8f0}.search-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.search-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 2px 4px #3b82f633}.table-row[_ngcontent-%COMP%]{transition:background-color .15s ease-in-out}.table-row[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-grid[_ngcontent-%COMP%], .filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.table-header[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%], .table-row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}}"]})};function bo(o,t){o&1&&(i(0,"div",18)(1,"div",19)(2,"div",20),u(),i(3,"svg",21),h(4,"circle",22)(5,"path",23),a()(),g(),i(6,"h3",24),l(7,"Loading Location"),a(),i(8,"p",25),l(9,"Please wait while we fetch the location details..."),a()()())}function yo(o,t){if(o&1){let e=C();i(0,"div",18)(1,"div",19)(2,"div",26),u(),i(3,"svg",27),h(4,"path",28),a()(),g(),i(5,"h3",24),l(6,"Error Loading Location"),a(),i(7,"p",29),l(8),a(),i(9,"button",30),f("click",function(){v(e);let r=m();return x(r.goBack())}),l(10," Back to Locations "),a()()()}if(o&2){let e=m();c(8),y(e.error)}}function wo(o,t){o&1&&(i(0,"div",80)(1,"div",102),u(),i(2,"svg",103),h(3,"circle",22)(4,"path",23),a()(),g(),i(5,"h3",24),l(6,"Loading Sub-locations"),a(),i(7,"p",25),l(8,"Please wait..."),a()())}function So(o,t){if(o&1){let e=C();i(0,"div",113),f("click",function(){let r=v(e).$implicit,s=m(3);return x(s.viewSubLocation(r))}),i(1,"div",114)(2,"div",8)(3,"div",115),u(),i(4,"svg",116),h(5,"path",54),a()(),g(),i(6,"div")(7,"h4",117),l(8),a(),i(9,"div",118)(10,"span"),l(11),a()(),i(12,"div",119),l(13),a()()(),i(14,"div",120)(15,"button",121),f("click",function(r){let s=v(e).$implicit;return m(3).editSubLocation(s),x(r.stopPropagation())}),u(),i(16,"svg",10),h(17,"path",11),a()(),g(),i(18,"button",122),u(),i(19,"svg",10),h(20,"path",123),a()()()(),g(),i(21,"div",124)(22,"div",3)(23,"span",67),l(24,"Assets: "),i(25,"span",125),l(26),a()()(),i(27,"div",3)(28,"span",67),l(29,"Status: "),i(30,"span",126),l(31,"Active"),a()()()()()}if(o&2){let e=t.$implicit;c(8),y(e.name),c(3),y(e.type.name),c(2),y(e.description||e.name),c(13),y((e.asset_summary==null?null:e.asset_summary.asset_count)||0)}}function Co(o,t){if(o&1&&(i(0,"div",127)(1,"div",128)(2,"div",129),u(),i(3,"svg",130),h(4,"path",131),a()()(),g(),i(5,"div",132),u(),i(6,"svg",133),h(7,"path",54),a()(),g(),i(8,"span",134),l(9),a()()),o&2){let e=t.$implicit;c(9),y(e.name)}}function ko(o,t){if(o&1&&(i(0,"div",65),b(1,So,32,4,"div",104),i(2,"div",105)(3,"h3",106),l(4,"Hierarchy View"),a(),i(5,"div",107)(6,"div",8)(7,"div",108),u(),i(8,"svg",109),h(9,"path",35),a()(),g(),i(10,"div")(11,"h4",110),l(12),a()()()(),i(13,"div",111),b(14,Co,10,1,"div",112),a()()()),o&2){let e=m(2);c(),p("ngForOf",e.subLocations),c(11),y(e.location.name),c(2),p("ngForOf",e.subLocations)}}function Mo(o,t){if(o&1){let e=C();i(0,"div",80)(1,"div",81),u(),i(2,"svg",82),h(3,"path",54),a()(),g(),i(4,"h3",24),l(5,"No Sub-locations"),a(),i(6,"p",83),l(7,"Create sub-locations to organize your space more effectively."),a(),i(8,"button",135),f("click",function(){v(e);let r=m(2);return x(r.addSubLocation())}),u(),i(9,"svg",10),h(10,"path",12),a(),g(),i(11,"span"),l(12,"Add First Sub-location"),a()()()}}function Eo(o,t){if(o&1&&(i(0,"div",136)(1,"div"),u(),i(2,"svg",137),h(3,"path",138),a()(),g(),i(4,"div",139)(5,"h4",125),l(6),a(),i(7,"p",140),l(8),a(),i(9,"p",141),l(10),a()()()),o&2){let e=t.$implicit,n=m(2);c(),D("w-8 h-8 bg-"+n.getActivityColor(e.type)+"-100 rounded-lg flex items-center justify-center"),c(),D("w-4 h-4 text-"+n.getActivityColor(e.type)+"-600"),c(),pe("d",n.getActivityIcon(e.type)),c(3),y(e.title),c(2),y(e.description),c(2),y(e.time)}}function Lo(o,t){if(o&1){let e=C();i(0,"div",31)(1,"div",32)(2,"div",2)(3,"div",3)(4,"div",33),u(),i(5,"svg",34),h(6,"path",35),a()(),g(),i(7,"h1",36),l(8),a()(),i(9,"div",8)(10,"button",37),f("click",function(){v(e);let r=m();return x(r.editLocation())}),u(),i(11,"svg",10),h(12,"path",11),a(),g(),i(13,"span"),l(14,"Edit"),a()(),i(15,"button",37),f("click",function(){v(e);let r=m();return x(r.addAsset())}),u(),i(16,"svg",10),h(17,"path",12),a(),g(),i(18,"span"),l(19,"Add Asset"),a()(),i(20,"button",38),f("click",function(){v(e);let r=m();return x(r.deleteLocation())}),u(),i(21,"svg",10),h(22,"path",14),a(),g(),i(23,"span"),l(24,"Delete"),a()()()()(),i(25,"div",39)(26,"div",40)(27,"div",41)(28,"h3",42),l(29,"Total Assets"),a(),i(30,"div",43),u(),i(31,"svg",44),h(32,"path",45),a()()(),g(),i(33,"div",46),l(34),a()(),i(35,"div",40)(36,"div",41)(37,"h3",47),l(38,"Health Score"),a(),i(39,"div",48),u(),i(40,"svg",49),h(41,"path",50),a()()(),g(),i(42,"div",46),l(43),a()(),i(44,"div",40)(45,"div",41)(46,"h3",51),l(47,"Sub-locations"),a(),i(48,"div",52),u(),i(49,"svg",53),h(50,"path",54),a()()(),g(),i(51,"div",46),l(52),a()(),i(53,"div",40)(54,"div",41)(55,"h3",55),l(56,"Total Value"),a(),i(57,"div",56),u(),i(58,"svg",57),h(59,"path",50),a()()(),g(),i(60,"div",46),l(61),a()()(),i(62,"div",58)(63,"div",59)(64,"div",60)(65,"div",61),u(),i(66,"svg",62),h(67,"path",63),a(),g(),i(68,"h2",64),l(69,"Location Overview"),a()(),i(70,"div",65)(71,"div")(72,"h4",66),l(73,"Description"),a(),i(74,"p",67),l(75),a()(),i(76,"div")(77,"h4",66),l(78,"Capacity & Utilization"),a(),i(79,"div",68)(80,"div",69)(81,"span",67),l(82,"Asset Utilization"),a(),i(83,"span",7),l(84,"0%"),a()(),i(85,"div",70),h(86,"div",71),a()(),i(87,"div",72)(88,"div",73),u(),i(89,"svg",74),h(90,"path",75),a(),g(),i(91,"div")(92,"div",64),l(93,"72\xB0F"),a(),i(94,"div",76),l(95,"Temperature"),a()()(),i(96,"div",73),u(),i(97,"svg",77),h(98,"path",78),a(),g(),i(99,"div")(100,"div",64),l(101,"Normal"),a(),i(102,"div",76),l(103,"Status"),a()()()()()()(),i(104,"div",60)(105,"div",61),u(),i(106,"svg",62),h(107,"path",79),a(),g(),i(108,"h2",64),l(109,"Asset Health Dashboard"),a()(),i(110,"div",80)(111,"div",81),u(),i(112,"svg",82),h(113,"path",45),a()(),g(),i(114,"h3",24),l(115,"No Assets Found"),a(),i(116,"p",83),l(117,"This location doesn't have any assets assigned yet."),a(),i(118,"button",30),f("click",function(){v(e);let r=m();return x(r.addAsset())}),l(119," Add Assets "),a()()(),i(120,"div",60)(121,"div",84)(122,"div",73),u(),i(123,"svg",62),h(124,"path",54),a(),g(),i(125,"h2",64),l(126),a()(),i(127,"button",85),f("click",function(){v(e);let r=m();return x(r.addSubLocation())}),u(),i(128,"svg",10),h(129,"path",12),a(),g(),i(130,"span"),l(131,"Add Sub-location"),a()()(),b(132,wo,9,0,"div",86)(133,ko,15,3,"div",87)(134,Mo,13,0,"div",86),a()(),i(135,"div",88)(136,"div",60)(137,"div",61),u(),i(138,"svg",62),h(139,"path",89),a(),g(),i(140,"h2",64),l(141,"Recent Activity"),a()(),i(142,"div",65),b(143,Eo,11,8,"div",90),a()(),i(144,"div",60)(145,"div",61),u(),i(146,"svg",62),h(147,"path",91),a(),g(),i(148,"h2",64),l(149,"Location QR Code"),a()(),i(150,"div",19)(151,"div",92),h(152,"div",93),a(),i(153,"h4",94),l(154),a(),i(155,"p",95),l(156),a(),i(157,"div",68)(158,"button",96),f("click",function(){v(e);let r=m();return x(r.regenerateQR())}),u(),i(159,"svg",10),h(160,"path",97),a(),g(),i(161,"span"),l(162,"Regenerate"),a()(),i(163,"button",98),f("click",function(){v(e);let r=m();return x(r.downloadQR())}),u(),i(164,"svg",10),h(165,"path",99),a(),g(),i(166,"span"),l(167,"Download"),a()(),i(168,"button",98),f("click",function(){v(e);let r=m();return x(r.printLabel())}),u(),i(169,"svg",10),h(170,"path",100),a(),g(),i(171,"span"),l(172,"Print Label"),a()()(),i(173,"p",101),l(174," Scan this QR code to quickly access location details and view assets. "),a()()()()()()}if(o&2){let e=m();c(8),y(e.location.name),c(26),y(e.mockStats.totalAssets),c(9),k("",e.mockStats.healthScore,"%"),c(9),y(e.mockStats.subLocations),c(9),k("$",e.mockStats.totalValue,""),c(14),y(e.location.description||e.location.name),c(51),k("Sub-locations (",e.mockStats.subLocations,")"),c(6),p("ngIf",e.subLocationsLoading),c(),p("ngIf",!e.subLocationsLoading&&e.subLocations.length>0),c(),p("ngIf",!e.subLocationsLoading&&e.subLocations.length===0),c(9),p("ngForOf",e.mockActivities),c(11),y(e.location.name),c(2),y(e.mockStats.totalAssets)}}function Do(o,t){if(o&1){let e=C();i(0,"app-add-location-modal",142),f("closeModal",function(){v(e);let r=m();return x(r.closeAddSubLocationModal())})("locationCreated",function(r){v(e);let s=m();return x(s.onSubLocationCreated(r))}),a()}if(o&2){let e=m();p("isOpen",e.showAddSubLocationModal)("parentLocation",e.location)}}var qe=class o{constructor(t,e,n){this.route=t;this.router=e;this.locationService=n}destroy$=new E;location=null;loading=!0;error="";subLocations=[];subLocationsLoading=!1;showAddSubLocationModal=!1;mockStats={totalAssets:0,healthScore:100,subLocations:0,totalValue:0};mockActivities=[{type:"maintenance",title:"Maintenance Scheduled",description:"Routine maintenance scheduled for next week",time:"about 2 hours ago",icon:"maintenance"},{type:"utilization",title:"High Utilization",description:"Location utilization increased by 15%",time:"about 6 hours ago",icon:"chart"},{type:"safety",title:"Safety Inspection",description:"Monthly safety inspection completed",time:"1 day ago",icon:"shield"}];ngOnInit(){this.route.params.pipe(H(this.destroy$)).subscribe(t=>{let e=t.id;e&&this.loadLocation(parseInt(e))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadLocation(t){this.loading=!0,this.error="",this.locationService.getLocation(t).pipe(H(this.destroy$)).subscribe({next:e=>{e.success?(this.location=e.data.location,this.updateMockStats(),this.loadSubLocations()):this.error=e.message||"Failed to load location",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the location",this.loading=!1}})}loadSubLocations(){if(!this.location)return;this.subLocationsLoading=!0;let t={parent_id:this.location.id,per_page:50};this.locationService.getLocations(t).pipe(H(this.destroy$)).subscribe({next:e=>{e.success&&(this.subLocations=e.data.locations,this.updateMockStats()),this.subLocationsLoading=!1},error:e=>{console.error("Error loading sub-locations:",e),this.subLocationsLoading=!1}})}updateMockStats(){this.location&&(this.mockStats={totalAssets:this.location.asset_summary?.asset_count||0,healthScore:100,subLocations:this.subLocations.length,totalValue:this.location.asset_summary?.total_value||0})}goBack(){this.router.navigate(["/locations"])}editLocation(){this.location&&this.router.navigate(["/locations",this.location.id,"edit"])}addAsset(){console.log("Add asset to location")}deleteLocation(){console.log("Delete location")}addSubLocation(){this.showAddSubLocationModal=!0}closeAddSubLocationModal(){this.showAddSubLocationModal=!1}onSubLocationCreated(t){this.loadSubLocations(),this.showAddSubLocationModal=!1}regenerateQR(){console.log("Regenerate QR code")}downloadQR(){console.log("Download QR code")}printLabel(){console.log("Print label")}getActivityIcon(t){let e={maintenance:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",chart:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6",shield:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"};return e[t]||e.maintenance}getActivityColor(t){return{maintenance:"orange",chart:"purple",shield:"blue"}[t]||"gray"}viewSubLocation(t){this.router.navigate(["/locations",t.id])}editSubLocation(t){console.log("Edit sublocation:",t)}deleteSubLocation(t){console.log("Delete sublocation:",t)}static \u0275fac=function(e){return new(e||o)(T(At),T(Ve),T(F))};static \u0275cmp=O({type:o,selectors:[["app-location-view"]],decls:29,vars:4,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-3","py-2","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"flex","items-center","space-x-2","px-3","py-2","text-red-600","hover:bg-red-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],[3,"isOpen","parentLocation","closeModal","locationCreated",4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"px-6","py-6"],[1,"bg-blue-100","rounded-lg","p-6","mb-6"],[1,"w-12","h-12","bg-blue-200","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"flex","items-center","space-x-2","px-4","py-2","text-gray-700","hover:bg-blue-200","rounded-lg","transition-colors",3,"click"],[1,"flex","items-center","space-x-2","px-4","py-2","text-red-600","hover:bg-red-50","rounded-lg","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"bg-white","rounded-lg","p-4","border","border-gray-200"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-blue-600"],[1,"w-8","h-8","bg-blue-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","font-medium","text-green-600"],[1,"w-8","h-8","bg-green-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-sm","font-medium","text-purple-600"],[1,"w-8","h-8","bg-purple-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-sm","font-medium","text-orange-600"],[1,"w-8","h-8","bg-orange-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","p-6","shadow-sm","border","border-gray-200"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"text-gray-600"],[1,"space-y-2"],[1,"flex","justify-between","text-sm"],[1,"w-full","bg-gray-200","rounded-full","h-2"],[1,"bg-blue-600","h-2","rounded-full",2,"width","0%"],[1,"grid","grid-cols-2","gap-4","mt-4"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"text-xs","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["class","text-center py-12",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"space-y-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-start space-x-3",4,"ngFor","ngForOf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"w-32","h-32","bg-gray-100","rounded-lg","mx-auto","mb-4","flex","items-center","justify-center"],[1,"w-24","h-24","bg-black",2,"background-image","url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjIxIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIxIiB5PSIxIiB3aWR0aD0iNyIgaGVpZ2h0PSI3IiBmaWxsPSJibGFjayIvPgo8cmVjdCB4PSIxMyIgeT0iMSIgd2lkdGg9IjciIGhlaWdodD0iNyIgZmlsbD0iYmxhY2siLz4KPHJlY3QgeD0iMSIgeT0iMTMiIHdpZHRoPSI3IiBoZWlnaHQ9IjciIGZpbGw9ImJsYWNrIi8+CjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIzIiBoZWlnaHQ9IjMiIGZpbGw9IndoaXRlIi8+CjxyZWN0IHg9IjE1IiB5PSIzIiB3aWR0aD0iMyIgaGVpZ2h0PSIzIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIzIiB5PSIxNSIgd2lkdGg9IjMiIGhlaWdodD0iMyIgZmlsbD0id2hpdGUiLz4KPHJlY3QgeD0iOSIgeT0iOSIgd2lkdGg9IjMiIGhlaWdodD0iMyIgZmlsbD0iYmxhY2siLz4KPC9zdmc+')","background-size","contain","background-repeat","no-repeat","background-position","center"],[1,"font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-600","mb-4"],[1,"w-full","flex","items-center","justify-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"w-full","flex","items-center","justify-center","space-x-2","px-3","py-2","text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"text-xs","text-gray-500","mt-4"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-6","h-6","text-blue-600"],["class","bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-all cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"text-base","font-semibold","text-gray-900","mb-4"],[1,"bg-blue-100","rounded-lg","p-3","mb-2"],[1,"w-6","h-6","bg-blue-200","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-blue-700"],[1,"font-medium","text-blue-800","text-sm"],[1,"space-y-1"],["class","flex items-center space-x-3 p-2 hover:bg-gray-50 rounded transition-colors",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-4","hover:bg-gray-100","transition-all","cursor-pointer",3,"click"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-8","h-8","bg-white","rounded-lg","flex","items-center","justify-center","border","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],[1,"font-semibold","text-gray-900"],[1,"flex","items-center","space-x-2","text-sm","text-gray-500"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","items-center","space-x-1"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all",3,"click"],[1,"p-1","text-gray-400","hover:text-gray-600","hover:bg-gray-200","rounded","transition-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"],[1,"flex","items-center","justify-between","text-sm"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-600"],[1,"flex","items-center","space-x-3","p-2","hover:bg-gray-50","rounded","transition-colors"],[1,"flex","items-center"],[1,"w-6","h-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M12 2v20M2 12h20"],[1,"w-5","h-5","bg-gray-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-gray-600"],[1,"text-sm","text-gray-700"],[1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],[1,"flex","items-start","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex-1"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500","mt-1"],[3,"closeModal","locationCreated","isOpen","parentLocation"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),f("click",function(){return n.goBack()}),u(),i(5,"svg",5),h(6,"path",6),a(),g(),i(7,"span",7),l(8,"Back to Locations"),a()()(),i(9,"div",8)(10,"button",9),f("click",function(){return n.editLocation()}),u(),i(11,"svg",10),h(12,"path",11),a(),g(),i(13,"span"),l(14,"Edit"),a()(),i(15,"button",9),f("click",function(){return n.addAsset()}),u(),i(16,"svg",10),h(17,"path",12),a(),g(),i(18,"span"),l(19,"Add Asset"),a()(),i(20,"button",13),f("click",function(){return n.deleteLocation()}),u(),i(21,"svg",10),h(22,"path",14),a(),g(),i(23,"span"),l(24,"Delete"),a()()()()(),b(25,bo,10,0,"div",15)(26,yo,11,1,"div",15)(27,Lo,175,13,"div",16)(28,Do,1,2,"app-add-location-modal",17),a()),e&2&&(c(25),p("ngIf",n.loading),c(),p("ngIf",n.error&&!n.loading),c(),p("ngIf",n.location&&!n.loading),c(),p("ngIf",n.location))},dependencies:[A,Z,z,he,fe],styles:[".location-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.stats-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.activity-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc;border-radius:.5rem;padding:.75rem;margin:-.75rem}.qr-code-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border:2px dashed #e5e7eb}.qr-code-container[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.action-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.back-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.back-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;border-radius:.5rem;padding:.5rem 1rem;margin:-.5rem -1rem}.overview-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc)}.utilization-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#1d4ed8);transition:width .3s ease-in-out}.temperature-reading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:.75rem;padding:1rem}.status-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border-radius:.75rem;padding:1rem}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:1rem}.empty-state[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%], .main-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.location-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media print{.action-buttons[_ngcontent-%COMP%], .back-button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{border:1px solid #000;background:#fff}}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.activity-scroll[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"]})};var To=[{path:"",component:ye},{path:":id",component:qe}],Ke=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=te({type:o});static \u0275inj=ee({imports:[he.forChild(To),he]})};var fi=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=te({type:o});static \u0275inj=ee({imports:[A,X,Fe,Ke,ye]})};export{fi as LocationsModule};
