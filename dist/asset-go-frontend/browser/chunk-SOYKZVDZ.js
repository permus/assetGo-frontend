import{c as V,d as S,f as y,g as C}from"./chunk-C5P3YSZX.js";import{a as N,b as A,c as z,d as R,e as Oe,f as $,g as Pe,h as U,i as Ae,j as He,k as Y,l as se,m as ce,n as de,o as je,p as Fe,q as Ge,r as W,s as me,t as F}from"./chunk-FDK3U32Y.js";import{a as q}from"./chunk-GTJMVMJN.js";import{$ as o,Aa as le,E as H,Ea as Q,F as Me,G as l,J as L,K as O,L as re,O as _,Q as ke,R as d,S as B,T as M,U as t,V as n,W as c,X as b,Y as g,Z as m,_ as Ee,a as k,aa as v,b as ie,ba as w,ca as Te,d as oe,da as he,ea as ve,fa as _e,i as ye,j as we,k as D,o as Se,p as ae,pa as j,qa as P,r as Ce,ra as E,s as Le,t as x,u as h,ua as ee,v as p,va as Ve,w as u,y as I,ya as Ie}from"./chunk-RVITU3HV.js";var T=class r{constructor(i){this.http=i}apiUrl=`${q.apiUrl}/locations`;getAuthHeaders(){let i=localStorage.getItem("token");return{headers:k({"Content-Type":"application/json"},i?{Authorization:`Bearer ${i}`}:{})}}getLocations(i={}){let e=new ee;return Object.keys(i).forEach(a=>{let s=i[a];s!=null&&s!==""&&(e=e.set(a,s.toString()))}),this.http.get(this.apiUrl,k({params:e},this.getAuthHeaders()))}getLocation(i){return this.http.get(`${this.apiUrl}/${i}`,this.getAuthHeaders())}createLocation(i){return this.http.post(this.apiUrl,i,this.getAuthHeaders())}updateLocation(i,e){return this.http.put(`${this.apiUrl}/${i}`,e,this.getAuthHeaders())}deleteLocation(i){return this.http.delete(`${this.apiUrl}/${i}`,this.getAuthHeaders())}bulkCreateLocations(i){return this.http.post(`${this.apiUrl}/bulk`,{locations:i},this.getAuthHeaders())}moveLocations(i,e){return this.http.post(`${this.apiUrl}/move`,{location_ids:i,new_parent_id:e},this.getAuthHeaders())}getQRCode(i,e="download",a="png"){let s=new ee().set("action",e).set("format",a);return this.http.get(`${this.apiUrl}/${i}/qr`,k({params:s,responseType:"blob"},this.getAuthHeaders()))}getLocationTypes(i){let e=new ee;return i!==void 0&&(e=e.set("hierarchy_level",i.toString())),this.http.get(`${q.apiUrl}/location-types`,k({params:e},this.getAuthHeaders()))}getHierarchy(){return this.http.get(`${q.apiUrl}/locations-hierarchy`,this.getAuthHeaders())}getPossibleParents(i,e){let a=new ee().set("type_id",i.toString());e&&(a=a.set("location_id",e.toString()));let s=e?`${q.apiUrl}/locations/possible-parents/${e}`:`${q.apiUrl}/locations/possible-parents`;return this.http.get(s,k({params:a},this.getAuthHeaders()))}static \u0275fac=function(e){return new(e||r)(Ce(Ve))};static \u0275prov=Se({token:r,factory:r.\u0275fac,providedIn:"root"})};function De(r,i){r&1&&(t(0,"div",48)(1,"p",49),o(2,"Location Hierarchy:"),n(),t(3,"div",50)(4,"div")(5,"strong"),o(6,"Level 0:"),n(),o(7," Communities, Campuses, Buildings"),n(),t(8,"div")(9,"strong"),o(10,"Level 1:"),n(),o(11," Buildings, Floors"),n(),t(12,"div")(13,"strong"),o(14,"Level 2+:"),n(),o(15," Rooms, Areas, Amenities"),n()(),t(16,"p",51),o(17,"Available types: 16 options including Community, Campus, and Buildings"),n()())}function Ne(r,i){if(r&1&&(t(0,"div",52)(1,"div",4)(2,"div",53),c(3,"img",54),n(),t(4,"div",55)(5,"p",56),o(6,"Parent Location:"),n(),t(7,"p",57),o(8),n(),t(9,"p",58),o(10),n()()()()),r&2){let e=m(2);l(3),d("src",e.parentLocation.type.icon,H)("alt",e.parentLocation.type.name),l(5),Te("",e.parentLocation.name," (",e.parentLocation.type.name,")"),l(2),w("Creating Level ",e.parentLocation.hierarchy_level+1," location")}}function ze(r,i){if(r&1){let e=b();t(0,"div",59),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.selectLocationType(s))}),t(1,"div",60)(2,"div",61),c(3,"img",62),n(),t(4,"div",63),o(5),n(),t(6,"div",64),o(7),n()()()}if(r&2){let e=i.$implicit,a=m(2);M(a.selectedTypeId===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),l(3),d("src",e.icon,H)("alt",e.name),l(2),v(e.name),l(2),v(a.getTypeDescription(e))}}function Re(r,i){if(r&1){let e=b();t(0,"div",60)(1,"button",65),g("click",function(){x(e);let s=m(2);return h(s.toggleShowAllTypes())}),p(),t(2,"svg",66),c(3,"path",67),n(),u(),t(4,"span"),o(5),n()()()}if(r&2){let e=m(2);l(5),v(e.showAllTypes?"Show Less":e.locationTypes.length-6+" More Types")}}function $e(r,i){if(r&1&&(t(0,"div",68)(1,"p",69),o(2),n()()),r&2){let e=m(2);l(2),v(e.errorMessage)}}function Ue(r,i){r&1&&(t(0,"span"),o(1,"Create Location"),n())}function Ye(r,i){r&1&&(t(0,"span",70),p(),t(1,"svg",71),c(2,"circle",72)(3,"path",73),n(),u(),t(4,"span"),o(5,"Creating..."),n()())}function We(r,i){if(r&1){let e=b();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),p(),t(5,"svg",6),c(6,"path",7)(7,"path",8),n()(),u(),t(8,"h2",9),o(9,"Add New Location"),n()(),t(10,"button",10),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),p(),t(11,"svg",11),c(12,"path",12),n()()(),u(),t(13,"div",13)(14,"div",14)(15,"div",15),p(),t(16,"svg",16),c(17,"path",17),n()(),u(),t(18,"h3",18),o(19),n(),t(20,"p",19),o(21),n(),_(22,De,18,0,"div",20)(23,Ne,11,5,"div",21),n(),t(24,"form",22),g("ngSubmit",function(){x(e);let s=m();return h(s.onSubmit())}),t(25,"div",23)(26,"div",24),p(),t(27,"svg",25),c(28,"path",26),n(),u(),t(29,"h4",27),o(30,"Basic Information"),n()(),t(31,"div",28)(32,"label",29),o(33," Location Name "),t(34,"span",30),o(35,"*"),n()(),c(36,"input",31),n(),t(37,"div",28)(38,"label",32),o(39,"Description"),n(),c(40,"textarea",33),n(),t(41,"div",28)(42,"label",34),o(43,"Address"),n(),t(44,"div",35),p(),t(45,"svg",36),c(46,"path",7)(47,"path",8),n(),u(),c(48,"input",37),n()()(),t(49,"div",23)(50,"div",24),p(),t(51,"svg",25),c(52,"path",38),n(),u(),t(53,"h4",27),o(54,"Location Type"),n()(),t(55,"div",39),_(56,ze,8,6,"div",40),n(),_(57,Re,6,1,"div",41),n(),_(58,$e,3,1,"div",42),t(59,"div",43)(60,"button",44),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),o(61," Use Template "),n(),t(62,"button",45),_(63,Ue,2,0,"span",46)(64,Ye,6,0,"span",47),n()()()()()()}if(r&2){let e,a=m();d("@backdropAnimation",void 0),l(),d("@modalAnimation",void 0),l(18),w(" ",a.parentLocation?"Add New Sub-location":"Add New Facility"," "),l(2),w(" ",a.parentLocation?"Create a new sub-location under "+a.parentLocation.name:"Create a new top-level facility or community"," "),l(),d("ngIf",!a.parentLocation),l(),d("ngIf",a.parentLocation),l(),d("formGroup",a.locationForm),l(12),B("border-red-300",((e=a.locationForm.get("name"))==null?null:e.invalid)&&((e=a.locationForm.get("name"))==null?null:e.touched)),l(20),d("ngForOf",a.getDisplayedTypes()),l(),d("ngIf",a.locationTypes.length>6),l(),d("ngIf",a.errorMessage),l(4),d("disabled",a.locationForm.invalid||a.isLoading),l(),d("ngIf",!a.isLoading),l(),d("ngIf",a.isLoading)}}var K=class r{constructor(i,e){this.fb=i;this.locationService=e;this.locationForm=this.fb.group({name:["",[A.required,A.minLength(2)]],description:[""],address:[""],location_type_id:[null,A.required]})}isOpen=!1;parentLocation=null;closeModal=new I;locationCreated=new I;locationForm;locationTypes=[];selectedTypeId=null;isLoading=!1;errorMessage="";showAllTypes=!1;ngOnInit(){this.loadLocationTypes()}loadLocationTypes(){let i=this.parentLocation?this.parentLocation.hierarchy_level+1:0;this.locationService.getLocationTypes(i).subscribe({next:e=>{e.success&&(this.locationTypes=e.data.types)},error:e=>{console.error("Error loading location types:",e)}})}getDisplayedTypes(){return this.showAllTypes?this.locationTypes:this.locationTypes.slice(0,6)}selectLocationType(i){this.selectedTypeId=i.id,this.locationForm.patchValue({location_type_id:i.id})}getTypeDescription(i){return i.description||`${i.category}`}getTypeIcon(i){return`assets/icons/${i.icon}.svg`}onSubmit(){if(this.locationForm.valid&&!this.isLoading){this.isLoading=!0,this.errorMessage="";let i=ie(k({},this.locationForm.value),{parent_id:this.parentLocation?this.parentLocation.id:null});this.locationService.createLocation(i).subscribe({next:e=>{e.success?(this.locationCreated.emit(e.data.location),this.closeModalHandler()):this.errorMessage=e.message||"Failed to create location",this.isLoading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while creating the location",this.isLoading=!1}})}}closeModalHandler(){this.isOpen=!1,this.closeModal.emit(),this.resetForm()}resetForm(){this.locationForm.reset(),this.selectedTypeId=null,this.errorMessage="",this.showAllTypes=!1}toggleShowAllTypes(){this.showAllTypes=!this.showAllTypes}static \u0275fac=function(e){return new(e||r)(L(W),L(T))};static \u0275cmp=O({type:r,selectors:[["app-add-location-modal"]],inputs:{isOpen:"isOpen",parentLocation:"parentLocation"},outputs:{closeModal:"closeModal",locationCreated:"locationCreated"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"text-center","mb-8"],[1,"w-16","h-16","bg-blue-50","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","text-sm"],["class","mt-4 p-4 bg-blue-50 rounded-lg",4,"ngIf"],["class","mt-4 p-4 bg-green-50 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","name","type","text","formControlName","name","placeholder","Enter location name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Brief description of this location",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],["for","address",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["id","address","type","text","formControlName","address","placeholder","Enter the address",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],["class","border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-sm",3,"class","click",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mt-4","p-4","bg-blue-50","rounded-lg"],[1,"text-sm","font-medium","text-blue-900","mb-2"],[1,"text-xs","text-blue-700","space-y-1"],[1,"text-xs","text-blue-600","mt-2"],[1,"mt-4","p-4","bg-green-50","rounded-lg"],[1,"w-10","h-10","bg-green-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6",3,"src","alt"],[1,"text-left"],[1,"text-sm","font-medium","text-green-900"],[1,"text-sm","text-green-700"],[1,"text-xs","text-green-600"],[1,"border-2","rounded-lg","p-4","cursor-pointer","transition-all","hover:shadow-sm",3,"click"],[1,"text-center"],[1,"mb-2","flex","justify-center"],[1,"w-8","h-8","text-gray-600",3,"src","alt"],[1,"font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-500"],["type","button",1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-sm","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,a){e&1&&_(0,We,65,15,"div",0),e&2&&d("ngIf",a.isOpen)},dependencies:[E,j,P,F,$,N,z,R,U,Y],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-type-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.location-type-card.selected[_ngcontent-%COMP%]{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f633}.type-icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.hierarchy-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-type-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[V("backdropAnimation",[C(":enter",[y({opacity:0}),S("150ms ease-out",y({opacity:1}))]),C(":leave",[S("150ms ease-in",y({opacity:0}))])]),V("modalAnimation",[C(":enter",[y({opacity:0,transform:"scale(0.7) translateY(-50px)"}),S("200ms ease-out",y({opacity:1,transform:"scale(1) translateY(0)"}))]),C(":leave",[S("150ms ease-in",y({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function Ze(r,i){if(r&1&&(t(0,"div",42)(1,"p",43),o(2),n()()),r&2){let e=m(2);l(2),v(e.errorMessage)}}function Qe(r,i){if(r&1&&(t(0,"div",44)(1,"div",4)(2,"div",5),c(3,"img",45),n(),t(4,"div")(5,"div",46),o(6),n(),t(7,"div",47),o(8,"Current location type"),n()()()()),r&2){let e=m(2);l(3),d("src",e.location.type.icon,H)("alt",e.location.type.name),l(3),v(e.location.type.name)}}function qe(r,i){if(r&1){let e=b();t(0,"div",48),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.selectLocationType(s))}),t(1,"div",49)(2,"div",50),c(3,"img",51),n(),t(4,"div",52),o(5),n(),t(6,"div",53),o(7),n()()()}if(r&2){let e=i.$implicit,a=m(2);M(a.selectedTypeId===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),l(3),d("src",e.icon,H)("alt",e.name),l(2),v(e.name),l(2),v(a.getTypeDescription(e))}}function Je(r,i){if(r&1){let e=b();t(0,"div",49)(1,"button",54),g("click",function(){x(e);let s=m(2);return h(s.toggleShowAllTypes())}),p(),t(2,"svg",55),c(3,"path",56),n(),u(),t(4,"span"),o(5),n()()()}if(r&2){let e=m(2);l(5),v(e.showAllTypes?"Show Less":e.locationTypes.length-6+" More Types")}}function Ke(r,i){r&1&&(t(0,"span"),o(1,"Update Location"),n())}function Xe(r,i){r&1&&(t(0,"span",57),p(),t(1,"svg",58),c(2,"circle",59)(3,"path",60),n(),u(),t(4,"span"),o(5,"Updating..."),n()())}function et(r,i){if(r&1){let e=b();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),p(),t(5,"svg",6),c(6,"path",7),n()(),u(),t(7,"h2",8),o(8,"Edit Location"),n()(),t(9,"button",9),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),p(),t(10,"svg",10),c(11,"path",11),n()()(),u(),t(12,"div",12),_(13,Ze,3,1,"div",13),t(14,"form",14),g("ngSubmit",function(){x(e);let s=m();return h(s.onSubmit())}),t(15,"div",15)(16,"div",16),p(),t(17,"svg",17),c(18,"path",18),n(),u(),t(19,"h4",19),o(20,"Basic Information"),n()(),t(21,"div",20)(22,"label",21),o(23," Location Name "),t(24,"span",22),o(25,"*"),n()(),c(26,"input",23),n(),t(27,"div",20)(28,"label",24),o(29,"Description"),n(),c(30,"textarea",25),n(),t(31,"div",20)(32,"label",26),o(33,"Address"),n(),t(34,"div",27),p(),t(35,"svg",28),c(36,"path",29)(37,"path",30),n(),u(),c(38,"input",31),n()()(),t(39,"div",15)(40,"div",16),p(),t(41,"svg",17),c(42,"path",32),n(),u(),t(43,"h4",19),o(44,"Location Type"),n()(),_(45,Qe,9,3,"div",33),t(46,"div",34),_(47,qe,8,6,"div",35),n(),_(48,Je,6,1,"div",36),n(),t(49,"div",37)(50,"button",38),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),o(51," Cancel "),n(),t(52,"button",39),_(53,Ke,2,0,"span",40)(54,Xe,6,0,"span",41),n()()()()()()}if(r&2){let e,a=m();d("@backdropAnimation",void 0),l(),d("@modalAnimation",void 0),l(12),d("ngIf",a.errorMessage),l(),d("formGroup",a.editForm),l(12),B("border-red-300",((e=a.editForm.get("name"))==null?null:e.invalid)&&((e=a.editForm.get("name"))==null?null:e.touched)),l(19),d("ngIf",a.location),l(2),d("ngForOf",a.getDisplayedTypes()),l(),d("ngIf",a.locationTypes.length>6),l(4),d("disabled",a.editForm.invalid||a.loading),l(),d("ngIf",!a.loading),l(),d("ngIf",a.loading)}}var pe=class r{constructor(i,e){this.fb=i;this.locationService=e;this.editForm=this.fb.group({name:["",[A.required,A.minLength(2)]],description:[""],address:[""],location_type_id:[null,A.required]})}isOpen=!1;location=null;closeModal=new I;locationUpdated=new I;editForm;locationTypes=[];selectedTypeId=null;loading=!1;errorMessage="";showAllTypes=!1;ngOnInit(){this.loadLocationTypes()}ngOnChanges(i){i.location&&this.location&&this.populateForm()}loadLocationTypes(){let i=this.location?.hierarchy_level;this.locationService.getLocationTypes(i).subscribe({next:e=>{e.success&&(this.locationTypes=e.data.types)},error:e=>{console.error("Error loading location types:",e)}})}populateForm(){this.location&&(this.editForm.patchValue({name:this.location.name,description:this.location.description||"",address:this.location.address||"",location_type_id:this.location.location_type_id}),this.selectedTypeId=this.location.location_type_id)}getDisplayedTypes(){return this.showAllTypes?this.locationTypes:this.locationTypes.slice(0,6)}selectLocationType(i){this.selectedTypeId=i.id,this.editForm.patchValue({location_type_id:i.id})}getTypeDescription(i){return i.description||`${i.category}`}getTypeIcon(i){return`assets/icons/${i.icon}.svg`}onSubmit(){if(this.editForm.valid&&!this.loading&&this.location){this.loading=!0,this.errorMessage="";let i=k({},this.editForm.value);this.locationService.updateLocation(this.location.id,i).subscribe({next:e=>{e.success?(this.locationUpdated.emit(e.data.location),this.closeModalHandler()):this.errorMessage=e.message||"Failed to update location",this.loading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while updating the location",this.loading=!1}})}}closeModalHandler(){this.isOpen=!1,this.closeModal.emit(),this.resetForm()}resetForm(){this.editForm.reset(),this.selectedTypeId=null,this.errorMessage="",this.showAllTypes=!1}toggleShowAllTypes(){this.showAllTypes=!this.showAllTypes}static \u0275fac=function(e){return new(e||r)(L(W),L(T))};static \u0275cmp=O({type:r,selectors:[["app-edit-location-modal"]],inputs:{isOpen:"isOpen",location:"location"},outputs:{closeModal:"closeModal",locationUpdated:"locationUpdated"},features:[Le],decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","name","type","text","formControlName","name","placeholder","Enter location name","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","3","placeholder","Brief description of this location",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],["for","address",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["id","address","type","text","formControlName","address","placeholder","Enter the address",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["class","mb-4 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],["class","border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-sm",3,"class","click",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"flex","items-center","justify-between","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"mb-4","p-4","bg-gray-50","rounded-lg"],[1,"w-6","h-6",3,"src","alt"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"border-2","rounded-lg","p-4","cursor-pointer","transition-all","hover:shadow-sm",3,"click"],[1,"text-center"],[1,"mb-2","flex","justify-center"],[1,"w-8","h-8","text-gray-600",3,"src","alt"],[1,"font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-500"],["type","button",1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-sm","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,a){e&1&&_(0,et,55,12,"div",0),e&2&&d("ngIf",a.isOpen)},dependencies:[E,j,P,F,$,N,z,R,Ge,U,Y],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-type-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.location-type-card.selected[_ngcontent-%COMP%]{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f633}.type-icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.current-type-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-type-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[V("backdropAnimation",[C(":enter",[y({opacity:0}),S("150ms ease-out",y({opacity:1}))]),C(":leave",[S("150ms ease-in",y({opacity:0}))])]),V("modalAnimation",[C(":enter",[y({opacity:0,transform:"scale(0.7) translateY(-50px)"}),S("200ms ease-out",y({opacity:1,transform:"scale(1) translateY(0)"}))]),C(":leave",[S("150ms ease-in",y({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function tt(r,i){if(r&1&&(t(0,"div",34),o(1),n()),r&2){let e=m(3);l(),w(" \u26A0\uFE0F This location has ",e.location.children==null?null:e.location.children.length," child location(s) ")}}function nt(r,i){if(r&1&&(t(0,"div",27)(1,"div",4)(2,"div",28),c(3,"img",29),n(),t(4,"div",30)(5,"div",31),o(6),n(),t(7,"div",32),o(8),n(),_(9,tt,2,1,"div",33),n()()()),r&2){let e=m(2);l(3),d("src",e.location.type.icon,H)("alt",e.location.type.name),l(3),v(e.location.name),l(2),v(e.location.type.name),l(),d("ngIf",e.location.children==null?null:e.location.children.length)}}function it(r,i){if(r&1&&(t(0,"div",35)(1,"p",36),o(2),n()()),r&2){let e=m(2);l(2),v(e.errorMessage)}}function ot(r,i){r&1&&(t(0,"span"),o(1,"Delete Location"),n())}function at(r,i){r&1&&(t(0,"span",37),p(),t(1,"svg",38),c(2,"circle",39)(3,"path",40),n(),u(),t(4,"span"),o(5,"Deleting..."),n()())}function rt(r,i){if(r&1){let e=b();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),p(),t(5,"svg",6),c(6,"path",7),n()(),u(),t(7,"h2",8),o(8,"Delete Location"),n()(),t(9,"button",9),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),p(),t(10,"svg",10),c(11,"path",11),n()()(),u(),t(12,"div",12)(13,"div",13)(14,"div",14),p(),t(15,"svg",15),c(16,"path",16),n()()(),u(),t(17,"div",17)(18,"h3",18),o(19,"Are you sure?"),n(),t(20,"p",19),o(21," You are about to delete the location "),t(22,"strong"),o(23),n(),o(24,". This action cannot be undone. "),n(),_(25,nt,10,5,"div",20),n(),_(26,it,3,1,"div",21),t(27,"div",22)(28,"button",23),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),o(29," Cancel "),n(),t(30,"button",24),g("click",function(){x(e);let s=m();return h(s.confirmDelete())}),_(31,ot,2,0,"span",25)(32,at,6,0,"span",26),n()()()()()}if(r&2){let e=m();d("@backdropAnimation",void 0),l(),d("@modalAnimation",void 0),l(22),w('"',e.location==null?null:e.location.name,'"'),l(2),d("ngIf",e.location),l(),d("ngIf",e.errorMessage),l(2),d("disabled",e.loading),l(2),d("disabled",e.loading),l(),d("ngIf",!e.loading),l(),d("ngIf",e.loading)}}var ue=class r{constructor(i){this.locationService=i}isOpen=!1;location=null;closeModal=new I;locationDeleted=new I;loading=!1;errorMessage="";confirmDelete(){!this.location||this.loading||(this.loading=!0,this.errorMessage="",this.locationService.deleteLocation(this.location.id).subscribe({next:i=>{i.success?(this.locationDeleted.emit(this.location),this.closeModalHandler()):this.errorMessage=i.message||"Failed to delete location",this.loading=!1},error:i=>{this.errorMessage=i.error?.message||"An error occurred while deleting the location",this.loading=!1}}))}closeModalHandler(){this.loading||(this.isOpen=!1,this.closeModal.emit(),this.resetModal())}resetModal(){this.errorMessage="",this.loading=!1}static \u0275fac=function(e){return new(e||r)(L(T))};static \u0275cmp=O({type:r,selectors:[["app-delete-confirmation-modal"]],inputs:{isOpen:"isOpen",location:"location"},outputs:{closeModal:"closeModal",locationDeleted:"locationDeleted"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-md","w-full"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-red-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-xl","font-semibold","text-gray-900"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-center","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],["class","bg-gray-50 rounded-lg p-4 mb-4",4,"ngIf"],["class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-end","space-x-3"],[1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-6","py-2","bg-red-600","text-white","font-medium","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","mb-4"],[1,"w-10","h-10","bg-orange-100","rounded-lg","flex","items-center","justify-center"],[1,"w-6","h-6",3,"src","alt"],[1,"text-left"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],["class","text-xs text-red-600 mt-1",4,"ngIf"],[1,"text-xs","text-red-600","mt-1"],[1,"mb-4","p-3","bg-red-50","border","border-red-200","rounded-lg"],[1,"text-red-600","text-sm"],[1,"flex","items-center","space-x-2"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,a){e&1&&_(0,rt,33,9,"div",0),e&2&&d("ngIf",a.isOpen)},dependencies:[E,P],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.warning-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}}"],data:{animation:[V("backdropAnimation",[C(":enter",[y({opacity:0}),S("150ms ease-out",y({opacity:1}))]),C(":leave",[S("150ms ease-in",y({opacity:0}))])]),V("modalAnimation",[C(":enter",[y({opacity:0,transform:"scale(0.7) translateY(-50px)"}),S("200ms ease-out",y({opacity:1,transform:"scale(1) translateY(0)"}))]),C(":leave",[S("150ms ease-in",y({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function lt(r,i){if(r&1&&(t(0,"div",26)(1,"div",27),p(),t(2,"svg",28),c(3,"path",29),n(),u(),t(4,"span",30),o(5),n()()()),r&2){let e=m(2);l(5),w("Successfully created ",e.successCount," locations!")}}function st(r,i){if(r&1&&(t(0,"div",31)(1,"p",32),o(2),n()()),r&2){let e=m(2);l(2),v(e.errorMessage)}}function ct(r,i){if(r&1&&(t(0,"option",54),o(1),n()),r&2){let e=i.$implicit;d("value",e.id),l(),v(e.name)}}function dt(r,i){if(r&1){let e=b();t(0,"div",33)(1,"div",34)(2,"h3",35),o(3),n(),t(4,"div",27)(5,"button",36),g("click",function(){let s=x(e).index,f=m(2);return h(f.duplicateLocationRow(s))}),p(),t(6,"svg",7),c(7,"path",37),n()(),u(),t(8,"button",38),g("click",function(){let s=x(e).index,f=m(2);return h(f.removeLocationRow(s))}),p(),t(9,"svg",7),c(10,"path",39),n()()()(),u(),t(11,"div",40)(12,"div")(13,"label",41),o(14," Name "),t(15,"span",42),o(16,"*"),n()(),c(17,"input",43),n(),t(18,"div")(19,"label",41),o(20,"Type"),n(),t(21,"div",44)(22,"select",45)(23,"option",46),o(24,"Select type"),n(),_(25,ct,2,2,"option",47),n(),t(26,"div",48),p(),t(27,"svg",49),c(28,"path",50),n()()()()(),u(),t(29,"div",51)(30,"label",41),o(31,"Address"),n(),c(32,"input",52),n(),t(33,"div",51)(34,"label",41),o(35,"Description"),n(),c(36,"textarea",53),n()()}if(r&2){let e,a,s=i.$implicit,f=i.index,G=m(2);d("formGroupName",f),l(3),w("Location ",f+1,""),l(5),d("disabled",G.locationsArray.length<=1),l(9),B("border-red-300",((e=s.get("name"))==null?null:e.invalid)&&((e=s.get("name"))==null?null:e.touched)),l(5),B("border-red-300",((a=s.get("location_type_id"))==null?null:a.invalid)&&((a=s.get("location_type_id"))==null?null:a.touched)),l(3),d("ngForOf",G.locationTypes)}}function mt(r,i){if(r&1&&(t(0,"span"),o(1),n()),r&2){let e=m(2);l(),w("Create ",e.getValidLocationsCount()," Locations")}}function pt(r,i){r&1&&(t(0,"span",27),p(),t(1,"svg",55),c(2,"circle",56)(3,"path",57),n(),u(),t(4,"span"),o(5,"Creating..."),n()())}function ut(r,i){if(r&1){let e=b();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h2",4),o(5,"Create up to 5 locations at once (3/5)"),n()(),t(6,"div",5)(7,"button",6),g("click",function(){x(e);let s=m();return h(s.addLocationRow())}),p(),t(8,"svg",7),c(9,"path",8),n(),u(),t(10,"span"),o(11,"Add Location"),n()(),t(12,"button",9),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),p(),t(13,"svg",10),c(14,"path",11),n()()()(),u(),t(15,"div",12),_(16,lt,6,1,"div",13)(17,st,3,1,"div",14),t(18,"div",15)(19,"form",16),g("ngSubmit",function(){x(e);let s=m();return h(s.onSubmit())}),t(20,"div",17),_(21,dt,37,8,"div",18),n()()(),t(22,"div",19)(23,"div",20)(24,"span",21),o(25),n(),o(26," of "),t(27,"span",21),o(28),n(),o(29," locations ready "),n(),t(30,"div",5)(31,"button",22),g("click",function(){x(e);let s=m();return h(s.closeModalHandler())}),o(32," Cancel "),n(),t(33,"button",23),g("click",function(){x(e);let s=m();return h(s.onSubmit())}),_(34,mt,2,1,"span",24)(35,pt,6,0,"span",25),n()()()()()()}if(r&2){let e=m();d("@backdropAnimation",void 0),l(),d("@modalAnimation",void 0),l(15),d("ngIf",e.successCount>0),l(),d("ngIf",e.errorMessage),l(2),d("formGroup",e.bulkForm),l(2),d("ngForOf",e.locationsArray.controls),l(4),v(e.getValidLocationsCount()),l(3),v(e.getTotalLocationsCount()),l(3),d("disabled",e.isLoading),l(2),d("disabled",e.bulkForm.invalid||e.isLoading||e.getValidLocationsCount()===0),l(),d("ngIf",!e.isLoading),l(),d("ngIf",e.isLoading)}}var ge=class r{constructor(i,e){this.fb=i;this.locationService=e;this.bulkForm=this.fb.group({locations:this.fb.array([])})}isOpen=!1;closeModal=new I;locationsCreated=new I;bulkForm;locationTypes=[];isLoading=!1;errorMessage="";successCount=0;ngOnInit(){this.loadLocationTypes(),this.addLocationRow(),this.addLocationRow(),this.addLocationRow()}get locationsArray(){return this.bulkForm.get("locations")}loadLocationTypes(){this.locationService.getLocationTypes(0).subscribe({next:i=>{i.success&&(this.locationTypes=i.data.types)},error:i=>{console.error("Error loading location types:",i)}})}createLocationFormGroup(){return this.fb.group({name:["",[A.required,A.minLength(2)]],description:[""],address:[""],location_type_id:[null,A.required]})}addLocationRow(){this.locationsArray.length>=5||this.locationsArray.push(this.createLocationFormGroup())}duplicateLocationRow(i){if(this.locationsArray.length>=5)return;let e=this.locationsArray.at(i);if(e){let a=this.createLocationFormGroup();a.patchValue(e.value),this.locationsArray.push(a)}}removeLocationRow(i){this.locationsArray.length>1&&this.locationsArray.removeAt(i)}getLocationTypeName(i){let e=this.locationTypes.find(a=>a.id===i);return e?e.name:"Unknown"}onSubmit(){if(this.bulkForm.valid&&!this.isLoading){this.isLoading=!0,this.errorMessage="",this.successCount=0;let i=this.locationsArray.value.map(e=>ie(k({},e),{parent_id:null}));this.locationService.bulkCreateLocations(i).subscribe({next:e=>{e.success?(this.successCount=i.length,this.locationsCreated.emit(e.data.location?[e.data.location]:[]),setTimeout(()=>{this.closeModalHandler()},2e3)):this.errorMessage=e.message||"Failed to create locations",this.isLoading=!1},error:e=>{this.errorMessage=e.error?.message||"An error occurred while creating locations",this.isLoading=!1}})}}closeModalHandler(){this.isOpen=!1,this.closeModal.emit(),this.resetForm()}resetForm(){for(;this.locationsArray.length>0;)this.locationsArray.removeAt(0);this.addLocationRow(),this.addLocationRow(),this.addLocationRow(),this.errorMessage="",this.successCount=0}getValidLocationsCount(){return this.locationsArray.controls.filter(i=>i.valid).length}getTotalLocationsCount(){return this.locationsArray.length}static \u0275fac=function(e){return new(e||r)(L(W),L(T))};static \u0275cmp=O({type:r,selectors:[["app-bulk-create-modal"]],inputs:{isOpen:"isOpen"},outputs:{closeModal:"closeModal",locationsCreated:"locationsCreated"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-[#00000085] flex items-center justify-center z-50 p-4 animate-fade-in",4,"ngIf"],[1,"fixed","inset-0","bg-[#00000085]","flex","items-center","justify-center","z-50","p-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-xl","max-w-4xl","w-full","max-h-[90vh]","overflow-hidden"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex","items-center","space-x-3"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"p-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","flex-col","h-full","max-h-[calc(90vh-140px)]"],["class","p-4 bg-green-50 border-b border-green-200",4,"ngIf"],["class","p-4 bg-red-50 border-b border-red-200",4,"ngIf"],[1,"flex-1","overflow-auto","p-6"],[3,"ngSubmit","formGroup"],["formArrayName","locations",1,"space-y-6"],["class","bg-white border border-gray-200 rounded-lg p-6 relative",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-6","border-t","border-gray-200","bg-gray-50"],[1,"text-sm","text-gray-600"],[1,"font-medium"],["type","button",1,"px-6","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","disabled:opacity-50",3,"click","disabled"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"p-4","bg-green-50","border-b","border-green-200"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-green-800","font-medium"],[1,"p-4","bg-red-50","border-b","border-red-200"],[1,"text-red-600","text-sm"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6","relative",3,"formGroupName"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],["type","button",1,"p-2","text-gray-400","hover:text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],["type","button",1,"p-2","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","formControlName","name","placeholder","Enter location name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],[1,"relative"],["formControlName","location_type_id",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","appearance-none","bg-white"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mt-6"],["type","text","formControlName","address","placeholder","Enter location address",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400"],["formControlName","description","rows","3","placeholder","Enter location description",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400","resize-none"],[3,"value"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,a){e&1&&_(0,ut,36,12,"div",0),e&2&&d("ngIf",a.isOpen)},dependencies:[E,j,P,F,$,ce,de,N,se,z,R,U,Y,Ae,He],styles:[".modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.location-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;border-color:#e5e7eb}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;padding-bottom:1rem;margin-bottom:1.5rem}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}select[_ngcontent-%COMP%]{background-image:none}select[_ngcontent-%COMP%]:focus{outline:none}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ef4444!important}.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#10b981}.success-message[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.location-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;box-shadow:0 1px 3px #0000001a}.location-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{margin:1rem;max-height:calc(100vh - 2rem)}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.location-card[_ngcontent-%COMP%]{padding:1rem}}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}[_ngcontent-%COMP%]::placeholder{color:#9ca3af;opacity:1}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px)}button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}"],data:{animation:[V("backdropAnimation",[C(":enter",[y({opacity:0}),S("150ms ease-out",y({opacity:1}))]),C(":leave",[S("150ms ease-in",y({opacity:0}))])]),V("modalAnimation",[C(":enter",[y({opacity:0,transform:"scale(0.7) translateY(-50px)"}),S("200ms ease-out",y({opacity:1,transform:"scale(1) translateY(0)"}))]),C(":leave",[S("150ms ease-in",y({opacity:0,transform:"scale(0.7) translateY(-50px)"}))])])]}})};function ft(r,i){if(r&1&&(t(0,"option",57),o(1),n()),r&2){let e=i.$implicit;d("value",e.id),l(),v(e.name)}}function xt(r,i){if(r&1&&(t(0,"option",57),o(1),n()),r&2){let e=i.$implicit;d("value",e.value),l(),v(e.label)}}function ht(r,i){if(r&1){let e=b();t(0,"div",41)(1,"form",42),g("ngSubmit",function(){x(e);let s=m();return h(s.applyFilters())}),t(2,"div",43)(3,"div")(4,"label",44),o(5,"Location Type"),n(),t(6,"select",45)(7,"option",46),o(8,"All Types"),n(),_(9,ft,2,2,"option",47),n()(),t(10,"div")(11,"label",44),o(12,"Hierarchy Level"),n(),t(13,"select",48),_(14,xt,2,2,"option",47),n()(),t(15,"div")(16,"label",44),o(17,"Asset Count"),n(),t(18,"select",49)(19,"option",46),o(20,"Any Count"),n(),t(21,"option",50),o(22,"No Assets"),n(),t(23,"option",51),o(24,"1-10 Assets"),n(),t(25,"option",52),o(26,"11-50 Assets"),n(),t(27,"option",53),o(28,"51+ Assets"),n()()()(),t(29,"div",54)(30,"button",55),g("click",function(){x(e);let s=m();return h(s.clearFilters())}),o(31," Clear Filters "),n(),t(32,"button",56),o(33," Apply Filters "),n()()()()}if(r&2){let e=m();l(),d("formGroup",e.filtersForm),l(8),d("ngForOf",e.locationTypes),l(5),d("ngForOf",e.hierarchyLevels)}}function vt(r,i){r&1&&(t(0,"div",58)(1,"div",59)(2,"div",60),p(),t(3,"svg",61),c(4,"circle",62)(5,"path",63),n()(),u(),t(6,"h3",64),o(7,"Loading Locations"),n(),t(8,"p",65),o(9,"Please wait while we fetch your locations..."),n()()())}function _t(r,i){if(r&1&&(t(0,"span"),o(1),n()),r&2){let e=m().$implicit;l(),w(" (",e.children==null?null:e.children.length,")")}}function bt(r,i){if(r&1){let e=b();t(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71),c(4,"img",72),n(),t(5,"div")(6,"h3",73),o(7),n(),t(8,"div",74)(9,"span",75),o(10),n(),t(11,"span",27),o(12),n()()()()(),t(13,"div",76)(14,"div",77),p(),t(15,"svg",78),c(16,"path",79)(17,"path",80),n(),u(),t(18,"span"),o(19),n()(),t(20,"div",27),o(21),n()(),t(22,"div",81),p(),t(23,"svg",7),c(24,"path",82),n(),u(),t(25,"span",83),o(26),n()(),t(27,"div",84)(28,"button",85),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.viewLocation(s))}),p(),t(29,"svg",7),c(30,"path",86),n(),u(),t(31,"span"),o(32,"View Details"),_(33,_t,2,1,"span",87),n()(),t(34,"div",28)(35,"button",88),p(),t(36,"svg",7),c(37,"path",89),n()(),u(),t(38,"button",90),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.editLocation(s))}),p(),t(39,"svg",7),c(40,"path",91),n()(),u(),t(41,"button",92),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.deleteLocation(s))}),p(),t(42,"svg",7),c(43,"path",93),n()()()()()}if(r&2){let e=i.$implicit,a=m(2);l(4),d("src",e.type.icon,H)("alt",e.type.name),l(3),v(e.name),l(3),w(" ",a.getHierarchyLevelBadge(e.hierarchy_level)," "),l(2),v(e.type.name),l(7),v(e.address||e.name),l(2),w(" ",e.description||e.name," "),l(5),v((e.children==null?null:e.children.length)||0),l(7),d("ngIf",e.children==null?null:e.children.length),l(5),d("disabled",a.loading),l(3),d("disabled",a.loading)}}function yt(r,i){if(r&1&&(t(0,"div",66),_(1,bt,44,11,"div",67),n()),r&2){let e=m();l(),d("ngForOf",e.locations)}}function wt(r,i){if(r&1&&(t(0,"div",65),o(1),n()),r&2){let e=m().$implicit;l(),v(e.description)}}function St(r,i){if(r&1){let e=b();t(0,"div",102)(1,"div",103)(2,"div",97)(3,"div",5)(4,"div",104),c(5,"img",105),n(),t(6,"div")(7,"div",106),o(8),n(),_(9,wt,2,1,"div",107),n()()(),t(10,"div",98)(11,"span",27),o(12),n()(),t(13,"div",98)(14,"span",27),o(15),n()(),t(16,"div",99)(17,"span"),o(18),n()(),t(19,"div",99)(20,"div",108),p(),t(21,"svg",109),c(22,"path",110),n(),u(),t(23,"span",27),o(24),n()()(),t(25,"div",99)(26,"div",108),p(),t(27,"svg",109),c(28,"path",82),n(),u(),t(29,"span",27),o(30),n()()(),t(31,"div",98)(32,"div",28)(33,"button",111),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.viewLocation(s))}),p(),t(34,"svg",7),c(35,"path",86),n()(),u(),t(36,"button",112),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.editLocation(s))}),p(),t(37,"svg",7),c(38,"path",91),n()(),u(),t(39,"button",113),g("click",function(){let s=x(e).$implicit,f=m(2);return h(f.deleteLocation(s))}),p(),t(40,"svg",7),c(41,"path",93),n()()()()()()}if(r&2){let e=i.$implicit,a=m(2);l(5),d("src",e.type.icon,H)("alt",e.type.name),l(3),v(e.name),l(),d("ngIf",e.description),l(3),v(e.type.name),l(3),w(" ",(e.parent==null?null:e.parent.name)||"Root Level"," "),l(2),M("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-"+a.getHierarchyLevelColor(e.hierarchy_level)+"-100 text-"+a.getHierarchyLevelColor(e.hierarchy_level)+"-800"),l(),w(" ",a.getHierarchyLevelBadge(e.hierarchy_level)," "),l(6),v((e.asset_summary==null?null:e.asset_summary.asset_count)||0),l(6),v((e.children==null?null:e.children.length)||0),l(6),d("disabled",a.loading),l(3),d("disabled",a.loading)}}function Ct(r,i){if(r&1&&(t(0,"div",94)(1,"div",95)(2,"div",96)(3,"div",97),o(4,"Location"),n(),t(5,"div",98),o(6,"Type"),n(),t(7,"div",98),o(8,"Parent"),n(),t(9,"div",99),o(10,"Level"),n(),t(11,"div",99),o(12,"Assets"),n(),t(13,"div",99),o(14,"Children"),n(),t(15,"div",98),o(16,"Actions"),n()()(),t(17,"div",100),_(18,St,42,13,"div",101),n()()),r&2){let e=m();l(18),d("ngForOf",e.locations)}}function Lt(r,i){if(r&1){let e=b();t(0,"div",114),p(),t(1,"svg",115),c(2,"path",79)(3,"path",80),n(),u(),t(4,"h3",116),o(5,"No locations found"),n(),t(6,"p",117),o(7,"Get started by creating your first location."),n(),t(8,"div",118)(9,"button",119),g("click",function(){x(e);let s=m();return h(s.addLocation())}),p(),t(10,"svg",120),c(11,"path",10),n(),o(12," Add Location "),n()()()}}function Mt(r,i){if(r&1){let e=b();t(0,"button",141),g("click",function(){x(e);let s=m(3);return h(s.goToPage(1))}),o(1," 1 "),n()}}function kt(r,i){r&1&&(t(0,"span",142),p(),t(1,"svg",143),c(2,"circle",144)(3,"circle",145)(4,"circle",146),n()())}function Et(r,i){if(r&1){let e=b();t(0,"button",147),g("click",function(){let s=x(e).$implicit,f=m(3);return h(f.goToPage(s))}),o(1),n()}if(r&2){let e=i.$implicit,a=m(3);M(a.pagination.current_page===e?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-gray-500 border-gray-300 hover:bg-gray-50"),d("title","Page "+e),l(),w(" ",e," ")}}function Tt(r,i){r&1&&(t(0,"span",142),p(),t(1,"svg",143),c(2,"circle",144)(3,"circle",145)(4,"circle",146),n()())}function Vt(r,i){if(r&1){let e=b();t(0,"button",141),g("click",function(){x(e);let s=m(3);return h(s.goToPage(s.pagination.last_page))}),o(1),n()}if(r&2){let e=m(3);l(),w(" ",e.pagination.last_page," ")}}function It(r,i){if(r&1){let e=b();t(0,"div",133)(1,"nav",134)(2,"button",135),g("click",function(){x(e);let s=m(2);return h(s.goToPage(s.pagination.current_page-1))}),p(),t(3,"svg",78),c(4,"path",136),n(),u(),t(5,"span"),o(6,"Previous"),n()(),t(7,"div",108),_(8,Mt,2,0,"button",137)(9,kt,5,0,"span",138)(10,Et,2,4,"button",139)(11,Tt,5,0,"span",138)(12,Vt,2,1,"button",137),n(),t(13,"button",140),g("click",function(){x(e);let s=m(2);return h(s.goToPage(s.pagination.current_page+1))}),t(14,"span"),o(15,"Next"),n(),p(),t(16,"svg",7),c(17,"path",86),n()()()()}if(r&2){let e=m(2);l(2),d("disabled",e.pagination.current_page===1),l(6),d("ngIf",e.getVisiblePages()[0]>1),l(),d("ngIf",e.getVisiblePages()[0]>2),l(),d("ngForOf",e.getVisiblePages()),l(),d("ngIf",e.getVisiblePages()[e.getVisiblePages().length-1]<e.pagination.last_page-1),l(),d("ngIf",e.getVisiblePages()[e.getVisiblePages().length-1]<e.pagination.last_page),l(),d("disabled",e.pagination.current_page===e.pagination.last_page)}}function Ot(r,i){if(r&1){let e=b();t(0,"div",148)(1,"div",124)(2,"span"),o(3,"Go to page:"),n(),t(4,"input",149),_e("ngModelChange",function(s){x(e);let f=m(2);return ve(f.jumpToPage,s)||(f.jumpToPage=s),h(s)}),g("keyup.enter",function(){x(e);let s=m(2);return h(s.goToPage(s.jumpToPage))}),n(),t(5,"button",150),g("click",function(){x(e);let s=m(2);return h(s.goToPage(s.jumpToPage))}),o(6," Go "),n()()()}if(r&2){let e=m(2);l(4),Ee("placeholder",e.pagination.current_page),d("min",1)("max",e.pagination.last_page),he("ngModel",e.jumpToPage),l(),d("disabled",!e.jumpToPage||e.jumpToPage<1||e.jumpToPage>e.pagination.last_page)}}function Pt(r,i){if(r&1){let e=b();t(0,"div",121)(1,"div",2)(2,"div",122),o(3," Showing "),t(4,"span",123),o(5),n(),o(6," to "),t(7,"span",123),o(8),n(),o(9," of "),t(10,"span",123),o(11),n(),o(12," results "),n(),t(13,"div",124)(14,"span"),o(15,"Show"),n(),t(16,"select",125),_e("ngModelChange",function(s){x(e);let f=m();return ve(f.pagination.per_page,s)||(f.pagination.per_page=s),h(s)}),g("change",function(s){x(e);let f=m();return h(f.changePerPage(s))}),t(17,"option",126),o(18,"10"),n(),t(19,"option",127),o(20,"15"),n(),t(21,"option",128),o(22,"25"),n(),t(23,"option",129),o(24,"50"),n(),t(25,"option",130),o(26,"100"),n()(),t(27,"span"),o(28,"per page"),n()()(),_(29,It,18,7,"div",131)(30,Ot,7,5,"div",132),n()}if(r&2){let e=m();l(5),v(e.pagination.from),l(3),v(e.pagination.to),l(3),v(e.pagination.total),l(5),he("ngModel",e.pagination.per_page),l(13),d("ngIf",e.pagination.last_page>1),l(),d("ngIf",e.pagination.last_page>10)}}var X=class r{constructor(i,e,a){this.fb=i;this.locationService=e;this.router=a;this.searchForm=this.fb.group({search:[""]}),this.filtersForm=this.fb.group({type_id:[""],parent_id:[""],hierarchy_level:[""],asset_count:[""],sort_by:["created"],sort_direction:["desc"]})}destroy$=new oe;locations=[];locationTypes=[];loading=!1;showFilters=!1;currentView="grid";currentListView="grid";showAddLocationModal=!1;showEditLocationModal=!1;showDeleteConfirmationModal=!1;showBulkCreateModal=!1;selectedLocation=null;pagination={current_page:1,last_page:1,per_page:15,total:0,from:0,to:0};searchForm;filtersForm;jumpToPage;sortOptions=[{value:"created",label:"Created"},{value:"name",label:"Name"},{value:"type",label:"Type"},{value:"updated",label:"Updated"}];hierarchyLevels=[{value:"",label:"All Levels"},{value:"0",label:"Level 0 (Root)"},{value:"1",label:"Level 1"},{value:"2",label:"Level 2"},{value:"3",label:"Level 3"}];assetCountOptions=[{value:"",label:"Any Count"},{value:"0",label:"No Assets"},{value:"1-10",label:"1-10 Assets"},{value:"11-50",label:"11-50 Assets"},{value:"50+",label:"50+ Assets"}];ngOnInit(){this.initializeSearchSubscription(),this.loadLocationTypes(),this.loadLocations()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeSearchSubscription(){this.searchForm.get("search")?.valueChanges.pipe(ye(300),we(),D(this.destroy$)).subscribe(()=>{this.loadLocations()})}loadLocationTypes(){this.locationService.getLocationTypes().pipe(D(this.destroy$)).subscribe({next:i=>{i.success&&(this.locationTypes=i.data.types)},error:i=>{console.error("Error loading location types:",i)}})}loadLocations(i=1){this.loading=!0;let e=this.searchForm.get("search")?.value,a=this.filtersForm.value,s=k({search:e,page:i,per_page:this.pagination.per_page},a);Object.keys(s).forEach(f=>{(s[f]===""||s[f]===null)&&delete s[f]}),this.locationService.getLocations(s).pipe(D(this.destroy$)).subscribe({next:f=>{f.success&&(this.locations=f.data.locations,this.pagination=f.data.pagination),this.loading=!1},error:f=>{console.error("Error loading locations:",f),this.loading=!1}})}setView(i){this.currentView=i}setListView(i){this.currentListView=i}toggleFilters(){this.showFilters=!this.showFilters}applyFilters(){this.loadLocations(1),this.showFilters=!1}clearFilters(){this.filtersForm.reset({type_id:"",parent_id:"",hierarchy_level:"",asset_count:"",sort_by:"created",sort_direction:"desc"}),this.loadLocations(1)}goToPage(i){i>=1&&i<=this.pagination.last_page&&this.loadLocations(i)}getVisiblePages(){let i=this.pagination.current_page,e=this.pagination.last_page,a=[],s=Math.max(1,i-2),f=Math.min(e,i+2);for(let G=s;G<=f;G++)a.push(G);return a}changePerPage(i){this.pagination.per_page=parseInt(i.target.value),this.loadLocations(1)}getLocationTypeIcon(i){return{"Residential Building":"\u{1F3E0}","Office Building":"\u{1F3E2}",Factory:"\u{1F3ED}",Warehouse:"\u{1F3EA}",Garden:"\u{1F333}",Apartment:"\u{1F3E0}",Room:"\u{1F6AA}",Floor:"\u{1F4CB}"}[i.name]||"\u{1F4CD}"}getHierarchyLevelBadge(i){return`L${i}`}getHierarchyLevelColor(i){return["blue","green","yellow","purple"][i]||"gray"}editLocation(i){this.selectedLocation=i,this.showEditLocationModal=!0}deleteLocation(i){this.selectedLocation=i,this.showDeleteConfirmationModal=!0}viewLocation(i){this.router.navigate(["/locations",i.id])}addLocation(){this.showAddLocationModal=!0}closeAddLocationModal(){this.showAddLocationModal=!1}closeEditLocationModal(){this.showEditLocationModal=!1,this.selectedLocation=null}closeDeleteConfirmationModal(){this.showDeleteConfirmationModal=!1,this.selectedLocation=null}openBulkCreateModal(){this.showBulkCreateModal=!0}closeBulkCreateModal(){this.showBulkCreateModal=!1}onLocationCreated(i){this.loadLocations(this.pagination.current_page),this.showAddLocationModal=!1}onLocationUpdated(i){let e=this.locations.findIndex(a=>a.id===i.id);e!==-1&&(this.locations[e]=i),this.showEditLocationModal=!1,this.selectedLocation=null}onLocationDeleted(i){this.locations=this.locations.filter(e=>e.id!==i.id),this.pagination.total=Math.max(0,this.pagination.total-1),this.pagination.to=Math.max(0,this.pagination.to-1),this.locations.length===0&&this.pagination.current_page>1&&this.loadLocations(this.pagination.current_page-1),this.showDeleteConfirmationModal=!1,this.selectedLocation=null}onLocationsCreated(i){this.loadLocations(this.pagination.current_page),this.showBulkCreateModal=!1}exportQR(){console.log("Export QR")}onDocumentClick(i){let e=i.target,a=e.closest(".filter-button"),s=e.closest(".filter-dropdown"),f=e.closest("select"),G=e.tagName==="OPTION";!a&&!s&&!f&&!G&&this.showFilters&&(this.showFilters=!1)}static \u0275fac=function(e){return new(e||r)(L(W),L(T),L(le))};static \u0275cmp=O({type:r,selectors:[["app-locations"]],hostBindings:function(e,a){e&1&&g("click",function(f){return a.onDocumentClick(f)},!1,Me)},decls:68,vars:28,consts:[[1,"bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-6","py-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"flex","items-center","space-x-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","font-medium","hover:bg-blue-700","transition-colors",3,"click"],[1,"flex","items-center","space-x-1","bg-gray-100","rounded-lg","p-1"],[1,"flex-1","px-4","py-2","rounded-md","text-sm","font-medium","transition-all",3,"click"],[1,"bg-white","border-b","border-gray-200","px-6","py-4"],[1,"flex-1","max-w-md",3,"formGroup"],[1,"relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","formControlName","search","placeholder","Search locations...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"filter-button","relative","flex","items-center","space-x-2","px-3","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","filter-dropdown absolute text-start top-full right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 py-4 z-50",4,"ngIf"],[1,"px-6","py-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","space-x-2"],[1,"px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 10h16M4 14h16M4 18h16"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-6",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border border-gray-200",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","mt-8 pt-6 border-t border-gray-200",4,"ngIf"],[3,"closeModal","locationCreated","isOpen"],[3,"closeModal","locationUpdated","isOpen","location"],[3,"closeModal","locationDeleted","isOpen","location"],[3,"closeModal","locationsCreated","isOpen"],[1,"filter-dropdown","absolute","text-start","top-full","right-0","mt-2","w-80","bg-white","rounded-xl","shadow-lg","border","border-gray-200","py-4","z-50"],[1,"p-4",3,"ngSubmit","formGroup"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["formControlName","type_id",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","hierarchy_level",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","asset_count",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value","0"],["value","1-10"],["value","11-50"],["value","51+"],[1,"flex","items-center","justify-between","pt-4","border-t","border-gray-100","mt-4"],["type","button",1,"px-4","py-2","text-gray-600","hover:text-gray-800","font-medium","transition-colors","cursor-pointer",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","cursor-pointer"],[3,"value"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","mb-6"],["class","relative bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-lg hover:border-blue-300 hover:-translate-y-1 transition-all duration-300 cursor-pointer group",4,"ngFor","ngForOf"],[1,"relative","bg-white","rounded-xl","p-6","shadow-sm","border","border-gray-200","hover:shadow-lg","hover:border-blue-300","hover:-translate-y-1","transition-all","duration-300","cursor-pointer","group"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-start","space-x-3"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center","group-hover:bg-orange-200","transition-colors","duration-300"],[1,"w-7","h-7",3,"src","alt"],[1,"text-2xl","font-bold","text-gray-900","group-hover:text-blue-700","transition-colors","duration-300"],[1,"flex","items-center","space-x-2","mt-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"space-y-2","mb-6"],[1,"flex","items-center","text-sm","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"absolute","top-4","right-4","flex","items-center","space-x-1","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-sm","font-medium"],[1,"flex","items-center","justify-between"],[1,"bg-blue-600","text-white","px-6","py-2","rounded-lg","text-sm","font-medium","hover:bg-blue-700","transition-all","duration-300","flex","items-center","space-x-2","hover:shadow-lg","transform","hover:scale-105",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[4,"ngIf"],[1,"p-2","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"p-2","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"p-2","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded-lg","transition-all","duration-300","transform","hover:scale-110","hover:shadow-md","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"px-6","py-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-12","gap-4","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"col-span-3"],[1,"col-span-2"],[1,"col-span-1"],[1,"divide-y","divide-gray-200"],["class","px-6 py-4 hover:bg-gray-50 hover:shadow-sm transition-all duration-200 cursor-pointer group",4,"ngFor","ngForOf"],[1,"px-6","py-4","hover:bg-gray-50","hover:shadow-sm","transition-all","duration-200","cursor-pointer","group"],[1,"grid","grid-cols-12","gap-4","items-center"],[1,"w-10","h-10","bg-blue-100","rounded-lg","flex","items-center","justify-center","group-hover:bg-blue-200","transition-colors","duration-200"],[1,"w-6","h-6",3,"src","alt"],[1,"font-medium","text-gray-900","group-hover:text-blue-700","transition-colors","duration-200"],["class","text-sm text-gray-500",4,"ngIf"],[1,"flex","items-center","space-x-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all","duration-200","hover:scale-110","cursor-pointer",3,"click"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all","duration-200","hover:scale-110","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],[1,"p-1","text-gray-400","hover:text-red-600","hover:bg-red-50","rounded","transition-all","duration-200","hover:scale-110","disabled:opacity-50","disabled:cursor-not-allowed","cursor-pointer",3,"click","disabled"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"flex","items-center","space-x-2","text-sm","text-gray-600"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white",3,"ngModelChange","change","ngModel"],["value","10"],["value","15"],["value","25"],["value","50"],["value","100"],["class","flex items-center justify-center",4,"ngIf"],["class","flex items-center justify-center mt-4",4,"ngIf"],[1,"flex","items-center","justify-center"],["aria-label","Pagination",1,"flex","items-center","space-x-1"],["title","Previous page",1,"flex","items-center","justify-center","px-4","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["class","flex items-center justify-center w-10 h-10 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",3,"click",4,"ngIf"],["class","flex items-center justify-center w-10 h-10 text-gray-400",4,"ngIf"],["class","flex items-center justify-center w-10 h-10 text-sm font-medium border rounded-lg transition-colors",3,"class","title","click",4,"ngFor","ngForOf"],["title","Next page",1,"flex","items-center","justify-center","px-4","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","text-gray-400"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["cx","3","cy","10","r","1.5"],["cx","10","cy","10","r","1.5"],["cx","17","cy","10","r","1.5"],[1,"flex","items-center","justify-center","w-10","h-10","text-sm","font-medium","border","rounded-lg","transition-colors",3,"click","title"],[1,"flex","items-center","justify-center","mt-4"],["type","number",1,"w-16","px-2","py-1","border","border-gray-300","rounded","text-center","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","keyup.enter","min","max","ngModel","placeholder"],[1,"px-3","py-1","bg-blue-600","text-white","rounded","text-sm","hover:bg-blue-700","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),o(5,"Facilities & Locations"),n(),t(6,"p",4),o(7,"Organize and monitor your facilities with hierarchical location management"),n()(),t(8,"div",5)(9,"button",6),p(),t(10,"svg",7),c(11,"path",8),n(),u(),t(12,"span"),o(13,"Export QR"),n()(),t(14,"button",9),g("click",function(){return a.openBulkCreateModal()}),p(),t(15,"svg",7),c(16,"path",10),n(),u(),t(17,"span"),o(18,"Bulk"),n()(),t(19,"button",11),g("click",function(){return a.addLocation()}),p(),t(20,"svg",7),c(21,"path",10),n(),u(),t(22,"span"),o(23,"Add Location"),n()()()(),t(24,"div",12)(25,"button",13),g("click",function(){return a.setView("grid")}),o(26," Grid "),n(),t(27,"button",13),g("click",function(){return a.setView("tree")}),o(28," Tree "),n(),t(29,"button",13),g("click",function(){return a.setView("analytics")}),o(30," Analytics "),n(),t(31,"button",13),g("click",function(){return a.setView("mgmt")}),o(32," Mgmt "),n()()(),t(33,"div",14)(34,"div",2)(35,"form",15)(36,"div",16),p(),t(37,"svg",17),c(38,"path",18),n(),u(),c(39,"input",19),n()(),t(40,"button",20),g("click",function(){return a.toggleFilters()}),p(),t(41,"svg",7),c(42,"path",21),n(),u(),t(43,"span"),o(44,"Filters"),n(),p(),t(45,"svg",22),c(46,"path",23),n(),_(47,ht,34,3,"div",24),n()()(),u(),t(48,"div",25)(49,"div",26)(50,"div",27),o(51),n(),t(52,"div",28)(53,"button",29),g("click",function(){return a.currentListView="grid"}),p(),t(54,"svg",7),c(55,"path",30),n()(),u(),t(56,"button",29),g("click",function(){return a.currentListView="list"}),p(),t(57,"svg",7),c(58,"path",31),n()()()(),_(59,vt,10,0,"div",32)(60,yt,2,1,"div",33)(61,Ct,19,1,"div",34)(62,Lt,13,0,"div",35)(63,Pt,31,6,"div",36),n(),u(),t(64,"app-add-location-modal",37),g("closeModal",function(){return a.closeAddLocationModal()})("locationCreated",function(f){return a.onLocationCreated(f)}),n(),t(65,"app-edit-location-modal",38),g("closeModal",function(){return a.closeEditLocationModal()})("locationUpdated",function(f){return a.onLocationUpdated(f)}),n(),t(66,"app-delete-confirmation-modal",39),g("closeModal",function(){return a.closeDeleteConfirmationModal()})("locationDeleted",function(f){return a.onLocationDeleted(f)}),n(),t(67,"app-bulk-create-modal",40),g("closeModal",function(){return a.closeBulkCreateModal()})("locationsCreated",function(f){return a.onLocationsCreated(f)}),n()()),e&2&&(l(25),M(a.currentView==="grid"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(2),M(a.currentView==="tree"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(2),M(a.currentView==="analytics"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(2),M(a.currentView==="mgmt"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"),l(4),d("formGroup",a.searchForm),l(10),B("rotate-180",a.showFilters),l(2),d("ngIf",a.showFilters),l(4),w(" Showing ",a.locations.length," locations "),l(2),M(a.currentListView==="grid"?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-300"),l(3),M(a.currentListView==="list"?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-300"),l(3),d("ngIf",a.loading),l(),d("ngIf",!a.loading&&a.currentListView==="grid"),l(),d("ngIf",!a.loading&&a.currentListView==="list"),l(),d("ngIf",!a.loading&&a.locations.length===0),l(),d("ngIf",!a.loading&&a.locations.length>0),l(),d("isOpen",a.showAddLocationModal),l(),d("isOpen",a.showEditLocationModal)("location",a.selectedLocation),l(),d("isOpen",a.showDeleteConfirmationModal)("location",a.selectedLocation),l(),d("isOpen",a.showBulkCreateModal))},dependencies:[E,j,P,F,$,ce,de,N,Pe,se,z,R,Fe,je,U,Y,me,Oe,Q,K,pe,ue,ge],styles:[".location-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.location-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.hierarchy-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;padding:.25rem .5rem;border-radius:9999px}.location-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;border-radius:.5rem;font-size:1.25rem}.filter-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:1px solid #e2e8f0}.search-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.search-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 2px 4px #3b82f633}.table-row[_ngcontent-%COMP%]{transition:background-color .15s ease-in-out}.table-row[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.location-grid[_ngcontent-%COMP%], .filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.table-header[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%], .table-row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}}"]})};function At(r,i){r&1&&(t(0,"div",18)(1,"div",19)(2,"div",20),p(),t(3,"svg",21),c(4,"circle",22)(5,"path",23),n()(),u(),t(6,"h3",24),o(7,"Loading Location"),n(),t(8,"p",25),o(9,"Please wait while we fetch the location details..."),n()()())}function Ht(r,i){if(r&1){let e=b();t(0,"div",18)(1,"div",19)(2,"div",26),p(),t(3,"svg",27),c(4,"path",28),n()(),u(),t(5,"h3",24),o(6,"Error Loading Location"),n(),t(7,"p",29),o(8),n(),t(9,"button",30),g("click",function(){x(e);let s=m();return h(s.goBack())}),o(10," Back to Locations "),n()()()}if(r&2){let e=m();l(8),v(e.error)}}function jt(r,i){r&1&&(t(0,"div",80)(1,"div",102),p(),t(2,"svg",103),c(3,"circle",22)(4,"path",23),n()(),u(),t(5,"h3",24),o(6,"Loading Sub-locations"),n(),t(7,"p",25),o(8,"Please wait..."),n()())}function Ft(r,i){if(r&1){let e=b();t(0,"div",113),g("click",function(){let s=x(e).$implicit,f=m(3);return h(f.viewSubLocation(s))}),t(1,"div",114)(2,"div",8)(3,"div",115),p(),t(4,"svg",116),c(5,"path",54),n()(),u(),t(6,"div")(7,"h4",117),o(8),n(),t(9,"div",118)(10,"span"),o(11),n()(),t(12,"div",119),o(13),n()()(),t(14,"div",120)(15,"button",121),g("click",function(s){let f=x(e).$implicit;return m(3).editSubLocation(f),h(s.stopPropagation())}),p(),t(16,"svg",10),c(17,"path",11),n()(),u(),t(18,"button",122),p(),t(19,"svg",10),c(20,"path",123),n()()()(),u(),t(21,"div",124)(22,"div",3)(23,"span",67),o(24,"Assets: "),t(25,"span",125),o(26),n()()(),t(27,"div",3)(28,"span",67),o(29,"Status: "),t(30,"span",126),o(31,"Active"),n()()()()()}if(r&2){let e=i.$implicit;l(8),v(e.name),l(3),v(e.type.name),l(2),v(e.description||e.name),l(13),v((e.asset_summary==null?null:e.asset_summary.asset_count)||0)}}function Gt(r,i){if(r&1&&(t(0,"div",127)(1,"div",128)(2,"div",129),p(),t(3,"svg",130),c(4,"path",131),n()()(),u(),t(5,"div",132),p(),t(6,"svg",133),c(7,"path",54),n()(),u(),t(8,"span",134),o(9),n()()),r&2){let e=i.$implicit;l(9),v(e.name)}}function Bt(r,i){if(r&1&&(t(0,"div",65),_(1,Ft,32,4,"div",104),t(2,"div",105)(3,"h3",106),o(4,"Hierarchy View"),n(),t(5,"div",107)(6,"div",8)(7,"div",108),p(),t(8,"svg",109),c(9,"path",35),n()(),u(),t(10,"div")(11,"h4",110),o(12),n()()()(),t(13,"div",111),_(14,Gt,10,1,"div",112),n()()()),r&2){let e=m(2);l(),d("ngForOf",e.subLocations),l(11),v(e.location==null?null:e.location.name),l(2),d("ngForOf",e.subLocations)}}function Dt(r,i){if(r&1){let e=b();t(0,"div",80)(1,"div",81),p(),t(2,"svg",82),c(3,"path",54),n()(),u(),t(4,"h3",24),o(5,"No Sub-locations"),n(),t(6,"p",83),o(7,"Create sub-locations to organize your space more effectively."),n(),t(8,"button",135),g("click",function(){x(e);let s=m(2);return h(s.addSubLocation())}),p(),t(9,"svg",10),c(10,"path",12),n(),u(),t(11,"span"),o(12,"Add First Sub-location"),n()()()}}function Nt(r,i){if(r&1&&(t(0,"div",136)(1,"div"),p(),t(2,"svg",137),c(3,"path",138),n()(),u(),t(4,"div",139)(5,"h4",125),o(6),n(),t(7,"p",140),o(8),n(),t(9,"p",141),o(10),n()()()),r&2){let e=i.$implicit,a=m(2);l(),M("w-8 h-8 bg-"+a.getActivityColor(e.type)+"-100 rounded-lg flex items-center justify-center"),l(),M("w-4 h-4 text-"+a.getActivityColor(e.type)+"-600"),l(),ke("d",a.getActivityIcon(e.type)),l(3),v(e.title),l(2),v(e.description),l(2),v(e.time)}}function zt(r,i){if(r&1){let e=b();t(0,"div",31)(1,"div",32)(2,"div",2)(3,"div",3)(4,"div",33),p(),t(5,"svg",34),c(6,"path",35),n()(),u(),t(7,"h1",36),o(8),n()(),t(9,"div",8)(10,"button",37),g("click",function(){x(e);let s=m();return h(s.editLocation())}),p(),t(11,"svg",10),c(12,"path",11),n(),u(),t(13,"span"),o(14,"Edit"),n()(),t(15,"button",37),g("click",function(){x(e);let s=m();return h(s.addAsset())}),p(),t(16,"svg",10),c(17,"path",12),n(),u(),t(18,"span"),o(19,"Add Asset"),n()(),t(20,"button",38),g("click",function(){x(e);let s=m();return h(s.deleteLocation())}),p(),t(21,"svg",10),c(22,"path",14),n(),u(),t(23,"span"),o(24,"Delete"),n()()()()(),t(25,"div",39)(26,"div",40)(27,"div",41)(28,"h3",42),o(29,"Total Assets"),n(),t(30,"div",43),p(),t(31,"svg",44),c(32,"path",45),n()()(),u(),t(33,"div",46),o(34),n()(),t(35,"div",40)(36,"div",41)(37,"h3",47),o(38,"Health Score"),n(),t(39,"div",48),p(),t(40,"svg",49),c(41,"path",50),n()()(),u(),t(42,"div",46),o(43),n()(),t(44,"div",40)(45,"div",41)(46,"h3",51),o(47,"Sub-locations"),n(),t(48,"div",52),p(),t(49,"svg",53),c(50,"path",54),n()()(),u(),t(51,"div",46),o(52),n()(),t(53,"div",40)(54,"div",41)(55,"h3",55),o(56,"Total Value"),n(),t(57,"div",56),p(),t(58,"svg",57),c(59,"path",50),n()()(),u(),t(60,"div",46),o(61),n()()(),t(62,"div",58)(63,"div",59)(64,"div",60)(65,"div",61),p(),t(66,"svg",62),c(67,"path",63),n(),u(),t(68,"h2",64),o(69,"Location Overview"),n()(),t(70,"div",65)(71,"div")(72,"h4",66),o(73,"Description"),n(),t(74,"p",67),o(75),n()(),t(76,"div")(77,"h4",66),o(78,"Capacity & Utilization"),n(),t(79,"div",68)(80,"div",69)(81,"span",67),o(82,"Asset Utilization"),n(),t(83,"span",7),o(84,"0%"),n()(),t(85,"div",70),c(86,"div",71),n()(),t(87,"div",72)(88,"div",73),p(),t(89,"svg",74),c(90,"path",75),n(),u(),t(91,"div")(92,"div",64),o(93,"72\xB0F"),n(),t(94,"div",76),o(95,"Temperature"),n()()(),t(96,"div",73),p(),t(97,"svg",77),c(98,"path",78),n(),u(),t(99,"div")(100,"div",64),o(101,"Normal"),n(),t(102,"div",76),o(103,"Status"),n()()()()()()(),t(104,"div",60)(105,"div",61),p(),t(106,"svg",62),c(107,"path",79),n(),u(),t(108,"h2",64),o(109,"Asset Health Dashboard"),n()(),t(110,"div",80)(111,"div",81),p(),t(112,"svg",82),c(113,"path",45),n()(),u(),t(114,"h3",24),o(115,"No Assets Found"),n(),t(116,"p",83),o(117,"This location doesn't have any assets assigned yet."),n(),t(118,"button",30),g("click",function(){x(e);let s=m();return h(s.addAsset())}),o(119," Add Assets "),n()()(),t(120,"div",60)(121,"div",84)(122,"div",73),p(),t(123,"svg",62),c(124,"path",54),n(),u(),t(125,"h2",64),o(126),n()(),t(127,"button",85),g("click",function(){x(e);let s=m();return h(s.addSubLocation())}),p(),t(128,"svg",10),c(129,"path",12),n(),u(),t(130,"span"),o(131,"Add Sub-location"),n()()(),_(132,jt,9,0,"div",86)(133,Bt,15,3,"div",87)(134,Dt,13,0,"div",86),n()(),t(135,"div",88)(136,"div",60)(137,"div",61),p(),t(138,"svg",62),c(139,"path",89),n(),u(),t(140,"h2",64),o(141,"Recent Activity"),n()(),t(142,"div",65),_(143,Nt,11,8,"div",90),n()(),t(144,"div",60)(145,"div",61),p(),t(146,"svg",62),c(147,"path",91),n(),u(),t(148,"h2",64),o(149,"Location QR Code"),n()(),t(150,"div",19)(151,"div",92),c(152,"div",93),n(),t(153,"h4",94),o(154),n(),t(155,"p",95),o(156),n(),t(157,"div",68)(158,"button",96),g("click",function(){x(e);let s=m();return h(s.regenerateQR())}),p(),t(159,"svg",10),c(160,"path",97),n(),u(),t(161,"span"),o(162,"Regenerate"),n()(),t(163,"button",98),g("click",function(){x(e);let s=m();return h(s.downloadQR())}),p(),t(164,"svg",10),c(165,"path",99),n(),u(),t(166,"span"),o(167,"Download"),n()(),t(168,"button",98),g("click",function(){x(e);let s=m();return h(s.printLabel())}),p(),t(169,"svg",10),c(170,"path",100),n(),u(),t(171,"span"),o(172,"Print Label"),n()()(),t(173,"p",101),o(174," Scan this QR code to quickly access location details and view assets. "),n()()()()()()}if(r&2){let e=m();l(8),v(e.location.name),l(26),v(e.mockStats.totalAssets),l(9),w("",e.mockStats.healthScore,"%"),l(9),v(e.mockStats.subLocations),l(9),w("$",e.mockStats.totalValue,""),l(14),v(e.location.description||e.location.name),l(51),w("Sub-locations (",e.mockStats.subLocations,")"),l(6),d("ngIf",e.subLocationsLoading),l(),d("ngIf",!e.subLocationsLoading&&e.subLocations.length>0),l(),d("ngIf",!e.subLocationsLoading&&e.subLocations.length===0),l(9),d("ngForOf",e.mockActivities),l(11),v(e.location.name),l(2),v(e.mockStats.totalAssets)}}function Rt(r,i){if(r&1){let e=b();t(0,"app-add-location-modal",142),g("closeModal",function(){x(e);let s=m();return h(s.closeAddSubLocationModal())})("locationCreated",function(s){x(e);let f=m();return h(f.onSubLocationCreated(s))}),n()}if(r&2){let e=m();d("isOpen",e.showAddSubLocationModal)("parentLocation",e.location)}}var fe=class r{constructor(i,e,a){this.route=i;this.router=e;this.locationService=a}destroy$=new oe;location=null;loading=!0;error="";subLocations=[];subLocationsLoading=!1;showAddSubLocationModal=!1;mockStats={totalAssets:0,healthScore:100,subLocations:0,totalValue:0};mockActivities=[{type:"maintenance",title:"Maintenance Scheduled",description:"Routine maintenance scheduled for next week",time:"about 2 hours ago",icon:"maintenance"},{type:"utilization",title:"High Utilization",description:"Location utilization increased by 15%",time:"about 6 hours ago",icon:"chart"},{type:"safety",title:"Safety Inspection",description:"Monthly safety inspection completed",time:"1 day ago",icon:"shield"}];ngOnInit(){this.route.params.pipe(D(this.destroy$)).subscribe(i=>{let e=i.id;e&&this.loadLocation(parseInt(e))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadLocation(i){this.loading=!0,this.error="",this.locationService.getLocation(i).pipe(D(this.destroy$)).subscribe({next:e=>{e.success?(this.location=e.data.location,this.updateMockStats(),this.loadSubLocations()):this.error=e.message||"Failed to load location",this.loading=!1},error:e=>{this.error=e.error?.message||"An error occurred while loading the location",this.loading=!1}})}loadSubLocations(){if(!this.location)return;this.subLocationsLoading=!0;let i={parent_id:this.location.id,per_page:50};this.locationService.getLocations(i).pipe(D(this.destroy$)).subscribe({next:e=>{e.success&&(this.subLocations=e.data.locations,this.updateMockStats()),this.subLocationsLoading=!1},error:e=>{console.error("Error loading sub-locations:",e),this.subLocationsLoading=!1}})}updateMockStats(){this.location&&(this.mockStats={totalAssets:this.location.asset_summary?.asset_count||0,healthScore:100,subLocations:this.subLocations.length,totalValue:this.location.asset_summary?.total_value||0})}goBack(){this.router.navigate(["/locations"])}editLocation(){this.location&&this.router.navigate(["/locations",this.location.id,"edit"])}addAsset(){console.log("Add asset to location")}deleteLocation(){console.log("Delete location")}addSubLocation(){this.showAddSubLocationModal=!0}closeAddSubLocationModal(){this.showAddSubLocationModal=!1}onSubLocationCreated(i){this.loadSubLocations(),this.showAddSubLocationModal=!1}regenerateQR(){console.log("Regenerate QR code")}downloadQR(){console.log("Download QR code")}printLabel(){console.log("Print label")}getActivityIcon(i){let e={maintenance:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",chart:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6",shield:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"};return e[i]||e.maintenance}getActivityColor(i){return{maintenance:"orange",chart:"purple",shield:"blue"}[i]||"gray"}viewSubLocation(i){this.router.navigate(["/locations",i.id])}editSubLocation(i){console.log("Edit sublocation:",i)}deleteSubLocation(i){console.log("Delete sublocation:",i)}static \u0275fac=function(e){return new(e||r)(L(Ie),L(le),L(T))};static \u0275cmp=O({type:r,selectors:[["app-location-view"]],decls:29,vars:4,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"font-medium"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","space-x-2","px-3","py-2","text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"flex","items-center","space-x-2","px-3","py-2","text-red-600","hover:bg-red-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["class","flex items-center justify-center py-20",4,"ngIf"],["class","px-6 py-6",4,"ngIf"],[3,"isOpen","parentLocation","closeModal","locationCreated",4,"ngIf"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-8","h-8","text-blue-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-red-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","text-gray-500","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"px-6","py-6"],[1,"bg-blue-100","rounded-lg","p-6","mb-6"],[1,"w-12","h-12","bg-blue-200","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"flex","items-center","space-x-2","px-4","py-2","text-gray-700","hover:bg-blue-200","rounded-lg","transition-colors",3,"click"],[1,"flex","items-center","space-x-2","px-4","py-2","text-red-600","hover:bg-red-50","rounded-lg","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"bg-white","rounded-lg","p-4","border","border-gray-200"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-blue-600"],[1,"w-8","h-8","bg-blue-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","font-medium","text-green-600"],[1,"w-8","h-8","bg-green-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"text-sm","font-medium","text-purple-600"],[1,"w-8","h-8","bg-purple-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-sm","font-medium","text-orange-600"],[1,"w-8","h-8","bg-orange-50","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-600"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","p-6","shadow-sm","border","border-gray-200"],[1,"flex","items-center","space-x-2","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"text-gray-600"],[1,"space-y-2"],[1,"flex","justify-between","text-sm"],[1,"w-full","bg-gray-200","rounded-full","h-2"],[1,"bg-blue-600","h-2","rounded-full",2,"width","0%"],[1,"grid","grid-cols-2","gap-4","mt-4"],[1,"flex","items-center","space-x-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"text-xs","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["class","text-center py-12",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"space-y-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","flex items-start space-x-3",4,"ngFor","ngForOf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"w-32","h-32","bg-gray-100","rounded-lg","mx-auto","mb-4","flex","items-center","justify-center"],[1,"w-24","h-24","bg-black",2,"background-image","url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjIxIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIxIiB5PSIxIiB3aWR0aD0iNyIgaGVpZ2h0PSI3IiBmaWxsPSJibGFjayIvPgo8cmVjdCB4PSIxMyIgeT0iMSIgd2lkdGg9IjciIGhlaWdodD0iNyIgZmlsbD0iYmxhY2siLz4KPHJlY3QgeD0iMSIgeT0iMTMiIHdpZHRoPSI3IiBoZWlnaHQ9IjciIGZpbGw9ImJsYWNrIi8+CjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIzIiBoZWlnaHQ9IjMiIGZpbGw9IndoaXRlIi8+CjxyZWN0IHg9IjE1IiB5PSIzIiB3aWR0aD0iMyIgaGVpZ2h0PSIzIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIzIiB5PSIxNSIgd2lkdGg9IjMiIGhlaWdodD0iMyIgZmlsbD0id2hpdGUiLz4KPHJlY3QgeD0iOSIgeT0iOSIgd2lkdGg9IjMiIGhlaWdodD0iMyIgZmlsbD0iYmxhY2siLz4KPC9zdmc+')","background-size","contain","background-repeat","no-repeat","background-position","center"],[1,"font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-600","mb-4"],[1,"w-full","flex","items-center","justify-center","space-x-2","px-3","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"w-full","flex","items-center","justify-center","space-x-2","px-3","py-2","text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"text-xs","text-gray-500","mt-4"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-blue-100","rounded-full","mb-4"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-6","h-6","text-blue-600"],["class","bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-all cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"text-base","font-semibold","text-gray-900","mb-4"],[1,"bg-blue-100","rounded-lg","p-3","mb-2"],[1,"w-6","h-6","bg-blue-200","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-blue-700"],[1,"font-medium","text-blue-800","text-sm"],[1,"space-y-1"],["class","flex items-center space-x-3 p-2 hover:bg-gray-50 rounded transition-colors",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-4","hover:bg-gray-100","transition-all","cursor-pointer",3,"click"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-8","h-8","bg-white","rounded-lg","flex","items-center","justify-center","border","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],[1,"font-semibold","text-gray-900"],[1,"flex","items-center","space-x-2","text-sm","text-gray-500"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","items-center","space-x-1"],[1,"p-1","text-gray-400","hover:text-blue-600","hover:bg-blue-50","rounded","transition-all",3,"click"],[1,"p-1","text-gray-400","hover:text-gray-600","hover:bg-gray-200","rounded","transition-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"],[1,"flex","items-center","justify-between","text-sm"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-600"],[1,"flex","items-center","space-x-3","p-2","hover:bg-gray-50","rounded","transition-colors"],[1,"flex","items-center"],[1,"w-6","h-6","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M12 2v20M2 12h20"],[1,"w-5","h-5","bg-gray-100","rounded","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","text-gray-600"],[1,"text-sm","text-gray-700"],[1,"flex","items-center","space-x-2","mx-auto","px-4","py-2","text-blue-600","hover:bg-blue-50","rounded-lg","transition-colors",3,"click"],[1,"flex","items-start","space-x-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex-1"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500","mt-1"],[3,"closeModal","locationCreated","isOpen","parentLocation"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),g("click",function(){return a.goBack()}),p(),t(5,"svg",5),c(6,"path",6),n(),u(),t(7,"span",7),o(8,"Back to Locations"),n()()(),t(9,"div",8)(10,"button",9),g("click",function(){return a.editLocation()}),p(),t(11,"svg",10),c(12,"path",11),n(),u(),t(13,"span"),o(14,"Edit"),n()(),t(15,"button",9),g("click",function(){return a.addAsset()}),p(),t(16,"svg",10),c(17,"path",12),n(),u(),t(18,"span"),o(19,"Add Asset"),n()(),t(20,"button",13),g("click",function(){return a.deleteLocation()}),p(),t(21,"svg",10),c(22,"path",14),n(),u(),t(23,"span"),o(24,"Delete"),n()()()()(),_(25,At,10,0,"div",15)(26,Ht,11,1,"div",15)(27,zt,175,13,"div",16)(28,Rt,1,2,"app-add-location-modal",17),n()),e&2&&(l(25),d("ngIf",a.loading),l(),d("ngIf",a.error&&!a.loading),l(),d("ngIf",a.location&&!a.loading),l(),d("ngIf",a.location))},dependencies:[E,j,P,Q,K],styles:[".location-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.stats-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.activity-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc;border-radius:.5rem;padding:.75rem;margin:-.75rem}.qr-code-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border:2px dashed #e5e7eb}.qr-code-container[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.action-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.back-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.back-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;border-radius:.5rem;padding:.5rem 1rem;margin:-.5rem -1rem}.overview-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fafbfc)}.utilization-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#1d4ed8);transition:width .3s ease-in-out}.temperature-reading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:.75rem;padding:1rem}.status-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border-radius:.75rem;padding:1rem}.empty-state[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:2px dashed #d1d5db;border-radius:1rem}.empty-state[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:linear-gradient(135deg,#eff6ff,#dbeafe)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%], .main-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.location-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media print{.action-buttons[_ngcontent-%COMP%], .back-button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{border:1px solid #000;background:#fff}}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}*[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.activity-scroll[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.activity-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"]})};var $t=[{path:"",component:X},{path:":id",component:fe}],xe=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=re({type:r});static \u0275inj=ae({imports:[Q.forChild($t),Q]})};var Be=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=re({type:r});static \u0275inj=ae({imports:[E,F,me,xe,X]})};export{Be as LocationsModule};
